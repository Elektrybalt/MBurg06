%!PS-Adobe-2.0
%%Creator: dvips 5.521 Copyright 1986, 1993 Radical Eye Software
%%Title: book.dvi
%%CreationDate: Tue Jan 16 20:06:35 1996
%%Pages: 304
%%PageOrder: Ascend
%%BoundingBox: 0 0 596 842
%%DocumentPaperSizes: A4
%%EndComments
%DVIPSCommandLine: dvips -ta4 book -o
%DVIPSSource:  TeX output 1996.01.16:2001
%%BeginProcSet: tex.pro
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR matrix currentmatrix dup dup 4 get round 4 exch put dup dup 5 get
round 5 exch put setmatrix}N /@landscape{/isls true N}B /@manualfeed{
statusdict /manualfeed true put}B /@copies{/#copies X}B /FMat[1 0 0 -1 0
0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{/nn 8 dict N nn
begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N string /base X
array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N end dup{/foo
setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{/sf 1 N /fntrx
FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]N df-tail}B /E{
pop nn dup definefont setfont}B /ch-width{ch-data dup length 5 sub get}
B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{128 ch-data dup
length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub get 127 sub}B
/ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data dup type
/stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N /rc 0 N /gp
0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup /base get 2
index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx 0 ch-xoff
ch-yoff ch-height sub ch-xoff ch-width add ch-yoff setcachedevice
ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff .1 add]{
ch-image}imagemask restore}B /D{/cc X dup type /stringtype ne{]}if nn
/base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup length 1
sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{cc 1 add D
}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin 0 0
moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul add
.99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore showpage
userdict /eop-hook known{eop-hook}if}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
{}B /RV statusdict begin /product where{pop product dup length 7 ge{0 7
getinterval dup(Display)eq exch 0 4 getinterval(NeXT)eq or}{pop false}
ifelse}{false}ifelse end{{gsave TR -.1 -.1 TR 1 1 scale rulex ruley
false RMat{BDot}imagemask grestore}}{{gsave TR -.1 -.1 TR rulex ruley
scale 1 1 false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave
transform round exch round exch itransform moveto rulex 0 rlineto 0
ruley neg rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta
0 N /tail{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}
B /c{-4 M}B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{
3 M}B /k{4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p
-1 w}B /q{p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{
3 2 roll p a}B /bos{/SS save N}B /eos{SS restore}B end
%%EndProcSet
%%BeginProcSet: special.pro
TeXDict begin /SDict 200 dict N SDict begin /@SpecialDefaults{/hs 612 N
/vs 792 N /ho 0 N /vo 0 N /hsc 1 N /vsc 1 N /ang 0 N /CLIP 0 N /rwiSeen
false N /rhiSeen false N /letter{}N /note{}N /a4{}N /legal{}N}B
/@scaleunit 100 N /@hscale{@scaleunit div /hsc X}B /@vscale{@scaleunit
div /vsc X}B /@hsize{/hs X /CLIP 1 N}B /@vsize{/vs X /CLIP 1 N}B /@clip{
/CLIP 2 N}B /@hoffset{/ho X}B /@voffset{/vo X}B /@angle{/ang X}B /@rwi{
10 div /rwi X /rwiSeen true N}B /@rhi{10 div /rhi X /rhiSeen true N}B
/@llx{/llx X}B /@lly{/lly X}B /@urx{/urx X}B /@ury{/ury X}B /magscale
true def end /@MacSetUp{userdict /md known{userdict /md get type
/dicttype eq{userdict begin md length 10 add md maxlength ge{/md md dup
length 20 add dict copy def}if end md begin /letter{}N /note{}N /legal{}
N /od{txpose 1 0 mtx defaultmatrix dtransform S atan/pa X newpath
clippath mark{transform{itransform moveto}}{transform{itransform lineto}
}{6 -2 roll transform 6 -2 roll transform 6 -2 roll transform{
itransform 6 2 roll itransform 6 2 roll itransform 6 2 roll curveto}}{{
closepath}}pathforall newpath counttomark array astore /gc xdf pop ct 39
0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}if}N
/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1 -1
scale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3 get
ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip yflip
not and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub neg 0
TR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{noflips{TR
pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop 90 rotate 1
-1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg
TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr 1 get neg
sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr 2 get ppr
0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4 -1 roll add
2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S TR}if}N /cp
{pop pop showpage pm restore}N end}if}if}N /normalscale{Resolution 72
div VResolution 72 div neg scale magscale{DVImag dup scale}if 0 setgray}
N /psfts{S 65781.76 div N}N /startTexFig{/psf$SavedState save N userdict
maxlength dict begin /magscale false def normalscale currentpoint TR
/psf$ury psfts /psf$urx psfts /psf$lly psfts /psf$llx psfts /psf$y psfts
/psf$x psfts currentpoint /psf$cy X /psf$cx X /psf$sx psf$x psf$urx
psf$llx sub div N /psf$sy psf$y psf$ury psf$lly sub div N psf$sx psf$sy
scale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub TR
/showpage{}N /erasepage{}N /copypage{}N /p 3 def @MacSetUp}N /doclip{
psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll newpath 4 copy 4 2
roll moveto 6 -1 roll S lineto S lineto S lineto closepath clip newpath
moveto}N /endTexFig{end psf$SavedState restore}N /@beginspecial{SDict
begin /SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count /ocount X /dcount countdictstack N}N /@setspecial
{CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto
closepath clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx
sub div rhiSeen{rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR
}{rhiSeen{rhi ury lly sub div dup scale llx neg lly neg TR}if}ifelse
CLIP 2 eq{newpath llx lly moveto urx lly lineto urx ury lineto llx ury
lineto closepath clip}if /showpage{}N /erasepage{}N /copypage{}N newpath
}N /@endspecial{count ocount sub{pop}repeat countdictstack dcount sub{
end}repeat grestore SpecialSave restore end}N /@defspecial{SDict begin}
N /@fedspecial{end}B /li{lineto}B /rl{rlineto}B /rc{rcurveto}B /np{
/SaveX currentpoint /SaveY X N 1 setlinecap newpath}N /st{stroke SaveX
SaveY moveto}N /fil{fill SaveX SaveY moveto}N /ellipse{/endangle X
/startangle X /yrad X /xrad X /savematrix matrix currentmatrix N TR xrad
yrad scale 0 0 1 startangle endangle arc savematrix setmatrix}N end
%%EndProcSet
TeXDict begin @defspecial

userdict begin /bop-hook{gsave /Times-Roman findfont 11 scalefont setfont
240 35 moveto (Copyright K.J.Gough 1995) show 110 110 translate 90
rotate /Times-Roman findfont 90 scalefont setfont 0 0 moveto 0.95 setgray
(16JAN96 DRAFT) show grestore}def end
 
@fedspecial end TeXDict begin
39158280 55380996 1000 300 300 (/export/home/gough/text/draft/book.dvi)
@start /Fa 4 107 df<0000060000000600000006000000030000000300000001800000
00C000000060FFFFFFFCFFFFFFFC00000060000000C00000018000000300000003000000
060000000600000006001E127E9023>33 D<007800C00180030003000300030003000300
0300030003000300030006000C00F0000C00060003000300030003000300030003000300
030003000300018000C000780D217E9812>102 D<F0000C000600030003000300030003
00030003000300030003000300018000C0007800C0018003000300030003000300030003
00030003000300030006000C00F0000D217E9812>I<C0C0C0C0C0C0C0C0C0C0C0C0C0C0
C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C002217C980A>106
D E /Fb 1 4 df<0C000C00CCC0EDC07F800C007F80EDC0CCC00C000C000A0B7D8B10>3
D E /Fc 1 9 df<03FFFC00001F8000000F0000000F0000000F0000000F0000003FC000
01EF7800078F1E000E0F07001E0F07803C0F03C07C0F03E0780F01E0F80F01F0F80F01F0
F80F01F0F80F01F0F80F01F0F80F01F0780F01E07C0F03E03C0F03C01E0F07800E0F0700
078F1E0001EF7800003FC000000F0000000F0000000F0000000F0000001F800003FFFC00
1C227DA123>8 D E /Fd 4 93 df<0000700001F00003C0000780000E00001C00003800
00700000700000F00000E00000E00000E00000E00000E00000E00000E00000E00000E000
00E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E000
00E00000E00000E00000E00000E00000E00000E00000E00000E00001C00001C00001C000
0380000700000600000E0000380000700000C000007000003800000E0000060000070000
03800001C00001C00001C00000E00000E00000E00000E00000E00000E00000E00000E000
00E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E000
00E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000F000007000
007000003800001C00000E000007800003C00001F000007014637B811F>26
D<FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF0FF800001FF003F800001FC001F800001F
8001F800001F8001F800001F8001F800001F8001F800001F8001F800001F8001F800001F
8001F800001F8001F800001F8001F800001F8001F800001F8001F800001F8001F800001F
8001F800001F8001F800001F8001F800001F8001F800001F8001F800001F8001F800001F
8001F800001F8001F800001F8001F800001F8001F800001F8001F800001F8001F800001F
8001F800001F8001F800001F8001F800001F8001F800001F8001F800001F8001F800001F
8001F800001F8001F800001F8001F800001F8001F800001F8001F800001F8001F800001F
8001F800001F8001F800001F8001F800001F8001F800001F8001F800001F8001F800001F
8001F800001F8001F800001F8001F800001F8001F800001F8001F800001F8003FC00003F
C00FFF0000FFF0FFFFF00FFFFFFFFFF00FFFFFFFFFF00FFFFF303A7E7F35>89
D<E00000000380E00000000380E00000000380E00000000380E00000000380E000000003
80E00000000380E00000000380E00000000380E00000000380E00000000380E000000003
80E00000000380E00000000380E00000000380E00000000380E00000000380E000000003
80E00000000380E00000000380E00000000380E00000000380E00000000380E000000003
80E00000000380E00000000380E00000000380E00000000380E00000000380E000000003
80E00000000380E00000000380E00000000380E00000000380E00000000380E000000003
80E00000000380E00000000380E00000000380E00000000380E00000000380E000000003
80700000000700700000000700700000000700380000000E00380000000E001C0000001C
001E0000003C000E000000380007000000700007C00001F00003E00003E00000F8000F80
00007F007F0000001FFFFC00000007FFF000000000FF800000293A7E7F2E>91
D<0000FF8000000007FFF00000001FFFFC0000007F007F000000F8000F800003E00003E0
0007C00001F0000700000070000E00000038001E0000003C001C0000001C00380000000E
00380000000E00700000000700700000000700700000000700E00000000380E000000003
80E00000000380E00000000380E00000000380E00000000380E00000000380E000000003
80E00000000380E00000000380E00000000380E00000000380E00000000380E000000003
80E00000000380E00000000380E00000000380E00000000380E00000000380E000000003
80E00000000380E00000000380E00000000380E00000000380E00000000380E000000003
80E00000000380E00000000380E00000000380E00000000380E00000000380E000000003
80E00000000380E00000000380E00000000380E00000000380E00000000380E000000003
80E00000000380E00000000380E00000000380E00000000380293A7E7F2E>I
E /Fe 10 58 df<1E0061804080C0C0C0C0C0C0C0C0C0C0C0C0C0C0408061801E000A0D
7E8C0E>48 D<18F818181818181818181818FF080D7D8C0E>I<3E00418080C0C0C000C0
00C0018003000400084030407F80FF800A0D7E8C0E>I<3E0041006180018003001E0001
8000C000C0C0C0C0C041803E000A0D7E8C0E>I<0300070007000B00130023006300C300
FFC00300030003000FC00A0D7E8C0E>I<60807F005C00400040005F00618000C000C0C0
C080C041803E000A0D7E8C0E>I<0F00318061806000C000DE00E180C0C0C0C0C0C060C0
21801E000A0D7E8C0E>I<40007FE07FC0808081000200020004000C0008001800180018
0018000B0E7E8D0E>I<1E0021006180618071003E003F006380C0C0C0C0C0C061803F00
0A0D7E8C0E>I<1E006100C080C0C0C0C0C0C061C01EC000C00080618063003C000A0D7E
8C0E>I E /Ff 1 28 df<00000200000E00003E0001FE0007FE003FFE01FFFE0FFFFEFF
FFFEFFFFFE0FFFFE01FFFE003FFE0007FE0001FE00003E00000E00000217127E882A>27
D E /Fg 4 20 df<7F8000000000FFF800000000FFFF000000007FFFE000000000FFF800
0000000FFE0000000001FF80000000003FC0000000000FF00000000003F80000000000FC
00000000007E00000000001F00000000000F800000000007C00000000003E00000000001
F00000000000F800000000007800000000007C00000000003E00000000001E0000000000
1F00000000000F00000000000F800000000007800000000007C00000000003C000000000
03C00000000003E00000000001E00000000001E00000000001F00000000000F000000000
00F00000000000F00000000000F800000000007800000000007800000000007800000000
00780000000000780000000000780000000000780000000000382D2DA98353>16
D<0000000000100000000000380000000000780000000000780000000000780000000000
780000000000780000000000780000000000780000000000F80000000000F00000000000
F00000000000F00000000001F00000000001E00000000001E00000000003E00000000003
C00000000003C00000000007C0000000000780000000000F80000000000F00000000001F
00000000001E00000000003E00000000007C0000000000780000000000F80000000001F0
0000000003E00000000007C0000000000F80000000001F00000000007E0000000000FC00
00000003F8000000000FF0000000003FC000000001FF800000000FFE00000000FFF80000
007FFFE0000000FFFF00000000FFF8000000007F80000000002D2EA9AD53>I<20000000
0000700000000000F00000000000F00000000000F00000000000F00000000000F0000000
0000F00000000000F00000000000F8000000000078000000000078000000000078000000
00007C00000000003C00000000003C00000000003E00000000001E00000000001E000000
00001F00000000000F00000000000F800000000007800000000007C00000000003C00000
000003E00000000001F00000000000F00000000000F800000000007C00000000003E0000
0000001F00000000000F800000000007C00000000003F00000000001F80000000000FE00
000000007F80000000001FE0000000000FFC0000000003FF8000000000FFF8000000003F
FFF800000007FFFC00000000FFFC000000000FF82E2E80AD53>I<000000000FF8000000
00FFFC00000007FFFC0000003FFFF8000000FFF800000003FF800000000FFC000000001F
E0000000007F8000000000FE0000000001F80000000003F00000000007C0000000000F80
000000001F00000000003E00000000007C0000000000F80000000000F00000000001F000
00000003E00000000003C00000000007C0000000000780000000000F80000000000F0000
0000001F00000000001E00000000001E00000000003E00000000003C00000000003C0000
0000007C0000000000780000000000780000000000780000000000F80000000000F00000
000000F00000000000F00000000000F00000000000F00000000000F00000000000F00000
0000007000000000002E2D808353>I E /Fh 16 123 df<0FE003000300060006000600
06000C000C000C000C00180218021804180C301CFFF80F117D9015>76
D<0FC003F001C0038001C0058002C00B0002600B00026013000260230004602600046046
00043086000431060008310C0008320C0008340C00081C0C0018181800FE10FF001C117E
901D>I<0F80FE01C01001C010026020026020023020023020041840041840040C40040C
40080680080680080380080380180100FE010017117E9018>I<072018E0306060606060
C0C0C0C0C0C841C862D03C600D0B7E8A11>97 D<0780184030C060006000C000C000C000
402060C01F000B0B7E8A0E>99 D<007800180018003000300030073018E0306060606060
C0C0C0C0C0C841C862D03C600D117E9010>I<040C000000000030589898303060646468
3006127E910B>105 D<3C000C000C00180018001800187031903230340038007F006180
61906190C1A0C0C00C117E9010>107 D<7818183030303060606060C0C0C8C8D0600511
7E900A>I<71F09A189C18981818183030303030323062606460380F0B7E8A13>110
D<73C05C209860980018003000300030003000600060000B0B7E8A0E>114
D<0F001080218020003E001F0001808080C00083007C00090B7D8A0F>I<08181818FF30
303030606062646438080F7E8E0C>I<0F381144218C218001800300030003084310C730
79C00E0B7F8A11>120 D<381048308C309830183030603060306030E031C00EC000C041
80C18086007C000C107E8A10>I<0E101FE020400080010006000800102020407FC08380
0C0B7E8A0F>I E /Fi 17 122 df<1FE07078E03CF03CF03C6038007000E00180030003
00030003000300000000000000000007000F800F800F8007000E177E9613>63
D<0FE0003838003C1C003C1E00181E00001E0000FE000F9E003C1E00781E00F01E00F01E
00F01E00786FC01F87C0120F7F8E14>97 D<07F81C0E381E781E700CF000F000F000F000
F0007000780038061C0C07F80F0F7F8E12>99 D<001F80001F8000078000078000078000
078000078000078003F7801E1F80380780780780700780F00780F00780F00780F00780F0
0780700780780780380F801E1FE007E7E013177F9617>I<07F01C18380C78067007F007
F007FFFFF000F0007000780038031E0603FC100F7F8E13>I<0FE700183B80301B80701C
00701C00701C00701C003018001830002FE0002000003000003FF8003FFE003FFF007007
80E00380E00380E00380700700380E000FF80011167F8E14>103
D<FC0000FC00003C00003C00003C00003C00003C00003C00003C7C003D8E003E0F003E0F
003C0F003C0F003C0F003C0F003C0F003C0F003C0F003C0F003C0F00FF3FC0FF3FC01217
7E9617>I<387C7C7C3800000000FCFC3C3C3C3C3C3C3C3C3C3C3CFFFF08187F970B>I<FC
FC3C3C3C3C3C3C3C3C3C3C3C3C3C3C3C3C3C3C3CFFFF08177F960B>108
D<FC7E0FC0FD8730E03E07C0F03E07C0F03C0780F03C0780F03C0780F03C0780F03C0780
F03C0780F03C0780F03C0780F03C0780F0FF1FE3FCFF1FE3FC1E0F7E8E23>I<FC7C00FD
8E003E0F003E0F003C0F003C0F003C0F003C0F003C0F003C0F003C0F003C0F003C0F00FF
3FC0FF3FC0120F7E8E17>I<07F0001C1C00380E00700700700700F00780F00780F00780
F00780F00780700700700700380E001C1C0007F000110F7F8E14>I<FDFC00FF0F003C03
803C03C03C01C03C01E03C01E03C01E03C01E03C01E03C01C03C03C03C07803F0F003DF8
003C00003C00003C00003C0000FF0000FF000013157E8E17>I<F870F99C3A3C3A3C3C18
3C003C003C003C003C003C003C003C00FF80FF800E0F7F8E11>114
D<1FF060704030C030E000FF007FE03FF00FF80078C018C018E010F020CFC00D0F7F8E10
>I<0C000C000C000C001C001C003FE0FFE03C003C003C003C003C003C003C003C303C30
3C303C301E6007C00C157F9410>I<FE07C0FE07C03C03001E06001E06000F0C000F0C00
0F9C0007980007F80003F00003F00001E00001E00000C00000C000618000F18000F30000
E600007C000012157F8E15>121 D E /Fj 3 100 df<00F1800389C00707800E03801C03
803C0380380700780700780700780700F00E00F00E00F00E00F00E10F01C20F01C20703C
20705C40308C400F078014147E9318>97 D<07803F8007000700070007000E000E000E00
0E001C001C001CF01D0C3A0E3C0E380F380F700F700F700F700FE01EE01EE01EE01CE03C
E038607060E031C01F0010207E9F14>I<007C0001C3000700800E07801E07801C07003C
0200780000780000780000F00000F00000F00000F00000F0000070010070020030040018
38000FC00011147E9314>I E /Fk 2 42 df<0040008001000300060004000C00180018
0038003000300070006000600060006000E000E000E000E000E000E000E000E000E000E0
00E000E00060006000600060007000300030003800180018000C00040006000300010000
8000400A2E7BA112>40 D<8000400020003000180008000C000600060007000300030003
80018001800180018001C001C001C001C001C001C001C001C001C001C001C001C0018001
80018001800380030003000700060006000C000800180030002000400080000A2E7EA112
>I E /Fl 1 113 df<60F0F0600404828104>112 D E /Fm 15 119
df<60F0F06004047D830B>58 D<60F0F07010101020204040040B7D830B>I<00000E0000
3C0000F00003C0000F00003C0000F00003C0000F00003C0000F00000F000003C00000F00
0003C00000F000003C00000F000003C00000F000003C00000E17167D931E>I<E0000078
00001E000007800001E000007800001E000007800001E000007800001E00001E00007800
01E0000780001E0000780001E0000780001E0000780000E0000017167D931E>62
D<03F001FE0078007000780020005C0020009C0040008E0040008E0040008E0040010700
800107008001038080010380800201C1000201C1000201C1000200E1000400E200040072
000400720004003A0008003C0008003C0008001C0018001C0038000800FF0008001F1A7E
991F>78 D<03E606171C0E380E300E700E601CE01CE01CE01CE039C039E0396079219A1E
0E10107F8F14>97 D<7E000E000E000E001C001C001C001C003800380039E03E10781870
1C700C701CE01CE01CE01CE018E038C030E07060E021801F000E1A7F9910>I<01F0070C
0C0C181C300870006000E000E000E000E000E004E008601030600F800E107F8F11>I<00
0FC00001C00001C00001C000038000038000038000038000070000070003E7000617001C
0E00380E00300E00700E00601C00E01C00E01C00E01C00E03900C03900E0390060790021
9A001E0E00121A7F9914>I<01F006081C04380470047008FFF0E000E000E000E000E004
6008601030600F800E107F8F12>I<383E0F804CC330C08F03C0E08F03C0E08E0380E08E
0380E01C0701C01C0701C01C0701C01C070380380E0388380E0388380E0708380E071070
1C0320300C01C01D107E8F22>109 D<703E0058C7009D03809E03809C03809C03803807
00380700380700380E00700E40700E40701C40701C80E00C8060070012107E8F17>I<30
F059189E389C189C009C0038003800380038007000700070007000E00060000D107E8F11
>114 D<03E006180818183818301C001FC00FE007F000700030E030E030806040C03F00
0D107E8F12>I<380C4C0E4E0E8E069C069C061C04380438043808700870083010382018
400F800F107E8F13>118 D E /Fn 6 116 df<00007F00800003808100000E0063000038
0027000070001F0000E0000E0001C0000E000380000E000700000E000F000004000E0000
04001E000004003C000004003C00000800780000000078000000007800000000F0000000
00F000000000F000000000F000000000F000000000E000000000E000002000E000002000
E000004000E000004000F00000800070000080007000010000380002000018000400001C
0008000006003000000381C0000000FE000000212479A223>67 D<00FFFFFF000F000F00
0F0003000F0003001E0003001E0003001E0002001E0002003C0002003C0002003C010200
3C010000780200007802000078060000780E0000FFFC0000F00C0000F00C0000F00C0001
E0080001E0080001E0080001E0000003C0000003C0000003C0000003C000000780000007
80000007800000078000000F800000FFF8000020227DA120>70 D<00007F008000038081
00000E00630000380027000070001F0000E0000E0001C0000E000380000E000700000E00
0F000004000E000004001E000004003C000004003C000008007800000000780000000078
00000000F000000000F000000000F000000000F000000000F0003FFC00E00001E000E000
01E000E00001E000E00003C000E00003C000F00003C000700003C0007000078000380007
800018000F80001C0013800006002300000381C1000000FE000000212479A226>I<0000
3E0000470000CF00018F0001860003800003800003800007000007000007000007000007
00000E0000FFF0000E00000E00000E00001C00001C00001C00001C00001C000038000038
0000380000380000380000700000700000700000700000700000E00000E00000E00000E0
0000C00001C00001C000718000F18000F300006200003C0000182D82A20F>102
D<01C1F002621804741C08780C08700E08700E08701E00E01E00E01E00E01E00E01E01C0
3C01C03C01C03C01C07803807003807003C0E003C1C0072380071E000700000700000E00
000E00000E00000E00001C00001C00001C0000FFC000171F7F9419>112
D<00FC000183000200800401800C03800C03000C00000F00000FF00007FC0003FE00003E
00000F00000700700700F00600F00600E004004008002030001FC00011157D9414>115
D E /Fo 16 120 df<04000C001C003C00FC004C000C000C000C000C000C000C000C000C
000C000C007F807F8009127E910F>49 D<1F003FC060E0C030E030403000300030006000
C001C0038006000C00180030307FF07FF00C127F910F>I<1F003FC060E0706020600060
00C00F800FC000E0006000300030E030E060E0E07FC01F000C127F910F>I<038007800F
800D801D801980318071806180E180FFF0FFF0018001800180018007E007E00C127F910F
>I<60F0F060000000000060F0F0703060C08004117B8C0F>59 D<3E007F00718020C000
C01FC03FC060C0C0C0C0C061C07FF81E780D0D7F8C0F>97 D<F000F00030003000300033
803FE03C7038303018301830183018301838303C703FE013800D1280910F>I<0F803FC0
71C06080C000C000C000C000C00060C070C03F800F000A0D7E8C0F>I<0F001F8030C060
C0C060C060FFE0FFE0C000606030601FC00F800B0D7F8C0F>101
D<0E701FF8319060C060C060C060C031803F006E0060003F807FC06060C030C030C03060
603FC01F800D147F8C0F>103 D<08001C0008000000000000007C007C000C000C000C00
0C000C000C000C000C000C00FF80FF8009137D920F>105 D<FC00FC000C000C000C000C
000C000C000C000C000C000C000C000C000C000C00FFC0FFC00A127E910F>108
D<F3C0FFE03C3038303030303030303030303030303030FCFCFCFC0E0D808C0F>110
D<3F807F80C180C180E0007E001F00018040C0C0C0E0C0FF80DF000A0D7E8C0F>115
D<0800180018007FC0FFC01800180018001800180018001860186018600FC007800B107F
8F0F>I<F9F0F9F06060606060606F606F606F602F402F4039C039C039C00C0D7F8C0F>
119 D E /Fp 12 118 df<000300000300000700000B00000B0000130000230000230000
418000418000818001018001FF800201800601800401800800C00800C01800C0FC07F014
147E9319>65 D<07E000FC00E000E0016001C0016002C0016002C0016004C00260098002
30098002301180023021800430230004304300043083000418830008190600081A060008
1A0600081C060018180C00FE187F801E147E931E>77 D<07FFC000C07001803001801801
80180180180300300300300300600301C007FE000600000600000600000C00000C00000C
00000C0000180000FF000015147E9317>80 D<07FF8000C0600180300180180180180180
180300300300600301C003FE000603800601800600C00600C00C01800C01800C01800C01
84180188FF00F016147E9319>82 D<FC03F03000C0300080300100300100300200300400
1804001808001810001810001820001840001C40000C80000D00000D00000E00000E0000
0C00001414799319>86 D<07B00C7010703060606060606060C0C0C0C8C0C841C862D03C
700D0D7C8C12>97 D<03C00C2018303020600060006000C000C0004010602030C01F000C
0D7D8C10>99 D<003C000C0018001800180018003007B00C7010703060606060606060C0
C0C0C8C0C841C862D03C700E147C9312>I<3C0C181818183030303060606060C0C8C8C8
D06006147D9309>108 D<03800C6018203030603060306030C060C06040C0608023001E
000C0D7C8C12>111 D<0700188018C0308038001E001F0003800180C180810082007C00
0A0D7D8C0E>115 D<38184C184C188C3098301830183030603064306430E411E80E300E
0D7D8C12>117 D E /Fq 28 122 df<FFC0FFC0FFC00A0380870D>45
D<70F8F8F87005057D840B>I<FFFF80FFFFE01E01F01E00F81E00F81E00F81E00F81E00
F01E01E01FFFC01E01F01E00F81E007C1E007C1E007C1E007C1E00F81E01F8FFFFF0FFFF
C016147E931B>66 D<FFFFE0FFFFE01E01E01E00601E00701E00301E0C301E0C001E1C00
1FFC001FFC001E1C001E0C181E0C181E00181E00381E00701E00F0FFFFF0FFFFF015147E
9319>69 D<FFFFE0FFFFE01E01E01E00601E00701E00301E0C301E0C001E1C001FFC001F
FC001E1C001E0C001E0C001E00001E00001E00001E0000FFE000FFE00014147E9318>I<
00FF0C03FFDC0FC07C1F003C3C001C7C000C78000CF80000F80000F80000F80000F807FF
F807FF78003C7C003C3C003C1F003C0FC03C03FFFC00FFCC18147E931D>I<FFFF00FFFF
C01E01F01E00F01E00F81E00F81E00F81E00F81E00F01E03E01FFFC01E00001E00001E00
001E00001E00001E00001E0000FFC000FFC00015147E931A>80 D<0FE23FFE701EE00EE0
06E006F000FE007FF03FF80FFE00FE000F0007C007C007E006F00EFFFC8FF010147E9315
>83 D<1FE000787000783800783C00303C0001FC001F3C00783C00F03C00F03C00F03C00
785F803F8F80110D7F8C12>97 D<FC0000FC00003C00003C00003C00003C00003C00003D
F8003F0E003C07003C03803C03C03C03C03C03C03C03C03C03C03C03803C07003E0E0031
F80012147F9315>I<07F01C3C383C703CF018F000F000F000F0007000380C1C1807F00E
0D7F8C11>I<003F00003F00000F00000F00000F00000F00000F0007EF001C1F00380F00
700F00F00F00F00F00F00F00F00F00F00F00700F00380F001C3FC007EFC012147F9315>
I<0FC01C7038387018F01CF01CFFFCF000F0007000380C1C1807F00E0D7F8C11>I<387C
7C7C38000000FCFC3C3C3C3C3C3C3C3C3CFFFF08157F940B>105
D<FC0000FC00003C00003C00003C00003C00003C00003C3F003C3F003C38003C60003DC0
003FC0003FE0003CF0003C78003C38003C1C00FF3F80FF3F8011147F9314>107
D<FCFC3C3C3C3C3C3C3C3C3C3C3C3C3C3C3C3CFFFF08147F930B>I<FC7C1F00FD8E6380
3E0F83C03C0F03C03C0F03C03C0F03C03C0F03C03C0F03C03C0F03C03C0F03C03C0F03C0
FF3FCFF0FF3FCFF01C0D7F8C1F>I<FC7C00FD8E003E0F003C0F003C0F003C0F003C0F00
3C0F003C0F003C0F003C0F00FF3FC0FF3FC0120D7F8C15>I<07E01C38781E700EF00FF0
0FF00FF00FF00F700E781E3C3C07E0100D7F8C13>I<FDF800FF0E003C07003C03803C03
C03C03C03C03C03C03C03C03C03C07803C07003E0E003DF8003C00003C00003C00003C00
00FF0000FF000012137F8C15>I<07E3001C3700381F00780F00F00F00F00F00F00F00F0
0F00F00F00700F00380F001C3F0007EF00000F00000F00000F00000F00003FC0003FC012
137F8C14>I<F8E0F9783A783A783C303C003C003C003C003C003C00FF00FF000D0D7F8C
10>I<1FE060E0C060C060FE007FC03FE01FF00070C030C030F060DF800C0D7F8C0F>I<0C
000C000C001C001C003FC0FFC03C003C003C003C003C003C003C603C603C601C400F800B
127F910F>I<FC3F00FC3F003C0F003C0F003C0F003C0F003C0F003C0F003C0F003C0F00
3C1F001C3FC00FCFC0120D7F8C15>I<FE0F80FE0F803C06001E0C001E0C000F18000F18
0007B00007B00003E00003E00001C00001C000110D7F8C14>I<FE3F80FE3F801E18000F
300007E00003E00003E00003F00007F8000E78001C3C00FC3F80FC3F80110D7F8C14>
120 D<FE0F80FE0F803C06001E0C001E0C000F18000F180007B00007B00003E00003E000
01C00001C000018000618000F38000F30000E6000078000011137F8C14>I
E /Fr 10 119 df<60F0F070101020204040040A7D830A>59 D<001F8200E04403802C07
001C0C001C1C0008380008300008700008600000E00000E00000E00000C00000C00020C0
0020C00040E000406000806001003002001C1C0007E00017177E9619>67
D<07F007F800F000C000B8008000B80080009C0080011C0100011E0100010E0100010E01
00020702000207020002038200020382000401C4000401C4000400E4000400E400080078
0008007800080038000800380018001000FE0010001D177F961C>78
D<001FC000707001C01803001C06000C0E000E1C000E18000E38000E30000E70000E7000
0E70000E70001CE0001C6000387000387000707000E03801C01803800E0E0003F0001717
7F961B>I<07FFF800E00E00E00700E00700E00701C00701C00701C00701C00E03801C03
807003FFC00380000700000700000700000700000E00000E00000E00000E00001C0000FF
800018177F9616>I<001FC000707001C03803001C06000C0E000E1C000E18000E38000E
30000E70000E70000E70000E60001CE0001C60003860003870007070F0E03109C0190B80
0F0E0003F810000810000C30000C60000FC0000FC0000700171D7F961C>I<7C00180018
00180018003000300030003000678068C070406060C060C060C060C06080C080C08180C1
0046003C000B177E960F>98 D<07C00C20107020706000C000C000C00080008000C010C0
2060C03F000C0E7E8D0F>I<30F049184E384C309C001800180018003000300030003000
600060000D0E7F8D10>114 D<1C0426064606460686040C040C040C0418081808181018
200C6007800F0E7F8D11>118 D E /Fs 15 123 df<0180038006000C00180038003000
70007000E000E000E000E000E000E000E000700070003000380018000C00060003800180
09197B9612>40 D<80C06030181C0C0E0E070707070707070E0E0C1C183060C08008197C
9612>I<0038007801F003E00F801F003C00F800F000F8003C001F000F8003E001F00078
00380D117E9212>60 D<00F800F8003800380038003807B81FF8387870386038E038E038
E038E0386038707838781FFE0FBE0F147F9312>100 D<07801FE0387070706038E038FF
F8FFF8E0006000703838381FF007C00D0E7E8D12>I<007E00FF01C70382038003807FFE
FFFE03800380038003800380038003800380038003803FF83FF81014809312>I<F800F8
00380038003800380039E03FF03E383C3838383838383838383838383838383838FE3EFE
3E0F147F9312>104 D<06000F000F0006000000000000007F007F000700070007000700
070007000700070007000700FFF0FFF00C157D9412>I<F9E0FFF03E383C383838383838
3838383838383838383838FE3EFE3E0F0E7F8D12>110 D<0F803FE038E07070E038E038
E038E038E038F078707038E03FE00F800D0E7E8D12>I<FC78FDFC1F9C1E081E001C001C
001C001C001C001C001C00FFC0FFC00E0E7E8D12>114 D<1FF03FF06070C070E0007F00
3FE00FF000786018E018F030FFE0DFC00D0E7E8D12>I<06000E000E000E007FF8FFF80E
000E000E000E000E000E000E000E1C0E1C0E1C07F801E00E127F9112>I<FC7EFC7E3838
38381C701C701C700EE00EE00EE00EE007C007C003800F0E7F8D12>118
D<3FFC7FFC7038707000E001C0038007000E001C1C381C701CFFFCFFFC0E0E7F8D12>
122 D E /Ft 34 123 df<FFFFFF80FFFFFF8019027D8A20>0 D<60F0F06004047C8B0C>
I<400020C000606000C03001801803000C0600060C0003180001B00000E00000E00001B0
00031800060C000C06001803003001806000C0C0006040002013147A9320>I<00040000
000600000006000000060000000600000006000000060000000600000006000000060000
000600000006000000060000FFFFFFE0FFFFFFE000060000000600000006000000060000
00060000000600000006000000060000000600000006000000060000FFFFFFE0FFFFFFE0
1B1C7E9A20>6 D<03C00FF01FF83FFC7FFE7FFEFFFFFFFFFFFFFFFF7FFE7FFE3FFC1FF8
0FF003C010107E9115>15 D<FFFFFFE07FFFFFE000000000000000000000000000000000
000000000000000000000000FFFFFFE0FFFFFFE000000000000000000000000000000000
0000000000000000000000007FFFFFE0FFFFFFE01B147E9320>17
D<007FFF8001FFFF80078000000E00000018000000300000003000000060000000600000
00C0000000C0000000C0000000C0000000C0000000C0000000C000000060000000600000
003000000030000000180000000E0000000780000001FFFF80007FFF8000000000000000
0000000000000000000000000000000000000000007FFFFF807FFFFF8019227D9920>I<
7FFF00007FFFC0000000F0000000380000000C0000000600000006000000030000000300
000001800000018000000180000001800000018000000180000001800000030000000300
000006000000060000000C00000038000000F0007FFFC0007FFF00000000000000000000
0000000000000000000000000000000000000000FFFFFF00FFFFFF0019227D9920>I<00
0001800000078000001E00000078000001E00000078000001E00000078000001E0000007
8000001E00000078000000E0000000780000001E0000000780000001E000000078000000
1E0000000780000001E0000000780000001E000000078000000180000000000000000000
000000000000000000000000000000000000007FFFFF00FFFFFF8019227D9920>I<C000
0000F00000003C0000000F00000003C0000000F00000003C0000000F00000003C0000000
F00000003C0000000F000000038000000F0000003C000000F0000003C000000F0000003C
000000F0000003C000000F0000003C00000070000000C000000000000000000000000000
0000000000000000000000000000000000007FFFFF00FFFFFF8019227D9920>I<00C000
00000180000000018000000001800000000300000000030000000006000000000C000000
001C000000003000000000FFFFFFFFF0FFFFFFFFF030000000001C000000000C00000000
06000000000300000000030000000001800000000180000000018000000000C000000024
167D942A>32 D<00000030000000001800000000180000000018000000000C000000000C
0000000006000000000300000000038000000000C0FFFFFFFFF8FFFFFFFFF800000000C0
0000000380000000030000000006000000000C000000000C000000001800000000180000
00001800000000300025167E942A>I<00400000C00000C00000C00001E00001E00003F0
0006D8000CCC0038C700F0C3C0C0C0C000C00000C00000C00000C00000C00000C00000C0
0000C00000C00000C00000C00000C00000C00000C00000C00000C00000C00000C00000C0
0000C00000C00000C00000C00000C00000C00012257F9C15>I<007FF801FFF80780000E
0000180000300000300000600000600000C00000C00000C00000FFFFF8FFFFF8C00000C0
0000C000006000006000003000003000001800000E000007800001FFF8007FF8151A7D96
1C>50 D<0000600000600000C00000C00001800001800001800003000003000006000006
00000C00000C0000180000180000180000300000300000600000600000C00000C0000180
000180000300000300000300000600000600000C00000C00001800001800003000003000
00300000600000600000C0000040000013287A9D00>54 D<C0C0C0C0C0C0E0E0C0C0C0C0
C0C0030E7E9000>I<400004C0000C600018600018600018300030300030300030180060
1800601FFFE00FFFC00C00C00C00C0060180060180030300030300030300018600018600
01860000CC0000CC0000CC00007800007800007800003000003000161E809C17>I<FFFF
C0FFFFC00000C00000C00000C00000C00000C00000C00000C00000C00000C00000C00000
C03FFFC07FFFC00000C00000C00000C00000C00000C00000C00000C00000C00000C00000
C00000C00000C0FFFFC0FFFFC0121D7E9C17>I<FFFFFFE0FFFFFFE0000C0000000C0000
000C0000000C0000000C0000000C0000000C0000000C0000000C0000000C0000000C0000
000C0000000C0000000C0000000C0000000C0000000C0000000C0000000C0000000C0000
000C0000000C0000000C0000000C0000000C0000000400001B1C7D9B21>62
D<00040000000C0000000C0000000C0000000C0000000C0000000C0000000C0000000C00
00000C0000000C0000000C0000000C0000000C0000000C0000000C0000000C0000000C00
00000C0000000C0000000C0000000C0000000C0000000C0000000C0000000C0000FFFFFF
E0FFFFFFE01B1C7D9B21>I<003FFF8001FFFF000700C0000C01C0001C03800030038000
2007000000070000000F0000000F0000000E0000000E0000001E0000001E0000001C0000
001C0000003C0000003800000038000000780000007000000070000000E0000000E00C00
01C01800018030007FFFE000FFFF8000191C819B17>73 D<003FFF000001FFFFE000071E
0FF000081C01F800381C00F800703C007800603C007800C03C007800003C007000003800
7000003800E000007800C0000078018000007802000000700C00000071F0000000F3F000
0000E1F0000000E0F8000001E0F8000001C07C000001C07C000003C03C000003803E0180
03803E070007801F060007001F880006000FF0000C0007C000211D809B23>82
D<400002C00006C00006C00006C00006C00006C00006C00006C00006C00006C00006C000
06C00006C00006C00006C00006C00006C00006C0000660000C60000C3000181C00700F01
E003FF8000FE00171A7E981C>91 D<00FE0003FF800F01E01C007030001860000C60000C
C00006C00006C00006C00006C00006C00006C00006C00006C00006C00006C00006C00006
C00006C00006C00006C00006C00006C00006400002171A7E981C>I<0010000038000038
00006C00006C00006C0000C60000C6000183000183000301800301800600C00600C00600
C00C00600C006018003018003030001830001830001860000C60000CC00006C00002171A
7E981C>94 D<C00002C0000660000C60000C3000183000183000181800301800300C0060
0C00600600C00600C00600C003018003018001830001830000C60000C600006C00006C00
006C00003800003800001000171A7E981C>I<4000C000C000C000C000C000C000C000C0
00C000C000C000C000C000C000C000C000C000C000C000C000C000C000C000C000C000C0
00C000C000C000C000C000C000C000C000C000C000C000C000C000FF807F80092A7A9E12
>98 D<008001800180018001800180018001800180018001800180018001800180018001
800180018001800180018001800180018001800180018001800180018001800180018001
8001800180018001800180FF80FF80092A7E9E12>I<003C00E001C00180038003800380
0380038003800380038003800380038003800380030007001C00F0001C00070003000380
038003800380038003800380038003800380038003800380018001C000E0003C0E297D9E
15>102 D<F0001C00070003000380038003800380038003800380038003800380038003
800380018001C000E0003C00E001C0018003800380038003800380038003800380038003
80038003800380030007001C00F0000E297D9E15>I<C0C0C0C0C0C0C0C0C0C0C0C0C0C0
C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C002297B9E0C>106
D<000000004000000000C000000001800000000180000000030000000003000000000600
00000006000000000C000000000C00000000180000000018000000003000000000300000
000060000000006000000000C000000000C0000000018000000001800000000300000C00
0300003C000600004E000600008E000C000007000C000007001800000380180000038030
0000038030000001C060000001C060000000E0C0000000E0C00000007180000000718000
00003B000000003B000000001E000000001E000000000C000000000C000000222A7E8123
>112 D<02000700070007000700070007000200020002007270FFF87270020002000700
070007000700070007000700070007000700070007000700070007000700070002000200
02000200020002000D267E9C12>121 D<02000700070007000700020002004210FFF8FF
F802000200020007000700070007000200000002000700070007000700020002000200FF
F8FFF8421002000200070007000700070002000D257E9C12>I E
/Fu 46 122 df<0007F000181800303800203000600000600000600000600000C00007FF
E000C06000C06000C0600180C00180C00180C00180C00181800301900301900301900301
A00300E0060000060000660000E40000C80000700000151D819614>12
D<38787838081010204080050A79960B>39 D<18387838081010204080050A7E830B>44
D<FFFE08027D870D>I<00F00308040C0904090611061106220C240C18180030006000C0
0300040018002004200C7C18C7F081E00F157D9412>50 D<00F8010C0206050609060906
0A040E0C0018007003E000300010001000186030E030C020806041803F000F157D9412>
I<000C000C000C0018001800180030003000600060004000C00180011802180630043008
3010307F6080FE0060006000C000C000C000800F1B7F9412>I<00F0030806080C381838
100030003000678068C07040E060C060C060C060C0C0C0C0C080C10042003C000D157B94
12>54 D<13822F8438CC60784018801080200020004000C0008001800180030003000300
0600060006000C000C000F157B9412>I<00F8010C060604060C060C060E0C0F1807B003
C007F00CF83078601C601CC018C018C010602030C01F000F157D9412>I<000180000180
000380000380000780000780000B800013800013800021C00021C00041C00081C00081C0
0101C001FFC00201C00201C00401C00801C00801C01801E0FE07F815177E961A>65
D<03FFF000E03800E01C00E00C00E00C01C00C01C01C01C01C01C03803807003FFC003FF
E00380700700300700380700380700380E00700E00700E00E00E01C01C0380FFFE001617
7E9619>I<003F0400E0880380580600380C00381C0010380010300010700010600000E0
0000E00000E00000C00000C00040C00040C00080E00080E0010060020030040018180007
E00016177A961A>I<03FFF000E01800E00C00E00600E00701C00301C00301C00301C003
03800703800703800703800707000E07000E07000C07001C0E00180E00300E00600E00C0
1C0380FFFC0018177E961B>I<07FE00E000E000E000E001C001C001C001C00380038003
80038007000700070007000E000E000E000E001C00FF800F177E960E>73
D<03FE0000E00000E00000E00000E00001C00001C00001C00001C0000380000380000380
000380000700000700200700200700400E00400E00C00E00800E01801C0780FFFF001317
7E9616>76 D<03F0003F8000F000780000B800780000B800B80000B80138000138017000
013802700001380270000138047000023808E000021C08E000021C10E000021C10E00004
1C21C000041C41C000041C41C000041C81C000081D038000081D038000080E038000080E
038000180C070000FE083FE00021177E9620>I<03F00FE000F0030000F0020000B80200
00B80200011C0400011C0400011C0400010E0400020E0800020E08000207080002070800
0403900004039000040390000401D0000801E0000800E0000800E0000800E00018004000
FE0040001B177E961A>I<03FFE000E03800E01C00E00C00E00C01C01C01C01C01C01C01
C0380380700380E003FF800380000700000700000700000700000E00000E00000E00000E
00001C0000FF800016177E9618>80 D<03FFE000E03800E01C00E01C00E01C01C01C01C0
1C01C01C01C0380380700381C003FF000381800700C00700E00700E00700E00E01C00E01
C00E01C20E01C21C00C4FF807817177E961A>82 D<007C40018280030180060180060180
0C01000C01000E00000E00000FC00007F80003FC00007C00000E00000E00000600200600
400C00400C00600800601000D8600087C00012177D9614>I<7FC1FC1C00601C00401C00
401C0040380080380080380080380080700100700100700100700100E00200E00200E002
00E00200E00400E00800E008006030003040001F8000161779961A>85
D<03FC3F8000F00E00007008000070100000782000003860000038C000001C8000001D00
00001E0000000E0000000E0000001F000000370000002700000047800000838000010380
000203C0000401C0000C01C0001C01E000FE07F80019177E961A>88
D<081020404080E0F0F0E0050A79960B>96 D<03900C70187030303060606060606060C0
C0C0C840C841C862D01C700D0E7C8D12>I<7C0018001800180018003000300030003000
678068C070406060C060C060C060C06080C080C08180C10046003C000B177C9610>I<07
C00C6030E020E06000C000C000C00080008000C020C04061803E000B0E7C8D10>I<003E
000C000C000C000C001800180018001803B00C70187030303060606060606060C0C0C0C8
40C841C862D01C700F177C9612>I<07801840302060206040FF80C000C000C000C000C0
20C04061803E000B0E7C8D10>I<001C0036003E006C00600060006000C000C007F800C0
00C000C00180018001800180018003000300030003000200060006006600E400C8007000
0F1D81960B>I<01C4063C0C1C181C1818301830183018203020302030307011E00E6000
60006060C0E0C0C3807E000E147E8D10>I<1F0006000600060006000C000C000C000C00
19E01A301C10181030303030303030306060606460C460C8C048C0700E177D9612>I<03
0706000000000000182C4C4C8C18181830326264243808177D960B>I<3E0C0C0C0C1818
18183030303060606060C0C8C8C8D06007177D9609>108 D<30783C00498CC6004E0502
004C0602009C0E0600180C0600180C0600180C060030180C0030180C8030181880301818
806030090060300E00190E7D8D1D>I<3078498C4E044C049C0C180C180C180C30183019
303130316012601C100E7D8D14>I<078018C0304060606060C060C060C06080C080C081
80C10046003C000B0E7B8D12>I<0C3812C41306130626060606060606060C0C0C0C0C18
0C101A2019C018001800300030003000FC000F147F8D12>I<30F04B184E384C30980018
00180018003000300030003000600060000D0E7D8D0F>114 D<07800C4018E018E03800
1E001F8007C000C060C0E0C0C180C3003E000B0E7D8D0F>I<060006000C000C000C000C
00FF80180018001800300030003000300060006100610062006400380009147D930C>I<
38042C0C4C0C4C0C8C18181818181818303030323032307218B40F1C0F0E7D8D13>I<38
102C184C184C188C10181018101810302030203040304018800F000D0E7D8D10>I<3804
104C0C184C0C184C0C188C18101818101818101818103030203030203030201030401858
80078F00150E7D8D18>I<0E3C1346218E218C430003000300030006000608C608E610CA
2071C00F0E7E8D10>I<38042C0C4C0C4C0C8C18181818181818303030303030307018E0
0F60006000C0E0C0E18043003C000E147D8D11>I E /Fv 31 124
df<FFF0FFF0FFF00C0380890F>45 D<FFFFF000FFFFFC000F807E000F801F000F801F80
0F801F800F801F800F801F800F801F800F801F000F803E000F807C000FFFF8000F803E00
0F801F000F800F800F800FC00F800FC00F800FC00F800FC00F800FC00F800F800F801F80
0F803F00FFFFFE00FFFFF0001A1A7E991F>66 D<001FE02000FFFCE003F80FE007C003E0
1F8001E01F0000E03E0000E07E0000607C000060FC000000FC000000FC000000FC000000
FC000000FC000000FC000000FC0000007C0000607E0000603E0000601F0000C01F8000C0
07C0038003F80F0000FFFC00001FF0001B1A7E9920>I<FFF8FFF80F800F800F800F800F
800F800F800F800F800F800F800F800F800F800F800F800F800F800F800F800F800F80FF
F8FFF80D1A7E9911>73 D<FFFC00FFFC000F80000F80000F80000F80000F80000F80000F
80000F80000F80000F80000F80000F80000F80000F80000F800C0F800C0F800C0F801C0F
801C0F80380F80780F80F8FFFFF8FFFFF8161A7E991B>76 D<FF800FFCFFC00FFC0FE000
C00FF000C00DF000C00CF800C00C7C00C00C3E00C00C3F00C00C1F00C00C0F80C00C07C0
C00C03E0C00C03F0C00C01F0C00C00F8C00C007CC00C003EC00C003FC00C001FC00C000F
C00C0007C00C0003C00C0003C0FFC001C0FFC000C01E1A7E9923>78
D<003FC00001E0780007801E000F000F001F000F803E0007C03E0007C07C0003E07C0003
E0FC0003F0FC0003F0FC0003F0FC0003F0FC0003F0FC0003F0FC0003F0FC0003F07C0003
E07E0007E03E0007C03E0007C01F000F800F801F0007C03E0001E07800003FC0001C1A7E
9921>I<07F0401FFDC03C0FC07803C07001C0F001C0F000C0F000C0F80000FF00007FF8
003FFF001FFF800FFFC001FFE0000FE00003F00001F0C000F0C000F0C000F0E000E0F001
E0FC03C0EFFF8083FE00141A7E9919>83 D<FFF81FF8FFF81FF80F8001800F8001800F80
01800F8001800F8001800F8001800F8001800F8001800F8001800F8001800F8001800F80
01800F8001800F8001800F8001800F8001800F8001800F8001800780030007C0030003C0
060001F01C00007FF800001FE0001D1A7E9922>85 D<1FF000383C007C1E007C0F007C0F
00380F00000F0000FF000FCF003E0F007C0F00F80F00F80F00F80F00F817007C27E01FC3
E013117F9015>97 D<FC0000FC00003C00003C00003C00003C00003C00003C00003C0000
3CFE003F87803E01C03C01E03C00F03C00F03C00F83C00F83C00F83C00F83C00F83C00F0
3C00F03C01E03E01C03B078030FE00151A7E9919>I<03FC000F0E001C1F003C1F00781F
00780E00F80000F80000F80000F80000F800007800007800003C01801C03000F060003FC
0011117F9014>I<0007E00007E00001E00001E00001E00001E00001E00001E00001E003
F9E00F07E01C03E03C01E07801E07801E0F801E0F801E0F801E0F801E0F801E07801E078
01E03C01E01C03E00F0DF803F9F8151A7F9919>I<03F0000E1C001C0E003C0700780700
780780F80780F80780FFFF80F80000F800007800007800003C01801C03000E060003FC00
11117F9014>I<00FE0003C700078F800F0F800F0F800F07000F00000F00000F0000FFF0
00FFF0000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00
000F00000F00003FE0003FE000111A80990E>I<07F1C01C1EE0380EE0780FC0780F0078
0F00780F00780F00380E001C1C0037F0002000003000003000003FFE001FFF801FFFC070
03C0E000E0E000E0E000E0E000E07001C03C078007FC0013197F9016>I<FC0000FC0000
3C00003C00003C00003C00003C00003C00003C00003C3E003CC7803D03803E03C03E03C0
3C03C03C03C03C03C03C03C03C03C03C03C03C03C03C03C03C03C03C03C0FF0FF0FF0FF0
141A7E9919>I<3C7E7E7E7E3C00000000FCFC3C3C3C3C3C3C3C3C3C3C3C3C3CFFFF081B
7E9A0D>I<FC0000FC00003C00003C00003C00003C00003C00003C00003C00003C1FC03C
1FC03C0E003C1C003C38003C60003CC0003FE0003FF0003E78003C38003C1C003C1E003C
0F003C0700FF0FE0FF0FE0131A7E9917>107 D<FCFC3C3C3C3C3C3C3C3C3C3C3C3C3C3C
3C3C3C3C3C3C3C3CFFFF081A7E990D>I<FC3E03E0FCC78C783D0390383E03E03C3E03E0
3C3C03C03C3C03C03C3C03C03C3C03C03C3C03C03C3C03C03C3C03C03C3C03C03C3C03C0
3C3C03C03CFF0FF0FFFF0FF0FF20117E9025>I<FC3E00FCC7803D03803E03C03E03C03C
03C03C03C03C03C03C03C03C03C03C03C03C03C03C03C03C03C03C03C0FF0FF0FF0FF014
117E9019>I<03F8000E0E003C07803803807803C07803C0F803E0F803E0F803E0F803E0
F803E0F803E07803C07C07C03C07800E0E0003F80013117F9016>I<FCFE00FF87803E03
C03C01E03C01F03C00F03C00F83C00F83C00F83C00F83C00F83C00F03C01F03C01E03E03
C03F07803CFE003C00003C00003C00003C00003C0000FF0000FF000015187E9019>I<F8
F0F9383A7C3A7C3C7C3C383C003C003C003C003C003C003C003C003C00FF80FF800E117E
9012>114 D<1FD820784018C018C018F000FF807FE03FF007F8003CC00CC00CE00CE008
F830CFE00E117F9011>I<06000600060006000E000E001E003FF0FFF01E001E001E001E
001E001E001E001E001E181E181E181E181E180F3003E00D187F9711>I<FC0FC0FC0FC0
3C03C03C03C03C03C03C03C03C03C03C03C03C03C03C03C03C03C03C03C03C03C03C07C0
3C07C01E0BF007F3F014117E9019>I<FF03F0FF03F03E01C01E01801F03800F03000F03
0007860007860003CC0003CC0003FC0001F80001F80000F00000F00000600014117F9017
>I<FF1FE1F8FF1FE1F83C0780601E0780C01E07C0C01E0DC1C00F0DC1800F1DE1800798
E3000798F30007B0730003F0760003F07E0003E03E0001E03C0001E03C0000C018001D11
7F9020>I<FFFFF81501808A16>123 D E /Fw 15 123 df<60F0F06004047D8A0B>1
D<8000C0C001C0600300300600180C000C180006300003600001C00001C0000360000630
000C1800180C00300600600300C001C08000C012127A911E>I<07801FE03FF07FF87FF8
FFFCFFFCFFFCFFFCFFFCFFFC7FF87FF83FF01FE007800E107E9013>15
D<C00000F000003C00000F000003C00000F000003C00000F000003C00000F000003C0000
0E00003C0000F00003C0000F00003C0000F00003C0000F00003C0000700000C000000000
000000000000000000000000000000007FFFFCFFFFFE171F7D971E>21
D<0180000001800000030000000300000006000000060000000C00000018000000300000
00FFFFFFFFFFFFFFFF30000000180000000C000000060000000600000003000000030000
00018000000180000020147D9226>32 D<00000180000000018000000000C000000000C0
0000000060000000006000000000300000000018000000000C00FFFFFFFF80FFFFFFFF80
0000000C000000001800000000300000000060000000006000000000C000000000C00000
00018000000001800021147E9226>I<00400000C00000C00000C00001E00003F00003F0
000EDC003CCF00F0C3C040C08000C00000C00000C00000C00000C00000C00000C00000C0
0000C00000C00000C00000C00000C00000C00000C00000C00000C00000C00000C00000C0
0000C00000C0001221809913>I<007FE003FFE00780000C000018000030000030000060
0000600000C00000C00000FFFFE0FFFFE0C00000C0000060000060000030000030000018
00000C000007800003FFE0007FE013187D941A>50 D<C0C0C0C0C0C0E0E0C0C0C0C0C0C0
030E7E8F00>55 D<400008C00018C00018C00018C00018C00018C00018C00018C00018C0
0018C00018C00018C00018C00018C00018C00018C000186000303000601E03C00FFF8001
FC0015167E951A>91 D<003C00E001C00380038003800380038003800380038003800380
03800380038007001E00F8001E0007000380038003800380038003800380038003800380
03800380038001C000E0003C0E257E9B13>102 D<F8001E000700038003800380038003
800380038003800380038003800380038001C000E0003C00E001C0038003800380038003
800380038003800380038003800380038007001E00F8000E257E9B13>I<C0C0C0C0C0C0
C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C002257C9B0B
>106 D<0200070007000700070007000200020002007270FFF872700200020007000700
070007000700070007000700070007000700070007000700020002000200020002000D21
7E9912>121 D<0200070007000700070002004210FFF8FFF80200020007000700070007
00020000000200070007000700070002000200FFF8FFF842100200070007000700070002
000D217E9912>I E /Fx 80 125 df<00FCF807839C0E079C1C07081C07001C07001C07
001C07001C0700FFFFE01C07001C07001C07001C07001C07001C07001C07001C07001C07
001C07001C07001C07007F1FE01617809615>11 D<00FC000782000E07001C07001C0200
1C00001C00001C00001C0000FFFF001C07001C07001C07001C07001C07001C07001C0700
1C07001C07001C07001C07001C07007F1FC01217809614>I<00FF000707000E07001C07
001C07001C07001C07001C07001C0700FFFF001C07001C07001C07001C07001C07001C07
001C07001C07001C07001C07001C07001C07007F1FC01217809614>I<60F0F0F0F0F060
60606060606060600000000060F0F06004177D960A>33 D<60C0F1E0F1E070E010201020
20402040408040800B0A7F9612>I<60F0F070101020204040040A7D960A>39
D<0102040C1818303070606060E0E0E0E0E0E0E0E0E0E060606070303018180C04020108
227D980E>I<8040203018180C0C0E060606070707070707070707070606060E0C0C1818
3020408008227E980E>I<60F0F070101020204040040A7D830A>44
D<FF80FF80090280870C>I<60F0F06004047D830A>I<0008001800300030003000600060
006000C000C000C0018001800180030003000600060006000C000C000C00180018001800
300030003000600060006000C000C0000D217E9812>I<07C018303018701C600C600CE0
0EE00EE00EE00EE00EE00EE00EE00EE00E600C600C701C30181C7007C00F157F9412>I<
06000E00FE000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E00
0E000E00FFE00B157D9412>I<0F8030E040708030C038E0384038003800700070006000
C00180030006000C08080810183FF07FF0FFF00D157E9412>I<0FE030306018701C701C
001C00180038006007E000300018000C000E000EE00EE00EC00C401830300FE00F157F94
12>I<00300030007000F001F001700270047008701870107020704070C070FFFE007000
7000700070007003FE0F157F9412>I<01F00608080C181C301C70006000E000E3E0EC30
F018F00CE00EE00EE00E600E600E300C3018183007C00F157F9412>54
D<40007FFE7FFC7FF8C008801080200040008000800100030003000200060006000E000E
000E000E000E0004000F167E9512>I<07E018302018600C600C700C78183E101F6007C0
0FF018F8607C601EC00EC006C006C004600C38300FE00F157F9412>I<60F0F060000000
00000060F0F060040E7D8D0A>58 D<60F0F06000000000000060F0F07010102020404004
147D8D0A>I<FFFFFCFFFFFC000000000000000000000000000000000000FFFFFCFFFFFC
160A7E8C1B>61 D<001000003800003800003800005C00005C00005C00008E00008E0000
8E0001070001070002038002038002038007FFC00401C00401C00800E00800E01800F038
00F0FE03FE17177F961A>65 D<FFFE001C03801C00E01C00601C00701C00701C00701C00
701C00E01C01C01FFF801FFFC01C00E01C00701C00301C00381C00381C00381C00381C00
701C00E01C01C0FFFF0015177F9619>I<00FC100383300E00B01C007038003030003070
0010600010E00010E00000E00000E00000E00000E00000E0001060001070001030002038
00201C00400E008003830000FC0014177E9619>I<FFFF001C01C01C00E01C00301C0038
1C00181C001C1C000C1C000E1C000E1C000E1C000E1C000E1C000E1C000E1C000C1C001C
1C001C1C00381C00301C00601C01C0FFFF0017177F961B>I<FFFFE01C00E01C00601C00
201C00101C00101C00101C04001C04001C04001C0C001FFC001C0C001C04001C04081C04
081C00081C00181C00101C00101C00301C00F0FFFFF015177F9618>I<FFFFE01C00E01C
00601C00201C00101C00101C00101C04001C04001C04001C0C001FFC001C0C001C04001C
04001C04001C00001C00001C00001C00001C00001C0000FFC00014177F9617>I<007E08
0381980600580C0038180018300018700008700008E00008E00000E00000E00000E00000
E003FEE000387000387000383000381800380C00380600380380D8007F0817177E961C>
I<FF83FE1C00701C00701C00701C00701C00701C00701C00701C00701C00701C00701FFF
F01C00701C00701C00701C00701C00701C00701C00701C00701C00701C0070FF83FE1717
7F961A>I<FFE00E000E000E000E000E000E000E000E000E000E000E000E000E000E000E
000E000E000E000E000E000E00FFE00B177F960D>I<0FF800E000E000E000E000E000E0
00E000E000E000E000E000E000E000E000E000E000E0E0E0E0E0C1C061801F000D177E96
12>I<FF80FE1C00781C00601C00401C00801C01001C06001C08001C10001C38001C7800
1C9C001D0E001E0E001C07001C03801C01C01C01C01C00E01C00701C00781C007CFF80FF
18177F961B>I<FFC0001C00001C00001C00001C00001C00001C00001C00001C00001C00
001C00001C00001C00001C00001C00201C00201C00201C00601C00601C00401C00C01C03
C0FFFFC013177F9616>I<FE0003F81E0003C0170005C0170005C0170005C0138009C013
8009C011C011C011C011C011C011C010E021C010E021C0107041C0107041C0107041C010
3881C0103881C0101D01C0101D01C0100E01C0100E01C0380E01C0FE040FF81D177F9620
>I<FC00FE1E00381F001017001013801011C01011C01010E01010701010381010381010
1C10100E10100F101007101003901001D01001D01000F0100070100030380030FE001017
177F961A>I<00FC000303000E01C01C00E0380070300030700038600018E0001CE0001C
E0001CE0001CE0001CE0001CE0001C7000387000383000303800701C00E00E01C0030300
00FC0016177E961B>I<FFFE001C03801C00C01C00601C00701C00701C00701C00701C00
601C00C01C03801FFE001C00001C00001C00001C00001C00001C00001C00001C00001C00
001C0000FF800014177F9618>I<FFFC001C03801C00C01C00E01C00701C00701C00701C
00701C00E01C00C01C03801FFE001C07801C01C01C00E01C00E01C00E01C00E01C00E01C
00E11C00E11C0072FF803C18177F961A>82 D<0FC4302C601C400CC004C004C004E00070
007F003FE00FF801FC001C000E0006800680068006C004E008D81087E00F177E9614>I<
7FFFF8603818403808403808803804803804803804003800003800003800003800003800
00380000380000380000380000380000380000380000380000380000380003FF8016177F
9619>I<FF80FE1C00381C00101C00101C00101C00101C00101C00101C00101C00101C00
101C00101C00101C00101C00101C00101C00101C00100E0020060020030040018180007E
0017177F961A>I<FF007E3C00381C00101C00100E00200E00200F006007004007004003
808003808003C18001C10001C10000E20000E20000F20000740000740000380000380000
380000100017177F961A>I<FF07FC3F803C00E00E001C00E004001C00E004001C017004
000E017008000E017008000E023808000702381000070238100007041C100003841C2000
03841C200003880E200001C80E400001C80E400001D007400000F007800000F007800000
F007800000E00380000060030000006003000021177F9624>I<FF83FC1F01E00E008007
008007810003820001C20001E40000E800007800007800003800007C00005E00008E0001
87000107800203800601C00401E00C00E01C00F0FF03FE17177F961A>I<FF803F801E00
1C000E00080007001000078030000380200001C0400001E0400000E0800000F180000071
0000003A0000003E0000001C0000001C0000001C0000001C0000001C0000001C0000001C
0000001C0000001C000000FF8000191780961A>I<FFFF80F00700C00700C00E00801E00
801C0080380000780000700000E00000E00001C0000380000380000700800F00800E0080
1C01803C0100380100700300700F00FFFF0011177E9616>I<FCFCC0C0C0C0C0C0C0C0C0
C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0FCFC06217D980A>I<20402040408040
8081008100E1C0F1E0F1E060C00B0A7B9612>I<FCFC0C0C0C0C0C0C0C0C0C0C0C0C0C0C
0C0C0C0C0C0C0C0C0C0C0C0C0C0C0CFCFC062180980A>I<202040408080E0F0F060040A
7D960A>96 D<3FC0706070302038003803F81E3830387038E039E039E07970FF1F1E100E
7F8D12>I<F8000038000038000038000038000038000038000038000038000039F0003E
0C00380600380700380300380380380380380380380380380300380700380600361C0021
F00011177F9614>I<07F01838303870106000E000E000E000E000600070083008183007
C00D0E7F8D10>I<003E00000E00000E00000E00000E00000E00000E00000E00000E0007
CE001C3E00300E00700E00600E00E00E00E00E00E00E00E00E00600E00700E00301E0018
2E0007CF8011177F9614>I<0FC0186030307038E018FFF8E000E000E000600070083010
183007C00D0E7F8D10>I<03E006700E701C201C001C001C001C001C00FF801C001C001C
001C001C001C001C001C001C001C001C001C007F800C1780960B>I<0F9E18E330607070
70707070306018C02F80200060003FE03FF83FFC600EC006C006C006600C38380FE01015
7F8D12>I<F8000038000038000038000038000038000038000038000038000038F8003B
1C003C0E00380E00380E00380E00380E00380E00380E00380E00380E00380E00380E00FE
3F8011177F9614>I<307878300000000000F8383838383838383838383838FE07177F96
0A>I<0300078007800300000000000000000000001F8003800380038003800380038003
80038003800380038003800380038003804380E300E7007C00091D82960B>I<F8003800
3800380038003800380038003800383E383838303840388039803FC039E038E038F03878
383C383CFE7F10177F9613>I<F8383838383838383838383838383838383838383838FE
07177F960A>I<F8F83E003B1CC7003C0F0380380E0380380E0380380E0380380E038038
0E0380380E0380380E0380380E0380380E0380380E0380FE3F8FE01B0E7F8D1E>I<F8F8
003B1C003C0E00380E00380E00380E00380E00380E00380E00380E00380E00380E00380E
00FE3F80110E7F8D14>I<07C018303018600C600CE00EE00EE00EE00EE00E701C301818
3007C00F0E7F8D12>I<F9F0003E1C003806003807003803003803803803803803803803
80380300380700380E003E1C0039F000380000380000380000380000380000FE00001114
7F8D14>I<07C2001C2600381E00700E00600E00E00E00E00E00E00E00E00E00600E0070
0E00301E001C2E0007CE00000E00000E00000E00000E00000E00003F8011147F8D13>I<
F9E03A703C703820380038003800380038003800380038003800FF000C0E7F8D0E>I<1F
4060C0C040C040E000FF007F801FC001E080608060C060E0C09F000B0E7F8D0E>I<0800
08000800180018003800FFC0380038003800380038003800380038403840384038401C80
0F000A147F930E>I<F83E00380E00380E00380E00380E00380E00380E00380E00380E00
380E00380E00381E001C2E0007CF80110E7F8D14>I<FE1F380E3C0C1C081C080E100E10
0720072007E003C003C001800180100E7F8D13>I<FEFE7C383838383810383C101C3C20
1C4C201E4E600ECE400E8740078780070380070380030300020100160E7F8D19>I<FE3F
3C1C1C100E20074007C0038001C002E004F008701838383CFC7F100E7F8D13>I<FE1F38
0E3C0C1C081C080E100E100720072007E003C003C00180018001000100E200E200A40078
0010147F8D13>I<FFF0C0E080E081C08380878007000E001E081C08381870107030FFF0
0D0E7F8D10>I<FFFF801101808812>I<FFFFFFFFC02201808823>I
E /Fy 11 58 df<00C00000C00000C00000C00000C00000C00000C00000C00000C000FF
FF80FFFF8000C00000C00000C00000C00000C00000C00000C00000C00000C00011147E8F
17>43 D<1F00318060C04040C060C060C060C060C060C060C060C060404060C031801F00
0B107F8F0F>48 D<187898181818181818181818181818FF08107D8F0F>I<1F00618040
C08060C0600060006000C00180030006000C00102020207FC0FFC00B107F8F0F>I<1F00
218060C060C000C0008001001F00008000400060C060C060804060801F000B107F8F0F>
I<01800180038005800D801980118021804180C180FFE001800180018001800FE00B107F
8F0F>I<20C03F802E002000200020002F0030802040006000600060C06080C061801F00
0B107F8F0F>I<0780184030C060C06000C000CF00F080E040C060C060C060406060C030
801F000B107F8F0F>I<40007FF07FE08040804000800100020002000600040004000C00
0C000C000C000C000C117F900F>I<1F00318060C060C060C031803F000E00338061C0C0
60C060C060C04060C01F000B107F8F0F>I<1F00318060C0C040C060C060C06040E021E0
1E600060004060C0608063001E000B107F8F0F>I E /Fz 39 121
df<01F8000604000C0E00180E00180000180000180000FFFE0018060018060018060018
06001806001806001806001806001806001806001806007E1F801114809313>12
D<40E06020202040408003097D9309>39 D<02040818103020604040C0C0C0C0C0C0C0C0
C0C040406020301018080402071E7D950D>I<804020301018080C040406060606060606
06060604040C08181030204080071E7E950D>I<00600000600000600000600000600000
6000006000006000006000006000FFFFF0FFFFF000600000600000600000600000600000
600000600000600000600000600014167E9119>43 D<40E06020202040408003097D8209
>I<FFFF080280860B>I<0F0030C0606060604020C030C030C030C030C030C030C030C030
C03040206060606030C00F000C137E9211>48 D<0C001C00EC000C000C000C000C000C00
0C000C000C000C000C000C000C000C000C000C00FFC00A137D9211>I<1F0060C06060F0
70F030603000700070006000C001C00180020004000810101020207FE0FFE00C137E9211
>I<0FC030707038703870380038003000E00FC0007000380018001C601CF01CF018E038
60701FC00E137F9211>I<006000E000E00160026006600C600860106020606060C060FF
FC0060006000600060006003FC0E137F9211>I<60607FC07F8044004000400040004F00
70C040E0006000700070E070E070E06040E021C01F000C137E9211>I<07C00C20107020
7060006000C000CF00D0C0E060C020C030C030C03040306020206010C00F000C137E9211
>I<40007FFC7FF8401080308020004000800100010003000200060006000E000E000E00
0E000E0004000E147E9311>I<0FC0107020186018601870183C303F600F800FE031F060
78C01CC00CC00CC00C601830300FC00E137F9211>I<0F00308060404060C020C030C030
C0304030607030B00F30003000200060E040E08041003E000C137E9211>I<7FFFE0FFFF
F0000000000000000000000000000000000000FFFFF07FFFE0140A7E8B19>61
D<204040808080C0E04003097D9309>96 D<7F00E1C0E0404060006007E038606060C060
C064C06461E43E380E0D7E8C11>I<F00030003000300030003000300033E03430380830
0C30063006300630063006300C3808343023E00F147F9312>I<0FE0187020706020C000
C000C000C000C0006000201018200FC00C0D7F8C0F>I<00780018001800180018001800
180F98187820386018C018C018C018C018C0186018203818580F9E0F147F9312>I<0F80
104020206030C010FFF0C000C000C0006000201018200FC00C0D7F8C0F>I<03C00CE018
E01840180018001800FF00180018001800180018001800180018001800180018007F000B
1480930A>I<F00030003000300030003000300033E03430381830183018301830183018
3018301830183018FC7E0F147F9312>104 D<2070200000000000F03030303030303030
303030FC06157F9409>I<F000300030003000300030003000307C303030603080310033
003F80318030C0306030703030FC7C0E147F9311>107 D<F03030303030303030303030
30303030303030FC06147F9309>I<F3E1F0343218381C0C30180C30180C30180C30180C
30180C30180C30180C30180C30180CFC7E3F180D7F8C1B>I<F3E0343038183018301830
18301830183018301830183018FC7E0F0D7F8C12>I<0FC0186020106018C00CC00CC00C
C00CC00C6018601838700FC00E0D7F8C11>I<F3E034303808300C300630063006300630
06300C3808343033E030003000300030003000FC000F137F8C12>I<F3C034E038E03040
30003000300030003000300030003000FE000B0D7F8C0D>114 D<3E806180C080C080E0
007E003F8003C080C080C0C0C0E1809F000A0D7F8C0D>I<10001000100030007000FF80
300030003000300030003000300030803080308011000E0009127F910D>I<F078301830
183018301830183018301830183018303818580F9E0F0D7F8C12>I<F83C301830103830
182018200C400C40068006800680030003000E0D7F8C11>I<F87C303018600C400C8007
00030007800CC0086010603030F07C0E0D7F8C11>120 D E /FA
4 113 df<FFFFC0FFFFC012027D871A>0 D<040004000400C460F5E03F800E003F80F5E0
C4600400040004000B0D7E8D11>3 D<03FC0FFC1C003000600060006000C000C000FFFC
FFFCC000C00060006000600030001C000FFC03FC0E147D9016>50
D<00000040000000C000000180000001800000030000000300000006000000060000000C
000000180000001800000030000000300000006000000060003000C000D800C000180180
000C0180000C0300000603000006060000030C0000030C0000019800000198000000F000
0000F0000000600000006000001A1E7F811B>112 D E /FB 27 123
df<40E06020202040408003097D820A>59 D<003F0800C0980300700600300C00301800
30380020700000700000700000E00000E00000E00000E000406000806000803001003002
000C1C0007E00015147E9318>67 D<07FFE000E07001C01801C00C01C00C01C00E03800E
03800E03800E03800E07001C07001C07001C0700380E00300E00700E00E00E01C01C0700
FFFC0017147F931B>I<07E01FC000E0060001700400017004000138040001380400021C
0800021C0800020E0800020E0800040710000407100004039000040390000801E0000801
E0000800E0000800E00018004000FE0040001A147F931A>78 D<07B00C70107030606060
60606060C0C0C0C8C0C841C862D03C700D0D7E8C12>97 D<3C000C001800180018001800
300033803C6030206030603060306030C060C06040C0608023001E000C147F930F>I<03
C00C20187030E0600060006000C000C0004010602030C01F000C0D7F8C0F>I<003C000C
0018001800180018003007B00C7010703060606060606060C0C0C0C8C0C841C862D03C70
0E147E9311>I<0780184030206040C040FF80C00080008000C020C04061803E000B0D7E
8C10>I<0018006C007C006C00C000C000C007F800C00180018001800180018003000300
0300030003000200060006006600E400C80070000E1A7F9310>I<01CC062C0C1C181830
1830183018603060302030307010E00F600060006060C0E0C0C3807E000E137F8C10>I<
06070600000000384C4C8C98181830323264643808147F930C>105
D<003000380030000000000000000001C002600430046008600060006000C000C000C000
C001800180018001806300E300C60078000D1A81930E>I<1E0006000C000C000C000C00
18001838185C189C3118360038003F8061C060C860C860C8C0D0C0600E147F9312>I<3C
0C181818183030303060606060C0C8C8C8D06006147F930A>I<30F87C00590C86004E0D
06009C0E0600980C0600180C0600180C060030180C0030180C8030181880301818806030
190060300E00190D7F8C1D>I<30F8590C4E0C9C0C980C180C180C301830193031303160
32601C100D7F8C15>I<03800C6018203030603060306030C060C06040C0608023001E00
0C0D7E8C10>I<0C78168C130426062606060606060C0C0C0C0C080C101A2019C0180018
00300030003000FC000F13818C11>I<31E05A704C709C60980018001800300030003000
3000600060000C0D7F8C0F>114 D<0700188019C0318038001E000F0003804180E180C1
0082007C000A0D7E8C10>I<04000C000C000C001800FF80180018003000300030003000
60006100610062006400380009127F910D>I<380C4C0C4C0C8C18981818181818303030
323032307218B40F1C0F0D7F8C14>I<38104C184C108C10981018101810302030203040
304018800F000D0D7F8C11>I<0E3C13CE238E430C43000300030006000608C608E610CA
2071C00F0D7F8C13>120 D<380C4C0C4C0C8C18981818181818303030303030307018E0
0F60006000C0E0C0E18043003C000E137F8C11>I<06101FA010E000400080010002000C
001020202038404FC083000C0D7F8C10>I E /FC 16 120 df<00000000002000000000
00600000000000C0000000000180000000000300000000000600000000000C0000000000
180000000000300000000000600000000000C00000000001800000000003000000000006
00000000000C0000000000180000000000300000000000600000000000C0000000000180
000000000300000000000600000000000C00000000001800000000003000000000006000
00000000C0000000000180000000000300000000000600000000000C0000000000180000
000000300000000000600000000000C00000000001800000000003000000000006000000
00000C0000000000180000000000300000000000600000000000C0000000000080000000
00002B2C80AA2A>0 D<00000200000600000C00000C0000180000180000300000300000
600000600000C00000C0000180000180000300000300000600000600000C00000C000018
0000180000300000300000600000600000C00000C0000180000180000300000300000600
000600000C00000C0000180000180000300000300000600000600000C00000400000172C
81AA15>I<30003C003F003FC03FF03FF03FE03FC07F007E007C00780070006000400080
000C10809015>11 D<00010006000E003C00F807F83FF0FFF07FE03FE01FE00FC007C003
C001800080101066A92A>18 D<0000000080000000018000000003000000000600000000
0C000000000C000000001800000000300000000060000000006000000000C00000000180
0000000180000000030000000006000000000C000000000C000000001800000000300000
000060000000006000000000C00000000180000000030000000003000000000600000000
0C000000001800000000180000000030000000006000000000C000000000C00000000180
0000000300000000030000000006000000000C0000000018000000001800000000300000
00006000000000C0000000004000000000212C81AA1F>I<0002001E007E01FE0FFEFFFE
FFFE0FFE01FE007E001E00020F0C7E852A>27 D<8000F000FC00FF00FFE0FFFEFFFEFFE0
FF00FC00F00080000F0C67852A>45 D<0400060007000FC00FE00FF00FFC1FFE1FF81FE0
3F803F003C0078006000400080000F1180901F>47 D<06000600060006000F000F000F00
1F801F803FC03FC07FE07FE07FE0FFF00C0F86A72A>54 D<FFF07FE07FE07FE03FC03FC0
1F801F800F000F000F0006000600060006000C0F86902A>63 D<800000000000C0000000
00006000000000003000000000001800000000000C000000000006000000000003000000
000001800000000000C000000000006000000000003000000000001800000000000C0000
00000006000000000003000000000001800000000000C000000000006000000000003000
000000001800000000000C000000000006000000000003000000000001800000000000C0
00000000006000000000003000000000001800000000000C000000000006000000000003
000000000001800000000000C00000000000600000000000300000000000180000000000
0C000000000006000000000003000000000001800000000000C000000000006000000000
00202B2C80AA2A>I<400000C000006000006000003000003000001800001800000C0000
0C000006000006000003000003000001800001800000C00000C000006000006000003000
003000001800001800000C00000C000006000006000003000003000001800001800000C0
0000C000006000006000003000003000001800001800000C00000C000006000002172C81
AA15>I<0080018003C007C00FC01FE03FE07FE0FFF03FF007F800F8003C000E00060001
1010668F2A>82 D<4000000000C000000000600000000030000000001800000000180000
00000C00000000060000000003000000000300000000018000000000C000000000C00000
000060000000003000000000180000000018000000000C00000000060000000003000000
000300000000018000000000C00000000060000000006000000000300000000018000000
000C000000000C00000000060000000003000000000180000000018000000000C0000000
0060000000006000000000300000000018000000000C000000000C000000000600000000
030000000001800000000080212C81AA1F>I<00C003C00FC03FC0FFC0FFC07FC03FC00F
E007E003E001E000E00060002000100C10779015>85 D<004000C001C007E00FE01FE07F
E0FFF03FF00FF003F801F80078003C000C000400020F1170901F>119
D E /FD 86 125 df<07FFC000380000380000380000380001FF000739C01C3870383838
78383C70381CF0381EF0381EF0381EF0381E70381C78383C3838381C38700739C001FF00
00380000380000380000380007FFC0171A7E991C>8 D<00FE7C0381C60603CE0E03841C
03801C03801C03801C03801C03801C0380FFFFF01C03801C03801C03801C03801C03801C
03801C03801C03801C03801C03801C03801C03801C03801C0380FF8FF0171A809916>11
D<00FE000381000601800E03801C01001C00001C00001C00001C00001C0000FFFF801C03
801C03801C03801C03801C03801C03801C03801C03801C03801C03801C03801C03801C03
801C0380FF8FF0141A809915>I<00FF800383800603800E03801C03801C03801C03801C
03801C03801C0380FFFF801C03801C03801C03801C03801C03801C03801C03801C03801C
03801C03801C03801C03801C03801C0380FF9FF0141A809915>I<60F0F0F0F0F0F06060
6060606060606060200000000060F0F060041A7D990B>33 D<60C0F1E0F9F068D0081008
10081010201020204040800C0B7F9913>I<010001000FC0193021086108C104C10CC11C
C108E100610079003F801FE007F001780138011C410CE10CE10C810C8108411821101160
0F80010001000E1E7E9B13>36 D<01C0000003200000061000000E1000000E1000000E10
00000E1000000E2000000E4000000E40000007807F8007001E0007000800078010000B80
100011C0200031E0200060E0400060708000E0788000E03D0000E01E0080E00E0080701F
01003861C3000F807C00191A7E991E>38 D<60F0F86808080810102040050B7D990B>I<
00800100020004000C00080018003000300030006000600060006000E000E000E000E000
E000E000E000E000E000E0006000600060006000300030003000180008000C0004000200
0100008009267D9B0F>I<8000400020001000180008000C000600060006000300030003
000300038003800380038003800380038003800380038003000300030003000600060006
000C0008001800100020004000800009267E9B0F>I<0300030003000300E31C73381FE0
078007801FE07338E31C03000300030003000E107E9B13>I<000C0000000C0000000C00
00000C0000000C0000000C0000000C0000000C0000000C0000000C0000000C0000000C00
00FFFFFF80FFFFFF80000C0000000C0000000C0000000C0000000C0000000C0000000C00
00000C0000000C0000000C0000000C0000000C0000191A7E951E>I<60F0F07010101020
204040040B7D830B>I<FFC0FFC00A0280880D>I<60F0F06004047D830B>I<07E01C3838
1C300C700E60066006E007E007E007E007E007E007E007E007E007E00760066006700E30
0C381C1C3807E010187F9713>48 D<03000700FF00070007000700070007000700070007
000700070007000700070007000700070007000700070007007FF80D187D9713>I<0F80
106020304038803CC01CE01C401C003C003800380070006000C001800100020004040804
100430083FF87FF8FFF80E187E9713>I<07E01838201C601E700E201E001E001C001C00
38007007E00038001C000E000F000FE00FE00FC00F400E601C183807E010187F9713>I<
001800180038007800F800B8013802380238043808381838103820384038C038FFFF0038
0038003800380038003803FF10187F9713>I<30183FF03FE03F80200020002000200020
002FC03060203000380018001C001C401CE01CE01C80184038403030E00F800E187E9713
>I<01F807040C06180E300E300070006000E000E3E0E418E80CF00EE006E007E007E007
600760077006300E180C0C3807E010187F9713>I<40007FFF7FFE7FFE40048008801080
10002000400040008001800100030003000700060006000E000E000E000E000E00040010
197E9813>I<07E01818300C2006600660067006780C3E181F3007C003E00CF8307C601E
600FC007C003C003C00360022004181807E010187F9713>I<07E01C303018700C600EE0
06E006E007E007E0076007700F3017182707C700070006000E000C700C7018603030600F
8010187F9713>I<60F0F060000000000000000060F0F06004107D8F0B>I<60F0F0600000
00000000000060F0F0701010102020404004177D8F0B>I<FFFFFF80FFFFFF8000000000
0000000000000000000000000000000000000000FFFFFF80FFFFFF80190A7E8D1E>61
D<1FC020604030C038E038E0380038007000E00180010003000200020002000200020002
00000000000000000006000F000F0006000D1A7E9912>63 D<000C0000000C0000000C00
00001E0000001E0000002F000000270000002700000043800000438000004380000081C0
000081C0000181E0000100E0000100E00003FFF000020070000200700004003800040038
000400380008001C0008001C003C001E00FF00FFC01A1A7F991D>65
D<FFFF800E00E00E00700E00380E003C0E003C0E003C0E003C0E003C0E00780E00700E01
E00FFFC00E00F00E00780E003C0E001C0E001E0E001E0E001E0E001E0E001C0E003C0E00
780E00F0FFFFC0171A7F991B>I<003F0201C0C603002E0E001E1C000E1C000638000678
0002700002700002F00000F00000F00000F00000F00000F0000070000270000278000238
00041C00041C00080E000803003001C0C0003F00171A7E991C>I<FFFF80000E00E0000E
0070000E0038000E001C000E000E000E000E000E0007000E0007000E0007800E0007800E
0007800E0007800E0007800E0007800E0007800E0007800E0007000E0007000E000F000E
000E000E001C000E001C000E0078000E00E000FFFF8000191A7F991D>I<FFFFF80E0038
0E00180E00080E000C0E00040E00040E00040E01000E01000E01000E03000FFF000E0300
0E01000E01000E01000E00020E00020E00020E00060E00040E00040E000C0E003CFFFFFC
171A7F991A>I<FFFFF80E00380E00180E00080E000C0E00040E00040E00040E01000E01
000E01000E03000FFF000E03000E01000E01000E01000E00000E00000E00000E00000E00
000E00000E00000E0000FFE000161A7F9919>I<FFE1FFC00E001C000E001C000E001C00
0E001C000E001C000E001C000E001C000E001C000E001C000E001C000E001C000FFFFC00
0E001C000E001C000E001C000E001C000E001C000E001C000E001C000E001C000E001C00
0E001C000E001C000E001C00FFE1FFC01A1A7F991D>72 D<FF801C001C001C001C001C00
1C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C00
1C00FF80091A7E990E>I<0FFE0070007000700070007000700070007000700070007000
7000700070007000700070007000704070E070E07040E061C01F000F1A7E9914>I<FFE0
1FC00E000F000E000C000E0008000E0010000E0020000E0040000E0180000E0200000E04
00000E0C00000E1C00000E2E00000E4700000E8380000F0380000E01C0000E00E0000E00
E0000E0070000E0038000E0038000E001C000E001E000E001F00FFE07FC01A1A7F991E>
I<FFE0000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00
000E00000E00000E00000E00000E00000E00080E00080E00080E00180E00100E00300E00
700E00F0FFFFF0151A7F9918>I<FF0000FF0F0000F00F0000F00B8001700B80017009C0
027009C0027009C0027008E0047008E00470087008700870087008700870083810700838
107008381070081C2070081C2070080E4070080E4070080E407008078070080780700803
00701C030070FF8307FF201A7F9923>I<FE007FC00F000E000F0004000B80040009C004
0009C0040008E00400087004000870040008380400081C0400081C0400080E0400080704
0008038400080384000801C4000800E4000800E4000800740008003C0008003C0008001C
0008000C001C000C00FF8004001A1A7F991D>I<007F000001C1C000070070000E003800
1C001C003C001E0038000E0078000F0070000700F0000780F0000780F0000780F0000780
F0000780F0000780F0000780F000078078000F0078000F0038000E003C001E001C001C00
0E0038000700700001C1C000007F0000191A7E991E>I<FFFF800E01E00E00700E00780E
00380E003C0E003C0E003C0E003C0E00380E00780E00700E01E00FFF800E00000E00000E
00000E00000E00000E00000E00000E00000E00000E00000E0000FFE000161A7F991A>I<
FFFF00000E01C0000E0070000E0078000E003C000E003C000E003C000E003C000E003C00
0E0078000E0070000E01C0000FFF00000E0380000E00C0000E00E0000E0070000E007000
0E0070000E0078000E0078000E0078000E0078400E003C400E001C80FFE00F001A1A7F99
1C>82 D<0FC21836200E6006C006C002C002C002E00070007E003FE01FF803FC007E000E
00070003800380038003C002C006E004D81887E0101A7E9915>I<7FFFFF00701C070040
1C0100401C0100C01C0180801C0080801C0080801C0080001C0000001C0000001C000000
1C0000001C0000001C0000001C0000001C0000001C0000001C0000001C0000001C000000
1C0000001C0000001C0000001C0000001C000003FFE000191A7F991C>I<FFE07FC00E00
0E000E0004000E0004000E0004000E0004000E0004000E0004000E0004000E0004000E00
04000E0004000E0004000E0004000E0004000E0004000E0004000E0004000E0004000E00
04000600080007000800030010000180200000E0C000003F00001A1A7F991D>I<FF801F
C01C0007001C0006000E0004000E0004000E000400070008000700080003801000038010
000380100001C0200001C0200000E0400000E0400000E040000070800000708000007980
000039000000390000001E0000001E0000001E0000000C0000000C00001A1A7F991D>I<
FF81FF07F03C007801C01C007800801C007800801C007800800E009C01000E009C01000E
009C010007010E020007010E020007010E020003830F0400038207040003820704000382
070C0001C403880001C403880001C403880000E801D00000E801D00000E801D000007000
E000007000E000007000E000003000C0000020004000241A7F9927>I<FFC0FF800F003C
000F001000070020000380200003C0400001C0800000E1800000F10000007A0000003E00
00001C0000001E0000001E00000017000000278000004380000041C0000081E0000100E0
000300700002007800040038000C001C001E003E00FF007FC01A1A7F991D>I<FF801FE0
1E0007001E0006000F00040007000C00078008000380100001C0100001E0200000E06000
007040000078800000388000001D0000001F0000000E0000000E0000000E0000000E0000
000E0000000E0000000E0000000E0000000E0000000E000000FFC0001B1A7F991D>I<FF
FFC0F80380E00380C00700C00700800E00801C00801C0000380000380000700000E00000
E00001C00001C0000380000700400700400E00400E00401C00C038008038018070038070
0780FFFF80121A7E9917>I<FEFEC0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
C0C0C0C0C0C0C0C0C0C0C0FEFE07257D9B0B>I<2040204040804080810081008100E1C0
F1E0F1E060C00B0B7A9913>I<FEFE060606060606060606060606060606060606060606
060606060606060606060606FEFE0725809B0B>I<20204040808080E0F0F060040B7D99
0B>96 D<1FC000387000383800101C00001C00001C0003FC001E1C00381C00701C00E01C
00E01C80E01C80E03C80705F801F8F0011107F8F13>I<FC00001C00001C00001C00001C
00001C00001C00001C00001C00001C00001CFC001D07001E03801C01C01C00C01C00E01C
00E01C00E01C00E01C00E01C00E01C01C01C01801E030019060010F800131A809915>I<
07F81C1C381C70087000E000E000E000E000E000E0007000700438081C1807E00E107F8F
11>I<003F0000070000070000070000070000070000070000070000070000070003E700
0C1700180F00300700700700E00700E00700E00700E00700E00700E00700600700700700
380F001C370007C7E0131A7F9915>I<07C01C3030187018600CE00CFFFCE000E000E000
E0006000700438081C1807E00E107F8F11>I<01F007180E381C101C001C001C001C001C
001C00FFC01C001C001C001C001C001C001C001C001C001C001C001C001C001C00FF800D
1A80990C>I<0FCF001871803030007038007038007038007038003030001860002FC000
6000006000007000003FF0003FFC001FFE00600F00C00300C00300C00300C00300600600
381C0007E00011187F8F13>I<FC00001C00001C00001C00001C00001C00001C00001C00
001C00001C00001C7C001D87001E03801E03801C03801C03801C03801C03801C03801C03
801C03801C03801C03801C03801C0380FF9FF0141A809915>I<183C3C18000000000000
FC1C1C1C1C1C1C1C1C1C1C1C1C1C1CFF081A80990A>I<018003C003C001800000000000
000000000000000FC001C001C001C001C001C001C001C001C001C001C001C001C001C001
C001C001C001C001C041C0E180E3007E000A2182990C>I<FC00001C00001C00001C0000
1C00001C00001C00001C00001C00001C00001C1FC01C0F001C0C001C18001C20001C4000
1CE0001DE0001E70001C78001C38001C1C001C1E001C0F001C0F80FF9FE0131A809914>
I<FC001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C
001C001C001C001C001C001C001C00FF80091A80990A>I<FC7C1F001D8E63801E0781C0
1E0781C01C0701C01C0701C01C0701C01C0701C01C0701C01C0701C01C0701C01C0701C0
1C0701C01C0701C01C0701C0FF9FE7F81D107F8F20>I<FC7C001D87001E03801E03801C
03801C03801C03801C03801C03801C03801C03801C03801C03801C03801C0380FF9FF014
10808F15>I<07E01C38300C700E6006E007E007E007E007E007E0076006700E381C1C38
07E010107F8F13>I<FCFC001D07001E03801C01C01C01C01C00E01C00E01C00E01C00E0
1C00E01C00E01C01C01C01801E03001D06001CF8001C00001C00001C00001C00001C0000
1C0000FF80001317808F15>I<03E1000C1300180B00300F00700700E00700E00700E007
00E00700E00700E00700700700700700380F001C370007C7000007000007000007000007
00000700000700003FE013177F8F14>I<FC781D9C1E1C1E081C001C001C001C001C001C
001C001C001C001C001C00FF800E10808F0F>I<1F2060E04020C020C020F0007F003FC0
1FE000F080708030C030C020F0408F800C107F8F0F>I<08000800080008001800180038
00FFC038003800380038003800380038003800382038203820382018201C4007800B177F
960F>I<FC1F801C03801C03801C03801C03801C03801C03801C03801C03801C03801C03
801C03801C07800C07800E0B8003F3F01410808F15>I<FF0F803C07001C06001C04001C
04000E08000E080007100007100007100003A00003A00001C00001C00001C00000800011
107F8F14>I<FE7F1F80381C07003C1C06001C0C04001C0E04000E1608000E1708000E17
0800072310000723900007A3900003C1A00003C1E0000180C0000180C0000180C0001910
7F8F1C>I<FE3F803C1E001C08000E10000F300007600003C00001C00001E00003E00002
7000043800083800181C00381E00FC3FC012107F8F14>I<FF0F803C07001C06001C0400
1C04000E08000E080007100007100007100003A00003A00001C00001C00001C000008000
008000010000010000E10000E20000E4000078000011177F8F14>I<FFF8E070C07080E0
81C081C00380070007000E041C041C04380870087038FFF80E107F8F11>I<FFFFC01201
808913>I<FFFFFFFFF82501808926>I E /FE 72 123 df<0003F0F0000E199800183B38
0018333000380700003807000038070000700E0000700E0000700E0007FFFFE000700E00
00E00E0000E01C0000E01C0000E01C0000E01C0001C01C0001C0380001C0380001C03800
01C038000380380003807000038070000380700003007000070060000700E0006630C000
E6718000CC630000783E00001D21819918>11 D<0003FE000E03001C0700180600380000
380000380000700000700000700007FFFC00701C00E03800E03800E03800E03800E07001
C07001C07001C07001C0E401C0E40380E40380E403806803803003000007000007000066
0000E60000CC00007800001821819916>I<0003FB80000E0F80001C1F8000181B800038
070000380700003807000070070000700E0000700E0007FFFE0000700E0000E01C0000E0
1C0000E01C0000E01C0000E0380001C0380001C0380001C0380001C0720001C072000380
720003807200038034000380180003000000070000000700000066000000E6000000CC00
0000780000001921819917>I<018003C003C00380038007800700070007000600060006
000C000C000C00080008000800000000000000000030007800F00060000A1A7C990C>33
D<183C3C1C08080810204080060B78990C>39 D<000400180030006000C0008001800300
030006000E000C001C001800180038003000300070007000600060006000E000E000E000
C000C000C000C000C00060006000600020003000100008000E267B9B10>I<0040006000
200030001000180018001800180018001800180018001800180018003800380030003000
700070006000E000C000C001C0018003800300060006000C00180010002000400080000D
267F9B10>I<00C000C000C00080388E3D9C0F7003C007801DE07378E238020006000600
06000F10799B14>I<1838783808101020204080050B7D830C>44
D<FF80FF80FF0009037D880E>I<3078F06005047C830C>I<000008000018000018000030
0000300000600000600000C00000C0000180000300000300000600000600000C00000C00
00180000300000300000600000600000C00000C000018000030000030000060000060000
0C00000C0000180000180000300000600000600000C0000080000015257F9B14>I<007C
000186000303000603000C03801C03801C03803803803803803803807007007007007007
00700700E00E00E00E00E00E00E01C00E01C00E01800E0300060600030C0001F00001118
7C9714>I<000800180030007001F00E7000E000E000E000E001C001C001C001C0038003
800380038007000700070007000F00FFE00D187C9714>I<007C00018600020300040380
0483800883801083801083801083801107001207000C0E00001C00003000006000018000
0200000C00001001002001003C060067FE00C1FC0080F00011187D9714>I<003E0000C3
000101800201800481C00441C0088380048380070300000600000C0001F000001800000C
00000C00000E00000E00600E00E01C00E01C0080380040300020E0001F800012187D9714
>I<000300000380000700000700000700000E00000E00000E00001C00001C0000180000
300000300000600000C00000C600018E00030E00021C00041C00081C00101C007FB80080
7F80003800003800007000007000007000007000006000111F7F9714>I<03018003FF00
03FC000220000400000400000400000400000800000BE0000C1800081800001C00001C00
001C00001C00201C00701C00E0380080300040700040E0002180001E000011187C9714>
I<001E000061800180800303800603800E00001C000018000038000039F000721800740C
00780E00700E00F00E00E00E00E00E00E00E00E01C00E01C0060380060700030C0001F80
0011187C9714>I<09C04017E0801FF1803C1F00300200600600400400800C0000080000
180000300000300000700000600000E00000C00001C00001C00001800003800003800003
800007000003000012187B9714>I<003E0000C1800100800200C00600C00600C00E0180
07030007860003CC0001F00001F800067C000C3E00181E00300700600700600700C00600
C00600400C006018003070000FC00012187D9714>I<007C000186000703000E03000C03
801C0380380380380380380380380780380700380F001817000C270007CE00000E00000C
00001C00001800E03000E0600080C000C380003E000011187C9714>I<030007800F0006
000000000000000000000000000000000018003800780038000800100010002000200040
00800009177D8F0C>59 D<01E00610081810182018201840186030E0F061E003C00F800E
001C00188019001B000C00000000000000000018003C00780030000D1A799914>63
D<0000200000600000E00000E00001E00001F00002700002700004700008700008700010
7000107000207000407000407000803800FFF80100380200380200380400380400380800
38180038FE01FF181A7E991D>65 D<03FFF800700E00700600700700E00700E00700E007
00E00701C00E01C01C01C03801C07003FFE003807803803803801C07001C07001C07001C
07001C0E00380E00380E00700E00E01C03C0FFFF00181A7D991B>I<000F8200706200C0
1603801E07000C0E000C1C000C18000C380008300008700000700000E00000E00000E000
00E00000E00020E00020E00020E000406000406000803001001006000C180003E000171A
7A991B>I<03FFF80000700E00007007000070030000E0018000E0018000E0018000E001
C001C001C001C001C001C001C001C001C003800380038003800380038003800300070007
000700070007000E0007000C000E001C000E0038000E0070000E00E0001C038000FFFE00
001A1A7D991D>I<03FFFF00700700700300700100E00100E00100E00100E00101C08001
C08001C08001C18003FF000381000381000381000702000700040700040700080E00080E
00180E00100E00301C00E0FFFFE0181A7D991A>I<03FFFF00700700700300700100E001
00E00100E00100E00101C08001C08001C08001C18003FF00038100038100038100070200
0700000700000700000E00000E00000E00000E00001E0000FFC000181A7D9919>I<000F
C100302100C01301800F0700060E00060C0006180006380004300004700000700000E000
00E00000E00000E007FEE00070E00070E00070E000706000E06000E03000E01801E00C06
4003F840181A7A991E>I<03FF1FF800700380007003800070038000E0070000E0070000
E0070000E0070001C00E0001C00E0001C00E0001C00E0003FFFC0003801C0003801C0003
801C00070038000700380007003800070038000E0070000E0070000E0070000E0070001C
00E000FF87FC001D1A7D991D>I<03FF00700070007000E000E000E000E001C001C001C0
01C0038003800380038007000700070007000E000E000E000E001C00FF80101A7D990F>
I<03FF0000700000700000700000E00000E00000E00000E00001C00001C00001C00001C0
000380000380000380000380000700000700100700100700200E00200E00600E00400E00
C01C0380FFFF80141A7D9918>76 D<03F8001FC00078003C000078003C000078005C0000
B800B80000B800B800009C013800009C013800011C027000011C027000011C047000011C
087000021C08E000021C10E000021C10E000021C20E000041C41C000041C41C000041C81
C000041C81C000080F038000080F038000080E038000180C038000180C070000FE083FE0
00221A7D9922>I<03F007F8007800C00078008000780080009C0100009C0100009C0100
008E0100010E02000106020001070200010702000203840002038400020384000201C400
0401C8000401C8000400E8000400E8000800F00008007000080070001800700018002000
FE0020001D1A7D991D>I<001F8000706001C03003001806001C0E000C1C000C18000E38
000E30000E70000E70000EE0001CE0001CE0001CE00038E00038E00030E00070E000E0E0
00C06001807003003806001C1C0007E000171A7A991D>I<03FFF800701C007006007007
00E00700E00700E00700E00701C00E01C00E01C01C01C03803806003FF80038000038000
0700000700000700000700000E00000E00000E00000E00001C0000FF8000181A7D991A>
I<001F8000706001C03003801807001C0E000C1C000C18000E38000E30000E70000E7000
0EE0001CE0001CE0001CE00018E00038E00030E00070E00060E0E0C06111807213003A16
001E1C0007F0200010200010600010400038C0003F80001F00000E0017217A991D>I<03
FFF000701C00700E00700700E00700E00700E00700E00701C00E01C01C01C03801C0E003
FF800380C00380600380700700700700700700700700700E00E00E00E00E00E10E00E21C
0062FF803C181A7D991C>I<003F10006090018070010070030020060020060020060020
06000007000007C00003F80001FE00007F00000F80000380000180000180200180200180
600300600300600600700C00C8180087E000141A7D9916>I<3FFFFC381C0C201C04401C
0440380480380480380480380400700000700000700000700000E00000E00000E00000E0
0001C00001C00001C00001C000038000038000038000038000078000FFF800161A79991B
>I<7FE0FF0E00180E00100E00101C00201C00201C00201C002038004038004038004038
0040700080700080700080700080E00100E00100E00100E00200E00200E0040060080060
10003860000F8000181A78991D>I<FF803F801C000C001C0008001C0010001C0010001C
0020001C0060001C0040001E0080000E0080000E0100000E0200000E0200000E0400000E
0400000E0800000E1000000F100000072000000760000007400000078000000780000007
0000000600000006000000191A78991D>I<FF87FC1FC03C00E007003800E004003801E0
04003801E008003802E008001C02E010001C04E010001C04E020001C08E020001C08E040
001C10E040001C10E080001C20E100001C40E100001C40E200001C80E200001C80E40000
1D00E400001D00E800001E00E800001E007000001C007000001C00600000180060000018
00400000221A789926>I<0408102020404070F0F060060B78990C>96
D<03CC0E2E181C381C301C701CE038E038E038E038C072C072C07260F261341E180F107C
8F14>I<7E000E000E000E001C001C001C001C00380038003BC03C307830701870187018
E038E038E038E038C070C060C0E060C063801E000D1A7C9912>I<01E006180C18183830
1070006000E000E000E000E000E008E010602030C01F000D107C8F12>I<001F80000380
000380000380000700000700000700000700000E00000E0003CE000E2E00181C00381C00
301C00701C00E03800E03800E03800E03800C07200C07200C0720060F2006134001E1800
111A7C9914>I<01E00E181C08380870087010FFE0E000E000E000E000E0086010602030
C01F000D107C8F12>I<000700000980001B80003B000038000030000070000070000070
0000700007FF0000E00000E00000E00000E00000E00001C00001C00001C00001C00001C0
00038000038000038000038000030000070000070000060000660000E40000CC00007000
00112181990C>I<00F300038B800607000E07000C07001C0700380E00380E00380E0038
0E00301C00301C00301C00183C0018780007B800003800003800007000607000E0E000C1
C0007F000011177E8F12>I<1F8000038000038000038000070000070000070000070000
0E00000E00000E7C000F86001E07001E07001C07001C0700380E00380E00380E00381C00
701C80701C80703880703900E01900600E00111A7E9914>I<030706000000000000384C
4E8E9C9C1C3838707272E2E4643808197C980C>I<000C000E000C000000000000000000
00000000E001380238043804380438007000700070007000E000E000E000E001C001C001
C001C003806380E700CE0078000F2081980C>I<1F800380038003800700070007000700
0E000E000E0E0E131C271C431C801F003C003F8039C038E070E270E270E270E4E0646038
101A7E9912>I<1F0707070E0E0E0E1C1C1C1C3838383870707070E4E4E4E4E830081A7D
990A>I<307C1E00598663009E0783809E0703809C0703809C070380380E0700380E0700
380E0700380E0E00701C0E40701C0E40701C1C40701C1C80E0380C80601807001A107C8F
1F>I<307C005986009E07009E07009C07009C0700380E00380E00380E00381C00701C80
701C80703880703900E01900600E0011107C8F16>I<01F006180C0C180E300E700E600E
E00EE00EE00CE01CE018E030606030C01F000F107C8F14>I<030F000590C009E0C009C0
6009C06009C0600380E00380E00380E00380E00701C00701800703800703000E8E000E78
000E00000E00001C00001C00001C00001C0000FF00001317808F14>I<03C20E2E181C38
1C301C701CE038E038E038E038C070C070C07060F061E01EE000E000E001C001C001C001
C01FF00F177C8F12>I<30F05D189E389C189C009C003800380038003800700070007000
7000E00060000D107C8F10>I<03E004300830187018601C001F801FC00FE000E00060E0
60E06080C041803E000C107D8F10>I<06000E000E000E000E001C001C00FFC01C003800
3800380038007000700070007000E100E100E100E200E40038000A177C960D>I<38064C
074E0E8E0E9C0E9C0E1C1C381C381C381C7039703970393079389A0F0C10107C8F15>I<
38184C1C4E1C8E0C9C0C9C0C1C08380838083810701070107020304018C00F000E107C8F
12>I<380C104C0E384E1C388E1C189C1C189C1C181C3810383810383810383810707020
70702070704030704018B8800F0F0015107C8F19>I<078F0008D18010F38020E18020E0
0020E00001C00001C00001C00001C000038200038200C38200E78400C5880078F0001110
7E8F12>I<38064C074E0E8E0E9C0E9C0E1C1C381C381C381C703870387038307838F00F
700070006060E0E1C0C18047003C0010177C8F13>I<038207C40FFC1008101000200040
0180030004000808100820187FF043E081C00F107E8F10>I E /FF
90 126 df<60F0F0F0F0F0F0F0F0F0F0F0F0F0600000000060F0F0600417789614>33
D<C060E0E0E0E0E0E0E0E0C060C060C060C060C06040400B0B7C9614>I<071C00071C00
071C00071C00071C007FFF00FFFF80FFFF800E38000E38000E38000E38000E38000E3800
0E3800FFFF80FFFF807FFF001C70001C70001C70001C70001C700011177F9614>I<0080
0180018007E01FF039BC619CC18EC18EC18EE18471807F801FE00FF001F8019C018E4186
E186E186E186718C39B81FF00FC00180018000800F1D7E9914>I<3806007C0E006C0E00
EE1C00EE1C00EE3800EE38006C38007C700038700000700000E00000E00001C00001C000
01C000038000038000070000070E00071F000E1B000E3B800E3B801C3B801C3B80381B00
381F00180E00111D7F9914>I<0700000F800018C00038E00038E00038E00038C00039CF
80398F801F1C001E1C001E1C000E38001E3800377000677000E3F000E3E000E1C380E1E3
8063F3803F3F001E1E0011177F9614>I<60F0F878181818303060C080050C789614>I<01
80038006000C001C0018003800700070007000E000E000E000E000E000E000E000E000E0
00700070007000380018001C000C00060003800180091D799914>I<80C0603038181C0E
0E0E0707070707070707070E0E0E1C18383060C080081D7C9914>I<038003800380638C
F39E7FFC3FF80FE00FE03FF87FFCF39E638C0380038003800F107E9214>I<01C00001C0
0001C00001C00001C00001C00001C000FFFF80FFFF80FFFF8001C00001C00001C00001C0
0001C00001C00001C00011117F9314>I<70F8FCFC7C0C1830E0C0060A798414>I<FFFEFF
FEFFFE0F037E8C14>I<70F8F8F8700505798414>I<0006000E000E001C001C0038003800
70007000E000E001C001C0038003800380070007000E000E001C001C0038003800700070
00E000E000C0000F1D7E9914>I<07C00FE01C7038383018701C701CE00EE00EE00EE00E
E00EE00EE00EE00EE00E701C701C383838381C700FE007C00F177E9614>I<0300030007
000F003F00F7004700070007000700070007000700070007000700070007000700070007
007FF07FF00C177C9614>I<0FC01FF03838701CE00EE00EE00E400E000E001C001C0038
0030007000E001C0030006000C00180E300E7FFE7FFE0F177E9614>I<0FC01FF0383870
1C701C201C001C0018003800700FE00FF00038001C000E000E400EE00EE00E701C78383F
F00FC00F177E9614>I<00780000F80001B80001B8000338000338000638000E38000C38
001C3800383800303800703800E03800FFFF80FFFF800038000038000038000038000038
0001FF0001FF0011177F9614>I<7FFC7FFC700070007000700070007000700077C07FF0
7838601C000C000E000E400EE00EE01C601C78783FF00FC00F177E9614>I<01F007F80E
1C1C1C381C300070007000E000E7C0EFF0F838F01CF00CE00EE00E600E700E700C381C1C
380FF007C00F177E9614>I<E000FFFEFFFEE01CE0380030007000E000C001C001800380
038007000700070007000E000E000E000E000E000E0004000F187E9714>I<0FE03FF878
3C701CE00EE00EE00EE00E701C1EF003801FF03838701CE00EE00EE00EE00EF01E701C38
381FF007C00F177E9614>I<07C01FE038307038601CE01CE00CE00EE00E601E701E383E
1FEE07CE000E001C001C001C7038703070E03FC01F000F177E9614>I<70F8F8F8700000
0000000070F8F8F8700510798F14>I<70F8F8F87000000000000060F0F8F878183070E0
800515798F14>I<000E003E007C00F003E007C01F003E00F800F000F8003E001F0007C0
03E000F0007C003E000E0F137E9414>I<FFFF80FFFF807FFF800000000000000000007F
FF80FFFF80FFFF8011097F8F14>I<4000E000F8007C001E000F8007C001F000F8003E00
1E003E00F801F007C00F801E007C00F800E00040000F157E9514>I<1FE03FF8701CE00E
E00E400E003C007000E001C0038003800380038003000000000000000000030007800780
03000F177E9614>I<01C00003E00003E000036000036000077000077000077000077000
0630000E38000E38000E38000E38001C1C001FFC001FFC001C1C001C1C00380E00380E00
FE3F80FE3F8011177F9614>65 D<FFF0FFFC381E380E3807380738073807380E381E3FFC
3FFC381E380E38073807380738073807380E381EFFFCFFF810177F9614>I<01F18007FF
800E1F801C0780380780700380700380700380E00000E00000E00000E00000E00000E000
00E000007003807003807003803807001C07000E0E0007FC0001F00011177F9614>I<FF
E000FFF800383C00381E00380E0038070038070038070038038038038038038038038038
0380380380380380380380380700380700380E00381E00383C00FFF800FFE00011177F96
14>I<FFFF00FFFF003807003807003807003807003800003800003838003838003FF800
3FF800383800383800380000380000380000380380380380380380380380FFFF80FFFF80
11177F9614>I<FFFF80FFFF803803803803803803803803803800003800003838003838
003FF8003FF800383800383800380000380000380000380000380000380000380000FF00
00FF000011177F9614>I<03C60FFE1C3E181E381E700E700E600EE000E000E000E000E0
7FE07FE00E600E700E700E381E181E1C3E0FFE03CE10177F9614>I<FE3F80FE3F80380E
00380E00380E00380E00380E00380E00380E00380E003FFE003FFE00380E00380E00380E
00380E00380E00380E00380E00380E00380E00FE3F80FE3F8011177F9614>I<FFF8FFF8
070007000700070007000700070007000700070007000700070007000700070007000700
0700FFF8FFF80D177D9614>I<07FC07FC00700070007000700070007000700070007000
70007000700070007000700070E070E070F0E07FC01F000E177D9614>I<FE3F00FE3F00
381C0038380038780038700038E00039E00039C0003B80003FC0003FE0003EE0003CF000
3C7000387800383800381C00381C00380E00380E00FE1F80FE1F8011177F9614>I<FF00
FF0038003800380038003800380038003800380038003800380038003800380038073807
38073807FFFFFFFF10177E9614>I<FC1F80FC1F807C1F00763700763700763700763700
77770077770073670073670073670073E70071C70071C700700700700700700700700700
700700700700F80F80F80F8011177F9614>I<FE3F80FE3F803E0E003B0E003B0E003B0E
003B0E003B8E00398E00398E0039CE0039CE0039CE0038CE0038CE0038EE00386E00386E
00386E00386E00383E00FE3E00FE3E0011177F9614>I<1FF07FFC783C701CE00EE00EE0
0EE00EE00EE00EE00EE00EE00EE00EE00EE00EE00EE00EE00E701C783C7FFC1FF00F177E
9614>I<FFF0FFFC381E380E38073807380738073807380E381E3FFC3FF0380038003800
38003800380038003800FE00FE0010177F9614>I<1FF07FFC783C701CE00EE00EE00EE0
0EE00EE00EE00EE00EE00EE00EE00EE00EE00EE38EE1CE71DC78FC7FFC1FF00078003800
3C001C001E0F1C7E9614>I<FFE000FFF800383C00381C00380E00380E00380E00380E00
381C00383C003FF8003FF000383800381C00381C00381C00381C00381C00381C80381DC0
381DC0FE0F80FE070012177F9614>I<0FCC1FFC307C603CE01CE01CE01CE00070007E00
3FE00FF001F8001C001E000E600EE00EE00EF01CF838FFF0C7E00F177E9614>I<7FFF80
FFFF80E1C380E1C380E1C380E1C38001C00001C00001C00001C00001C00001C00001C000
01C00001C00001C00001C00001C00001C00001C00001C0000FF8000FF80011177F9614>
I<FE0FE0FE0FE03803803803803803803803803803803803803803803803803803803803
803803803803803803803803803803803803801C07001C07000E0E0007FC0001F0001317
809614>I<FC1F80FC1F80380E00380E00380E003C1E001C1C001C1C001C1C001C1C000E
38000E38000E38000E380006300007700007700007700003600003600003E00003E00001
C00011177F9614>I<FC1F80FC1F80700700700700700700700700700700700700700700
31C60033E6003BEE003B6E003B6E003B6E003B6E003B6E001B6C001B6C001A2C001E3C00
1E3C001E3C0011177F9614>I<7E3E007E3E001C3C001E38000E78000F700007700007E0
0003E00003C00001C00003C00003E00003E0000770000770000E78000E38001C3C001C1C
003C1E00FE3F80FE3F8011177F9614>I<FC1F80FC1F80380E003C1E001C1C001E3C000E
38000E380007700007700003600003E00003E00001C00001C00001C00001C00001C00001
C00001C00001C00007F00007F00011177F9614>I<7FFEFFFEE01CE01CE038E038007000
E000E001C001C00380070007000E000E001C00380E380E700E700EFFFEFFFE0F177E9614
>I<FFE0FFE0E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000
E000E000E000E000E000E000E000E000E000E000FFE0FFE00B1D799914>I<FFE0FFE000
E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000
E000E000E000E000E000E000E0FFE0FFE00B1D7F9914>93 D<04001F007FC0F1E0E0E00B
057C9614>I<FFFEFFFEFFFE0F037E7E14>I<1FC0007FF000707800201800001C00001C00
07FC001FFC003C1C00701C00E01C00E01C00E01C00707C003FFF800F8F8011107E8F14>
97 D<FC0000FC00001C00001C00001C00001C00001C00001CF8001DFE001F07001E0300
1C03801C01C01C01C01C01C01C01C01C01C01C01C01C03801E03001F0E001DFC000CF800
1217809614>I<03F80FFE1C0E380470006000E000E000E000E00060007000380E1C1E0F
FC03F00F107E8F14>I<007E00007E00000E00000E00000E00000E00000E0007CE000FFE
001C3E00301E00700E00E00E00E00E00E00E00E00E00E00E00E00E00700E00301E00383E
001FEFC007CFC012177F9614>I<07E00FF01C38301C700CE00EE00EFFFEFFFEE0006000
7000380E1C1E0FFC03F00F107E8F14>I<00FC01FE038E07040700070007007FFEFFFE07
0007000700070007000700070007000700070007000700FFF8FFF80F177F9614>I<07CF
001FFF80383B80301800701C00701C00701C003018003838003FF00037C0007000007000
003FF8001FFC003FFE00700F00E00380E00380E00380E003807007003C1E001FFC0007F0
0011197F8F14>I<FC0000FC00001C00001C00001C00001C00001C00001C78001DFE001F
86001E07001C07001C07001C07001C07001C07001C07001C07001C07001C07001C0700FF
8FE0FF8FE01317809614>I<06000F000F0006000000000000000000FF00FF0007000700
0700070007000700070007000700070007000700FFF8FFF80D187C9714>I<006000F000
F0006000000000000000001FF01FF0007000700070007000700070007000700070007000
70007000700070007000700070007040E0E0C07F803F000C207E9714>I<FC0000FC0000
1C00001C00001C00001C00001C00001CFF801CFF801C1C001C38001C70001CE0001DC000
1FE0001FE0001E70001C38001C3C001C1C001C0E00FF1F80FF1F801117809614>I<FF80
FF8003800380038003800380038003800380038003800380038003800380038003800380
03800380FFFEFFFE0F177E9614>I<FB8E00FFDF003CF3803CF38038E38038E38038E380
38E38038E38038E38038E38038E38038E38038E380FEFBE0FE79E01310808F14>I<FC78
00FDFE001F86001E07001C07001C07001C07001C07001C07001C07001C07001C07001C07
001C0700FF8FE0FF8FE01310808F14>I<07C01FF03C78701C701CE00EE00EE00EE00EE0
0EE00E701C783C3C781FF007C00F107E8F14>I<FCF800FDFE001F07001E03001C03801C
01C01C01C01C01C01C01C01C01C01C01C01C03801E03001F0E001DFC001CF8001C00001C
00001C00001C00001C00001C0000FF8000FF80001218808F14>I<03E7000FF7001C1F00
300F00700F00E00700E00700E00700E00700E00700E00700700F00300F001C3F000FF700
07C700000700000700000700000700000700000700003FE0003FE013187F8F14>I<FE1F
00FE7F800EE3800F81000F00000F00000E00000E00000E00000E00000E00000E00000E00
000E0000FFF000FFF00011107F8F14>I<0FD83FF86038C038C038F0007F803FF007F800
1C6006E006F006F81CFFF8CFE00F107E8F14>I<06000E000E000E000E007FFCFFFC0E00
0E000E000E000E000E000E000E000E0E0E0E0E0E0E1C07F801F00F157F9414>I<FC3F00
FC3F001C07001C07001C07001C07001C07001C07001C07001C07001C07001C07001C0700
1C1F000FFFE003E7E01310808F14>I<FE3F80FE3F803C1E001C1C001C1C001C1C000E38
000E38000E380006300007700007700007700003E00003E00003E00011107F8F14>I<FE
3F80FE3F80700700380E00380E00380E0039CE0039CE0039CE001B6C001A6C001A6C001A
6C001E7C001E7C000E380011107F8F14>I<7E3F007E3F001E3C000E780007700007E000
03E00001C00003C00003E0000770000E78000E38001C1C00FE3F80FE3F8011107F8F14>
I<FE3F80FE3F801C0E001C1C001C1C000E1C000E38000E38000738000730000730000370
0003700003E00001E00001E00001C00001C00001C0000380007380007700007E00003C00
0011187F8F14>I<3FFF7FFF700E701C7038007000E001C0038007000E001C0738077007
FFFFFFFF10107F8F14>I<003E00FE01E003800380038003800380038003800380038003
807F00FE007F00038003800380038003800380038003800380038001E000FE003E0F1D7E
9914>I<E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0031D78
9914>I<7800FE000F00038003800380038003800380038003800380038001FC00FE01FC
03800380038003800380038003800380038003800F00FE0078000F1D7E9914>I
E /FG 83 123 df<60F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0600000000060F0F060041977
9816>33 D<E038F078F078F078F078F078F078F078E038E03860300D0B7C9816>I<0387
000387000387000387000387000387007FFFC0FFFFE0FFFFE0070E00070E00070E000E1C
000E1C000E1C000E1C00FFFFE0FFFFE07FFFC01C38001C38001C38001C38001C38001C38
0013197F9816>I<00C00001C00001C00001C00007F0001FFC003FFE007DCF0071C780E1
C380E1C780E1C780F1C30079C0003FC0001FF00007FC0001FE0001CF0001C70061C380F1
C380F1C380E1C38071C70079DF003FFE001FF80007E00001C00001C00000C00011207E9C
16>I<30787C3C1C1C1C1C3878F0E040060D789816>39 D<00E001E0038007000E001C00
1C0038003800700070007000E000E000E000E000E000E000E000E000E000700070007000
380038001C001C000E000700038001E000E00B217A9C16>I<C000E000700038001C000E
000E000700070003800380038001C001C001C001C001C001C001C001C001C00380038003
80070007000E000E001C0038007000E000C0000A217B9C16>I<0380038003800380E38E
F39EFFFE3FF80FE00FE03FF8FFFEF39EE38E03800380038003800F127D9516>I<00E000
00E00000E00000E00000E00000E00000E00000E000FFFFE0FFFFE0FFFFE000E00000E000
00E00000E00000E00000E00000E00000E00013137F9516>I<387C7E7E3E0E1E1C78F060
070B798416>I<FFFF80FFFF80FFFF8011037E8D16>I<70F8F8F8700505788416>I<0001
80000380000380000700000700000E00000E00001C00001C000038000038000070000070
0000E00000E00001C00001C0000380000380000700000700000E00000E00001C00001C00
00380000380000700000700000E00000E00000C0000011207E9C16>I<03E0000FF8001F
FC001E3C00380E00780F00700700700700E00380E00380E00380E00380E00380E00380E0
0380E00380F00780700700700700780F003C1E001E3C001FFC000FF80003E00011197E98
16>I<0300070007000F001F00FF00FF00E7000700070007000700070007000700070007
0007000700070007000700FFF8FFF8FFF80D197B9816>I<07E0001FF8003FFC00783E00
E00700F00780F00380600380000380000380000700000700000E00001C00003800007000
00E00001C0000380000F00001E03803803807FFF80FFFF807FFF8011197E9816>I<07E0
001FF8003FFC00781E00780700300700000700000700000E00003E0007FC0007F00007FC
00001E00000700000300000380000380600380F00380E00700781E003FFC001FF80007E0
0011197E9816>I<007C0000FC0000DC0001DC00039C00039C00071C000F1C000E1C001E
1C003C1C00381C00781C00F01C00FFFFE0FFFFE0FFFFE0001C00001C00001C00001C0000
1C0001FFC001FFC001FFC013197F9816>I<3FFE007FFE007FFE00700000700000700000
70000070000070000070000077F0007FFC007FFE00780F00300700000380000380600380
F00380F00380E00700781E003FFC001FF80007E00011197E9816>I<00F80003FC0007FE
000F07001C0F00380F00780600700000700000E3F800EFFC00FFFE00F80F00F00700F003
80E00380E003807003807003807007803807003C1E001FFC000FF80003E00011197E9816
>I<E00000FFFF80FFFF80FFFF80E00F00E01E00001C0000380000780000700000E00000
E00001C00001C00001C00003800003800003800003800007000007000007000007000007
0000070000070000111A7E9916>I<07F0001FFC003FFE007C1F00F00780E00380E00380
E003807007007C1F001FFC0007F0001FFC003C1E00700700F00780E00380E00380E00380
F007807007007C1F003FFE001FFC0007F00011197E9816>I<03E0000FF8001FFC003C1E
00700E00700700E00700E00780E00380E00380E00780700780780F803FFF801FFB800FE3
80000700000700300700780E00781C00707C003FF8001FE0000F800011197E9816>I<70
F8F8F870000000000000000070F8F8F8700512789116>I<387C7C7C3800000000000000
0038787C7C3C1C1C3870F0400618799116>I<000180000780001F80003E0000F80001F0
0007C0000F80003E0000FC0000F00000FC00003E00000F800007C00001F00000F800003E
00001F8000078000018011157E9616>I<7FFFC0FFFFE0FFFFE000000000000000000000
0000000000FFFFE0FFFFE07FFFC0130B7F9116>I<C00000F00000FC00003E00000F8000
07C00001F00000F800003E00001F80000780001F80003E0000F80001F00007C0000F8000
3E0000FC0000F00000C0000011157E9616>I<0FF0003FFE007FFF00F00F80F00380F003
80600780001F00003E0000780000F00001C00001C00001C00001C00001C0000180000000
0000000000000000000001800003C00003C00001800011197E9816>I<00E00001F00001
F00001B00001B00003B80003B80003B800031800071C00071C00071C00071C00071C000E
0E000E0E000FFE000FFE001FFF001C07001C07001C07007E0FC0FF1FE07E0FC013197F98
16>65 D<7FF800FFFE007FFF001C07001C07801C03801C03801C03801C03801C07001FFF
001FFE001FFE001C1F001C03801C03C01C01C01C01C01C01C01C01C01C03C01C07807FFF
80FFFF007FFC0012197F9816>I<01F18007FB800FFF801F0F803C078038038070038070
0380F00000E00000E00000E00000E00000E00000E00000E00000F0000070038070038038
03803C07001F0F000FFE0007FC0001F00011197E9816>I<7FF800FFFE007FFF001C0F00
1C07801C03C01C01C01C01C01C01E01C00E01C00E01C00E01C00E01C00E01C00E01C00E0
1C00E01C01C01C01C01C03C01C07801C0F807FFF00FFFE007FF8001319809816>I<7FFF
C0FFFFC07FFFC01C01C01C01C01C01C01C01C01C00001C00001C1C001C1C001FFC001FFC
001FFC001C1C001C1C001C00001C00E01C00E01C00E01C00E01C00E07FFFE0FFFFE07FFF
E013197F9816>I<7FFFE0FFFFE07FFFE01C00E01C00E01C00E01C00E01C00001C00001C
1C001C1C001FFC001FFC001FFC001C1C001C1C001C00001C00001C00001C00001C00001C
00007F8000FFC0007F800013197F9816>I<01F18007FB800FFF801F0F803C0780380380
700380700380F00000E00000E00000E00000E00000E01FC0E01FE0E01FC0F00380700380
7007803807803C07801E0F800FFF8007FB8001F38013197F9816>I<7F07F0FF8FF87F07
F01C01C01C01C01C01C01C01C01C01C01C01C01C01C01FFFC01FFFC01FFFC01C01C01C01
C01C01C01C01C01C01C01C01C01C01C01C01C01C01C07F07F0FF8FF87F07F01519809816
>I<7FFCFFFE7FFC03800380038003800380038003800380038003800380038003800380
038003800380038003807FFCFFFE7FFC0F197D9816>I<FF8000FFC000FF80001C00001C
00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C
00001C00401C00E01C00E01C00E01C00E0FFFFE0FFFFE0FFFFE013197F9816>76
D<FC07E0FE0FE0FE0FE03A0B803B1B803B1B803B1B803B1B803B1B803BBB8039B38039B3
8039B38039B38039F38038E38038E380380380380380380380380380380380FE0FE0FE0F
E0FE0FE013197F9816>I<7E07F0FF0FF87F07F01D81C01D81C01D81C01DC1C01CC1C01C
E1C01CE1C01C61C01C71C01C71C01C71C01C31C01C39C01C39C01C19C01C1DC01C0DC01C
0DC01C0DC07F07C0FF87C07F03C01519809816>I<1FFC003FFE007FFF00780F00F00780
E00380E00380E00380E00380E00380E00380E00380E00380E00380E00380E00380E00380
E00380E00380F00780F00780780F007FFF003FFE001FFC0011197E9816>I<7FF800FFFE
007FFF001C0F801C03801C03C01C01C01C01C01C01C01C03C01C03801C0F801FFF001FFE
001FF8001C00001C00001C00001C00001C00001C00001C00007F0000FF80007F00001219
7F9816>I<1FFC003FFE007FFF00780F00F00780E00380E00380E00380E00380E00380E0
0380E00380E00380E00380E00380E00380E00380E00380E0E380E1E380F0F780787F007F
FF003FFE001FFC00001C00001E00000E00000F00000700000700111F7E9816>I<7FF000
FFFC007FFE001C0F001C07801C03801C03801C03801C03801C07801C0F001FFE001FFC00
1FFE001C0E001C07001C07001C07001C07001C07101C07381C07387F03F0FF83F07F01E0
1519809816>I<07E3001FFF003FFF00781F00F00700E00700E00700E00000F000007800
003F80001FF00007FC0000FE00000F00000700000380000380600380E00380E00700F80F
00FFFE00FFFC00C7F00011197E9816>I<7FFFE0FFFFE0FFFFE0E0E0E0E0E0E0E0E0E0E0
E0E000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000
E00000E00000E00000E00007FC000FFE0007FC0013197F9816>I<7F07F0FF8FF87F07F0
1C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C0
1C01C01C01C01C01C01C01C00E03800E038007070007FF0003FE0000F8001519809816>
I<FE0FE0FE0FE0FE0FE03803803C07801C07001C07001C07001E0F000E0E000E0E000E0E
000E0E00071C00071C00071C00071C0003180003B80003B80003B80001B00001F00001F0
0000E00013197F9816>I<7E03F0FF07F87E03F03800E03800E03800E03800E01C01C01C
01C01C01C01C71C01CF9C01CF9C01CD9C01CD9C00CD9800CD9800CD9800DDD800D8D800D
8D800D8D80078F00078F000707001519809816>I<7F1F807F3FC07F1F800E1E000E1C00
071C0007380003B80003F00001F00001E00000E00001E00001F00003F00003B80007B800
071C000F1C000E0E000E0E001C07007E0FC0FF1FE07E0FC013197F9816>I<FE0FE0FF1F
E0FE0FE01C07001C07000E0E000E0E00071C00071C00071C0003B80003B80001F00001F0
0000E00000E00000E00000E00000E00000E00000E00000E00003F80007FC0003F8001319
7F9816>I<7FFF80FFFF80FFFF80E00700E00F00E01E00E01C00003C0000780000700000
F00001E00001C00003C0000780000700000F00001E03801C03803C0380780380700380FF
FF80FFFF80FFFF8011197E9816>I<FFF0FFF0FFF0E000E000E000E000E000E000E000E0
00E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E0
00FFF0FFF0FFF00C20789C16>I<FFF0FFF0FFF000700070007000700070007000700070
007000700070007000700070007000700070007000700070007000700070007000700070
FFF0FFF0FFF00C207F9C16>93 D<03000F803FE0FDF8F07840100D067C9816>I<FFFF80
FFFF80FFFF8011037E7E16>I<1FE0003FF0007FF800783C00300E00000E00000E0003FE
001FFE003E0E00700E00E00E00E00E00E00E00783E007FFFE03FE7E00F83E013127E9116
>97 D<FC0000FC0000FC00001C00001C00001C00001C00001C7C001DFE001FFF001F0780
1E03C01C01C01C00E01C00E01C00E01C00E01C00E01C00E01C01C01E03C01F07801FFF00
1DFE000C780013197F9816>I<03F80FFC1FFE3C1E780C7000E000E000E000E000E000F0
00700778073E0E1FFC0FF803F010127D9116>I<003F00003F00003F0000070000070000
070000070003C7000FF7001FFF003C1F00780F00700700E00700E00700E00700E00700E0
0700E00700700F00780F003C1F001FFFE00FF7E007C7E013197F9816>I<03F0000FFC00
1FFE003C0F00780700700380E00380FFFF80FFFF80FFFF80E00000E00000700380780380
3E07801FFF0007FE0001F80011127E9116>I<001E00007F0001FF8001C7800383000380
000380007FFF00FFFF00FFFF000380000380000380000380000380000380000380000380
000380000380000380000380007FFC00FFFE007FFC0011197F9816>I<03E3C007F7E00F
FFE01C1CC0380E00380E00380E00380E00380E001C1C000FF8001FF0001BE00038000018
00001FFC001FFF003FFF807003C0E000E0E000E0E000E0E000E07001C07C07C03FFF800F
FE0003F800131C7F9116>I<FC0000FC0000FC00001C00001C00001C00001C00001C7800
1DFC001FFE001F0F001E07001C07001C07001C07001C07001C07001C07001C07001C0700
1C07001C0700FF8FE0FF9FE0FF8FE013197F9816>I<0300078007800300000000000000
0000FF80FF80FF80038003800380038003800380038003800380038003800380FFFCFFFE
FFFC0F1A7C9916>I<003000780078003000000000000000000FF81FF80FF80038003800
3800380038003800380038003800380038003800380038003800380038003800386070F0
F0FFE07FC03F800D237E9916>I<7E0000FE00007E00000E00000E00000E00000E00000E
7FE00E7FE00E7FE00E0F000E1E000E3C000E78000EF0000FF0000FF8000FBC000F1E000E
0E000E07000E07807F87F0FFCFF07F87F01419809816>I<7FC000FFC0007FC00001C000
01C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C000
01C00001C00001C00001C00001C00001C0007FFF00FFFF807FFF0011197E9816>I<F9C3
80FFEFC0FFFFE03C78E03C78E03870E03870E03870E03870E03870E03870E03870E03870
E03870E03870E0FE7CF8FE7CF8FE7CF81512809116>I<FC7800FDFC00FFFE001F0F001E
07001C07001C07001C07001C07001C07001C07001C07001C07001C07001C0700FF8FE0FF
9FE0FF8FE013127F9116>I<03E0000FF8001FFC003C1E00780F00700700E00380E00380
E00380E00380E00380F00780700700780F003C1E001FFC000FF80003E00011127E9116>
I<FC7C00FDFE00FFFF001F07801E03C01C01C01C00E01C00E01C00E01C00E01C00E01C00
E01C01C01E03C01F07801FFF001DFE001C78001C00001C00001C00001C00001C00001C00
00FF8000FF8000FF8000131B7F9116>I<03E3800FF3801FFB803E0F80780780700780E0
0380E00380E00380E00380E00380E003807007807807803C1F801FFB800FF38003E38000
0380000380000380000380000380000380001FF0003FF8001FF0151B7F9116>I<7F0FC0
FF3FE07F7FE007F04007C000078000078000070000070000070000070000070000070000
0700000700007FFC00FFFC007FFC0013127F9116>I<0FEC3FFC7FFCF03CE01CE01C7000
7F801FF007F8003C600EE00EF00EF81EFFFCFFF8C7E00F127D9116>I<03000007000007
00000700000700007FFF00FFFF00FFFF0007000007000007000007000007000007000007
000007010007038007038007038007870003FE0001FC0000F80011177F9616>I<FC3F00
FC3F00FC3F001C07001C07001C07001C07001C07001C07001C07001C07001C07001C0700
1C07001C1F001FFFE00FF7E007C7E013127F9116>I<7F1FC0FF9FE07F1FC01C07001C07
000E0E000E0E000E0E00071C00071C00071C00071C0003B80003B80003B80001F00001F0
0000E00013127F9116>I<FF1FE0FF1FE0FF1FE038038038038038038038038039F38039
F38019F30019B30019B30019B3001DB7001D17001F1F000F1E000E0E0013127F9116>I<
7F1FC07F3FC07F1FC00F1E00073C0003B80003F00001F00000E00001E00001F00003B800
073C00071C000E0E007F1FC0FF3FE07F1FC013127F9116>I<7F1FC0FF9FE07F1FC01C07
000E07000E0E000E0E00070E00071C00071C00039C00039C0003980001B80001B80000F0
0000F00000F00000E00000E00000E00001C00079C0007BC0007F80007F00003C0000131B
7F9116>I<3FFFC07FFFC07FFFC0700780700F00701E00003C0000780001F00003E00007
80000F00001E01C03C01C07801C0FFFFC0FFFFC0FFFFC012127F9116>I
E /FH 63 123 df<000FF000007FFC0001F80E0003E01F0007C03F000F803F000F803F00
0F801E000F800C000F8000000F8000000F8000000F800000FFFFFF00FFFFFF000F801F00
0F801F000F801F000F801F000F801F000F801F000F801F000F801F000F801F000F801F00
0F801F000F801F000F801F000F801F000F801F000F801F000F801F000F801F007FF0FFE0
7FF0FFE01B237FA21F>12 D<000FFF00007FFF0001F83F0003E03F0007C03F000F803F00
0F801F000F801F000F801F000F801F000F801F000F801F000F801F00FFFFFF00FFFFFF00
0F801F000F801F000F801F000F801F000F801F000F801F000F801F000F801F000F801F00
0F801F000F801F000F801F000F801F000F801F000F801F000F801F000F801F000F801F00
7FF0FFE07FF0FFE01B237FA21F>I<387CFEFFFF7F3B03030306060C1C18702008117CA2
10>39 D<387CFEFFFF7F3B03030306060C1C18702008117C8610>44
D<FFFCFFFCFFFCFFFC0E047F8C13>I<387CFEFEFE7C3807077C8610>I<00FE0007FFC00F
83E01F01F03E00F83E00F87C007C7C007C7C007CFC007CFC007EFC007EFC007EFC007EFC
007EFC007EFC007EFC007EFC007EFC007EFC007EFC007EFC007E7C007C7C007C7C007C3E
00F83E00F81F01F00F83E007FFC000FE0017207E9F1C>48 D<00180000780001F800FFF8
00FFF80001F80001F80001F80001F80001F80001F80001F80001F80001F80001F80001F8
0001F80001F80001F80001F80001F80001F80001F80001F80001F80001F80001F80001F8
0001F80001F8007FFFE07FFFE013207C9F1C>I<03FC000FFF003C1FC07007E07C07F0FE
03F0FE03F8FE03F8FE01F87C01F83803F80003F80003F00003F00007E00007C0000F8000
1F00003E0000380000700000E01801C0180380180700180E00380FFFF01FFFF03FFFF07F
FFF0FFFFF0FFFFF015207D9F1C>I<00FE0007FFC00F07E01E03F03F03F03F81F83F81F8
3F81F81F03F81F03F00003F00003E00007C0001F8001FE0001FF000007C00001F00001F8
0000FC0000FC3C00FE7E00FEFF00FEFF00FEFF00FEFF00FC7E01FC7801F81E07F00FFFC0
01FE0017207E9F1C>I<0000E00001E00003E00003E00007E0000FE0001FE0001FE00037
E00077E000E7E001C7E00187E00307E00707E00E07E00C07E01807E03807E07007E0E007
E0FFFFFFFFFFFF0007E00007E00007E00007E00007E00007E00007E000FFFF00FFFF1820
7E9F1C>I<3000203E01E03FFFC03FFF803FFF003FFE003FF80033C00030000030000030
000030000031FC0037FF003E0FC03807E03003E00003F00003F00003F80003F83803F87C
03F8FE03F8FE03F8FC03F0FC03F07007E03007C03C1F800FFF0003F80015207D9F1C>I<
001F8000FFE003E07007C0F00F01F81F01F83E01F83E01F87E00F07C00007C0000FC0800
FC7FC0FCFFE0FD80F0FF00F8FE007CFE007CFC007EFC007EFC007EFC007E7C007E7C007E
7C007E3C007C3E007C1E00F80F00F00783E003FFC000FF0017207E9F1C>I<6000007800
007FFFFE7FFFFE7FFFFC7FFFF87FFFF87FFFF0E00060E000C0C00180C00300C003000006
00000C00001C0000180000380000780000780000F00000F00000F00001F00001F00001F0
0003F00003F00003F00003F00003F00003F00003F00001E00017227DA11C>I<00FE0003
FFC00703E00E00F01C00F01C00783C00783E00783F00783F80783FE0F01FF9E01FFFC00F
FF8007FFC003FFE007FFF01E7FF83C1FFC7807FC7801FEF000FEF0003EF0001EF0001EF0
001EF8001C7800383C00381F00F00FFFC001FF0017207E9F1C>I<01FE0007FF800F83E0
1E01F03E00F07C00F87C0078FC007CFC007CFC007CFC007EFC007EFC007EFC007E7C00FE
7C00FE3E01FE1E037E0FFE7E07FC7E00207E00007C00007C1E007C3F00F83F00F83F00F0
3F01E01E03C01C0F800FFE0003F80017207E9F1C>I<387CFEFEFE7C3800000000000000
00387CFEFEFE7C3807167C9510>I<000070000000007000000000F800000000F8000000
00F800000001FC00000001FC00000003FE00000003FE00000003FE000000067F00000006
7F0000000C7F8000000C3F8000000C3F800000181FC00000181FC00000301FE00000300F
E00000700FF000006007F000006007F00000C007F80000FFFFF80001FFFFFC00018001FC
00018001FC00030001FE00030000FE00070000FF000600007F000600007F00FFE007FFF8
FFE007FFF825227EA12A>65 D<FFFFFF8000FFFFFFF00007F001F80007F000FC0007F000
7E0007F0007E0007F0007F0007F0007F0007F0007F0007F0007F0007F0007F0007F0007E
0007F000FE0007F000FC0007F003F80007FFFFF00007FFFFF00007F001FC0007F0007E00
07F0003F0007F0003F8007F0001F8007F0001FC007F0001FC007F0001FC007F0001FC007
F0001FC007F0001FC007F0003F8007F0003F8007F0007F0007F001FE00FFFFFFF800FFFF
FFC00022227EA128>I<0003FE0080001FFF818000FF01E38001F8003F8003E0001F8007
C0000F800F800007801F800007803F000003803F000003807F000001807E000001807E00
000180FE00000000FE00000000FE00000000FE00000000FE00000000FE00000000FE0000
0000FE000000007E000000007E000001807F000001803F000001803F000003801F800003
000F8000030007C000060003F0000C0001F800380000FF00F000001FFFC0000003FE0000
21227DA128>I<FFFFFF8000FFFFFFF00007F003FC0007F0007E0007F0003F0007F0001F
8007F0000FC007F00007E007F00007E007F00007F007F00003F007F00003F007F00003F0
07F00003F807F00003F807F00003F807F00003F807F00003F807F00003F807F00003F807
F00003F807F00003F807F00003F007F00003F007F00003F007F00007E007F00007E007F0
000FC007F0001F8007F0003F0007F0007E0007F003FC00FFFFFFF000FFFFFF800025227E
A12B>I<FFFFFFFCFFFFFFFC07F000FC07F0003C07F0001C07F0000C07F0000E07F0000E
07F0000607F00C0607F00C0607F00C0607F00C0007F01C0007F03C0007FFFC0007FFFC00
07F03C0007F01C0007F00C0007F00C0007F00C0307F00C0307F0000307F0000607F00006
07F0000607F0000E07F0000E07F0001E07F0003E07F001FCFFFFFFFCFFFFFFFC20227EA1
25>I<FFFFFFF8FFFFFFF807F001F807F0007807F0003807F0001807F0001C07F0001C07
F0000C07F0000C07F0180C07F0180C07F0180007F0180007F0380007F0780007FFF80007
FFF80007F0780007F0380007F0180007F0180007F0180007F0180007F0000007F0000007
F0000007F0000007F0000007F0000007F0000007F00000FFFFC000FFFFC0001E227EA123
>I<0003FE0040001FFFC0C0007F00F1C001F8003FC003F0000FC007C00007C00FC00003
C01F800003C03F000001C03F000001C07F000000C07E000000C07E000000C0FE00000000
FE00000000FE00000000FE00000000FE00000000FE00000000FE00000000FE000FFFFC7E
000FFFFC7F00001FC07F00001FC03F00001FC03F00001FC01F80001FC00FC0001FC007E0
001FC003F0001FC001FC003FC0007F80E7C0001FFFC3C00003FF00C026227DA12C>I<FF
FF80FFFF8007F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007
F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007
F00007F00007F00007F00007F00007F00007F00007F000FFFF80FFFF8011227EA115>73
D<01FFFF8001FFFF800003F8000003F8000003F8000003F8000003F8000003F8000003F8
000003F8000003F8000003F8000003F8000003F8000003F8000003F8000003F8000003F8
000003F8000003F8000003F8000003F8000003F8000003F8001803F8007E03F800FF03F8
00FF03F800FF03F800FF03F0007E07E0007C0FC0001FFF800007FC0000192280A11D>I<
FFFF803FFCFFFF803FFC07F000038007F000070007F0000E0007F000180007F000300007
F000E00007F001C00007F003800007F007000007F00E000007F018000007F03C000007F0
FC000007F1FE000007F3FF000007F77F000007FE3F800007F83FC00007F01FE00007F00F
E00007F007F00007F007F80007F003FC0007F001FC0007F001FE0007F000FF0007F0007F
0007F0003F8007F0003FC007F0001FE0FFFF81FFFEFFFF81FFFE27227EA12C>I<FFFFC0
00FFFFC00007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F000
0007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F000
0007F0000007F0000007F0001807F0001807F0001807F0001807F0003807F0003807F000
7007F0007007F000F007F001F007F007F0FFFFFFF0FFFFFFF01D227EA122>I<FFF00000
0FFFFFF800001FFF07F800001FE006FC000037E006FC000037E006FC000037E0067E0000
67E0067E000067E0063F0000C7E0063F0000C7E0061F800187E0061F800187E0060FC003
07E0060FC00307E0060FC00307E00607E00607E00607E00607E00603F00C07E00603F00C
07E00601F81807E00601F81807E00601F81807E00600FC3007E00600FC3007E006007E60
07E006007E6007E006003FC007E006003FC007E006001F8007E006001F8007E006001F80
07E006000F0007E0FFF00F00FFFFFFF00600FFFF30227EA135>I<0007FC0000003FFF80
0000FC07E00003F001F80007E000FC000FC0007E001F80003F001F80003F003F00001F80
3F00001F807F00001FC07E00000FC07E00000FC0FE00000FE0FE00000FE0FE00000FE0FE
00000FE0FE00000FE0FE00000FE0FE00000FE0FE00000FE0FE00000FE07E00000FC07F00
001FC07F00001FC03F00001F803F80003F801F80003F000FC0007E0007E000FC0003F001
F80000FC07E000003FFF80000007FC000023227DA12A>79 D<FFFFFF00FFFFFFE007F007
F007F001FC07F000FC07F0007E07F0007E07F0007F07F0007F07F0007F07F0007F07F000
7F07F0007E07F0007E07F000FC07F001FC07F007F007FFFFE007FFFF0007F0000007F000
0007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F000
0007F0000007F00000FFFF8000FFFF800020227EA126>I<FFFFFE0000FFFFFFC00007F0
07F00007F001F80007F000FC0007F0007E0007F0007F0007F0007F0007F0007F0007F000
7F0007F0007F0007F0007F0007F0007E0007F000FC0007F001F80007F007F00007FFFFC0
0007FFFF800007F00FE00007F007F00007F003F80007F001FC0007F001FC0007F001FC00
07F001FC0007F001FC0007F001FC0007F001FC0007F001FC0007F001FC0607F000FE0607
F000FF0CFFFF803FF8FFFF800FF027227EA12A>82 D<01FE0207FF861F01FE3C007E7C00
1E78000E78000EF80006F80006FC0006FC0000FF0000FFE0007FFF007FFFC03FFFF01FFF
F80FFFFC03FFFE003FFE0003FE00007F00003F00003FC0001FC0001FC0001FE0001EE000
1EF0003CFC003CFF00F8C7FFE080FF8018227DA11F>I<7FFFFFFF807FFFFFFF807E03F8
0F807803F807807003F803806003F80180E003F801C0E003F801C0C003F800C0C003F800
C0C003F800C0C003F800C00003F800000003F800000003F800000003F800000003F80000
0003F800000003F800000003F800000003F800000003F800000003F800000003F8000000
03F800000003F800000003F800000003F800000003F800000003F800000003F800000003
F8000001FFFFF00001FFFFF00022227EA127>I<FFFF803FFCFFFF803FFC07F000018007
F000018007F000018007F000018007F000018007F000018007F000018007F000018007F0
00018007F000018007F000018007F000018007F000018007F000018007F000018007F000
018007F000018007F000018007F000018007F000018007F000018007F000018007F00001
8007F000018003F000030003F800030001F800060000FC000E00007E001C00003F80F800
000FFFE0000001FF000026227EA12B>I<FFFF000FFEFFFF000FFE07F00000C007F00000
C003F800018003F800018003FC00038001FC00030001FE00030000FE00060000FF000600
007F000C00007F000C00007F801C00003F801800003FC03800001FC03000001FE0300000
0FE06000000FE060000007F0C0000007F0C0000007F9C0000003F980000003FD80000001
FF00000001FF00000000FE00000000FE00000000FE000000007C000000007C0000000038
0000000038000027227FA12A>I<FFFF0FFFF00FFEFFFF0FFFF00FFE0FF000FF0000E007
F0007F0000C007F0007F0000C003F8003F80018003F8003F80018003FC003FC0018001FC
003FC0030001FC003FC0030001FE007FE0070000FE006FE0060000FE006FE00600007F00
C7F00C00007F00C7F00C00007F81C7F80C00003F8183F81800003F8183F81800003FC301
FC3800001FC301FC3000001FC301FE3000000FE600FE6000000FE600FE6000000FFE00FF
E0000007FC007FC0000007FC007FC0000003F8003F80000003F8003F80000003F8003F80
000001F0001F00000001F0001F00000001F0001F00000000E0000E00000000E0000E0000
37227FA13A>I<0FFC003FFF807E07C07E03E07E01E07E01F03C01F00001F00001F0003F
F003FDF01FC1F03F01F07E01F0FC01F0FC01F0FC01F0FC01F07E02F07E0CF81FF87F07E0
3F18167E951B>97 D<FF000000FF0000001F0000001F0000001F0000001F0000001F0000
001F0000001F0000001F0000001F0000001F0000001F0000001F0FE0001F3FF8001FE07C
001F803E001F001F001F000F801F000F801F000FC01F000FC01F000FC01F000FC01F000F
C01F000FC01F000FC01F000FC01F000F801F001F801F801F001FC03E001EE07C001C3FF8
00180FC0001A237EA21F>I<00FF8007FFE00F83F01F03F03E03F07E03F07C01E07C0000
FC0000FC0000FC0000FC0000FC0000FC00007C00007E00007E00003E00181F00300FC060
07FFC000FF0015167E9519>I<0001FE000001FE0000003E0000003E0000003E0000003E
0000003E0000003E0000003E0000003E0000003E0000003E0000003E0001FC3E0007FFBE
000F81FE001F007E003E003E007E003E007C003E00FC003E00FC003E00FC003E00FC003E
00FC003E00FC003E00FC003E00FC003E007C003E007C003E003E007E001F00FE000F83BE
0007FF3FC001FC3FC01A237EA21F>I<00FE0007FF800F87C01E01E03E01F07C00F07C00
F8FC00F8FC00F8FFFFF8FFFFF8FC0000FC0000FC00007C00007C00007E00003E00181F00
300FC07003FFC000FF0015167E951A>I<001FC0007FE000F1F001E3F003E3F007C3F007
C1E007C00007C00007C00007C00007C00007C000FFFE00FFFE0007C00007C00007C00007
C00007C00007C00007C00007C00007C00007C00007C00007C00007C00007C00007C00007
C00007C00007C0003FFC003FFC00142380A211>I<01FE0F0007FFBF800F87C7801F03E7
801E01E0003E01F0003E01F0003E01F0003E01F0003E01F0001E01E0001F03E0000F87C0
000FFF800009FE000018000000180000001C0000001FFFE0000FFFF80007FFFE001FFFFF
003C003F0078000F80F0000780F0000780F0000780F000078078000F003C001E001F007C
000FFFF80001FFC00019217F951C>I<FF000000FF0000001F0000001F0000001F000000
1F0000001F0000001F0000001F0000001F0000001F0000001F0000001F0000001F07E000
1F1FF8001F307C001F403C001F803E001F803E001F003E001F003E001F003E001F003E00
1F003E001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F003E00
1F003E00FFE1FFC0FFE1FFC01A237EA21F>I<1C003E007F007F007F003E001C00000000
0000000000000000000000FF00FF001F001F001F001F001F001F001F001F001F001F001F
001F001F001F001F001F001F001F00FFE0FFE00B247EA310>I<0038007C00FE00FE00FE
007C0038000000000000000000000000000003FE03FE003E003E003E003E003E003E003E
003E003E003E003E003E003E003E003E003E003E003E003E003E003E003E003E783EFC3E
FC3CFC7C78F87FE01F800F2E83A311>I<FF000000FF0000001F0000001F0000001F0000
001F0000001F0000001F0000001F0000001F0000001F0000001F0000001F0000001F00FF
801F00FF801F0038001F0060001F01C0001F0380001F0700001F0E00001F1C00001F7E00
001FFF00001FCF00001F0F80001F07C0001F03E0001F01E0001F01F0001F00F8001F007C
001F003C00FFE0FFC0FFE0FFC01A237EA21E>I<FF00FF001F001F001F001F001F001F00
1F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F00
1F001F001F001F001F001F001F00FFE0FFE00B237EA210>I<FF07F007F000FF1FFC1FFC
001F303E303E001F403E403E001F801F801F001F801F801F001F001F001F001F001F001F
001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F
001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F
00FFE0FFE0FFE0FFE0FFE0FFE02B167E9530>I<FF07E000FF1FF8001F307C001F403C00
1F803E001F803E001F003E001F003E001F003E001F003E001F003E001F003E001F003E00
1F003E001F003E001F003E001F003E001F003E001F003E001F003E00FFE1FFC0FFE1FFC0
1A167E951F>I<00FE0007FFC00F83E01E00F03E00F87C007C7C007C7C007CFC007EFC00
7EFC007EFC007EFC007EFC007EFC007E7C007C7C007C3E00F81F01F00F83E007FFC000FE
0017167E951C>I<FF0FE000FF3FF8001FE07C001F803E001F001F001F001F801F001F80
1F000FC01F000FC01F000FC01F000FC01F000FC01F000FC01F000FC01F000FC01F001F80
1F001F801F803F001FC03E001FE0FC001F3FF8001F0FC0001F0000001F0000001F000000
1F0000001F0000001F0000001F0000001F000000FFE00000FFE000001A207E951F>I<00
FE030007FF87000FC1C7001F006F003F003F007E003F007E001F007C001F00FC001F00FC
001F00FC001F00FC001F00FC001F00FC001F00FC001F007E001F007E001F003E003F001F
007F000FC1DF0007FF9F0001FC1F0000001F0000001F0000001F0000001F0000001F0000
001F0000001F0000001F000000FFE00000FFE01B207E951E>I<FE1F00FE3FC01E67E01E
C7E01E87E01E87E01F83C01F00001F00001F00001F00001F00001F00001F00001F00001F
00001F00001F00001F00001F0000FFF000FFF00013167E9517>I<0FF3003FFF00781F00
600700E00300E00300F00300FC00007FE0007FF8003FFE000FFF0001FF00000F80C00780
C00380E00380E00380F00700FC0E00EFFC00C7F00011167E9516>I<0180000180000180
000180000380000380000780000780000F80003F8000FFFF00FFFF000F80000F80000F80
000F80000F80000F80000F80000F80000F80000F80000F80000F81800F81800F81800F81
800F81800F830007C30003FE0000F80011207F9F16>I<FF01FE00FF01FE001F003E001F
003E001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F
003E001F003E001F003E001F003E001F003E001F007E001F00FE000F81BE0007FF3FC001
FC3FC01A167E951F>I<FFE01FE0FFE01FE01F8007000F8006000FC00E0007C00C0007E0
0C0003E0180003E0180001F0300001F0300000F8600000F86000007CC000007CC000007F
C000003F8000003F8000001F0000001F0000000E0000000E00001B167F951E>I<FFE3FF
07F8FFE3FF07F81F007800C01F807C01C00F807C01800F807C018007C07E030007C0DE03
0007C0DE070003E1DF060003E18F060001F18F8C0001F3078C0001F3078C0000FF07D800
00FE03D80000FE03F800007C01F000007C01F000003C01E000003800E000003800E00025
167F9528>I<FFE07FC0FFE07FC00F801C0007C0380003E0700003F0600001F8C00000F9
8000007F8000003F0000001F0000001F8000003FC0000037C0000063E00000C1F00001C0
F8000380FC0007007E000E003E00FF80FFE0FF80FFE01B167F951E>I<FFE01FE0FFE01F
E01F8007000F8006000FC00E0007C00C0007E00C0003E0180003E0180001F0300001F030
0000F8600000F86000007CC000007CC000007FC000003F8000003F8000001F0000001F00
00000E0000000E0000000C0000000C00000018000078180000FC380000FC300000FC6000
0069C000007F8000001F0000001B207F951E>I<7FFFF07FFFF07C03E07007C0600FC0E0
1F80C01F00C03E00C07E0000FC0000F80001F00003F03007E03007C0300F80701F80703F
00603E00E07C03E0FFFFE0FFFFE014167E9519>I E /FI 56 123
df<0001FF0000001FFFC000007F81E00000FC01E00001F807F00003F807F00007F007F0
0007F007F00007F007F00007F007F00007F001C00007F000000007F000000007F0000000
07F03FF800FFFFFFF800FFFFFFF800FFFFFFF80007F003F80007F003F80007F003F80007
F003F80007F003F80007F003F80007F003F80007F003F80007F003F80007F003F80007F0
03F80007F003F80007F003F80007F003F80007F003F80007F003F80007F003F80007F003
F80007F003F80007F003F80007F003F8007FFF3FFF807FFF3FFF807FFF3FFF80212A7FA9
25>12 D<0001FFF800001FFFF800007F03F80000FC03F80001F807F80003F807F80007F0
03F80007F003F80007F003F80007F003F80007F003F80007F003F80007F003F80007F003
F80007F003F800FFFFFFF800FFFFFFF800FFFFFFF80007F003F80007F003F80007F003F8
0007F003F80007F003F80007F003F80007F003F80007F003F80007F003F80007F003F800
07F003F80007F003F80007F003F80007F003F80007F003F80007F003F80007F003F80007
F003F80007F003F80007F003F80007F003F8007FFF3FFF807FFF3FFF807FFF3FFF80212A
7FA925>I<3C007F00FF80FF80FFC0FFC0FFC07FC03EC000C000C0018001800180030003
0006000E001C00380010000A157B8813>44 D<FFFF80FFFF80FFFF80FFFF80FFFF80FFFF
8011067F9016>I<1C007F007F00FF80FF80FF807F007F001C0009097B8813>I<003F8000
01FFF00007E0FC000FC07E001F803F001F001F003F001F803E000F807E000FC07E000FC0
7E000FC07E000FC0FE000FE0FE000FE0FE000FE0FE000FE0FE000FE0FE000FE0FE000FE0
FE000FE0FE000FE0FE000FE0FE000FE0FE000FE0FE000FE0FE000FE0FE000FE07E000FC0
7E000FC07E000FC07E000FC03F001F803F001F801F001F001F803F000FC07E0007E0FC00
01FFF000003F80001B277DA622>48 D<000E00001E00007E0007FE00FFFE00FFFE00F8FE
0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE
0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE
0000FE0000FE0000FE0000FE0000FE00FFFFFEFFFFFEFFFFFE17277BA622>I<00FF8000
07FFF0000FFFFC001E03FE003800FF807C003F80FE003FC0FF001FC0FF001FE0FF000FE0
FF000FE07E000FE03C001FE000001FE000001FC000001FC000003F8000003F0000007E00
0000FC000000F8000001F0000003E00000078000000F0000001E0000003C00E0007000E0
00E000E001C001C0038001C0060001C00FFFFFC01FFFFFC03FFFFFC07FFFFFC0FFFFFF80
FFFFFF80FFFFFF801B277DA622>I<007F800003FFF00007FFFC000F81FE001F007F003F
807F003F803F803F803F803F803F801F803F801F003F8000007F0000007F0000007E0000
00FC000001F8000007F00000FFC00000FFC0000001F80000007E0000003F0000003F8000
001FC000001FC000001FE000001FE03C001FE07E001FE0FF001FE0FF001FE0FF001FC0FF
003FC0FE003F807C007F003F01FE001FFFFC0007FFF00000FF80001B277DA622>I<0000
0F0000000F0000001F0000003F0000007F000000FF000001FF000001FF000003BF000007
3F00000E3F00001C3F00003C3F0000383F0000703F0000E03F0001C03F0003803F000780
3F0007003F000E003F001C003F0038003F0070003F00F0003F00FFFFFFF8FFFFFFF8FFFF
FFF800007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F00001F
FFF8001FFFF8001FFFF81D277EA622>I<180003001F801F001FFFFE001FFFFC001FFFF8
001FFFF0001FFFC0001FFF00001C0000001C0000001C0000001C0000001C0000001C0000
001C0000001C7FC0001DFFF8001F80FC001E003F0008003F0000001F8000001FC000001F
C000001FE000001FE018001FE07C001FE0FE001FE0FE001FE0FE001FE0FE001FC0FC001F
C078003F8078003F803C007F001F01FE000FFFFC0003FFF00000FF80001B277DA622>I<
0007F800003FFE0000FFFF0001FC078003F00FC007C01FC00F801FC01F801FC01F001FC0
3F000F803F0000007E0000007E0000007E000000FE020000FE1FF000FE3FFC00FE603E00
FE801F00FF801F80FF000FC0FF000FC0FE000FE0FE000FE0FE000FE0FE000FE07E000FE0
7E000FE07E000FE07E000FE03E000FE03F000FC01F000FC01F001F800F801F0007E07E00
03FFFC0001FFF800003FC0001B277DA622>I<380000003E0000003FFFFFF03FFFFFF03F
FFFFF07FFFFFE07FFFFFC07FFFFF807FFFFF0070000E0070000E0070001C00E0003800E0
007000E000E0000001C0000001C000000380000007800000070000000F0000001F000000
1E0000003E0000003E0000007E0000007C0000007C000000FC000000FC000000FC000000
FC000001FC000001FC000001FC000001FC000001FC000001FC000001FC000000F8000000
7000001C297CA822>I<003FC00001FFF00003FFFC0007C07E000F003F001E001F001E00
0F803E000F803E000F803F000F803F800F803FC00F003FF01F001FFC1E001FFE3C000FFF
F80007FFE00003FFF00001FFFC0001FFFE0007FFFF000F0FFF801E07FFC03E01FFC07C00
7FE07C001FE0F8000FE0F80007E0F80003E0F80003E0F80003E0F80003C07C0003C07E00
07803F000F001FC03F000FFFFC0003FFF800007FC0001B277DA622>I<007F800001FFF0
0007FFF8000FC0FC001F803E003F001F007E001F807E001F807E000F80FE000FC0FE000F
C0FE000FC0FE000FE0FE000FE0FE000FE0FE000FE0FE000FE07E001FE07E001FE03F003F
E01F002FE00F80CFE007FF8FE001FF0FE000080FE000000FC000000FC000000FC000001F
803E001F807F001F807F003F007F003E007F007E007E00FC003E03F8001FFFE0000FFF80
0001FE00001B277DA622>I<00000780000000000780000000000FC0000000000FC00000
00000FC0000000001FE0000000001FE0000000003FF0000000003FF0000000003FF00000
000077F80000000077F800000000F7FC00000000E3FC00000000E3FC00000001C1FE0000
0001C1FE00000003C1FF0000000380FF0000000380FF00000007007F80000007007F8000
000F007FC000000E003FC000000E003FC000001C001FE000001C001FE000003FFFFFF000
003FFFFFF000003FFFFFF00000700007F80000700007F80000F00007FC0000E00003FC00
01E00003FE0001C00001FE0001C00001FE0003C00001FF00FFFE003FFFFCFFFE003FFFFC
FFFE003FFFFC2E297EA833>65 D<FFFFFFF800FFFFFFFF00FFFFFFFFC003F8001FE003F8
000FF003F80007F803F80003F803F80003FC03F80003FC03F80001FC03F80001FC03F800
01FC03F80003FC03F80003F803F80003F803F80007F003F8000FF003F8001FC003F800FF
8003FFFFFE0003FFFFFFC003F8000FF003F80003F803F80001FC03F80001FE03F80000FE
03F80000FE03F80000FF03F80000FF03F80000FF03F80000FF03F80000FF03F80000FF03
F80000FE03F80001FE03F80003FC03F80007FC03F8001FF8FFFFFFFFE0FFFFFFFFC0FFFF
FFFE0028297DA830>I<00007FE0030007FFFC07001FFFFF0F007FF00F9F00FF0001FF01
FC0000FF03F800007F07F000003F0FE000001F1FC000001F1FC000000F3F8000000F3F80
0000077F800000077F800000077F00000000FF00000000FF00000000FF00000000FF0000
0000FF00000000FF00000000FF00000000FF00000000FF000000007F000000007F800000
007F800000073F800000073F800000071FC00000071FC000000E0FE000000E07F000001C
03F800003C01FC00007800FF0001F0007FF007C0001FFFFF800007FFFE0000007FF00028
297CA831>I<FFFFFFFC0000FFFFFFFF8000FFFFFFFFE00003FC001FF80003FC0003FC00
03FC0000FE0003FC00007F0003FC00003F8003FC00001FC003FC00001FC003FC00000FE0
03FC00000FE003FC000007F003FC000007F003FC000007F003FC000007F003FC000007F8
03FC000007F803FC000007F803FC000007F803FC000007F803FC000007F803FC000007F8
03FC000007F803FC000007F803FC000007F803FC000007F003FC000007F003FC000007F0
03FC00000FE003FC00000FE003FC00000FC003FC00001FC003FC00003F8003FC00007F00
03FC0000FF0003FC0003FC0003FC001FF800FFFFFFFFF000FFFFFFFF8000FFFFFFFC0000
2D297EA834>I<FFFFFFFFE0FFFFFFFFE0FFFFFFFFE003FC001FE003FC0007F003FC0001
F003FC0001F003FC0000F003FC00007003FC00007003FC00007003FC01C07803FC01C038
03FC01C03803FC01C03803FC03C00003FC03C00003FC0FC00003FFFFC00003FFFFC00003
FFFFC00003FC0FC00003FC03C00003FC03C00003FC01C00E03FC01C00E03FC01C00E03FC
01C01C03FC00001C03FC00001C03FC00001C03FC00003C03FC00003803FC00007803FC00
00F803FC0001F803FC0003F803FC001FF8FFFFFFFFF0FFFFFFFFF0FFFFFFFFF027297EA8
2C>I<FFFFFFFFC0FFFFFFFFC0FFFFFFFFC003FC003FC003FC000FE003FC0003E003FC00
01E003FC0001E003FC0000E003FC0000E003FC0000E003FC0000F003FC01C07003FC01C0
7003FC01C07003FC01C00003FC03C00003FC03C00003FC0FC00003FFFFC00003FFFFC000
03FFFFC00003FC0FC00003FC03C00003FC03C00003FC01C00003FC01C00003FC01C00003
FC01C00003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC
00000003FC00000003FC000000FFFFFC0000FFFFFC0000FFFFFC000024297EA82A>I<00
007FE003000007FFFC0700001FFFFF0F00007FF00F9F0000FF0001FF0001FC0000FF0003
F800007F0007F000003F000FE000001F001FC000001F001FC000000F003F8000000F003F
80000007007F80000007007F80000007007F0000000000FF0000000000FF0000000000FF
0000000000FF0000000000FF0000000000FF0000000000FF0000000000FF0000000000FF
0000FFFFF87F0000FFFFF87F8000FFFFF87F800000FF003F800000FF003F800000FF001F
C00000FF001FC00000FF000FE00000FF0007F00000FF0003F80000FF0001FC0000FF0000
FF0001FF00007FF007FF00001FFFFF9F000007FFFE0F0000007FF003002D297CA835>I<
FFFFF00FFFFFFFFFF00FFFFFFFFFF00FFFFF03FC00003FC003FC00003FC003FC00003FC0
03FC00003FC003FC00003FC003FC00003FC003FC00003FC003FC00003FC003FC00003FC0
03FC00003FC003FC00003FC003FC00003FC003FC00003FC003FC00003FC003FC00003FC0
03FFFFFFFFC003FFFFFFFFC003FFFFFFFFC003FC00003FC003FC00003FC003FC00003FC0
03FC00003FC003FC00003FC003FC00003FC003FC00003FC003FC00003FC003FC00003FC0
03FC00003FC003FC00003FC003FC00003FC003FC00003FC003FC00003FC003FC00003FC0
03FC00003FC003FC00003FC0FFFFF00FFFFFFFFFF00FFFFFFFFFF00FFFFF30297EA835>
I<FFFFF0FFFFF0FFFFF003FC0003FC0003FC0003FC0003FC0003FC0003FC0003FC0003FC
0003FC0003FC0003FC0003FC0003FC0003FC0003FC0003FC0003FC0003FC0003FC0003FC
0003FC0003FC0003FC0003FC0003FC0003FC0003FC0003FC0003FC0003FC0003FC0003FC
0003FC0003FC00FFFFF0FFFFF0FFFFF014297EA819>I<FFFFFC0000FFFFFC0000FFFFFC
000003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC0000
0003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC000000
03FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003
FC0001C003FC0001C003FC0001C003FC0001C003FC0003C003FC00038003FC00038003FC
00078003FC00078003FC000F8003FC000F8003FC001F8003FC007F8003FC01FF00FFFFFF
FF00FFFFFFFF00FFFFFFFF0022297EA828>76 D<FFFE0000003FFF80FFFE0000003FFF80
FFFF0000007FFF8003FF0000007FE00003FF0000007FE00003BF800000EFE00003BF8000
00EFE000039FC00001CFE000039FC00001CFE000038FE000038FE000038FE000038FE000
038FE000038FE0000387F000070FE0000387F000070FE0000383F8000E0FE0000383F800
0E0FE0000381FC001C0FE0000381FC001C0FE0000381FC001C0FE0000380FE00380FE000
0380FE00380FE00003807F00700FE00003807F00700FE00003803F80E00FE00003803F80
E00FE00003803F80E00FE00003801FC1C00FE00003801FC1C00FE00003800FE3800FE000
03800FE3800FE000038007F7000FE000038007F7000FE000038007F7000FE000038003FE
000FE000038003FE000FE000038001FC000FE000038001FC000FE000038000F8000FE000
FFFE00F803FFFF80FFFE00F803FFFF80FFFE007003FFFF8039297DA840>I<0000FFC000
00000FFFFC0000003F807F000000FE001FC00001F80007E00003F00003F00007E00001F8
000FE00001FC001FC00000FE001FC00000FE003F8000007F003F8000007F007F8000007F
807F0000003F807F0000003F807F0000003F80FF0000003FC0FF0000003FC0FF0000003F
C0FF0000003FC0FF0000003FC0FF0000003FC0FF0000003FC0FF0000003FC0FF0000003F
C0FF0000003FC07F0000003F807F8000007F807F8000007F803F8000007F003F8000007F
001FC00000FE001FC00000FE000FE00001FC0007F00003F80003F80007F00001FC000FE0
0000FE001FC000003FC0FF0000000FFFFC00000000FFC000002A297CA833>79
D<FFFFFFF800FFFFFFFF00FFFFFFFFC003FC003FE003FC0007F003FC0003F803FC0003FC
03FC0001FC03FC0001FE03FC0001FE03FC0001FE03FC0001FE03FC0001FE03FC0001FE03
FC0001FE03FC0001FC03FC0003FC03FC0003F803FC0007F003FC003FE003FFFFFF8003FF
FFFE0003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC00
000003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC0000
0003FC00000003FC000000FFFFF00000FFFFF00000FFFFF0000027297EA82E>I<FFFFFF
E00000FFFFFFFE0000FFFFFFFF800003FC003FE00003FC000FF00003FC0007F80003FC00
03FC0003FC0001FC0003FC0001FE0003FC0001FE0003FC0001FE0003FC0001FE0003FC00
01FE0003FC0001FE0003FC0001FC0003FC0003F80003FC0007F80003FC000FE00003FC00
3FC00003FFFFFE000003FFFFFE000003FC00FF800003FC003FC00003FC001FE00003FC00
0FF00003FC0007F80003FC0007F80003FC0007F80003FC0007F80003FC0007F80003FC00
07F80003FC0007F80003FC0007F80003FC0007F80003FC0007F80E03FC0007F80E03FC00
03F80E03FC0001FC1CFFFFF000FE1CFFFFF0007FF8FFFFF0000FE02F297EA832>82
D<00FF806003FFF0E00FFFF8E01F80FDE03F001FE03E0007E07C0003E07C0003E0FC0001
E0FC0001E0FC0000E0FE0000E0FE0000E0FF000000FFC000007FFC00007FFFE0003FFFF8
001FFFFE001FFFFF0007FFFF8003FFFFC000FFFFC0000FFFE000007FE000001FF000000F
F0000007F0E00003F0E00003F0E00003F0E00003F0F00003E0F00003E0F80007E0FC0007
C0FF000F80FFE03F80E3FFFE00E1FFFC00C01FF0001C297CA825>I<7FFFFFFFFF807FFF
FFFFFF807FFFFFFFFF807F807F807F807C007F800F8078007F80078078007F8007807000
7F800380F0007F8003C0F0007F8003C0E0007F8001C0E0007F8001C0E0007F8001C0E000
7F8001C0E0007F8001C000007F80000000007F80000000007F80000000007F8000000000
7F80000000007F80000000007F80000000007F80000000007F80000000007F8000000000
7F80000000007F80000000007F80000000007F80000000007F80000000007F8000000000
7F80000000007F80000000007F80000000007F80000000007F80000000007F80000000FF
FFFFC00000FFFFFFC00000FFFFFFC0002A287EA72F>I<03FF80000FFFF0001F01FC003F
80FE003F807F003F803F003F803F801F003F8000003F8000003F8000003F8000003F8000
3FFF8001FC3F800FE03F801F803F803F003F807E003F80FC003F80FC003F80FC003F80FC
003F80FC005F807E00DF803F839FFC1FFE0FFC03FC03FC1E1B7E9A21>97
D<FFE00000FFE00000FFE000000FE000000FE000000FE000000FE000000FE000000FE000
000FE000000FE000000FE000000FE000000FE000000FE000000FE1FE000FEFFF800FFE07
E00FF803F00FF001F80FE000FC0FE000FC0FE0007E0FE0007E0FE0007F0FE0007F0FE000
7F0FE0007F0FE0007F0FE0007F0FE0007F0FE0007F0FE0007E0FE0007E0FE0007E0FE000
FC0FE000FC0FF001F80FF803F00F9C0FE00F0FFF800E01FC00202A7EA925>I<003FF000
01FFFC0003F03E000FC07F001F807F003F007F003F007F007F003E007E0000007E000000
FE000000FE000000FE000000FE000000FE000000FE000000FE0000007E0000007E000000
7F0000003F0003803F8003801F8007000FE00E0003F83C0001FFF800003FC000191B7E9A
1E>I<00007FF000007FF000007FF0000007F0000007F0000007F0000007F0000007F000
0007F0000007F0000007F0000007F0000007F0000007F0000007F0003F87F001FFF7F007
F03FF00FC00FF01F8007F03F0007F03F0007F07E0007F07E0007F07E0007F0FE0007F0FE
0007F0FE0007F0FE0007F0FE0007F0FE0007F0FE0007F0FE0007F07E0007F07E0007F03F
0007F03F0007F01F800FF00FC01FF007E07FFF01FFE7FF007F87FF202A7EA925>I<003F
C00001FFF00003E07C000F803E001F801F001F001F003F000F807E000F807E000FC07E00
0FC0FE0007C0FE0007C0FFFFFFC0FFFFFFC0FE000000FE000000FE0000007E0000007E00
00007F0000003F0001C01F0001C00F80038007C0070003F01E0000FFFC00003FE0001A1B
7E9A1F>I<0007F8003FFC007E3E01FC7F03F87F03F07F07F07F07F03E07F00007F00007
F00007F00007F00007F00007F000FFFFC0FFFFC0FFFFC007F00007F00007F00007F00007
F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007
F00007F00007F00007F00007F0007FFF807FFF807FFF80182A7EA915>I<00FF80F003FF
E3F80FC1FE1C1F007C7C3F007E7C3E003E107E003F007E003F007E003F007E003F007E00
3F007E003F003E003E003F007E001F007C000FC1F8000BFFE00018FF8000180000003800
0000380000003C0000003FFFF8003FFFFF001FFFFFC00FFFFFE007FFFFF01FFFFFF03C00
07F07C0001F8F80000F8F80000F8F80000F8F80000F87C0001F07C0001F03F0007E00FC0
1F8007FFFF00007FF0001E287E9A22>I<FFE00000FFE00000FFE000000FE000000FE000
000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE000
000FE000000FE07E000FE1FF800FE30FC00FE40FE00FE807E00FF807F00FF007F00FF007
F00FE007F00FE007F00FE007F00FE007F00FE007F00FE007F00FE007F00FE007F00FE007
F00FE007F00FE007F00FE007F00FE007F00FE007F00FE007F00FE007F0FFFE3FFFFFFE3F
FFFFFE3FFF202A7DA925>I<07000F801FC03FE03FE03FE01FC00F800700000000000000
0000000000000000FFE0FFE0FFE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE0
0FE00FE00FE00FE00FE00FE00FE00FE00FE00FE0FFFEFFFEFFFE0F2B7EAA12>I<000700
000F80001FC0003FE0003FE0003FE0001FC0000F80000700000000000000000000000000
00000000000000000000FFE000FFE000FFE0000FE0000FE0000FE0000FE0000FE0000FE0
000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0
000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE07C0FE0FE0FE0
FE0FC0FE1F80FE1F007C3E003FFC000FF000133784AA15>I<FFE00000FFE00000FFE000
000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE000
000FE000000FE000000FE000000FE01FFC0FE01FFC0FE01FFC0FE007800FE00F000FE01E
000FE03C000FE078000FE0E0000FE3C0000FE7C0000FEFE0000FFFF0000FFFF8000FF3F8
000FE1FC000FC0FE000FC07F000FC07F000FC03F800FC01FC00FC00FE00FC00FE00FC007
F0FFFC1FFFFFFC1FFFFFFC1FFF202A7FA923>I<FFE0FFE0FFE00FE00FE00FE00FE00FE0
0FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE0
0FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE0FFFEFFFEFFFE0F2A7EA9
12>I<FFC07F001FC000FFC1FFC07FF000FFC307E0C1F8000FC407F101FC000FC803F200
FC000FD803FE00FE000FD003FC00FE000FD003FC00FE000FE003F800FE000FE003F800FE
000FE003F800FE000FE003F800FE000FE003F800FE000FE003F800FE000FE003F800FE00
0FE003F800FE000FE003F800FE000FE003F800FE000FE003F800FE000FE003F800FE000F
E003F800FE000FE003F800FE000FE003F800FE000FE003F800FE00FFFE3FFF8FFFE0FFFE
3FFF8FFFE0FFFE3FFF8FFFE0331B7D9A38>I<FFC07E00FFC1FF80FFC30FC00FC40FE00F
C807E00FD807F00FD007F00FD007F00FE007F00FE007F00FE007F00FE007F00FE007F00F
E007F00FE007F00FE007F00FE007F00FE007F00FE007F00FE007F00FE007F00FE007F00F
E007F00FE007F0FFFE3FFFFFFE3FFFFFFE3FFF201B7D9A25>I<003FE00001FFFC0003F0
7E000FC01F801F800FC03F0007E03F0007E07E0003F07E0003F07E0003F0FE0003F8FE00
03F8FE0003F8FE0003F8FE0003F8FE0003F8FE0003F8FE0003F87E0003F07E0003F03F00
07E03F0007E01F800FC00FC01F8007F07F0001FFFC00003FE0001D1B7E9A22>I<FFE1FE
00FFEFFF80FFFE0FE00FF803F00FF001F80FE001FC0FE000FC0FE000FE0FE000FE0FE000
7F0FE0007F0FE0007F0FE0007F0FE0007F0FE0007F0FE0007F0FE0007F0FE0007E0FE000
FE0FE000FE0FE000FC0FE001FC0FF001F80FF807F00FFC0FE00FEFFF800FE1FC000FE000
000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE00000FFFE00
00FFFE0000FFFE000020277E9A25>I<FFC1F0FFC7FCFFC63E0FCC7F0FD87F0FD07F0FD0
7F0FF03E0FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0
000FE0000FE0000FE0000FE0000FE000FFFF00FFFF00FFFF00181B7F9A1B>114
D<03FE300FFFF03E03F07800F07000F0F00070F00070F80070FE0000FFE0007FFF007FFF
C03FFFE01FFFF007FFF800FFF80007FC0000FCE0007CE0003CF0003CF00038F80038FC00
70FF01E0E7FFC0C1FF00161B7E9A1B>I<00E00000E00000E00000E00001E00001E00001
E00003E00003E00007E0000FE0001FFFE0FFFFE0FFFFE00FE0000FE0000FE0000FE0000F
E0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0700FE0700FE0700F
E0700FE0700FE0700FE07007F0E003F0C001FF80007F0014267FA51A>I<FFE07FF0FFE0
7FF0FFE07FF00FE007F00FE007F00FE007F00FE007F00FE007F00FE007F00FE007F00FE0
07F00FE007F00FE007F00FE007F00FE007F00FE007F00FE007F00FE007F00FE007F00FE0
07F00FE007F00FE00FF00FE00FF007E017F003F067FF01FFC7FF007F87FF201B7D9A25>
I<FFFC03FFFFFC03FFFFFC03FF0FF000F007F000E007F800E003F801C003F801C003FC03
C001FC038001FE078000FE070000FF0700007F0E00007F0E00007F9E00003F9C00003FFC
00001FF800001FF800000FF000000FF000000FF0000007E0000007E0000003C0000003C0
00201B7F9A23>I<FFFC7FFC1FFCFFFC7FFC1FFCFFFC7FFC1FFC0FE00FE001C007F007E0
038007F007E0038007F807F0078003F807F0070003F80FF8070003FC0FF80F0001FC0FF8
0E0001FC1FFC0E0000FE1CFC1C0000FE1CFE1C0000FF387E3C00007F387E3800007F787F
3800003FF03F7000003FF03FF000003FE01FF000001FE01FE000001FE01FE000000FC00F
C000000FC00FC000000F8007C0000007800780000007800780002E1B7F9A31>I<FFFC1F
FEFFFC1FFEFFFC1FFE07F0038003F8078003FC0F0001FE1E0000FE3C00007F3800007FF8
00003FF000001FE000000FE000000FF0000007F800000FF800001FFC00003CFE000038FF
0000787F0000F03F8001E01FC003C01FE003800FE0FFF03FFFFFF03FFFFFF03FFF201B7F
9A23>I<FFFC03FFFFFC03FFFFFC03FF0FF000F007F000E007F800E003F801C003F801C0
03FC03C001FC038001FE078000FE070000FF0700007F0E00007F0E00007F9E00003F9C00
003FFC00001FF800001FF800000FF000000FF000000FF0000007E0000007E0000003C000
0003C000000380000003800000078000380700007C0F0000FE0E0000FE1E0000FE1C0000
FE38000074F000003FE000000F80000020277F9A23>I<3FFFFF3FFFFF3F00FE3C01FE38
03FC7803F87807F0700FF0700FE0701FC0003FC0003F80007F0000FF0000FE0001FC0703
FC0703F80707F0070FF00F0FE00F1FC00E3FC01E7F803E7F00FEFFFFFEFFFFFE181B7E9A
1E>I E /FJ 22 121 df<0001FF0000000FFFE000003FFFF80000FF83FE0001FE00FF00
03F8003F8007F8003FC00FF0001FE00FE0000FE01FE0000FF01FE0000FF03FE0000FF83F
E0000FF83FC00007F87FC00007FC7FC00007FC7FC00007FC7FC00007FC7FC00007FCFFC0
0007FEFFC00007FEFFC00007FEFFC00007FEFFC00007FEFFC00007FEFFC00007FEFFC000
07FEFFC00007FEFFC00007FEFFC00007FEFFC00007FEFFC00007FEFFC00007FEFFC00007
FEFFC00007FEFFC00007FEFFC00007FEFFC00007FE7FC00007FC7FC00007FC7FC00007FC
7FC00007FC7FC00007FC3FE0000FF83FE0000FF83FE0000FF81FE0000FF01FE0000FF00F
F0001FE00FF0001FE007F8003FC003FC007F8001FE00FF0000FF83FE00007FFFFC00001F
FFF0000001FF000027397CB730>48 D<00003C000000007C00000001FC00000007FC0000
003FFC0000FFFFFC0000FFFFFC0000FFFFFC0000FFCFFC0000000FFC0000000FFC000000
0FFC0000000FFC0000000FFC0000000FFC0000000FFC0000000FFC0000000FFC0000000F
FC0000000FFC0000000FFC0000000FFC0000000FFC0000000FFC0000000FFC0000000FFC
0000000FFC0000000FFC0000000FFC0000000FFC0000000FFC0000000FFC0000000FFC00
00000FFC0000000FFC0000000FFC0000000FFC0000000FFC0000000FFC0000000FFC0000
000FFC0000000FFC0000000FFC0000000FFC0000000FFC0000000FFC0000000FFC000000
0FFC0000000FFC0000000FFC0000000FFC0000000FFC00007FFFFFFF807FFFFFFF807FFF
FFFF807FFFFFFF80213879B730>I<0007FC0000007FFFC00001FFFFF00003FFFFFC0007
E01FFE000F8007FF001E0003FF803C0001FFC07E0000FFE07F80007FE07FC0007FF0FFC0
007FF0FFE0003FF8FFE0003FF8FFE0003FF8FFE0003FF87FC0003FF83F80003FF81F0000
3FF80000003FF80000003FF00000007FF00000007FE00000007FE0000000FFC0000000FF
80000001FF80000001FF00000003FE00000007FC00000007F80000000FE00000001FC000
00003F800000007F00000000FC00000001F800000001F000000003E00078000780007800
0F000078001E000078003C0000F000780000F000F00000F001E00001F003FFFFFFF007FF
FFFFF00FFFFFFFF01FFFFFFFF03FFFFFFFF07FFFFFFFE0FFFFFFFFE0FFFFFFFFE0FFFFFF
FFE0FFFFFFFFE025387BB730>I<0003FF0000001FFFF000007FFFFC0000FC07FE0001F0
01FF0003C000FF800780007FC00FE0007FE00FF0007FE01FF8007FF01FFC007FF01FFC00
7FF01FFC007FF01FFC007FF00FF8007FF007F0007FE003E0007FE0008000FFE0000000FF
C0000000FF80000001FF00000001FE00000003FC00000007F80000001FF000000FFFC000
000FFF8000000FFFF000000007FE00000000FF000000007FC00000007FE00000003FF000
00003FF80000003FF80000001FFC0000001FFC0000001FFE0000001FFE1F80001FFE3FC0
001FFE7FE0001FFEFFF0001FFEFFF0001FFEFFF0001FFCFFF0001FFCFFF0001FFCFFE000
3FF87FC0003FF87F80007FF03E00007FE01FC000FFC00FF803FF8007FFFFFF0001FFFFFC
00007FFFF0000007FF000027397CB730>I<0000000F80000000000F80000000001F8000
0000003F80000000007F8000000000FF8000000000FF8000000001FF8000000003FF8000
000007FF8000000007FF800000000FFF800000001EFF800000003EFF800000007CFF8000
000078FF80000000F0FF80000001E0FF80000003E0FF80000003C0FF8000000780FF8000
000F00FF8000001F00FF8000003E00FF8000003C00FF8000007800FF800000F000FF8000
01F000FF800001E000FF800003C000FF8000078000FF80000F8000FF80001F0000FF8000
1E0000FF80003C0000FF8000780000FF8000F80000FF8000FFFFFFFFFF80FFFFFFFFFF80
FFFFFFFFFF80FFFFFFFFFF80000001FF8000000001FF8000000001FF8000000001FF8000
000001FF8000000001FF8000000001FF8000000001FF8000000001FF8000000001FF8000
0003FFFFFF800003FFFFFF800003FFFFFF800003FFFFFF8029377DB630>I<0C000000C0
0F800007C00FF8007FC00FFFFFFF800FFFFFFF000FFFFFFE000FFFFFFC000FFFFFF8000F
FFFFF0000FFFFFC0000FFFFF00000FFFFC00000F1F8000000F000000000F000000000F00
0000000F000000000F000000000F000000000F000000000F000000000F03FE00000F1FFF
E0000F7FFFF8000FFC07FC000FE001FE000FC000FF000F80007F800F00007FC00E00007F
E00000003FE00000003FF00000003FF00000003FF00000003FF80000003FF80000003FF8
1F00003FF83F80003FF87FC0003FF8FFC0003FF8FFE0003FF8FFE0003FF8FFE0003FF0FF
C0003FF0FF80003FF07F00007FE07C00007FE03C00007FC03E0000FF801F0001FF000FC0
03FE0007F00FFC0003FFFFF80001FFFFE000007FFF8000000FF8000025397BB730>I<00
000FF8000000FFFE000003FFFF80000FF80FC0001FE003E0007F8001F000FF0003F001FE
0007F003FC000FF803FC001FF807F8001FF80FF8001FF80FF0001FF81FF0000FF01FF000
07E03FF00003C03FF00000003FE00000007FE00000007FE00000007FE00000007FE07FF0
00FFE1FFFC00FFE3FFFE00FFE7007F80FFEE003FC0FFEC001FE0FFF8001FF0FFF8001FF0
FFF0000FF8FFF0000FF8FFF0000FFCFFF0000FFCFFE0000FFEFFE0000FFEFFE0000FFEFF
E0000FFE7FE0000FFE7FE0000FFE7FE0000FFE7FE0000FFE7FE0000FFE3FE0000FFE3FE0
000FFE3FE0000FFC1FF0000FFC1FF0000FF80FF0000FF80FF0001FF007F8001FF003FC00
3FE001FE007FC000FF81FF80007FFFFE00003FFFFC00000FFFF0000001FF800027397CB7
30>I<3C00000000003E00000000003FE0000000003FFFFFFFFF803FFFFFFFFF803FFFFF
FFFF803FFFFFFFFF803FFFFFFFFF007FFFFFFFFE007FFFFFFFFC007FFFFFFFF8007FFFFF
FFF0007FFFFFFFF0007C000003E00078000007C0007800000F80007800000F0000F00000
1E0000F000003E0000F000007C0000F00000F80000000001F00000000001E00000000003
E00000000007C0000000000780000000000F80000000001F00000000001F00000000003F
00000000003E00000000007E0000000000FE0000000000FC0000000000FC0000000001FC
0000000001FC0000000003FC0000000003FC0000000007F80000000007F80000000007F8
0000000007F8000000000FF8000000000FF8000000000FF8000000000FF8000000000FF8
000000001FF8000000001FF8000000001FF8000000001FF8000000001FF8000000001FF8
000000001FF8000000001FF8000000000FF0000000000FF00000000003C0000000293B7B
B930>I<0001FF8000000FFFF000003FFFFC00007E01FE0001F0003F0003E0001F8003C0
000FC007800007E00F800007E00F800003F00F800003F01F800003F01F800003F01FC000
03F01FE00003F01FF00003F01FF80007E01FFE0007E00FFF800FC00FFFC00FC00FFFF01F
8007FFFC3F0003FFFFFC0003FFFFF80001FFFFE00000FFFFF800007FFFFC00001FFFFF00
003FFFFF8000FFFFFFC001F8FFFFE007F03FFFF00FE01FFFF81FC007FFF81F8001FFFC3F
80007FFC7F00003FFC7F00000FFEFE000007FEFE000003FEFE000001FEFE000000FEFE00
0000FEFE000000FEFE000000FCFE000000FC7F000000FC7F000001F83F800001F83F8000
03F01FE00007E00FF0000FC007FE00FF8003FFFFFF0000FFFFFC00003FFFF0000003FF80
0027397CB730>I<0003FF0000001FFFE000007FFFF80000FF01FC0003FC00FF0007F800
7F800FF0003F801FF0001FC01FF0001FE03FE0001FE07FE0001FF07FE0000FF07FE0000F
F8FFE0000FF8FFE0000FF8FFE0000FFCFFE0000FFCFFE0000FFCFFE0000FFCFFE0000FFE
FFE0000FFEFFE0000FFEFFE0000FFE7FE0000FFE7FE0001FFE7FE0001FFE3FE0001FFE3F
E0001FFE1FF0003FFE0FF0003FFE0FF0006FFE07F800EFFE03FC01CFFE00FFFF8FFE007F
FF0FFE001FFC0FFC0000000FFC0000000FFC0000000FFC0000000FF80000001FF8078000
1FF80FC0001FF01FE0001FF03FF0001FE03FF0003FE03FF0003FC03FF0007FC03FE0007F
801FC000FF001F8001FE000F8007FC000FE01FF80007FFFFE00001FFFFC00000FFFF0000
001FF0000027397CB730>I<00000001E00000000000000003F00000000000000003F000
00000000000007F80000000000000007F80000000000000007F8000000000000000FFC00
0000000000000FFC000000000000001FFE000000000000001FFE000000000000001FFE00
0000000000003FFF000000000000003FFF000000000000007FFF800000000000007BFF80
0000000000007BFF80000000000000F3FFC0000000000000F1FFC0000000000001F1FFE0
000000000001E0FFE0000000000003E0FFF0000000000003C0FFF0000000000003C07FF0
000000000007C07FF8000000000007803FF800000000000F803FFC00000000000F001FFC
00000000000F001FFC00000000001F001FFE00000000001E000FFE00000000003E000FFF
00000000003C0007FF00000000003C0007FF0000000000780007FF8000000000780003FF
8000000000F80003FFC000000000F00001FFC000000000F00001FFC000000001FFFFFFFF
E000000001FFFFFFFFE000000003FFFFFFFFF000000003FFFFFFFFF000000007C000007F
F8000000078000007FF8000000078000003FF80000000F8000003FFC0000000F0000001F
FC0000001F0000001FFE0000001E0000000FFE0000001E0000000FFE0000003E0000000F
FF0000003C00000007FF0000007C00000007FF8000007800000003FF800000FC00000003
FF8000FFFFF00003FFFFFFC0FFFFF00003FFFFFFC0FFFFF00003FFFFFFC0FFFFF00003FF
FFFFC0423B7DBA49>65 D<0000001FFE000060000003FFFFE000E000001FFFFFF801E000
007FFFFFFE03E00001FFFC00FF07E00007FFC0001FCFE0000FFF000007FFE0001FFC0000
01FFE0003FF0000000FFE0007FE00000007FE000FFC00000003FE001FF800000001FE003
FF000000000FE007FF000000000FE00FFE0000000007E00FFE0000000007E01FFC000000
0003E01FFC0000000003E03FF80000000003E03FF80000000001E03FF80000000001E07F
F80000000001E07FF80000000001E07FF00000000000007FF0000000000000FFF0000000
000000FFF0000000000000FFF0000000000000FFF0000000000000FFF0000000000000FF
F0000000000000FFF0000000000000FFF0000000000000FFF0000000000000FFF0000000
000000FFF00000000000007FF00000000000007FF00000000000007FF80000000000007F
F80000000001E03FF80000000001E03FF80000000001E03FF80000000001E01FFC000000
0001E01FFC0000000003C00FFE0000000003C00FFE0000000003C007FF00000000078003
FF00000000078001FF800000000F0000FFC00000001F00007FE00000003E00003FF00000
007C00001FFC000000F800000FFF000003F0000007FFC0000FE0000001FFFC007F800000
007FFFFFFF000000001FFFFFFC0000000003FFFFE000000000001FFE0000003B3D7BBB46
>67 D<003FFE00000001FFFFE0000007FFFFF800000FE007FC00000FF001FE00001FF800
FF00001FF8007F80001FF8007FC0001FF8003FC0000FF0003FE00007E0003FE00003C000
3FE0000000003FE0000000003FE0000000003FE0000000003FE0000000FFFFE000001FFF
FFE000007FF83FE00003FF803FE00007FC003FE0000FF0003FE0001FE0003FE0003FE000
3FE0007FC0003FE0007FC0003FE000FF80003FE000FF80003FE000FF80003FE000FF8000
3FE000FF80007FE0007FC0007FE0007FC000DFE0003FE0039FF0001FF80F0FFFE007FFFE
0FFFE001FFFC07FFE0003FE000FFE02B267DA52F>97 D<000000003F800000003FFF8000
00003FFF800000003FFF800000003FFF8000000001FF8000000000FF8000000000FF8000
000000FF8000000000FF8000000000FF8000000000FF8000000000FF8000000000FF8000
000000FF8000000000FF8000000000FF8000000000FF8000000000FF8000000000FF8000
000000FF8000000000FF800000FF80FF80000FFFF0FF80003FFFFCFF8000FFC03FFF8001
FE000FFF8003FC0003FF8007F80001FF800FF00000FF801FF00000FF803FE00000FF803F
E00000FF807FE00000FF807FC00000FF807FC00000FF807FC00000FF80FFC00000FF80FF
C00000FF80FFC00000FF80FFC00000FF80FFC00000FF80FFC00000FF80FFC00000FF80FF
C00000FF80FFC00000FF807FC00000FF807FC00000FF807FC00000FF803FE00000FF803F
E00000FF801FE00000FF800FF00001FF8007F80003FF8003F80007FF8001FE001FFFC000
FF807EFFFE007FFFF8FFFE000FFFE0FFFE0001FF00FFFE2F3C7DBB36>100
D<0001FF8000000FFFF000007FFFFC0000FF81FE0003FE007F8007F8003F800FF0001FC0
0FF0000FE01FE0000FE03FE0000FF03FE00007F07FC00007F07FC00007F87FC00007F8FF
C00007F8FFC00007F8FFFFFFFFF8FFFFFFFFF8FFFFFFFFF8FFC0000000FFC0000000FFC0
000000FFC00000007FC00000007FC00000007FC00000003FE00000003FE00000781FE000
00781FF00000780FF00000F007F80001F003FC0003E001FE000FC000FFC07F80003FFFFE
00000FFFF8000000FFC00025267DA52C>I<00FE00000000FFFE00000000FFFE00000000
FFFE00000000FFFE0000000007FE0000000003FE0000000003FE0000000003FE00000000
03FE0000000003FE0000000003FE0000000003FE0000000003FE0000000003FE00000000
03FE0000000003FE0000000003FE0000000003FE0000000003FE0000000003FE00000000
03FE0000000003FE00FF800003FE03FFF00003FE0FFFF80003FE1E03FC0003FE3801FE00
03FE6001FF0003FEC000FF0003FFC000FF8003FF8000FF8003FF0000FF8003FF0000FF80
03FF0000FF8003FE0000FF8003FE0000FF8003FE0000FF8003FE0000FF8003FE0000FF80
03FE0000FF8003FE0000FF8003FE0000FF8003FE0000FF8003FE0000FF8003FE0000FF80
03FE0000FF8003FE0000FF8003FE0000FF8003FE0000FF8003FE0000FF8003FE0000FF80
03FE0000FF8003FE0000FF8003FE0000FF8003FE0000FF8003FE0000FF80FFFFF83FFFFE
FFFFF83FFFFEFFFFF83FFFFEFFFFF83FFFFE2F3C7CBB36>104 D<01E00007F8000FFC00
0FFC001FFE001FFE001FFE001FFE000FFC000FFC0007F80001E000000000000000000000
00000000000000000000000000000000000000000000000000FE007FFE007FFE007FFE00
7FFE0007FE0003FE0003FE0003FE0003FE0003FE0003FE0003FE0003FE0003FE0003FE00
03FE0003FE0003FE0003FE0003FE0003FE0003FE0003FE0003FE0003FE0003FE0003FE00
03FE0003FE0003FE0003FE0003FE0003FE00FFFFF0FFFFF0FFFFF0FFFFF0143D7DBC1A>
I<01FC00FF8000FFFC03FFF000FFFC0FFFF800FFFC1E03FC00FFFC3801FE0007FC6001FF
0003FCC000FF0003FDC000FF8003FD8000FF8003FF0000FF8003FF0000FF8003FF0000FF
8003FE0000FF8003FE0000FF8003FE0000FF8003FE0000FF8003FE0000FF8003FE0000FF
8003FE0000FF8003FE0000FF8003FE0000FF8003FE0000FF8003FE0000FF8003FE0000FF
8003FE0000FF8003FE0000FF8003FE0000FF8003FE0000FF8003FE0000FF8003FE0000FF
8003FE0000FF8003FE0000FF8003FE0000FF8003FE0000FF80FFFFF83FFFFEFFFFF83FFF
FEFFFFF83FFFFEFFFFF83FFFFE2F267CA536>110 D<00FE01FF0000FFFE1FFFF000FFFE
7FFFFC00FFFEFC07FE00FFFFF001FF0007FFC0007F8003FF00003FC003FE00003FE003FE
00001FF003FE00001FF803FE00000FF803FE00000FFC03FE00000FFC03FE000007FC03FE
000007FE03FE000007FE03FE000007FE03FE000007FE03FE000007FE03FE000007FE03FE
000007FE03FE000007FE03FE000007FE03FE000007FC03FE00000FFC03FE00000FFC03FE
00000FFC03FE00000FF803FE00001FF003FE00001FF003FF00003FE003FF80007FC003FF
C000FF8003FFE001FF0003FEFC07FE0003FE7FFFF80003FE1FFFE00003FE03FE000003FE
0000000003FE0000000003FE0000000003FE0000000003FE0000000003FE0000000003FE
0000000003FE0000000003FE0000000003FE0000000003FE0000000003FE0000000003FE
00000000FFFFF8000000FFFFF8000000FFFFF8000000FFFFF80000002F377DA536>112
D<01FC03F000FFFC0FFC00FFFC1FFF00FFFC3C3F80FFFC707F8007FCE0FFC003FCC0FFC0
03FD80FFC003FD80FFC003FF807F8003FF003F0003FF001E0003FF00000003FE00000003
FE00000003FE00000003FE00000003FE00000003FE00000003FE00000003FE00000003FE
00000003FE00000003FE00000003FE00000003FE00000003FE00000003FE00000003FE00
000003FE00000003FE00000003FE00000003FE00000003FE000000FFFFFC0000FFFFFC00
00FFFFFC0000FFFFFC000022267DA528>114 D<000F0000000F0000000F0000000F0000
000F0000001F0000001F0000001F0000001F0000003F0000003F0000007F0000007F0000
00FF000001FF000003FF000007FF00001FFFFFF0FFFFFFF0FFFFFFF0FFFFFFF001FF0000
01FF000001FF000001FF000001FF000001FF000001FF000001FF000001FF000001FF0000
01FF000001FF000001FF000001FF000001FF000001FF000001FF000001FF000001FF0000
01FF003C01FF003C01FF003C01FF003C01FF003C01FF003C01FF003C01FF003C00FF0078
00FF8078007F80F0003FC1E0001FFFC0000FFF800001FE001E377EB626>116
D<FFFFE00FFFF8FFFFE00FFFF8FFFFE00FFFF8FFFFE00FFFF801FF0001FC0001FF8001F0
0000FFC003F000007FE007E000003FE007C000001FF00F8000000FF81F0000000FFC3E00
000007FE7C00000003FFFC00000001FFF800000000FFF000000000FFE0000000007FE000
0000003FF0000000001FF0000000003FF8000000007FFC000000007FFE00000000FBFF00
000001F1FF80000003E0FF80000007C07FC000000FC07FE000001F803FF000001F001FF8
00003E000FF800007C0007FC0000F80003FE0001F80003FF00FFFF001FFFFCFFFF001FFF
FCFFFF001FFFFCFFFF001FFFFC2E267EA533>120 D E /FK 71 124
df<0001F03C00071C47000C1CC7000C19C6001C0180001C038000180380003803800038
0380003807000038070003FFFFF000700700007007000070070000700E0000700E0000E0
0E0000E00E0000E00E0000E01C0000E01C0001C01C0001C01C0001C01C0001C0380001C0
3800038038000380380003803000030070000300700007006000C630E000E638C000CC31
8000781E00002025819C19>11 D<0000FE000003018000060180000C0380001C0180001C
0000001800000038000000380000003800000038000003FFFE0000700E0000700E000070
0E0000701C0000701C0000E01C0000E01C0000E0380000E0380000E0380001C0380001C0
720001C0720001C0720001C0720003803400038018000380000003000000030000000700
0000C6000000E6000000CC000000780000001925819C17>I<0001FEE0000707E0000E07
E0000C07C0001C01C0001C01C0001801C00038038000380380003803800038038003FFFF
0000700700007007000070070000700E0000700E0000E00E0000E00E0000E01C0000E01C
0000E01C0001C01C0001C0390001C0390001C0390001C0390003801A0003800C00038000
00030000000300000007000000C6000000E6000000CC000000780000001B25819C18>I<
183C3C3C0404080810204080060C779C0D>39 D<00030006000800180030006000C000C0
018003000300060006000C000C001C001800180038003000300070007000600060006000
6000E000E000E000E000E0006000600060006000600020003000100008000800102A7B9E
11>I<001000100008000C00040006000600060006000600070007000700070007000600
0600060006000E000E000C000C001C001800180038003000300060006000C000C0018003
00030006000C00180010006000C000102A809E11>I<006000C000C000C03086388E1DB8
0F60038003800DE03B70E238C2180600060006000C000F12789E15>I<18387838080810
1020404080050C7D830D>44 D<FFC0FFC0FFC00A037D890F>I<3078F06005047C830D>I<
003E0000E1800181C00300C00700C00600C00E00E00C00E01C00C01C00C01801C03801C0
3801C03801C0700380700380700380700380600700E00700E00600E00E00E00E00E00C00
E0180060380060700030C0001F0000131D7C9B15>48 D<0004000C00180038007807B800
7000700070007000E000E000E000E001C001C001C001C003800380038003800700070007
0007000F00FFF00E1C7B9B15>I<003E000041800080C00100C00200E00440E00440E008
40E00840E00840E01081C01081C01103800E0300000600000C0000180000600000800003
00000400000800401000802000802001007F070043FE0081FC00807800131D7D9B15>I<
001F000060C00080C00100600200600240600440E00440E00440E00481C00301C0000380
00070000FC00001C00000600000600000700000700000700000700700700E00E00800E00
801C0040180040300020E0001F8000131D7D9B15>I<0001800001C00003800003800003
80000300000700000700000600000E00000C00001C000018000018000030000030000060
0000400000C600018E00010E00020E00061C000C1C00181C003F1C0040F800803F800038
0000380000700000700000700000700000E00000600012247E9B15>I<000F8000386000
602000C0E00180E00300000600000E00000C00001C00001CF8003904003A06003C030078
0300780300700380700300600700E00700E00700E00600E00E00E00C00601C0060180020
300030C0000F8000131D7C9B15>54 D<001F000060C000C0600180600300300300300600
600700600700C00780C003C10003E60001FC0000780001BC00061E000C0F001807003003
80200380600180600180C00300C00300C006006004006008003830000FC000141D7D9B15
>56 D<003E0000E1000181800300C00600C00E00C00C00C01C00C01C00C01C01C03801C0
3801C03801C03803C0180380180780080B800C330003C700000700000E00000C00001C00
001800E03000E0600080C000C180003E0000121D7C9B15>I<0FFFFFE01FFFFFF0000000
0000000000000000000000000000000000000000000000000000000000FFFFFF807FFFFF
001C0C7C8F20>61 D<01E006180808100C100C200C400C401C8018E038E0F0C1E003C007
800F001C0038003080308031001E000000000000000000000030007800F00060000E1E78
9D15>63 D<0000180000001800000038000000380000007800000078000000B800000138
000001380000023C0000021C0000041C00000C1C0000081C0000101C0000101C0000201C
0000201C00007FFC0000C01C0000801C0001001C0001001E0002000E0002000E0004000E
000C000E001C001E00FF00FFC01A1D7E9C1F>65 D<01FFFF00003C0380003801C0003800
E0003800E0003800E0007000E0007001E0007001E0007003C000E0038000E00F0000E01E
0000FFFC0001C00E0001C0070001C0078001C00780038007800380078003800780038007
8007000F0007000E0007001E0007003C000E00F000FFFFC0001B1C7E9B1D>I<0003F020
001E0C60003002E000E003C001C001C0038001C0070000C00E0000801E0000801C000080
3C0000803C000000780000007800000078000000F0000000F0000000F0000000F0000000
F0000400F0000400F0000400F0000800700008007000100038002000180040000C018000
0706000001F800001B1E7A9C1E>I<01FFFF00003C03C0003800E0003800E00038007000
3800700070007800700038007000380070007800E0007800E0007800E0007800E0007801
C000F001C000F001C000F001C000E0038001E0038001C0038003C0038003800700070007
000E0007001C00070038000E00E000FFFF80001D1C7E9B1F>I<01FFFFF0003C00F00038
00300038002000380020003800200070002000700020007008200070080000E0100000E0
100000E0300000FFF00001C0200001C0200001C0200001C0200003804080038000800380
008003800100070001000700030007000200070006000E003C00FFFFFC001C1C7E9B1C>
I<01FFFFF0003C00F0003800300038002000380020003800200070002000700020007008
200070080000E0100000E0100000E0300000FFF00001C0200001C0200001C0200001C020
0003804000038000000380000003800000070000000700000007000000070000000F0000
00FFF000001C1C7E9B1B>I<0003F020001E0C60003002E000E003C001C001C0038001C0
070000C00E0000801E0000801C0000803C0000803C000000780000007800000078000000
F0000000F0000000F001FF80F0001E00F0001C00F0001C00F0001C00F0001C0070003800
7000380038003800180078000C0090000707100001F800001B1E7A9C20>I<01FFC3FF80
003C0078000038007000003800700000380070000038007000007000E000007000E00000
7000E000007000E00000E001C00000E001C00000E001C00000FFFFC00001C003800001C0
03800001C003800001C0038000038007000003800700000380070000038007000007000E
000007000E000007000E000007000E00000F001E0000FFE1FFC000211C7E9B1F>I<03FF
0078007000700070007000E000E000E000E001C001C001C001C003800380038003800700
0700070007000E000E000E000E001E00FFC0101C7D9B10>I<01FFC07F80003C001E0000
380018000038002000003800400000380080000070020000007004000000700800000070
10000000E040000000E0C0000000E1C0000000E2E0000001C4E0000001D070000001E070
000001C070000003803800000380380000038018000003801C000007001C000007000E00
0007000E000007000E00000F000F0000FFE07FC000211C7E9B20>75
D<01FFC0003C0000380000380000380000380000700000700000700000700000E00000E0
0000E00000E00001C00001C00001C00001C0000380020380020380020380040700040700
0C0700180700380E00F0FFFFF0171C7E9B1A>I<01FE0001FE003E0001E0002E0003C000
2E0005C0002E0005C0002E0009C0004E000B80004E001380004E00238000470023800087
0047000087004700008700870000870107000107010E000107020E000107040E00010704
0E000207081C000203881C000203901C000203A01C000403A038000403C038000403C038
000C038038001C03007800FF8307FF00271C7E9B25>I<01FC00FF80001C001C00002E00
1800002E001000002E001000002700100000470020000043002000004380200000438020
000081C040000081C040000081C040000080E040000100E0800001007080000100708000
010070800002003900000200390000020039000002001D000004001E000004000E000004
000E00000C000E00001C00040000FF80040000211C7E9B1F>I<0007F000001C1C000070
0E0000E0070001C0038003800380070003800E0003C01E0003C01C0003C03C0003C03C00
03C0780003C0780003C0780003C0F0000780F0000780F0000780F0000F00F0000F00F000
0E00F0001E00F0003C0070003800700070007800E0003801C0001C0380000E0E000003F8
00001A1E7A9C20>I<01FFFE00003C0380003801C0003800E0003800E0003800E0007001
E0007001E0007001E0007001C000E003C000E0038000E0070000E01C0001FFF00001C000
0001C0000001C00000038000000380000003800000038000000700000007000000070000
00070000000F000000FFE000001B1C7E9B1C>I<01FFFE00003C0780003801C0003801E0
003800E0003800E0007001E0007001E0007001E0007003C000E0038000E0070000E01C00
00FFE00001C0300001C0180001C01C0001C01C0003801C0003801C0003801C0003801C00
07003C0007003C2007003C2007003C200F003C40FFE01E8000000F001B1D7E9B1E>82
D<000F8400304C00403C0080180100180300180300180600100600100600000700000700
0003E00003FC0001FF00007F800007C00001C00001C00000C00000C02000C02000C06001
80600180600300600200F00400CC180083E000161E7D9C17>I<1FFFFFC01C0701C0300E
00C0200E0080600E0080400E0080401C0080801C0080801C0080001C0000003800000038
000000380000003800000070000000700000007000000070000000E0000000E0000000E0
000000E0000001C0000001C0000001C0000001C0000003C000007FFE00001A1C799B1E>
I<7FF03FE00F0007000E0006000E0004000E0004000E0004001C0008001C0008001C0008
001C00080038001000380010003800100038001000700020007000200070002000700020
00E0004000E0004000E0004000E0008000E0008000E00100006002000060040000300800
001830000007C000001B1D789B1F>I<FF801FC03C0007001C0004001C0004001C000800
1C0010001C0010001C0020001C0020001C0040001C0080001C0080000E0100000E010000
0E0200000E0400000E0400000E0800000E0800000E1000000E2000000F20000007400000
0740000007800000070000000700000006000000060000001A1D779B1F>I<FF83FF07F0
3C007001C038007001803800F001003800F0010038017002003801700400380270040038
027008003804700800380470100038087010003808702000381070200038307040003820
7040001C407080001C407080001C807100001C807100001D007200001D007200001E0074
00001E007400001C003800001C00380000180030000018002000001000200000241D779B
29>I<01FF81FE003E0078001C0060001C00C0001E0080000E0100000F02000007040000
070800000790000003A0000003E0000001C0000001C0000001E0000002E0000004E00000
08F00000107000002070000060380000C0380000803C0001001C0002001C0006001E001E
001E00FF007FC01F1C7E9B1F>I<FFC00FE01E0003800E0002000E0004000F000C000700
080007801000038020000380400003C0C00001C0800001C1000001E2000000E4000000EC
000000F80000007000000070000000E0000000E0000000E0000000E0000001C0000001C0
000001C0000001C00000038000003FF800001B1C789B1F>I<01FFFF8001E0070003800E
0003001E0002001C0002003800040070000400E0000401C0000001C00000038000000700
00000E0000001C0000001C0000003800000070000000E0080001C0100001C01000038010
00070020000E0020001C0060003C00C0003801C00070078000FFFF8000191C7D9B19>I<
01E307170C0F180F380E300E700E700EE01CE01CE01CE01CE039E039E0396079319A1E0C
10127C9115>97 D<3F00070007000E000E000E000E001C001C001C001C0039E03A183C0C
380C700C700E700E700EE01CE01CE01CE018E038E030E06060C031801E000F1D7C9C13>
I<00F803040E041C0E181C300070007000E000E000E000E000E000E0046008601030600F
800F127C9113>I<0007E00000E00000E00001C00001C00001C00001C000038000038000
038000038001E7000717000C0F00180F00380E00300E00700E00700E00E01C00E01C00E0
1C00E01C00E03900E03900E03900607900319A001E0C00131D7C9C15>I<00F807040C04
18023804300470087FF0E000E000E000E000E00060046008301030600F800F127C9113>
I<0003C0000670000C70001C60001C00001C0000380000380000380000380000380003FF
8000700000700000700000700000700000E00000E00000E00000E00000E00001C00001C0
0001C00001C00001C000038000038000038000030000030000070000C60000E60000CC00
007800001425819C0D>I<0078C001C5C00303C00603C00E03800C03801C03801C038038
0700380700380700380700380E00380E00380E00181E000C7C00079C00001C00001C0000
3800003800C03000E07000C1C0007F0000121A7E9113>I<0FC00001C00001C000038000
0380000380000380000700000700000700000700000E3E000EC3000F03800E03801E0380
1C03801C03801C0380380700380700380700380E00700E40700E40701C40701C80E00C80
600700121D7E9C15>I<01800380010000000000000000000000000000001C0026004700
47008E008E000E001C001C001C0038003800710071007100720072003C00091C7C9B0D>
I<00030007000300000000000000000000000000000078008C010C020C021C041C001C00
1C0038003800380038007000700070007000E000E000E000E001C001C0C180E300C60078
001024819B0D>I<0FC00001C00001C00003800003800003800003800007000007000007
00000700000E07800E08800E11C00E21C01C41801C80001D00001E00003FC00038E00038
7000387000707100707100707100707200E03200601C00121D7E9C13>I<1F8003800380
07000700070007000E000E000E000E001C001C001C001C00380038003800380070007000
70007000E200E200E200E40064003800091D7D9C0B>I<1C1E0780266318C04683A0E047
03C0E08E0380E08E0380E00E0380E00E0380E01C0701C01C0701C01C0701C01C07038038
0E0388380E0388380E0708380E0710701C0320300C01C01D127C9122>I<383E004CC300
4D03804E03809E03809C03801C03801C0380380700380700380700380E00700E40700E40
701C40701C80E00C8060070012127C9117>I<00F800030C000E06001C03001803003003
00700380700380E00700E00700E00700E00E00E00E00E01C0060180060300030E0000F80
0011127C9115>I<03878004C86004D03004E03009C03009C03801C03801C03803807003
80700380700380600700E00700C00701800783000E86000E78000E00000E00001C00001C
00001C00001C0000380000FF0000151A809115>I<01E107130C0F180F380E300E700E70
0EE01CE01CE01CE01CE038E038E038607831F01E700070007000E000E000E000E001C00F
F8101A7C9113>I<1C3C2642468747078E068E000E000E001C001C001C001C0038003800
380038007000300010127C9112>I<01F006080C080C1C18181C001F001FC00FF007F000
7800386030E030C030806060C01F000E127D9111>I<03000700070007000E000E000E00
0E00FFE01C001C001C0038003800380038007000700070007000E080E080E100E1006600
38000B1A7C990E>I<1C01802E03804E03804E03808E07008E07001C07001C0700380E00
380E00380E00380E00301C80301C80301C80383C80184D000F860011127C9116>I<1C06
2E0E4E064E068E028E021C021C023804380438043808300830083010382018400F800F12
7C9113>I<1E01832703874703874703838707018707010E07010E07011C0E021C0E021C
0E021C0E04180C04181C04181C081C1E080C263007C3C018127C911C>I<0387800CC840
0870E01070E020E0C020E00000E00000E00001C00001C00001C00001C000038100638100
E38200C5820085840078780013127E9113>I<1C01802E03804E03804E03808E07008E07
001C07001C0700380E00380E00380E00380E00301C00301C00301C00383C001878000FB8
00003800003000007000E06000E0C0008180004300003C0000111A7C9114>I<01C107E1
0FF6081C10080010002000400080010002000400080410042C0C73F841F080E010127E91
11>I<FFFFC012017C8B15>I E /FL 38 91 df<387878380808101020204080050C7D83
0C>44 D<7FF0FFE00C027F890E>I<7070F06004047C830C>I<00F800038E000606000C03
000C0300180380380380380380300380700380700380700380700380E00700E00700E007
00E00700E00700E00600E00E00C00E00C00E00C00C00C01C00C0180060300060600030C0
001F0000111D7C9B15>48 D<0018003003F00C7000700070007000E000E000E000E000E0
00E001C001C001C001C001C001C003800380038003800380038007000780FFF80D1C7C9B
15>I<007E000183800201C00400E00400E00F00E00F00E01F00E01F00E00E00E00001E0
0001C0000380000380000700000E00001C0000380000600000C000018000030080060080
0801001001003FFF007FFE00FFFE00131C7E9B15>I<007C000187000203800403800F03
C00F03C00F03C00E0380000380000700000600000C0000380003F000001C00000E00000E
00000F00000F00000F00700F00F80F00F80F00F00E00E01E00801C004038003070000F80
00121D7D9B15>I<0000C0000180000380000380000780000B8000138000270000670000
C700008700010700020700040E00080E00180E00100E00200E00400E00FFFFC0001C0000
1C00001C00001C00001C00003800003C0003FF80121C7E9B15>I<0301C003FF8007FE00
07F80004000004000004000004000008000008000008F8000B0C000C0E00080700100700
000700000780000780000780700F00F00F00F00F00F00E00801E00801C00403800403000
30E0000F8000121D7D9B15>I<003E0000C1000180800303800607800C07801C07001800
0038000030000071F000761800780C00E80E00F00600F00600E00700E00700E00700E00E
00C00E00C00E00C00E00C01C00E0180060380060300030C0000F8000111D7C9B15>I<10
00003FFFC03FFFC03FFF8060010040020040040080080000080000100000200000400000
C0000080000180000180000300000700000700000F00000E00000E00001E00001E00001E
00003C00003C00003C0000180000121D7B9B15>I<007C000183000201800601800C00C0
0C00C00C00C01C01801C01801F03000F86000FCC0007F00003F80003FC000C7E00183F00
301F00600700600700C00300C00300C00300C00200C006006004006008003830000FC000
121D7D9B15>I<00F8000304000606000C03001C03003803003803803003807003807003
80700380700380700780700700700F00300F0018170008270007CE00000E00000C00001C
00601800F03800F03000E0600080C0004380003E0000111D7C9B15>I<00002000000030
00000070000000F0000000F0000001F0000001F800000278000002780000047800000478
000008780000083C0000103C0000103C0000203C0000203C0000403E0000401E0000FFFE
0000801E0001001E0001001F0002000F0002000F0004000F000C000F001E000F80FF807F
F01C1D7F9C1F>65 D<07FFFE0000F8078000F001C000F001E000F000E000F000F000F000
F001E000E001E001E001E001C001E003C001E0078001E01E0003FFFC0003C00F0003C007
8003C003C003C003C003C003C0078003C0078003C0078003C0078003C00780078007800F
000F001E000F003C00FFFFE0001C1C7F9B1D>I<0007F010001C0C300070026000C001E0
038000E0070000E00E0000600E0000601C0000403C000040380000407800000078000000
78000000F0000000F0000000F0000000F0000000F0000000F0000080F000010070000100
7000010038000200380004001C0004000C001800060020000380C000007F00001C1E7C9C
1E>I<0FFFFC0000F8078000F001C000F000E000F0007000F0007000F0007801E0003801
E0003801E0003801E0003801E0003C01E0003803C0003803C0007803C0007803C0007803
C0007003C000F0078000E0078000E0078001C0078003800780078007800E000F001C000F
007000FFFFC0001E1C7E9B20>I<07FFFFE000F801E000F000E000F0004000F0004000F0
004000F0004001E0004001E0204001E0200001E0200001E0600001E0E00003FFC00003C0
C00003C0400003C0400003C0400003C04080078000800780008007800100078001000780
0300078006000F000E000F003E00FFFFFC001B1C7E9B1C>I<07FFFFC000F803C000F001
C000F0008000F0008000F0008000F0008001E0008001E0208001E0200001E0200001E060
0001E0E00003FFC00003C0C00003C0400003C0400003C0400003C0400007800000078000
00078000000780000007800000078000000F0000000F800000FFF800001A1C7E9B1B>I<
0007F010001C0C300070026000C001E0038000E0070000E00E0000600E0000601C000040
3C00004038000040780000007800000078000000F0000000F0000000F0000000F000FFF0
F0000F80F0000780F0000F0070000F0070000F0038000F0038000F001C001F000C001E00
0600660003818200007E00001C1E7C9C21>I<07FF87FF8000F800F80000F000F00000F0
00F00000F000F00000F000F00000F000F00001E001E00001E001E00001E001E00001E001
E00001E001E00001E001E00003FFFFC00003C003C00003C003C00003C003C00003C003C0
0003C003C000078007800007800780000780078000078007800007800780000780078000
0F000F00000F800F8000FFF0FFF000211C7F9B1F>I<07FF00F800F000F000F000F000F0
01E001E001E001E001E001E003C003C003C003C003C003C0078007800780078007800780
0F000F80FFF0101C7F9B0F>I<007FF80007C0000780000780000780000780000780000F
00000F00000F00000F00000F00000F00001E00001E00001E00001E00001E00001E00003C
00003C00703C00F83C00F83C00F07800E0700080E00061C0001F0000151D7E9B15>I<07
FF80FF00F8007800F0006000F0004000F0008000F0010000F0040001E0080001E0100001
E0200001E0400001E0C00001E3E00003C5E00003C9F00003D0F00003E0F80003C0780003
C07C0007803C0007803E0007801E0007801F0007800F0007800F800F0007800F800FC0FF
F03FF0201C7F9B20>I<07FFC000F80000F00000F00000F00000F00000F00001E00001E0
0001E00001E00001E00001E00003C00003C00003C00003C00003C00003C0040780040780
040780040780080780080780180F00380F00F0FFFFF0161C7E9B1A>I<07F80007FC00F8
000FC000BC000F8000BC00178000BC00178000BC00278000BC002780011E004F00011E00
4F00011E008F00011E008F00011E010F00010F010F00020F021E00020F021E00020F041E
00020F041E000207881E000207901E000407903C000407A03C000407A03C000407C03C00
0403C03C000403803C000C038078001E03007C00FF8307FF80261C7E9B26>I<07F800FF
8000F8003C0000BC00180000BC001000009E001000009F001000008F001000010F802000
01078020000107C020000103C020000103E020000101E020000200F040000200F0400002
00784000020078400002003C400002003C400004001E800004001F800004000F80000400
0F8000040007800004000780000C000300001E00010000FF80010000211C7F9B1F>I<00
07F00000381C0000E00E0001C0030003800380070001C00E0001C01E0001E01C0000E03C
0000E0380000E0780000F0780000F0780000F0F00001E0F00001E0F00001E0F00001E0F0
0003C0F00003C0F00003C0700007807000070078000F0038001E003C001C001C0038000E
00E0000383800000FE00001C1E7C9C20>I<07FFFC0000F80F0000F0038000F003C000F0
01C000F001C000F001C001E003C001E003C001E003C001E0038001E0070001E00E0003C0
3C0003FFE00003C0000003C0000003C0000003C000000780000007800000078000000780
000007800000078000000F0000000F800000FFF000001A1C7E9B1C>I<0FFFF80000F80E
0000F0078000F003C000F001C000F001E000F001E001E003C001E003C001E0038001E007
0001E00E0001E03C0003FFE00003C0780003C01C0003C01E0003C00E0003C00F0007801E
0007801E0007801E0007801E0007801E0007801E080F001E100F801E10FFF00E20000003
C01D1D7E9B1F>82 D<003F0400C0CC0180380300380600180E00180E00180E00181E0010
1E00001F00000F80000FF80007FF0003FF8001FFC0003FE00003E00001E00000E00000E0
4000E04000E04000E04000C06001C0E00180F00300CC0E0083F800161E7E9C17>I<1FFF
FFF03C07C0F03007803020078020600780204007802040078020400F0020800F0020000F
0000000F0000000F0000000F0000001E0000001E0000001E0000001E0000001E0000001E
0000003C0000003C0000003C0000003C0000003C0000003C000000780000007C00001FFF
E0001C1C7C9B1E>I<FFF01FF01F0007801E0003001E0002001E0002001E0002001E0002
003C0004003C0004003C0004003C0004003C0004003C0004007800080078000800780008
00780008007800080078000800F0001000F0001000700010007000200070002000380040
00380080001C0100000E0E000001F000001C1D7A9B1F>I<FFE007F81F0001C00F000180
0F0001000F0001000F800200078002000780040007800C000780080007C0100003C01000
03C0200003C0200003C0400003E0400001E0800001E0800001E1000001E3000000F20000
00F4000000F4000000F8000000F80000007000000070000000600000006000001D1D7B9B
1F>I<FFE1FFC0FF801F003E003E000F001E0018000F001E0018000F001E0010000F001E
0030000F001E0020000F003E0060000F802F00400007804F00C00007804F00800007808F
01800007808F01000007810F01000007C10782000003C20782000003C20784000003C607
84000003C40788000003CC0788000003C807D0000001F803D0000001F003E0000001F003
E0000001E003C0000001E003C0000001C00380000000C001800000008001000000291D7B
9B2B>I<07FF03FE00FC01F0007800C0007C0080003C0100003E0200001E0400001F0C00
000F0800000F90000007A0000007C0000003C0000003E0000001E0000003F0000004F000
0008F0000010F8000030780000607C0000403C0000803E0001001E0002001F0006000F00
1F001F80FF807FF01F1C7F9B1F>I<FFE007F81F8001C00F0001800F8001000780020007
C0040003C00C0003C0080003E0100001E0200001F0600000F0400000F8800000F9000000
7B0000007E0000003C0000003C0000003800000078000000780000007800000078000000
7800000070000000F0000000F800000FFF00001D1C7B9B1F>I<03FFFF8007C00F000700
1E0006003C0006007C00040078000400F0000801E0000803E0000003C00000078000000F
0000001F0000001E0000003C00000078000000F8000000F0040001E0080003C008000780
0800078018000F0010001E0030003C0030003C00F0007803E000FFFFE000191C7E9B19>
I E /FM 43 122 df<60F0F06004047C830C>58 D<60F0F0701010101020204080040C7C
830C>I<00010003000600060006000C000C000C00180018001800300030003000600060
00C000C000C0018001800180030003000300060006000C000C000C001800180018003000
30003000600060006000C000C00010297E9E15>61 D<E0000000780000001E0000000780
000001E0000000780000001E0000000780000001E0000000780000001E00000007800000
078000001E00000078000001E00000078000001E00000078000001E00000078000001E00
000078000000E000000019187D9520>I<00000C0000000C0000001C0000001C0000003C
0000005C0000005C0000009E0000008E0000010E0000020E0000020E0000040E0000040E
0000080E0000100E0000100E0000200700003FFF00004007000080070000800700010007
00010007000200070004000700040007001C000780FF803FF01C1D7F9C1F>65
D<01FFFF00003C01C0003800E0003800F0003800700038007000700070007000F0007000
F0007001E000E003C000E0078000E01F0000FFFC0001C00F0001C0078001C003C001C003
C0038003C0038003C0038003C0038003C0070007800700070007000E0007001C000E0078
00FFFFC0001C1C7E9B1F>I<0001F808000E061800380138006000F001C0007003800070
070000300F0000200E0000201C0000203C0000203C000000780000007800000078000000
F0000000F0000000F0000000F0000000F0000100F0000100F00001007000020070000200
30000400380008001C0010000E0060000701800000FE00001D1E7E9C1E>I<01FFFF8000
3C01E000380070003800380038003C0038001C0070001C0070001E0070001E0070001E00
E0001E00E0001E00E0001E00E0001E01C0003C01C0003C01C0003C01C000380380007803
800070038000F0038000E0070001C0070003800700070007001C000E007800FFFFC0001F
1C7E9B22>I<01FFFFF8003C007800380018003800100038001000380010007000100070
0010007008100070080000E0100000E0100000E0300000FFF00001C0200001C0200001C0
200001C02000038040400380004003800080038000800700010007000100070003000700
06000E003E00FFFFFC001D1C7E9B1F>I<01FFFFF0003C00F00038003000380020003800
20003800200070002000700020007008200070080000E0100000E0100000E0300000FFF0
0001C0200001C0200001C0200001C0200003804000038000000380000003800000070000
000700000007000000070000000F000000FFF000001C1C7E9B1B>I<0001F808000E0618
00380138006000F001C0007003800070070000300F0000200E0000201C0000203C000020
3C000000780000007800000078000000F0000000F0000000F0007FF0F0000780F0000700
F0000700F00007007000070070000E0030000E0038000E001C001E000E00640007018400
00FE00001D1E7E9C21>I<01FFC0003C0000380000380000380000380000700000700000
700000700000E00000E00000E00000E00001C00001C00001C00001C00003800003800003
80000380000700000700000700000700000F0000FFE000121C7E9B12>73
D<01FFE0003C0000380000380000380000380000700000700000700000700000E00000E0
0000E00000E00001C00001C00001C00001C0000380020380020380020380040700040700
0C0700180700380E00F0FFFFF0171C7E9B1C>76 D<01FE0000FF003E0000F0002E0001E0
002E0002E0002E0002E0002E0004E0004E0009C0004E0009C000470011C000470011C000
870023800087004380008700438000870083800107010700010701070001038207000103
8207000203840E000203880E000203880E000203900E000403A01C000403A01C000401C0
1C000C01C01C001C01803C00FF8103FF80281C7E9B28>I<01FC00FF80001C001C00002E
001800002E001000002E0010000027001000004700200000430020000043802000004380
20000081C040000081C040000081C040000080E040000100E08000010070800001007080
00010070800002003900000200390000020039000002001D000004001E000004000E0000
04000E00000C000E00001C00040000FF80040000211C7E9B21>I<0003F800000E0E0000
38038000E001C001C001C0038000E0070000E00F0000F01E0000F01C0000F03C0000F03C
0000F0780000F0780000F0780000F0F00001E0F00001E0F00001E0F00003C0F00003C0F0
000780F0000780F0000F0070000E0070001C00380038003C0070001C01C0000707800001
FC00001C1E7E9C20>I<01FFFF00003C03C0003800E0003800F000380070003800700070
00F0007000F0007000F0007000E000E001E000E003C000E0070000E01E0001FFF00001C0
000001C0000001C000000380000003800000038000000380000007000000070000000700
0000070000000F000000FFE000001C1C7E9B1B>I<0003F800000E0E000038038000E001
C001C001C0038000E0070000E00F0000F01E0000F01C0000F03C0000F03C0000F0780000
F0780000F0780000F0F00001E0F00001E0F00001E0F00003C0F00003C0F0000380F00007
80F0000F00703C0E0070421C0038823800388270001C83C0000787810001FF0100000303
000003020000038E000003FC000003F8000001F8000001E0001C257E9C21>I<01FFFE00
003C03C0003800E0003800F00038007000380070007000F0007000F0007000F0007001E0
00E001C000E0078000E01E0000FFF00001C0380001C00C0001C00E0001C00E0003800E00
03800E0003800E0003800E0007001E0007001E0807001E0807001E100F000F10FFE00F20
000003C01D1D7E9B20>I<1FFFFFF01C0380703007003020070020600700204007002040
0E0020800E0020800E0020000E0000001C0000001C0000001C0000001C00000038000000
38000000380000003800000070000000700000007000000070000000E0000000E0000000
E0000000E0000001E000007FFF00001C1C7F9B18>84 D<FFC00FF01C0003801C0003001C
0002001C0002001C0004001C0008001E0008000E0010000E0030000E0020000E0040000E
0040000E0080000E0100000F010000070200000704000007040000070800000708000007
1000000720000003A0000003C00000038000000380000003000000030000001C1D7D9B18
>86 D<01FFC0FF80001E003C00001C003000000E002000000E004000000F008000000701
0000000782000000038400000003CC00000001D800000001F000000001E000000000E000
000000F00000000170000000027800000004380000000838000000103C000000201C0000
00401E000000800E000001000F0000020007000006000700001E000F8000FF803FF00021
1C7F9B22>88 D<01E3000717000C0F00180F00380E00300E00700E00700E00E01C00E01C
00E01C00E01C00E03880E03880E038806078803199001E0E0011127E9116>97
D<3F00070007000E000E000E000E001C001C001C001C0039E03A303C1838187018701C70
1C701CE038E038E038E030E070E060E0C061C023001E000E1D7E9C12>I<01F0030C0C0C
1C1E383C301870007000E000E000E000E000E000E0046008601030601F800F127E9112>
I<0007E00000E00000E00001C00001C00001C00001C000038000038000038000038001E7
000717000C0F00180F00380E00300E00700E00700E00E01C00E01C00E01C00E01C00E038
80E03880E038806078803199001E0E00131D7E9C16>I<01F007080C0818043808300870
307FC0E000E000E000E000E000E0046008601030600F800E127E9113>I<0001E0000630
000E78000EF0001C60001C00001C00001C00001C0000380000380003FFC0003800003800
00700000700000700000700000700000E00000E00000E00000E00000E00001C00001C000
01C00001C00001C000018000038000038000630000F30000F60000E4000078000015257E
9C14>I<0FC00001C00001C0000380000380000380000380000700000700000700000700
000E3E000EC3000F03800E03801E03801C03801C03801C0380380700380700380700380E
00700E20700E20701C20701C40E00C80600700131D7E9C18>104
D<01C003C003C001800000000000000000000000001C00270047004700870087000E000E
001C001C001C003800388038807080710032001C000A1C7E9B0E>I<0007000F000F0006
0000000000000000000000000078009C010C020C021C041C001C001C0038003800380038
007000700070007000E000E000E000E001C061C0F180F300E6007C001024809B11>I<0F
C00001C00001C0000380000380000380000380000700000700000700000700000E07000E
08800E11C00E23C01C47801C83001D00001E00003FC00038E00038700038700070710070
7100707100707200E03200601C00121D7E9C16>I<1F800380038007000700070007000E
000E000E000E001C001C001C001C0038003800380038007000700070007000E200E200E2
00E40064003800091D7F9C0C>I<381F81F04E20C6184640E81C4680F01C8F00F01C8E00
E01C0E00E01C0E00E01C1C01C0381C01C0381C01C0381C01C07038038071380380713803
80E1380380E2700700643003003820127E9124>I<3C1F004E61804681C04701C08F01C0
8E01C00E01C00E01C01C03801C03801C03801C0700380710380710380E10380E20700640
30038014127E9119>I<00F800030C000E06001C0300180300300300700380700380E007
00E00700E00700E00E00E00E00E01C0060180060300030E0000F800011127E9114>I<07
878009C86008D03008E03011C03011C03801C03801C03803807003807003807003806007
00E00700C00701800783000E86000E78000E00000E00001C00001C00001C00001C00003C
0000FF0000151A819115>I<3C3C4E424687470F8E1E8E0C0E000E001C001C001C001C00
38003800380038007000300010127E9113>114 D<01F0060C0C040C0E180C1C001F000F
E00FF003F80038201C7018F018F010803060601F800F127E9113>I<00C001C001C001C0
0380038003800380FFF00700070007000E000E000E000E001C001C001C001C0038203820
3840384018800F000C1A80990F>I<1C03270747074703870187010E010E011C021C021C
021C041804180818081C100C2007C010127E9114>118 D<07878008C84010F0C020F1E0
20E3C040E18000E00000E00001C00001C00001C00001C000638080F38080F38100E58100
84C60078780013127E9118>120 D<1C00C02701C04701C04701C08703808703800E0380
0E03801C07001C07001C07001C0700180E00180E00180E001C1E000C3C0007DC00001C00
001800603800F03000F06000E0C0004180003E0000121A7E9114>I
E /FN 90 128 df<03FFF000003F0000001E0000001E0000001E000000FF8000039EE000
0E1E38001C1E1C00381E0E00781E0F00F01E0780F01E0780F01E0780F01E0780F01E0780
F01E0780781E0F00381E0E001C1E1C000E1E3800039EE00000FF8000001E0000001E0000
001E0000003F000003FFF000191C7E9B1E>8 D<007E1F0001C1B1800303E3C00703C3C0
0E03C1800E01C0000E01C0000E01C0000E01C0000E01C0000E01C000FFFFFC000E01C000
0E01C0000E01C0000E01C0000E01C0000E01C0000E01C0000E01C0000E01C0000E01C000
0E01C0000E01C0000E01C0000E01C0000E01C0000E01C0007F87FC001A1D809C18>11
D<007E0001C1800301800703C00E03C00E01800E00000E00000E00000E00000E0000FFFF
C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01
C00E01C00E01C00E01C00E01C07F87F8151D809C17>I<007FC001C1C00303C00703C00E
01C00E01C00E01C00E01C00E01C00E01C00E01C0FFFFC00E01C00E01C00E01C00E01C00E
01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C07F
CFF8151D809C17>I<003F07E00001C09C18000380F018000701F03C000E01E03C000E00
E018000E00E000000E00E000000E00E000000E00E000000E00E00000FFFFFFFC000E00E0
1C000E00E01C000E00E01C000E00E01C000E00E01C000E00E01C000E00E01C000E00E01C
000E00E01C000E00E01C000E00E01C000E00E01C000E00E01C000E00E01C000E00E01C00
0E00E01C007FC7FCFF80211D809C23>I<60F0F0F0F0F0F0F06060606060606060606060
6060000000000060F0F060041E7C9D0C>33 D<6060F0F0F8F86868080808080808101010
102020404080800D0C7F9C15>I<00030180000301800003018000060300000603000006
03000006030000060300000C0600000C0600000C0600000C060000180C007FFFFFF8FFFF
FFFC0030180000301800003018000030180000603000006030000060300000603000FFFF
FFFC7FFFFFF800C060000180C0000180C0000180C0000180C00003018000030180000301
8000030180000603000006030000060300001E257E9C23>I<0F0000C0188000C0306003
80703807006027FB00E0100600E0100C00E0100C00E0101800E0101800E0103000E01060
00602060007020C00030418000188180000F0303C00006062000060C10000C1C08001818
080018380400303804006038040060380400C0380400C03804018038040300180803001C
0806000C100C000620040003C01E217E9E23>37 D<00E000000310000006080000060800
000E0800000E0800000E0800000E0800000E1000000E1000000E2000000740000007403F
E007800F8007800600038004000780040009C0080011C0100030E0100020F02000607020
00E0384000E03C8000E01C8000E00F0020E0070020700780403009C0401830E1800FC03F
001B1F7E9D20>I<60F0F8680808081010204080050C7C9C0C>I<00800100020006000C00
0C00180018003000300030006000600060006000E000E000E000E000E000E000E000E000
E000E000E000E0006000600060006000300030003000180018000C000C00060002000100
0080092A7C9E10>I<8000400020003000180018000C000C000600060006000300030003
000300038003800380038003800380038003800380038003800380030003000300030006
00060006000C000C00180018003000200040008000092A7E9E10>I<0006000000060000
000600000006000000060000000600000006000000060000000600000006000000060000
0006000000060000FFFFFFE0FFFFFFE00006000000060000000600000006000000060000
00060000000600000006000000060000000600000006000000060000000600001B1C7E97
20>43 D<60F0F0701010101020204080040C7C830C>I<FFE0FFE00B0280890E>I<60F0F0
6004047C830C>I<00010003000600060006000C000C000C001800180018003000300030
0060006000C000C000C0018001800180030003000300060006000C000C000C0018001800
1800300030003000600060006000C000C00010297E9E15>I<03C00C301818300C300C70
0E60066006E007E007E007E007E007E007E007E007E007E007E007E007E0076006600670
0E300C300C18180C3007E0101D7E9B15>I<010007003F00C70007000700070007000700
070007000700070007000700070007000700070007000700070007000700070007000700
FFF80D1C7C9B15>I<07C01830201C400C400EF00FF80FF807F8077007000F000E000E00
1C001C00380070006000C00180030006010C01180110023FFE7FFEFFFE101C7E9B15>I<
07E01830201C201C781E780E781E381E001C001C00180030006007C00030001C001C000E
000F000F700FF80FF80FF80FF00E401C201C183007C0101D7E9B15>I<000C00000C0000
1C00003C00003C00005C0000DC00009C00011C00031C00021C00041C000C1C00081C0010
1C00301C00201C00401C00C01C00FFFFC0001C00001C00001C00001C00001C00001C0000
1C0001FFC0121C7F9B15>I<300C3FF83FF03FC020002000200020002000200023E02C30
3018301C200E000E000F000F000F600FF00FF00FF00F800E401E401C2038187007C0101D
7E9B15>I<00F0030C04040C0E181E301E300C700070006000E3E0E430E818F00CF00EE0
06E007E007E007E007E007600760077006300E300C18180C3003E0101D7E9B15>I<4000
007FFF807FFF007FFF004002008004008004008008000010000010000020000060000040
0000C00000C00001C0000180000180000380000380000380000380000780000780000780
00078000078000078000030000111D7E9B15>I<03E00C301008200C2006600660067006
70067C0C3E183FB01FE007F007F818FC307E601E600FC007C003C003C003C00360026004
300C1C1007E0101D7E9B15>I<03C00C301818300C700C600EE006E006E007E007E007E0
07E0076007700F300F18170C2707C700060006000E300C780C78187018203010C00F8010
1D7E9B15>I<60F0F0600000000000000000000060F0F06004127C910C>I<60F0F0600000
000000000000000060F0F0701010101020204080041A7C910C>I<7FFFFFC0FFFFFFE000
00000000000000000000000000000000000000000000000000000000000000FFFFFFE07F
FFFFC01B0C7E8F20>61 D<0FE03038401CE00EF00EF00EF00E000C001C0030006000C000
8001800100010001000100010001000000000000000000000003000780078003000F1D7E
9C14>63 D<000600000006000000060000000F0000000F0000000F000000178000001780
000037C0000023C0000023C0000043E0000041E0000041E0000080F0000080F0000080F0
00010078000100780001FFF80002003C0002003C0002003C0004001E0004001E000C001F
000C000F001E001F00FF00FFF01C1D7F9C1F>65 D<FFFFC0000F0078000F003C000F001E
000F000E000F000F000F000F000F000F000F000F000F000E000F001E000F003C000F00F8
000FFFF0000F003C000F001E000F000F000F0007000F0007800F0007800F0007800F0007
800F0007800F000F000F000F000F001E000F007800FFFFE000191C7F9B1D>I<001F8080
00E0618001801980070007800E0003801C0003801C000180380001807800008078000080
70000080F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000
700000807800008078000080380000801C0001001C0001000E0002000700040001800800
00E03000001FC000191E7E9C1E>I<FFFFC0000F00F0000F003C000F000E000F0007000F
0007000F0003800F0003C00F0001C00F0001C00F0001E00F0001E00F0001E00F0001E00F
0001E00F0001E00F0001E00F0001E00F0001C00F0001C00F0003C00F0003800F0007800F
0007000F000E000F001C000F007000FFFFC0001B1C7E9B20>I<FFFFFC0F003C0F000C0F
00040F00040F00060F00020F00020F01020F01000F01000F01000F03000FFF000F03000F
01000F01000F01000F01010F00010F00020F00020F00020F00060F00060F000C0F003CFF
FFFC181C7E9B1C>I<FFFFF80F00780F00180F00080F00080F000C0F00040F00040F0104
0F01000F01000F01000F03000FFF000F03000F01000F01000F01000F01000F00000F0000
0F00000F00000F00000F00000F00000F0000FFF800161C7E9B1B>I<001F808000E06180
01801980070007800E0003801C0003801C00018038000180780000807800008070000080
F0000000F0000000F0000000F0000000F0000000F0000000F000FFF0F0000F8070000780
7800078078000780380007801C0007801C0007800E00078007000B800180118000E06080
001F80001C1E7E9C21>I<FFF0FFF00F000F000F000F000F000F000F000F000F000F000F
000F000F000F000F000F000F000F000F000F000F000F000F000F000FFFFF000F000F000F
000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F
000F000F000F000F000F00FFF0FFF01C1C7F9B1F>I<FFF00F000F000F000F000F000F00
0F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F00
0F000F00FFF00C1C7F9B0F>I<07FF80007C00003C00003C00003C00003C00003C00003C
00003C00003C00003C00003C00003C00003C00003C00003C00003C00003C00003C00003C
00003C00703C00F83C00F83C00F8380070780040700030E0000F8000111D7F9B15>I<FF
F01FE00F0007800F0006000F0004000F0008000F0010000F0020000F0040000F0080000F
0100000F0200000F0600000F0F00000F1780000F2780000F43C0000F81E0000F01E0000F
00F0000F0078000F0078000F003C000F003E000F001E000F000F000F000F800F000FC0FF
F03FF01C1C7F9B20>I<FFF8000F80000F00000F00000F00000F00000F00000F00000F00
000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00080F00080F00
080F00180F00180F00100F00300F00700F01F0FFFFF0151C7E9B1A>I<FF8000FF800F80
00F8000F8000F8000BC00178000BC00178000BC001780009E002780009E002780008F004
780008F004780008F0047800087808780008780878000878087800083C107800083C1078
00083C107800081E207800081E207800081E207800080F407800080F4078000807807800
0807807800080780780008030078001C03007800FF8307FF80211C7E9B26>I<FF001FF0
0F8003800FC001000BC0010009E0010008F0010008F0010008780100083C0100083E0100
081E0100080F0100080F8100080781000803C1000801E1000801F1000800F10008007900
08007D0008003D0008001F0008001F0008000F0008000700080003001C000300FF800100
1C1C7F9B1F>I<003F800000E0E0000380380007001C000E000E001C0007003C00078038
000380780003C0780003C0700001C0F00001E0F00001E0F00001E0F00001E0F00001E0F0
0001E0F00001E0F00001E0700001C0780003C0780003C0380003803C0007801C0007000E
000E0007001C000380380000E0E000003F80001B1E7E9C20>I<FFFF800F00E00F00780F
003C0F001C0F001E0F001E0F001E0F001E0F001E0F001C0F003C0F00780F00E00FFF800F
00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F0000FF
F000171C7E9B1C>I<FFFF00000F01E0000F0078000F003C000F001C000F001E000F001E
000F001E000F001E000F001C000F003C000F0078000F01E0000FFF00000F01E0000F0070
000F0078000F003C000F003C000F003C000F003C000F003C000F003C000F003C100F003C
100F001C100F001C10FFF00E20000003C01C1D7E9B1F>82 D<07E0801C19803005803003
80600180E00180E00080E00080E00080F00000F800007C00007FC0003FF8001FFE0007FF
0000FF80000F800007C00003C00001C08001C08001C08001C0C00180C00180E00300D002
00CC0C0083F800121E7E9C17>I<7FFFFFC0700F01C0600F00C0400F0040400F0040C00F
0020800F0020800F0020800F0020000F0000000F0000000F0000000F0000000F0000000F
0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F
0000000F0000000F0000001F800003FFFC001B1C7F9B1E>I<FFF01FF00F0003800F0001
000F0001000F0001000F0001000F0001000F0001000F0001000F0001000F0001000F0001
000F0001000F0001000F0001000F0001000F0001000F0001000F0001000F0001000F0001
000F00010007000200078002000380040001C0040000E0180000706000000F80001C1D7F
9B1F>I<FFE00FF01F0003C01F0001800F0001000F000100078002000780020007C00200
03C0040003C0040003E00C0001E0080001E0080000F0100000F0100000F8100000782000
00782000003C4000003C4000003C4000001E8000001E8000001F8000000F0000000F0000
0006000000060000000600001C1D7F9B1F>I<FFE1FFC0FF1F003E003C1E003C00180F00
1E00100F001E00100F001E001007801F002007801F002007801F002003C027804003C027
804003C027804001E043C08001E043C08001E043C08000F081E10000F081E10000F081E1
0000F900F300007900F200007900F200007E007E00003E007C00003E007C00003C003C00
001C003800001C00380000180018000008001000281D7F9B2B>I<FFF07FC00FC01E0007
800C0007C0080003C0100001E0200001F0200000F0400000788000007C8000003D000000
3E0000001F0000000F0000000F8000000F80000013C0000023E0000021E0000040F00000
80F8000080780001007C0002003E0002001E0006001F001F001F80FF807FF01C1C7F9B1F
>I<FFF003FC0F8001E0078000C007C0008003C0010003E0030001E0020000F0040000F8
040000780800007C1800003C1000003E2000001F2000000F4000000FC000000780000007
800000078000000780000007800000078000000780000007800000078000000780000007
8000007FF8001E1C809B1F>I<7FFFF07C01F07001E06003C06003C0400780400F80400F
00401E00001E00003C00007C0000780000F00000F00001E00003E00003C0100780100780
100F00101F00301E00203C00203C00607800E0F803E0FFFFE0141C7E9B19>I<FEFEC0C0
C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0FE
FE07297C9E0C>I<08081010202040404040808080808080B0B0F8F8787830300D0C7A9C
15>I<FEFE06060606060606060606060606060606060606060606060606060606060606
060606060606FEFE0729809E0C>I<0810204040808080B0F87830050C7D9C0C>96
D<1FC000307000783800781C00301C00001C00001C0001FC000F1C00381C00701C00601C
00E01C40E01C40E01C40603C40304E801F870012127E9115>I<FC00001C00001C00001C
00001C00001C00001C00001C00001C00001C00001C00001C7C001D87001E01801C00C01C
00E01C00601C00701C00701C00701C00701C00701C00701C00601C00E01C00C01E018019
070010FC00141D7F9C17>I<03F80C0C181E301E700C6000E000E000E000E000E000E000
60007002300218040C1803E00F127F9112>I<001F800003800003800003800003800003
8000038000038000038000038000038003F3800E0B80180780300380700380600380E003
80E00380E00380E00380E00380E003806003807003803003801807800E1B8003E3F0141D
7F9C17>I<07E00C301818300C700E6006E006FFFEE000E000E000E00060007002300218
040C1803E00F127F9112>I<00F8018C071E061E0E0C0E000E000E000E000E000E00FFE0
0E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E007FE00F1D
809C0D>I<00038007C4C01C78C0383880301800701C00701C00701C00701C0030180038
38001C700027C0002000002000003000003FF8001FFF001FFF802003806001C0C000C0C0
00C0C000C06001803003001C0E0007F800121C7F9215>I<FC00001C00001C00001C0000
1C00001C00001C00001C00001C00001C00001C00001C7C001C87001D03001E03801C0380
1C03801C03801C03801C03801C03801C03801C03801C03801C03801C03801C03801C0380
FF9FF0141D7F9C17>I<18003C003C0018000000000000000000000000000000FC001C00
1C001C001C001C001C001C001C001C001C001C001C001C001C001C001C00FF80091D7F9C
0C>I<00C001E001E000C0000000000000000000000000000007E000E000E000E000E000
E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E060E0F0C0F1
C061803E000B25839C0D>I<FC00001C00001C00001C00001C00001C00001C00001C0000
1C00001C00001C00001C0FE01C07801C06001C0C001C10001C20001C40001CE0001DE000
1E70001C78001C38001C3C001C1C001C0E001C0F001C0F80FF9FE0131D7F9C16>I<FC00
1C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C00
1C001C001C001C001C001C001C001C001C00FF80091D7F9C0C>I<FC7E07E0001C838838
001D019018001E01E01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C00
1C01C01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C001C
01C01C00FF8FF8FF8021127F9124>I<FC7C001C87001D03001E03801C03801C03801C03
801C03801C03801C03801C03801C03801C03801C03801C03801C03801C0380FF9FF01412
7F9117>I<03F0000E1C00180600300300700380600180E001C0E001C0E001C0E001C0E0
01C0E001C06001807003803003001806000E1C0003F00012127F9115>I<FC7C001D8700
1E01801C01C01C00E01C00E01C00701C00701C00701C00701C00701C00701C00E01C00E0
1C01C01E01801D07001CFC001C00001C00001C00001C00001C00001C00001C0000FF8000
141A7F9117>I<03E0800E1980180580380780700380700380E00380E00380E00380E003
80E00380E003807003807003803807801807800E1B8003E3800003800003800003800003
80000380000380000380001FF0141A7F9116>I<FCE01D381E781E781C301C001C001C00
1C001C001C001C001C001C001C001C001C00FFC00D127F9110>I<1F9020704030C010C0
10E010F8007F803FE00FF000F880388018C018C018E010D0608FC00D127F9110>I<0400
0400040004000C000C001C003C00FFE01C001C001C001C001C001C001C001C001C001C10
1C101C101C101C100C100E2003C00C1A7F9910>I<FC1F801C03801C03801C03801C0380
1C03801C03801C03801C03801C03801C03801C03801C03801C03801C07800C07800E1B80
03E3F014127F9117>I<FF07E03C03801C01001C01000E02000E02000F06000704000704
0003880003880003C80001D00001D00000E00000E00000E00000400013127F9116>I<FF
3FC7E03C0703C01C0701801C0701001C0B01000E0B82000E0B82000E1182000711C40007
11C4000720C40003A0E80003A0E80003C0680001C0700001C0700001803000008020001B
127F911E>I<FF0FE01E07001C06000E040007080003900003B00001E00000E00000F000
01F000013800021C00041C000C0E001807003C0780FE1FF014127F9116>I<FF07E03C03
801C01001C01000E02000E02000F060007040007040003880003880003C80001D00001D0
0000E00000E00000E000004000004000008000008000F08000F10000F300006600003800
00131A7F9116>I<7FFC70386038407040F040E041C003C0038007000F040E041C043C0C
380870087038FFF80E127F9112>I<FFFFF01401808B15>I<FFFFFFFFFF802901808B2A>
I<6060F0F0F0F060600C047C9C15>127 D E /FO 66 124 df<003FE3F801F03F1C03C0
3E3E07C07C3E0F807C3E0F807C1C0F807C000F807C000F807C000F807C000F807C00FFFF
FFC0FFFFFFC00F807C000F807C000F807C000F807C000F807C000F807C000F807C000F80
7C000F807C000F807C000F807C000F807C000F807C000F807C007FE1FF807FE1FF801F1D
809C1C>11 D<003FC00001F0300003C0380007C07C000F807C000F807C000F8038000F80
00000F8000000F8000000F800000FFFFFC00FFFFFC000F807C000F807C000F807C000F80
7C000F807C000F807C000F807C000F807C000F807C000F807C000F807C000F807C000F80
7C000F807C007FE1FF807FE1FF80191D809C1B>I<003FFC0001F07C0003C07C0007C07C
000F807C000F807C000F807C000F807C000F807C000F807C000F807C00FFFFFC00FFFFFC
000F807C000F807C000F807C000F807C000F807C000F807C000F807C000F807C000F807C
000F807C000F807C000F807C000F807C000F807C007FF3FF807FF3FF80191D809C1B>I<
78FCFCFEFE7A0202040408081060070E7D9C0D>39 D<70F8FCFCFC7C0404080808102040
060E7D850D>44 D<FFF8FFF8FFF8FFF80D04808A10>I<78FCFCFCFC7806067D850D>I<03
F8000F1E001C07003C07803803807803C07803C07803C0F803E0F803E0F803E0F803E0F8
03E0F803E0F803E0F803E0F803E0F803E0F803E0F803E07803C07803C03803803C07801C
07000F1E0003F800131B7E9A18>48 D<00600001E0000FE000FFE000F3E00003E00003E0
0003E00003E00003E00003E00003E00003E00003E00003E00003E00003E00003E00003E0
0003E00003E00003E00003E00003E00003E0007FFF807FFF80111B7D9A18>I<07F8001F
FE00383F80780FC0FC07C0FC07E0FC03E0FC03E07803E00007E00007C00007C0000F8000
1F00001E0000380000700000E0000180600300600600600800E01FFFC03FFFC07FFFC0FF
FFC0FFFFC0131B7E9A18>I<07F8001FFE003C1F003C0F807C07C07E07C07C07C03807C0
000F80000F80001E00003C0003F800001E00000F800007C00007C00007E03007E07807E0
FC07E0FC07E0FC07C0780F80781F001FFE0007F800131B7E9A18>I<0001800003800007
80000F80001F80003F80006F8000CF80008F80018F80030F80060F800C0F80180F80300F
80600F80C00F80FFFFF8FFFFF8000F80000F80000F80000F80000F80000F8000FFF800FF
F8151B7F9A18>I<3801803FFF003FFE003FFC003FF8003FC00030000030000030000030
000031F800361E00380F803007800007C00007E00007E00007E07807E0F807E0F807E0F8
07C0F007C0600F80381F001FFE0007F000131B7E9A18>I<007E0003FF000781800F03C0
1E07C03C07C07C0380780000780000F80000F8F800FB0E00FA0780FC0380FC03C0F803E0
F803E0F803E0F803E07803E07803E07803C03C03C03C07801E0F0007FE0003F800131B7E
9A18>I<6000007FFFE07FFFE07FFFC07FFF807FFF80E00300C00600C00C00C018000030
0000300000600000E00000E00001E00001C00003C00003C00003C00003C00007C00007C0
0007C00007C00007C00007C000038000131C7D9B18>I<03F8000FFE001E0F8038078038
03C07803C07C03C07E03C07F83803FC7003FFE001FFC000FFE0007FF001DFF80387FC078
1FE0700FE0F003E0F001E0F001E0F001E07801C07803803E07801FFE0003F800131B7E9A
18>I<03F8000FFE001E0F003C07807807807803C0F803C0F803C0F803E0F803E0F803E0
F803E07807E03807E03C0BE00E1BE003E3E00003E00003C00003C03807C07C07807C0700
780F00383C001FF8000FE000131B7E9A18>I<78FCFCFCFC7800000000000078FCFCFCFC
7806127D910D>I<0FF0303C601EF01FF81FF81F701F003E003C007000E001C001800180
03000300030003000300000000000000000007800FC00FC00FC00FC00780101D7D9C17>
63 D<00038000000380000007C0000007C0000007C000000FE000000FE000001FF00000
1BF000003BF8000031F8000031F8000060FC000060FC0000E0FE0000C07E0000C07E0001
803F0001FFFF0003FFFF8003001F8007001FC006000FC006000FC00C0007E00C0007E0FF
803FFEFF803FFE1F1C7E9B24>65 D<FFFFF800FFFFFF000FC01F800FC00FC00FC007C00F
C007E00FC007E00FC007E00FC007E00FC007E00FC007C00FC00F800FC03F000FFFFE000F
C00F800FC007C00FC003E00FC003E00FC003F00FC003F00FC003F00FC003F00FC003F00F
C007E00FC007E00FC01FC0FFFFFF00FFFFFC001C1C7E9B22>I<001FE02000FFF8E003F8
0FE007C003E00F8001E01F0000E03E0000E03E0000607E0000607C000060FC000000FC00
0000FC000000FC000000FC000000FC000000FC000000FC0000007C0000607E0000603E00
00603E0000C01F0000C00F80018007C0030003F80E0000FFFC00001FE0001B1C7D9B22>
I<FFFFF800FFFFFF000FC01FC00FC007E00FC001F00FC001F80FC000F80FC000FC0FC000
7C0FC0007C0FC0007E0FC0007E0FC0007E0FC0007E0FC0007E0FC0007E0FC0007E0FC000
7E0FC0007C0FC0007C0FC0007C0FC000F80FC000F80FC001F00FC007E00FC01FC0FFFFFF
00FFFFF8001F1C7E9B25>I<FFFFFF00FFFFFF000FC01F000FC007000FC003000FC00380
0FC003800FC0C1800FC0C1800FC0C1800FC1C0000FC3C0000FFFC0000FFFC0000FC3C000
0FC1C0000FC0C0000FC0C0600FC0C0600FC000E00FC000C00FC000C00FC001C00FC001C0
0FC003C00FC00F80FFFFFF80FFFFFF801B1C7E9B1F>I<FFFFFF00FFFFFF000FC01F000F
C007000FC003000FC003800FC003800FC001800FC0C1800FC0C1800FC0C0000FC1C0000F
C3C0000FFFC0000FFFC0000FC3C0000FC1C0000FC0C0000FC0C0000FC0C0000FC000000F
C000000FC000000FC000000FC000000FC00000FFFE0000FFFE0000191C7E9B1E>I<000F
F008007FFE3801FC07F807E001F80F8000781F0000783F0000383E0000387E0000187C00
0018FC000000FC000000FC000000FC000000FC000000FC000000FC007FFFFC007FFF7C00
01F87E0001F83E0001F83F0001F81F0001F80F8001F807E001F801FC07F8007FFE78000F
F818201C7D9B26>I<FFFC3FFFFFFC3FFF0FC003F00FC003F00FC003F00FC003F00FC003
F00FC003F00FC003F00FC003F00FC003F00FC003F00FFFFFF00FFFFFF00FC003F00FC003
F00FC003F00FC003F00FC003F00FC003F00FC003F00FC003F00FC003F00FC003F00FC003
F00FC003F0FFFC3FFFFFFC3FFF201C7E9B25>I<FFFCFFFC0FC00FC00FC00FC00FC00FC0
0FC00FC00FC00FC00FC00FC00FC00FC00FC00FC00FC00FC00FC00FC00FC00FC00FC00FC0
FFFCFFFC0E1C7E9B12>I<FFFE00FFFE000FC0000FC0000FC0000FC0000FC0000FC0000F
C0000FC0000FC0000FC0000FC0000FC0000FC0000FC0000FC0000FC0030FC0030FC0030F
C0070FC0070FC0060FC00E0FC01E0FC07EFFFFFEFFFFFE181C7E9B1D>76
D<FFC00003FFFFE00007FF0FE00007F00DF0000DF00DF0000DF00DF0000DF00CF80019F0
0CF80019F00C7C0031F00C7C0031F00C3E0061F00C3E0061F00C1F00C1F00C1F00C1F00C
1F00C1F00C0F8181F00C0F8181F00C07C301F00C07C301F00C03E601F00C03E601F00C01
FC01F00C01FC01F00C01FC01F00C00F801F00C00F801F0FFC0701FFFFFC0701FFF281C7E
9B2D>I<FFE003FFFFE003FF0FF000300FF800300DFC00300CFE00300C7E00300C3F0030
0C1F80300C1FC0300C0FE0300C07F0300C03F0300C01F8300C01FC300C00FE300C007F30
0C003F300C001FB00C001FF00C000FF00C0007F00C0003F00C0001F00C0000F00C0000F0
FFC00070FFC00030201C7E9B25>I<003FE00001F07C0003C01E000F800F801F0007C01E
0003C03E0003E07E0003F07C0001F07C0001F0FC0001F8FC0001F8FC0001F8FC0001F8FC
0001F8FC0001F8FC0001F8FC0001F87C0001F07E0003F07E0003F03E0003E03F0007E01F
0007C00F800F8003C01E0001F07C00003FE0001D1C7D9B24>I<FFFFF800FFFFFE000FC0
3F800FC00F800FC007C00FC007E00FC007E00FC007E00FC007E00FC007E00FC007C00FC0
07C00FC00F800FC03F000FFFFC000FC000000FC000000FC000000FC000000FC000000FC0
00000FC000000FC000000FC000000FC000000FC00000FFFC0000FFFC00001B1C7E9B21>
I<FFFFF00000FFFFFE00000FC03F00000FC00F80000FC007C0000FC007E0000FC007E000
0FC007E0000FC007E0000FC007E0000FC007C0000FC00F80000FC03E00000FFFF000000F
C07C00000FC03E00000FC03F00000FC01F80000FC01F80000FC01F80000FC01F80000FC0
1F80000FC01F80000FC01F81800FC01F81800FC00FC180FFFC07C300FFFC01FE00211C7E
9B24>82 D<07F8201FFEE03C07E07801E07000E0F000E0F00060F00060F80000FE0000FF
E0007FFE003FFF003FFF800FFFC007FFE0007FE00003F00001F00000F0C000F0C000F0C0
00E0E000E0F001C0FC03C0EFFF0083FC00141C7D9B1B>I<7FFFFFE07FFFFFE0781F81E0
701F80E0601F8060E01F8070C01F8030C01F8030C01F8030C01F8030001F8000001F8000
001F8000001F8000001F8000001F8000001F8000001F8000001F8000001F8000001F8000
001F8000001F8000001F8000001F8000001F800007FFFE0007FFFE001C1C7E9B21>I<FF
FC03FFFFFC03FF0FC000300FC000300FC000300FC000300FC000300FC000300FC000300F
C000300FC000300FC000300FC000300FC000300FC000300FC000300FC000300FC000300F
C000300FC000300FC0003007C0003007C0006003E000E001F001C000FC0780007FFE0000
0FF800201C7E9B25>I<FFFC01FF80FFFC01FF800FC00018000FE000380007E000300007
F000700003F000600003F800600001F800C00001F800C00000FC01800000FC01800000FE
038000007E030000007F070000003F060000003F860000001F8C0000001F8C0000000FD8
0000000FD80000000FF800000007F000000007F000000003E000000003E000000001C000
000001C00000211C7F9B24>I<FFF87FFE0FFCFFF87FFE0FFC0FC007E000C00FC007F000
C00FE003F001C007E003F0018007E007F8018007F007F8038003F00FFC030003F00CFC03
0001F80CFC060001F81CFE060001FC187E0E0000FC187E0C0000FC303F0C0000FE303F1C
00007E703F9800007E601F9800003F601FB000003FE01FF000003FC00FF000001FC00FE0
00001F8007E000001F8007E000000F8007C000000F0003C0000007000380000007000380
002E1C7F9B31>I<0FF8001C1E003E0F803E07803E07C01C07C00007C0007FC007E7C01F
07C03C07C07C07C0F807C0F807C0F807C0780BC03E13F80FE1F815127F9117>97
D<FF0000FF00001F00001F00001F00001F00001F00001F00001F00001F00001F00001F3F
801FE1E01F80701F00781F003C1F003C1F003E1F003E1F003E1F003E1F003E1F003E1F00
3C1F003C1F00781F80701EC1E01C3F00171D7F9C1B>I<03FC000E0E001C1F003C1F0078
1F00780E00F80000F80000F80000F80000F80000F800007800007801803C01801C03000E
0E0003F80011127E9115>I<000FF0000FF00001F00001F00001F00001F00001F00001F0
0001F00001F00001F001F9F00F07F01C03F03C01F07801F07801F0F801F0F801F0F801F0
F801F0F801F0F801F07801F07801F03C01F01C03F00F0FFE03F9FE171D7E9C1B>I<03FC
000F07001C03803C01C07801C07801E0F801E0F801E0FFFFE0F80000F80000F800007800
007800603C00601E00C00F038001FC0013127F9116>I<007F0001E38003C7C00787C00F
87C00F83800F80000F80000F80000F80000F8000FFF800FFF8000F80000F80000F80000F
80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F80007FF0007F
F000121D809C0F>I<03F0F00E1F383C0F38380730780780780780780780780780380700
3C0F001E1C0033F0003000003000003000003FFF003FFFC01FFFE01FFFF07801F8F00078
F00078F000787000707800F01E03C007FF00151B7F9118>I<FF0000FF00001F00001F00
001F00001F00001F00001F00001F00001F00001F00001F0FC01F31E01F40F01F80F81F80
F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F8FFE7
FFFFE7FF181D7F9C1B>I<1E003F003F003F003F001E000000000000000000000000007F
007F001F001F001F001F001F001F001F001F001F001F001F001F001F001F00FFC0FFC00A
1E7F9D0E>I<007800FC00FC00FC00FC007800000000000000000000000003FC03FC007C
007C007C007C007C007C007C007C007C007C007C007C007C007C007C007C007C007C707C
F87CF878F8F070E01F800E26839D0F>I<FF0000FF00001F00001F00001F00001F00001F
00001F00001F00001F00001F00001F03FC1F03FC1F01C01F03001F0E001F1C001F38001F
78001FFC001FBE001F1F001F0F001F0F801F07C01F03E01F01E0FFE7FEFFE7FE171D7F9C
19>I<FF00FF001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F
001F001F001F001F001F001F001F001F001F001F00FFE0FFE00B1D7F9C0E>I<FF0FC07E
00FF31E18F001F40F207801F80FC07C01F80FC07C01F00F807C01F00F807C01F00F807C0
1F00F807C01F00F807C01F00F807C01F00F807C01F00F807C01F00F807C01F00F807C01F
00F807C0FFE7FF3FF8FFE7FF3FF825127F9128>I<FF0FC0FF31E01F40F01F80F81F80F8
1F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F8FFE7FF
FFE7FF18127F911B>I<01FC000F07801C01C03C01E07800F07800F0F800F8F800F8F800
F8F800F8F800F8F800F87800F07800F03C01E01E03C00F078001FC0015127F9118>I<FF
3F80FFE1E01F80F01F00781F007C1F003C1F003E1F003E1F003E1F003E1F003E1F003E1F
003C1F007C1F00781F80F01FC1E01F3F001F00001F00001F00001F00001F00001F0000FF
E000FFE000171A7F911B>I<03F0600F0CE01E07E03C03E07C03E07803E0F803E0F803E0
F803E0F803E0F803E0F803E07803E07C03E03C03E01C07E00E0FE003F3E00003E00003E0
0003E00003E00003E00003E0001FFC001FFC161A7E9119>I<FE3E00FE47001E8F801E8F
801E8F801F07001F00001F00001F00001F00001F00001F00001F00001F00001F00001F00
00FFE000FFE00011127F9114>I<1FD830786018E018E018F000FF807FE07FF01FF807FC
007CC01CC01CE01CE018F830CFC00E127E9113>I<0300030003000300070007000F000F
003FFCFFFC1F001F001F001F001F001F001F001F001F001F0C1F0C1F0C1F0C0F08079803
F00E1A7F9913>I<FF07F8FF07F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F
00F81F00F81F00F81F00F81F00F81F01F80F01F80786FF01F8FF18127F911B>I<FFC1FC
FFC1FC1F00601F80600F80C00F80C007C18007C18003E30003E30003F70001F60001FE00
00FC0000FC0000780000780000300016127F9119>I<FF8FF8FEFF8FF8FE1F03E0301F03
E0301F03E0300F87F0600F86F0600FC6F8E007CC78C007CC78C003FC7D8003F83D8003F8
3F8001F01F0001F01F0000F01E0000E00E0000E00E001F127F9122>I<FFC7FCFFC7FC1F
81C00F838007C70003EE0001FC0001F80000F800007C0000FE0001DF00039F80070F8006
07C00C03E0FF07FCFF07FC16127F9119>I<FFC1FCFFC1FC1F00601F80600F80C00F80C0
07C18007C18003E30003E30003F70001F60001FE0000FC0000FC00007800007800003000
003000006000706000F8E000F8C000F980007300003E0000161A7F9119>I<7FFF80781F
00703F00603E00607C0060FC0060F80001F00003F00007E00007C1800F81801F81801F03
803E03007E07007C0F00FFFF0011127F9115>I<FFFFFE1701808B18>I
E /FP 38 123 df<0000000FFF87E000000001FFFFFFE00000000FFFFFFFE00000003FFC
00FFE0000000FFE000FFE0000003FF8001FFE0000007FE0003FFE000000FFC0003FFE000
001FFC0003FFE000001FF80003FFE000003FF80003FFE000003FF00001FFE000007FF000
00FFE000007FF00000FFE000007FF00000FFE000007FF00000FFE000007FF00000FFE000
007FF00000FFE000007FF00000FFE000007FF00000FFE000007FF00000FFE000007FF000
00FFE000007FF00000FFE000007FF00000FFE000007FF00000FFE000007FF00000FFE000
FFFFFFFFFFFFE000FFFFFFFFFFFFE000FFFFFFFFFFFFE000FFFFFFFFFFFFE000007FF000
00FFE000007FF00000FFE000007FF00000FFE000007FF00000FFE000007FF00000FFE000
007FF00000FFE000007FF00000FFE000007FF00000FFE000007FF00000FFE000007FF000
00FFE000007FF00000FFE000007FF00000FFE000007FF00000FFE000007FF00000FFE000
007FF00000FFE000007FF00000FFE000007FF00000FFE000007FF00000FFE000007FF000
00FFE000007FF00000FFE000007FF00000FFE000007FF00000FFE000007FF00000FFE000
007FF00000FFE000007FF00000FFE000007FF00000FFE000007FF00000FFE000007FF000
00FFE000007FF00000FFE000007FF00000FFE000007FF00000FFE000007FF00000FFE000
007FF00000FFE000007FF00000FFE000007FF00000FFE000007FF00000FFE000007FF000
00FFE000007FF00000FFE0003FFFFFE07FFFFFC03FFFFFE07FFFFFC03FFFFFE07FFFFFC0
3FFFFFE07FFFFFC03A487EC741>13 D<FFFFFFFEFFFFFFFEFFFFFFFEFFFFFFFEFFFFFFFE
FFFFFFFEFFFFFFFEFFFFFFFEFFFFFFFE1F097F9B27>45 D<0000000007C0000000000000
00000FE000000000000000000FE000000000000000001FF000000000000000001FF00000
0000000000001FF000000000000000003FF800000000000000003FF80000000000000000
7FFC00000000000000007FFC00000000000000007FFC0000000000000000FFFE00000000
00000000FFFE0000000000000001FFFF0000000000000001FFFF0000000000000001FFFF
0000000000000003FFFF8000000000000003FFFF8000000000000007FFFFC00000000000
0007DFFFC000000000000007CFFFC00000000000000FCFFFE00000000000000F87FFE000
00000000001F87FFF00000000000001F07FFF00000000000001F03FFF00000000000003F
03FFF80000000000003E01FFF80000000000007E01FFFC0000000000007C01FFFC000000
0000007C00FFFC000000000000FC00FFFE000000000000F8007FFE000000000001F8007F
FF000000000001F0007FFF000000000001F0003FFF000000000003F0003FFF8000000000
03E0001FFF800000000007E0001FFFC00000000007C0001FFFC00000000007C0000FFFC0
000000000FC0000FFFE0000000000F800007FFE0000000001F800007FFF0000000001F00
0007FFF0000000001F000003FFF0000000003F000003FFF8000000003E000001FFF80000
00007FFFFFFFFFFC000000007FFFFFFFFFFC000000007FFFFFFFFFFC00000000FFFFFFFF
FFFE00000000F80000007FFE00000001F80000007FFF00000001F00000003FFF00000001
F00000003FFF00000003F00000003FFF80000003E00000001FFF80000007E00000001FFF
C0000007C00000000FFFC0000007C00000000FFFC000000F800000000FFFE000000F8000
000007FFE000001F8000000007FFF000001F0000000003FFF000001F0000000003FFF000
003E0000000003FFF80000FFC000000001FFF800FFFFFF800007FFFFFFFEFFFFFF800007
FFFFFFFEFFFFFF800007FFFFFFFEFFFFFF800007FFFFFFFE4F487CC758>65
D<FFFFFFFFFFFFC00000FFFFFFFFFFFFFC0000FFFFFFFFFFFFFF8000FFFFFFFFFFFFFFE0
00001FFF000003FFF800001FFF000000FFFC00001FFF0000003FFE00001FFF0000001FFF
00001FFF0000001FFF80001FFF0000000FFFC0001FFF00000007FFC0001FFF00000007FF
E0001FFF00000007FFE0001FFF00000003FFE0001FFF00000003FFF0001FFF00000003FF
F0001FFF00000003FFF0001FFF00000003FFF0001FFF00000003FFF0001FFF00000003FF
F0001FFF00000003FFF0001FFF00000003FFF0001FFF00000007FFE0001FFF00000007FF
E0001FFF00000007FFC0001FFF0000000FFFC0001FFF0000000FFF80001FFF0000001FFF
00001FFF0000003FFE00001FFF0000007FFC00001FFF000000FFF800001FFF000003FFE0
00001FFF00007FFF8000001FFFFFFFFFFC0000001FFFFFFFFFFF8000001FFFFFFFFFFFF0
00001FFF0000007FFC00001FFF0000001FFF00001FFF00000007FF80001FFF00000003FF
C0001FFF00000003FFE0001FFF00000001FFF0001FFF00000000FFF8001FFF00000000FF
FC001FFF00000000FFFC001FFF000000007FFE001FFF000000007FFE001FFF000000007F
FE001FFF000000007FFF001FFF000000007FFF001FFF000000007FFF001FFF000000007F
FF001FFF000000007FFF001FFF000000007FFF001FFF000000007FFF001FFF000000007F
FF001FFF000000007FFE001FFF000000007FFE001FFF00000000FFFE001FFF00000000FF
FC001FFF00000001FFFC001FFF00000001FFF8001FFF00000003FFF0001FFF00000007FF
E0001FFF0000000FFFC0001FFF0000003FFF80001FFF000001FFFF00FFFFFFFFFFFFFFFC
00FFFFFFFFFFFFFFF000FFFFFFFFFFFFFF8000FFFFFFFFFFFFF8000048477CC653>I<00
0000007FFE0000060000000FFFFFC0001E0000007FFFFFF8003E000003FFFFFFFE007E00
000FFFF800FF80FE00003FFF80001FC1FE0000FFFC000007F3FE0001FFF0000001FFFE00
07FFC00000007FFE000FFF000000003FFE001FFE000000001FFE003FFC000000000FFE00
7FF80000000007FE00FFF00000000007FE01FFF00000000003FE01FFE00000000001FE03
FFE00000000001FE07FFC00000000000FE07FFC00000000000FE0FFF800000000000FE0F
FF8000000000007E1FFF8000000000007E1FFF0000000000007E3FFF0000000000003E3F
FF0000000000003E3FFF0000000000003E7FFF0000000000003E7FFE000000000000007F
FE000000000000007FFE00000000000000FFFE00000000000000FFFE00000000000000FF
FE00000000000000FFFE00000000000000FFFE00000000000000FFFE00000000000000FF
FE00000000000000FFFE00000000000000FFFE00000000000000FFFE00000000000000FF
FE00000000000000FFFE00000000000000FFFE000000000000007FFE000000000000007F
FE000000000000007FFE000000000000007FFF000000000000003FFF0000000000001E3F
FF0000000000001E3FFF0000000000001E1FFF0000000000001E1FFF8000000000001E0F
FF8000000000003E0FFF8000000000003C07FFC000000000003C07FFC000000000003C03
FFE000000000007801FFE000000000007801FFF00000000000F000FFF00000000001F000
7FF80000000001E0003FFC0000000003C0001FFE000000000780000FFF800000000F0000
07FFC00000003E000001FFF00000007C000000FFFC000001F80000003FFF80000FF00000
000FFFF8007FC000000003FFFFFFFF00000000007FFFFFFC00000000000FFFFFE0000000
0000007FFE00000047497AC754>I<FFFFFFFFFFFF80000000FFFFFFFFFFFFFC000000FF
FFFFFFFFFFFF800000FFFFFFFFFFFFFFE00000001FFF80000FFFF80000001FFF800000FF
FE0000001FFF8000001FFF0000001FFF80000007FFC000001FFF80000003FFE000001FFF
80000001FFF000001FFF800000007FF800001FFF800000007FFC00001FFF800000003FFE
00001FFF800000001FFE00001FFF800000000FFF00001FFF800000000FFF80001FFF8000
000007FF80001FFF8000000007FFC0001FFF8000000007FFC0001FFF8000000003FFE000
1FFF8000000003FFE0001FFF8000000003FFF0001FFF8000000001FFF0001FFF80000000
01FFF0001FFF8000000001FFF0001FFF8000000001FFF8001FFF8000000001FFF8001FFF
8000000001FFF8001FFF8000000001FFF8001FFF8000000001FFFC001FFF8000000001FF
FC001FFF8000000001FFFC001FFF8000000001FFFC001FFF8000000001FFFC001FFF8000
000001FFFC001FFF8000000001FFFC001FFF8000000001FFFC001FFF8000000001FFFC00
1FFF8000000001FFFC001FFF8000000001FFFC001FFF8000000001FFFC001FFF80000000
01FFFC001FFF8000000001FFFC001FFF8000000001FFF8001FFF8000000001FFF8001FFF
8000000001FFF8001FFF8000000001FFF8001FFF8000000001FFF0001FFF8000000001FF
F0001FFF8000000003FFF0001FFF8000000003FFE0001FFF8000000003FFE0001FFF8000
000003FFE0001FFF8000000007FFC0001FFF8000000007FFC0001FFF800000000FFF8000
1FFF800000000FFF00001FFF800000001FFF00001FFF800000001FFE00001FFF80000000
3FFC00001FFF800000007FF800001FFF80000000FFF000001FFF80000003FFE000001FFF
80000007FFC000001FFF8000001FFF8000001FFF8000007FFE0000001FFF800007FFFC00
00FFFFFFFFFFFFFFF00000FFFFFFFFFFFFFF800000FFFFFFFFFFFFFC000000FFFFFFFFFF
FF800000004E477CC659>I<FFFFFFFFFFFFFFFC00FFFFFFFFFFFFFFFC00FFFFFFFFFFFF
FFFC00FFFFFFFFFFFFFFFC00001FFF800001FFFE00001FFF8000001FFE00001FFF800000
07FE00001FFF80000003FE00001FFF80000001FE00001FFF80000000FE00001FFF800000
007E00001FFF800000003E00001FFF800000003F00001FFF800000001F00001FFF800000
001F00001FFF800000001F00001FFF800000000F00001FFF800000000F00001FFF800000
000F00001FFF800000000F00001FFF800078000780001FFF800078000780001FFF800078
000780001FFF800078000780001FFF800078000000001FFF800078000000001FFF8000F8
000000001FFF8000F8000000001FFF8000F8000000001FFF8001F8000000001FFF8003F8
000000001FFF801FF8000000001FFFFFFFF8000000001FFFFFFFF8000000001FFFFFFFF8
000000001FFFFFFFF8000000001FFF801FF8000000001FFF8003F8000000001FFF8001F8
000000001FFF8000F8000000001FFF8000F8000000001FFF8000F8000000001FFF800078
000000001FFF800078000000001FFF8000780000F0001FFF8000780000F0001FFF800078
0000F0001FFF8000780001E0001FFF8000000001E0001FFF8000000001E0001FFF800000
0001E0001FFF8000000001E0001FFF8000000003E0001FFF8000000003E0001FFF800000
0003C0001FFF8000000007C0001FFF8000000007C0001FFF8000000007C0001FFF800000
000FC0001FFF800000001FC0001FFF800000001FC0001FFF800000003F80001FFF800000
007F80001FFF80000000FF80001FFF80000003FF80001FFF8000000FFF80001FFF800000
FFFF80FFFFFFFFFFFFFFFF80FFFFFFFFFFFFFFFF00FFFFFFFFFFFFFFFF00FFFFFFFFFFFF
FFFF0044477CC64C>I<000000007FFC00000C000000000FFFFFC0003C00000000FFFFFF
F0007C00000003FFFFFFFC00FC0000001FFFF001FF01FC0000003FFF00003FC3FC000000
FFF8000007E7FC000003FFE0000003FFFC000007FFC0000000FFFC00000FFF000000007F
FC00001FFE000000003FFC00003FFC000000001FFC00007FF8000000000FFC0000FFF000
0000000FFC0001FFF00000000007FC0003FFE00000000003FC0003FFE00000000003FC00
07FFC00000000001FC0007FFC00000000001FC000FFF800000000001FC001FFF80000000
0000FC001FFF800000000000FC001FFF000000000000FC003FFF0000000000007C003FFF
0000000000007C003FFF0000000000007C007FFF0000000000007C007FFE000000000000
00007FFE00000000000000007FFE0000000000000000FFFE0000000000000000FFFE0000
000000000000FFFE0000000000000000FFFE0000000000000000FFFE0000000000000000
FFFE0000000000000000FFFE0000000000000000FFFE0000000000000000FFFE00000000
00000000FFFE0000000000000000FFFE0000000000000000FFFE0000000000000000FFFE
00000000000000007FFE0000003FFFFFFFFC7FFE0000003FFFFFFFFC7FFE0000003FFFFF
FFFC7FFF0000003FFFFFFFFC3FFF0000000000FFFC003FFF0000000000FFFC003FFF0000
000000FFFC001FFF0000000000FFFC001FFF8000000000FFFC001FFF8000000000FFFC00
0FFF8000000000FFFC0007FFC000000000FFFC0007FFC000000000FFFC0003FFE0000000
00FFFC0003FFE000000000FFFC0001FFF000000000FFFC0000FFF000000000FFFC00007F
F800000000FFFC00003FFC00000000FFFC00001FFE00000000FFFC00000FFF00000001FF
FC000007FFC0000001FFFC000003FFF0000003FFFC000000FFFC00000FCFFC0000003FFF
80001F87FC0000001FFFF800FF03FC00000003FFFFFFFE00FC00000000FFFFFFF8003C00
0000000FFFFFE0000C00000000007FFE000000004E497AC75B>71
D<FFFFFFFFF0FFFFFFFFF0FFFFFFFFF0FFFFFFFFF0001FFF8000001FFF8000001FFF8000
001FFF8000001FFF8000001FFF8000001FFF8000001FFF8000001FFF8000001FFF800000
1FFF8000001FFF8000001FFF8000001FFF8000001FFF8000001FFF8000001FFF8000001F
FF8000001FFF8000001FFF8000001FFF8000001FFF8000001FFF8000001FFF8000001FFF
8000001FFF8000001FFF8000001FFF8000001FFF8000001FFF8000001FFF8000001FFF80
00001FFF8000001FFF8000001FFF8000001FFF8000001FFF8000001FFF8000001FFF8000
001FFF8000001FFF8000001FFF8000001FFF8000001FFF8000001FFF8000001FFF800000
1FFF8000001FFF8000001FFF8000001FFF8000001FFF8000001FFF8000001FFF8000001F
FF8000001FFF8000001FFF8000001FFF8000001FFF8000001FFF8000001FFF8000001FFF
8000001FFF8000001FFF8000FFFFFFFFF0FFFFFFFFF0FFFFFFFFF0FFFFFFFFF024477DC6
2B>73 D<FFFFFFFFFE000000FFFFFFFFFE000000FFFFFFFFFE000000FFFFFFFFFE000000
001FFF8000000000001FFF8000000000001FFF8000000000001FFF8000000000001FFF80
00000000001FFF8000000000001FFF8000000000001FFF8000000000001FFF8000000000
001FFF8000000000001FFF8000000000001FFF8000000000001FFF8000000000001FFF80
00000000001FFF8000000000001FFF8000000000001FFF8000000000001FFF8000000000
001FFF8000000000001FFF8000000000001FFF8000000000001FFF8000000000001FFF80
00000000001FFF8000000000001FFF8000000000001FFF8000000000001FFF8000000000
001FFF8000000000001FFF8000000000001FFF8000000000001FFF8000000000001FFF80
00000000001FFF8000000000001FFF8000000000001FFF8000000000001FFF8000000000
001FFF8000000000001FFF8000000000001FFF8000000000001FFF8000000000001FFF80
000000F0001FFF80000000F0001FFF80000000F0001FFF80000000F0001FFF80000001E0
001FFF80000001E0001FFF80000001E0001FFF80000001E0001FFF80000003E0001FFF80
000003E0001FFF80000003E0001FFF80000007E0001FFF80000007E0001FFF80000007C0
001FFF8000000FC0001FFF8000001FC0001FFF8000001FC0001FFF8000003FC0001FFF80
00007FC0001FFF800001FFC0001FFF800003FFC0001FFF80000FFFC0001FFF8000FFFF80
FFFFFFFFFFFFFF80FFFFFFFFFFFFFF80FFFFFFFFFFFFFF80FFFFFFFFFFFFFF803C477CC6
46>76 D<FFFFFF8000000000001FFFFFF8FFFFFFC000000000003FFFFFF8FFFFFFC00000
0000003FFFFFF8FFFFFFE000000000007FFFFFF8001FFFE000000000007FFFC000001FFF
E000000000007FFFC000001EFFF00000000000F7FFC000001EFFF00000000000F7FFC000
001E7FF80000000001E7FFC000001E7FF80000000001E7FFC000001E3FFC0000000003C7
FFC000001E3FFC0000000003C7FFC000001E3FFC0000000003C7FFC000001E1FFE000000
000787FFC000001E1FFE000000000787FFC000001E0FFF000000000F07FFC000001E0FFF
000000000F07FFC000001E07FF800000001E07FFC000001E07FF800000001E07FFC00000
1E03FFC00000003C07FFC000001E03FFC00000003C07FFC000001E03FFC00000003C07FF
C000001E01FFE00000007807FFC000001E01FFE00000007807FFC000001E00FFF0000000
F007FFC000001E00FFF0000000F007FFC000001E007FF8000001E007FFC000001E007FF8
000001E007FFC000001E007FF8000001E007FFC000001E003FFC000003C007FFC000001E
003FFC000003C007FFC000001E001FFE0000078007FFC000001E001FFE0000078007FFC0
00001E000FFF00000F0007FFC000001E000FFF00000F0007FFC000001E0007FF80001E00
07FFC000001E0007FF80001E0007FFC000001E0007FF80001E0007FFC000001E0003FFC0
003C0007FFC000001E0003FFC0003C0007FFC000001E0001FFE000780007FFC000001E00
01FFE000780007FFC000001E0000FFF000F00007FFC000001E0000FFF000F00007FFC000
001E0000FFF000F00007FFC000001E00007FF801E00007FFC000001E00007FF801E00007
FFC000001E00003FFC03C00007FFC000001E00003FFC03C00007FFC000001E00001FFE07
800007FFC000001E00001FFE07800007FFC000001E00001FFE07800007FFC000001E0000
0FFF0F000007FFC000001E00000FFF0F000007FFC000001E000007FF9E000007FFC00000
1E000007FF9E000007FFC000001E000003FFFC000007FFC000001E000003FFFC000007FF
C000001E000001FFF8000007FFC000001E000001FFF8000007FFC000001E000001FFF800
0007FFC000001E000000FFF0000007FFC000001E000000FFF0000007FFC000001E000000
7FE0000007FFC000001E0000007FE0000007FFC000001E0000003FC0000007FFC000007F
8000003FC0000007FFC000FFFFFFC0003FC0003FFFFFFFF8FFFFFFC0001F80003FFFFFFF
F8FFFFFFC0001F80003FFFFFFFF8FFFFFFC0000F00003FFFFFFFF865477CC66E>I<0000
0003FFF0000000000000007FFFFF80000000000003FFFFFFF000000000000FFF003FFC00
000000003FF80007FF0000000000FFE00001FFC000000003FF8000007FF000000007FF00
00003FF80000000FFE0000001FFC0000001FFC0000000FFE0000003FF800000007FF0000
007FF000000003FF800000FFF000000003FFC00001FFE000000001FFE00003FFE0000000
01FFF00003FFC000000000FFF00007FFC000000000FFF80007FF80000000007FF8000FFF
80000000007FFC000FFF80000000007FFC001FFF00000000003FFE001FFF00000000003F
FE003FFF00000000003FFF003FFF00000000003FFF003FFF00000000003FFF007FFF0000
0000003FFF807FFE00000000001FFF807FFE00000000001FFF807FFE00000000001FFF80
7FFE00000000001FFF80FFFE00000000001FFFC0FFFE00000000001FFFC0FFFE00000000
001FFFC0FFFE00000000001FFFC0FFFE00000000001FFFC0FFFE00000000001FFFC0FFFE
00000000001FFFC0FFFE00000000001FFFC0FFFE00000000001FFFC0FFFE00000000001F
FFC0FFFE00000000001FFFC0FFFE00000000001FFFC0FFFE00000000001FFFC0FFFE0000
0000001FFFC07FFE00000000001FFF807FFF00000000003FFF807FFF00000000003FFF80
7FFF00000000003FFF803FFF00000000003FFF003FFF00000000003FFF003FFF00000000
003FFF001FFF80000000007FFE001FFF80000000007FFE001FFF80000000007FFE000FFF
C000000000FFFC000FFFC000000000FFFC0007FFC000000000FFF80003FFE000000001FF
F00003FFE000000001FFF00001FFF000000003FFE00000FFF800000007FFC000007FF800
000007FF8000007FFC0000000FFF8000003FFE0000001FFF0000000FFF0000003FFC0000
0007FFC00000FFF800000003FFE00001FFF000000000FFF80007FFC0000000007FFF807F
FF80000000000FFFFFFFFC000000000003FFFFFFF00000000000007FFFFF800000000000
0003FFF0000000004A497AC757>79 D<FFFFFFFFFFF80000000000FFFFFFFFFFFFE00000
0000FFFFFFFFFFFFFC00000000FFFFFFFFFFFFFF00000000001FFF80003FFFC000000000
1FFF800003FFF0000000001FFF800000FFF8000000001FFF8000007FFE000000001FFF80
00003FFF000000001FFF8000001FFF000000001FFF8000000FFF800000001FFF8000000F
FFC00000001FFF8000000FFFC00000001FFF80000007FFE00000001FFF80000007FFE000
00001FFF80000007FFF00000001FFF80000007FFF00000001FFF80000007FFF00000001F
FF80000007FFF00000001FFF80000007FFF00000001FFF80000007FFF00000001FFF8000
0007FFF00000001FFF80000007FFF00000001FFF80000007FFE00000001FFF80000007FF
E00000001FFF8000000FFFC00000001FFF8000000FFFC00000001FFF8000000FFF800000
001FFF8000001FFF000000001FFF8000003FFE000000001FFF8000007FFC000000001FFF
800000FFF0000000001FFF800007FFE0000000001FFF80003FFF80000000001FFFFFFFFF
FC00000000001FFFFFFFFFE000000000001FFFFFFFFFF000000000001FFF8000FFFC0000
0000001FFF80001FFF00000000001FFF80000FFF80000000001FFF800003FFE000000000
1FFF800003FFF0000000001FFF800001FFF0000000001FFF800000FFF8000000001FFF80
0000FFFC000000001FFF8000007FFC000000001FFF8000007FFC000000001FFF8000007F
FE000000001FFF8000007FFE000000001FFF8000007FFE000000001FFF8000007FFE0000
00001FFF8000007FFE000000001FFF8000007FFE000000001FFF8000007FFE000000001F
FF8000007FFF000000001FFF8000007FFF000000001FFF8000007FFF000000001FFF8000
007FFF000000001FFF8000007FFF000000001FFF8000007FFF000180001FFF8000007FFF
0003C0001FFF8000007FFF8003C0001FFF8000003FFF8003C0001FFF8000003FFF8003C0
001FFF8000001FFF800780001FFF8000001FFFC00780001FFF8000000FFFC00F00FFFFFF
FFF00007FFE01F00FFFFFFFFF00001FFF83E00FFFFFFFFF000007FFFFC00FFFFFFFFF000
001FFFF8000000000000000000FFC00052487CC657>82 D<00007FF00003000007FFFF00
0700001FFFFFE00F00007FFFFFF01F0000FFC00FFC3F0001FE0000FE7F0003F800003FFF
0007F000000FFF000FE0000007FF001FC0000003FF001FC0000001FF003FC0000000FF00
3F800000007F007F800000007F007F800000003F007F800000003F00FF800000001F00FF
800000001F00FFC00000001F00FFC00000001F00FFC00000000F00FFE00000000F00FFF0
0000000F00FFF80000000F00FFFE00000000007FFF80000000007FFFF8000000007FFFFF
800000003FFFFFFC0000003FFFFFFFC000001FFFFFFFF800000FFFFFFFFF000007FFFFFF
FF800007FFFFFFFFE00003FFFFFFFFF00001FFFFFFFFF800007FFFFFFFFC00003FFFFFFF
FE00000FFFFFFFFF000003FFFFFFFF0000007FFFFFFF80000003FFFFFFC00000003FFFFF
C000000001FFFFE0000000001FFFE00000000007FFE00000000003FFF00000000000FFF0
0000000000FFF070000000007FF0F0000000003FF0F0000000003FF0F0000000003FF0F0
000000001FF0F0000000001FF0F8000000001FF0F8000000001FE0F8000000001FE0FC00
0000001FE0FC000000001FC0FE000000003FC0FF000000003FC0FF000000003F80FFC000
00007F00FFE00000007F00FFF8000000FE00FFFE000003FC00FE7FC00007F800FC3FFC00
3FF000F80FFFFFFFC000F003FFFFFF0000E0007FFFFC0000C00003FFE0000034497AC741
>I<3FFFFFFFFFFFFFFFFC3FFFFFFFFFFFFFFFFC3FFFFFFFFFFFFFFFFC3FFFFFFFFFFFFF
FFFC3FFE0007FFE0007FFC3FF00007FFE0000FFC7FC00007FFE00003FE7F800007FFE000
01FE7F000007FFE00000FE7E000007FFE000007E7E000007FFE000007E7C000007FFE000
003E7C000007FFE000003E7C000007FFE000003E78000007FFE000001E78000007FFE000
001E78000007FFE000001E78000007FFE000001EF8000007FFE000001FF0000007FFE000
000FF0000007FFE000000FF0000007FFE000000FF0000007FFE000000FF0000007FFE000
000F00000007FFE000000000000007FFE000000000000007FFE000000000000007FFE000
000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE000
000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE000
000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE000
000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE000
000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE000
000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE000
000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE000
000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE000
000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE000
000000000007FFE000000000000007FFE00000000003FFFFFFFFFFC0000003FFFFFFFFFF
C0000003FFFFFFFFFFC0000003FFFFFFFFFFC00048467CC551>I<FFFFFFFF801FFFFFFF
E0001FFFFFE0FFFFFFFF801FFFFFFFE0001FFFFFE0FFFFFFFF801FFFFFFFE0001FFFFFE0
FFFFFFFF801FFFFFFFE0001FFFFFE0007FFE0000001FFFC00000003FF000007FFF000000
0FFFC000000007C000003FFF0000000FFFC0000000078000003FFF0000000FFFE0000000
078000003FFF80000007FFE00000000F8000001FFF80000007FFF00000000F0000001FFF
C0000007FFF00000000F0000000FFFC0000003FFF00000001E0000000FFFC0000003FFF8
0000001E0000000FFFE0000001FFF80000003E00000007FFE0000001FFF80000003C0000
0007FFE0000001FFFC0000003C00000007FFF0000001FFFC0000007C00000003FFF00000
01FFFE0000007800000003FFF8000003FFFE0000007800000001FFF8000003FFFE000000
F000000001FFF8000003FFFF000000F000000001FFFC000007BFFF000001F000000000FF
FC000007BFFF000001E000000000FFFC00000FBFFF800001E000000000FFFE00000F1FFF
800003E0000000007FFE00000F1FFFC00003C0000000007FFF00001F1FFFC00003C00000
00003FFF00001E0FFFC0000780000000003FFF00001E0FFFE0000780000000003FFF8000
3C07FFE0000F80000000001FFF80003C07FFE0000F00000000001FFF80007C07FFF0000F
00000000001FFFC0007803FFF0001F00000000000FFFC0007803FFF8001E00000000000F
FFE000F803FFF8001E000000000007FFE000F001FFF8003C000000000007FFE000F001FF
FC003C000000000007FFF001E000FFFC007C000000000003FFF001E000FFFC0078000000
000003FFF003E000FFFE0078000000000003FFF803C0007FFE00F8000000000001FFF803
C0007FFF00F0000000000001FFFC07C0007FFF00F0000000000000FFFC0780003FFF01E0
000000000000FFFC0780003FFF81E0000000000000FFFE0F00001FFF83E0000000000000
7FFE0F00001FFF83C00000000000007FFE1F00001FFFC3C00000000000007FFF1E00000F
FFC7C00000000000003FFF1E00000FFFE7800000000000003FFFBE00000FFFE780000000
0000001FFFBC000007FFEF000000000000001FFFBC000007FFFF000000000000001FFFF8
000003FFFF000000000000000FFFF8000003FFFE000000000000000FFFF8000003FFFE00
0000000000000FFFF0000001FFFE0000000000000007FFF0000001FFFC00000000000000
07FFF0000001FFFC0000000000000003FFE0000000FFF80000000000000003FFE0000000
FFF80000000000000003FFC00000007FF80000000000000001FFC00000007FF000000000
00000001FFC00000007FF00000000000000001FF800000003FF00000000000000000FF80
0000003FE00000000000000000FF800000003FE000000000000000007F000000001FC000
000000000000007F000000001FC000000000000000007E000000000FC000000000000000
003E000000000F8000000000000000003C0000000007800000000073487EC678>87
D<000FFFF000000000FFFFFF00000003FFFFFFC0000007F8007FF000000FFC001FFC0000
0FFC0007FE00001FFE0003FF00001FFE0003FF80001FFE0001FF80001FFE0001FFC0001F
FE0000FFC0000FFC0000FFE00007F80000FFE00003F00000FFE00000000000FFE0000000
0000FFE00000000000FFE00000000000FFE00000000000FFE0000000007FFFE00000003F
FFFFE0000003FFFFFFE000001FFFF0FFE000007FFE00FFE00001FFE000FFE00003FF8000
FFE0000FFE0000FFE0001FFC0000FFE0001FF80000FFE0003FF80000FFE0007FF00000FF
E0007FF00000FFE000FFE00000FFE000FFE00000FFE000FFE00000FFE000FFE00000FFE0
00FFE00001FFE000FFE00001FFE0007FF00003FFE0007FF000077FE0003FF8000F7FE000
1FFC003E7FF8000FFF80F83FFFE003FFFFF01FFFE000FFFFC00FFFE0000FFE0003FFE033
2E7CAD38>97 D<007FC000000000FFFFC000000000FFFFC000000000FFFFC000000000FF
FFC00000000003FFC00000000001FFC00000000001FFC00000000001FFC00000000001FF
C00000000001FFC00000000001FFC00000000001FFC00000000001FFC00000000001FFC0
0000000001FFC00000000001FFC00000000001FFC00000000001FFC00000000001FFC000
00000001FFC00000000001FFC00000000001FFC00000000001FFC00000000001FFC00000
000001FFC00000000001FFC01FFC000001FFC0FFFF800001FFC3FFFFF00001FFCFE01FFC
0001FFDF0003FE0001FFFC0001FF0001FFF80000FF8001FFF000007FC001FFE000003FE0
01FFC000003FF001FFC000001FF801FFC000001FF801FFC000001FFC01FFC000001FFC01
FFC000000FFE01FFC000000FFE01FFC000000FFE01FFC000000FFE01FFC000000FFF01FF
C000000FFF01FFC000000FFF01FFC000000FFF01FFC000000FFF01FFC000000FFF01FFC0
00000FFF01FFC000000FFF01FFC000000FFF01FFC000000FFF01FFC000000FFE01FFC000
000FFE01FFC000000FFE01FFC000000FFC01FFC000001FFC01FFC000001FFC01FFC00000
1FF801FFC000003FF001FFC000003FF001FFE000007FE001FFF000007FC001FFF80000FF
8001FF3C0001FF0001FE1F0007FE0001FC0FC03FF80001F803FFFFE00001F000FFFF8000
01E0001FF8000038487CC741>I<00001FFFC0000001FFFFFC000007FFFFFF00001FF800
7F80007FE000FFC000FF8000FFC001FF0001FFE003FE0001FFE007FE0001FFE00FFC0001
FFE00FFC0001FFE01FF80000FFC03FF800007F803FF800003F007FF8000000007FF00000
00007FF0000000007FF000000000FFF000000000FFF000000000FFF000000000FFF00000
0000FFF000000000FFF000000000FFF000000000FFF000000000FFF000000000FFF00000
00007FF0000000007FF0000000007FF8000000007FF8000000003FF8000000003FF80000
00001FFC000000F00FFC000000F00FFE000001E007FE000001E003FF000003C001FF8000
078000FFC0000F00007FF0003E00001FFC01FC000007FFFFF0000001FFFFC00000001FFC
00002C2E7CAD34>I<0000000000FF8000000001FFFF8000000001FFFF8000000001FFFF
8000000001FFFF800000000007FF800000000003FF800000000003FF800000000003FF80
0000000003FF800000000003FF800000000003FF800000000003FF800000000003FF8000
00000003FF800000000003FF800000000003FF800000000003FF800000000003FF800000
000003FF800000000003FF800000000003FF800000000003FF800000000003FF80000000
0003FF800000000003FF8000001FFC03FF800001FFFF83FF800007FFFFE3FF80001FFC03
F3FF80007FE0007FFF8000FF80003FFF8001FF00000FFF8003FE000007FF8007FE000003
FF800FFC000003FF800FFC000003FF801FF8000003FF803FF8000003FF803FF8000003FF
803FF0000003FF807FF0000003FF807FF0000003FF807FF0000003FF80FFF0000003FF80
FFF0000003FF80FFF0000003FF80FFF0000003FF80FFF0000003FF80FFF0000003FF80FF
F0000003FF80FFF0000003FF80FFF0000003FF80FFF0000003FF807FF0000003FF807FF0
000003FF807FF0000003FF807FF0000003FF803FF8000003FF803FF8000003FF801FF800
0003FF801FF8000003FF800FFC000003FF8007FC000007FF8003FE00000FFF8001FF0000
1FFF8000FF80007FFF80007FC000FBFFC0003FF807E3FFFF000FFFFFC3FFFF0001FFFF03
FFFF00003FF003FFFF38487CC741>I<00001FFC00000001FFFFC0000007FFFFF000001F
F80FFC00007FC001FE0000FF8000FF0001FF00007F8003FE00003FC007FC00001FE00FFC
00001FE01FF800001FF01FF800000FF03FF800000FF83FF800000FF83FF000000FF87FF0
000007F87FF0000007FC7FF0000007FCFFF0000007FCFFF0000007FCFFFFFFFFFFFCFFFF
FFFFFFFCFFFFFFFFFFFCFFF000000000FFF000000000FFF000000000FFF000000000FFF0
000000007FF0000000007FF0000000007FF0000000003FF8000000003FF8000000001FF8
0000003C1FF80000003C0FFC0000003C0FFC0000007807FE000000F803FF000001F001FF
800003E000FFC00007C0003FE0001F80001FFC01FF000007FFFFFC000000FFFFE0000000
0FFF00002E2E7DAD35>I<000000FFC00000001FFFF00000007FFFFC000001FFC0FE0000
03FF01FF000007FC03FF00000FF807FF80001FF807FF80003FF007FF80007FF007FF8000
7FE007FF8000FFE003FF0000FFE001FE0000FFE000FC0000FFE000300000FFE000000000
FFE000000000FFE000000000FFE000000000FFE000000000FFE000000000FFE000000000
FFE000000000FFE000000000FFE000000000FFE0000000FFFFFFFE0000FFFFFFFE0000FF
FFFFFE0000FFFFFFFE000000FFE000000000FFE000000000FFE000000000FFE000000000
FFE000000000FFE000000000FFE000000000FFE000000000FFE000000000FFE000000000
FFE000000000FFE000000000FFE000000000FFE000000000FFE000000000FFE000000000
FFE000000000FFE000000000FFE000000000FFE000000000FFE000000000FFE000000000
FFE000000000FFE000000000FFE000000000FFE000000000FFE000000000FFE000000000
FFE000000000FFE000000000FFE000000000FFE000000000FFE000000000FFE000000000
FFE000000000FFE000000000FFE000000000FFE00000007FFFFFF000007FFFFFF000007F
FFFFF000007FFFFFF0000029487DC724>I<00000000001F0000007FF000FFC00007FFFF
03FFE0001FFFFFC7E7E0007FE03FFF0FF000FF800FFC0FF001FF0007FC0FF003FE0003FE
0FF007FE0003FF07E007FC0001FF03C00FFC0001FF80000FFC0001FF80001FFC0001FFC0
001FFC0001FFC0001FFC0001FFC0001FFC0001FFC0001FFC0001FFC0001FFC0001FFC000
1FFC0001FFC0001FFC0001FFC0000FFC0001FF80000FFC0001FF800007FC0001FF000007
FE0003FF000003FE0003FE000001FF0007FC000000FF800FF8000000FFE03FF0000001DF
FFFFC0000003C7FFFF00000003C07FF00000000780000000000007800000000000078000
0000000007C0000000000007C0000000000007E0000000000007E0000000000007F80000
00000007FFFFFFF0000003FFFFFFFF000003FFFFFFFFE00001FFFFFFFFF00001FFFFFFFF
FC0000FFFFFFFFFE00007FFFFFFFFF0001FFFFFFFFFF8007FFFFFFFFFF800FF000001FFF
C01FC0000001FFC03F800000007FC07F800000003FE0FF000000003FE0FF000000001FE0
FF000000001FE0FF000000001FE0FF000000001FE0FF000000001FE07F800000003FC07F
800000003FC03FC00000007F801FE0000000FF000FF8000003FE0003FE00000FF80001FF
E000FFF000007FFFFFFFC000000FFFFFFE000000007FFFC0000034447DAE3A>I<007FC0
00000000FFFFC000000000FFFFC000000000FFFFC000000000FFFFC00000000003FFC000
00000001FFC00000000001FFC00000000001FFC00000000001FFC00000000001FFC00000
000001FFC00000000001FFC00000000001FFC00000000001FFC00000000001FFC0000000
0001FFC00000000001FFC00000000001FFC00000000001FFC00000000001FFC000000000
01FFC00000000001FFC00000000001FFC00000000001FFC00000000001FFC00000000001
FFC007FE000001FFC03FFFC00001FFC07FFFF00001FFC1F81FF80001FFC3C00FFC0001FF
C70007FE0001FFCE0007FE0001FFDC0007FF0001FFF80003FF0001FFF80003FF8001FFF0
0003FF8001FFF00003FF8001FFE00003FF8001FFE00003FF8001FFE00003FF8001FFC000
03FF8001FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC00003
FF8001FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC00003FF
8001FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC00003FF80
01FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC00003FF8001
FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC00003FF8001FF
C00003FF80FFFFFF81FFFFFFFFFFFF81FFFFFFFFFFFF81FFFFFFFFFFFF81FFFFFF38487B
C741>I<007C0001FF0003FF8007FFC007FFC00FFFE00FFFE00FFFE00FFFE00FFFE007FF
C007FFC003FF8001FF00007C000000000000000000000000000000000000000000000000
00000000000000000000000000007FC0FFFFC0FFFFC0FFFFC0FFFFC003FFC001FFC001FF
C001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FF
C001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FF
C001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC0FFFFFFFFFF
FFFFFFFFFFFFFF18497CC820>I<007FC000FFFFC000FFFFC000FFFFC000FFFFC00003FF
C00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FF
C00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FF
C00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FF
C00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FF
C00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FF
C00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FF
C00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC000FFFF
FF80FFFFFF80FFFFFF80FFFFFF8019487CC720>108 D<00FF8003FF000003FF000000FF
FF801FFFE0001FFFE00000FFFF807FFFF8007FFFF80000FFFF81F80FFC01F80FFC0000FF
FF83C007FE03C007FE000003FF878003FF078003FF000001FF8E0003FF0E0003FF000001
FF9C0003FF9C0003FF800001FFB80001FFB80001FF800001FFB80001FFF80001FFC00001
FFF00001FFF00001FFC00001FFF00001FFF00001FFC00001FFE00001FFE00001FFC00001
FFE00001FFE00001FFC00001FFE00001FFE00001FFC00001FFC00001FFC00001FFC00001
FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001
FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001
FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001
FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001
FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001
FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001
FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001
FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001
FFC00001FFC00001FFC00001FFC00001FFC00001FFC000FFFFFF80FFFFFF80FFFFFF80FF
FFFF80FFFFFF80FFFFFF80FFFFFF80FFFFFF80FFFFFF80FFFFFF80FFFFFF80FFFFFF8059
2E7BAD62>I<00FF8007FE0000FFFF803FFFC000FFFF807FFFF000FFFF81F81FF800FFFF
83C00FFC0003FF870007FE0001FF8E0007FE0001FF9C0007FF0001FFB80003FF0001FFB8
0003FF8001FFF00003FF8001FFF00003FF8001FFE00003FF8001FFE00003FF8001FFE000
03FF8001FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC00003
FF8001FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC00003FF
8001FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC00003FF80
01FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC00003FF8001
FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC00003FF8001FF
C00003FF8001FFC00003FF80FFFFFF81FFFFFFFFFFFF81FFFFFFFFFFFF81FFFFFFFFFFFF
81FFFFFF382E7BAD41>I<00000FFE0000000001FFFFF000000007FFFFFC0000001FF803
FF0000007FE000FFC00000FF80003FE00001FF00001FF00003FE00000FF80007FC000007
FC000FFC000007FE000FF8000003FE001FF8000003FF003FF8000003FF803FF0000001FF
803FF0000001FF807FF0000001FFC07FF0000001FFC07FF0000001FFC0FFF0000001FFE0
FFF0000001FFE0FFF0000001FFE0FFF0000001FFE0FFF0000001FFE0FFF0000001FFE0FF
F0000001FFE0FFF0000001FFE0FFF0000001FFE0FFF0000001FFE07FF0000001FFC07FF0
000001FFC07FF0000001FFC07FF0000001FFC03FF8000003FF803FF8000003FF801FF800
0003FF001FFC000007FF000FFC000007FE0007FE00000FFC0003FE00000FF80001FF0000
1FF00000FF80003FE000007FE000FFC000001FFC07FF00000007FFFFFC00000001FFFFF0
000000001FFF000000332E7DAD3A>I<007FC01FFC0000FFFFC0FFFF8000FFFFC3FFFFF0
00FFFFCFE03FFC00FFFFDF0007FE0003FFFC0003FF0001FFF80001FF8001FFF00000FFC0
01FFE000007FE001FFC000007FF001FFC000003FF801FFC000003FF801FFC000001FFC01
FFC000001FFC01FFC000001FFE01FFC000001FFE01FFC000000FFE01FFC000000FFE01FF
C000000FFF01FFC000000FFF01FFC000000FFF01FFC000000FFF01FFC000000FFF01FFC0
00000FFF01FFC000000FFF01FFC000000FFF01FFC000000FFF01FFC000000FFF01FFC000
000FFE01FFC000001FFE01FFC000001FFE01FFC000001FFC01FFC000001FFC01FFC00000
3FFC01FFC000003FF801FFC000003FF001FFC000007FF001FFE00000FFE001FFF00000FF
C001FFF80001FF8001FFFC0003FF0001FFDF000FFE0001FFCFC03FF80001FFC3FFFFE000
01FFC0FFFF800001FFC01FF8000001FFC00000000001FFC00000000001FFC00000000001
FFC00000000001FFC00000000001FFC00000000001FFC00000000001FFC00000000001FF
C00000000001FFC00000000001FFC00000000001FFC00000000001FFC00000000001FFC0
0000000001FFC00000000001FFC000000000FFFFFF80000000FFFFFF80000000FFFFFF80
000000FFFFFF8000000038427CAD41>I<007F803F80FFFF80FFE0FFFF81FFF8FFFF83C3
FCFFFF8707FE03FF8E07FE01FF9C0FFF01FFB80FFF01FFB80FFF01FFF00FFF01FFF00FFF
01FFF007FE01FFE003FC01FFE001F801FFE0000001FFE0000001FFC0000001FFC0000001
FFC0000001FFC0000001FFC0000001FFC0000001FFC0000001FFC0000001FFC0000001FF
C0000001FFC0000001FFC0000001FFC0000001FFC0000001FFC0000001FFC0000001FFC0
000001FFC0000001FFC0000001FFC0000001FFC0000001FFC0000001FFC0000001FFC000
0001FFC0000001FFC00000FFFFFFE000FFFFFFE000FFFFFFE000FFFFFFE000282E7DAD2F
>114 D<000FFE01C000FFFFC7C003FFFFFFC007F801FFC00FC0007FC01F00001FC03F00
000FC07E000007C07E000007C07E000003C0FE000003C0FE000003C0FF000003C0FF8000
03C0FFE0000000FFF80000007FFFC000007FFFFF00003FFFFFE0003FFFFFF8001FFFFFFC
000FFFFFFF0007FFFFFF8001FFFFFFC0007FFFFFE0001FFFFFE00000FFFFF0000003FFF0
0000007FF87000001FF8F000000FF8F0000007F8F8000007F8F8000003F8F8000003F8FC
000003F0FC000003F0FE000003F0FF000007E0FF800007E0FFC0000FC0FFF0001F80FEFC
00FF00F87FFFFC00F01FFFF000E003FF8000252E7CAD2E>I<0001E000000001E0000000
01E000000001E000000001E000000001E000000003E000000003E000000003E000000007
E000000007E000000007E00000000FE00000000FE00000001FE00000003FE00000003FE0
0000007FE0000001FFE0000003FFE000000FFFFFFFC0FFFFFFFFC0FFFFFFFFC0FFFFFFFF
C000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE00000
00FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000
FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FF
E0000000FFE0000000FFE0000000FFE000F000FFE000F000FFE000F000FFE000F000FFE0
00F000FFE000F000FFE000F000FFE000F000FFE000F0007FE000E0007FF001E0003FF001
E0003FF003C0001FF80380000FFE0F000007FFFE000001FFFC0000001FF00024427EC12D
>I<007FC00000FF80FFFFC001FFFF80FFFFC001FFFF80FFFFC001FFFF80FFFFC001FFFF
8003FFC00007FF8001FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC00003FF80
01FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC00003FF8001
FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC00003FF8001FF
C00003FF8001FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC0
0003FF8001FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC000
03FF8001FFC00003FF8001FFC00003FF8001FFC00003FF8001FFC00007FF8001FFC00007
FF8001FFC00007FF8000FFC0000FFF8000FFC0001FFF8000FFC0001FFF80007FE0003BFF
80003FE000F3FFC0001FF803E3FFFF000FFFFF83FFFF0003FFFF03FFFF00003FF803FFFF
382E7BAD41>I<FFFFFF0001FFFFFFFFFF0001FFFFFFFFFF0001FFFFFFFFFF0001FFFF01
FFC000001FC001FFE000000F8000FFE000000F0000FFF000001F00007FF000001E00007F
F800003E00003FF800003C00003FFC00003C00001FFC00007800001FFE00007800001FFE
0000F800000FFE0000F000000FFF0001F0000007FF0001E0000007FF8003E0000003FF80
03C0000003FFC007C0000001FFC00780000001FFE00780000000FFE00F00000000FFF00F
00000000FFF01F000000007FF01E000000007FF83E000000003FF83C000000003FFC7C00
0000001FFC78000000001FFEF8000000000FFEF0000000000FFFF00000000007FFE00000
000007FFE00000000007FFE00000000003FFC00000000003FFC00000000001FF80000000
0001FF800000000000FF000000000000FF0000000000007E0000000000007E0000000000
003C000000382E7EAD3D>I<FFFFFE07FFFFE003FFFEFFFFFE07FFFFE003FFFEFFFFFE07
FFFFE003FFFEFFFFFE07FFFFE003FFFE03FFC0001FF800003FC001FFC0001FF800000F00
01FFE0000FFC00000F0000FFE0000FFC00001E0000FFE00007FC00001E0000FFF00007FE
00003E00007FF00007FE00003C00007FF80007FF00007C00003FF80007FF00007800003F
F8000FFF00007800003FFC000FFF8000F800001FFC001FFF8000F000001FFE001EFFC001
F000000FFE001EFFC001E000000FFE003C7FC001E000000FFF003C7FE003E0000007FF00
7C7FE003C0000007FF80783FF007C0000003FF80783FF00780000003FF80F01FF0078000
0003FFC0F01FF80F80000001FFC1F01FF80F00000001FFE1E00FFC1F00000000FFE1E00F
FC1E00000000FFE3C007FC1E00000000FFF3C007FE3E000000007FF7C007FE3C00000000
7FFF8003FF7C000000003FFF8003FF78000000003FFF0001FF78000000003FFF0001FFF8
000000001FFF0001FFF0000000001FFE0000FFF0000000000FFE0000FFE0000000000FFC
00007FE0000000000FFC00007FE00000000007FC00007FC00000000007F800003FC00000
000003F800003F800000000003F000001F800000000003F000001F800000000001E00000
0F0000004F2E7EAD54>I<FFFFFF0001FFFFFFFFFF0001FFFFFFFFFF0001FFFFFFFFFF00
01FFFF01FFC000001FC001FFE000000F8000FFE000000F0000FFF000001F00007FF00000
1E00007FF800003E00003FF800003C00003FFC00003C00001FFC00007800001FFE000078
00001FFE0000F800000FFE0000F000000FFF0001F0000007FF0001E0000007FF8003E000
0003FF8003C0000003FFC007C0000001FFC00780000001FFE00780000000FFE00F000000
00FFF00F00000000FFF01F000000007FF01E000000007FF83E000000003FF83C00000000
3FFC7C000000001FFC78000000001FFEF8000000000FFEF0000000000FFFF00000000007
FFE00000000007FFE00000000007FFE00000000003FFC00000000003FFC00000000001FF
800000000001FF800000000000FF000000000000FF0000000000007E0000000000007E00
00000000003C0000000000003C0000000000007C00000000000078000000000000F80000
00000000F0000000000001F00000001F0001E00000003F8003E00000007FC003C0000000
FFE007C0000000FFE00780000000FFE00F80000000FFE01F00000000FFE01E000000007F
C07C000000007F80F8000000003F03F0000000001FFFE00000000007FF800000000001FC
000000000038427EAD3D>121 D<1FFFFFFFFFE01FFFFFFFFFE01FFFFFFFFFE01FFE0003
FFC01FF00007FF801FC0000FFF801F80001FFF001F00001FFE001F00003FFC003E00007F
FC003E00007FF8003E0000FFF0003C0001FFE0003C0003FFE0003C0003FFC0003C0007FF
80003C000FFF800000001FFF000000001FFE000000003FFC000000007FFC00000000FFF8
00000000FFF000000001FFE000000003FFE000000007FFC000000007FF8001E0000FFF00
01E0001FFF0001E0003FFE0001E0003FFC0003E0007FF80003C000FFF80003C000FFF000
03C001FFE00003C003FFC00007C007FFC00007C007FF80000FC00FFF00000FC01FFF0000
1FC03FFE00007FC03FFC0000FF807FF8000FFF80FFFFFFFFFF80FFFFFFFFFF80FFFFFFFF
FF802B2E7DAD34>I E end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 300dpi
TeXDict begin
%%BeginPaperSize: A4
a4
%%EndPaperSize

%%EndSetup
%%Page: 1 1
1 0 bop 224 723 a FP(Con)m(ten)m(ts)224 981 y FO(1)39
b(In)o(tro)q(ducti)o(on)1088 b(1)287 1032 y FN(1.1)41
b(Assumed)14 b(bac)o(kground)h FM(:)20 b(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)
g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)74
b FN(1)287 1082 y(1.2)41 b(The)14 b(reference)j(arc)o(hitecture)25
b FM(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)g(:)h(:)f(:)g(:)h(:)74 b FN(2)287 1133 y(1.3)41 b(In)o(termediate)14
b(F)m(orms)d FM(:)21 b(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)74
b FN(2)382 1183 y(1.3.1)46 b(Abstract)15 b(syn)o(tax)f(tree)25
b FM(:)20 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)74 b FN(2)382 1234 y(1.3.2)46 b(Abstract)15
b(stac)o(k)f(in)o(termediate)g(represen)o(tation)42 b
FM(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)74 b FN(4)382 1284
y(1.3.3)46 b(Virtual)13 b(assem)o(bly)g(language)i FM(:)20
b(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)74
b FN(4)382 1334 y(1.3.4)46 b(A)14 b(note)g(on)g(assem)o(bly)f(language)
g(syn)o(tax)25 b FM(:)c(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)74
b FN(5)287 1385 y(1.4)41 b(Ho)o(w)14 b(to)f(a)o(v)o(oid)g(co)q(de)i
(generation)f(en)o(tirely)35 b FM(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)
g(:)g(:)h(:)f(:)g(:)h(:)74 b FN(6)287 1435 y(1.5)41 b(A)14
b(little)f(bit)h(of)f(dualit)o(y)18 b FM(:)i(:)g(:)h(:)f(:)g(:)g(:)h(:)
f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)74
b FN(6)287 1486 y(1.6)41 b(Compiler)12 b(Bo)q(otstrapping)27
b FM(:)21 b(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)g(:)h(:)f(:)g(:)h(:)74 b FN(8)382 1536 y(1.6.1)46
b(In)o(tro)q(duction)14 b(to)g(T-diagrams)25 b FM(:)20
b(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)74
b FN(8)382 1587 y(1.6.2)46 b(The)14 b(hand-translation)f(b)q(o)q
(otstrap)18 b FM(:)i(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)
h(:)53 b FN(11)382 1637 y(1.6.3)46 b(The)14 b(cross-b)q(o)q(otstrap)37
b FM(:)20 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)53 b FN(12)382 1687 y(1.6.4)46 b(Wh)o(y)13
b(write)i(a)e(compiler)g(in)g(its)h(o)o(wn)f(language)23
b FM(:)e(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)53 b FN(12)287
1738 y(1.7)41 b(Co)q(de)14 b(Impro)o(v)o(emen)o(t)21
b FM(:)g(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)
g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)53 b FN(14)382 1788
y(1.7.1)46 b(Safet)o(y)14 b(and)f(pro\014tabilit)o(y)40
b FM(:)21 b(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)53 b FN(14)382 1839 y(1.7.2)46 b(Space)15
b(and)e(time)21 b FM(:)f(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)
h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)53 b FN(15)224
1931 y FO(2)39 b(A)o(ttribut)o(e)13 b(Ev)m(aluation)893
b(17)287 1982 y FN(2.1)41 b(Abstract)15 b(syn)o(tax)f(trees)f
FM(:)20 b(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)53 b FN(17)382 2032
y(2.1.1)46 b(De\014ning)13 b(abstract)i(syn)o(tax)h FM(:)21
b(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)53 b FN(18)287 2082 y(2.2)41 b(Represen)o(ting)15
b(declared)g(en)o(tities)20 b FM(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)
f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)53 b FN(20)382
2133 y(2.2.1)46 b(Represen)o(ting)15 b(t)o(yp)q(es)22
b FM(:)e(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)
g(:)h(:)f(:)g(:)h(:)53 b FN(21)382 2183 y(2.2.2)46 b(Represen)o(ting)15
b(scop)q(es)36 b FM(:)20 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)53 b FN(23)287 2234
y(2.3)41 b(Static)14 b(seman)o(tic)f(c)o(hec)o(king)21
b FM(:)g(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)
g(:)g(:)h(:)f(:)g(:)h(:)53 b FN(24)287 2284 y(2.4)41
b(A)o(ttribute)15 b(ev)n(aluation)30 b FM(:)20 b(:)g(:)h(:)f(:)g(:)g(:)
h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)53 b FN(25)382 2335 y(2.4.1)46 b(A)o(ttribute)15 b(gramma)o(rs)31
b FM(:)20 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)53 b FN(25)382 2385 y(2.4.2)46 b(Implemen)o(ting)11
b(attribute)j(ev)n(aluation)31 b FM(:)20 b(:)h(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)53 b FN(27)382 2435 y(2.4.3)46 b(A)o(ttribute)15
b(ev)n(aluation)d(from)g(sp)q(eci\014cations)33 b FM(:)20
b(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)53 b FN(29)287 2486
y(2.5)41 b(Op)q(erator)15 b(iden)o(ti\014cation)j FM(:)i(:)h(:)f(:)g(:)
g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g
(:)h(:)53 b FN(29)382 2536 y(2.5.1)46 b(Automatic)12
b(co)q(ercions)28 b FM(:)20 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)53 b FN(30)287
2587 y(2.6)41 b(Rewriting)13 b(the)i(tree)37 b FM(:)21
b(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)53 b FN(34)287 2637 y(2.7)41
b(Finding)13 b(out)h(more)k FM(:)i(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)53
b FN(36)287 2688 y(2.8)41 b(Exercises)j FM(:)20 b(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)
f(:)g(:)g(:)h(:)f(:)g(:)h(:)53 b FN(36)939 2793 y(i)p
eop
%%Page: 2 2
2 1 bop 224 274 a FN(ii)1182 b FL(CONTENTS)224 390 y
FO(3)39 b(Run)o(time)13 b(Organization)862 b(37)287 441
y FN(3.1)41 b(The)14 b(run)o(time)f(en)o(vironmen)o(t)32
b FM(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)g(:)h(:)f(:)g(:)h(:)53 b FN(37)382 491 y(3.1.1)46
b(Memory)13 b(organization)41 b FM(:)20 b(:)h(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)53 b FN(38)287
541 y(3.2)41 b(Pro)q(cedure)16 b(call)d(and)h(return)32
b FM(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)g(:)h(:)f(:)g(:)h(:)53 b FN(42)382 591 y(3.2.1)46
b(Register)14 b(use)h(con)o(v)o(en)o(tions)j FM(:)j(:)f(:)g(:)h(:)f(:)g
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)53
b FN(43)382 641 y(3.2.2)46 b(Activ)n(ation)13 b(records)35
b FM(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)g(:)h(:)f(:)g(:)h(:)53 b FN(44)382 691 y(3.2.3)46
b(Stac)o(k)14 b(organization)28 b FM(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)53
b FN(45)382 741 y(3.2.4)46 b(P)o(arameter)14 b(passing)31
b FM(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)g(:)h(:)f(:)g(:)h(:)53 b FN(52)382 791 y(3.2.5)46
b(Addressing)15 b(data)e(from)g(non-lo)q(cal)f(scop)q(es)23
b FM(:)d(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)53 b FN(62)382
842 y(3.2.6)46 b(Arc)o(hitectures)16 b(with)e(global)e(data)i(p)q(oin)o
(ters)40 b FM(:)20 b(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)53
b FN(68)382 892 y(3.2.7)46 b(Pro)q(cedure)16 b(parameters)e(and)g(v)n
(ariables)35 b FM(:)21 b(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)53
b FN(72)382 942 y(3.2.8)46 b(Dynamic)12 b(linking)32
b FM(:)21 b(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)g(:)h(:)f(:)g(:)h(:)53 b FN(75)287 992 y(3.3)41
b(Ob)r(ject)15 b(orien)o(ted)g(languages,)e(and)g(metho)q(d)g(dispatc)o
(h)37 b FM(:)21 b(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)53 b
FN(77)382 1042 y(3.3.1)46 b(Run)o(time)12 b(p)q(olymorphism)30
b FM(:)21 b(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)53 b FN(77)382 1092 y(3.3.2)46 b(Languages)14
b(with)f(single)h(inheritance)42 b FM(:)20 b(:)h(:)f(:)g(:)h(:)f(:)g(:)
g(:)h(:)f(:)g(:)h(:)53 b FN(78)382 1142 y(3.3.3)46 b(Languages)14
b(with)f(m)o(ultiple)f(inheritance)27 b FM(:)21 b(:)f(:)g(:)h(:)f(:)g
(:)g(:)h(:)f(:)g(:)h(:)53 b FN(79)287 1192 y(3.4)41 b(Error)15
b(handling)d(and)i(exceptions)f FM(:)20 b(:)h(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)53 b FN(80)382
1243 y(3.4.1)46 b(What)13 b(is)h(an)g(exception)43 b
FM(:)20 b(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)53 b FN(80)382 1293 y(3.4.2)46 b(Thro)o(wing)13
b(and)h(catc)o(hing)42 b FM(:)21 b(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)53 b FN(80)382 1343
y(3.4.3)46 b(T)m(rap)13 b(handlers)k FM(:)j(:)g(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)53
b FN(82)382 1393 y(3.4.4)46 b(Un)o(winding)13 b(the)h(stac)o(k)25
b FM(:)20 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)53 b FN(82)287 1443 y(3.5)41 b(Finding)13
b(out)h(more)k FM(:)i(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)53
b FN(87)287 1493 y(3.6)41 b(Exercises)j FM(:)20 b(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)
f(:)g(:)g(:)h(:)f(:)g(:)h(:)53 b FN(87)224 1585 y FO(4)39
b(Generating)12 b(In)o(termediate)h(Co)q(de)690 b(89)287
1635 y FN(4.1)41 b(T)m(reew)o(alking)13 b(automata)27
b FM(:)20 b(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)53 b FN(90)382 1685 y(4.1.1)46
b(T)m(uple)13 b(in)o(termediate)h(forms)35 b FM(:)20
b(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)53
b FN(91)382 1735 y(4.1.2)46 b(Abstract)15 b(stac)o(k)f(mac)o(hine)f
(forms)j FM(:)21 b(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g
(:)h(:)53 b FN(91)287 1785 y(4.2)41 b(In)o(tro)q(duction)14
b(to)g(D-Co)q(de)35 b FM(:)21 b(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)53 b FN(94)382
1836 y(4.2.1)46 b(Loads)14 b(and)f(stores)29 b FM(:)21
b(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)53 b FN(95)382 1886 y(4.2.2)46 b(Data)13
b(op)q(erations)42 b FM(:)21 b(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)53 b FN(96)382
1936 y(4.2.3)46 b(Op)q(erations)15 b(on)e(addresses)24
b FM(:)d(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)
g(:)h(:)53 b FN(98)382 1986 y(4.2.4)46 b(Comparison)12
b(op)q(erations)f FM(:)20 b(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)53 b FN(99)382 2036 y(4.2.5)46
b(Branc)o(h,)14 b(jump)e(and)i(call)f(instructions)25
b FM(:)20 b(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)53
b FN(99)382 2086 y(4.2.6)46 b(Stac)o(k)14 b(housek)o(eeping)i
FM(:)k(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)32 b FN(101)382 2136 y(4.2.7)46 b(Pro)q(cedure)16
b(headers)33 b FM(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)
g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(102)287 2186
y(4.3)41 b(Generating)14 b(in)o(termediate)f(co)q(de)i(for)e
(expressions)38 b FM(:)20 b(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32
b FN(102)382 2236 y(4.3.1)46 b(Ordinary)14 b(expressions)k
FM(:)i(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)32 b FN(102)382 2287 y(4.3.2)46 b(Designators)24
b FM(:)d(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)
g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(103)382 2337
y(4.3.3)46 b(F)m(unction)14 b(calls)i FM(:)k(:)g(:)h(:)f(:)g(:)g(:)h(:)
f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32
b FN(105)382 2387 y(4.3.4)46 b(Ev)n(aluating)12 b(D)o(A)o(G)h
(expressions)42 b FM(:)21 b(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)32 b FN(107)287 2437 y(4.4)41 b(Generating)14
b(co)q(de)h(for)e(Bo)q(olean)h(expressions)22 b FM(:)e(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(108)382 2487
y(4.4.1)46 b(Simple)12 b(jumping)g(co)q(de)18 b FM(:)i(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32
b FN(109)382 2537 y(4.4.2)46 b(Optimized)13 b(jumping)f(co)q(de)j
FM(:)21 b(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)32 b FN(111)382 2587 y(4.4.3)46 b(Conditional)12
b(expressions)35 b FM(:)21 b(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)
f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(116)287 2637 y(4.5)41
b(Generating)14 b(co)q(de)h(for)e(statemen)o(ts)26 b
FM(:)21 b(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)32 b FN(116)382 2688 y(4.5.1)46 b(Assignmen)o(ts)14
b(and)f(pro)q(cedure)j(calls)31 b FM(:)20 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)g(:)h(:)f(:)g(:)h(:)32 b FN(116)p eop
%%Page: 3 3
3 2 bop 224 274 a FL(CONTENTS)1172 b FN(iii)382 390 y(4.5.2)46
b(Conditional)12 b(statemen)o(ts)41 b FM(:)21 b(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(118)382
441 y(4.5.3)46 b(V)m(arious)13 b(lo)q(ops)25 b FM(:)20
b(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(122)287 491 y(4.6)41
b(Finding)13 b(out)h(more)k FM(:)i(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32
b FN(125)287 542 y(4.7)41 b(Exercises)j FM(:)20 b(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)
f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(125)224 634 y FO(5)39
b(In)o(terpreti)o(v)o(e)13 b(Co)q(de)j(Selection)728
b(127)287 685 y FN(5.1)41 b(Co)q(de)14 b(selection)h(for)f(a)f
(load-store)h(arc)o(hitecture)41 b FM(:)21 b(:)f(:)g(:)h(:)f(:)g(:)g(:)
h(:)f(:)g(:)h(:)32 b FN(128)382 735 y(5.1.1)46 b(The)14
b(shado)o(w)g(stac)o(k)42 b FM(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32
b FN(129)382 786 y(5.1.2)46 b(Using)14 b(the)g(shado)o(w)g(stac)o(k)35
b FM(:)21 b(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)32 b FN(131)382 836 y(5.1.3)46 b(In)o(ternal)14
b(structure)i(of)d(the)i(shado)o(w)e(stac)o(k)i(automaton)9
b FM(:)21 b(:)f(:)g(:)h(:)32 b FN(133)382 887 y(5.1.4)46
b(Flo)o(w)13 b(of)g(con)o(trol:)18 b(the)d(branc)o(h)f(instructions)27
b FM(:)20 b(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(139)382
937 y(5.1.5)46 b(Flo)o(w)13 b(of)g(con)o(trol:)18 b(the)d(subprogram)d
(calls)37 b FM(:)20 b(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32
b FN(140)287 988 y(5.2)41 b(Condition)13 b(co)q(des,)h(more)f(address)j
(mo)q(des)40 b FM(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)
g(:)h(:)32 b FN(141)382 1038 y(5.2.1)46 b(Condition)13
b(co)q(des)42 b FM(:)21 b(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(142)382
1089 y(5.2.2)46 b(More)14 b(address)i(mo)q(des)27 b FM(:)20
b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)32 b FN(144)382 1139 y(5.2.3)46 b(P)o(assing)14
b(parameters)g(in)f(registers)30 b FM(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)
f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(148)287 1190 y(5.3)41
b(Mac)o(hines)15 b(with)e(complex)g(address)i(mo)q(des)22
b FM(:)e(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32
b FN(149)382 1240 y(5.3.1)46 b(A)14 b(CISC)g(mac)o(hine)e(mo)q(del)32
b FM(:)21 b(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)32 b FN(149)382 1291 y(5.3.2)46 b(Generating)14
b(co)q(de)h(for)e(the)i(mo)q(del)35 b FM(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(152)287 1341 y(5.4)41
b(Exercises)j FM(:)20 b(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)
32 b FN(158)224 1434 y FO(6)39 b(Bottom-up)13 b(T)l(ree)j(Rewriting)745
b(161)287 1484 y FN(6.1)41 b(In)o(tro)q(duction)14 b(to)g(the)g(theory)
20 b FM(:)g(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)g(:)h(:)f(:)g(:)h(:)32 b FN(161)382 1535 y(6.1.1)46
b(A)14 b(simple)e(example)42 b FM(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)
g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32
b FN(162)382 1585 y(6.1.2)46 b(Dynamic)12 b(programmi)o(ng)d
FM(:)20 b(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)32 b FN(165)382 1636 y(6.1.3)46 b(A)14
b(second)h(example)37 b FM(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(166)287
1686 y(6.2)41 b(Lab)q(elling)13 b(and)g(reducing)18 b
FM(:)i(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(168)382 1737 y(6.2.1)46
b(Structure)16 b(of)d(the)h(attributes)h FM(:)20 b(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(168)382
1787 y(6.2.2)46 b(The)14 b(lab)q(elling)f(pass)37 b FM(:)20
b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)32 b FN(168)382 1838 y(6.2.3)46 b(The)14
b(reduction)h(pass)20 b FM(:)g(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(171)287
1888 y(6.3)41 b(Implemen)o(ting)11 b(b)q(ottom-up)h(rewriting)27
b FM(:)20 b(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)32 b FN(172)382 1939 y(6.3.1)46 b(Implemen)o(ting)11
b(lab)q(elling)h FM(:)20 b(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(174)382 1989 y(6.3.2)46
b(Implemen)o(ting)11 b(reduction)29 b FM(:)21 b(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(177)287
2040 y(6.4)41 b(Putting)14 b(it)f(all)g(together)33 b
FM(:)20 b(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(183)382 2090 y(6.4.1)46
b(T)m(ra)o(v)o(ersing)13 b(co)q(de-trees)j FM(:)k(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32
b FN(183)382 2141 y(6.4.2)46 b(T)m(ra)o(v)o(ersing)13
b(reconstructed)k(trees)c FM(:)21 b(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)g(:)h(:)f(:)g(:)h(:)32 b FN(184)287 2191 y(6.5)41
b(Summary)31 b FM(:)20 b(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)
h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)32 b FN(185)287 2242 y(6.6)41 b(Finding)13 b(out)h(more)k
FM(:)i(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(185)287
2292 y(6.7)41 b(Exercises)j FM(:)20 b(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)
h(:)f(:)g(:)h(:)32 b FN(186)224 2385 y FO(7)39 b(In)o(tro)q(ducti)o(on)
13 b(to)i(Optimizatio)o(n)693 b(189)287 2435 y FN(7.1)41
b(In)o(tro)q(duction)13 b FM(:)21 b(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)
g(:)h(:)32 b FN(190)382 2486 y(7.1.1)46 b(Strength)15
b(reduction)f(and)g(constan)o(t)h(folding)24 b FM(:)c(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)32 b FN(191)382 2536 y(7.1.2)46 b(Keeping)14
b(information)d(in)j(registers)40 b FM(:)20 b(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(193)382 2587 y(7.1.3)46
b(Common)11 b(sub-expression)k(elimination)28 b FM(:)21
b(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(194)382
2637 y(7.1.4)46 b(V)m(alue)13 b(trac)o(king)38 b FM(:)20
b(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)g(:)h(:)f(:)g(:)h(:)32 b FN(194)382 2688 y(7.1.5)46
b(Lo)o(w)o(ering)13 b(register)i(pressure)23 b FM(:)d(:)g(:)h(:)f(:)g
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32
b FN(195)p eop
%%Page: 4 4
4 3 bop 224 274 a FN(iv)1172 b FL(CONTENTS)382 390 y
FN(7.1.6)46 b(Instruction)15 b(sc)o(heduling)28 b FM(:)20
b(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g
(:)h(:)32 b FN(197)382 441 y(7.1.7)46 b(P)o(eephole)15
b(optimization)24 b FM(:)c(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(200)287 491 y(7.2)41
b(Implemen)o(ting)11 b(CSE)j(and)g(v)n(alue)f(trac)o(king)31
b FM(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32
b FN(201)382 542 y(7.2.1)46 b(Con)o(v)o(erting)13 b(trees)j(to)e(dags)j
FM(:)k(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g
(:)h(:)32 b FN(201)382 592 y(7.2.2)46 b(V)m(alue)13 b(n)o(um)o(b)q
(ering)24 b FM(:)d(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(201)287 643
y(7.3)41 b(Implemen)o(ting)11 b(p)q(eephole)k(optimization)26
b FM(:)21 b(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)
32 b FN(207)287 693 y(7.4)41 b(Finding)13 b(out)h(more)k
FM(:)i(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(207)287
744 y(7.5)41 b(Exercises)j FM(:)20 b(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)
f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)32 b FN(207)224 836 y FO(8)39 b(Data\015o)o(w)15
b(Analysis)929 b(209)287 887 y FN(8.1)41 b(Creating)14
b(the)g(con)o(trol)g(\015o)o(w)g(graph)22 b FM(:)f(:)f(:)g(:)h(:)f(:)g
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32
b FN(209)382 937 y(8.1.1)46 b(De\014nitions)40 b FM(:)21
b(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(209)382 988 y(8.1.2)46
b(Building)13 b(the)h FK(CF)o(G)39 b FM(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32
b FN(217)287 1038 y(8.2)41 b(F)m(orw)o(ard)14 b(and)f(bac)o(kw)o(ard)h
(\015o)o(w)28 b FM(:)20 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(217)382 1089
y(8.2.1)46 b(Do)o(wnsafe)13 b(expressions,)i(a)f(bac)o(kw)o(ard-\015o)o
(w)f(all)g(paths)h(problem)47 b(218)382 1139 y(8.2.2)f(Solving)12
b(the)j(data\015o)o(w)e(equations)35 b FM(:)20 b(:)g(:)g(:)h(:)f(:)g(:)
h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(218)382 1190
y(8.2.3)46 b(Av)n(ailable)12 b(expressions,)j(a)f(forw)o(ard)f(\015o)o
(w)h(all)e(paths)j(problem)40 b FM(:)32 b FN(220)287
1240 y(8.3)41 b(Finding)13 b(out)h(more)k FM(:)i(:)h(:)f(:)g(:)h(:)f(:)
g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)32 b FN(221)287 1291 y(8.4)41 b(Exercises)j
FM(:)20 b(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32
b FN(221)224 1383 y FO(9)39 b(Static)14 b(single)f(assignmen)o(t)g
(form)692 b(225)287 1434 y FN(9.1)41 b(T)m(ransforming)12
b(in)o(to)h(SSA)h(form)f FM(:)20 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(225)382
1484 y(9.1.1)46 b(Placing)13 b(the)i(\010)e(functions)34
b FM(:)21 b(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)32 b FN(227)382 1535 y(9.1.2)46 b(Renaming)12
b(de\014nitions)i FM(:)20 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(228)382 1585
y(9.1.3)46 b(Renaming)12 b(applied)h(o)q(ccurrences)44
b FM(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32
b FN(228)287 1636 y(9.2)41 b(Dealing)13 b(with)g(memory)f(v)n(ariables)
29 b FM(:)21 b(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)32 b FN(228)287 1686 y(9.3)41 b(T)m(ransforming)12
b(bac)o(k)h(to)h(ordinary)g(co)q(de)39 b FM(:)21 b(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(230)287
1737 y(9.4)41 b(Simple)12 b(optimizations)g(based)i(on)g(SSA)h
FM(:)20 b(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)32 b FN(230)382 1787 y(9.4.1)46 b(Constan)o(t)14 b(propagation)33
b FM(:)20 b(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)32 b FN(230)382 1838 y(9.4.2)46 b(Dead)14
b(co)q(de)h(eliminatio)o(n)21 b FM(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(231)382
1888 y(9.4.3)46 b(Global)12 b(common)f(sub)q(expression)16
b(elimination)f FM(:)21 b(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32
b FN(232)287 1939 y(9.5)41 b(Lo)q(op-in)o(v)n(arian)o(t)12
b(co)q(de)j(motion)26 b FM(:)20 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(234)382
1989 y(9.5.1)46 b(Finding)13 b(lo)q(op-in)o(v)n(arian)o(t)e
(expressions)36 b FM(:)20 b(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)32 b FN(235)382 2040 y(9.5.2)46 b(Mo)o(ving)13 b(lo)q(op-in)o(v)n
(arian)o(t)e(co)q(de)32 b FM(:)20 b(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(236)287 2090 y(9.6)41
b(Induction)14 b(v)n(ariables)22 b FM(:)f(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)
32 b FN(241)382 2141 y(9.6.1)46 b(Recognizing)13 b(induction)h(v)n
(ariables)j FM(:)j(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)32 b FN(241)382 2191 y(9.6.2)46 b(T)m(ransforming)11
b(the)k(lo)q(op)24 b FM(:)c(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(243)287 2242 y(9.7)41
b(Extended)15 b(forms)e(of)g(SSA)41 b FM(:)21 b(:)f(:)g(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32
b FN(244)287 2292 y(9.8)41 b(Finding)13 b(out)h(more)k
FM(:)i(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(245)287
2343 y(9.9)41 b(Exercises)j FM(:)20 b(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)
h(:)f(:)g(:)h(:)32 b FN(245)224 2435 y FO(10)15 b(Register)e(Allo)q
(cation)901 b(247)287 2486 y FN(10.1)20 b(In)o(tro)q(duction)13
b FM(:)21 b(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32
b FN(247)287 2536 y(10.2)20 b(Graph)14 b(coloring)31
b FM(:)20 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(249)382
2587 y(10.2.1)25 b(Liv)o(e)14 b(ranges)30 b FM(:)21 b(:)f(:)g(:)h(:)f
(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)
f(:)g(:)h(:)32 b FN(249)382 2637 y(10.2.2)25 b(The)14
b(in)o(terference)i(graph)h FM(:)j(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(252)287
2688 y(10.3)20 b(Heuristics)15 b(for)f(lo)q(cal)f(allo)q(cation)30
b FM(:)20 b(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)32 b FN(254)p eop
%%Page: 5 5
5 4 bop 224 274 a FL(CONTENTS)1184 b FN(v)382 390 y(10.3.1)25
b(On-the-\015y)14 b(allo)q(cation)21 b FM(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32
b FN(254)382 440 y(10.3.2)25 b(Bac)o(kw)o(ards)14 b(allo)q(cation)f(in)
g(V)-5 b(AL)29 b FM(:)21 b(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)32 b FN(256)287 490 y(10.4)20 b(Global)12
b(register)j(allo)q(cation)39 b FM(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32
b FN(259)382 540 y(10.4.1)25 b(Building)13 b(the)h(in)o(terference)i
(graph)25 b FM(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g
(:)h(:)32 b FN(259)382 590 y(10.4.2)25 b(Chaitin's)13
b(metho)q(d)k FM(:)k(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)
g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(261)287 640
y(10.5)20 b(Implemen)o(ting)11 b(graph)j(coloring)38
b FM(:)20 b(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)32 b FN(264)382 689 y(10.5.1)25 b(Cho)q(osing)13
b(data)h(structures)41 b FM(:)20 b(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(264)287 739 y(10.6)20
b(Finding)13 b(out)h(more)k FM(:)i(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32
b FN(270)287 789 y(10.7)20 b(Exercises)44 b FM(:)20 b(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)
h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(271)224 880 y
FO(11)15 b(Instruction)d(Sc)o(hedulin)o(g)832 b(273)224
972 y(12)15 b(W)l(riting)e(Assem)o(bly)h(Language)717
b(275)224 1063 y(A)27 b(DCo)q(de)15 b(Reference)f(Man)o(ual)768
b(277)287 1113 y FN(A.1)31 b(Ov)o(erview)39 b FM(:)20
b(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32
b FN(277)287 1163 y(A.2)f(Lexical)14 b(issues)29 b FM(:)20
b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(277)382
1212 y(A.2.1)k(Reserv)o(ed)15 b(w)o(ords)f(and)g(predeclared)i(iden)o
(ti\014ers)11 b FM(:)21 b(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32
b FN(279)287 1262 y(A.3)f(File)14 b(syn)o(tax)f(and)h(seman)o(tics)28
b FM(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)g(:)h(:)f(:)g(:)h(:)32 b FN(279)382 1312 y(A.3.1)k(Primitiv)o(e)12
b(data)h(t)o(yp)q(es)26 b FM(:)20 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(279)382
1362 y(A.3.2)k(The)14 b(title)f FM(:)20 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)
g(:)h(:)32 b FN(281)382 1412 y(A.3.3)k(Declarations)10
b FM(:)21 b(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(281)287
1461 y(A.4)f(Pro)q(cedure)16 b(declarations)j FM(:)h(:)h(:)f(:)g(:)g(:)
h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)32 b FN(282)382 1511 y(A.4.1)k(Pro)q(cedure)16 b(headers)33
b FM(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)g(:)h(:)f(:)g(:)h(:)32 b FN(283)382 1561 y(A.4.2)k(Pro)q(cedure)16
b(b)q(o)q(dies)k FM(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(285)382
1611 y(A.4.3)k(Jump)13 b(tables)h FM(:)21 b(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)
32 b FN(285)287 1661 y(A.5)f(Statemen)o(ts)38 b FM(:)21
b(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(286)382
1711 y(A.5.1)k(Directiv)o(es)25 b FM(:)20 b(:)h(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)
h(:)32 b FN(286)382 1760 y(A.5.2)k(Instructions)21 b
FM(:)g(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)32 b FN(287)287 1810
y(A.6)f(Limitations)11 b(on)j(the)g(con)o(trol)g(\015o)o(w)31
b FM(:)21 b(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)32 b FN(298)p eop
%%Page: 6 6
6 5 bop 224 274 a FN(vi)1172 b FL(CONTENTS)p eop
%%Page: 1 7
1 6 bop 224 705 a FJ(Chapter)32 b(1)224 915 y FP(In)m(tro)s(duction)224
1134 y FN(This)13 b(b)q(o)q(ok)f(is)h(an)f(in)o(tro)q(duction)h(to)f
(co)q(de)i(generation.)k(Co)q(de)13 b(generation)g(is)f(the)h(pro)q
(cess)224 1184 y(b)o(y)h(whic)o(h)f(the)h FK(b)n(ackend)19
b FN(of)13 b(a)g(programming)d(language)i(compiler)g(transforms)h(a)g
(parsed)224 1234 y(and)18 b(analysed)g(program)f(in)o(to)g(ob)r(ject)i
(co)q(de.)31 b(W)m(e)18 b(shall)f(assume)h(that)g(the)g(means)g(b)o(y)
224 1284 y(whic)o(h)f(programs)e(are)i(parsed)h(and)e(analysed)g(in)g
(the)i(compiler)d FK(fr)n(ontend)21 b FN(are)c(already)224
1333 y(understo)q(o)q(d.)h(Chapter)10 b(2)g(is)f(a)g(short)i(c)o
(hapter)f(on)f(seman)o(tic)g(analysis,)g(whic)o(h)h(is)f(necessary)224
1383 y(only)14 b(for)f(consistency)i(with)f(the)g(rest)i(of)d(the)h
(material.)287 1436 y(Chapter)h(3)g(is)g(a)f(fairly)g(comprehensiv)o(e)
h(accoun)o(t)g(of)f(run)o(time)g(organization,)f(whic)o(h)224
1486 y(describ)q(es)k(the)f(execution)f(en)o(vironmen)o(t)f(for)g(whic)
o(h)h(our)g(compilers)f(generate)i(co)q(de.)21 b(In)224
1536 y(particular,)12 b(the)g(di\013eren)o(t)g(con)o(v)o(en)o(tions)g
(for)f(pro)q(cedure)j(calling)c(and)h(parameter)g(passing)224
1585 y(are)k(discussed)g(in)f(some)f(detail.)287 1638
y(Tw)o(o)j(di\013eren)o(t)i(metho)q(ds)e(of)g(co)q(de)h(generation)g
(are)g(discussed.)29 b(The)17 b(\014rst)g(metho)q(d)224
1688 y(in)o(v)o(olv)o(es)e(the)g(generation)h(of)e(an)h(in)o
(termediate)f(form)g(and)h(the)g(subsequen)o(t)i(generation)224
1738 y(of)f(co)q(de)h(using)f(an)f(in)o(terpretiv)o(e)i(automaton.)23
b(This)16 b(metho)q(d)f(is)h(quite)g(widely)g(used)h(in)224
1788 y(pro)q(duction)e(compilers,)e(but)i(has)f(b)q(een)i(little)e
(discussed)i(in)e(the)h(literature.)20 b(The)15 b(other)224
1837 y(metho)q(d)c(of)f(co)q(de)i(generation)f(is)g(b)q(ottom-up)e
(tree)k(rewriting.)k(This)10 b(metho)q(d)h(has)g(a)f(m)o(uc)o(h)224
1887 y(shorter)16 b(history)m(,)c(but)j(is)e(the)i(most)e(capable)g
(metho)q(d)g(curren)o(tly)i(kno)o(wn.)287 1940 y(A)g(n)o(um)o(b)q(er)g
(of)f(c)o(hapters)j(deal)e(with)g(the)h(sub)r(ject)h(of)d(co)q(de)i
(impro)o(v)o(emen)o(ts,)d(or)j FK(opti-)224 1990 y(mizations)j
FN(as)d(they)g(are)g(generally)f(called.)22 b(Another)16
b(c)o(hapter)h(deals)e(with)h(the)g(critical)224 2040
y(issue)d(of)e(register)i(allo)q(cation.)j(The)c(emphasis)f(is)h(on)f
(the)i(global)d(metho)q(ds)h(of)g(register)i(al-)224
2089 y(lo)q(cation,)f(whic)o(h)g(dep)q(end)i(on)f(the)g(same)f(kind)g
(of)g(computations)f(as)i(the)g(so-called)g FK(glob)n(al)224
2139 y(optimizations)p FN(.)224 2292 y FI(1.1)67 b(Assumed)21
b(bac)n(kground)224 2389 y FN(It)f(is)f(assumed)g(that)g(the)h(reader)h
(is)e(familia)o(r)e(with)i(fundamen)o(tals)e(of)i(the)h(theory)g(of)224
2438 y(programming)10 b(languages,)j(and)g(is)g(a)g(practised)i
(programmer.)h(A)d(fair)g(degree)i(of)d(famil-)224 2488
y(iarit)o(y)k(with)h(standard)g(algorithms)e(and)i(data)g(structures)i
(is)e(also)g(assumed.)27 b(Most)17 b(of)224 2538 y(the)h(examples)d(in)
h(the)h(b)q(o)q(ok)g(whic)o(h)f(use)i(high)e(lev)o(el)g(programmi)o(ng)
e(language)h(use)j(the)224 2588 y(language)f FK(Mo)n(dula-2)6
b FN(,)18 b(ho)o(w)o(ev)o(er,)g(for)g(most)e(purp)q(oses)j(a)e(familia)
o(rit)o(y)e(with)i(either)h FK(A)n(da)224 2638 y FN(or)g
FK(Pasc)n(al)k FN(w)o(ould)17 b(serv)o(e)i(almost)d(as)i(w)o(ell.)28
b(It)18 b(is)g(also)f(assumed)g(that)h(the)g(reader)h(has)224
2688 y(some)d(famili)o(arit)o(y)d(with)j(the)g(structure)j(and)d(syn)o
(tax)g(of)f FK(ANSI)i(C)p FN(,)e(although)h(exp)q(ertise)935
2793 y(1)p eop
%%Page: 2 8
2 7 bop 224 274 a FN(2)794 b FL(CHAPTER)14 b(1.)31 b(INTR)o(ODUCTION)
224 390 y FN(in)14 b(programmi)o(ng)d(in)i(this)h(language)f(is)h(not)g
(assumed.)287 440 y(Some)i(asp)q(ects)j(of)e(compilation)d(and)j(run)o
(time)g(structure)i(of)e(the)h(so-called)f FK(Obje)n(ct)224
490 y(Oriente)n(d)22 b FN(languages)c(are)g(describ)q(ed)i(also.)31
b(In)18 b(these)h(sections,)h(no)e(prior)g(familiari)o(t)o(y)224
540 y(with)c(suc)o(h)h(languages)e(is)h(assumed.)287
590 y(The)k(b)q(o)q(ok)g(uses)i(an)d(example)g(in)o(termediate)h(form)e
(called)i FK(DCo)n(de)k FN(whic)o(h)c(is)g(fully)224
640 y(describ)q(ed)12 b(in)c(an)h(app)q(endix,)h(and)f(has)h(a)f
(publicly)f(a)o(v)n(ailable)f(reference)12 b(do)q(cumen)o(t.)k(There)
224 690 y(is)g(also,)f(inevitably)m(,)f(a)i(fair)f(amoun)o(t)f(of)h
(assem)o(bly)f(language.)23 b(It)16 b(is)g(assumed)f(that)h(the)224
739 y(reader)c(is)e(at)g(least)g(familia)o(r)e(with)i(the)g(concepts)i
(of)e(assem)o(bly)f(language,)g(and)h(of)g(mac)o(hine)224
789 y(organization.)287 839 y(In)17 b(some)f(of)h(the)h(c)o(hapters)h
(of)d(the)i(b)q(o)q(ok,)f(some)g(formal)e(notations)i(are)g(necessary)m
(.)224 889 y(Most)i(of)f(these)i(notations)e(are)h(explained)g(in)f
(place,)h(and)f(in)h(an)o(y)f(case)h(rely)g(only)f(on)224
939 y(mathematical)10 b(constructs)16 b(whic)o(h)d(should)g(b)q(e)h
(famili)o(ar)c(to)k(ev)o(ery)g(studen)o(t)g(of)f(computer)224
989 y(science.)20 b(While)11 b(formal)f(material)h(has)h(b)q(een)i(k)o
(ept)f(to)f(a)g(minim)o(um)n(,)e(the)j(remaining)d(uses)224
1038 y(of)k(mathematical)c(notation)j(are)i(b)q(oth)f(necessary)i(and)d
(helpful.)287 1088 y(This)j(b)q(o)q(ok)g(do)q(es)h(not)f(co)o(v)o(er)h
(the)g(theory)g(of)f(formal)e(languages,)i(parsing)g(and)g(tree)224
1138 y(building.)26 b(It)17 b(is)g(assumed)f(that)h(the)h(reader)g(is)f
(either)g(familiar)d(with)j(the)g(theory)g(and)224 1188
y(practice)f(of)e(suc)o(h)i(matters,)e(or)h(is)g(prepared)h(to)e
(abstract)i(suc)o(h)g(things)e(a)o(w)o(a)o(y)g(and)h(start)224
1238 y(with)f(an)g(already)f(constructed)j(abstract)f(syn)o(tax)f
(tree.)224 1376 y FI(1.2)67 b(The)22 b(reference)g(arc)n(hitecture)224
1467 y FN(In)c(order)g(to)f(b)q(e)h(able)f(to)g(treat)h(the)g(sub)r
(ject)g(in)f(a)g(structured)i(manner,)e(a)g FO(reference)224
1517 y(arc)o(hitecture)12 b FN(is)i(in)o(tro)q(duced.)21
b(This)15 b(is)f(the)h(example)f(whic)o(h)g(is)h(treated)h(in)e
(detail.)19 b(Of)224 1567 y(course)14 b(there)f(are)f(a)g(large)f(n)o
(um)o(b)q(er)g(of)h(alternativ)o(e)f(arc)o(hitectures.)20
b(In)12 b(particular,)f(man)o(y)224 1617 y(compilers)16
b(fold)g(together)h(sev)o(eral)h(la)o(y)o(ers)e(of)g(the)i(reference)h
(arc)o(hitecture,)f(or)f(p)q(erform)224 1666 y(the)e(op)q(erations)f
(in)f(a)h(di\013eren)o(t)h(order.)287 1716 y(The)10 b(question)h(of)e
(what)h(is)g(usually)g(called)g FK(c)n(o)n(de)h(optimization)g
FN(is)f(ignored)g(for)f(the)i(mo-)224 1766 y(men)o(t.)17
b(In)d(an)o(y)e(case,)i(this)g(name)e(has)h(b)q(een)i(rather)f(badly)f
(c)o(hosen.)18 b(Although)13 b(there)i(are)224 1816 y(man)o(y)c
(optimalit)n(y)e(results)14 b(whic)o(h)e(ha)o(v)o(e)g(b)q(een)h(pro)o
(v)o(ed)f(ab)q(out)g(co)q(de)h(generation)f(these)i(do)224
1866 y(not)e(relate)f(to)g(realistic)h(practice.)18 b(A)11
b(m)o(uc)o(h)f(b)q(etter)j(name)d(w)o(ould)g(b)q(e)i
FK(c)n(o)n(de)h(impr)n(ovement)p FN(.)287 1916 y(The)g(p)q(ositions)h
(at)f(whic)o(h)g(co)q(de)h(impro)o(v)o(emen)o(t)d(transformations)h(ma)
o(y)f(b)q(e)j(placed)g(in)224 1966 y(the)g(reference)i(arc)o(hitecture)
f(are)f(sho)o(wn)f(in)g(\014gure)g(1.1.)k(The)d(sub)r(ject)h(of)d(co)q
(de)i(impro)o(v)o(e-)224 2015 y(men)o(t)f(will)g(b)q(e)h(treated)h(in)f
(detail)f(in)h(later)f(c)o(hapters.)224 2153 y FI(1.3)67
b(In)n(termediate)23 b(F)-6 b(orms)224 2245 y FN(Eac)o(h)17
b(of)e(the)i(la)o(y)o(ers)f(in)g(the)h(reference)h(arc)o(hitecture)g
(in)o(v)o(olv)o(e)d(the)i(de\014nition)e(of)h(an)g(in-)224
2294 y(termediate)e(represen)o(tation)i(of)d(the)h(program)f(b)q(eing)g
(compiled.)224 2411 y FH(1.3.1)56 b(Abstract)19 b(syn)n(tax)f(tree)224
2488 y FN(The)f(form)d(of)i(the)g(abstract)h(syn)o(tax)f(tree)h(\()p
FK(AST)6 b FN(\))16 b(is)g(not)g(dealt)g(with)g(in)f(detail)h(in)f
(this)224 2538 y(b)q(o)q(ok,)e(b)q(eing)g(the)h(concern)h(of)e(the)h
(compiler)e(fron)o(t-end.)18 b(This)13 b(b)q(o)q(ok)g(is)g(concerned)j
(with)224 2588 y(the)21 b(form)d(of)i(the)h FK(AST)6
b FN(,)18 b(only)i(to)g(the)g(exten)o(t)h(that)f(it)g(is)g(necessary)i
(to)e(understand)224 2638 y(ho)o(w)c(to)g(tra)o(v)o(erse)i(the)f(trees)
h(emitting)c(the)j(co)q(de)g(of)e(the)i(in)o(termediate)f(represen)o
(tation)224 2688 y(\()p FK(IR)r FN(\))e(prop)q(er.)19
b(It)13 b(su\016ces)h(to)g(note)f(that)g(the)h(form)e(will)g(usually)g
(b)q(e)i(a)f(represen)o(tation)i(in)p eop
%%Page: 3 9
3 8 bop 224 274 a FL(1.3.)31 b(INTERMEDIA)m(TE)14 b(F)o(ORMS)826
b FN(3)432 546 y
 16182312 29141319 0 0 16182312 29141319 startTexFig
 432 546 a
%%BeginDocument: refarch.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-36.0 452.0 translate 0.900 -0.900 scale
1.000 setlinewidth
	[6.000000] 0 setdash
% Polyline
n 313 429 m 313 409 l  173 409 l  173 429 l  clp gs col-1 s gr
	[] 0 setdash
/Times-Bold findfont 11.00 scalefont setfont
183 422 m 
gs 1 -1 scale (optional optimization step) col-1 show gr
	[6.000000] 0 setdash
% Polyline
n 313 349 m 313 329 l  173 329 l  173 349 l  clp gs col-1 s gr
	[] 0 setdash
/Times-Bold findfont 11.00 scalefont setfont
183 342 m 
gs 1 -1 scale (optional optimization step) col-1 show gr
	[6.000000] 0 setdash
% Polyline
n 313 268 m 313 248 l  173 248 l  173 268 l  clp gs col-1 s gr
	[] 0 setdash
/Times-Bold findfont 11.00 scalefont setfont
183 261 m 
gs 1 -1 scale (optional optimization step) col-1 show gr
	[6.000000] 0 setdash
% Polyline
n 313 189 m 313 169 l  173 169 l  173 189 l  clp gs col-1 s gr
	[] 0 setdash
/Times-Bold findfont 11.00 scalefont setfont
183 182 m 
gs 1 -1 scale (optional optimization step) col-1 show gr
% Polyline
n 239 79 m 239 39 l  79 39 l  79 79 l  clp gs col-1 s gr
% Polyline
n 239 159 m 239 119 l  79 119 l  79 159 l  clp gs col-1 s gr
% Polyline
n 239 239 m 239 199 l  79 199 l  79 239 l  clp gs col-1 s gr
% Polyline
n 239 319 m 239 279 l  79 279 l  79 319 l  clp gs col-1 s gr
% Polyline
n 239 399 m 239 359 l  79 359 l  79 399 l  clp gs col-1 s gr
% Polyline
n 239 479 m 239 439 l  79 439 l  79 479 l  clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 159 19 m 159 39 l gs col-1 s gr
n 161.000 31.000 m 159.000 39.000 l 157.000 31.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 79 m 159 119 l gs col-1 s gr
n 161.000 111.000 m 159.000 119.000 l 157.000 111.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 159 m 159 199 l gs col-1 s gr
n 161.000 191.000 m 159.000 199.000 l 157.000 191.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 239 m 159 279 l gs col-1 s gr
n 161.000 271.000 m 159.000 279.000 l 157.000 271.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 319 m 159 359 l gs col-1 s gr
n 161.000 351.000 m 159.000 359.000 l 157.000 351.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 399 m 159 439 l gs col-1 s gr
n 161.000 431.000 m 159.000 439.000 l 157.000 431.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 479 m 159 499 l gs col-1 s gr
n 161.000 491.000 m 159.000 499.000 l 157.000 491.000 l gs 2 setlinejoin col-1 s gr
/Times-Bold findfont 11.00 scalefont setfont
136 462 m 
gs 1 -1 scale (assembler) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
129 381 m 
gs 1 -1 scale (register binder) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
100 302 m 
gs 1 -1 scale (interpretive code selector) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
134 222 m 
gs 1 -1 scale (tree walker) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
107 62 m 
gs 1 -1 scale (front-end tree builder) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
116 142 m 
gs 1 -1 scale (attribute evaluator) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
91 502 m 
gs 1 -1 scale (object file out) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
71 422 m 
gs 1 -1 scale (assembly language) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
39 342 m 
gs 1 -1 scale (virtual assembly language) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
81 262 m 
gs 1 -1 scale (abstract stack IR) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
62 181 m 
gs 1 -1 scale (attributed syntax tree) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
69 102 m 
gs 1 -1 scale (abstract syntax tree) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
97 21 m 
gs 1 -1 scale (source file in) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 600 2483 a FN(Figure)14 b(1.1:)j(the)e(reference)h(arc)o(hitecture)p
eop
%%Page: 4 10
4 9 bop 224 274 a FN(4)794 b FL(CHAPTER)14 b(1.)31 b(INTR)o(ODUCTION)
224 390 y FN(dynamic)10 b(memory)e(of)j(the)g(whole)g(program,)f(or)h
(p)q(erhaps)h(just)f(one)g(pro)q(cedure)i(at)e(a)g(time.)224
440 y(The)17 b(form)d(will)h(probably)g(b)q(e)i(language)e(dep)q(enden)
o(t,)j(and)e(w)o(e)g(shall)f(assume)h(that)g(an)o(y)224
490 y(attributes)i(whic)o(h)f(the)h(treew)o(alk)o(er)g(requires)g(are)g
(ev)n(aluated)e(and)h(stored)h(in)f(the)h(treee)224 540
y(during)c(the)g(static)h(seman)o(tic)e(analysis)g(of)g(the)i(program.)
224 676 y FH(1.3.2)56 b(Abstract)19 b(stac)n(k)f(in)n(termediate)e
(represen)n(tation)224 759 y FN(It)21 b(is)g(this)f(lev)o(el)h(of)f
(represen)o(tation)i(of)e(the)h(program)e(whic)o(h)i(is)f(usually)g
(called)g FO(the)224 809 y FN(in)o(termediate)f(represen)o(tation,)j
(or)d FK(IR)r FN(.)f(The)i(imp)q(ortance)e(of)h(this)g(lev)o(el)g(is)g
(that)h(it)e(is)224 859 y(here)k(that)f(the)g(cleanest)h(separation)f
(is)f(p)q(ossible)h(of)f(the)h(language)f(dep)q(enden)o(t)i(and)224
909 y(indep)q(enden)o(t)e(part)e(of)f(the)h(pro)q(cessing,)i(and)d(the)
i(mac)o(hine)d(dep)q(enden)o(t)k(and)e(mac)o(hine)224
959 y(indep)q(enden)o(t)e(parts.)287 1012 y(There)f(are)f(t)o(w)o(o)g
(main)e(forms)g(of)h FK(IR)j FN(in)e(common)d(use,)j(but)g(this)g(b)q
(o)q(ok)g(concen)o(trates)224 1062 y(on)i(just)g(one.)25
b(The)16 b(c)o(hosen)h(form)e(is)g(one)i(based)f(on)g(the)h
(instruction)f(set)h(for)e(a)h(virtual)224 1112 y(mac)o(hine)f(based)h
(on)f(a)g(push-do)o(wn)h(stac)o(k.)23 b(All)15 b(ev)n(aluation)f(of)h
(expressions)i(is)f(done)g(on)224 1162 y(this)e FK(abstr)n(act)f(stack)
p FN(.)18 b(W)m(e)13 b(call)f(this)h(form)f(an)h(abstract)h(stac)o(k)f
(form)e(b)q(ecause)k(it)e(refers)h(to)224 1212 y(an)g(idealized)f(stac)
o(k)h(mac)o(hine,)e(a)h FK(virtual)h(machine)j FN(with)d(most)e(of)h
(the)h(messy)g(details)f(of)224 1261 y(all)f(real)i(mac)o(hines)e
(hidden)h(a)o(w)o(a)o(y)m(.)k(In)c(particular)g(w)o(e)h(use)g
(abstractions)f(for)g(suc)o(h)h(things)224 1311 y(as)j(parameter)f
(passing,)g(so)g(that)h(w)o(e)f(ma)o(y)e(handle)i(mac)o(hine)f(con)o(v)
o(en)o(tions)i(whic)o(h)f(pass)224 1361 y(parameters)e(in)g
(di\013ering)f(w)o(a)o(ys.)287 1414 y(The)k(particular)g(form)f(of)h
(abstract)h(stac)o(k)g FK(IR)h FN(used)f(here)g(is)g(called)f
FK(DCo)n(de)s FN(.)28 b(This)224 1464 y(form)10 b(is)h(used)h(in)f(all)
f(the)i FO(gardens)g(p)q(oin)o(t)d FN(compilers,)h(and)h(is)h(fully)e
(sp)q(eci\014ed)j(in)e(a)g(main-)224 1514 y(tained)j(rep)q(ort)h(on)f
(the)h(in)o(ternet.)k(The)14 b FK(DCo)n(de)k FN(form)12
b(is)i(rather)h(larger)f(than)g(one)g(w)o(ould)224 1564
y(ideally)j(c)o(hose)i(for)e(purp)q(oses)j(of)d(exp)q(osition,)h(p)q
(ossessing)h(o)o(v)o(er)f(one)g(h)o(undred)h(instruc-)224
1614 y(tions.)f(Ho)o(w)o(ev)o(er,)12 b(against)f(that)h(m)o(ust)f(b)q
(e)h(balanced)g(the)g(adv)n(an)o(tage)f(of)h(b)q(eing)f(complete,)224
1664 y(and)i(ha)o(ving)f(pro)o(v)o(ed)h(adequate)h(to)f(the)h(demands)e
(of)g(m)o(ultiple)f(languages)i(and)g(m)o(ultiple)224
1713 y(targets.)19 b(F)m(urthermore,)11 b(the)i(to)q(ols)e(whic)o(h)h
(are)g(a)o(v)n(ailable)d(for)j(use)g(with)g(this)f(b)q(o)q(ok)h(all)e
(use)224 1763 y(this)k FK(IR)r FN(.)287 1817 y(There)d(is)g(a)f
(further)i(option)d(a)o(v)n(ailable)g(for)h(co)q(de)h(selection,)h
(whic)o(h)e(uses)i(the)f(tree)h(form)224 1867 y(itself)i(as)g(an)g(in)o
(termediate)f(represen)o(tation.)20 b(Suc)o(h)15 b(co)q(de)g(selectors)
h(w)o(ork)d(b)o(y)h FK(b)n(ottom-up)224 1916 y(tr)n(e)n(e)d(r)n
(ewriting,)e FN(and)i(pro)o(vide)f(the)h(most)e(p)q(o)o(w)o(erful)h
(pattern)h(matc)o(hing)e(metho)q(d)h(a)o(v)n(ailable)224
1966 y(at)k(presen)o(t.)20 b(These)15 b(co)q(de)g(generators)g(are)f
(treated)h(in)f(c)o(hapter)g(6.)224 2102 y FH(1.3.3)56
b(Virtual)18 b(assem)n(bly)f(language)224 2186 y FN(The)12
b(result)h(of)e(co)q(de)h(generation,)g(in)f(the)h(reference)i(arc)o
(hitecture)g(is)d FO(virtual)g(assem)o(bly)224 2236 y(language)16
b FN(\()p FK(V)l(AL)p FN(\).)h(This)g(language)f(is)i(c)o(hosen)g(at)f
(the)h(con)o(v)o(enience)h(of)e(the)h(compiler)224 2285
y(writer.)25 b(It)16 b(is)g(usually)f(similar)f(to)i(the)g(actual)g
(assem)o(bly)f(language)g(of)g(the)i(target)f(ma-)224
2335 y(c)o(hine,)21 b(except)h(that)d(the)i(n)o(um)o(b)q(er)e(of)g
(registers)i(is)f(unlimited.)33 b(This)20 b(allo)o(ws)e(for)i(the)224
2385 y(generation)14 b(of)g(co)q(de)g(to)g(b)q(e)h(carried)f(out)g
(separately)h(from)d(the)i(allo)q(cation)e(of)i(registers.)287
2438 y(In)i(some)f(cases,)i(it)e(is)h(con)o(v)o(enien)o(t)g(to)g(mo)q
(dify)e(the)i(instruction)g(set)h(of)f(the)g FK(V)l(AL)f
FN(to)224 2488 y(allo)o(w)e(for)h(more)f(con)o(v)o(enien)o(t)i(pro)q
(cessing.)20 b(F)m(or)14 b(example,)e(in)i(the)h(case)g(of)f(the)g
FK(Intel-x86)224 2538 y FN(arc)o(hitecture)h(the)e(same)e(assem)o(bly)h
(language)f(mnemonic)f(\\)p FG(movl)p FN(")h(\(mo)o(v)o(e)g(long)h(w)o
(ord\))g(is)224 2588 y(used)g(for)e(b)q(oth)h(loading)e(32-bit)h
(registers)i FK(fr)n(om)e FN(memory)m(,)e(and)i(for)h(storing)f(suc)o
(h)i(registers)224 2638 y FK(to)j FN(memory)m(.)k(F)m(or)c(this)g(mac)o
(hine)f(the)i(pro)q(cessing)g(of)f(the)g(co)q(de)h(generator)g(is)f
(simpler)f(if)224 2688 y(the)19 b(t)o(w)o(o)e(cases)i(are)g(k)o(ept)f
(separate,)h(b)o(y)f(the)g(use)h(of)e(t)o(w)o(o)h(\014ctional)f
(instructions)h(\\)p FG(lw)p FN(")p eop
%%Page: 5 11
5 10 bop 224 274 a FL(1.3.)31 b(INTERMEDIA)m(TE)14 b(F)o(ORMS)826
b FN(5)224 390 y(\(load)16 b(w)o(ord\),)h(and)f(\\)p
FG(sw)p FN(")g(\(store)h(w)o(ord\).)26 b(It)17 b(is)f(a)g(trivial)f
(matter)h(to)g(output)h(the)g(same)224 440 y(\014nal)d(\\)p
FG(movl)p FN(")e(instruction)i(for)g(virtual)f(instructions)i(of)e(b)q
(oth)h(kinds.)224 558 y FO(The)i(single)d(assignmen)o(t)g(rule)224
638 y FN(Although)20 b(it)f(is)h(not)g(a)g(necessary)i(consequence)g
(of)d(the)i(use)g(of)e FK(V)l(AL)h FN(w)o(e)g(shall)f(also)224
688 y(implemen)o(t)14 b(a)j(restriction)g(in)g(our)g(co)q(de)g
(generators)h(whic)o(h)f(ensure)h(that)f(eac)o(h)g(virtual)224
738 y(register)f(has)f(a)f(single)g(de\014nition)h(p)q(oin)o(t.)k(This)
c(rule)f(m)o(ust)g(b)q(e)h(strictly)g(observ)o(ed,)g(since)224
787 y(some)g(of)g(the)g(simple)f(register)j(allo)q(cation)c(strategies)
k(rely)e(on)h(this)f(prop)q(ert)o(y)m(.)23 b(In)15 b(cases)224
837 y(where)20 b(it)e(is)g(logically)e(necessary)k(to)e(allo)q(cate)g
(di\013eren)o(t)h(v)n(alues)f(to)g(the)h(same)e(virtual)224
887 y(register,)k(w)o(e)d(will)f(use)i(sp)q(ecial)g(\\non-de\014ning")f
(assignmen)o(ts)f(to)h(mark)f(the)i(di\013eren)o(t)224
937 y(seman)o(tics.)224 1063 y FH(1.3.4)56 b(A)19 b(note)f(on)h(assem)n
(bly)e(language)h(syn)n(tax)224 1143 y FN(Since)d(w)o(e)f(deal)g(with)f
(a)h(v)n(ariet)o(y)g(of)f(di\013eren)o(t)i(mac)o(hine)d(arc)o
(hitectures)17 b(in)c(the)i(examples,)224 1193 y(it)e(is)f(inevitable)g
(that)h(w)o(e)g(m)o(ust)e(deal)h(with)h(a)f(v)n(ariet)o(y)g(of)g(assem)
o(bly)g(language)f(notations.)224 1242 y(Unfortunately)m(,)18
b(there)g(is)f(no)g(standard)h(w)o(a)o(y)f(in)g(whic)o(h)g(suc)o(h)h
(languages)f(are)g(written.)224 1292 y(Ev)o(en)i(for)f(a)g(single)f
(mac)o(hine)g(arc)o(hitecture,)k(suc)o(h)e(as)f FK(iapx386)25
b FN(there)19 b(is)f(no)g(standard)224 1342 y(notation,)j(and)f
(di\013eren)o(t)h(assem)o(blers)f(for)g(this)g(arc)o(hitecture)i(use)f
(di\013eren)o(t)g(op)q(erand)224 1392 y(orders,)15 b(and)f(ev)o(en)g
(di\013eren)o(t)h(w)o(a)o(ys)f(of)f(sp)q(ecifying)h(the)g(op)q(erand)h
(size.)287 1443 y(In)c(order)h(to)e(minimi)o(ze)f(the)j(problems)e(in)g
(c)o(hanging)h(from)e(one)i(assem)o(bler)g(to)g(another)224
1493 y(this)k(b)q(o)q(ok)g(adopts)g(a)g(uniform)d(con)o(v)o(en)o(tion)j
(for)f(all)g(assem)o(bly)g(languages.)20 b(In)15 b(this)g(con-)224
1543 y(v)o(en)o(tion)h(the)g(op)q(erand)h(size)f(is)g(implicit)d(in)i
(the)i(op)q(eration)f(co)q(de,)g(and)g(the)g(destination)224
1593 y(op)q(erand)f(alw)o(a)o(ys)e(comes)g(last)h(on)f(the)i(line.)287
1645 y(This)20 b(notation)f(is)h(di\013eren)o(t)h(to)f(that)g(used)h(b)
o(y)f FK(MIPS)26 b FN(and)20 b(b)o(y)f(the)i(widely-used)224
1694 y FK(MASM)f FN(assem)o(bler)11 b(for)h FK(iapx386)p
FN(.)18 b(It)12 b(follo)o(ws)e(that)i(the)h(output)f(whic)o(h)f(is)h
(observ)o(ed)h(from)224 1744 y(some)f(of)f(the)i(to)q(ols)f(whic)o(h)g
(are)h(describ)q(ed)h(here)f(will)e(b)q(e)i(di\013eren)o(t)g(to)f(that)
g(sho)o(wn)h(on)f(the)224 1794 y(page.)23 b(This)15 b(is)g(a)g(pit)o(y)
m(,)g(but)g(is)g(in\014nitely)g(preferable)h(to)g(ha)o(ving)e(to)h
(switc)o(h)h(formatting)224 1844 y(con)o(v)o(en)o(tions,)e(sometimes)e
(ev)o(en)j(in)e(mid-page.)287 1895 y(The)h(assem)o(bly)f(language)g
(notation)g(has)h(the)g(form)e(|)354 1992 y FF(opcode)f
FE(input-op)n(er)n(a)o(nd\()o(s\))g(output-op)n(e)o(r)n(and)o(\(s\))224
2090 y FN(Op)q(erands)j(are)f(comma-separated,)e(and)h(the)h(lexical)f
(con)o(v)o(en)o(tions)g(treat)i(ev)o(erything)f(on)224
2140 y(the)i(line)e(after)h(a)g(semicolon)e(as)i(a)g(commen)o(t.)287
2192 y(Addressing)d(mo)q(des)e(use)i(sym)o(b)q(olic)d(names,)i(n)o
(umeric)f(o\013sets,)j(and)e(address)h(registers.)224
2242 y(Sym)o(b)q(olic)i(names)h(are)h(written)h(as)f(iden)o(ti\014ers,)
g(with)f(n)o(umeric)g(o\013sets)j(attac)o(hed)e(to)g(the)224
2292 y(sym)o(b)q(olic)i(names,)h(if)f(an)o(y)m(.)30 b(Address)20
b(register)g(op)q(erands)f(are)f(sho)o(wn)h(in)f(paren)o(theses,)224
2341 y(comma)c(separated)k(in)e(those)h(cases)h(where)g(mac)o(hine)d
(ha)o(v)o(e)h(m)o(ulti-register)g(addressing)224 2391
y(mo)q(des.)287 2443 y(Th)o(us)c(the)h(single)f(address)i(mo)q(de)d(in)
h FK(MIPS)18 b FN(\(indexed\))13 b(is)f(denoted)h(as)g(in)f(the)g
(follo)o(w-)224 2493 y(ing)i(example)e(|)354 2589 y FF(lw)19
b(globVar+24)o(\(r4)o(\),)o(r5)224 2688 y FN(whic)o(h)14
b(loads)f(register-5)i(with)f(the)g(32-bit)f(w)o(ord)h(at)g(the)g
(address)h(|)p eop
%%Page: 6 12
6 11 bop 224 274 a FN(6)794 b FL(CHAPTER)14 b(1.)31 b(INTR)o(ODUCTION)
354 381 y FD(address)14 b(of)f FF(globVar)p FD(,)d(plus)354
427 y(o\013set)k(24,)f(plus)354 472 y(con)o(ten)o(ts)h(of)f(index)h
(register)g FF(r4)p FD(.)224 561 y FN(In)c(the)g(case)g(of)f
FK(iapx386)d FN(,)k(the)g(most)f(general)g(addressing)h(mo)q(de)f
(\(scaled,)h(based,)h(indexed\))224 611 y(is)j(denoted)h(as)f(in)f(the)
i(follo)o(wing)c(example)i(|)354 697 y FF(lw)19 b(globVar+24)o(\(es)o
(i,)o(edi)o(,4)o(\),e)o(ax)224 786 y FN(In)d(this)g(example,)f(the)h
(32-bit)f(accum)o(ulator)f FG(eax)i FN(is)f(loaded)h(with)f(the)i
(\(long\))e(w)o(ord)g(at)224 836 y(address)h(|)354 912
y FD(address)e(of)f FF(globVar)p FD(,)d(plus)354 958
y(o\013set)k(24,)f(plus)354 1004 y(con)o(ten)o(ts)h(of)f(base)g
(address)h(register)g FF(esi)p FD(,)e(plus)354 1049 y(con)o(ten)o(ts)i
(of)f(index)h(register)g FF(edi)p FD(,)d(scaled)k(b)o(y)e(four.)224
1136 y FN(In)18 b(the)g FK(Intel-x86)23 b FN(case,)18
b(un)o(used)h(address)f(register)h(\014elds)e(ma)o(y)f(b)q(e)i(left)f
(empt)o(y)f(in)h(the)224 1186 y(comma)11 b(separated)16
b(list)d(within)g(the)i(paren)o(theses.)224 1323 y FI(1.4)67
b(Ho)n(w)21 b(to)h(a)n(v)n(oid)i(co)r(de)d(generation)i(en)n(tirely)224
1414 y FN(The)16 b(strings)f(in)g(the)g FK(IR)i FN(con)o(tain)e(all)e
(of)i(the)g(seman)o(tic)f(con)o(ten)o(t)i(of)e(the)i(original)d(source)
224 1463 y(programs.)20 b(It)15 b(is)g(p)q(ossible)g(to)f(a)o(v)o(oid)g
(an)o(y)g(further)i(w)o(ork)f(in)f(language)g(transformations)224
1513 y(in)20 b(a)f(few)h(sp)q(ecial)g(cases.)37 b(Firstly)m(,)21
b(it)e(is)h(p)q(ossible)g(for)f(the)i(\014nal)e(target)h(mac)o(hine)e
(to)224 1563 y(directly)12 b(execute)h(the)g FK(IR)r
FN(.)d(Historically)m(,)g(mac)o(hines)h(ha)o(v)o(e)g(b)q(een)i(built)d
(whic)o(h)i(ha)o(v)o(e)f(stac)o(k-)224 1613 y(lik)o(e)16
b(arc)o(hitectures,)j(and)e(in)f(these)i(cases)g(it)e(is)h(p)q(ossible)
g(for)f(the)h FK(IR)i FN(to)d(b)q(e)h(the)h(actual)224
1663 y(mac)o(hine)13 b(language.)287 1712 y(It)18 b(is)g(also)g(p)q
(ossible)g(to)h(write)f(an)g(in)o(terpreter)i(program)d(whic)o(h)h(p)q
(erforms)g(the)h(in-)224 1762 y(structions)f(of)e(the)i
FK(IR)g FN(b)o(y)f(manipulating)c(a)k(stac)o(k)g(data)f(structure)j(at)
e(run)o(time.)25 b(This)224 1812 y(concept)13 b(w)o(as)f(the)g(basis)g
(of)e(the)j FK(UCSD)g(Pasc)n(al)e FN(series)i(of)e(compilers.)16
b(A)c(single)f(fron)o(t-end)224 1862 y(pro)q(duced)j
FK(P-Co)n(de)p FN(,)f(and)f(for)g(eac)o(h)h(target)g(mac)o(hine)e(it)i
(w)o(as)f(only)g(necessary)i(to)f(write)g(an)224 1912
y(in)o(terpreter.)20 b(The)15 b(in)o(terpreter)g(w)o(as)f(usually)f
(written)i(in)e(assem)o(bly)g(language.)287 1961 y(In)o(terpreters)18
b(tend)e(to)g(ha)o(v)o(e)f(a)g(fairly)f(high)h(o)o(v)o(erhead)h(in)f
(their)h(execution.)24 b(F)m(or)15 b(ex-)224 2011 y(ample,)10
b(an)h(in)o(terpreter)i(executing)f FK(DCo)n(de)j FN(on)c(an)g
FK(Intel-x86)17 b FN(pro)q(cessor)c(executes)g(ab)q(out)224
2061 y(10\045)h(of)g(the)h(sp)q(eed)g(of)f(nativ)o(e)g(co)q(de)h(on)f
(the)h(same)f(mac)o(hine.)k(This)c(o)o(v)o(erhead)h(is)f(caused)224
2111 y(b)o(y)i(the)g(n)o(um)o(b)q(er)f(of)g(instructions)h(of)f(the)h
(in)o(terpretiv)o(e)h FK(fetch-exe)n(cute)e FN(lo)q(op.)23
b(This)15 b(lo)q(op)224 2161 y(rep)q(eatedly)g(fetc)o(hes)g(the)f(next)
g(instruction)g(of)f(the)h FK(IR)r FN(,)e(and)i(uses)g(this)g(as)f(an)h
(index)f(in)o(to)224 2211 y(a)j(dispatc)o(h)g(table.)23
b(The)16 b(dispatc)o(h)g(table)f(simply)f(p)q(oin)o(ts)h(to)g(the)i
(mac)o(hine)d(co)q(de)i(whic)o(h)224 2260 y(manipulates)d(the)h(stac)o
(k)g(according)g(to)g(the)h(actual)e(instructions)i(of)e(eac)o(h)h(co)q
(de.)307 2310 y(Just)22 b(as)e(a)g(matter)g(of)g(in)o(terest,)j
(\014gure)e(1.2)e(has)i(a)f(fragmen)o(t)f(of)h(the)h
FK(Intel-x86)224 2360 y FN(in)o(terpreter)f(for)e FK(DCo)n(de)s
FN(,)h(and)f(the)h(co)q(de)g(for)f(one)g(simple)f(instruction.)31
b(In)18 b(this)g(case,)224 2410 y(16-bit)13 b(segmen)o(t,)g
FK(iap386)i FN(co)q(de)g(is)e(sho)o(wn.)224 2547 y FI(1.5)67
b(A)22 b(little)i(bit)g(of)d(dualit)n(y)224 2638 y FN(One)f(of)e(the)h
(recurring)h(themes)f(in)f(co)q(de)i(generation)f(is)f(the)h(p)q
(ossiblit)o(y)f(of)g(replacing)224 2688 y(op)q(erations)12
b(at)f(compile)e(time)h(with)h(op)q(erations)g(at)g(run)o(time,)f(and)h
(con)o(v)o(ersely)m(.)18 b(Consider)p eop
%%Page: 7 13
7 12 bop 224 274 a FL(1.5.)31 b(A)14 b(LITTLE)g(BIT)g(OF)h(DUALITY)752
b FN(7)p 224 396 1468 2 v 223 442 2 46 v 347 428 a FF(;)20
b(es:\(di\))d(points)g(to)i(the)f(next)g(DCode)g(instructi)o(on)p
1691 442 V 223 488 V 347 474 a(;)i(ds:\(si\))d(points)g(to)i(the)f(top)
h(of)f(the)h(evaluatio)o(n)e(stack)g(\(e-stack\))p 1691
488 V 223 533 V 249 520 a(...)p 1691 533 V 223 579 V
249 565 a(nextDCode:)369 b(;)19 b(Fetch)f(operation)e(of)j(interprete)o
(r)p 1691 579 V 223 625 V 308 611 a(movzbw)e(es:\(di\),bx)173
b(;)19 b(get)g(next)f(DCode)g(&)h(zero)f(extend)f(to)i(word)p
1691 625 V 223 670 V 308 657 a(inc)58 b(di)352 b(;)19
b(index)f(to)h(next)f(dcode)p 1691 670 V 223 716 V 308
702 a(jmp)58 b(cs:DcodeT)o(abl)o(e\()o(bx,)o(bx)o(\);)16
b(jump)i(to)h(code)f(through)f(dispatch)g(table)p 1691
716 V 223 762 V 249 748 a(...)p 1691 762 V 223 807 V
249 794 a(andWrd:)37 b(;)19 b(dcode)37 b(-)20 b(bitwise)c(AND)j(of)g
(the)f(top)h(two)f(words)g(of)h(the)f(e-stack.)p 1691
807 V 223 853 V 426 839 a(;)h(method)e(-)j(pops)e(the)g(top)h(two)f
(32-bit)f(words)h(from)g(the)h(e-stack,)p 1691 853 V
223 899 V 426 885 a(;)196 b(performs)16 b(AND,)i(pushes)f(the)i(result)
e(back)h(on)h(e-stack)p 1691 899 V 223 944 V 308 931
a(movl)38 b(ds:\(si\),e)o(ax)173 b(;)19 b(right)f(op)h(is)g(popped)e
(from)h(e-stack)f(into)h(eax)p 1691 944 V 223 990 V 308
976 a(subw)38 b(si,4)312 b(;)19 b(adjust)f(the)g(e-stack)f(pointer)p
1691 990 V 223 1036 V 308 1022 a(andl)38 b(eax,ds:\(s)o(i\))173
b(;)19 b(AND)g(with)f(left)g(operand)p 1691 1036 V 223
1081 V 308 1068 a(jmp)58 b(nextDcode)212 b(;)19 b(jump)f(to)h(main)f
(interprete)o(r)f(loop)p 1691 1081 V 224 1083 1468 2
v 614 1199 a FN(Figure)d(1.2:)j(Sample)12 b(in)o(terpreter)k(co)q(de)
224 1711 y(the)f(follo)o(wing)c(example,)g(that)j(of)f(generating)h(co)
q(de)g(for)f(a)h(blo)q(c)o(k)f(cop)o(y)h(op)q(eration.)j(This)224
1760 y(op)q(eration)11 b(o)q(ccurs)h(as)e(a)g(primitiv)o(e)f(in)h(most)
f FK(IR)r FN(s,)i(arising)f(from)e(the)j(assignmen)o(t)f(of)g(en)o
(tire)224 1810 y(v)n(ariables,)21 b(for)e(example.)35
b(Ho)o(w)20 b(is)g(the)h(co)q(de)f(to)g(b)q(e)h(generated)g(for)f(this)
g(op)q(eration,)224 1860 y(for)g(mac)o(hines)g(whic)o(h)g(do)g(not)g
(ha)o(v)o(e)g(suc)o(h)h(a)f(blo)q(c)o(k)g(cop)o(y)g(op)q(eration)g(as)h
(a)e(primitiv)o(e)224 1910 y(instruction?)287 2149 y(It)13
b(is)h(p)q(ossible)g(to)f(p)q(erform)g(suc)o(h)h(a)f(blo)q(c)o(k)h(cop)
o(y)f(at)g(run)o(time)g(b)o(y)g(t)o(w)o(o)g(metho)q(ds.)18
b(The)224 2199 y(data)g(ma)o(y)d(b)q(e)j(copied)g(w)o(ord-b)o(y-w)o
(ord)f(using)g(a)g(simple)f(sequence)k(of)d(instructions,)h(or)224
2249 y(the)i(data)e(ma)o(y)f(b)q(e)i(copied)g(using)f(a)h(lo)q(op.)31
b(It)19 b(w)o(ould)f(b)q(e)h(normal)e(for)h(con)o(temp)q(orary)224
2299 y(compilers)f(to)h(use)h(the)g(\014rst)f(metho)q(d)f(for)h(small)e
(blo)q(c)o(ks,)i(and)g(the)h(second)g(for)e(blo)q(c)o(ks)224
2349 y(larger)d(than)g(some)f(particular)h(size.)287
2588 y(Let)d(us)g(lo)q(ok)f(at)h(the)h(outline)e(of)h(the)g(compiler)f
(co)q(de)i(for)e(pro)q(ducing)h(this)g(ob)r(ject)h(co)q(de.)224
2638 y(It)j(is)f(assumed)f(that)i(the)f(source)i(and)e(destination)g
(addresses)i(are)e(already)g(loaded)g(in)o(to)224 2688
y(t)o(w)o(o)g(registers)h FG(src)e FN(and)h FG(dst)f
FN(resp)q(ectiv)o(ely)j(|)p eop
%%Page: 8 14
8 13 bop 224 274 a FN(8)794 b FL(CHAPTER)14 b(1.)31 b(INTR)o(ODUCTION)
354 381 y FE(lo)n(ad)13 b(rSr)n(c,rDst)f(with)i(sour)n(c)n(e,)e
(destinatio)o(n)f(addr)n(esses)354 427 y FF(IF)19 b(size)f(>)h
(inlineLimit)d(THEN)431 472 y(AllocateLa)o(be)o(l\(n)o(ew\))o(;)431
518 y(EmitLabel\()o(ne)o(w\);)431 564 y FE(emit)c FF("lw)19
b(\(rSrc\),re)o(g")431 609 y FE(emit)12 b FF("sw)19 b(reg,\(rDst)o(\)")
431 655 y FE(emit)12 b FF("inc)19 b(rDst")431 701 y FE(emit)12
b FF("inc)19 b(rSrc")431 746 y FE(emit)13 b(test)g(and)f(br)n(anch)g
(to)h(new)354 792 y FF(ELSE)18 b(\(*)h(do)g(inline)e(expansion)g(*\))
431 838 y(offset)g(:=)i(0;)431 883 y(WHILE)f(size)g(>)h(0)g(DO)521
929 y FE(emit)12 b FF("lw)18 b FE(o\013set)t FF(\(rSrc)o(\),r)o(eg)o(")
521 975 y FE(emit)12 b FF("sw)18 b(reg,)p FE(o\013set)t
FF(\()o(rDs)o(t\))o(")521 1020 y(INC\(offse)o(t\))o(;)f(DEC\(size\))o
(;)431 1066 y(END;)h(\(*)h(while)f(*\))354 1112 y(END;)g(\(*)h(if)g
(*\))224 1250 y FN(Notice)d(that)g(the)g(\014rst)g(case)g(has)g
(straigh)o(t-line)e(co)q(de)j(at)e(compile)f(time,)g(and)h(a)g(lo)q(op)
f(at)224 1300 y(run)o(time.)j(The)c(second)i(case)e(has)h(a)e(lo)q(op)g
(at)h(compile)f(time,)f(but)i(has)g(straigh)o(t-line)f(co)q(de)224
1350 y(at)g(compile)f(time.)16 b(Ev)o(en)c(the)h(address)g(incremen)o
(t)f(instructions)g(mo)o(v)o(e)f(b)q(et)o(w)o(een)i(the)g(t)o(w)o(o)224
1400 y(cases.)20 b(Is)14 b(this)g(not)g(an)f(in)o(triguing)g(and)g(b)q
(eautiful)h(dualit)o(y?)287 1451 y(On)g(a)g(m)o(uc)o(h)g(larger)g
(scale,)h(run)o(time)e(in)o(terpretation)i(and)f(in)o(terpretiv)o(e)h
(co)q(de)h(gener-)224 1501 y(ation)h(demonstrate)g(the)h(same)e(dualit)
o(y)m(.)26 b(An)17 b(in)o(terpreter)i(manipulates)c(a)i(stac)o(k)h
(data)224 1550 y(structure)h(at)e(run)o(time,)f(an)g(in)o(terpretiv)o
(e)i(co)q(de)f(generator)h(manipulates)d(a)h(stac)o(k)i(data)224
1600 y(structure)e(at)e(compile)e(time.)224 1744 y FI(1.6)67
b(Compiler)23 b(Bo)r(otstrapping)224 1837 y FN(It)16
b(is)f(quite)g(common)d(for)j(compilers)f(for)h(pro)q(cedural)h
(languages)f(to)g(b)q(e)g(written)h(in)f(the)224 1887
y(language)g(whic)o(h)h(they)h(compile.)22 b(Although)15
b(it)h(is)g(not)f(necessary)j(to)e(do)g(so,)g(there)h(are)224
1937 y(some)e(go)q(o)q(d)g(reasons)i(to)e(c)o(ho)q(ose)i(suc)o(h)f(a)f
(design.)23 b(W)m(e)16 b(shall)e(deal)i(with)f(the)h(argumen)o(ts)224
1987 y(in)g(fa)o(v)o(our)e(of)i(suc)o(h)g(a)f(strategy)i(at)e(the)i
(end)f(of)f(this)h(section,)g(but)g(for)g(no)o(w)f(w)o(e)h(wish)f(to)
224 2036 y(address)h(the)e(ob)o(vious)f(question)h FK(how)h(do)n(es)g
(a)g(c)n(ompiler)g(c)n(ompile)f(itself)t(?)287 2087 y
FN(Once)i(a)f(compiler)f(has)i(b)q(een)g(compiled,)e(and)h(is)g
(reasonably)g(correct,)i(it)e(is)h(easy)f(to)224 2137
y(see)h(ho)o(w)e(it)g(ma)o(y)e(compile)h(its)i(o)o(wn)f(source)h(co)q
(de.)21 b(The)14 b(problem)f(is,)h(ho)o(w)g(do)q(es)h(one)g(get)224
2187 y(to)h(this)g(p)q(oin)o(t,)f(starting)h(from)e(the)i(original)e
(source)j(co)q(de)f(the)h(\014rst)f(time.)22 b(This)16
b(is)g(the)224 2237 y FK(c)n(ompiler)j(b)n(o)n(otstr)n(apping)f
FN(problem.)31 b(There)20 b(are)f(t)o(w)o(o)f(extreme)g(scenarios,)j
(creating)e(a)224 2287 y(compiler)14 b(for)h(a)g(new)h(language,)e(and)
h(creating)g(a)g(compiler)f(for)h(an)g(existing)g(language,)224
2337 y(but)20 b(on)e(a)h(new)h(mac)o(hine.)32 b(A)19
b(helpful)f(notation)h(for)f(discussing)i(this)f(pro)q(cess)i(is)e(the)
224 2386 y FM(T)6 b FN(-diagram.)224 2509 y FH(1.6.1)56
b(In)n(tro)r(duction)18 b(to)g(T-diagrams)224 2588 y
FN(In)12 b(the)g(compiler)d(literature)j(it)f(is)g(usual)g(to)g
(represen)o(t)j(the)e(pro)q(cess)h(b)o(y)e(whic)o(h)g(a)g(compiler)224
2638 y(is)k(mo)q(di\014ed)f(to)g(accept)j(a)d(new)i(construct,)g(and)f
(then)g(mo)q(di\014ed)f(again)f(to)i FK(use)g FN(the)h(new)224
2688 y(construct)j(b)o(y)e(means)f(of)h(\\T")f(diagrams.)26
b(These)18 b(diagrams)e(represen)o(t)j(the)f FK(b)n(o)n(otstr)n(ap)p
eop
%%Page: 9 15
9 14 bop 224 274 a FL(1.6.)31 b(COMPILER)14 b(BOOTSTRAPPING)709
b FN(9)224 390 y(pro)q(cess)16 b(b)o(y)d(whic)o(h)h(a)f(compiler)f
(written)i(in)g(its)f(o)o(wn)g(language)g(can)h(b)q(e)g(made)f(to)g
(accept)224 440 y(and)h(use)h(an)f(enhanced)h(language.)287
507 y(In)10 b(\\T")g(diagrams)e(the)j(left)f(lab)q(el)g(is)g(the)h
(language)e(accepted)k(as)d(input.)17 b(The)10 b(righ)o(t)g(la-)224
557 y(b)q(el)i(is)f(the)g(language)f(of)h(output.)17
b(The)12 b(lo)o(w)o(er)e(lab)q(el)h(is)g(the)h(language)e(of)g
(implemen)o(tation.)224 607 y(The)15 b(cen)o(tre)g(lab)q(el)f(is)f(the)
i(program)d(designation.)224 805 y FO(Example)224 914
y FN(The)19 b(compiler)e FK(gpm)i FN(translates)g(standard)g(Mo)q
(dula-2)e(in)o(to)h(HP)g(ob)r(ject)h(co)q(de,)h(and)e(is)224
963 y(implemen)o(ted)12 b(in)h(HP)i(ob)r(ject)f(co)q(de.)476
1042 y FK(M2)g FN(source)i(co)q(de)e(in)641 1093 y FC(@)683
1135 y(@)718 1170 y(@)-42 b(R)1054 1038 y FK(HP)14 b
FN(ob)r(ject)h(co)q(de)g(out)1113 1170 y FC(\000)1155
1128 y(\000)1190 1093 y(\000)-42 b(\022)p 876 1347 4
119 v 877 1349 119 4 v 994 1347 4 119 v 995 1230 119
4 v 1112 1229 4 119 v 759 1112 355 4 v 757 1229 4 119
v 759 1230 119 4 v 789 1184 a FN(M2)899 1175 y FK(gpm)1025
1184 y FN(HP)907 1302 y(HP)287 1464 y(First)18 b(w)o(e)g(consider)h
(the)f(situation)g(where)h(a)e(compiler)g(pro)q(cesses)j(some)d
(arbitrary)224 1513 y(program.)g(Later)d(w)o(e)g(consider)h(the)g
(situation)e(when)h(a)g(compiler)e(compiles)h(itself.)k(Sup-)224
1563 y(p)q(ose)f(that)f(a)f(program)g FK(F)m(o)n(o)j
FN(translates)f(some)e(input)h(language)f FM(L)1304 1569
y FB(in)1353 1563 y FN(in)o(to)g(some)g(output)224 1613
y(language)i FM(L)428 1619 y FB(out)479 1613 y FN(,)g(and)g(the)h
(program)e(is)h(implemen)o(ted)e(in)i(Mo)q(dula-2.)24
b(If)16 b(this)g(program)224 1663 y(is)f(compiled)d(using)i
FK(gpm)s FN(,)g(the)h(compiled)e(v)o(ersion)h(of)g(the)h(program)e(p)q
(erforms)g(the)i(same)224 1713 y(translation,)10 b(but)h(is)f(implem)o
(en)o(ted)e(in)i(HP)h(ob)r(ject)g(co)q(de.)17 b(W)m(e)10
b(represen)o(t)i(the)f(compilation)224 1762 y(of)j(this)g(program)e(th)
o(us|)p 639 2087 4 119 v 641 2089 119 4 v 757 2087 4
119 v 759 1971 119 4 v 876 1969 4 119 v 523 1852 355
4 v 521 1969 4 119 v 523 1971 119 4 v 551 1921 a FM(L)579
1927 y FB(in)668 1924 y FK(F)m(o)n(o)779 1921 y FM(L)807
1927 y FB(out)671 2042 y FN(M2)p 876 2205 4 119 v 877
2207 119 4 v 994 2205 4 119 v 995 2089 119 4 v 1112 2087
4 119 v 759 1971 355 4 v 757 2087 4 119 v 759 2089 119
4 v 59 w(M2)899 2033 y FK(gpm)1025 2042 y FN(HP)907 2160
y(HP)p 1112 2087 4 119 v 1113 2089 119 4 v 1230 2087
4 119 v 1232 1971 119 4 v 1348 1969 4 119 v 995 1852
355 4 v 994 1969 4 119 v 995 1971 119 4 v 1023 1921 a
FM(L)1051 1927 y FB(in)1140 1924 y FK(F)m(o)n(o)1251
1921 y FM(L)1279 1927 y FB(out)1143 2042 y FN(HP)287
2322 y(Note)h(that)g(the)g(matc)o(hing)f(of)g(languages)g(on)h(the)g
(ends)h(of)f(the)g(\\T")f(of)h(the)g(compiler.)224 2372
y(Compilation)e(lea)o(v)o(es)j(the)g(input-output)f(languges)h(of)f
(the)h(T-diagram)d(of)i(its)h(input)f(un-)224 2421 y(c)o(hanged,)k(but)
g(c)o(hanges)g(the)g(language)e(of)h(implem)o(en)o(tation.)22
b(This)16 b(is)h(the)g(basis)f(of)g(all)224 2471 y(correct)f
(translation|)e(the)h(meaning)d(of)i(the)h(program)d(is)i(in)o(v)n
(arian)o(t,)f(but)h(the)h(language)224 2521 y(of)g(implem)o(en)o
(tation)d(is)j(c)o(hanged.)287 2588 y(No)o(w,)g FK(gpm)h
FN(is)g(itself)g(written)g(in)g(Mo)q(dula-2,)e(and)i(whenev)o(er)h(it)f
(is)g(mo)q(di\014ed)e(or)i(cor-)224 2638 y(rected)h(it)c(ma)o(y)g(b)q
(e)i(used)g(to)f(recompile)g(itself.)k(Here)e(is)e(the)h(source)h(co)q
(de)f(written)g(in)f(M2)224 2688 y(and)h(translating)f(from)f(M2)i(to)g
(HP)m(.)p eop
%%Page: 10 16
10 15 bop 224 274 a FN(10)773 b FL(CHAPTER)14 b(1.)31
b(INTR)o(ODUCTION)476 399 y FK(M2)14 b FN(source)i(co)q(de)e(in)641
450 y FC(@)683 491 y(@)718 526 y(@)-42 b(R)1054 395 y
FK(HP)14 b FN(ob)r(ject)h(co)q(de)g(out)1113 526 y FC(\000)1155
485 y(\000)1190 450 y(\000)-42 b(\022)p 876 703 4 119
v 877 705 119 4 v 994 703 4 119 v 995 587 119 4 v 1112
585 4 119 v 759 469 355 4 v 757 585 4 119 v 759 587 119
4 v 789 540 a FN(M2)899 531 y FK(gpm)1025 540 y FN(HP)907
658 y(M2)287 804 y(This)13 b(recompilation)f(pro)q(cess)k(ma)o(y)c(b)q
(e)i(indicated)g(as)g(follo)o(ws)e(|)p 639 1113 4 119
v 641 1115 119 4 v 757 1113 4 119 v 759 997 119 4 v 876
995 4 119 v 523 878 355 4 v 521 995 4 119 v 523 997 119
4 v 553 950 a(M2)663 941 y FK(gpm)788 950 y FN(HP)671
1068 y(M2)p 1112 1113 4 119 v 1113 1115 119 4 v 1230
1113 4 119 v 1232 997 119 4 v 1348 995 4 119 v 995 878
355 4 v 994 995 4 119 v 995 997 119 4 v 1025 950 a(M2)1135
941 y FK(gpm)1261 950 y FN(HP)1143 1068 y(HP)p 876 1231
4 119 v 877 1233 119 4 v 994 1231 4 119 v 995 1115 119
4 v 1112 1113 4 119 v 759 997 355 4 v 757 1113 4 119
v 759 1115 119 4 v -413 w(M2)899 1059 y FK(gpm)1025 1068
y FN(HP)907 1186 y(HP)287 1332 y(Supp)q(ose)g(no)o(w)e(that)i(some)e
(error)i(is)f(found)g(in)f(the)i(source)g(co)q(de)g(of)f
FK(gpm)p FN(.)17 b(In)11 b(e\013ect,)i(w)o(e)224 1382
y(\014nd)h(that)f(the)h(curren)o(t)h(compiler)d(do)q(es)i(not)f
(correctly)i(translate)e(M2,)g(but)g(some)g(subset)224
1432 y(M2)283 1417 y FA(\000)311 1432 y FN(.)31 b(The)19
b(compiler)d(source)k(is)e(corrected)i(so)f(that)f(it)g(do)q(es)h
(compile)d(the)j(complete)224 1481 y(language)9 b(and)g(m)o(ust)g(no)o
(w)g(b)q(e)h(recompiled.)16 b(Note)10 b(that)f(the)h(corrected)i
(source)f FK(gpm)1548 1466 y Fz(1)1576 1481 y FN(m)o(ust)224
1531 y(no)o(w)18 b(b)q(e)h(recompiled)e(with)g(the)i(defectiv)o(e)g
(compiler)d(to)i(pro)q(duce)h(a)f(correct)i(compiler)224
1581 y(v)o(ersion.)h(Of)15 b(course)h(the)f(corrected)i(source)f(m)o
(ust)e(not)g FK(use)h FN(that)g(part)g(of)f(the)h(language)224
1631 y(whic)o(h)e(the)h(curren)o(t)h(compiler)d(incorrectly)i
(translates)g(or)f(the)h(follo)o(wing)c(will)i(not)h(w)o(ork.)p
521 1940 4 119 v 523 1941 119 4 v 639 1940 4 119 v 641
1823 119 4 v 757 1822 4 119 v 405 1705 355 4 v 403 1822
4 119 v 405 1823 119 4 v 434 1777 a(M2)536 1775 y FK(gpm)610
1760 y Fz(1)670 1777 y FN(HP)539 1897 y(M2)598 1882 y
FA(\000)p 757 2058 4 119 v 759 2060 119 4 v 876 2058
4 119 v 877 1941 119 4 v 994 1940 4 119 v 641 1823 355
4 v 639 1940 4 119 v 641 1941 119 4 v 657 1897 a FN(M2)716
1882 y FA(\000)781 1886 y FK(gpm)907 1895 y FN(HP)788
2013 y(HP)p 994 1940 4 119 v 995 1941 119 4 v 1112 1940
4 119 v 1113 1823 119 4 v 1230 1822 4 119 v 877 1705
355 4 v 876 1822 4 119 v 877 1823 119 4 v 907 1777 a(M2)1008
1775 y FK(gpm)1082 1760 y Fz(1)1143 1777 y FN(HP)1025
1895 y(HP)287 2159 y(Finally)m(,)e(if)i(it)g(is)h(wished)g(to)g(mak)o
(e)e(use)j(of)e(the)h(no)o(w)f(correctly)i(translated)g(construct)224
2209 y(in)f(the)g(source)h(of)f(the)g(compiler,)e(the)j(compiler)d(ma)o
(y)g(b)q(e)i(mo)q(di\014ed)f(y)o(et)h(again)f(\(to)g
FK(gpm)1646 2193 y Fz(2)224 2258 y FN(sa)o(y\))h(and)g(then)h
(recompiled)e(once)h(again.)p 639 2569 4 119 v 641 2571
119 4 v 757 2569 4 119 v 759 2453 119 4 v 876 2451 4
119 v 523 2335 355 4 v 521 2451 4 119 v 523 2453 119
4 v 553 2406 a(M2)654 2405 y FK(gpm)728 2390 y Fz(2)788
2406 y FN(HP)671 2525 y(M2)p 1112 2569 4 119 v 1113 2571
119 4 v 1230 2569 4 119 v 1232 2453 119 4 v 1348 2451
4 119 v 995 2335 355 4 v 994 2451 4 119 v 995 2453 119
4 v 1025 2406 a(M2)1126 2405 y FK(gpm)1200 2390 y Fz(2)1261
2406 y FN(HP)1143 2525 y(HP)p 876 2688 4 119 v 877 2690
119 4 v 994 2688 4 119 v 995 2571 119 4 v 1112 2569 4
119 v 759 2453 355 4 v 757 2569 4 119 v 759 2571 119
4 v -413 w(M2)890 2523 y FK(gpm)964 2508 y Fz(1)1025
2525 y FN(HP)907 2643 y(HP)p eop
%%Page: 11 17
11 16 bop 224 274 a FL(1.6.)31 b(COMPILER)14 b(BOOTSTRAPPING)688
b FN(11)287 444 y(This)13 b(whole)h(pro)q(cess)i(ma)o(y)c(b)q(e)i
(represen)o(ted)j(as)d(follo)o(ws)e(|)p 757 815 4 119
v 759 816 119 4 v 876 815 4 119 v 877 698 119 4 v 994
697 4 119 v 641 580 355 4 v 639 697 4 119 v 641 698 119
4 v 671 652 a(M2)772 650 y FK(gpm)846 635 y Fz(2)907
652 y FN(HP)789 770 y(M2)p 1230 815 4 119 v 1232 816
119 4 v 1348 815 4 119 v 1350 698 119 4 v 1466 697 4
119 v 1113 580 355 4 v 1112 697 4 119 v 1113 698 119
4 v 1143 652 a(M2)1244 650 y FK(gpm)1318 635 y Fz(2)1379
652 y FN(HP)1261 770 y(HP)p 521 933 4 119 v 523 934 119
4 v 639 933 4 119 v 641 816 119 4 v 757 815 4 119 v 405
698 355 4 v 403 815 4 119 v 405 816 119 4 v -886 w(M2)536
769 y FK(gpm)610 753 y Fz(1)670 770 y FN(HP)539 890 y(M2)598
875 y FA(\000)p 994 933 4 119 v 995 934 119 4 v 1112
933 4 119 v 1113 816 119 4 v 1230 815 4 119 v 877 698
355 4 v 876 815 4 119 v 877 816 119 4 v 907 770 a FN(M2)1008
769 y FK(gpm)1082 753 y Fz(1)1143 770 y FN(HP)1025 888
y(HP)p 757 1051 4 119 v 759 1053 119 4 v 876 1051 4 119
v 877 934 119 4 v 994 933 4 119 v 641 816 355 4 v 639
933 4 119 v 641 934 119 4 v 657 890 a(M2)716 875 y FA(\000)781
879 y FK(gpm)907 888 y FN(HP)788 1006 y(HP)287 1155 y(This)i(is)h(all)f
(v)o(ery)h(w)o(ell.)20 b(It)14 b(is)h(easy)g(to)g(see)h(ho)o(w)e(that)h
(language)f(extensions)i(ma)o(y)d(b)q(e)224 1204 y(added)f(in)e(this)h
(gradual)f(fashion,)g(but)h(where)h(do)q(es)g(the)f(\014rst)h(v)o
(ersion)f(come)f(from?)15 b(There)224 1254 y(are)g(basically)d(t)o(w)o
(o)i(metho)q(ds)f(whic)o(h)h(ma)o(y)e(b)q(e)i(used.)224
1391 y FH(1.6.2)56 b(The)18 b(hand-translation)g(b)r(o)r(otstrap)224
1475 y FN(The)11 b(compiler)e(ma)o(y)g(b)q(e)i(initially)d
FK(hand)13 b(tr)n(anslate)n(d)c FN(in)o(to)h(some)g(other)h(language)e
(for)h(whic)o(h)224 1525 y(there)16 b(is)f(a)f(compiler)g(on)g(the)i
(target)f(mac)o(hine.)k(Usually)14 b(the)h(compiler)f(is)g(written)h
(in)g(a)224 1575 y(simple)h(subset)i(of)f(the)h(language.)26
b(Note)18 b(that)f(the)h(translation)e(do)q(es)i(not)f(ha)o(v)o(e)g(to)
g(b)q(e)224 1625 y(v)o(ery)e(e\016cien)o(t,)f(just)g(correct.)287
1678 y(Supp)q(ose)g(this)g(path)g(is)g(follo)o(w)o(ed)e(via)h(language)
g(C.)p 1466 2049 4 119 v 1468 2051 119 4 v 1584 2049
4 119 v 1586 1932 119 4 v 1702 1931 4 119 v 1350 1814
355 4 v 1348 1931 4 119 v 1350 1932 119 4 v 1379 1886
a(M2)1490 1877 y FK(gpm)1615 1886 y FN(HP)1497 2004 y(HP)p
994 2049 4 119 v 995 2051 119 4 v 1112 2049 4 119 v 1113
1932 119 4 v 1230 1931 4 119 v 877 1814 355 4 v 876 1931
4 119 v 877 1932 119 4 v 907 1886 a(M2)1017 1877 y FK(gpm)1143
1886 y FN(HP)1025 2004 y(M2)p 1230 2167 4 119 v 1232
2169 119 4 v 1348 2167 4 119 v 1350 2051 119 4 v 1466
2049 4 119 v 1113 1932 355 4 v 1112 2049 4 119 v 1113
2051 119 4 v 59 w(M2)1243 2001 y FK(gpm*)1379 2004 y
FN(HP)1261 2122 y(HP)p 757 2167 4 119 v 759 2169 119
4 v 876 2167 4 119 v 877 2051 119 4 v 994 2049 4 119
v 641 1932 355 4 v 639 2049 4 119 v 641 2051 119 4 v
671 2004 a(M2)770 2001 y FK(gpm*)907 2004 y FN(HP)803
2122 y(C)p 285 2167 4 119 v 287 2169 119 4 v 403 2167
4 119 v 405 2051 119 4 v 521 2049 4 119 v 169 1932 355
4 v 167 2049 4 119 v 169 2051 119 4 v 198 2004 a(M2)298
2001 y FK(gpm*)434 2004 y FN(HP)316 2122 y(M2)p 994 2285
4 119 v 995 2287 119 4 v 1112 2285 4 119 v 1113 2169
119 4 v 1230 2167 4 119 v 877 2051 355 4 v 876 2167 4
119 v 877 2169 119 4 v 546 w(C)1036 2117 y FK(c)n(c)1143
2122 y FN(HP)1025 2240 y(HP)p 521 2285 4 119 v 523 2287
119 4 v 639 2285 4 119 v 641 2169 119 4 v 757 2167 4
119 v 405 2051 355 4 v 403 2167 4 119 v 405 2169 119
4 v 434 2122 a(M2)192 b(C)537 2240 y(hand)287 2389 y(The)10
b(subset)g(compiler)e FK(gpm*)16 b FN(is)10 b(hand)f(translated)h(to)f
(C,)g(and)g(this)h(source)h(is)e(compiled)224 2438 y(using)15
b(the)g(standard)g(C)f(compiler)f FK(c)n(c)k FN(on)e(an)f(HP)h(mac)o
(hine.)j(The)d(resulting)g(executable)224 2488 y(pro)q(duces)j(HP)e(ob)
r(ject)h(co)q(de,)f(and)g(is)f(hosted)i(on)f(the)g(HP)g(mac)o(hine.)23
b(This)15 b(v)o(ersion)h(has)224 2538 y(all)d(the)h(limitations)d(of)i
(the)i(simpli\014ed)d(source)j(co)q(de)g(v)o(ersion)f(of)f(the)h
(original)e(compiler,)224 2588 y(together)k(with)f(an)o(y)f
(ine\016ciencies)i(of)e(the)i(crude)g(hand)f(translation.)20
b(This)15 b(compiler)e(is)224 2638 y(no)o(w)d(used)i(to)e(compile)f
(the)i(complete,)f(original)f(source)j(of)d(the)j(compiler)d
FK(gpm)s FN(,)i(obtaining)224 2688 y(the)k(\014nal)e(compiler)g(at)g
(the)i(righ)o(t)e(of)h(the)g(diagram.)p eop
%%Page: 12 18
12 17 bop 224 274 a FN(12)773 b FL(CHAPTER)14 b(1.)31
b(INTR)o(ODUCTION)224 390 y FH(1.6.3)56 b(The)18 b(cross-b)r(o)r
(otstrap)224 469 y FN(In)13 b(this)g(next)g(case)g(it)f(is)h(assumed)f
(that)g(the)h(giv)o(en)g(language)e(is)i(a)o(v)n(ailable)d(on)i(a)g
(di\013eren)o(t)224 519 y(mac)o(hine.)25 b(Supp)q(ose)18
b(w)o(e)f(ha)o(v)o(e)f(a)g(compiler)f FK(lo)n(gi)21 b
FN(whic)o(h)16 b(accepts)i(a)f(dialect)f(of)g(M2)g(and)224
569 y(runs)f(on)f(a)f(PC.)h(W)m(e)f(pro)q(ceed)j(as)e(follo)o(ws.)p
876 936 4 119 v 877 938 119 4 v 994 936 4 119 v 995 820
119 4 v 1112 818 4 119 v 759 701 355 4 v 757 818 4 119
v 759 820 119 4 v 789 773 a(M2)899 764 y FK(gpm)1025
773 y FN(HP)907 891 y(M2)p 1348 936 4 119 v 1350 938
119 4 v 1466 936 4 119 v 1468 820 119 4 v 1584 818 4
119 v 1232 701 355 4 v 1230 818 4 119 v 1232 820 119
4 v 1261 773 a(M2)1372 764 y FK(gpm)1497 773 y FN(HP)1379
891 y(HP)p 1112 1054 4 119 v 1113 1056 119 4 v 1230 1054
4 119 v 1232 938 119 4 v 1348 936 4 119 v 995 820 355
4 v 994 936 4 119 v 995 938 119 4 v -413 w(M2)1125 889
y FK(gpm*)1261 891 y FN(HP)1143 1009 y(HP)p 639 1054
4 119 v 641 1056 119 4 v 757 1054 4 119 v 759 938 119
4 v 876 936 4 119 v 523 820 355 4 v 521 936 4 119 v 523
938 119 4 v 553 891 a(M2)652 889 y FK(gpm*)788 891 y
FN(HP)671 1009 y(M2)p 876 1172 4 119 v 877 1174 119 4
v 994 1172 4 119 v 995 1056 119 4 v 1112 1054 4 119 v
759 938 355 4 v 757 1054 4 119 v 759 1056 119 4 v 59
w(M2)73 b FK(X)g FN(HP)907 1127 y(PC)p 403 1172 4 119
v 405 1174 119 4 v 521 1172 4 119 v 523 1056 119 4 v
639 1054 4 119 v 287 938 355 4 v 285 1054 4 119 v 287
1056 119 4 v 316 1009 a(M2)416 1007 y FK(gpm*)552 1009
y FN(HP)434 1127 y(M2)p 639 1290 4 119 v 641 1292 119
4 v 757 1290 4 119 v 759 1174 119 4 v 876 1172 4 119
v 523 1056 355 4 v 521 1172 4 119 v 523 1174 119 4 v
60 w(M2)669 1124 y FK(lo)n(gi)789 1127 y FN(PC)671 1246
y(PC)287 1391 y(W)m(e)15 b(m)o(ust)g(\014rst)i(c)o(hec)o(k)g(that)f
(the)h(source)g(of)f(our)g(new)g(compiler)f FK(gpm)k
FN(is)d(written)h(in)224 1441 y(the)f(dialect)e(of)g(M2)g(whic)o(h)g
(the)h(PC)g(compiler)e(accepts.)22 b(In)14 b(the)h(most)f(general)g
(case)i(the)224 1491 y(source)g(ma)o(y)d(need)i(to)g(b)q(e)g(mo)q
(di\014ed)e(to)h(meet)g(this)h(condition.)k(It)14 b(ma)o(y)f(also)h
(need)h(to)g(b)q(e)224 1540 y(partitioned)g(in)o(to)e(small)g(enough)h
(\014les)h(that)f(the)i(PC)e(can)h(successfully)h(compile)c(it.)20
b(W)m(e)224 1590 y(shall)14 b(call)f(this)h(mo)q(di\014ed)e(source)j
FK(gpm*)6 b FN(.)19 b(No)o(w,)13 b(as)h(the)g(\014rst)h(step)g(w)o(e)f
(compile)e(the)j(new)224 1640 y(source)g FK(gpm*)20 b
FN(using)14 b FK(lo)n(gi)t FN(,)f(obtaining)f(the)i(compiler)e(mark)o
(ed)g FM(X)18 b FN(in)13 b(the)h(diagram.)h(This)224
1690 y(is)c(a)g(cross)h(compiler)e(whic)o(h)h(compiles)e(M2)i(to)g(HP)m
(,)g(but)g(runs)h(on)e(a)h(PC.)g(W)m(e)g(no)o(w)f(pass)i(the)224
1740 y(mo)q(di\014ed)k(source)j(of)e(the)g(compiler)f(through)i
(compiler)e(X,)g(obtaining)g(the)i(HP-ob)r(ject)224 1789
y(\014les)12 b(of)f(the)h(new)f(compiler.)16 b(These)c(\014les)g(m)o
(ust)e(b)q(e)i(carried)g(on)o(to)f(an)g(HP)g(mac)o(hine,)f(either)224
1839 y(on)j(a)f(\015opp)o(y)g(disk)h(or)f(o)o(v)o(er)h(a)f(net)o(w)o
(ork,)h(and)g(link)o(ed)f(on)g(the)h(target)g(mac)o(hine)f(to)g(pro)q
(duce)224 1889 y(an)j(executable)h(v)o(ersion)f(of)f(the)i(compiler.)j
(The)d(compiler)d(can)i(then)h(b)q(e)f(b)q(o)q(otstrapp)q(ed)224
1939 y(once)g(again)e(on)g(the)i(target)f(mac)o(hine.)224
2060 y FH(1.6.4)56 b(Wh)n(y)18 b(write)g(a)h(compiler)d(in)j(its)f(o)n
(wn)i(language)224 2139 y FN(Firstly)m(,)g(a)f(compiler)g(is)g(a)g
(relativ)o(ely)g(complex)f(program,)h(and)h(a)f(c)o(hec)o(k)h(that)g
(it)f(can)224 2188 y(rep)q(eatedly)g(recompile)d(itself)h(is)f(a)h(go)q
(o)q(d)g(\014rst)h(c)o(hec)o(k)g(for)f(correctness.)30
b(Although)17 b(the)224 2238 y(test)12 b(that)e(a)g(compiler)e(will)h
(compile)f(itself)i(do)q(es)h(not)f(substitute)h(for)f(thorough)g
(regression)224 2288 y(testing,)17 b(it)f(is)f(a)h(useful)g(sanit)o(y)g
(c)o(hec)o(k.)25 b(Supp)q(ose)17 b(that)f(some)f(minor)f(mo)q
(di\014cation)g(has)224 2338 y(b)q(een)h(made)e(to)h(the)g(source)i(co)
q(de)e(of)f(a)h(compiler.)j(Before)e(an)o(y)e(further)i(steps)g(are)f
(tak)o(en)224 2388 y(it)j(w)o(ould)f(b)q(e)h(usual)g(to)f(compile)f
(the)i(new)h(co)q(de)f(once,)h(using)e(the)i(old)e(compiler.)25
b(The)224 2438 y(new)17 b(compiler)e(w)o(ould)h(then)h(b)q(e)f(used)i
(to)e(compile)f(itself,)h(and)g(the)h(second)g(generation)224
2487 y(compiler)d(used)h(to)g(compile)e(itself)h(y)o(et)h(again.)k(The)
d(link)o(ed)e(executables)i(of)e(the)h(second)224 2537
y(and)k(third)f(generation)h(should)f(b)q(e)h(b)o(yte-for-b)o(yte)g
(iden)o(tical.)30 b(If)19 b(this)f(test)h(is)g(passed,)224
2587 y(then)c(prop)q(er)g(regression)g(testing)f(should)g(b)q(e)g
(started.)287 2638 y(Another)g(reason)g(often)g(adv)n(anced)g(for)f
(writing)g(a)g(compiler)g(in)g(its)g(o)o(wn)h(language)e(is)224
2688 y(the)g(double)f(b)q(ene\014t)i(whic)o(h)e(is)g(obtained)f(when)i
(an)f(impro)o(v)o(emen)o(t)d(is)j(made)f(to)h(the)h(source)p
eop
%%Page: 13 19
13 18 bop 224 274 a FL(1.6.)31 b(COMPILER)14 b(BOOTSTRAPPING)688
b FN(13)224 390 y(co)q(de.)21 b(Supp)q(ose,)15 b(for)f(example,)f(that)
h(some)g(impro)o(v)o(emen)o(t)e(is)i(made)f(to)i(the)g(algorithms)224
440 y(for)d(co)q(de)g(generation)g(for)g(a)f(compiler)g(written)h(in)f
(its)h(o)o(wn)f(language.)17 b(W)m(e)11 b(shall)g(supp)q(ose)224
490 y(that)i(the)h(impro)o(v)o(emen)o(t)c(results)k(in)f(the)g(pro)q
(duction)g(of)g(faster)g(ob)r(ject)h(co)q(de.)19 b(When)13
b(the)224 540 y(new)h(source)h(is)e(compiled,)f(the)i(new)g(compiler)e
(will)g(pro)q(duce)j(faster)f(ob)r(ject)g(co)q(de)g(for)g(all)224
590 y(of)g(the)g(programs)f(whic)o(h)h(it)f(compiles.)k(If)d(the)g(new)
h(compiler)d(no)o(w)i(recompiles)f(itself)g(to)224 640
y(pro)q(duce)j(a)e(second)h(generation)f(of)g(the)h(mo)q(di\014ed)d
(compiler,)h(it)g(will)g(pro)q(duce)i(the)g(same)224
689 y(faster)g(ob)r(ject)g(co)q(de)g(as)f(the)h(\014rst)g(generation.)j
(Ho)o(w)o(ev)o(er,)c(since)h(the)g(second)g(generation)224
739 y(is)d(a)f(program)e(compiled)h(using)h(the)h(impro)o(v)o(ed)d
(algorithm,)g(it)i(will)f(itself)h(run)g(faster)h(than)224
789 y(the)j(\014rst)g(generation)f(of)f(the)h(new)h(compiler.)287
843 y(Ha)o(ving)9 b(giv)o(en)h(these)i(t)o(w)o(o)e(adv)n(an)o(tages)g
(for)g(writing)f(a)h(compiler)f(in)h(its)h(o)o(wn)f(language,)224
893 y(it)j(is)h(only)e(fair)h(to)g(rep)q(ort)i(that)e(there)i(is)e
(also)g(a)g(signi\014can)o(t)g(disadv)n(an)o(tage.)k(This)c(has)g(to)
224 943 y(do)j(with)g(the)h(di\016cult)o(y)e(of)h(debugging)f(the)i
(compiler)e(in)g(the)i(ev)o(en)o(t)g(that)f(a)g(b)q(o)q(otstrap)224
992 y(fails.)h(Supp)q(ose)e(that)f(w)o(e)g(ha)o(v)o(e)g(the)g(follo)o
(wing)e(sequence)k(of)d(compilations.)p 757 1363 4 119
v 759 1365 119 4 v 876 1363 4 119 v 877 1247 119 4 v
994 1245 4 119 v 641 1129 355 4 v 639 1245 4 119 v 641
1247 119 4 v 671 1200 a(M2)775 1196 y FK(gpm')907 1200
y FN(HP)789 1318 y(M2)p 1230 1363 4 119 v 1232 1365 119
4 v 1348 1363 4 119 v 1350 1247 119 4 v 1466 1245 4 119
v 1113 1129 355 4 v 1112 1245 4 119 v 1113 1247 119 4
v 1143 1200 a(M2)1244 1199 y FK(gpm)1318 1184 y Fz(2)1379
1200 y FN(HP)1261 1318 y(HP)p 521 1481 4 119 v 523 1483
119 4 v 639 1481 4 119 v 641 1365 119 4 v 757 1363 4
119 v 405 1247 355 4 v 403 1363 4 119 v 405 1365 119
4 v -886 w(M2)538 1314 y FK(gpm')670 1318 y FN(HP)553
1436 y(M2)p 994 1481 4 119 v 995 1483 119 4 v 1112 1481
4 119 v 1113 1365 119 4 v 1230 1363 4 119 v 877 1247
355 4 v 876 1363 4 119 v 877 1365 119 4 v 907 1318 a(M2)1008
1317 y FK(gpm)1082 1302 y Fz(1)1143 1318 y FN(HP)1025
1436 y(HP)p 757 1599 4 119 v 759 1601 119 4 v 876 1599
4 119 v 877 1483 119 4 v 994 1481 4 119 v 641 1365 355
4 v 639 1481 4 119 v 641 1483 119 4 v -413 w(M2)781 1427
y FK(gpm)907 1436 y FN(HP)788 1554 y(HP)287 1703 y(W)m(e)18
b(shall)g(supp)q(ose)h(that)g(w)o(e)g(ha)o(v)o(e)f(a)g(mo)q(di\014ed)f
(v)o(ersion)i(of)f FK(gpm)k FN(whic)o(h)c(w)o(e)h(shall)224
1753 y(call)c FK(gpm')5 b FN(.)24 b(W)m(e)15 b(assume)g(that)h(the)g
(new)g(source)h(has)f(some)e(small)g(and)h(subtle)h(error)h(in)224
1803 y(it.)j(W)m(e)14 b(compile)f(the)i(new)g(source)g(using)f(the)i
(existing)e(v)o(ersion)g(of)g FK(gpm)s FN(,)h(obtaining)e(the)224
1853 y(\014rst)i(generation)f(compiler)e FK(gpm)755 1837
y Fz(1)774 1853 y FN(.)17 b(This)d(compiler)e(is)i(actually)e
(incorrect,)j(but)e(app)q(ears)224 1902 y(to)j(function)g(correctly)m
(.)24 b(It)16 b(compiles)f(itself)g(without)h(error,)h(to)e(pro)q(duce)
i(the)g(compiler)224 1952 y(mark)o(ed)11 b FK(gpm)444
1937 y Fz(2)475 1952 y FN(in)h(the)h(diagram.)i(The)e(new)f(compiler)f
(fails)g(to)h(function)g(at)g(all,)f(crashing)224 2002
y(when)k(it)e(attempts)h(ev)o(en)g(to)g(compile)e FK(hel)r(lo)j(world)
1050 1987 y Fz(1)1068 2002 y FN(.)287 2056 y(Ho)o(w)i(is)h(suc)o(h)g(a)
f(situation)g(to)h(b)q(e)g(diagnosed?)29 b(Lo)q(oking)17
b(at)g(the)h(p)q(oin)o(t)g(in)f FK(gpm)1617 2041 y Fz(2)1636
2056 y FK('s)224 2106 y FN(source)d(at)e(whic)o(h)g(it)g(crashes)i(is)e
(not)g(directly)g(useful.)18 b(The)12 b(crash)h(p)q(oin)o(t)f(is)g(not)
g(the)h(place)224 2156 y(where)h(the)f(error)g(is.)k(The)c(error)g(is)f
(in)g(the)h(co)q(de)g(whic)o(h)f FK(tr)n(anslates)j FN(the)e(construct)
g(whic)o(h)224 2205 y(causes)k(the)f(program)e(crash.)23
b(This)15 b(lev)o(el)g(of)g(indirection)g(in)g(the)h(cause)g(and)f
(e\013ect)i(is)f(a)224 2255 y(real)e(c)o(hallenge)g(to)f(the)h
(compiler)f(writer)h(trying)f(to)h(\014nd)g(the)g(error)g(in)g(the)g
(source)h(co)q(de.)287 2309 y(T)m(o)8 b(tak)o(e)i(a)f(sp)q(eci\014c)i
(example,)e(supp)q(ose)i(that)e(the)h(source)h(has)f(co)q(de)g(whic)o
(h)g(incorrectly)224 2359 y(calculates)g(the)g(storage)g(size)g(of)f
(dynamically)d(allo)q(cated)j(records)i(in)e(the)h(programs)e(whic)o(h)
224 2409 y(it)19 b(translates.)35 b(The)20 b(compiler)e
FK(gpm)832 2394 y Fz(1)870 2409 y FN(will)f(compile)h(programs)g
(without)h(crashing)g(or)224 2459 y(giving)f(an)o(y)h(incorrect)i
(error)g(message.)34 b(The)20 b(compiler)e FK(gpm)1255
2444 y Fz(1)1294 2459 y FN(do)q(es)i(not)g(incorrectly)224
2508 y(allo)q(cate)13 b(its)h(o)o(wn)f(storage,)h(since)g(it)g(uses)g
(the)h(correct)g(algorithm)c(of)i(the)h(compiler)e FK(gpm)224
2558 y FN(whic)o(h)20 b(compiled)e(it.)35 b(Ho)o(w)o(ev)o(er,)21
b(all)e(programs)f(whic)o(h)i(the)g(new)g(compiler)f(compiles)p
224 2610 577 2 v 271 2636 a Fy(1)288 2648 y Fx(F)m(or)14
b(some)f(reason,)g(the)h(\014rst)g(program)d(compiled)h(b)o(y)i(an)o(y)
f(new)i(compiler)d(is)i(almost)f(alw)o(a)o(ys)g(the)224
2688 y(canonical)c(simplest)h(useful)g(program,)f(whic)o(h)i(simply)f
(prin)o(ts)g(out)h(\\hello,)f(w)o(orld".)p eop
%%Page: 14 20
14 19 bop 224 274 a FN(14)773 b FL(CHAPTER)14 b(1.)31
b(INTR)o(ODUCTION)224 390 y FN(will)15 b(incorrectly)i(allo)q(cate)e
(storage.)26 b(In)16 b(particular,)g(the)g(second)h(generation)g
(compiler)224 440 y FK(gpm)298 425 y Fz(2)330 440 y FN(ma)o(y)11
b(crash)j(in)f(the)g(middle)e(of)i(a)f(memory)f(allo)q(cation)g(step)j
(when)f(it)g(\014nds)h(its)f(free)224 490 y(list)k(corrupted.)31
b(The)18 b(reasoning)f(steps)i(that)f(need)g(to)g(b)q(e)g(follo)o(w)o
(ed)e(to)h(diagnose)g(this)224 540 y(problem)e(in)o(v)o(olv)o(e)h
(noticing)f(that)i(the)g(program)e(crashed)i(during)f(memory)e(allo)q
(cation,)224 590 y(so)h(the)f(previous)h(allo)q(cation)d(step)j(ma)o(y)
d(ha)o(v)o(e)i(corrupted)i(the)e(free)h(list.)j(The)d(corrupted)224
640 y(free)e(list)e(probably)f(resulted)j(from)d(an)h(incorrectly)h
(sized)h(allo)q(cation,)d(so)h(the)h(co)q(de)g(whic)o(h)224
689 y(computes)i(ob)r(ject)h(sizes)g(ma)o(y)d(b)q(e)i(incorrect.)287
739 y(More)e(di\016cult)f(still)g(w)o(ould)h(b)q(e)g(a)g(case)h(where)g
(the)f(algorithm)e(for)h(computing)g(ob)r(ject)224 789
y(sizes)k(is)f(correct,)h(but)f(there)h(is)f(an)g(error)g(in)g(some)f
(other)h(co)q(de)h(whic)o(h)f(is)f(only)g(exercised)224
839 y(when)i(translating)f(some)f(part)h(of)g(this)g(correct)i
(algorithm.)h(In)d(this)g(case,)h(the)g(problem)224 889
y(w)o(ould)e(sho)o(w)h(up)g(on)g(the)g(third,)g(rather)h(than)e(the)i
(second)g(generation.)224 1025 y FI(1.7)67 b(Co)r(de)21
b(Impro)n(v)n(emen)n(t)224 1116 y FN(There)e(are)e(a)g(n)o(um)o(b)q(er)
f(of)g(places)i(in)e(the)i(compilation)c(pro)q(cess)19
b(where)f(impro)o(v)o(em)o(en)o(ts)224 1165 y(ma)o(y)9
b(b)q(e)j(made)d(in)i(the)g(co)q(de)h(whic)o(h)e(is)h(pro)q(duced)h(b)o
(y)f(our)g(simple)e(algorithms,)g(at)h(the)i(cost)224
1215 y(of)g(additional)e(pro)q(cessing)j(during)f(the)g(compilation)d
(itself.)18 b(These)13 b(co)q(de)g(impro)o(v)o(em)o(en)o(ts)224
1265 y(ma)o(y)g(ha)o(v)o(e)i(as)g(their)h(ob)r(jectiv)o(e)f(either)h
(the)g(reduction)g(of)e(memory)f(use)i(in)g(the)h(running)224
1315 y(program,)c(or)h(the)i(impro)o(v)o(em)o(en)o(t)c(in)j(sp)q(eed)h
(of)e(the)h(\014nal)f(program.)j(In)d(recen)o(t)j(y)o(ears)e(the)224
1365 y(emphasis)f(has)h(mo)o(v)o(ed)f(from)f(the)i(former)f(to)h(the)g
(latter,)g(for)g(most)e(systems.)287 1415 y(As)j(an)g(historical)f
(tradition,)g(all)f(suc)o(h)j(metho)q(ds)e(of)g(co)q(de)i(impro)o(v)o
(emen)o(t)c(are)k(called)224 1464 y FK(Optimizations)s
FN(,)i(ev)o(en)h(though)e(almost)f(none)i(of)f(the)h(tec)o(hniques)h
(actually)e(guaran)o(tee)224 1514 y(optimalit)o(y)c(in)i(the)h(formal)e
(sense.)25 b(The)16 b(dotted)g(b)q(o)o(xes)g(in)g(our)f(reference)j
(arc)o(hitecture)224 1564 y(\014gure)k(1.1)d(sho)o(w)i(the)g(p)q
(ositions)f(at)h(whic)o(h)f(these)i(so-called)f(optimizations)d(ma)o(y)
h(b)q(e)224 1614 y(computed.)f(In)c(most)e(cases,)j(there)g(is)f(a)f(c)
o(hoice)h(in)f(the)i(p)q(osition)e(at)g(whic)o(h)h(a)g(particular)224
1664 y(optimization)e(ma)o(y)f(b)q(e)k(computed.)224
1779 y FH(1.7.1)56 b(Safet)n(y)18 b(and)h(pro\014tabilit)n(y)224
1855 y FN(There)h(are)e(t)o(w)o(o)g(imp)q(ortan)o(t)e(prop)q(erties)k
(whic)o(h)e(an)o(y)f(optimization)f(tec)o(hnique)j(should)224
1905 y(ha)o(v)o(e.)f(These)d(are)g FK(safety)i FN(and)d
FK(pr)n(o\014tability)t FN(.)328 1990 y FO(De\014nition)o(:)20
b FN(An)15 b(optimization)e(is)j(said)f(to)h(b)q(e)g
FO(safe)f FN(if)g(for)g(ev)o(ery)i(correct)328 2040 y(program)d(the)i
(optimized)e(co)q(de)j(has)e(equiv)n(alen)o(t)g(input-output)h(b)q(eha)
o(viour)328 2089 y(as)c(the)h(same)f(program)e(compiled)h(without)h
(the)h(optimization.)h(In)e(particu-)328 2139 y(lar,)f(the)g(t)o(w)o(o)
g(compiled)e(program)h(v)o(ersions)h(m)o(ust)f(fail)g(for)h(exactly)g
(the)g(same)328 2189 y(input)j(data)f(sets.)328 2254
y FO(De\014nition)o(:)20 b FN(An)15 b(optimization)e(is)j(said)f(to)h
(b)q(e)g FO(pro\014table)d FN(if)i(the)h(trans-)328 2304
y(formed)c(program)g(is)h(an)g(impro)o(v)o(emen)o(t)e(o)o(v)o(er)i(the)
h(original)e(with)h(resp)q(ect)j(to)328 2354 y(the)f(ob)r(jectiv)o(e)f
(of)f(the)i(optimization.)287 2438 y(The)e(underlying)g(notion)g(whic)o
(h)g(the)h(safet)o(y)f(prop)q(ert)o(y)i(tries)f(to)f(encapsulate)h(is)f
(that)224 2488 y(correct)k(programs)d(will)g(pro)q(duce)i(sensibly)g
(iden)o(tical)e(results)i(when)g(compiled)e(with)g(or)224
2538 y(without)i(the)i(optimization.)23 b(It)16 b(seems)h(to)f(b)q(e)h
(an)f(o)o(v)o(ersp)q(eci\014cation)i(to)e(demand)f(that)224
2588 y(incorrect)h(programs)c(also)i(pro)q(duce)h(iden)o(tical)e
(output)h(after)g(optimization.)h(F)m(or)f(exam-)224
2638 y(ple,)f(supp)q(ose)g(an)f(incorrect)i(program)d(pro)q(duces)j
(some)d(output,)i(and)f(then)h(fails)e(with)i(an)224
2688 y(arra)o(y)g(index)h(violation.)i(It)d(ma)o(y)e(b)q(e)j(the)g
(case)h(that)e(an)g(optimized)f(v)o(ersion)h(of)g(the)h(same)p
eop
%%Page: 15 21
15 20 bop 224 274 a FL(1.7.)31 b(CODE)14 b(IMPR)o(O)o(VEMENT)839
b FN(15)224 390 y(program)17 b(crashes)k(at)d(a)g(di\013eren)o(t)i(p)q
(oin)o(t,)f(p)q(erhaps)h(earlier)e(in)h(the)g(output)g(sequence.)224
440 y(What)e(w)o(e)h(w)o(ould)f(lik)o(e)g(to)g(ensure)i(is)e(that)h
(the)g(optimized)e(program)g(do)q(es)i(not)g(fail)d(to)224
490 y(detect)h(the)e(erroneous)i(b)q(eha)o(viour,)d(and)h(that)g(the)g
(error)h(message)e(is)h(still)f(meaningful.)287 541 y(The)g(notion)g
(of)f(equiv)n(alen)o(t)h(output)g(cannot)g(b)q(e)h(sensibly)f(applied)g
(to)g(incorrect)h(pro-)224 591 y(grams,)d(as)h(a)f(simple)f(example)h
(will)f(illustrate.)17 b(Supp)q(ose)c(a)e(particular)h(language)f
(explic-)224 641 y(itly)16 b(allo)o(ws)f(pro)q(cedure)k(parameters)d
(to)g(b)q(e)h(ev)n(aluated)g(in)f(an)o(y)g(order,)h(but)g(a)f(program)
224 690 y(uses)f(parameter)e(ev)n(aluations)f(with)h(side-e\013ects,)i
(and)e(relies)h(on)f(the)h(parameters)f(b)q(eing)224
740 y(ev)n(aluated)e(left)f(to)g(righ)o(t)g(sa)o(y)m(.)17
b(The)10 b(program)f(is)i(th)o(us)g(incorrect.)18 b(As)11
b(a)f(result)h(of)f(this)h(false)224 790 y(assumption)j(b)o(y)h(the)g
(programmer)e(it)h(ma)o(y)f(b)q(e)j(that)f(the)g(optimized)f(and)h
(unoptimized)224 840 y(v)o(ersions)h(of)f(this)h(program)e(assign)h
(di\013ering)g(v)n(alues)h(to)f(a)g(particular)g(v)n(ariable.)22
b(If)15 b(this)224 890 y(v)n(alue)f(is)g(used)h(in)e(a)h(division)f(op)
q(eration,)g(one)h(v)o(ersion)g(ma)o(y)f(fail)f(with)i(a)f(divide-b)o
(y-zero)224 939 y(error)h(and)e(the)h(other)g(not.)k(The)c(failing)d(v)
o(ersion)j(could)f(b)q(e)h(either)g(the)g(optimized)e(or)i(the)224
989 y(unoptimized)g(v)o(ersion.)287 1040 y(This)k(example)f(sho)o(ws)i
(that)g(it)f(is)g(not)g(p)q(ossible)h(to)g(demand)e(that)h(optimized)f
(and)224 1090 y(unoptimized)c(v)o(ersions)i(of)f(a)g(program)f(fail)g
(on)h(precisely)h(the)g(same)f(sets)h(of)f(input)g(data,)224
1140 y(if)g(the)i(program)d(is)i(incorrect.)287 1190
y(Pro\014tabilit)o(y)e(is)i(also)g(a)g(somewhat)f(tric)o(ky)h(concept.)
19 b(W)m(e)14 b(migh)o(t)e(lik)o(e)h(to)h(insist)g(that)224
1240 y FK(every)20 b FN(program)14 b(is)i(impro)o(v)o(ed)e(b)o(y)h(the)
i(optimization,)c(but)j(this)g(ma)o(y)e(b)q(e)i(to)q(o)g(demand-)224
1290 y(ing.)i(Man)o(y)13 b(optimizations)e(impro)o(v)o(e)h
FK(almost)j(al)r(l)i FN(programs,)12 b(but)i(it)f(is)h(p)q(ossible)g
(to)f(\014nd)224 1340 y(pathological)8 b(examples)i(for)f(whic)o(h)h
(the)h(optimization)c(actually)i(mak)o(es)g(things)h(w)o(orse.)17
b(It)224 1390 y(is)d(th)o(us)g(sometimes)e(necessary)j(to)f(demand)e
(some)h(kind)g(of)g(probabilistic)g(impro)o(v)o(emen)o(t)224
1440 y(in)h(the)g(program,)e(rather)j(than)f(an)f(absolute)h(impro)o(v)
o(emen)o(t)e(in)h(ev)o(ery)i(case.)224 1561 y FH(1.7.2)56
b(Space)18 b(and)h(time)224 1639 y FN(Optimization)9
b(is)i(alw)o(a)o(ys)e(carried)j(out)f(with)f(resp)q(ect)j(to)e(some)f
(ob)r(jectiv)o(e.)18 b(The)11 b(ob)r(jectiv)o(e)224 1689
y(is)16 b(in)o(v)n(ariably)e(some)i(w)o(eigh)o(ted)g(com)o(bination)d
(of)j(program)f(size)h(and)g(execution)h(sp)q(eed.)224
1739 y(It)j(should)e(b)q(e)i(noted)g(ho)o(w)o(ev)o(er)f(that)g(con)o
(temp)q(orary)g(tec)o(hnology)g(do)q(es)g(not)g(allo)o(w)f(us)224
1789 y(to)h(exactly)f(predict)i(the)f(c)o(hange)g(in)f(sp)q(eed)i(that)
e(a)h(program)d(will)h(exp)q(erience)k(if)d(an)o(y)224
1839 y(particular)h(c)o(hange)g(is)g(made)e(to)i(the)g(co)q(de.)34
b(When)19 b(considering)g(the)h(e\013ect)g(of)e(some)224
1889 y(particular)12 b(co)q(de)g(transformation,)d(it)i(is)h(normal)d
(to)i(assume)g(that)h(reducing)g(the)g(n)o(um)o(b)q(er)224
1938 y(of)j(mac)o(hine)f(cycles)i(whic)o(h)f(are)h(executed)h(in)d(a)h
(particular)g(computation)e(will)h(increase)224 1988
y(the)19 b(sp)q(eed)g(of)e(the)h(program.)28 b(This)18
b(is)f FK(usual)r(ly)22 b FN(the)c(case,)h(but)f(there)h(are)f
(di\016cult)f(to)224 2038 y(predict)f(e\013ects)g(whic)o(h)e(in)o
(trude)h(if)e(the)i(c)o(hange)g(in)f(the)h(n)o(um)o(b)q(er)e(of)h
(instructions)h(a\013ects)224 2088 y(the)e(e\016ciency)f(of)f(the)i
(hardw)o(are)f(cac)o(he,)g(or)g(the)g(demand-paged)f(memory)e
(managemen)o(t)224 2138 y(system.)287 2188 y(In)14 b(the)i(past)e(a)h
(reduction)g(in)f(the)i(size)f(of)f(the)h(executing)h(program)d(w)o(as)
h(sometimes)224 2238 y(the)i(critical)f(ob)r(jectiv)o(e,)h(and)f(it)f
(w)o(as)h(tolerable)g(to)g(allo)o(w)f(sp)q(eed)j(to)e(decrease)i(to)e
(obtain)224 2288 y(a)h(signi\014can)o(t)f(decrease)j(in)d(size.)25
b(Using)15 b(suc)o(h)i(an)e(ob)r(jectiv)o(e,)i(for)e(example,)f(one)i
(migh)o(t)224 2338 y(consider)j(replacing)e(the)i(dispatc)o(h)e(table)h
(for)f(a)g FK(CASE)23 b FN(or)18 b FK(switch)i FN(statemen)o(t)d(with)h
(a)224 2388 y(sparse)j(arra)o(y)e(structure.)36 b(The)20
b(v)o(ectored)h(jump)c(op)q(eration)j(w)o(ould)e(then)i(dep)q(end)h(on)
224 2437 y(some)13 b(kind)h(of)f(searc)o(h)i(op)q(eration)f(on)g(the)g
(new)g(structure,)i(trading)d(time)g(for)g(space.)287
2488 y(In)j(con)o(temp)q(orary)f(practice,)i(sp)q(eed)g(is)f(almost)e
(in)o(v)n(ariably)g(w)o(eigh)o(ted)i(v)o(ery)g(hea)o(vily)224
2538 y(in)d(the)h(ob)r(jectiv)o(e)f(function)g(for)g(optimization.)i
(Th)o(us)e(it)g(is)g(common)e(to)h(trade)i(o\013)f(space)224
2588 y(in)j(order)h(to)e(reduce)j(the)f(n)o(um)o(b)q(er)e(of)g
(instructions)i(whic)o(h)f(are)g(executed)i(for)e(a)f(partic-)224
2638 y(ular)g(computation.)k(It)c(is)g(imp)q(ortan)o(t)e(to)i(remem)o
(b)q(er)f(ho)o(w)o(ev)o(er,)h(that)g(extreme)g(cases)h(of)224
2688 y(program)g(size)i(increase)h(ma)o(y)d(actually)g(slo)o(w)h(the)h
(program)e(do)o(wn,)h(ev)o(en)h(if)f(the)h(n)o(um-)p
eop
%%Page: 16 22
16 21 bop 224 274 a FN(16)773 b FL(CHAPTER)14 b(1.)31
b(INTR)o(ODUCTION)224 390 y FN(b)q(er)16 b(of)d(instructions)i
(executed)h(is)e(reduced.)21 b(This)14 b(migh)o(t)e(happ)q(en,)j(for)f
(example,)e(if)i(the)224 440 y(increase)19 b(in)e(size)h(causes)h(the)f
(transformed)f(program)f(to)h(exhibit)g(seriously)g(degraded)224
490 y(cac)o(he)e(b)q(eha)o(viour.)p eop
%%Page: 17 23
17 22 bop 224 702 a FJ(Chapter)32 b(2)224 909 y FP(A)m(ttribute)39
b(Ev)-6 b(aluation)609 1124 y
 10590863 18945146 0 0 10590863 18945146 startTexFig
 609 1124 a
%%BeginDocument: attarch.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-23.0 294.0 translate 0.585 -0.585 scale
1.000 setlinewidth
	[6.000000] 0 setdash
% Polyline
n 313 429 m 313 409 l  173 409 l  173 429 l  clp gs col-1 s gr
	[] 0 setdash
/Times-Bold findfont 11.00 scalefont setfont
183 422 m 
gs 1 -1 scale (optional optimization step) col-1 show gr
	[6.000000] 0 setdash
% Polyline
n 313 349 m 313 329 l  173 329 l  173 349 l  clp gs col-1 s gr
	[] 0 setdash
/Times-Bold findfont 11.00 scalefont setfont
183 342 m 
gs 1 -1 scale (optional optimization step) col-1 show gr
	[6.000000] 0 setdash
% Polyline
n 313 268 m 313 248 l  173 248 l  173 268 l  clp gs col-1 s gr
	[] 0 setdash
/Times-Bold findfont 11.00 scalefont setfont
183 261 m 
gs 1 -1 scale (optional optimization step) col-1 show gr
	[6.000000] 0 setdash
% Polyline
n 313 189 m 313 169 l  173 169 l  173 189 l  clp gs col-1 s gr
	[] 0 setdash
/Times-Bold findfont 11.00 scalefont setfont
183 182 m 
gs 1 -1 scale (optional optimization step) col-1 show gr
% Polyline
n 239 79 m 239 39 l  79 39 l  79 79 l  clp gs col-1 s gr
% Polyline
n 239 239 m 239 199 l  79 199 l  79 239 l  clp gs col-1 s gr
% Polyline
n 239 319 m 239 279 l  79 279 l  79 319 l  clp gs col-1 s gr
% Polyline
n 239 399 m 239 359 l  79 359 l  79 399 l  clp gs col-1 s gr
% Polyline
n 239 479 m 239 439 l  79 439 l  79 479 l  clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 159 19 m 159 39 l gs col-1 s gr
n 161.000 31.000 m 159.000 39.000 l 157.000 31.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 79 m 159 119 l gs col-1 s gr
n 161.000 111.000 m 159.000 119.000 l 157.000 111.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 159 m 159 199 l gs col-1 s gr
n 161.000 191.000 m 159.000 199.000 l 157.000 191.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 239 m 159 279 l gs col-1 s gr
n 161.000 271.000 m 159.000 279.000 l 157.000 271.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 319 m 159 359 l gs col-1 s gr
n 161.000 351.000 m 159.000 359.000 l 157.000 351.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 399 m 159 439 l gs col-1 s gr
n 161.000 431.000 m 159.000 439.000 l 157.000 431.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 479 m 159 499 l gs col-1 s gr
n 161.000 491.000 m 159.000 499.000 l 157.000 491.000 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
% Polyline
n 239 159 m 79 159 l  79 119 l  239 119 l  clp gs 0.95 setgray fill gr
gs col-1 s gr
/Times-Bold findfont 11.00 scalefont setfont
136 462 m 
gs 1 -1 scale (assembler) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
129 381 m 
gs 1 -1 scale (register binder) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
100 302 m 
gs 1 -1 scale (interpretive code selector) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
134 222 m 
gs 1 -1 scale (tree walker) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
107 62 m 
gs 1 -1 scale (front-end tree builder) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
91 502 m 
gs 1 -1 scale (object file out) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
71 422 m 
gs 1 -1 scale (assembly language) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
39 342 m 
gs 1 -1 scale (virtual assembly language) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
81 262 m 
gs 1 -1 scale (abstract stack IR) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
62 181 m 
gs 1 -1 scale (attributed syntax tree) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
69 102 m 
gs 1 -1 scale (abstract syntax tree) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
97 21 m 
gs 1 -1 scale (source file in) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
120 142 m 
gs 1 -1 scale (attribute evaluator) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 224 2447 a FI(2.1)67 b(Abstract)22 b(syn)n(tax)h(trees)224
2538 y FN(W)m(e)16 b(shall)g(assume)f(that)i(the)f(text)h(of)f(the)h
(program)d(source)k(has)e(b)q(een)h(translated)g(in)o(to)224
2588 y(an)12 b(abstract)g(syn)o(tax)g(tree.)19 b(The)12
b(tec)o(hniques)h(whic)o(h)e(are)i(in)o(v)o(olv)o(ed)d(in)h(suc)o(h)i
(tree-building)224 2638 y(are)i(not)f(treated)h(here.)287
2688 y(In)g(order)i(for)e(a)h(program)e(to)i(b)q(e)g(correct,)i(it)d(m)
o(ust)g(ful\014ll)f(a)h(n)o(um)o(b)q(er)g(of)h(conditions)924
2793 y(17)p eop
%%Page: 18 24
18 23 bop 224 274 a FN(18)567 b FL(CHAPTER)14 b(2.)32
b(A)m(TTRIBUTE)13 b(EV)-5 b(ALUA)m(TION)224 390 y FN(whic)o(h)14
b(are)g(sp)q(eci\014ed)h(b)o(y)e(the)h(rules)g(of)f(the)h(language)f
(in)g(whic)o(h)g(it)g(is)g(enco)q(ded.)20 b(Some)12 b(of)224
440 y(these)i(rules)f(are)f(readily)g(sp)q(eci\014ed)h(b)o(y)f(con)o
(text)h(free)g(syn)o(tax)f(rules,)g(suc)o(h)h(as)f(the)h(famili)o(ar)
224 490 y FK(extende)n(d)g(BNF)6 b FN(.)j(Other)j(rules)e(are)h(not)f
(able)g(to)g(b)q(e)h(sp)q(eci\014ed)h(b)o(y)e(con)o(text)g(free)h
(grammars,)224 540 y(and)16 b(are)g(arbitrarily)e(referred)j(to)e(as)h
FK(semantic)g(rules)p FN(.)22 b(These)17 b(seman)o(tic)e(rules)h(con)o
(tain)224 590 y(conditions)e(whic)o(h)f(m)o(ust)g(b)q(e)h(satis\014ed)g
(if)f(the)h(program)e(is)h(to)h(b)q(e)g(w)o(ell-formed.)i(Some)c(of)224
640 y(these)k(conditions)e(are)g(able)g(to)g(b)q(e)g(c)o(hec)o(k)o(ed)h
(b)o(y)f(static)h(analysis)e(of)g(the)i(program,)d(while)224
689 y(others)j(are)g(only)e(able)g(to)h(b)q(e)g(c)o(hec)o(k)o(ed)i(b)o
(y)d(actually)g(executing)i(the)f(program.)j(W)m(e)c(refer)224
739 y(to)f(these)h(t)o(w)o(o)f(kinds)g(of)f(rules)h(as)g
FK(static)h(semantic)g(rules)s FN(,)f(and)f FK(dynamic)j(semantic)f
(rules)p FN(.)287 790 y(The)k(syn)o(tax)f(tree,)i(in)e(its)g(most)g
(rudimen)o(tary)f(form,)g(enco)q(des)j(information)13
b(whic)o(h)224 840 y(corresp)q(onds)h(to)d(the)i(abstract)f(syn)o(tax)g
(of)f(the)h(source)h(program.)i(If)d(the)g(parser)g(has)g(b)q(een)224
890 y(able)f(to)g(create)i(a)e(syn)o(tax)g(tree)h(according)f(to)g(the)
h(syn)o(tactic)f(rules)h(of)f(the)g(language,)g(then)224
939 y(w)o(e)17 b(kno)o(w)e(that)h(the)h(source)g(program)e(is)g(syn)o
(tactically)h(correct.)26 b(Ho)o(w)o(ev)o(er,)16 b(b)q(efore)h(w)o(e)
224 989 y(can)e(generate)h(co)q(de)g(for)e(the)h(source,)h(it)e(is)h
(necessary)h(to)f(p)q(erform)f(the)h FK(static)g(semantic)224
1039 y(che)n(cks)s FN(.)30 b(These)19 b(c)o(hec)o(ks)f(relate)g(to)g
(certain)g(relationships)f(b)q(et)o(w)o(een)i(the)f(attributes)g(of)224
1089 y(the)13 b(v)n(arious)f(no)q(des)h(presen)o(t)h(in)e(the)h(tree.)
18 b(The)13 b FK(dynamic)h(semantic)g(che)n(cks)i FN(can)c(only)g(b)q
(e)224 1139 y(made)h(at)h(run)o(time.)287 1189 y(As)g(w)o(ell)g(as)g(c)
o(hec)o(king)g(for)g(correctness,)j(w)o(e)d(require)h(certain)g
(attributes)g(of)f(the)g(pro-)224 1239 y(gram)j(to)h(b)q(e)h(ev)n
(aluated)f(b)q(efore)g(w)o(e)h(can)f(generate)i(co)q(de.)31
b(Some)17 b(of)h(these)h(attributes)224 1289 y(arise)13
b(naturally)f(as)g(a)h(b)o(y-pro)q(duct)g(of)f(name-binding)e(and)i(t)o
(yp)q(e)i(c)o(hec)o(king,)e(while)g(others)224 1339 y(ha)o(v)o(e)17
b(to)f(b)q(e)h(ev)n(aluated)f(esp)q(ecially)m(.)25 b(F)m(or)16
b(example,)f(for)h(eac)o(h)h(v)n(ariable)e(whic)o(h)h(app)q(ears)224
1389 y(in)d(an)g(expression)h(w)o(e)g(need)g(to)f(kno)o(w)f(whether)j
(the)f(v)n(ariable)e(is)h(lo)q(cal)f(or)h(static,)g(so)g(that)224
1439 y(w)o(e)i(ma)o(y)c(generate)16 b(the)e(righ)o(t)g(kind)f(of)g
(instruction)h(sequence)i(to)e(fetc)o(h)h(the)f(v)n(alue.)224
1560 y FH(2.1.1)56 b(De\014ning)18 b(abstract)h(syn)n(tax)224
1638 y FN(There)13 b(are)f(a)g(n)o(um)o(b)q(er)f(of)g(formalism)o(s)e
(whic)o(h)j(describ)q(e)h(the)g(structure)h(and)d(attributes)i(of)224
1688 y(abstract)f(syn)o(tax)e(trees.)18 b(These)12 b(formalism)o(s)c
(giv)o(e)i(us)g(an)h(agreed)g(v)o(o)q(cabulary)e(to)i(describ)q(e)224
1738 y(the)18 b(essen)o(tial)f(asp)q(ects)i(of)e(the)g(structure,)j
(without)c(ha)o(ving)g(to)h(sp)q(ecify)h(the)f(details)g(of)224
1788 y(implemen)o(tation)11 b(and)j(data)g(represen)o(tation.)21
b(W)m(e)14 b(refer)h(to)g FK(abstr)n(act)i FN(syn)o(tax,)d(precisely)
224 1838 y(b)q(ecause)19 b(suc)o(h)e(details)f(ha)o(v)o(e)g(b)q(een)i
(abstracted)f(a)o(w)o(a)o(y)m(.)24 b(The)17 b(formalism)c(whic)o(h)j(w)
o(e)g(use)224 1888 y(here)i(is)f FK(interfac)n(e)g(de\014nition)i
(language)s FN(,)f(\()p FK(IDL)p FN(\),)f(so)g(called)g(from)e(its)i
(in)o(tended)g(use)h(in)224 1937 y(de\014ning)c(in)o(terc)o(hange)h
(forms)d(b)q(et)o(w)o(een)k(soft)o(w)o(are)d(to)q(ols.)287
1988 y FK(IDL)h FN(represen)o(ts)j(programs)c(b)o(y)h(trees.)21
b(These)15 b(trees)h(are)e(de\014ned)i(in)d(terms)h(of)g(three)224
2038 y(kinds)k(of)f(en)o(tities:)26 b FK(classes,)19
b(no)n(des)j FN(and)17 b FK(attributes)p FN(.)29 b(A)18
b(class)g(is)f(an)h(aggregate)f(t)o(yp)q(e,)224 2088
y(with)e(a)f(\014nite)h(set)h(of)e(alternativ)o(e)g(forms.)20
b(Eac)o(h)15 b(of)f(these)i(alternativ)o(e)e(forms)g(is)g(a)h(no)q(de)
224 2138 y(of)f(the)g(class.)19 b(A)o(ttributes)c(are)f(the)g(comp)q
(onen)o(ts)g(of)f(the)i(aggregate.)287 2188 y(If)c(it)f(is)h(helpful)g
(to)g(think)g(of)g(a)g(concrete)i(represen)o(tation)f(of)f(suc)o(h)h
(structures,)i(then)e(in)224 2238 y(a)d FK(Pasc)n(al)c
FN(-lik)o(e)j(language)h(w)o(e)g(ha)o(v)o(e)g(the)h(follo)o(wing)d
(appro)o(ximate)g(corresp)q(ondences)q(.)19 b(T)m(rees)224
2288 y(corresp)q(ond)14 b(to)f(p)q(oin)o(ter-link)o(ed,)e
(dynamically-all)o(o)q(cated)f(structures,)15 b(with)d(classes)i(cor-)
224 2338 y(resp)q(onding)i(to)f(v)n(arian)o(t)e(record)k(t)o(yp)q(es.)
22 b(No)q(des)15 b(corresp)q(ond)i(to)e(individual)e(v)n(arian)o(ts)h
(of)224 2388 y(the)h(t)o(yp)q(e,)g(while)f(eac)o(h)h(attribute)g(w)o
(ould)e(corresp)q(ond)j(to)e(a)h(\014eld)f(of)g(the)h(v)n(arian)o(t)e
(record)224 2437 y(t)o(yp)q(e.)287 2488 y(If)d FK(IDL)g
FN(is)g(implemen)o(ted)f(in)g(an)i(ob)r(ject)g(orien)o(ted)f(language,)
g(then)h(classes)h(corresp)q(ond)224 2538 y(to)j(single-lev)o(el)g
(class)g(hierarc)o(hies)h(in)f(the)h(language.)k(With)15
b(suc)o(h)g(an)g(implemen)o(tation,)224 2588 y(eac)o(h)d
FK(IDL)f FN(class)g(is)f(implemen)o(ted)f(as)h(an)h(abstract)g
(classes,)h(with)f(eac)o(h)g(no)q(de)g(corresp)q(ond-)224
2638 y(ing)h(to)g(an)g(immediate)d(sub)q(class)14 b(of)d(a)h(single,)g
(paren)o(t)h(class.)18 b(In)12 b(this)h(case)g(attributes)g(are)224
2688 y(just)i(instance)f(v)n(ariables)f(of)h(these)h(sub)q(classes.)p
eop
%%Page: 19 25
19 24 bop 224 274 a FL(2.1.)31 b(ABSTRA)o(CT)14 b(SYNT)m(AX)g(TREES)727
b FN(19)287 390 y(Of)18 b(course,)i FK(IDL)e FN(is)h(an)e(abstract)j
(notation,)e(so)g(that)g(it)g(is)g(not)g(necessary)i(to)e(im-)224
440 y(plemen)o(t)i(the)h(trees)h(b)o(y)e(means)g(of)g(p)q(oin)o
(ter-link)o(ed,)h(dynamic)e(structures.)40 b(F)m(or)20
b(to)q(ol)224 490 y(in)o(terc)o(hange,)13 b(for)e(example,)f
FK(IDL)i FN(trees)h(migh)o(t)d(b)q(e)i(implemen)o(ted)e(in)h(a)g
(\015attened)i(form)d(in)224 540 y(a)i(\014le.)17 b(Nev)o(ertheless,)d
(w)o(e)d(shall)g(\014nd)g(it)g(con)o(v)o(enien)o(t)h(to)f(represen)o(t)
j(trees)f(diagramaticall)o(y)224 590 y(as)h(though)g(they)g(w)o(ere)h
(implemen)o(ted)d(as)i(p)q(oin)o(ter-link)o(ed)f(structures.)287
644 y(In)18 b FK(IDL)p FN(,)f(classes)i(are)g(de\014ned)g(as)f(an)f
(alternation)g(of)h(no)q(des.)30 b(The)19 b(syn)o(tax)e(of)h(the)224
694 y(de\014nition)c(is)g(|)320 792 y FD(Class-de\014nition)54
b Fw(!)c FE(class-id)14 b FD(`)p FF(::=)p FD(')d FE(no)n(de-id)j
Fw(f)f FD(`)p Fw(j)p FD(')f FE(no)n(de-id)i Fw(g)p FD(`;')e(.)320
838 y(No)q(de-de\014nition)54 b Fw(!)c FE(no)n(de-id)14
b FD(`)p FF(==>)p FD(')d(A)o(ttribute-def)j Fw(f)f FD(`,')e(A)o
(ttribute-def)j Fw(g)f FD(`;')f(.)320 884 y(A)o(ttribute-def)89
b Fw(!)50 b FE(attr-id)15 b FD(`:')h(T)o(yp)q(e)d(.)320
929 y(T)o(yp)q(e)223 b Fw(!)50 b FE(class-id)14 b Fw(j)e
FD(`)p FF(seqOf)p FD(')f FE(class-id)j Fw(j)e FE(external)r(ly-de)o
(\014n)o(e)n(d-t)o(yp)m(e)e FD(.)224 1084 y FN(in)g(the)h(con)o(v)o(en)
o(tion)f(adopted)g(here,)i(classes)g(ha)o(v)o(e)e(upp)q(er)h(case)g
(names,)f(no)q(des)h(ha)o(v)o(e)f(mixed)224 1134 y(case)j(names)d(whic)
o(h)h(b)q(egin)h(with)f(an)g(upp)q(er)h(case)g(alphab)q(etic)f(c)o
(haracter,)i(while)e(attribute)224 1184 y(names)19 b(b)q(egin)g(with)f
(a)h(lo)o(w)o(er)g(case)h(alphab)q(etic)e(c)o(haracter.)35
b(A)o(ttributes)20 b(ha)o(v)o(e)f(a)g(t)o(yp)q(e)224
1233 y(whic)o(h)14 b(ma)o(y)d(b)q(e)j(an)g(externally)f(de\014ned)i(t)o
(yp)q(e,)e(suc)o(h)h(as)g FK(INTEGER)r FN(,)f(or)g(ma)o(y)f(b)q(e)i(a)f
(class)224 1283 y(or)j(a)e(sequence)k(of)c(some)g(class)i(t)o(yp)q(e.)
22 b(In)16 b(the)f(case)h(that)g(a)e(class)i(has)f(a)g(single)g(mem)o
(b)q(er)224 1333 y(only)m(,)d(w)o(e)i(ma)o(y)e(use)j(the)f(no)q(de)g
(iden)o(ti\014er)g(instead)g(of)f(the)h(class)h(iden)o(ti\014er)f(to)f
(denote)i(the)224 1383 y(t)o(yp)q(e)g(of)e(an)h(attribute.)287
1437 y(Consider)f(the)g(follo)o(wing)d(fragmen)o(t)h(of)h
FK(IDL)p FN(,)h(whic)o(h)g(describ)q(es)h(the)g(structure)h(of)d(the)
224 1487 y FK(Mo)n(dula-2)24 b(CASE)d FN(statemen)o(t.)27
b(A)17 b(graphical)f(represen)o(tation)j(of)d(an)h(implemen)o(tatio)o
(n)224 1537 y(of)d(the)g FK(IDL)g FN(is)g(sho)o(wn)g(in)f(\014gure)i
(2.1.)295 1643 y FF(STMT)97 b(::=)18 b(...)h(|)g(CaseStmt)d(|)k(...)295
1689 y(CaseStmt)d(==>)h(selector)56 b(:)19 b(EXPR,)550
1735 y(cases)116 b(:)19 b(seqOf)f(Case,)550 1780 y(default)76
b(:)19 b(seqOf)f(STMT;)295 1826 y(Case)97 b(==>)18 b(ranges)96
b(:)19 b(seqOf)f(Range,)550 1872 y(statements)e(:)j(seqOf)f(STMT;)295
1917 y(Range)77 b(==>)18 b(lower)116 b(:)19 b(EXPR,)550
1963 y(upper)116 b(:)19 b(EXPR;)224 2114 y FN(One)12
b(of)f(the)h(no)q(des)g(b)q(elonging)f(to)g(the)h FK(STMT)17
b FN(class)11 b(is)h FK(CaseStmt)p FN(.)17 b(This)11
b(no)q(de)h(has)f(three)224 2163 y(structural)17 b(attributes:)22
b(a)15 b(selector,)i(whic)o(h)e(b)q(elongs)h(to)f(the)i
FK(EXPR)g FN(class,)f(a)f(sequence)224 2213 y(of)f FK(Case)j
FN(no)q(des,)d(and)g(a)f(default)h(statemen)o(t)f(sequence.)287
2267 y(Eac)o(h)i FK(Case)j FN(no)q(de)d(consists)h(of)f(a)g(sequence)i
(of)d FK(R)n(ange)p FN(,)i(and)f(a)f(sequence)j(of)e
FK(STMT)p FN(.)224 2317 y(A)g(range)g(consists)h(of)e(a)h(lo)o(w)o(er)f
(and)g(upp)q(er)i(no)q(de)f(of)f FK(EXPR)j FN(class.)k(Of)15
b(course,)h(a)e(range)224 2367 y(ma)o(y)j(consist)j(of)e(a)g(single)h
(expression,)i(in)d(whic)o(h)h(case)g(the)h(upp)q(er)g(expression)g
(has)f(a)224 2417 y(distinguished)d Fv(nil)d FN(v)n(alue.)21
b(The)16 b(concrete)h(syn)o(tax)e(of)g FK(Mo)n(dula-2)22
b FN(restricts)17 b(some)d(of)h(the)224 2467 y(sequences)h(to)d(b)q(e)g
(non-empt)o(y)m(,)e(while)h(others)i(are)f(p)q(ermitted)g(to)g(b)q(e)g
(empt)o(y)1442 2451 y Fz(1)1460 2467 y FN(.)18 b(In)13
b(section)224 2516 y(2.4)18 b(w)o(e)g(consider)h(the)g(additional)e
(attributes)i(whic)o(h)f(need)h(to)f(b)q(e)h(ev)n(aluated)f(for)g(this)
224 2566 y(structure.)p 224 2610 577 2 v 271 2636 a Fy(1)288
2648 y Fx(T)m(o)c(b)q(e)e(sp)q(eci\014c,)g(in)h Fu(Mo)n(dula-2)19
b Fx(statemen)o(t)11 b(sequences)g(and)h(case)h(sequences)d(ma)o(y)j(b)
q(e)g(empt)o(y)m(,)e(but)224 2688 y(the)g(range)f(sequence)f(for)i(eac)
o(h)g(case)g(m)o(ust)f(con)o(tain)f(at)j(least)e(one)h(range.)p
eop
%%Page: 20 26
20 25 bop 224 274 a FN(20)567 b FL(CHAPTER)14 b(2.)32
b(A)m(TTRIBUTE)13 b(EV)-5 b(ALUA)m(TION)259 349 y
 21642199 16971694 0 0 21642199 16971694 startTexFig
 259
349 a
%%BeginDocument: caseidl.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-49.0 348.0 translate 0.900 -0.900 scale
0.500 setlinewidth
% Polyline
n 131 309 m 124 309 124 322 7 arcto 4 {pop} repeat 124 329 157 329 7 arcto 4 {pop} repeat 164 329 164 316 7 arcto 4 {pop} repeat 164 309 131 309 7 arcto 4 {pop} repeat clp gs 1.00 setgray fill gr
gs col-1 s gr
% Polyline
n 126 304 m 119 304 119 317 7 arcto 4 {pop} repeat 119 324 152 324 7 arcto 4 {pop} repeat 159 324 159 311 7 arcto 4 {pop} repeat 159 304 126 304 7 arcto 4 {pop} repeat clp gs 1.00 setgray fill gr
gs col-1 s gr
1.000 setlinewidth
% Polyline
n 121 299 m 114 299 114 312 7 arcto 4 {pop} repeat 114 319 147 319 7 arcto 4 {pop} repeat 154 319 154 306 7 arcto 4 {pop} repeat 154 299 121 299 7 arcto 4 {pop} repeat clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 121 299 m 114 299 114 312 7 arcto 4 {pop} repeat 114 319 147 319 7 arcto 4 {pop} repeat 154 319 154 306 7 arcto 4 {pop} repeat 154 299 121 299 7 arcto 4 {pop} repeat clp gs 1.00 setgray fill gr
gs col-1 s gr
% Polyline
n 196 209 m 189 209 189 222 7 arcto 4 {pop} repeat 189 229 222 229 7 arcto 4 {pop} repeat 229 229 229 216 7 arcto 4 {pop} repeat 229 209 196 209 7 arcto 4 {pop} repeat clp gs 1.00 setgray fill gr
gs col-1 s gr
% Polyline
n 191 204 m 184 204 184 217 7 arcto 4 {pop} repeat 184 224 217 224 7 arcto 4 {pop} repeat 224 224 224 211 7 arcto 4 {pop} repeat 224 204 191 204 7 arcto 4 {pop} repeat clp gs 1.00 setgray fill gr
gs col-1 s gr
1.000 setlinewidth
% Polyline
n 186 199 m 179 199 179 212 7 arcto 4 {pop} repeat 179 219 212 219 7 arcto 4 {pop} repeat 219 219 219 206 7 arcto 4 {pop} repeat 219 199 186 199 7 arcto 4 {pop} repeat clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 186 199 m 179 199 179 212 7 arcto 4 {pop} repeat 179 219 212 219 7 arcto 4 {pop} repeat 219 219 219 206 7 arcto 4 {pop} repeat 219 199 186 199 7 arcto 4 {pop} repeat clp gs 1.00 setgray fill gr
gs col-1 s gr
1.000 setlinewidth
% Polyline
n 172 148 m 165 148 165 161 7 arcto 4 {pop} repeat 165 168 248 168 7 arcto 4 {pop} repeat 255 168 255 155 7 arcto 4 {pop} repeat 255 148 172 148 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 127 248 m 120 248 120 261 7 arcto 4 {pop} repeat 120 268 203 268 7 arcto 4 {pop} repeat 210 268 210 255 7 arcto 4 {pop} repeat 210 248 127 248 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 247 248 m 240 248 240 261 7 arcto 4 {pop} repeat 240 268 323 268 7 arcto 4 {pop} repeat 330 268 330 255 7 arcto 4 {pop} repeat 330 248 247 248 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 336 149 m 329 149 329 162 7 arcto 4 {pop} repeat 329 169 412 169 7 arcto 4 {pop} repeat 419 169 419 156 7 arcto 4 {pop} repeat 419 149 336 149 7 arcto 4 {pop} repeat clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 129 319 m 104 354 l gs col-1 s gr
n 110.277 348.653 m 104.000 354.000 l 107.022 346.328 l gs 2 setlinejoin col-1 s gr
% Polyline
n 139 319 m 159 354 l gs col-1 s gr
n 156.767 346.062 m 159.000 354.000 l 153.294 348.046 l gs 2 setlinejoin col-1 s gr
% Polyline
n 284 268 m 284 284 l gs col-1 s gr
n 286.000 276.000 m 284.000 284.000 l 282.000 276.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 375 170 m 375 184 l gs col-1 s gr
n 377.000 176.000 m 375.000 184.000 l 373.000 176.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 73 170 m 73 184 l gs col-1 s gr
n 75.000 176.000 m 73.000 184.000 l 71.000 176.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 104 374 m 104 386 l gs col-1 s gr
n 106.000 378.000 m 104.000 386.000 l 102.000 378.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 374 m 159 385 l gs col-1 s gr
n 161.000 377.000 m 159.000 385.000 l 157.000 377.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 209 119 m 209 148 l gs col-1 s gr
n 211.000 140.000 m 209.000 148.000 l 207.000 140.000 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
% Polyline
n 187 99 m 180 99 180 112 7 arcto 4 {pop} repeat 180 119 233 119 7 arcto 4 {pop} repeat 240 119 240 106 7 arcto 4 {pop} repeat 240 99 187 99 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 61 149 m 54 149 54 162 7 arcto 4 {pop} repeat 54 169 87 169 7 arcto 4 {pop} repeat 94 169 94 156 7 arcto 4 {pop} repeat 94 149 61 149 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 92 353 m 85 353 85 366 7 arcto 4 {pop} repeat 85 373 118 373 7 arcto 4 {pop} repeat 125 373 125 360 7 arcto 4 {pop} repeat 125 353 92 353 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 147 353 m 140 353 140 366 7 arcto 4 {pop} repeat 140 373 173 373 7 arcto 4 {pop} repeat 180 373 180 360 7 arcto 4 {pop} repeat 180 353 147 353 7 arcto 4 {pop} repeat clp gs col-1 s gr
0.500 setlinewidth
% Open spline
n 195.000 119.000 m 194.500 124.000 l
	194.500 124.000 194.000 129.000 134.000 129.000 DrawSplineSection
	134.000 129.000 74.000 129.000 74.000 139.000 DrawSplineSection
	74.000 149.000 l gs col-1 s gr
n 76.000 141.000 m 74.000 149.000 l 72.000 141.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 224.000 119.000 m 224.000 124.000 l
	224.000 124.000 224.000 129.000 299.000 129.000 DrawSplineSection
	299.000 129.000 374.000 129.000 374.000 139.000 DrawSplineSection
	374.000 149.000 l gs col-1 s gr
n 376.000 141.000 m 374.000 149.000 l 372.000 141.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 194.000 219.000 m 194.000 226.500 l
	194.000 226.500 194.000 234.000 179.000 234.000 DrawSplineSection
	179.000 234.000 164.000 234.000 164.000 241.500 DrawSplineSection
	164.000 249.000 l gs col-1 s gr
n 166.000 241.000 m 164.000 249.000 l 162.000 241.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 204.000 219.000 m 204.000 226.500 l
	204.000 226.500 204.000 234.000 244.000 234.000 DrawSplineSection
	244.000 234.000 284.000 234.000 284.000 241.500 DrawSplineSection
	284.000 249.000 l gs col-1 s gr
n 286.000 241.000 m 284.000 249.000 l 282.000 241.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 154.000 269.000 m 154.000 276.500 l
	154.000 276.500 154.000 284.000 144.000 284.000 DrawSplineSection
	144.000 284.000 134.000 284.000 134.000 291.500 DrawSplineSection
	134.000 299.000 l gs col-1 s gr
n 136.000 291.000 m 134.000 299.000 l 132.000 291.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 209.000 169.000 m 209.000 176.500 l
	209.000 176.500 209.000 184.000 204.000 184.000 DrawSplineSection
	204.000 184.000 199.000 184.000 199.000 191.500 DrawSplineSection
	199.000 199.000 l gs col-1 s gr
n 201.000 191.000 m 199.000 199.000 l 197.000 191.000 l gs 2 setlinejoin col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
120 312 m 
gs 1 -1 scale (Range) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
184 162 m 
gs 1 -1 scale (seqOf Case) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
137 262 m 
gs 1 -1 scale (seqOf Range) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
343 162 m 
gs 1 -1 scale (seqOf STMT) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
253 262 m 
gs 1 -1 scale (seqOf STMT) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
86 340 m 
gs 1 -1 scale (lower) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
154 338 m 
gs 1 -1 scale (upper) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
212 140 m 
gs 1 -1 scale (cases) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
116 125 m 
gs 1 -1 scale (selector) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
283 124 m 
gs 1 -1 scale (default) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
241 231 m 
gs 1 -1 scale (statements) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
145 232 m 
gs 1 -1 scale (ranges) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
187 213 m 
gs 1 -1 scale (Case) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
191 112 m 
gs 1 -1 scale (CaseStmt) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
62 163 m 
gs 1 -1 scale (EXPR) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
92 367 m 
gs 1 -1 scale (EXPR) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
149 367 m 
gs 1 -1 scale (EXPR) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 242 1515 a FN(Figure)14 b(2.1:)j(Abstract)e(syn)o(tax)f(represen)o
(tation)h(of)e(the)i FK(Mo)n(dula-2)20 b(CASE)f FN(statemen)o(t)224
1652 y FI(2.2)67 b(Represen)n(ting)23 b(declared)g(en)n(tities)224
1746 y FN(Ev)o(ery)15 b(declared)h(en)o(tit)o(y)e(in)g(a)g(program)f
(has)h(an)g(abstract)i(represen)o(tation)f(whic)o(h)g(forms)224
1796 y(part)j(of)e(the)i(abstract)g(syn)o(tax)f(of)g(the)g(language.)27
b(F)m(or)17 b(example)f(w)o(e)h(migh)o(t)e(de\014ne)k(an)224
1846 y(abstract)14 b(syn)o(tax)g(for)e FK(Mo)n(dula-2)20
b FN(for)13 b(whic)o(h)g(a)g(fragmen)o(t)e(of)i(the)h
FK(IDL)f FN(migh)o(t)e(app)q(ear)j(as)295 1940 y FF(ID_DESCRIP)o(TOR)i
(::=)i(VarIdDesc)e(|)k(TypeIdDes)o(c)c(|)k(ConstIdDe)o(sc)609
1986 y(|)f(fieldIdDes)o(c)e(|)i(...)295 2032 y(TypeIdDesc)75
b(==>)18 b(name)97 b(:)19 b(IdOrd,)648 2077 y(typType)37
b(:)19 b(TY_DESCRIP)o(TO)o(R;)295 2123 y(VarIdDesc)95
b(==>)18 b(name)97 b(:)19 b(IdOrd,)648 2169 y(varType)37
b(:)19 b(TY_DESCRIP)o(TO)o(R,)648 2214 y(offset)57 b(:)19
b(INTEGER;)56 b(--)19 b(for)f(local)g(vars)295 2260 y(ConstIdDes)o(c)56
b(==>)18 b(name)97 b(:)19 b(IdOrd,)648 2306 y(conType)37
b(:)19 b(TY_DESCRIP)o(TO)o(R,)648 2351 y(conValue)e(:)i(LITERAL;)295
2397 y(LITERAL)135 b(::=)18 b(ZZlit)g(|)h(RRlit)f(|)h(StrLit)e(|)j(...)
224 2538 y FN(All)11 b(declarations)g(are)g(represen)o(ted)j(b)o(y)d
(an)f FK(identi\014er)i(descriptor)t FN(,)f(with)g(a)g(separate)h(no)q
(de)224 2588 y(of)i(the)h(class)g(represen)o(ting)i(v)n(ariable)c
(declarations,)h(constan)o(t)h(declarations)g(and)f(so)h(on.)224
2638 y(The)h(t)o(yp)q(e)g(information)c(for)j(the)h(descriptor)h(is)e
(held)g(in)g(a)g(separate)i(structure,)g(a)e(no)q(de)224
2688 y(of)f(the)g FK(typ)n(e)h(descriptor)j FN(class.)p
eop
%%Page: 21 27
21 26 bop 224 274 a FL(2.2.)31 b(REPRESENTING)14 b(DECLARED)f(ENTITIES)
501 b FN(21)287 390 y(When)13 b(the)h(source)h(is)e(parsed,)h(the)g(t)o
(yp)q(es)h(ma)o(y)c(b)q(e)j(simple)e(t)o(yp)q(e)i(denotations)f(whic)o
(h)224 440 y(are)h(resolv)o(ed)g(to)f(some)f(actual)h(t)o(yp)q(e)h
(descriptor)g(during)f(name-binding.)j(In)d(the)h(case)g(of)224
490 y(t)o(yp)q(e)h(de\014nitions,)e(the)i(t)o(yp)q(e)f(descriptors)i
(themselv)o(es)e(are)g(constructed.)224 606 y FH(2.2.1)56
b(Represen)n(ting)17 b(t)n(yp)r(es)224 682 y FN(Most)g(of)e(our)h
(languages)f(of)g(in)o(terest)i(ha)o(v)o(e)f(a)f(small)f(n)o(um)o(b)q
(er)h(of)g(primitiv)o(e)f(t)o(yp)q(es,)i(and)224 732
y(t)o(yp)q(e)21 b(constructors)i(whic)o(h)d(allo)o(w)f(the)i
(de\014nition)f(of)g(new)h(t)o(yp)q(es.)39 b(These)22
b(t)o(yp)q(es)f(are)224 782 y(constructed)13 b(from)c(existing)h(t)o
(yp)q(es,)i(so)f(that)g(programs)e(ma)o(y)g(construct)j(directed)g
(graphs)224 832 y(of)h(t)o(yp)q(es.)19 b(Apart)14 b(from)d(the)j(fact)g
(that)f(the)h(built-in)e(t)o(yp)q(es)j(app)q(ear)e(at)h(the)g(lea)o(v)o
(es,)f(these)224 882 y(t)o(yp)q(e)i(graphs)f(ha)o(v)o(e)g(almost)e
(arbitrary)h(structure.)287 932 y(A)h(fragmen)o(t)e(of)h(the)i
(abstract)g(syn)o(tax)e(for)h(t)o(yp)q(es)h(in)e FK(Mo)n(dula-2)20
b FN(migh)o(t)12 b(b)q(e)249 1052 y FF(TY_DESCRIP)o(TOR)k(::=)i
(TyNameDesc)e(|)j(ArrayDesc)d(|)k(RecordDes)o(c)c(|)k(PointerDe)o(sc)c
(|)j(...)249 1098 y(TyNameDesc)75 b(==>)18 b(name)156
b(:)19 b(IdOrd;)76 b(--)19 b(all)f(that)g(is)h(known)f(so)h(far)249
1144 y(ArrayDesc)95 b(==>)18 b(name)156 b(:)19 b(IdOrd,)76
b(--)19 b(possibly)d(anonymous)602 1189 y(size)156 b(:)19
b(INTEGER,)602 1235 y(indexType)56 b(:)19 b(TY_DESCRI)o(PTO)o(R,)602
1281 y(elementTyp)o(e)e(:)i(TY_DESCRI)o(PTO)o(R;)249
1326 y(RecordDesc)75 b(==>)18 b(name)156 b(:)19 b(IdOrd,)76
b(--)19 b(possibly)d(anonymous)602 1372 y(size)156 b(:)19
b(INTEGER,)602 1418 y(fieldSeq)76 b(:)19 b(seqOf)f(ID_DESCRI)o(PT)o
(OR;)249 1463 y(PointerDes)o(c)56 b(==>)18 b(name)156
b(:)19 b(IdOrd,)76 b(--)19 b(possibly)d(anonymous)602
1509 y(size)156 b(:)19 b(INTEGER,)602 1555 y(targetType)36
b(:)19 b(TY_DESCRI)o(PTO)o(R;)224 1686 y FN(The)e(t)o(yp)q(e)g
(descriptor)h(for)e(a)h(named)e(t)o(yp)q(e)i(has)g(no)f(attributes)h
(other)g(than)g(the)g(name.)224 1736 y(Arra)o(y)e(descriptors)g(ha)o(v)
o(e)f(t)o(w)o(o)g(attributes)h(whic)o(h)e(denote)i(the)g(index)f(t)o
(yp)q(e)h(and)e(the)i(ele-)224 1785 y(men)o(t)c(t)o(yp)q(e)h(of)f(the)i
(arra)o(y)m(.)j(Both)c(of)f(these)i(attributes)g(are)f(themselv)o(es)g
(t)o(yp)q(e)g(descriptors.)224 1835 y(Record)19 b(descriptors)g(ha)o(v)
o(e)e(a)h(sequence)h(of)e(\014eld)h(iden)o(ti\014ers)g(whic)o(h)g(are)g
(iden)o(ti\014er)g(de-)224 1885 y(scriptors.)287 1935
y(It)e(should)h(b)q(e)g(noted)g(that)g(there)h(is)f(no)f(attempt)g
(made)g(to)g(ensure)i(that)f(the)g FK(AST)224 1985 y
FN(can)12 b(only)f(represen)o(t)j(correct)f(t)o(yp)q(e)f(declarations.)
17 b(F)m(or)11 b(example,)g(the)h FK(elementT)m(yp)n(e)i
FN(\014eld)224 2034 y(of)g(an)f(arra)o(y)h(descriptor)h(can)f(legally)e
(b)q(e)j(an)o(y)e(no)q(de)h(of)f(the)i(t)o(yp)q(e)f(descriptor)h
(class.)k(It)13 b(is)224 2084 y(a)j(quite)g(separate)h(attribution)e
(task)i(to)e(c)o(hec)o(k)i(the)g(v)n(alidit)o(y)d(of)h(the)h
(declarations,)g(and)224 2134 y(thro)o(w)e(out)f(imp)q(ossible)e(cases)
k(suc)o(h)f(as)f(non-ordinal)f(t)o(yp)q(es)i(used)g(as)g(arra)o(y)f
(index)g(t)o(yp)q(es.)287 2184 y(If)f(all)g(that)h(has)g(b)q(een)i
(done)e(is)g(to)g(parse)h(the)f(declarations,)g(then)h(w)o(e)f(shall)f
(still)g(ha)o(v)o(e)224 2234 y(a)19 b(tree.)36 b(It)19
b(is)g(after)h(the)g(names)e(ha)o(v)o(e)h(b)q(een)h(b)q(ound)g(that)f
(the)h(full)e(graph)h(structure)224 2284 y(b)q(ecomes)c(apparen)o(t.)
287 2333 y(Supp)q(ose)f(w)o(e)h(parse)f(the)h(t)o(yp)q(e)f
(declarations)g(|)295 2416 y FF(TYPE)k(Tree)97 b(=)19
b(POINTER)e(TO)i(TreeNode;)393 2462 y(TreeNode)e(=)i(RECORD)648
2508 y(key)58 b(:)19 b(INTEGER;)648 2553 y(left)38 b(:)19
b(Tree;)648 2599 y(right)f(:)h(Tree;)609 2645 y(END;)p
eop
%%Page: 22 28
22 27 bop 224 274 a FN(22)567 b FL(CHAPTER)14 b(2.)32
b(A)m(TTRIBUTE)13 b(EV)-5 b(ALUA)m(TION)224 390 y FN(Figures)16
b(2.2)d(and)i(2.3)e(sho)o(w)i(the)g FK(AST)20 b FN(follo)o(wing)12
b(parsing,)i(and)h(after)f(the)i(names)d(ha)o(v)o(e)224
440 y(b)q(een)18 b(b)q(ound.)54 b(In)17 b(these)h(\014gures,)g(the)g(t)
o(yp)q(e)f(descriptors)i(ha)o(v)o(e)d(b)q(een)i(sho)o(wn)f(shaded,)289
498 y
 20721254 14274641 0 0 20721254 14274641 startTexFig
 289 498 a
%%BeginDocument: typebind.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-54.0 234.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Polyline
n 66 119 m 59 119 59 152 7 arcto 4 {pop} repeat 59 159 132 159 7 arcto 4 {pop} repeat 139 159 139 126 7 arcto 4 {pop} repeat 139 119 66 119 7 arcto 4 {pop} repeat clp gs 0.95 setgray fill gr
gs col-1 s gr
% Polyline
n 226 118 m 219 118 219 151 7 arcto 4 {pop} repeat 219 158 292 158 7 arcto 4 {pop} repeat 299 158 299 125 7 arcto 4 {pop} repeat 299 118 226 118 7 arcto 4 {pop} repeat clp gs 0.95 setgray fill gr
gs col-1 s gr
% Polyline
n 226 58 m 219 58 219 81 7 arcto 4 {pop} repeat 219 88 291 88 7 arcto 4 {pop} repeat 298 88 298 65 7 arcto 4 {pop} repeat 298 58 226 58 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 67 59 m 60 59 60 82 7 arcto 4 {pop} repeat 60 89 132 89 7 arcto 4 {pop} repeat 139 89 139 66 7 arcto 4 {pop} repeat 139 59 67 59 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 335 180 m 328 180 328 203 7 arcto 4 {pop} repeat 328 210 400 210 7 arcto 4 {pop} repeat 407 210 407 187 7 arcto 4 {pop} repeat 407 180 335 180 7 arcto 4 {pop} repeat clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 98 89 m 98 119 l gs col-1 s gr
n 100.000 111.000 m 98.000 119.000 l 96.000 111.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 259 88 m 259 118 l gs col-1 s gr
n 261.000 110.000 m 259.000 118.000 l 257.000 110.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 98 159 m 98 180 l gs col-1 s gr
n 100.000 172.000 m 98.000 180.000 l 96.000 172.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 199 209 m 199 229 l gs col-1 s gr
n 201.000 221.000 m 199.000 229.000 l 197.000 221.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 281 211 m 281 230 l gs col-1 s gr
n 283.000 222.000 m 281.000 230.000 l 279.000 222.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 366 211 m 366 229 l gs col-1 s gr
n 368.000 221.000 m 366.000 229.000 l 364.000 221.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 260 159 m 260 180 l gs col-1 s gr
n 262.000 172.000 m 260.000 180.000 l 258.000 172.000 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
% Polyline
n 252 229 m 245 229 245 252 7 arcto 4 {pop} repeat 245 259 318 259 7 arcto 4 {pop} repeat 325 259 325 236 7 arcto 4 {pop} repeat 325 229 252 229 7 arcto 4 {pop} repeat clp gs 0.95 setgray fill gr
gs col-1 s gr
% Polyline
n 336 229 m 329 229 329 252 7 arcto 4 {pop} repeat 329 259 402 259 7 arcto 4 {pop} repeat 409 259 409 236 7 arcto 4 {pop} repeat 409 229 336 229 7 arcto 4 {pop} repeat clp gs 0.95 setgray fill gr
gs col-1 s gr
% Polyline
n 66 180 m 59 180 59 203 7 arcto 4 {pop} repeat 59 210 132 210 7 arcto 4 {pop} repeat 139 210 139 187 7 arcto 4 {pop} repeat 139 180 66 180 7 arcto 4 {pop} repeat clp gs 0.95 setgray fill gr
gs col-1 s gr
% Polyline
n 252 180 m 245 180 245 203 7 arcto 4 {pop} repeat 245 210 317 210 7 arcto 4 {pop} repeat 324 210 324 187 7 arcto 4 {pop} repeat 324 180 252 180 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 169 179 m 162 179 162 202 7 arcto 4 {pop} repeat 162 209 234 209 7 arcto 4 {pop} repeat 241 209 241 186 7 arcto 4 {pop} repeat 241 179 169 179 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 168 229 m 161 229 161 252 7 arcto 4 {pop} repeat 161 259 234 259 7 arcto 4 {pop} repeat 241 259 241 236 7 arcto 4 {pop} repeat 241 229 168 229 7 arcto 4 {pop} repeat clp gs 0.95 setgray fill gr
gs col-1 s gr
0.500 setlinewidth
% Open spline
n 254.000 159.000 m 254.000 163.500 l
	254.000 163.500 254.000 168.000 250.000 170.000 DrawSplineSection
	250.000 170.000 246.000 172.000 240.500 167.500 DrawSplineSection
	240.500 167.500 235.000 163.000 232.500 166.500 DrawSplineSection
	232.500 166.500 230.000 170.000 230.000 175.000 DrawSplineSection
	230.000 180.000 l gs col-1 s gr
n 232.000 172.000 m 230.000 180.000 l 228.000 172.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 267.000 159.000 m 267.000 163.500 l
	267.000 163.500 267.000 168.000 276.500 171.000 DrawSplineSection
	276.500 171.000 286.000 174.000 309.000 168.500 DrawSplineSection
	309.000 168.500 332.000 163.000 338.000 164.500 DrawSplineSection
	338.000 164.500 344.000 166.000 343.500 173.000 DrawSplineSection
	343.000 180.000 l gs col-1 s gr
n 345.565 172.163 m 343.000 180.000 l 341.575 171.878 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Open spline
n 60.000 20.000 m 60.000 30.000 l
	60.000 30.000 60.000 40.000 79.500 30.000 DrawSplineSection
	79.500 30.000 99.000 20.000 99.000 39.500 DrawSplineSection
	99.000 59.000 l gs col-1 s gr
	[] 0 setdash
n 101.000 51.000 m 99.000 59.000 l 97.000 51.000 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Open spline
n 220.000 18.000 m 220.000 28.000 l
	220.000 28.000 220.000 38.000 239.500 28.000 DrawSplineSection
	239.500 28.000 259.000 18.000 259.000 37.500 DrawSplineSection
	259.000 57.000 l gs col-1 s gr
	[] 0 setdash
n 261.000 49.000 m 259.000 57.000 l 257.000 49.000 l gs 2 setlinejoin col-1 s gr
/Times-Italic findfont 10.00 scalefont setfont
234 69 m 
gs 1 -1 scale (TypeIdDesc) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
224 82 m 
gs 1 -1 scale (name) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
248 82 m 
gs 1 -1 scale (: TreeNode) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
74 129 m 
gs 1 -1 scale (PointerDesc) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
235 128 m 
gs 1 -1 scale (RecordDesc) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
73 153 m 
gs 1 -1 scale (size) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
235 152 m 
gs 1 -1 scale (size) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
225 141 m 
gs 1 -1 scale (name) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
249 141 m 
gs 1 -1 scale (: TreeNode) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
100 142 m 
gs 1 -1 scale (: Tree) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
74 142 m 
gs 1 -1 scale (name) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
72 81 m 
gs 1 -1 scale (name) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
74 69 m 
gs 1 -1 scale (TypeIdDesc) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
99 81 m 
gs 1 -1 scale (: Tree) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
173 202 m 
gs 1 -1 scale (name) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
175 190 m 
gs 1 -1 scale (FieldIdDesc) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
256 202 m 
gs 1 -1 scale (name) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
258 190 m 
gs 1 -1 scale (FieldIdDesc) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
340 202 m 
gs 1 -1 scale (name) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
342 190 m 
gs 1 -1 scale (FieldIdDesc) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
262 105 m 
gs 1 -1 scale (typeType) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
103 106 m 
gs 1 -1 scale (typeType) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
103 172 m 
gs 1 -1 scale (targetType) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
189 172 m 
gs 1 -1 scale (fieldSeq) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
367 202 m 
gs 1 -1 scale (: right) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
283 202 m 
gs 1 -1 scale (: left) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
200 202 m 
gs 1 -1 scale (: key) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
189 253 m 
gs 1 -1 scale (: INTEGER) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
275 253 m 
gs 1 -1 scale (: Tree) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
359 253 m 
gs 1 -1 scale (: Tree) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
90 204 m 
gs 1 -1 scale (: TreeNode) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
174 240 m 
gs 1 -1 scale (TyNameDesc) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
167 253 m 
gs 1 -1 scale (name) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
259 240 m 
gs 1 -1 scale (TyNameDesc) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
252 253 m 
gs 1 -1 scale (name) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
343 240 m 
gs 1 -1 scale (TyNameDesc) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
336 253 m 
gs 1 -1 scale (name) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
73 191 m 
gs 1 -1 scale (TyNameDesc) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
66 204 m 
gs 1 -1 scale (name) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
206 222 m 
gs 1 -1 scale (fldType) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 258 1494 a FN(Figure)d(2.2:)j(Abstract)f(syn)o(tax)d(trees)j(of)d(t)o
(yp)q(e)i(declarations,)e(b)q(efore)i(name)d(binding)268
1601 y
 21379072 14143078 0 0 21379072 14143078 startTexFig
 268 1601 a
%%BeginDocument: typebind2.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-42.0 232.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Polyline
n 66 119 m 59 119 59 152 7 arcto 4 {pop} repeat 59 159 132 159 7 arcto 4 {pop} repeat 139 159 139 126 7 arcto 4 {pop} repeat 139 119 66 119 7 arcto 4 {pop} repeat clp gs 0.95 setgray fill gr
gs col-1 s gr
% Polyline
n 226 118 m 219 118 219 151 7 arcto 4 {pop} repeat 219 158 292 158 7 arcto 4 {pop} repeat 299 158 299 125 7 arcto 4 {pop} repeat 299 118 226 118 7 arcto 4 {pop} repeat clp gs 0.95 setgray fill gr
gs col-1 s gr
% Polyline
n 226 58 m 219 58 219 81 7 arcto 4 {pop} repeat 219 88 291 88 7 arcto 4 {pop} repeat 298 88 298 65 7 arcto 4 {pop} repeat 298 58 226 58 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 67 59 m 60 59 60 82 7 arcto 4 {pop} repeat 60 89 132 89 7 arcto 4 {pop} repeat 139 89 139 66 7 arcto 4 {pop} repeat 139 59 67 59 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 335 180 m 328 180 328 203 7 arcto 4 {pop} repeat 328 210 400 210 7 arcto 4 {pop} repeat 407 210 407 187 7 arcto 4 {pop} repeat 407 180 335 180 7 arcto 4 {pop} repeat clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 98 89 m 98 119 l gs col-1 s gr
n 100.000 111.000 m 98.000 119.000 l 96.000 111.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 259 88 m 259 118 l gs col-1 s gr
n 261.000 110.000 m 259.000 118.000 l 257.000 110.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 260 159 m 260 180 l gs col-1 s gr
n 262.000 172.000 m 260.000 180.000 l 258.000 172.000 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
% Polyline
n 252 180 m 245 180 245 203 7 arcto 4 {pop} repeat 245 210 317 210 7 arcto 4 {pop} repeat 324 210 324 187 7 arcto 4 {pop} repeat 324 180 252 180 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 169 179 m 162 179 162 202 7 arcto 4 {pop} repeat 162 209 234 209 7 arcto 4 {pop} repeat 241 209 241 186 7 arcto 4 {pop} repeat 241 179 169 179 7 arcto 4 {pop} repeat clp gs col-1 s gr
0.500 setlinewidth
	[4.000000] 0 setdash
% Polyline
n 224 255 m 230 257 l gs col-1 s gr
	[] 0 setdash
n 223.043 252.573 m 230.000 257.000 l 221.778 256.368 l gs 2 setlinejoin col-1 s gr
% Open spline
n 254.000 159.000 m 254.000 163.000 l
	254.000 163.000 254.000 167.000 250.500 171.000 DrawSplineSection
	250.500 171.000 247.000 175.000 241.500 169.000 DrawSplineSection
	241.500 169.000 236.000 163.000 233.000 166.000 DrawSplineSection
	233.000 166.000 230.000 169.000 230.000 174.500 DrawSplineSection
	230.000 180.000 l gs col-1 s gr
n 232.000 172.000 m 230.000 180.000 l 228.000 172.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 267.000 159.000 m 267.000 163.000 l
	267.000 163.000 267.000 167.000 272.000 172.000 DrawSplineSection
	272.000 172.000 277.000 177.000 304.000 169.000 DrawSplineSection
	304.000 169.000 331.000 161.000 337.000 165.000 DrawSplineSection
	337.000 165.000 343.000 169.000 343.000 174.500 DrawSplineSection
	343.000 180.000 l gs col-1 s gr
n 345.000 172.000 m 343.000 180.000 l 341.000 172.000 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Open spline
n 60.000 20.000 m 60.000 30.000 l
	60.000 30.000 60.000 40.000 79.500 30.000 DrawSplineSection
	79.500 30.000 99.000 20.000 99.000 39.500 DrawSplineSection
	99.000 59.000 l gs col-1 s gr
	[] 0 setdash
n 101.000 51.000 m 99.000 59.000 l 97.000 51.000 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Open spline
n 220.000 18.000 m 220.000 28.000 l
	220.000 28.000 220.000 38.000 239.500 28.000 DrawSplineSection
	239.500 28.000 259.000 18.000 259.000 37.500 DrawSplineSection
	259.000 57.000 l gs col-1 s gr
	[] 0 setdash
n 261.000 49.000 m 259.000 57.000 l 257.000 49.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 99.000 160.000 m 99.500 169.500 l
	99.500 169.500 100.000 179.000 130.000 178.500 DrawSplineSection
	130.000 178.500 160.000 178.000 180.000 139.000 DrawSplineSection
	180.000 139.000 200.000 100.000 216.000 100.000 DrawSplineSection
	216.000 100.000 232.000 100.000 232.000 109.000 DrawSplineSection
	232.000 118.000 l gs col-1 s gr
n 234.000 110.000 m 232.000 118.000 l 230.000 110.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 343.000 210.000 m 343.000 219.000 l
	343.000 219.000 343.000 228.000 331.500 228.000 DrawSplineSection
	331.500 228.000 320.000 228.000 250.500 228.500 DrawSplineSection
	250.500 228.500 181.000 229.000 140.000 223.500 DrawSplineSection
	140.000 223.500 99.000 218.000 73.500 198.500 DrawSplineSection
	73.500 198.500 48.000 179.000 46.500 149.500 DrawSplineSection
	46.500 149.500 45.000 120.000 48.000 110.500 DrawSplineSection
	48.000 110.500 51.000 101.000 60.500 101.000 DrawSplineSection
	60.500 101.000 70.000 101.000 70.000 110.000 DrawSplineSection
	70.000 119.000 l gs col-1 s gr
n 72.000 111.000 m 70.000 119.000 l 68.000 111.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 259.000 211.000 m 259.000 219.500 l
	259.000 219.500 259.000 228.000 249.000 228.000 DrawSplineSection
	239.000 228.000 l gs col-1 s gr
n 247.000 230.000 m 239.000 228.000 l 247.000 226.000 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Open spline
n 195.000 210.000 m 195.000 219.500 l
	195.000 219.500 195.000 229.000 195.000 235.500 DrawSplineSection
	195.000 235.500 195.000 242.000 210.000 248.500 DrawSplineSection
	225.000 255.000 l gs col-1 s gr
	[] 0 setdash
n 218.455 249.984 m 225.000 255.000 l 216.864 253.654 l gs 2 setlinejoin col-1 s gr
/Times-Italic findfont 10.00 scalefont setfont
234 69 m 
gs 1 -1 scale (TypeIdDesc) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
224 82 m 
gs 1 -1 scale (name) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
248 82 m 
gs 1 -1 scale (: TreeNode) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
74 129 m 
gs 1 -1 scale (PointerDesc) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
235 128 m 
gs 1 -1 scale (RecordDesc) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
73 153 m 
gs 1 -1 scale (size) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
235 152 m 
gs 1 -1 scale (size) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
225 141 m 
gs 1 -1 scale (name) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
249 141 m 
gs 1 -1 scale (: TreeNode) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
100 142 m 
gs 1 -1 scale (: Tree) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
74 142 m 
gs 1 -1 scale (name) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
72 81 m 
gs 1 -1 scale (name) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
74 69 m 
gs 1 -1 scale (TypeIdDesc) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
99 81 m 
gs 1 -1 scale (: Tree) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
173 202 m 
gs 1 -1 scale (name) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
175 190 m 
gs 1 -1 scale (FieldIdDesc) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
256 202 m 
gs 1 -1 scale (name) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
258 190 m 
gs 1 -1 scale (FieldIdDesc) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
340 202 m 
gs 1 -1 scale (name) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
342 190 m 
gs 1 -1 scale (FieldIdDesc) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
262 105 m 
gs 1 -1 scale (typeType) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
103 106 m 
gs 1 -1 scale (typeType) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
189 172 m 
gs 1 -1 scale (fieldSeq) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
367 202 m 
gs 1 -1 scale (: right) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
283 202 m 
gs 1 -1 scale (: left) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
200 202 m 
gs 1 -1 scale (: key) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
106 173 m 
gs 1 -1 scale (targetType) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
277 239 m 
gs 1 -1 scale (fldType) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
179 256 m 
gs 1 -1 scale (fldType) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
253 153 m 
gs 1 -1 scale (= 12) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
91 154 m 
gs 1 -1 scale (= 4) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 273 2588 a FN(Figure)i(2.3:)j(Abstract)e(syn)o(tax)f(trees)h(after)f
(name)f(binding,)g(sho)o(wing)g(t)o(yp)q(e)h(graph)224
2688 y(while)19 b(the)h(iden)o(ti\014er)f(descriptors)i(are)e(sho)o(wn)
g(unshaded.)34 b(Initially)17 b(all)h(o)q(ccurrences)p
eop
%%Page: 23 29
23 28 bop 224 274 a FL(2.2.)31 b(REPRESENTING)14 b(DECLARED)f(ENTITIES)
501 b FN(23)224 390 y(of)15 b(explicit)g(t)o(yp)q(enames)g(app)q(ear)h
(as)g(references)i(to)d FK(T)m(yNameDesc)j FN(no)q(des.)23
b(After)16 b(name)224 440 y(binding)d(these)i(attributes)f(refer)g(to)f
(the)h(actual)f(t)o(yp)q(e)h(descriptors)h(whic)o(h)e(are)h(b)q(ound)f
(to)224 490 y(that)k(name)f(in)g(the)h(curren)o(t)h(scop)q(e.)28
b(The)17 b(t)o(yp)q(e)g(descriptor)h(for)e(the)h(predeclared)i(t)o(yp)q
(e)224 540 y FK(INTEGER)d FN(is)e(not)g(sho)o(wn)g(in)f(\014gure)h
(2.3.)287 591 y(In)h(the)g(case)h(of)f(languages)f(whic)o(h)h(insist)g
(on)g FK(de)n(clar)n(ation)g(b)n(efor)n(e)h(use)g(in)g(a)g(de)n(clar)n
(a-)224 640 y(tion)s FN(,)f(the)h(name)e(binding)g(can)h(tak)o(e)g
(place)g(as)g(the)h(tree)g(is)f(built.)21 b FK(Mo)n(dula-2)g
FN(insists)16 b(on)224 690 y(declaration)g(b)q(efore)h(use)g(in)f(a)f
(declaration,)h(except)i(for)e(p)q(oin)o(ter)g(t)o(yp)q(es.)26
b(Th)o(us)16 b(for)g(the)224 740 y(declarations)d(in)f(the)h
(\014gures,)g(the)g(name)e FK(T)m(r)n(e)n(eNo)n(de)k
FN(cannot)d(b)q(e)h(b)q(ound)g(during)f(parsing,)224
790 y(so)19 b(a)e(place-k)o(eep)q(er)j(equiv)n(alen)o(t)d(to)h(the)h
FK(T)m(yNameDesc)i FN(no)q(de)d(m)o(ust)f(b)q(e)i(placed)f(in)g(the)224
840 y FK(AST)6 b FN(.)14 b(When)h(all)f(of)g(the)i(declarations)f(of)f
(the)i(curren)o(t)g(scop)q(e)h(are)e(complete,)f(then)i(the)224
890 y(name)9 b(binding)g(of)h(the)h(unkno)o(wn)e(t)o(yp)q(es)i(ma)o(y)e
(b)q(e)h(p)q(erformed,)g(so)g(as)h(to)f(eliminate)e(all)h(suc)o(h)224
939 y(place-k)o(eep)q(er)14 b(no)q(des.)19 b(By)12 b(constrast,)i(when)
f(the)g(record)g(declaration)f(in)g(the)h(example)e(is)224
989 y(parsed)k(the)g(t)o(yp)q(es)f(of)g(all)e(\014elds)j(are)f(kno)o
(wn,)f(and)h(ma)o(y)e(b)q(e)i(b)q(ound)g(immediately)l(.)224
1110 y FH(2.2.2)56 b(Represen)n(ting)17 b(scop)r(es)224
1189 y FN(In)c(con)o(v)o(en)o(tional)f(blo)q(c)o(k)g(structured)j
(languages)d(the)h(scop)q(es)h(of)f(a)f(program)f(form)g(a)h(tree-)224
1238 y(lik)o(e)17 b(structure.)32 b(In)17 b(languages)g(suc)o(h)i(as)e
FK(Mo)n(dula-2)24 b FN(and)18 b FK(A)n(da)j FN(the)d(situation)f(is)g
(more)224 1288 y(complex,)c(due)h(to)g(the)g(explict)g(con)o(trol)g(o)o
(v)o(er)g(visibilit)o(y)d(of)j(names.)287 1339 y(In)20
b(principle,)h(if)e(a)h(language)g(p)q(ossesses)j(seman)o(tics)c(whic)o
(h)h(mak)o(e)f(it)h(p)q(ossible)g(to)224 1389 y(p)q(erform)14
b(all)f(name)g(binding)g(during)h(parsing,)g(then)h(scop)q(es)h(need)f
(not)f(b)q(e)h(preserv)o(ed)h(as)224 1439 y(a)e(part)h(of)e(the)i
FK(AST)20 b FN(represen)o(tation)c(of)d(the)i(program.)j(In)c
(constrast,)h(if)e(further)i(name)224 1488 y(binding)g(ma)o(y)e(need)j
(to)f(b)q(e)h(p)q(erformed)f(during)g(the)h(attribution)f(passes)h(o)o
(v)o(er)g(the)g(tree,)224 1538 y(then)f(some)e(p)q(ersisten)o(t)j
(represen)o(tation)f(of)e(eac)o(h)i(scop)q(e)g(is)f(necessary)m(.)287
1589 y(Most)g(programs)f(generate)j(a)e(large)f(n)o(um)o(b)q(er)h(of)g
(scop)q(es,)h(with)f(eac)o(h)h(scop)q(e)g(con)o(tain-)224
1639 y(ing)f(only)g(a)h(few)f(names.)20 b(A)15 b(few)g(scop)q(es)h(ho)o
(w)o(ev)o(er)f(will)e(con)o(tain)h(a)h(substan)o(tial)f(n)o(um)o(b)q
(er)224 1689 y(of)e(names.)17 b(These)d(c)o(haracteristics)g(are)f
(constrain)o(ts)g(on)f(the)h(data)g(structure)h(implemen-)224
1738 y(tations)i(whic)o(h)g(ma)o(y)e(sensibly)i(b)q(e)h(used.)25
b(There)18 b(are)e(man)o(y)e(di\013eren)o(t)j(w)o(a)o(ys)f(of)f
(solving)224 1788 y(this)f(problem,)e(so)i(here)h(w)o(e)g(deal)e(with)h
(just)g(a)f(represen)o(tativ)o(e)j(example.)287 1839
y(Since)j(the)g(same)f(iden)o(ti\014er)h(ma)o(y)e(app)q(ear)i(in)g(sev)
o(eral)g(scop)q(es,)i(a)d(global)g(mapping)224 1889 y(from)10
b(the)j(c)o(haracter)g(string)e(represen)o(tation)j(of)d(names)f(to)i
(a)f(unique)h(ordinal)e(is)i(sensible.)224 1939 y(Names)19
b(are)g(mapp)q(ed)f(to)h(their)g(ordinal)f(during)g(scanning)h(of)g
(the)g(program,)f(so)h(that)224 1988 y(the)g(lab)q(orious,)f(p)q(er-c)o
(haracter)j(pro)q(cessing)e(is)f(p)q(erformed)g(only)g(once)h(for)f
(eac)o(h)g(name)224 2038 y(o)q(ccurrence.)34 b(Some)17
b(kind)h(of)g(hash)g(table)g(pro)o(vides)h(fast)f(pro)q(cessing)h(to)f
(p)q(erform)g(the)224 2088 y(mapping.)36 b(The)20 b(unique)h(ordinal)e
(could)h(b)q(e)h(deriv)o(ed)g(either)g(from)e(the)h(hash-buc)o(k)o(et)
224 2138 y(n)o(um)o(b)q(er)13 b(\(for)h(closed)g(hash)f(tables,)h(for)f
(whic)o(h)h(the)g(k)o(ey)f(is)h(unique\),)f(or)h(the)g(string)f(table)
224 2188 y(\\sp)q(elling")g(index)h(at)g(whic)o(h)g(the)g(single)g(cop)
o(y)f(of)h(the)g(name)f(is)h(stored.)287 2238 y(It)20
b(is)h(p)q(ossible)g(to)g(use)g(the)g(same)f(mec)o(hanism)f(for)h(ev)o
(ery)h(instance)h(of)e(iden)o(ti\014er)224 2288 y(lo)q(okup.)c(If)10
b(w)o(e)h(de\014ne)g(a)f FK(sc)n(op)n(e)j FN(no)q(de)e(t)o(yp)q(e)g(in)
e(our)i FK(AST)6 b FN(,)j(then)i(w)o(e)f(ma)o(y)e(de\014ne)j
(attributes)224 2338 y(of)20 b(this)h(t)o(yp)q(e)f(in)g(record)i(t)o
(yp)q(e)f(descriptors,)i(pro)q(cedure)f(descriptors,)h(and)d(imp)q
(orted)224 2388 y(mo)q(dule)14 b(iden)o(ti\014er)i(descriptors.)24
b(W)m(e)14 b(ma)o(y)g(then)i(use)g(the)f(same)g FK(L)n(o)n(okup)j
FN(op)q(eration)e(on)224 2438 y(this)h(abstract)h(data)e(t)o(yp)q(e)h
(to)g(bind)f(dot-quali\014ed)g(record)i(\014eld)f(names,)f(bind)g(v)n
(ariable)224 2487 y(names,)d(and)h(\014nd)g(the)g(names)f(of)h(imp)q
(orted)e(ob)r(jects)j(sp)q(eci\014ed)h(in)d(quali\014ed)h(form.)287
2538 y(The)d(scop)q(e)g(t)o(yp)q(e)h(migh)o(t)c(b)q(e)j(implemen)o(ted)
e(sev)o(eral)i(w)o(a)o(ys.)16 b(Giv)o(en)10 b(the)h(lo)o(w)f(n)o(um)o
(b)q(er)g(of)224 2588 y(a)o(v)o(erage)j(en)o(tries,)h(it)e(is)h(ev)o
(en)h(p)q(ossible)f(to)f(consider)i(linear)f(lists.)k(Ho)o(w)o(ev)o
(er,)c(binary)g(trees)224 2638 y(seem)i(a)g(somewhat)f(more)g(natural)h
(c)o(hoice.)22 b(If)15 b(this)g(option)g(is)f(c)o(hosen,)i(it)f(is)g
(imp)q(ortan)o(t)224 2688 y(to)i(ensure)i(that)e(the)g(tree)h(do)q(es)g
(not)f(b)q(ecome)g(un)o(balanced)g(b)o(y)f(en)o(tries)i(b)q(eing)f
(inserted)p eop
%%Page: 24 30
24 29 bop 224 274 a FN(24)567 b FL(CHAPTER)14 b(2.)32
b(A)m(TTRIBUTE)13 b(EV)-5 b(ALUA)m(TION)224 390 y FN(in)14
b(k)o(ey)g(order)g(|)g(for)f(example,)f(this)i(c)o(hoice)g(w)o(ould)f
(app)q(ear)i(to)e(rule)i(out)e(using)h(sp)q(elling)224
440 y(table)e(index)g(as)h(a)e(k)o(ey)m(,)h(as)g(insertions)h(w)o(ould)
e(usually)g(app)q(ear)i(in)e(strictly)i(ascending)f(k)o(ey)224
490 y(order.)287 549 y(In)d(an)o(y)g(case,)i(the)e(abilit)o(y)f(to)h
(manipulate)e(scop)q(es)k(as)f(en)o(tire)g(en)o(tities)g(brings)f
(\015exibilit)o(y)224 599 y(to)18 b(the)g(name)e(binding)g(pro)q(cess.)
30 b(Consider)18 b(binding)e(a)i(name)e(in)h(a)g FK(Pasc)n(al)k
FN(program,)224 648 y(within)c(a)g FO(with)f FN(statemen)o(t.)27
b(The)18 b(order)g(of)e(name)g(searc)o(hing)i(of)e(the)i(scop)q(es)h
(will)c(b)q(e:)224 698 y(the)h(scop)q(e)g(of)e(the)h(\014eldnames)g(of)
f(the)h(t)o(yp)q(e)g(of)g(the)g(with-selected)h(record\(s\),)h(the)e
(lo)q(cal)224 748 y(v)n(ariable)f(scop)q(e)j(and)e(then)h(successiv)o
(ely)g(more)f(global)e(scop)q(es)k(out)e(to)g(the)h(predeclared)224
798 y(scop)q(e.)28 b(In)17 b(this)g(case,)h(en)o(try)g(in)o(to)e(the)h
(scop)q(e)h(of)e(a)h(with)f(statemen)o(t)h(simply)e(adds)i(the)224
848 y(record)h(t)o(yp)q(e-descriptor)g(\014eldname)e(scop)q(e)h(to)g
(the)g(head)f(of)g(the)h(searc)o(h)h(list,)e(and)g(exit)224
898 y(from)d(the)h(scop)q(e)h(unlinks)e(the)i(record)g(t)o(yp)q
(e-descriptor)h(scop)q(e.)224 1082 y FI(2.3)67 b(Static)23
b(seman)n(tic)f(c)n(hec)n(king)224 1189 y FN(There)15
b(are)g(t)o(w)o(o)e(main)f(categories)j(of)e(static)h(seman)o(tic)f
(attributes)i(whic)o(h)f(w)o(e)g(shall)f(tak)o(e)224
1239 y(as)21 b(examples)f(of)g(the)i(t)o(yp)q(es)f(of)g(computation)e
(whic)o(h)h(need)i(to)f(b)q(e)g(done)g(as)g(part)g(of)224
1289 y(static)14 b(seman)o(tic)e(c)o(hec)o(king.)18 b(Firstly)13
b(there)i(is)e(the)h(matc)o(hing)d(of)h(declarations)i(and)f(uses,)224
1339 y(p)q(erv)n(asiv)o(e)h(in)g(all)e(those)j(languages)e(whic)o(h)h
(require)g(the)h(explicit)e(declaration)g(of)g(named)224
1389 y(en)o(tities.)287 1447 y(Secondly)m(,)k(for)f(all)g(those)h
(languages)g(whic)o(h)f(are)h FK(str)n(ongly)h(typ)n(e)n(d)t
FN(,)f(it)g(is)f(p)q(ossible)h(to)224 1497 y(compute)i(an)f(unique)h(t)
o(yp)q(e)g(for)g(ev)o(ery)g(datum,)f(and)h(for)f(ev)o(ery)i
(expression.)33 b(T)o(ypical)224 1547 y(seman)o(tic)16
b(rules)i(sp)q(ecify)f(the)h(allo)o(w)o(able)c(relationships)j(b)q(et)o
(w)o(een)h(t)o(yp)q(es)g(of)e(actual)g(and)224 1597 y(formal)c
(parameters,)h(and)h(b)q(et)o(w)o(een)h(the)g(left)e(and)h(righ)o
(t-hand-sides)g(of)f(assignmen)o(ts.)287 1655 y(There)k(is)f
(considerable)h(v)n(ariation)d(b)q(et)o(w)o(een)j(languages)f(in)f(the)
i(complexit)o(y)d(of)i(the)224 1705 y(computation)d(required)j(to)f
(determine)f(the)i(t)o(yp)q(e)f(of)f(expressions)j(and)d(designators.)
21 b(In)224 1755 y(some)14 b(languages)h(the)g(t)o(yp)q(e)g(of)f(an)h
(expression)h(is)e(easily)h(computed)f(from)f(the)i(declared)224
1805 y(t)o(yp)q(e)j(of)f(ev)o(ery)h(leaf)f(in)g(the)h(expression)h
(tree)f(tak)o(en)g(separately)m(,)g(together)g(with)f(some)224
1855 y(simple)c(transformational)e(rules.)19 b FK(Mo)n(dula-2)h
FN(is)14 b(a)f(particularly)g(simple)g(example.)287 1913
y(In)20 b(other)h(languages,)g(the)g(t)o(yp)q(e)f(of)g(an)g(expression)
h(can)g(only)e(b)q(e)i(deduced)h(from)224 1963 y(the)16
b(declared)g(t)o(yp)q(es)h(of)d(the)i(lea)o(v)o(es,)f(together)i(with)e
(consideration)g(of)g(the)g(con)o(texts)i(in)224 2013
y(whic)o(h)12 b(sub)q(expressions)h(o)q(ccur.)19 b(F)m(eatures)12
b(suc)o(h)h(as)e(the)h(p)q(ossibilit)o(y)f(of)f(o)o(v)o(erloading)g
(user-)224 2063 y(de\014ned)17 b(names,)d(or)h(the)h(existence)h(of)d
(implicit)f(con)o(v)o(ersions)i(considerably)h(add)f(to)g(the)224
2113 y(complexit)o(y)d(of)i(seman)o(tic)f(analysis)g(for)g(compilers)g
(and)h(for)f(h)o(uman)g(readers)i(alik)o(e.)287 2171
y(In)e(ob)r(ject)h(orien)o(ted)f(languages,)f(static)i(seman)o(tic)e
(analysis)g(p)q(oses)j(sligh)o(tly)c(di\013eren)o(t)224
2221 y(problems)k(b)q(ecause)j(of)d(the)h(existence)i(of)d(limited)f
(forms)g(of)i(p)q(olymorphism)1480 2206 y Fz(2)1496 2221
y FN(.)24 b(In)16 b(suc)o(h)224 2271 y(cases)c(the)g(t)o(yp)q(e)f
(rules)g(tend)g(to)g(in)o(v)o(olv)o(e)e(partial)h(order)h(relations)f
(b)q(et)o(w)o(een)i(classes,)g(rather)224 2321 y(than)i(the)h(simple)d
(equalities)i(required)h(b)o(y)e(strongly)h(t)o(yp)q(ed)g(languages.)
287 2380 y(In)h(an)o(y)g(case,)i(almost)c(all)i(languages)f(pro)o(vide)
i(for)f(some)g(degree)h(of)f(op)q(erator)h(o)o(v)o(er-)224
2429 y(loading,)d(at)h(least)g(for)g(the)g(built-in)f(op)q(erators.)20
b(F)m(or)14 b(example)f(in)g FK(Pasc)n(al)19 b FN(the)c(plus)f(sign)224
2479 y(can)e(denote)h(an)o(y)e(one)h(of:)k(in)o(teger)c(addition,)f
(real)g(n)o(um)o(b)q(er)g(addition,)g(or)h(set)g(union.)17
b(The)224 2529 y(problem)9 b(of)h(determining)f(the)i(meaning)d(of)i
(an)g(op)q(erator)h(denotation,)f(from)e(the)j(p)q(ossible)224
2579 y(t)o(yp)q(es)k(of)e(the)i(op)q(erand)f(expressions)i(is)e(called)
f(the)i FK(op)n(er)n(ator)f(identi\014c)n(ation)h(pr)n(oblem)p
FN(.)p 224 2649 577 2 v 271 2676 a Fy(2)288 2688 y Fx(P)o(olymorph)9
b(|)j(a)f(sp)q(ecies)f(ha)o(ving)g(more)g(than)h(one)f(form.)p
eop
%%Page: 25 31
25 30 bop 224 274 a FL(2.4.)31 b(A)m(TTRIBUTE)14 b(EV)-5
b(ALUA)m(TION)759 b FN(25)224 390 y FI(2.4)67 b(A)n(ttribute)24
b(ev)l(aluation)224 481 y FN(There)c(are)f(three)h(di\013eren)o(t)g
(kinds)f(of)f(attributes)h(whic)o(h)g(are)g(kno)o(wn)f(to)h
FK(IDL)p FN(.)f(There)224 531 y(are)c(the)f FK(structur)n(al)g
(attributes)s FN(,)g(whic)o(h)f(represen)o(t)k(the)d(structure)i(of)e
(the)g(tree,)h(as)f(sho)o(wn)224 581 y(in)20 b(the)h(example)e(in)h
(\014gure)h(2.1.)36 b(There)21 b(are)g(also)f FK(semantic)h(attributes)
s FN(,)g(whic)o(h)f(are)224 631 y(ev)n(aluated)14 b(according)g(to)g
(the)g(seman)o(tic)f(rules)i(of)e(the)h(language.)k(T)o(yp)q(e)c
(information)d(in)224 681 y(an)k(expression)i(tree,)f(is)f(an)g(easy)h
(example.)k(Finally)14 b(there)j(are)e FK(c)n(o)n(de)i(attributes)g
FN(whic)o(h)224 730 y(are)e(needed)g(to)f(enable)g(co)q(de)h(to)e(b)q
(e)i(generated.)224 838 y FO(A)o(ttributes)d(for)j(the)g(case)h
(statemen)o(t)224 914 y FN(As)i(an)e(example)g(of)g(suc)o(h)i
FK(c)n(o)n(de)g(attributes)i FN(consider)d(the)h(generation)f(of)f(co)q
(de)i(for)f(\014g-)224 964 y(ure)g(2.1.)24 b(W)m(e)16
b(wish)g(to)h(implem)o(en)o(t)d(the)j(case)g(statemen)o(t)f(b)o(y)g
(means)g(of)f(a)h(jump)f(table.)224 1014 y(In)i(order)h(to)f(do)g
(this,)g(w)o(e)h(need)g(to)f(kno)o(w)f(the)i(lo)o(w)o(est)f(and)f
(highest)i(v)n(alues)f(of)f(the)i(se-)224 1064 y(lector)h(expression)h
(sp)q(eci\014ed)g(in)d(an)o(y)h(case)i(range.)31 b(V)m(alues)18
b(whic)o(h)g(fall)f(outside)i(these)224 1114 y(b)q(ounds)14
b(will)e(select)i(the)g(default)f(case,)g(while)g(v)n(alues)g(b)q(et)o
(w)o(een)i(these)f(limits)d(will)h(v)o(ector)224 1164
y(through)h(the)h(table,)e(as)h(describ)q(ed)h(on)f(page)f(120.)17
b(W)m(e)c(w)o(ould)e(lik)o(e)h(to)h(decorate)h(the)f(case)224
1213 y(statemen)o(t)h(no)q(de)h(with)e(t)o(w)o(o)g(extra)i(attributes)g
(|)295 1288 y FF(CaseStmt)i(==>)h(minRange)56 b(:)19
b(INTEGER,)550 1334 y(maxRange)56 b(:)19 b(INTEGER;)224
1464 y FN(These)d(attributes)g(ma)o(y)d(b)q(e)i(ev)n(aluated)f(during)h
(a)f(tra)o(v)o(ersal)h(of)f(the)h(sequence)i(of)d(range-)224
1514 y(expressions.)287 1564 y(As)d(an)g(example)f(of)g
FK(semantic)j(attributes)s FN(,)d(for)h(the)h(case)g(statemen)o(t)f(in)
f FK(Mo)n(dula-2)18 b FN(the)224 1614 y(rules)e(insist)g(that)f(ev)o
(ery)h(expression)h(in)d(a)i(range)f(m)o(ust)f(b)q(e)i(constan)o(t.)23
b(These)17 b(constan)o(t)224 1664 y(expressions)g(m)o(ust)d(b)q(e)i
(compatible)d(with)i(the)h(selector)g(expression,)g(whic)o(h)f(m)o(ust)
f(b)q(e)i(of)224 1713 y(some)e(ordinal)f(t)o(yp)q(e.)21
b(In)14 b(ev)o(ery)h(range,)g(the)g(upp)q(er)g(constan)o(t)g(m)o(ust)e
(b)q(e)i(greater)h(than)e(or)224 1763 y(equal)f(to)f(the)i(lo)o(w)o(er)
e(constan)o(t.)19 b(Finally)11 b(all)g(of)h(the)i(v)n(alues)e(sp)q
(eci\014ed)j(or)d(included)h(in)g(the)224 1813 y(ranges)i(b)q(elonging)
e(to)h(an)o(y)f(one)h(case)h(statemen)o(t)f(m)o(ust)f(b)q(e)h
(distinct.)224 1929 y FH(2.4.1)56 b(A)n(ttribute)18 b(grammars)224
2005 y FN(The)11 b(ev)n(aluation)e(of)g(attributes)i(is)f(mo)q(delled)e
(b)o(y)i(a)g(formalism)c(whic)o(h)k(describ)q(es)i(a)e(general)224
2055 y(metho)q(d)i(of)f(computation)f(on)i(trees.)19
b(This)12 b(formalism)c(is)k(called)f(an)h FK(attribute)h(gr)n(ammar)p
FN(.)224 2105 y(A)o(ttribute)e(grammars)c(decomp)q(ose)j(global)f
(computations)f(on)i(trees,)i(b)o(y)e(sp)q(ecifying)g(com-)224
2155 y(putations)16 b(whic)o(h)f(are)h(p)q(erformed)f(on)g(lo)q(cal)g
(con)o(texts.)24 b(A)15 b(lo)q(cal)g(con)o(text)h(consists)h(of)e(a)224
2205 y(single)10 b(no)q(de,)i(together)f(with)f(its)h(c)o(hildren)f(in)
g(the)h(tree.)18 b(Eac)o(h)11 b(suc)o(h)g(con)o(text)g(corresp)q(onds)
224 2254 y(to)16 b(a)f(part)h(of)f(the)h(tree)h(whic)o(h)f(corresp)q
(onds)h(to)f(a)f(single)h(pro)q(duction-rule)g(application)224
2304 y(in)e(the)g(con)o(text)h(free)g(gramma)o(r.)224
2412 y FO(Inherited)e(and)i(syn)o(thesized)e(attributes)224
2488 y FN(A)o(ttributes)k(are)f(attac)o(hed)g(to)g(syn)o(tactic)g
(categories)h(of)e(a)g(con)o(text)h(free)h(gramma)o(r.)k(W)m(e)224
2538 y(denote)h(the)f FM(b)g FN(attribute)g(of)f(\(some)g(instance)h
(of)s(\))f(a)h(syn)o(tactic)g(category)g FM(A)g FN(as)f
FM(A:b)p FN(,)224 2588 y(b)o(y)d(analogy)f(with)h(the)h(notation)e(for)
h(record)h(\014elds.)29 b(In)17 b(the)h(ev)o(en)o(t)f(that)h(a)f
(particular)224 2638 y(sym)o(b)q(ol)8 b(app)q(ears)j(more)e(than)h
(once)g(in)g(a)f(pro)q(duction,)i(w)o(e)f(add)g(subscripts)h(to)f(o)q
(ccurences,)224 2688 y(n)o(um)o(b)q(ering)j(from)f(left)i(to)f(righ)o
(t.)p eop
%%Page: 26 32
26 31 bop 224 274 a FN(26)567 b FL(CHAPTER)14 b(2.)32
b(A)m(TTRIBUTE)13 b(EV)-5 b(ALUA)m(TION)287 390 y FN(A)o(ttributes)14
b(in)e(an)h(attribute)h(gramma)o(r)d(ma)o(y)g(b)q(e)i(ev)n(aluated)g(b)
o(y)g(t)o(w)o(o)f(di\013eren)o(t)i(kinds)224 440 y(of)f(lo)q(cal)g
(rule.)18 b(W)m(e)13 b(ma)o(y)f(ha)o(v)o(e)h(a)h(rule)f(whic)o(h)h(ev)n
(aluates)f(an)h(attribute)g(of)f(the)h(left-hand-)224
490 y(side)f(sym)o(b)q(ol)e(in)h(terms)g(of)g(attributes)h(of)f(the)h
(righ)o(t-hand-side)f(sym)o(b)q(ols.)k(Alternativ)o(ely)m(,)224
540 y(w)o(e)j(ma)o(y)c(ha)o(v)o(e)j(a)g(rule)g(whic)o(h)g(ev)n(aluates)
g(an)f(attribute)i(of)e(a)h(righ)o(t-hand-side)f(sym)o(b)q(ol)224
590 y(in)i(terms)g(of)g(attributes)h(of)f(the)h(left-hand-side)f(sym)o
(b)q(ol)f(and)h(other)h(righ)o(t-hand-side)224 640 y(sym)o(b)q(ols.)28
b(W)m(e)18 b(call)f(these)i(t)o(w)o(o)e(kinds)g(of)g(attributes)i
FK(synthesize)n(d)t FN(,)g(and)e FK(inherite)n(d)22 b
FN(re-)224 689 y(sp)q(ectiv)o(ely)m(.)287 741 y(Figure)14
b(2.4)f(illustrates)h(the)g(dep)q(endency)i(for)e(the)g(t)o(w)o(o)f
(kinds)h(of)g(attribute.)176 803 y
 24273469 12432752 0 0 24273469 12432752 startTexFig
 176 803 a
%%BeginDocument: inherit.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-27.0 225.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Ellipse
n 119 97 20 20 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 58 179 20 20 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 179 180 20 20 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 349 178 20 20 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 288 179 20 20 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 409 180 20 20 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 119 178 20 20 0 360 DrawEllipse gs 0.95 setgray fill gr
gs col-1 s gr
% Ellipse
n 349 97 20 20 0 360 DrawEllipse gs 0.95 setgray fill gr
gs col-1 s gr
0.500 setlinewidth
% Polyline
n 105 111 m 68 161 l gs col-1 s gr
n 74.366 155.759 m 68.000 161.000 l 71.151 153.380 l gs 2 setlinejoin col-1 s gr
% Polyline
n 119 117 m 119 158 l gs col-1 s gr
n 121.000 150.000 m 119.000 158.000 l 117.000 150.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 132 112 m 167 163 l gs col-1 s gr
n 164.122 155.272 m 167.000 163.000 l 160.824 157.536 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Polyline
n 139 99 m 209 99 l  209 179 l  199 179 l gs col-1 s gr
	[] 0 setdash
	[4.000000] 0 setdash
% Polyline
n 159 179 m 139 179 l gs col-1 s gr
	[] 0 setdash
	[4.000000] 0 setdash
% Polyline
n 99 179 m 79 179 l gs col-1 s gr
	[] 0 setdash
	[4.000000] 0 setdash
% Polyline
n 99 99 m 29 99 l  29 179 l  34 179 l gs col-1 s gr
	[] 0 setdash
% Polyline
n 59 199 m 59 219 l gs col-1 s gr
n 61.000 211.000 m 59.000 219.000 l 57.000 211.000 l gs 2 setlinejoin col-1 s gr
n 119 199 m 119 199 l gs col-1 s gr
% Polyline
n 119 199 m 119 219 l gs col-1 s gr
n 121.000 211.000 m 119.000 219.000 l 117.000 211.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 179 199 m 179 219 l gs col-1 s gr
n 181.000 211.000 m 179.000 219.000 l 177.000 211.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 335 111 m 298 161 l gs col-1 s gr
n 304.366 155.759 m 298.000 161.000 l 301.151 153.380 l gs 2 setlinejoin col-1 s gr
% Polyline
n 349 117 m 349 158 l gs col-1 s gr
n 351.000 150.000 m 349.000 158.000 l 347.000 150.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 363 112 m 397 163 l gs col-1 s gr
n 394.226 155.234 m 397.000 163.000 l 390.898 157.453 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Polyline
n 369 99 m 439 99 l  439 179 l  429 179 l gs col-1 s gr
	[] 0 setdash
	[4.000000] 0 setdash
% Polyline
n 389 179 m 369 179 l gs col-1 s gr
	[] 0 setdash
	[4.000000] 0 setdash
% Polyline
n 329 179 m 309 179 l gs col-1 s gr
	[] 0 setdash
	[4.000000] 0 setdash
% Polyline
n 329 99 m 259 99 l  259 179 l  264 179 l gs col-1 s gr
	[] 0 setdash
% Polyline
n 289 199 m 289 219 l gs col-1 s gr
n 291.000 211.000 m 289.000 219.000 l 287.000 211.000 l gs 2 setlinejoin col-1 s gr
n 349 199 m 349 199 l gs col-1 s gr
% Polyline
n 349 199 m 349 219 l gs col-1 s gr
n 351.000 211.000 m 349.000 219.000 l 347.000 211.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 409 199 m 409 219 l gs col-1 s gr
n 411.000 211.000 m 409.000 219.000 l 407.000 211.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 349 56 m 349 76 l gs col-1 s gr
n 351.000 68.000 m 349.000 76.000 l 347.000 68.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 119 57 m 119 77 l gs col-1 s gr
n 121.000 69.000 m 119.000 77.000 l 117.000 69.000 l gs 2 setlinejoin col-1 s gr
/Times-Roman findfont 11.00 scalefont setfont
115 101 m 
gs 1 -1 scale (A) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
55 183 m 
gs 1 -1 scale (B) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
115 182 m 
gs 1 -1 scale (C) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
176 183 m 
gs 1 -1 scale (D) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
345 101 m 
gs 1 -1 scale (A) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
285 183 m 
gs 1 -1 scale (B) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
345 182 m 
gs 1 -1 scale (C) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
406 183 m 
gs 1 -1 scale (D) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
81 234 m 
gs 1 -1 scale (inherited attribute) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
255 52 m 
gs 1 -1 scale (synthesised attribute) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
87 249 m 
gs 1 -1 scale (C.x = f\(A,B,D\)) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
265 68 m 
gs 1 -1 scale (A.y = f\(B,C,D\)) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
411 111 m 
gs 1 -1 scale (local) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
401 122 m 
gs 1 -1 scale (context) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
171 121 m 
gs 1 -1 scale (context) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
181 111 m 
gs 1 -1 scale (local) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 250 1682 a FN(Figure)g(2.4:)j(Inherited)e(and)f(syn)o(thesized)h
(attributes)g(of)e(a)h(pro)q(duction)g FM(A)e Ft(!)f
FM(B)r(C)s(D)287 1787 y FN(Inherited)k(attributes)f(are)h(so)f(called,)
f(b)q(ecause)i(the)g(v)n(alue)e(of)g(the)i(attribute)f(is)g(some)224
1837 y(function)k(of)f(information)d(whic)o(h)k(is)f(passed)i(do)o(wn)e
(the)h(tree)h(from)d(the)i(paren)o(t.)29 b(Syn-)224 1887
y(thesized)15 b(attributes)g(are)e(computed)g(in)g(the)h(lo)o(w)o(er)f
(part)h(of)e(the)i(lo)q(cal)f(con)o(text,)h(as)f(some)224
1937 y(function)j(of)f(attributes)i(of)f(the)g(c)o(hild)f(no)q(des.)25
b(They)17 b(are)f(then)h(passed)g(up)f(the)g(tree)h(to)224
1986 y(the)e(paren)o(t)f(no)q(de.)287 2038 y(There)g(is)e(one)i
(\014nal)e(kind)g(of)h(attribute)g(whic)o(h)g(is)g(neither)g(computed)g
(from)e(informa-)224 2088 y(tion)17 b(in)g(the)h(paren)o(t)g(nor)g
(from)d(information)g(in)i(the)h(descendan)o(ts.)30 b(These)19
b(are)f(called)224 2138 y FK(intrinsic)j FN(attributes.)34
b(Suc)o(h)20 b(attributes)g(apply)e(to)h(leaf)f(no)q(des)i(in)f(a)g
(tree,)i(and)d(ha)o(v)o(e)224 2187 y(v)n(alues)13 b(whic)o(h)g(are)g
(de\014ned)h(b)o(y)f(the)g(prop)q(erties)i(of)d(the)i(no)q(de)f
(itself.)k(An)c(example)f(w)o(ould)224 2237 y(b)q(e)k(a)f(leaf)f(no)q
(de)i(in)e(a)h(constan)o(t)g(expression-tree.)24 b(The)16
b FK(value)i FN(attribute)e(of)e(a)h(constan)o(t)224
2287 y(expression)f(is)d(syn)o(thesized)j(for)e(eac)o(h)g(no)q(de)h
(from)d(the)i FK(value)k FN(attributes)d(of)e(the)i(c)o(hildren.)224
2337 y(Ho)o(w)o(ev)o(er,)19 b(for)f(leaf)f(no)q(des,)i
FK(value)i FN(is)d(an)f(in)o(trinsic)h(attribute)g(whic)o(h)g(is)f
(placed)h(in)g(the)224 2387 y(no)q(de)d(b)o(y)e(the)i(scanner)g(and)f
(parser.)287 2438 y(As)21 b(an)f(example)f(of)h(an)g(inherited)h
(attribute,)h(consider)f(implemen)o(tatio)o(n)d(of)i(the)224
2488 y FK(EXIT)g FN(statemen)o(t)15 b(in)f FK(Mo)n(dula-2)7
b FN(.)21 b(This)14 b(statemen)o(t)h(causes)h(con)o(trol)f(to)f(jump)g
(past)h(the)224 2538 y(end)i(of)f(the)g(closest)h(enclosing)f
FK(LOOP)21 b FN(statemen)o(t.)j(Ev)o(ery)17 b(lo)q(op)e(statemen)o(t)h
(needs)i(an)224 2588 y(unique)g(exit)f(lab)q(el)g(to)g(b)q(e)i
(assigned)e(to)h(it,)f(and)g(this)h(exit-lab)q(el)f(will)f(b)q(e)i
(inherited)g(b)o(y)224 2638 y(all)e(\(recursiv)o(ely\))j(nested)g
(statemen)o(ts)e(other)h(than)f(lo)q(op)g(statemen)o(ts.)28
b(The)18 b(follo)o(wing)224 2688 y(table)c(sets)i(out)e(the)h
(attribution)e(required)i(for)f(a)g(fragmen)o(t)e(of)i(the)g(abstract)h
(statemen)o(t)p eop
%%Page: 27 33
27 32 bop 224 274 a FL(2.4.)31 b(A)m(TTRIBUTE)14 b(EV)-5
b(ALUA)m(TION)759 b FN(27)224 390 y(grammar.)14 b(A)o(ttribute)e
(equations)f(are)g(sho)o(wn)g(in)g(braces)h(at)f(the)h(righ)o(t)e(of)g
(the)i(pro)q(duction)224 440 y(to)i(whic)o(h)g(they)g(apply)m(.)274
573 y FD(Stm)o(t)135 b Fw(!)50 b FD(IfStm)o(t)296 b Fw(f)13
b FE(IfStmt.exitL)n(ab)n(el)g FD(=)g FE(Stmt.exitL)n(ab)n(el)d
Fw(g)505 618 y(j)63 b FD(WhileStm)o(t)225 b Fw(f)13 b
FE(WhileStmt.exitL)n(ab)n(e)o(l)h FD(=)f FE(Stmt.exitL)n(ab)n(el)c
Fw(g)505 664 y(j)63 b(\001)6 b(\001)g(\001)505 709 y(j)63
b FD(Lo)q(opStm)o(t)238 b Fw(f)13 b FE(L)n(o)n(opStmt.exitL)n(ab)n(e)o
(l)h FD(=)e(NewLab)q(el\(\))i Fw(g)274 755 y FD(Lo)q(opStm)o(t)51
b Fw(!)f FD(`)p FF(LOOP)p FD(')11 b(StatSeq)j(`)p FF(END)p
FD(')67 b Fw(f)13 b FE(StatSe)n(q.exit)o(L)n(ab)n(e)o(l)h
FD(=)f FE(L)n(o)n(opStmt.exitL)n(a)o(b)n(el)c Fw(g)274
801 y FD(StatSeq)89 b Fw(!)50 b FD(Stm)o(t)322 b Fw(f)13
b FE(Stmt.exitL)n(ab)n(el)h FD(=)e FE(StatSe)n(q.exitL)n(a)o(b)n(el)d
Fw(g)505 846 y(j)63 b FD(Stm)o(t)13 b(StatSeq)181 b Fw(f)13
b FE(Stmt.exitL)n(ab)n(el)h FD(=)e FE(StatSe)n(q)1433
850 y Fy(1)1448 846 y FE(.exitL)n(ab)n(el)f FD(;)1022
892 y FE(StatSe)n(q)1146 896 y Fy(2)1161 892 y FE(.exitL)n(ab)n(el)j
FD(=)e FE(StatSe)n(q)1500 896 y Fy(1)1515 892 y FE(.exitL)n(ab)n(el)e
Fw(g)224 1037 y FN(Except)15 b(for)f(the)g(lo)q(op)f(statemen)o(t,)h
(in)f(ev)o(ery)i(case)g(the)f FK(exitL)n(ab)n(el)k FN(attribute)c(is)g
(inherited)224 1087 y(b)o(y)i(a)f(cop)o(y)h(op)q(eration)f(from)f(the)i
(paren)o(t)g(in)f(the)i(parse)f(tree.)25 b(In)15 b(the)h(case)h(of)e
(the)h(lo)q(op)224 1137 y(statemen)o(t,)g(w)o(e)g(will)f(assume)g(that)
h(the)g(lab)q(el)f(v)n(alue)h(is)f(obtained)h(from)e(some)h(external)
224 1187 y(mec)o(hanism.)438 1172 y Fz(3)287 1238 y FN(The)20
b(computation)f(of)g(the)i FK(value)j FN(attribute)d(in)e(constan)o(t)i
(expression)h(trees)g(is)e(a)224 1288 y(simple)f(example)g(of)h(the)h
(ev)n(aluation)e(of)g(syn)o(thesized)j(attributes.)38
b(As)21 b(an)f(example,)224 1338 y(consider)15 b(a)f(simple)e(grammar)f
(with)j(just)g(t)o(w)o(o)f(op)q(erators,)h(\\)p FG(+)p
FN(")f(and)h(\\)p FG(*)p FN(".)274 1470 y FD(Expr)75
b Fw(!)51 b FD(Expr)13 b(`)p FF(+)p FD(')f(T)m(erm)107
b Fw(f)13 b FE(Expr)977 1474 y Fy(1)993 1470 y FE(.value)h
FD(=)f FE(Expr)1229 1474 y Fy(2)1245 1470 y FE(.value)e
FD(+)i FE(T)m(erm.value)f Fw(g)445 1516 y(j)64 b FD(T)m(erm)256
b Fw(f)13 b FE(Expr.value)g FD(=)f FE(T)m(erm.value)g
Fw(g)274 1561 y FD(T)m(erm)68 b Fw(!)51 b FD(T)m(erm)12
b(`)p FF(*)p FD(')g(F)m(actor)83 b Fw(f)13 b FE(T)m(erm)986
1565 y Fy(1)1004 1561 y FE(.value)g FD(=)g FE(T)m(erm)1248
1565 y Fy(2)1266 1561 y FE(.value)e Fw(\002)h FE(F)m(actor.value)e
Fw(g)445 1607 y(j)64 b FD(F)m(actor)238 b Fw(f)13 b FE(T)m(erm.value)h
FD(=)f FE(F)m(actor.value)c Fw(g)274 1653 y FD(F)m(actor)50
b Fw(!)h FE(numb)n(er)221 b Fw(f)13 b FE(F)m(actor.value)f
FD(=)h FE(numb)n(er.value)d Fw(g)445 1698 y(j)64 b FD(`\(')12
b(Expr)h(`\)')164 b Fw(f)13 b FE(F)m(actor.value)f FD(=)h
FE(Expr.value)d Fw(g)224 1794 y FN(In)k(ev)o(ery)h(case)g(the)f(v)n
(alue)f(attribute)i(of)e(the)h(left-hand-side)g(sym)o(b)q(ol)e(is)i
(computed)f(from)224 1844 y(the)i(v)n(alues)f(of)f(the)i(c)o(hildren.)k
(Note)14 b(the)h(use)g(of)e(the)i(in)o(trinsic)f(attribute)g(of)g(the)g
FK(numb)n(er)224 1893 y FN(leaf)g(no)q(des,)g(and)g(the)g(use)h(of)e
(subscripts)j(to)d(disam)o(biguate)f(the)j(rep)q(eated)g(sym)o(b)q
(ols.)224 2019 y FH(2.4.2)56 b(Implem)o(en)n(ting)16
b(attribute)h(ev)m(aluation)224 2099 y FN(A)o(ttributes)i(are)f(ev)n
(aluated)f(during)g(one)g(or)h(more)e(tra)o(v)o(ersals)i(of)f(the)h
FK(AST)6 b FN(.)16 b(During)h(a)224 2149 y(recursiv)o(e)d(tra)o(v)o
(ersal)e(of)f(the)i(tree,)g(w)o(e)f(carry)h(inherited)f(attributes)h
(do)o(wn)f(the)g(tree)i(as)e(the)224 2199 y(recursion)k(adv)n(ances,)f
(and)g(carry)g(syn)o(thesized)i(attribute)e(v)n(alues)f(bac)o(k)h(up)g
(the)g(tree,)h(as)224 2248 y(the)f(recursion)g(returns.)287
2300 y(It)f(is)g(not)g(p)q(ossible)g(to)g(compute)g(attributes)h(for)e
(an)h(arbitrary)g(attribute)h(grammar,)224 2350 y(since)h(circular)e
(dep)q(endences)j(of)d(v)n(arious)g(kinds)g(are)h(a)f(fatal)f
(circumstance.)20 b(In)14 b(fact,)g(in)224 2400 y(general)d(w)o(e)f(w)o
(ould)f(lik)o(e)h(to)g(place)g(a)g(small)e(b)q(ound)i(on)g(the)h(n)o
(um)o(b)q(er)e(of)h(separate)h(tra)o(v)o(ersals)224 2449
y(whic)o(h)16 b(are)g(required)h(to)e(ev)n(aluate)g(all)g(attributes.)
24 b(Later)16 b(w)o(e)g(discuss)h(to)q(ols)e(whic)o(h)h(are)p
224 2491 577 2 v 271 2518 a Fy(3)288 2530 y Fx(If)d(one)g(wished)g(to)g
(b)q(e)g(a)g(purist,)f(and)h(a)o(v)o(oid)f(the)h(use)f(of)i(apparen)o
(tly)c(external)h(mec)o(hanisms)g(suc)o(h)224 2569 y(as)i(calls)e(to)h
(a)h(lab)q(el)e(allo)q(cator,)f(it)i(is)h(p)q(ossible)d(to)i(allo)q
(cate)f(unique)f(lab)q(els)h(using)h(lo)q(cal)f(attribute)f(com-)224
2609 y(putations)i(alone.)21 b(In)14 b(e\013ect,)f(other)g(\\c)o(hain")
f(attributes)f(pass)j(the)f(highest)f(allo)q(cated)g(lab)q(el)h(n)o(um)
o(b)q(er)224 2648 y(around)e(the)g(tree.)16 b(This)c(is)g(b)q(est)f(a)o
(v)o(oided,)f(except)g(on)i(sytems)e(whic)o(h)i(pro)o(vide)e(automatic)
f(attribution)224 2688 y(from)i(sp)q(eci\014cation)o(.)p
eop
%%Page: 28 34
28 33 bop 224 274 a FN(28)567 b FL(CHAPTER)14 b(2.)32
b(A)m(TTRIBUTE)13 b(EV)-5 b(ALUA)m(TION)224 390 y FN(able)17
b(to)g(create)i(attribute)e(ev)n(aluators)g(from)e(attribute)j(gramma)o
(r)d(sp)q(eci\014cations,)j(but)224 440 y(for)c(the)g(momen)o(t)e(w)o
(e)i(discuss)h(hand-crafted)f(ev)n(aluators.)287 490
y(As)i(an)g(example,)f(w)o(e)i(shall)e(tak)o(e)h(a)g(simple)f(problem,)
g(that)h(of)g(allo)q(cating)e(lo)q(cation)224 540 y(o\013sets)j(to)d
(lo)q(cal)g(blo)q(c)o(k)h(v)n(ariables)f(in)g(a)h(blo)q(c)o(k)g
(structured)i(language.)j(W)m(e)14 b(also)h(wish)f(to)224
590 y(compute)g(the)g(total)f(space)i(required)g(for)f(all)e(the)j(v)n
(ariables)e(in)g(a)h(pro)q(cedure.)287 640 y(An)g(abstract)g(syn)o(tax)
g(whic)o(h)g(mo)q(dels)f(the)h(situation)g(is)f(|)295
710 y FF(STMT)97 b(::=)18 b(...)h(|)g(Compound)d(|)k(...)295
755 y(ProcBody)d(==>)h(declPart)36 b(:)20 b(seqOf)d(VarDecl,)g(--)i(or)
g(empty)550 801 y(stmtPart)36 b(:)20 b(seqOf)d(STMT,)550
847 y(totalSize)f(:)k(INTEGER;)134 b(--)19 b(synthesiz)o(ed)295
892 y(Compound)e(==>)h(declPart)36 b(:)20 b(seqOf)d(VarDecl,)g(--)i(or)
g(empty)550 938 y(stmtPart)36 b(:)20 b(seqOf)d(STMT;)295
984 y(VarDecl)37 b(==>)18 b(name)116 b(:)20 b(IdType,)550
1029 y(size)116 b(:)20 b(INTEGER,)134 b(--)19 b(intrinsic)550
1075 y(offset)76 b(:)20 b(INTEGER;)134 b(--)19 b(inherited)224
1193 y FN(Pro)q(cedure)14 b(b)q(o)q(dies)f(consist)f(of)g(a)f(p)q
(ossibly)h(empt)o(y)f(declarativ)o(e)h(part,)g(and)f(a)h(sequence)i(of)
224 1243 y(statemen)o(ts.)19 b(These)14 b(statemen)o(ts)g(ma)o(y)e
(include)h(comp)q(ound)g(statemen)o(ts)g(whic)o(h)h(in)f(turn)224
1293 y(ha)o(v)o(e)19 b(declarativ)o(e)g(parts.)33 b(The)19
b(pro)q(cedure)i(b)q(o)q(dy)d(has)h(a)g FK(total)g(size)i
FN(attribute)e(whic)o(h)224 1343 y(is)e(syn)o(thesized.)27
b(Eac)o(h)16 b(v)n(ariable)f(declaration)h(has)h FK(name)j
FN(and)c FK(size)j FN(attributes,)e(whic)o(h)224 1392
y(w)o(e)j(shall)e(assume)h(are)g(computed)g(during)f(tree-building.)34
b(In)19 b(a)f(more)h(general)g(case,)224 1442 y(v)n(ariables)12
b(migh)o(t)e(also)h(ha)o(v)o(e)h(an)f(alignmen)o(t)f(constrain)o(t,)i
(but)g(w)o(e)h(shall)e(ignore)h(that)g(here.)224 1492
y(W)m(e)i(wish)g(to)f(compute)h(the)g FK(o\013set)19
b FN(of)13 b(eac)o(h)h(v)n(ariable.)j(These)e(are)g(inherited)f
(attributes.)287 1542 y(Space)f(has)h(to)e(b)q(e)i(allo)q(cated)f(for)f
(the)i(v)n(ariables)e(of)h(a)f(blo)q(c)o(k)h(as)g(the)h(blo)q(c)o(k)e
(is)h(en)o(tered,)224 1592 y(and)20 b(is)g(reclaimed)f(as)h(the)h(blo)q
(c)o(k)f(is)f(left.)37 b(Lo)q(oking)18 b(ahead,)k(\014gure)e(3.9)f(on)h
(page)g(52)224 1641 y(illustrates)13 b(an)e(example)g(of)g(a)h(pro)q
(cedure)i(with)e(blo)q(c)o(ks,)g(and)f(the)i(storage)f(use)h(at)f(v)n
(arious)224 1691 y(p)q(oin)o(ts)i(in)g(the)g(pro)q(cedure.)287
1741 y(W)m(e)c(shall)h(tra)o(v)o(erse)h(the)g(trees)g(de\014ned)g(b)o
(y)f(the)h(ab)q(o)o(v)o(e)f(abstract)h(syn)o(tax)f(with)f(a)h(recur-)
224 1791 y(siv)o(e)16 b(pro)q(cedure)h(whic)o(h)f(will)e(visit)h(eac)o
(h)h(statemen)o(t)f(no)q(de)h(in)f(turn,)h(visiting)f(sequences)224
1841 y(in)f(left-to-righ)o(t)f(order.)18 b(Inherited)d(attributes)g
(will)d(b)q(e)j(passed)g(as)f(v)n(alue)f(parameters)h(of)224
1891 y(the)f(recursiv)o(e)g(pro)q(cedure,)g(while)f(syn)o(thesized)h
(attributes)f(will)f(b)q(e)h(returned)h(in)e(v)n(ariable)224
1940 y(mo)q(de)i(parameters.)18 b(This)c(is)g(a)f(general)i(rule.)306
1990 y(In)k(order)h(to)f(ev)n(aluate)g(the)h(attributes)g(de\014ned)g
(in)f(the)g FK(IDL)p FN(,)h(w)o(e)f(shall)f(need)i(to)224
2040 y(in)o(tro)q(duce)15 b(some)e(additional)g(attributes)i(of)e(the)i
(no)q(des.)k(In)14 b(comp)q(ound)f(and)h(pro)q(cBo)q(dy)224
2090 y(no)q(des,)g(w)o(e)g(shall)e(in)o(tro)q(duce)i(an)f(inherited)h
(in)o(teger)g FK(hiTide)i FN(attribute,)d(whic)o(h)h(holds)f(the)224
2140 y(curren)o(t)j(allo)q(cated)e(size.)19 b(The)c(tra)o(v)o(ersal)f
(pro)q(cedure)i(is)e(giv)o(en)g(in)f(\014gure)i(2.5.)j(Note)c(that)224
2189 y(the)j(inherited)f(attribute)g FK(hiTide)i FN(is)e(passed)h(to)e
(the)i(v)n(alue)e(parameter)g FK(tide)s FN(,)h(while)f(the)224
2239 y(syn)o(thesized)h(attribute)e FK(totalSize)j FN(is)d(returned)h
(b)o(y)f(the)h(v)n(ariable)d(parameter)i FK(max)5 b FN(.)287
2289 y(The)15 b(additional)d(attributes)k(whic)o(h)e(are)h(in)o(tro)q
(duced)h(in)e(the)h(\014gure)g(are)g(rather)g(sp)q(e-)224
2339 y(cialized,)10 b(in)g(that)g(they)g(are)h(simply)d(temp)q(orary)h
(w)o(orking)g(v)n(alues)g(whic)o(h)h(are)h(not)e(required)224
2389 y(further)15 b(once)g(the)g(tra)o(v)o(ersal)f(is)g(complete.)19
b(In)14 b(fact)g(all)f(of)g(the)i(attributes)g(computed)f(in)224
2438 y(this)j(\014gure)f(can)h(b)q(e)g(computed)e(in)h(a)g(single)g
(top-do)o(wn,)g(left-to-righ)o(t)f(tra)o(v)o(ersal)h(of)g(the)224
2488 y FK(AST)6 b FN(.)12 b(A)o(ttributes)j(with)d(this)i(prop)q(ert)o
(y)g(are)f(said)g(to)g(b)q(e)h FK(L-attribute)n(d)t FN(.)j(Suc)o(h)c
(attributes)224 2538 y(ma)o(y)f(b)q(e)j(computed)e(on-the-\015y)m(,)g
(as)h(the)h(tree)g(is)f(constructed)i(b)o(y)e(a)f(top-do)o(wn)h
(recursiv)o(e)224 2588 y(descen)o(t)i(parser.)287 2638
y(In)10 b FK(Mo)n(dula-2)16 b FN(the)11 b(ev)n(aluation)e(of)h(the)h(t)
o(yp)q(e)f(attribute)h(for)f(expression)h(trees)h(is)e(almost)224
2688 y(trivial,)21 b(as)f(commen)o(ted)f(earlier.)37
b(T)o(yp)q(e)21 b(is)f(a)g(syn)o(thesized)i(attribute)f(of)f
(expression)p eop
%%Page: 29 35
29 34 bop 224 274 a FL(2.5.)31 b(OPERA)m(TOR)14 b(IDENTIFICA)m(TION)690
b FN(29)p 241 392 1409 2 v 240 438 2 46 v 1648 438 V
240 483 V 285 470 a FF(PROCEDURE)16 b(VisitProc\(p)o(ro)o(c)h(:)i
(ProcBody\))o(;)p 1648 483 V 240 529 V 1648 529 V 240
575 V 325 561 a(PROCEDUR)o(E)e(VisitStmt)o(\(s)o(tmt)f(:)j(STMT;)f
(tide:)g(INTEGER;)e(VAR)j(max)f(:)h(INTEGER\);)p 1648
575 V 240 620 V 364 607 a(VAR)f(decl)g(:)i(VarDecl;)c(next)i(:)h(STMT;)
p 1648 620 V 240 666 V 325 652 a(BEGIN)p 1648 666 V 240
712 V 364 698 a(CASE)11 b FE(statement)h(typ)n(e)g(of)20
b FF(stmt)e(OF)p 1648 712 V 240 757 V 364 744 a(|)h(...)p
1648 757 V 240 803 V 364 789 a(|)g(compound)e(:)p 1648
803 V 240 849 V 442 835 a(FOR)i(decl)f(:=)12 b FE(every)g(V)m(arDe)n
(cl)g(in)j FF(stmt^.declP)o(ar)o(t)i(DO)p 1648 849 V
240 894 V 481 881 a(decl^.offse)o(t)f(:=)j(tide;)f(INC\(tide,d)o(ec)o
(l^.)o(va)o(rTy)o(pe^)o(.s)o(ize)o(\);)p 1648 894 V 240
940 V 442 926 a(END;)p 1648 940 V 240 986 V 442 972 a(IF)h(tide)f(>)h
(max)g(THEN)f(max)g(:=)h(tide)f(END;)p 1648 986 V 240
1031 V 442 1018 a(FOR)h(next)f(:=)12 b FE(every)g(STMT)j(in)g
FF(stmt^.stm)o(tPa)o(rt)h(DO)p 1648 1031 V 240 1077 V
481 1063 a(VisitStmt\(n)o(ex)o(t,t)o(ide)o(,m)o(ax\))o(;)p
1648 1077 V 240 1123 V 442 1109 a(END;)p 1648 1123 V
240 1168 V 364 1155 a(END;)p 1648 1168 V 240 1214 V 325
1200 a(END)i(VisitStmt;)p 1648 1214 V 240 1260 V 1648
1260 V 240 1305 V 325 1292 a(VAR)g(hiTide)f(:)j(INTEGER;)36
b(decl)18 b(:)h(VarDecl;)e(next)h(:)h(STMT;)p 1648 1305
V 240 1351 V 1648 1351 V 240 1397 V 285 1383 a(BEGIN)f(\(*)h(VisitProc)
d(*\))p 1648 1397 V 240 1442 V 325 1429 a(hiTide)h(:=)i(0;)p
1648 1442 V 240 1488 V 325 1474 a(FOR)f(decl)g(:=)12
b FE(every)h(V)m(arDe)n(cl)f(in)j FF(proc^.dec)o(lPa)o(rt)h(DO)p
1648 1488 V 240 1534 V 364 1520 a(decl^.off)o(set)g(:=)j(hiTide;)e
(INC\(hiTi)o(de,)o(dec)o(l^)o(.va)o(rT)o(ype)o(^.s)o(iz)o(e\);)p
1648 1534 V 240 1579 V 325 1566 a(END;)p 1648 1579 V
240 1625 V 325 1611 a(proc^.to)o(tal)o(Siz)o(e)f(:=)j(hiTide;)e(\(*)i
(initialize)d(*\))p 1648 1625 V 240 1671 V 325 1657 a(FOR)i(next)g(:=)
12 b FE(every)h(STMT)h(in)h FF(proc^.stmt)o(Par)o(t)h(DO)p
1648 1671 V 240 1716 V 364 1703 a(VisitStmt)o(\(ne)o(xt)o(,hi)o(Ti)o
(de,)o(pro)o(c^)o(.to)o(ta)o(lSi)o(ze\))o(;)p 1648 1716
V 240 1762 V 325 1748 a(END;)p 1648 1762 V 240 1808 V
285 1794 a(END)j(VisitProc)o(;)p 1648 1808 V 240 1853
V 1648 1853 V 241 1855 1409 2 v 316 1971 a FN(Figure)14
b(2.5:)j(Ev)n(aluating)c(o\013sets)i(and)e(size)i(in)f(blo)q(c)o(k)f
(structured)j(languages)224 2105 y(no)q(des,)e(and)g(ma)o(y)d(b)q(e)j
(computed)f(in)g(a)h(single)f(pass)h(o)o(v)o(er)f(the)h(tree.)19
b(W)m(e)14 b(shall)e(consider)j(a)224 2155 y(more)e(general)h(problem)f
(in)g(section)i(2.5.)224 2276 y FH(2.4.3)56 b(A)n(ttribute)18
b(ev)m(aluation)f(from)h(sp)r(eci\014cations)224 2354
y FG(<<)k(still)f(to)g(come)g(>>)224 2495 y FI(2.5)67
b(Op)r(erator)22 b(iden)n(ti\014cation)224 2588 y FN(In)12
b(some)e(languages)g(the)i(problem)e(of)g(iden)o(tifying)g(the)i
(meaning)d(of)h(an)h(o)o(v)o(erloaded)g(op)q(er-)224
2638 y(ator)i(requires)h(some)e(relativ)o(ely)g(complex)f(attribute)i
(ev)n(aluation.)k(In)12 b(order)i(to)e(motiv)n(ate)224
2688 y(this)i(topic,)g(consider)g(the)h(follo)o(wing)c(fragmen)o(t)i
(of)g FK(Mo)n(dula-2)20 b FN(|)p eop
%%Page: 30 36
30 35 bop 224 274 a FN(30)567 b FL(CHAPTER)14 b(2.)32
b(A)m(TTRIBUTE)13 b(EV)-5 b(ALUA)m(TION)295 381 y FF(VAR)19
b(a,b,c,d)e(:)i(SHORTINT;)d(\(*)j(16-bit)e(integers)g(*\))335
427 y(...)335 472 y(a)i(:=)g(b)g(+)g(c)g(+)g(d;)224 548
y FN(No)o(w,)e(consider)h(that)f(some)g(mac)o(hines)f(ha)o(v)o(e)g
(instructions)i(whic)o(h)f(are)h(able)e(to)h(add)g(8,)224
598 y(16,)i(or)f(32-bit)g(in)o(tegers.)32 b(The)19 b(question)f(is,)h
(do)q(es)g(the)g(`+')f(sign)g(mean)f(short)i(in)o(teger)224
648 y(arithmetic,)13 b(or)h(do)q(es)g(it)g(mean)e(32-bit)h(arithmetic,)
g(or)g(do)h(w)o(e)g(ha)o(v)o(e)g(a)g(c)o(hoice?)287 698
y(Of)i(course,)i(there)g(is)e(no)g(logical)f(w)o(a)o(y)h(to)g(decide)h
(suc)o(h)g(a)g(\014ne)f(p)q(oin)o(t)g(of)g(seman)o(tics.)224
748 y(Unless)h(the)f(language)e(standard)i(sa)o(ys)g(the)g(meaning)e
(is)h(implemen)o(tation)d(de\014ned,)17 b(the)224 798
y(meaning)e(m)o(ust)h(b)q(e)h(as)g(sp)q(eci\014ed)h(b)o(y)e(the)h
(relev)n(an)o(t)g(standard.)26 b(In)17 b(this)g(case)g(the)g(draft)224
847 y(in)o(ternational)c(standard)h(for)g FK(Mo)n(dula-2)20
b FN(\(DIS)14 b(10514,)e(section)j(6.4.1\))d(sa)o(ys)i(|)328
921 y(A)j(v)n(alue)e(of)h(a)g(subrange)h(t)o(yp)q(e)g(is)g(also)e(a)i
(v)n(alue)e(of)h(the)h(host)g(t)o(yp)q(e)g(of)e(that)328
971 y(subrange)c(t)o(yp)q(e,)g(and)f(the)g(t)o(yp)q(e)h(of)e
(expressions)j(that)e(are)g(v)n(alue)g(designators,)328
1020 y(or)i(function)g(calls,)g(is)g(de\014ned)h(in)f(terms)f(of)h(the)
h(host)f(t)o(yp)q(e)h(of)e(an)o(y)h(subrange)328 1070
y(t)o(yp)q(e)j(whic)o(h)e(migh)o(t)f(otherwise)j(apply)e(...)224
1144 y(In)18 b FK(Mo)n(dula-2)24 b FN(there)19 b(is)e(only)g(one)h(in)o
(teger)g(t)o(yp)q(e,)g(with)g(all)e(other)i(signed)g(t)o(yp)q(es)g(b)q
(eing)224 1193 y(subranges)11 b(of)e(this)g FK(host)i(typ)n(e)p
FN(.)17 b(Expressions)10 b(m)o(ust)f(th)o(us)h(b)q(e)g(ev)n(aluated)f
(at)g(full)f FK(INTEGER)224 1243 y FN(width,)20 b(with)e(the)i(result)g
(b)q(eing)e(range-c)o(hec)o(k)o(ed)j(against)d(the)h(declared)h(range)f
(of)g(the)224 1293 y(destination)14 b(t)o(yp)q(e.)287
1343 y(Note)i(that)h(this)f(c)o(hoice)h(in)f(the)h(language)f(has)g
(some)g(clear)g(adv)n(an)o(tages,)g(since)i(the)224 1393
y(example)e(expression)i(will)d(still)h(b)q(e)h(able)g(to)f(b)q(e)i
(computed,)e(ev)o(en)i(if)e FG(\(b+c\))f FN(is)i(outside)224
1443 y(of)g(the)h(short)f(in)o(teger)h(range,)f(but)g
FG(\(b+c+d\))f FN(is)h(not.)27 b(This)17 b(c)o(hoice)h(of)e(seman)o
(tics)h(th)o(us)224 1492 y(a)o(v)o(oids)d(in)o(termediate)f(o)o(v)o
(er\015o)o(w)h(errors.)21 b(Ho)o(w)o(ev)o(er,)14 b(the)h(c)o(hoice)f
(is)h(not)f(without)g(cost)h(on)224 1542 y(some)f(mac)o(hine)g(arc)o
(hitectures.)24 b(Since)15 b(w)o(e)g(are)h(only)e(p)q(ermitted)h
(subranges)h(of)e(a)h(single)224 1592 y(signed)f(t)o(yp)q(e,)g(it)f(is)
h(necessary)h(to)f(p)q(erform)f FK(al)r(l)k FN(arithmetic)c(at)g(the)h
(width)g(of)f(the)h(widest)224 1642 y(supp)q(orted)k(t)o(yp)q(e.)24
b(On)17 b(mac)o(hines)e(for)g(whic)o(h)h(op)q(erations)g(on)g(the)h
(widest)f(t)o(yp)q(e)h(attract)224 1692 y(some)g(sp)q(eed)j(p)q(enalt)o
(y)m(,)e(this)g(c)o(hoice)g(of)f(seman)o(tics)h(ma)o(y)e(lead)h(to)h(a)
g(signi\014can)o(t)f(loss)h(of)224 1741 y(p)q(erformance.)287
1791 y(The)e(same)g(example)f(in)h(language)f FM(C)k
FN(has)e(rather)g(di\013eren)o(t)g(prop)q(erties.)27
b(In)16 b FK(ANSI)224 1841 y(C)21 b FN(the)15 b FK(usual)h(unary)h(c)n
(onversions)h FN(apply)c(to)h(eac)o(h)g(op)q(erand)g(in)g(suc)o(h)g
(expressions,)h(and)224 1891 y(if)d(the)h(t)o(yp)q(es)h(of)e(the)h(op)q
(erands)h(are)f(di\013eren)o(t,)g(then)g(the)h FK(usual)g(binary)f(c)n
(onversions)k FN(are)224 1941 y(then)g(applied.)27 b(In)17
b(this)g(example,)f(only)g(the)i(unary)f(con)o(v)o(ersions)h(apply)m(,)
e(and)h(con)o(v)o(ert)224 1990 y(the)d FG(shortint)e
FN(data)g(to)h FG(int)p FN(,)g(giving)e(the)j(same)e(seman)o(tics)h(as)
g FK(Mo)n(dula-2)7 b FN(,)12 b(but)i(without)224 2040
y(the)h(o)o(v)o(er\015o)o(w)e(or)h(range)g(c)o(hec)o(ks.)224
2154 y FH(2.5.1)56 b(Automatic)17 b(co)r(ercions)224
2231 y FN(A)g FK(value)g(c)n(o)n(er)n(cion)j FN(is)c(an)g(op)q(eration)
h(b)o(y)f(whic)o(h)g(a)g(v)n(alue)g(of)g(one)h(t)o(yp)q(e)g(is)f(con)o
(v)o(erted)h(to)224 2281 y(another)c(t)o(yp)q(e.)18 b(Automatic)10
b(co)q(ercions)k(are)e(those)h(whic)o(h)f(are)g(in)o(v)o(ok)o(ed)g(b)o
(y)g(the)g(compiler,)224 2331 y(without)18 b(an)o(y)g(explicit)g
(denotation)g(in)g(the)h(source)h(text.)32 b(The)19 b(implicit)c
(widening)j(of)224 2380 y(subranges)c(to)d(their)i(host)f(t)o(yp)q(e)h
(in)e FK(Mo)n(dula-2)18 b FN(is)12 b(a)g(trivial)f(example.)16
b(The)c(usual)g(con)o(v)o(er-)224 2430 y(sions)h(of)g
FM(C)i FN(are)e(a)g(more)f(in)o(teresting)h(case,)h(since)f(they)h(in)o
(v)o(olv)o(e)d(represen)o(tation)k(c)o(hanges)224 2480
y(b)q(et)o(w)o(een)h(whole)d(n)o(um)o(b)q(er)g(and)h(\015oating)f(p)q
(oin)o(t)g(t)o(yp)q(es.)287 2530 y(The)g(p)q(ossible)g(co)q(ercions)h
(in)e FM(C)j FN(are)e(sho)o(wn)g(in)f(\014gure)i(2.6,)d(where)j(the)f
(unary)g(con)o(v)o(er-)224 2580 y(sions)i(are)f(sho)o(wn)h(as)f(dotted)
h(lines,)f(and)g(the)h(solid)e(lines)h(are)h(the)g(binary)f(con)o(v)o
(ersions.)1647 2565 y Fz(4)p 224 2610 577 2 v 271 2636
a Fy(4)288 2648 y Fx(In)c(fact,)g(this)g(diagram)f(glosses)g(o)o(v)o
(er)h(some)g(of)g(the)g(\014ne)g(prin)o(t)g(in)g(the)h
Fu(ANSI)16 b Fx(standard.)d(The)e(\014gure)224 2688 y(is)h(correct)e
(only)g(if)h Fs(sizeof\(shor)o(t)k(int\))h(<)h(sizeof\(int\))8
b Fx(etc.)p eop
%%Page: 31 37
31 36 bop 224 274 a FL(2.5.)31 b(OPERA)m(TOR)14 b(IDENTIFICA)m(TION)690
b FN(31)168 349 y
 24536596 7433338 0 0 24536596 7433338 startTexFig
 168 349 a
%%BeginDocument: coercion.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-32.0 129.0 translate 0.810 -0.810 scale
1.000 setlinewidth
% Polyline
n 46 19 m 39 19 39 32 7 arcto 4 {pop} repeat 39 39 112 39 7 arcto 4 {pop} repeat 119 39 119 26 7 arcto 4 {pop} repeat 119 19 46 19 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 46 59 m 39 59 39 72 7 arcto 4 {pop} repeat 39 79 112 79 7 arcto 4 {pop} repeat 119 79 119 66 7 arcto 4 {pop} repeat 119 59 46 59 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 46 139 m 39 139 39 152 7 arcto 4 {pop} repeat 39 159 112 159 7 arcto 4 {pop} repeat 119 159 119 146 7 arcto 4 {pop} repeat 119 139 46 139 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 146 79 m 139 79 139 92 7 arcto 4 {pop} repeat 139 99 212 99 7 arcto 4 {pop} repeat 219 99 219 86 7 arcto 4 {pop} repeat 219 79 146 79 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 206 119 m 199 119 199 132 7 arcto 4 {pop} repeat 199 139 272 139 7 arcto 4 {pop} repeat 279 139 279 126 7 arcto 4 {pop} repeat 279 119 206 119 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 266 79 m 259 79 259 92 7 arcto 4 {pop} repeat 259 99 332 99 7 arcto 4 {pop} repeat 339 99 339 86 7 arcto 4 {pop} repeat 339 79 266 79 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 326 119 m 319 119 319 132 7 arcto 4 {pop} repeat 319 139 392 139 7 arcto 4 {pop} repeat 399 139 399 126 7 arcto 4 {pop} repeat 399 119 326 119 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 426 39 m 419 39 419 52 7 arcto 4 {pop} repeat 419 59 492 59 7 arcto 4 {pop} repeat 499 59 499 46 7 arcto 4 {pop} repeat 499 39 426 39 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 386 79 m 379 79 379 92 7 arcto 4 {pop} repeat 379 99 452 99 7 arcto 4 {pop} repeat 459 99 459 86 7 arcto 4 {pop} repeat 459 79 386 79 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 46 99 m 39 99 39 112 7 arcto 4 {pop} repeat 39 119 112 119 7 arcto 4 {pop} repeat 119 119 119 106 7 arcto 4 {pop} repeat 119 99 46 99 7 arcto 4 {pop} repeat clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 339 89 m 379 89 l gs col-1 s gr
n 371.000 87.000 m 379.000 89.000 l 371.000 91.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 219 89 m 259 89 l gs col-1 s gr
n 251.000 87.000 m 259.000 89.000 l 251.000 91.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 279 129 m 319 129 l gs col-1 s gr
n 311.000 127.000 m 319.000 129.000 l 311.000 131.000 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Open spline
n 119.000 29.000 m 126.000 32.500 l
	126.000 32.500 133.000 36.000 136.000 52.500 DrawSplineSection
	136.000 52.500 139.000 69.000 141.500 74.000 DrawSplineSection
	144.000 79.000 l gs col-1 s gr
	[] 0 setdash
n 142.211 70.950 m 144.000 79.000 l 138.633 72.739 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Open spline
n 119.000 69.000 m 124.000 69.000 l
	124.000 69.000 129.000 69.000 134.000 76.500 DrawSplineSection
	139.000 84.000 l gs col-1 s gr
	[] 0 setdash
n 136.226 76.234 m 139.000 84.000 l 132.898 78.453 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Open spline
n 119.000 109.000 m 124.000 109.000 l
	124.000 109.000 129.000 109.000 134.000 101.500 DrawSplineSection
	139.000 94.000 l gs col-1 s gr
	[] 0 setdash
n 132.898 99.547 m 139.000 94.000 l 136.226 101.766 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Open spline
n 119.000 149.000 m 126.000 145.500 l
	126.000 145.500 133.000 142.000 136.000 130.500 DrawSplineSection
	136.000 130.500 139.000 119.000 141.500 109.000 DrawSplineSection
	144.000 99.000 l gs col-1 s gr
	[] 0 setdash
n 140.119 106.276 m 144.000 99.000 l 144.000 107.246 l gs 2 setlinejoin col-1 s gr
% Open spline
n 239.000 119.000 m 239.000 110.500 l
	239.000 110.500 239.000 102.000 248.500 97.000 DrawSplineSection
	258.000 92.000 l gs col-1 s gr
n 249.989 93.956 m 258.000 92.000 l 251.852 97.496 l gs 2 setlinejoin col-1 s gr
% Open spline
n 279.000 124.000 m 289.000 116.500 l
	289.000 116.500 299.000 109.000 319.000 109.000 DrawSplineSection
	319.000 109.000 339.000 109.000 359.000 101.500 DrawSplineSection
	379.000 94.000 l gs col-1 s gr
n 370.807 94.936 m 379.000 94.000 l 372.212 98.682 l gs 2 setlinejoin col-1 s gr
% Open spline
n 369.000 119.000 m 369.000 114.000 l
	369.000 114.000 369.000 109.000 375.000 103.000 DrawSplineSection
	381.000 97.000 l gs col-1 s gr
n 373.929 101.243 m 381.000 97.000 l 376.757 104.071 l gs 2 setlinejoin col-1 s gr
% Open spline
n 219.000 84.000 m 229.000 76.500 l
	229.000 76.500 239.000 69.000 299.000 69.000 DrawSplineSection
	299.000 69.000 359.000 69.000 369.000 76.500 DrawSplineSection
	379.000 84.000 l gs col-1 s gr
n 373.800 77.600 m 379.000 84.000 l 371.400 80.800 l gs 2 setlinejoin col-1 s gr
% Open spline
n 414.000 79.000 m 414.000 71.500 l
	414.000 71.500 414.000 64.000 417.500 60.500 DrawSplineSection
	421.000 57.000 l gs col-1 s gr
n 413.929 61.243 m 421.000 57.000 l 416.757 64.071 l gs 2 setlinejoin col-1 s gr
% Open spline
n 339.000 84.000 m 354.500 75.500 l
	354.500 75.500 370.000 67.000 384.500 63.000 DrawSplineSection
	384.500 63.000 399.000 59.000 409.000 56.500 DrawSplineSection
	419.000 54.000 l gs col-1 s gr
n 410.754 54.000 m 419.000 54.000 l 411.724 57.881 l gs 2 setlinejoin col-1 s gr
% Open spline
n 229.000 119.000 m 229.000 94.000 l
	229.000 94.000 229.000 69.000 244.000 56.500 DrawSplineSection
	244.000 56.500 259.000 44.000 329.500 41.500 DrawSplineSection
	329.500 41.500 400.000 39.000 409.500 41.500 DrawSplineSection
	419.000 44.000 l gs col-1 s gr
n 411.772 40.030 m 419.000 44.000 l 410.754 43.898 l gs 2 setlinejoin col-1 s gr
% Open spline
n 351.000 119.000 m 351.500 91.500 l
	351.500 91.500 352.000 64.000 356.000 56.500 DrawSplineSection
	356.000 56.500 360.000 49.000 389.500 49.000 DrawSplineSection
	419.000 49.000 l gs col-1 s gr
n 411.000 47.000 m 419.000 49.000 l 411.000 51.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 217.000 81.000 m 222.000 70.000 l
	222.000 70.000 227.000 59.000 241.000 46.000 DrawSplineSection
	241.000 46.000 255.000 33.000 333.500 33.000 DrawSplineSection
	333.500 33.000 412.000 33.000 416.500 36.500 DrawSplineSection
	421.000 40.000 l gs col-1 s gr
n 415.913 33.510 m 421.000 40.000 l 413.457 36.667 l gs 2 setlinejoin col-1 s gr
% Open spline
n 298.000 99.000 m 298.000 109.000 l
	298.000 109.000 298.000 119.000 308.500 122.000 DrawSplineSection
	319.000 125.000 l gs col-1 s gr
n 311.857 120.879 m 319.000 125.000 l 310.758 124.725 l gs 2 setlinejoin col-1 s gr
% Open spline
n 175.000 99.000 m 175.000 113.500 l
	175.000 113.500 175.000 128.000 186.500 128.000 DrawSplineSection
	198.000 128.000 l gs col-1 s gr
n 190.000 126.000 m 198.000 128.000 l 190.000 130.000 l gs 2 setlinejoin col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
444 52 m 
gs 1 -1 scale (double) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
406 92 m 
gs 1 -1 scale (float) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
172 93 m 
gs 1 -1 scale (int) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
67 113 m 
gs 1 -1 scale (char) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
58 32 m 
gs 1 -1 scale (short int) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
50 72 m 
gs 1 -1 scale (unsigned short) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
52 152 m 
gs 1 -1 scale (unsigned char) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
332 132 m 
gs 1 -1 scale (unsigned long) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
282 92 m 
gs 1 -1 scale (long int) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
220 132 m 
gs 1 -1 scale (unsigned) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 420 911 a FN(Figure)14 b(2.6:)j(Usual)c(unary)h(and)g(binary)f(co)o(v)
o(ersions)i(in)e FK(ANSI)i(C)224 1043 y FN(The)e(binary)f(con)o(v)o
(ersions)h(are)g(used)g(to)f(try)g(to)h(mak)o(e)d(the)j(t)o(yp)q(es)g
(of)f(the)h(t)o(w)o(o)f(op)q(erands)h(of)224 1092 y(an)o(y)f(binary)g
(op)q(erator)h(the)g(same.)k(These)c(con)o(v)o(ersions)g(form)e(a)h
FK(c)n(o)n(er)n(cion)h(gr)n(aph)p FN(.)18 b(In)12 b(gen-)224
1142 y(eral,)f(suc)o(h)g(con)o(v)o(ersions)f(should)g(b)q(e)h(v)n
(alue-preserving,)g(or)f(giv)o(e)f(a)h(closest)h(appro)o(ximation)224
1192 y(in)h(some)g(de\014ned)h(sense.)19 b(The)13 b(con)o(v)o(ersions)g
(in)f(\014gure)h(2.6)e(are)i(not)f(all)f(v)n(alue-preserving.)224
1242 y(In)f(particular,)g(for)f(mac)o(hines)g(in)h(whic)o(h)f
FK(long)j(int)h FN(is)d(32-bits)f(and)h FK(\015o)n(at)k
FN(is)9 b(single-precision)224 1292 y FK(IEEE)23 b FN(format)15
b(the)i(con)o(v)o(ersion)g(of)g(large)f(in)o(tegers)i(ma)o(y)d(round)i
(as)g(m)o(uc)o(h)e(as)i(8-bits)g(of)224 1342 y(signi\014cance)e(from)e
(the)j(exact)f(v)n(alue.)20 b(Also,)14 b(in)g FM(C)j
FN(the)e(con)o(v)o(ersion)g(of)f(negativ)o(e)h(in)o(teger)224
1391 y(v)n(alues)k(to)f(unsigned)g(t)o(yp)q(es)i(silen)o(tly)d(pro)q
(duces)j(a)f(result)g(whic)o(h)f(is)g(congruen)o(t)h(to)g(the)224
1441 y(exact)c(v)n(alue)e(mo)q(dulo)e(2)610 1426 y FB(n)633
1441 y FN(,)i(where)i FM(n)f FN(is)f(the)i(n)o(um)o(b)q(er)e(of)g(bits)
g(in)h(the)g(unsigned)g(represen-)224 1491 y(tation.)j(In)c
FK(Mo)n(dula-2)19 b FN(the)14 b(same)e(con)o(v)o(ersion)h(can)g(nev)o
(er)h(b)q(e)g(implicit,)9 b(but)14 b(requires)g(the)224
1541 y(use)f(of)d(the)i(standard)g(function)f FK(ORD)16
b FN(or)11 b FK(V)l(AL)p FN(,)g(and)g(generates)i(a)e(run)o(time)f
(range)i(c)o(hec)o(k.)287 1591 y(A)18 b(di\013eren)o(t)g(t)o(yp)q(e)h
(of)e(implicit)e(con)o(v)o(ersion)j(o)q(ccurs)i(when)e(a)g(v)n(alue)f
(of)g(one)h(t)o(yp)q(e)g(is)224 1640 y(assigned)e(to)f(a)g(v)n(ariable)
g(of)f(another)i(t)o(yp)q(e.)23 b(These)17 b(same)d(rules)i(apply)f(to)
g(substitution)224 1690 y(of)h(actual)f(parameters)h(to)g(formals)e(of)
i(another)g(t)o(yp)q(e.)25 b(In)16 b FM(C)i FN(a)e(v)n(alue)f(of)h
FK(any)k FN(n)o(umeric)224 1740 y(t)o(yp)q(e)13 b(ma)o(y)c(b)q(e)j
(assigned)g(to)g(a)f(v)n(ariable)g(of)g(an)o(y)g(other)h(n)o(umeric)f
(t)o(yp)q(e,)h(again)f(without)g(an)o(y)224 1790 y(explicit)16
b(denotation)f(in)g(the)h(source)h(co)q(de.)24 b(In)15
b(con)o(v)o(ersions)h(from)e(\015oating)h(to)g(in)o(tegral)224
1840 y(t)o(yp)q(es,)c(the)f(v)n(alue)f(is)g(rounded)h(to)o(w)o(ards)g
(zero,)g(while)f(for)g(narro)o(wing)g(con)o(v)o(ersions)h(the)g(high)
224 1890 y(signi\014cance)17 b(bits)f(are)g(simply)e(discarded.)25
b(Note)16 b(that)g(these)i(assignmen)o(t)d(con)o(v)o(ersions)224
1939 y(do)f(not)g(app)q(ear)g(in)g(the)g(\014gure)h(2.6,)d(and)i(if)f
(presen)o(t)i(w)o(ould)e(mak)o(e)g(the)h(graph)g(cyclic.)287
1989 y(All)k(these)k(rules,)f(tak)o(en)f(together,)h(allo)o(w)d(us)i
(to)g(deduce)h(the)f(implicit)d(co)q(ercions)224 2039
y(whic)o(h)d(tak)o(e)g(place)g(in)g(the)g(assignmen)o(t)f(in)g(the)i
(follo)o(wing)c(program)h(fragmen)o(t)h(|)295 2123 y
FF(int)136 b(a;)295 2169 y(long)18 b(int)38 b(b;)295
2215 y(short)18 b(int)g(c;)295 2260 y(double)76 b(d;)335
2306 y(...)335 2352 y(a)19 b(=)g(b)g(+)g(c)h(+)f(d;)g(/*)g(tree)f(says)
g(\(\(b+c\)+d\))e(*/)287 2438 y FN(The)11 b FK(AST)k
FN(b)q(efore)d(and)e(after)g(attribution)g(is)h(sho)o(wn)f(in)g
(\014gure)h(2.7.)16 b(In)10 b(this)h(\014gure)g(the)224
2488 y(no)q(des)g(lab)q(elled)e FK(lval)k FN(yield)d(an)f
FK(l-value)s FN(,)h(that)f(is,)h(the)h(address)g(of)e(the)h(v)n
(ariable.)15 b(The)10 b(no)q(des)224 2538 y(lab)q(elled)h
FK(rval)k FN(yield)10 b(an)h FK(r-value)s FN(,)g(that)g(is,)g(the)h(v)n
(alue)e(of)h(the)g(v)n(ariable.)16 b(In)11 b(the)h(righ)o(t-hand)224
2588 y(\014gure,)17 b(t)o(yp)q(ed)g(op)q(erator)f(no)q(des)h(are)f(lab)
q(elled)g(with)f(a)h FK(D,)h(I,)g(L,)f(S)21 b FN(to)16
b(indicate)g FK(double,)224 2638 y(inte)n(ger,)g(long)h(inte)n(ger,)f
(short)g(inte)n(ger)k FN(resp)q(ectiv)o(ely)m(.)k(The)16
b(co)q(ercion)g(no)q(des)g(are)g(sho)o(wn)224 2688 y(explicitly)i(and)h
(ha)o(v)o(e)g(lab)q(els)g(whic)o(h)g(indicate)g(the)h(con)o(v)o(ersion)
f(required.)34 b(The)20 b(short)p eop
%%Page: 32 38
32 37 bop 224 274 a FN(32)567 b FL(CHAPTER)14 b(2.)32
b(A)m(TTRIBUTE)13 b(EV)-5 b(ALUA)m(TION)251 349 y
 21905326 13090570 0 0 21905326 13090570 startTexFig
 251
349 a
%%BeginDocument: coercion2.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-105.0 248.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Ellipse
n 329 129 15 15 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 369 69 15 15 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 369 189 15 15 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 329 249 15 15 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 471 188 15 15 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 431 128 15 15 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 419 248 15 15 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 211 129 15 15 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 131 129 15 15 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 171 69 15 15 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 171 189 15 15 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 131 249 15 15 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 211 249 15 15 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 251 189 15 15 0 360 DrawEllipse gs col-1 s gr
0.500 setlinewidth
% Polyline
n 360 82 m 337 115 l gs col-1 s gr
n 343.215 109.580 m 337.000 115.000 l 339.934 107.293 l gs 2 setlinejoin col-1 s gr
% Polyline
n 360 202 m 337 236 l gs col-1 s gr
n 343.139 230.494 m 337.000 236.000 l 339.826 228.253 l gs 2 setlinejoin col-1 s gr
% Polyline
n 356 144 m 349 144 349 157 7 arcto 4 {pop} repeat 349 164 382 164 7 arcto 4 {pop} repeat 389 164 389 151 7 arcto 4 {pop} repeat 389 144 356 144 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 439 141 m 463 175 l gs col-1 s gr
n 460.020 167.311 m 463.000 175.000 l 456.753 169.618 l gs 2 setlinejoin col-1 s gr
% Polyline
n 418 84 m 411 84 411 97 7 arcto 4 {pop} repeat 411 104 444 104 7 arcto 4 {pop} repeat 451 104 451 91 7 arcto 4 {pop} repeat 451 84 418 84 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 406 173 m 399 173 399 186 7 arcto 4 {pop} repeat 399 193 432 193 7 arcto 4 {pop} repeat 439 193 439 180 7 arcto 4 {pop} repeat 439 173 406 173 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 406 203 m 399 203 399 216 7 arcto 4 {pop} repeat 399 223 432 223 7 arcto 4 {pop} repeat 439 223 439 210 7 arcto 4 {pop} repeat 439 203 406 203 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 418 193 m 418 203 l gs col-1 s gr
n 420.000 195.000 m 418.000 203.000 l 416.000 195.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 431 104 m 431 114 l gs col-1 s gr
n 433.000 106.000 m 431.000 114.000 l 429.000 106.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 369 164 m 369 175 l gs col-1 s gr
n 371.000 167.000 m 369.000 175.000 l 367.000 167.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 418 223 m 418 234 l gs col-1 s gr
n 420.000 226.000 m 418.000 234.000 l 416.000 226.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 163 82 m 139 116 l gs col-1 s gr
n 145.247 110.618 m 139.000 116.000 l 141.980 108.311 l gs 2 setlinejoin col-1 s gr
% Polyline
n 180 81 m 204 117 l gs col-1 s gr
n 201.226 109.234 m 204.000 117.000 l 197.898 111.453 l gs 2 setlinejoin col-1 s gr
% Polyline
n 204 142 m 179 175 l gs col-1 s gr
n 185.425 169.831 m 179.000 175.000 l 182.237 167.416 l gs 2 setlinejoin col-1 s gr
% Polyline
n 162 202 m 138 235 l gs col-1 s gr
n 144.323 229.706 m 138.000 235.000 l 141.088 227.354 l gs 2 setlinejoin col-1 s gr
% Polyline
n 181 200 m 204 236 l gs col-1 s gr
n 201.378 228.182 m 204.000 236.000 l 198.007 230.335 l gs 2 setlinejoin col-1 s gr
% Polyline
n 220 141 m 244 177 l gs col-1 s gr
n 241.226 169.234 m 244.000 177.000 l 237.898 171.453 l gs 2 setlinejoin col-1 s gr
% Open spline
n 380.000 79.000 m 385.500 86.000 l
	385.500 86.000 391.000 93.000 401.000 93.000 DrawSplineSection
	411.000 93.000 l gs col-1 s gr
n 403.000 91.000 m 411.000 93.000 l 403.000 95.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 422.000 140.000 m 417.000 147.000 l
	417.000 147.000 412.000 154.000 401.000 154.000 DrawSplineSection
	390.000 154.000 l gs col-1 s gr
n 398.000 156.000 m 390.000 154.000 l 398.000 152.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 379.000 200.000 m 382.000 203.500 l
	382.000 203.500 385.000 207.000 390.500 205.500 DrawSplineSection
	390.500 205.500 396.000 204.000 392.500 195.500 DrawSplineSection
	392.500 195.500 389.000 187.000 388.500 184.500 DrawSplineSection
	388.500 184.500 388.000 182.000 393.500 182.000 DrawSplineSection
	399.000 182.000 l gs col-1 s gr
n 391.000 180.000 m 399.000 182.000 l 391.000 184.000 l gs 2 setlinejoin col-1 s gr
/Times-Italic findfont 10.00 scalefont setfont
322 132 m 
gs 1 -1 scale (lval) col-1 show gr
/Times-Roman findfont 12.00 scalefont setfont
362 70 m 
gs 1 -1 scale (=) col-1 show gr
/Times-Roman findfont 12.00 scalefont setfont
424 128 m 
gs 1 -1 scale (+) col-1 show gr
/Times-Roman findfont 12.00 scalefont setfont
362 189 m 
gs 1 -1 scale (+) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
370 74 m 
gs 1 -1 scale (I) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
432 132 m 
gs 1 -1 scale (D) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
370 193 m 
gs 1 -1 scale (L) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
322 246 m 
gs 1 -1 scale (rval) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
411 245 m 
gs 1 -1 scale (rval) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
463 186 m 
gs 1 -1 scale (rval) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
417 255 m 
gs 1 -1 scale (S) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
326 256 m 
gs 1 -1 scale (L) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
468 196 m 
gs 1 -1 scale (D) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
422 97 m 
gs 1 -1 scale (DtoI) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
360 157 m 
gs 1 -1 scale (LtoD) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
411 216 m 
gs 1 -1 scale (StoI) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
412 186 m 
gs 1 -1 scale (ItoL) col-1 show gr
/Times-Italic findfont 12.00 scalefont setfont
325 153 m 
gs 1 -1 scale (a) col-1 show gr
/Times-Italic findfont 12.00 scalefont setfont
326 275 m 
gs 1 -1 scale (b) col-1 show gr
/Times-Italic findfont 12.00 scalefont setfont
417 274 m 
gs 1 -1 scale (c) col-1 show gr
/Times-Italic findfont 12.00 scalefont setfont
469 214 m 
gs 1 -1 scale (d) col-1 show gr
/Times-Roman findfont 12.00 scalefont setfont
168 73 m 
gs 1 -1 scale (=) col-1 show gr
/Times-Roman findfont 12.00 scalefont setfont
208 132 m 
gs 1 -1 scale (+) col-1 show gr
/Times-Roman findfont 12.00 scalefont setfont
168 192 m 
gs 1 -1 scale (+) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
124 132 m 
gs 1 -1 scale (lval) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
243 192 m 
gs 1 -1 scale (rval) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
123 252 m 
gs 1 -1 scale (rval) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
204 251 m 
gs 1 -1 scale (rval) col-1 show gr
/Times-Italic findfont 12.00 scalefont setfont
247 216 m 
gs 1 -1 scale (d) col-1 show gr
/Times-Italic findfont 12.00 scalefont setfont
209 274 m 
gs 1 -1 scale (c) col-1 show gr
/Times-Italic findfont 12.00 scalefont setfont
127 275 m 
gs 1 -1 scale (b) col-1 show gr
/Times-Italic findfont 12.00 scalefont setfont
127 154 m 
gs 1 -1 scale (a) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 240 1269 a FN(Figure)14 b(2.7:)j(Abstract)e(expression)g(tree,)g(and)e
(co)q(de)i(tree)g(sho)o(wing)e(explicit)h(co)q(ercions)224
1403 y(in)o(teger)f FM(c)g FN(is)f(\014rst)h(con)o(v)o(erted)h(to)e(in)
o(teger)h(as)g(required)g(b)o(y)f(the)h(usual)g(unary)f(con)o(v)o
(ersions,)224 1453 y(and)19 b(then)g(is)f(con)o(v)o(erted)i(to)e(long)f
(in)o(teger)i(to)g(matc)o(h)e(the)i(left)f(op)q(erand)h(of)f(the)h(lo)o
(w)o(er)224 1503 y(addition)13 b(no)q(de.)287 1553 y(The)18
b(top)f(con)o(v)o(ersion)h(in)f(the)i(\014gure)f(is)f(di\013eren)o(t)i
(to)e(all)g(others.)30 b(It)18 b(is)f(an)h(assign-)224
1603 y(men)o(t)c(con)o(v)o(ersion,)h(whic)o(h)g(in)f(this)h(case)h(do)q
(es)g(not)f(corresp)q(ond)h(to)f(an)o(y)f(of)g(the)i(edges)g(in)224
1652 y(\014gure)f(2.6.)224 1762 y FO(A)h(lattice)e(co)q(ercion)h(mo)q
(del)224 1840 y FN(Examples)d(of)g(implicit)e(co)q(ercion)k(whic)o(h)e
(are)i(seman)o(tically)c(w)o(ell)i(b)q(eha)o(v)o(ed)i(require)f(some)
224 1890 y(restriction)k(on)e(the)h(form)e(of)h(the)h(implicit)d(co)q
(ercion)k(graph.)22 b(In)16 b(particular,)f(w)o(e)h(w)o(ould)224
1940 y(lik)o(e)k(all)g(implicit)e(con)o(v)o(ersions)j(to)g(b)q(e)g(en)o
(tirely)g(v)n(alue-preserving,)h(and)f(to)f(induce)i(a)224
1989 y(partial)17 b(order)h(on)f(the)g(t)o(yp)q(es.)29
b(The)18 b(partial)e(order)i(relation)f FM(T)1263 1995
y Fz(1)1293 1989 y Ft(\022)12 b FM(T)1361 1995 y Fz(2)1397
1989 y FN(corresp)q(onds)19 b(to)224 2039 y(the)c(predicate)g
FK(the)g(values)g(of)g FM(T)742 2045 y Fz(1)775 2039
y FK(ar)n(e)g(include)n(d)g(in)g FM(T)1083 2045 y Fz(2)1102
2039 y FN(.)287 2089 y(If)f(for)g(ev)o(ery)h(pair)f(of)f(t)o(yp)q(es)j
(there)f(is)g(some)e(unique)h(t)o(yp)q(e)h(whic)o(h)g(is)f(the)h(least)
f(upp)q(er)224 2139 y(b)q(ound)19 b(of)e(the)i(t)o(yp)q(es,)h(then)f(w)
o(e)f(sa)o(y)g(the)h(t)o(yp)q(es)g(form)e(a)h FK(lattic)n(e)p
FN(.)30 b(F)m(or)18 b(an)o(y)g(suc)o(h)h(pair)224 2189
y(of)e(t)o(yp)q(es)i(the)f FK(le)n(ast)f(upp)n(er)i(b)n(ound)k
FN(is)17 b(the)h(least)g(t)o(yp)q(e)g(to)f(whic)o(h)g(b)q(oth)h(v)n
(alues)f(ma)o(y)f(b)q(e)224 2239 y(con)o(v)o(erted)21
b(without)d(loss)h(of)g(accuracy)h(or)f(range.)34 b(A)19
b(reasonable)g(seman)o(tic)f(rule)i(for)224 2289 y(suc)o(h)14
b(a)f(system)g(w)o(ould)f(b)q(e:)18 b(for)13 b(ev)o(ery)h(binary)f(op)q
(erator,)g(con)o(v)o(ert)h(eac)o(h)f(op)q(erand)h(to)f(the)224
2338 y(least)d(upp)q(er)h(b)q(ound)f(of)f(the)h(pair.)16
b(Do)o(wn)9 b(con)o(v)o(ersions)i(only)e(tak)o(e)g(place)h(o)o(v)o(er)g
(assignmen)o(t,)224 2388 y(or)k(b)o(y)g(an)g(explicit)f(con)o(v)o
(ersion)h(function.)287 2438 y(Figure)19 b(2.8)f(is)h(a)f(p)q(ossible)i
(co)q(ercion)g(mo)q(del)d(for)i(an)g FK(Ob)n(er)n(on-2)5
b FN(v)n(arian)o(t)18 b(with)h(tin)o(y)m(,)224 2488 y(short,)g(in)o
(teger)f(and)f(long)g(in)o(tegers,)i(and)e(short,)i(real)e(and)g(long)g
(reals.)29 b(The)18 b(\014gure)g(is)224 2538 y(v)n(alue)h(preserving)h
(for)f(mac)o(hines)g(with)g(8,)g(16,)h(32)f(and)g(64-bit)f(in)o
(tegers,)j(and)e(single,)224 2588 y(double)c(and)f(long)g(double)g
FK(IEEE)20 b FN(\015oating)14 b(p)q(oin)o(t)g(reals.)21
b(In)14 b(this)h(case,)g(the)g(addition)f(of)224 2638
y(a)j(32-bit)f(in)o(teger)h(and)f(a)h(single)f(precision)h(\015oating)f
(p)q(oin)o(t)h(v)n(alue)f(w)o(ould)g(require)h(b)q(oth)224
2688 y(to)e(b)q(e)g(co)q(erced)h(to)f(double)f(precision.)20
b(If)14 b(the)i(v)n(alue)d(is)i(ultimately)d(assigned)j(to)f(\(sa)o
(y\))h(a)p eop
%%Page: 33 39
33 38 bop 224 274 a FL(2.5.)31 b(OPERA)m(TOR)14 b(IDENTIFICA)m(TION)690
b FN(33)201 349 y
 23484088 4275814 0 0 23484088 4275814 startTexFig
 201 349 a
%%BeginDocument: coercion3.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-48.0 97.0 translate 0.810 -0.810 scale
1.000 setlinewidth
% Polyline
n 166 99 m 159 99 159 112 7 arcto 4 {pop} repeat 159 119 232 119 7 arcto 4 {pop} repeat 239 119 239 106 7 arcto 4 {pop} repeat 239 99 166 99 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 266 99 m 259 99 259 112 7 arcto 4 {pop} repeat 259 119 332 119 7 arcto 4 {pop} repeat 339 119 339 106 7 arcto 4 {pop} repeat 339 99 266 99 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 366 99 m 359 99 359 112 7 arcto 4 {pop} repeat 359 119 432 119 7 arcto 4 {pop} repeat 439 119 439 106 7 arcto 4 {pop} repeat 439 99 366 99 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 66 99 m 59 99 59 112 7 arcto 4 {pop} repeat 59 119 132 119 7 arcto 4 {pop} repeat 139 119 139 106 7 arcto 4 {pop} repeat 139 99 66 99 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 226 39 m 219 39 219 52 7 arcto 4 {pop} repeat 219 59 292 59 7 arcto 4 {pop} repeat 299 59 299 46 7 arcto 4 {pop} repeat 299 39 226 39 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 326 39 m 319 39 319 52 7 arcto 4 {pop} repeat 319 59 392 59 7 arcto 4 {pop} repeat 399 59 399 46 7 arcto 4 {pop} repeat 399 39 326 39 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 426 39 m 419 39 419 52 7 arcto 4 {pop} repeat 419 59 492 59 7 arcto 4 {pop} repeat 499 59 499 46 7 arcto 4 {pop} repeat 499 39 426 39 7 arcto 4 {pop} repeat clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 139 110 m 159 110 l gs col-1 s gr
n 151.000 108.000 m 159.000 110.000 l 151.000 112.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 240 110 m 259 110 l gs col-1 s gr
n 251.000 108.000 m 259.000 110.000 l 251.000 112.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 340 110 m 359 110 l gs col-1 s gr
n 351.000 108.000 m 359.000 110.000 l 351.000 112.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 299 50 m 319 50 l gs col-1 s gr
n 311.000 48.000 m 319.000 50.000 l 311.000 52.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 399 50 m 419 50 l gs col-1 s gr
n 411.000 48.000 m 419.000 50.000 l 411.000 52.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 239.000 103.000 m 246.000 98.500 l
	246.000 98.500 253.000 94.000 253.000 87.000 DrawSplineSection
	253.000 87.000 253.000 80.000 228.500 77.500 DrawSplineSection
	228.500 77.500 204.000 75.000 204.000 67.000 DrawSplineSection
	204.000 67.000 204.000 59.000 211.500 56.000 DrawSplineSection
	219.000 53.000 l gs col-1 s gr
n 210.829 54.114 m 219.000 53.000 l 212.315 57.828 l gs 2 setlinejoin col-1 s gr
% Open spline
n 339.000 105.000 m 346.000 100.500 l
	346.000 100.500 353.000 96.000 353.000 89.000 DrawSplineSection
	353.000 89.000 353.000 82.000 328.500 79.500 DrawSplineSection
	328.500 79.500 304.000 77.000 304.000 69.000 DrawSplineSection
	304.000 69.000 304.000 61.000 311.500 58.000 DrawSplineSection
	319.000 55.000 l gs col-1 s gr
n 310.829 56.114 m 319.000 55.000 l 312.315 59.828 l gs 2 setlinejoin col-1 s gr
% Open spline
n 439.000 105.000 m 446.000 100.500 l
	446.000 100.500 453.000 96.000 453.000 89.000 DrawSplineSection
	453.000 89.000 453.000 82.000 428.500 79.500 DrawSplineSection
	428.500 79.500 404.000 77.000 404.000 69.000 DrawSplineSection
	404.000 69.000 404.000 61.000 411.500 58.000 DrawSplineSection
	419.000 55.000 l gs col-1 s gr
n 410.829 56.114 m 419.000 55.000 l 412.315 59.828 l gs 2 setlinejoin col-1 s gr
/Times-Italic findfont 10.00 scalefont setfont
81 112 m 
gs 1 -1 scale (TINYINT) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
176 112 m 
gs 1 -1 scale (SHORTINT) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
280 112 m 
gs 1 -1 scale (INTEGER) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
379 112 m 
gs 1 -1 scale (LONGINT) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
232 52 m 
gs 1 -1 scale (SHORTREAL) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
347 53 m 
gs 1 -1 scale (REAL) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
435 53 m 
gs 1 -1 scale (LONGREAL) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 321 711 a FN(Figure)14 b(2.8:)j(V)m(alue-preserving)d(co)q(ercion)h
(lattice,)e(for)h(an)f FK(Ob)n(er)n(on-2)6 b FN(v)n(arian)o(t)224
848 y(short)17 b(real,)e(then)i(all)d(loss)i(of)f(accuracy)h(tak)o(es)h
(place)e(at)h(the)g(assignmen)o(t,)f(rather)h(than)224
897 y(at)e(in)o(termediate)f(stages.)287 949 y(An)j(imp)q(ortan)o(t)f
(c)o(haracteristics)j(of)e(suc)o(h)i(v)n(alue-preserving)f(t)o(yp)q(es)
g(lattices)g(is)f(that)224 999 y(con)o(v)o(ersions)e(ma)o(y)e(b)q(e)i
(done)g(in)f(one)h(or)f(more)f(steps)j(without)e(a\013ecting)h(the)g
(\014nal)f(result.)224 1049 y(Th)o(us)h(if)f(a)h(8-bit)e(in)o(teger)j
(needs)g(to)e(b)q(e)h(con)o(v)o(erted)h(to)f(a)f(long)g(double,)g(and)g
(the)i(mac)o(hine)224 1099 y(arc)o(hitecture)i(can)d(do)g(this)h
(transformation)d(in)i(one)h(step,)f(then)h(w)o(e)g(shall)f(get)g(the)h
(same)224 1148 y(result)g(as)f(if)f(w)o(e)h(follo)o(w)e(the)j(lattice)e
(step)i(b)o(y)f(step.)287 1200 y(The)d FM(C)j FN(t)o(yp)q(e)e(co)q
(ercion)g(graph)f(in)g(\014gure)h(2.6)e(is)h(a)g(lattice)g(with)g(resp)
q(ect)i(to)e(the)h(partial)224 1250 y(order)k(induced)f(b)o(y)f(the)h
(p)q(ossible)g(co)q(ercions.)21 b(Ho)o(w)o(ev)o(er)15
b(these)h(co)q(ercions)g(are)f(not)f(v)n(alue)224 1300
y(preserving.)224 1418 y FO(Resolution)f(of)i(o)o(v)o(erloading)224
1498 y FN(In)g(all)f(of)g(the)i(cases)g(considered)g(so)f(far,)g(the)g
(need)h(for)f(con)o(v)o(ersions)g(is)g(disco)o(v)o(ered)h(as)f(a)224
1548 y(result)f(of)f(lo)q(cal)f(attribute)i(ev)n(aluation.)i(Ho)o(w)o
(ev)o(er,)e(there)g(are)g(cases)g(where)h(the)e(need)i(for)224
1598 y(co)q(ercions,)f(or)e(ev)o(en)h(the)f(meaning)f(of)g(an)h(op)q
(erator,)h(is)f(only)f(apparen)o(t)i(after)f(attribution)224
1648 y(of)h(the)g(complete)f(tree.)19 b(This)13 b(happ)q(ens)g(in)g
(language)f FK(A)n(da)s FN(,)h(when)g(o)o(v)o(erloaded)f(functions)224
1698 y(and)g(op)q(erators)h(are)g(declared.)18 b(Ho)o(w)12
b(are)g(w)o(e)g(to)g(iden)o(tify)f(the)i(op)q(erators)g(in)e(suc)o(h)i
(a)f(case?)224 1747 y(W)m(e)i(ha)o(v)o(e)g(someho)o(w)e(to)i(\014nd)g
(a)g(unique,)g(self-consisten)o(t)h(iden)o(ti\014cation)e(whic)o(h)h
(matc)o(hes)224 1797 y(op)q(erand)h(and)f(result)g(t)o(yp)q(es,)g(p)q
(ossibly)g(with)g(the)g(assistance)h(of)e(implicit)f(co)q(ercions.)272
1859 y
 21247508 11511808 0 0 21247508 11511808 startTexFig
 272 1859 a
%%BeginDocument: coercion4.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-105.0 248.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Ellipse
n 211 129 15 15 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 171 189 15 15 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 131 249 15 15 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 211 249 15 15 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 251 189 15 15 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 420 129 15 15 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 380 189 15 15 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 340 249 15 15 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 460 189 15 15 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 420 249 15 15 0 360 DrawEllipse gs col-1 s gr
0.500 setlinewidth
% Polyline
n 180 81 m 204 117 l gs col-1 s gr
n 201.226 109.234 m 204.000 117.000 l 197.898 111.453 l gs 2 setlinejoin col-1 s gr
% Polyline
n 204 142 m 179 175 l gs col-1 s gr
n 185.425 169.831 m 179.000 175.000 l 182.237 167.416 l gs 2 setlinejoin col-1 s gr
% Polyline
n 162 202 m 138 235 l gs col-1 s gr
n 144.323 229.706 m 138.000 235.000 l 141.088 227.354 l gs 2 setlinejoin col-1 s gr
% Polyline
n 181 200 m 204 236 l gs col-1 s gr
n 201.378 228.182 m 204.000 236.000 l 198.007 230.335 l gs 2 setlinejoin col-1 s gr
% Polyline
n 220 141 m 244 177 l gs col-1 s gr
n 241.226 169.234 m 244.000 177.000 l 237.898 171.453 l gs 2 setlinejoin col-1 s gr
% Polyline
n 389 81 m 413 117 l gs col-1 s gr
n 410.226 109.234 m 413.000 117.000 l 406.898 111.453 l gs 2 setlinejoin col-1 s gr
% Polyline
n 413 142 m 388 175 l gs col-1 s gr
n 394.425 169.831 m 388.000 175.000 l 391.237 167.416 l gs 2 setlinejoin col-1 s gr
% Polyline
n 429 143 m 453 176 l gs col-1 s gr
n 449.912 168.354 m 453.000 176.000 l 446.677 170.706 l gs 2 setlinejoin col-1 s gr
% Polyline
n 326 204 m 319 204 319 217 7 arcto 4 {pop} repeat 319 224 352 224 7 arcto 4 {pop} repeat 359 224 359 211 7 arcto 4 {pop} repeat 359 204 326 204 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 406 203 m 399 203 399 216 7 arcto 4 {pop} repeat 399 223 432 223 7 arcto 4 {pop} repeat 439 223 439 210 7 arcto 4 {pop} repeat 439 203 406 203 7 arcto 4 {pop} repeat clp gs col-1 s gr
n 422.000 227.000 m 420.000 235.000 l 418.000 227.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 420 235 m 420 223 l gs col-1 s gr
n 343.000 227.000 m 341.000 235.000 l 339.000 227.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 341 235 m 341 224 l gs col-1 s gr
% Open spline
n 386.000 204.000 m 386.000 209.500 l
	386.000 209.500 386.000 215.000 392.500 215.000 DrawSplineSection
	399.000 215.000 l gs col-1 s gr
n 391.000 213.000 m 399.000 215.000 l 391.000 217.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 373.000 203.000 m 373.000 209.000 l
	373.000 209.000 373.000 215.000 366.000 215.000 DrawSplineSection
	359.000 215.000 l gs col-1 s gr
n 367.000 217.000 m 359.000 215.000 l 367.000 213.000 l gs 2 setlinejoin col-1 s gr
/Times-Italic findfont 12.00 scalefont setfont
247 216 m 
gs 1 -1 scale (d) col-1 show gr
/Times-Italic findfont 12.00 scalefont setfont
209 274 m 
gs 1 -1 scale (c) col-1 show gr
/Times-Italic findfont 12.00 scalefont setfont
127 275 m 
gs 1 -1 scale (b) col-1 show gr
/Times-Italic findfont 12.00 scalefont setfont
168 192 m 
gs 1 -1 scale (F) col-1 show gr
/Times-Italic findfont 12.00 scalefont setfont
207 133 m 
gs 1 -1 scale (G) col-1 show gr
/Times-Italic findfont 12.00 scalefont setfont
456 216 m 
gs 1 -1 scale (d) col-1 show gr
/Times-Italic findfont 12.00 scalefont setfont
418 274 m 
gs 1 -1 scale (c) col-1 show gr
/Times-Italic findfont 12.00 scalefont setfont
336 275 m 
gs 1 -1 scale (b) col-1 show gr
/Times-Italic findfont 12.00 scalefont setfont
377 192 m 
gs 1 -1 scale (F) col-1 show gr
/Times-Italic findfont 12.00 scalefont setfont
416 133 m 
gs 1 -1 scale (G) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
123 247 m 
gs 1 -1 scale (rval) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
203 247 m 
gs 1 -1 scale (rval) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
243 187 m 
gs 1 -1 scale (rval) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
332 246 m 
gs 1 -1 scale (rval) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
412 246 m 
gs 1 -1 scale (rval) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
452 187 m 
gs 1 -1 scale (rval) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
419 255 m 
gs 1 -1 scale (I) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
339 255 m 
gs 1 -1 scale (I) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
210 256 m 
gs 1 -1 scale (I) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
130 256 m 
gs 1 -1 scale (I) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
248 197 m 
gs 1 -1 scale (R) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
457 198 m 
gs 1 -1 scale (R) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
330 217 m 
gs 1 -1 scale (ItoR) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
411 216 m 
gs 1 -1 scale (ItoR) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 344 2679 a FN(Figure)i(2.9:)j FK(AST)i FN(with)13 b(o)o(v)o(erloaded)h
(op)q(erator,)g(and)g(resolv)o(ed)g(co)q(de)h(tree)p
eop
%%Page: 34 40
34 39 bop 224 274 a FN(34)567 b FL(CHAPTER)14 b(2.)32
b(A)m(TTRIBUTE)13 b(EV)-5 b(ALUA)m(TION)287 390 y FN(Supp)q(ose)17
b(that)g(w)o(e)g(ha)o(v)o(e)g(a)f(program)f(whic)o(h)i(declares)h(a)e
(binary)h(op)q(erator)g FM(G)p FN(,)f(and)224 440 y(t)o(w)o(o)e
(di\013eren)o(t)h(op)q(erators)f(named)f FM(F)6 b FN(,)13
b(with)h(signatures)769 534 y FM(G)42 b FN(:)f FM(R)9
b Ft(\002)g FM(T)1003 540 y Fz(1)1034 534 y Ft(!)i FM(B)770
597 y(F)47 b FN(:)41 b FM(R)9 b Ft(\002)g FM(R)j Ft(!)f
FM(T)1100 603 y Fz(1)770 659 y FM(F)47 b FN(:)41 b FM(I)12
b Ft(\002)e FM(I)15 b Ft(!)c FM(T)1079 665 y Fz(2)224
815 y FN(where)18 b FM(R)p FN(,)e FM(I)j FN(and)d FM(B)j
FN(are)d(reals,)h(in)o(tegers)g(and)f(Bo)q(olean)g(resp)q(ectiv)o(ely)m
(,)h(and)f FM(T)1505 821 y Fz(1)1540 815 y FN(and)f FM(T)1646
821 y Fz(2)224 865 y FN(are)21 b(some)f(user)h(de\014ned)g(t)o(yp)q
(es.)39 b(The)20 b FK(AST)26 b FN(in)20 b(\014gure)h(2.9)e(m)o(ust)g(b)
q(e)i(attributed)g(as)224 915 y(sho)o(wn)c(on)e(the)i(righ)o(t)f(of)f
(the)i(\014gure,)g(since)g(this)f(is)g(the)h(only)e(consisten)o(t,)i(t)
o(yp)q(e-correct)224 964 y(in)o(terpretation)e(of)e(the)h(tree.)287
1016 y(All)e(o)o(v)o(erloading)f(problems)h(of)g(this)h(kind)f(ma)o(y)f
(b)q(e)j(solv)o(ed)e(in)h(cases)h(where)g(the)f(co)q(er-)224
1065 y(cion)f(graph)f(is)g(a)h(lattice,)f(b)o(y)g(a)h(t)o(w)o(o-pass)f
(attribution.)17 b(W)m(e)11 b(tra)o(v)o(erse)i(the)f(tree)g(t)o(wice.)
18 b(On)224 1115 y(the)c(\014rst)g(pass)g(w)o(e)g(compute)f(a)g(syn)o
(thesised)i(attribute)f(whic)o(h)f(is)g(the)h(set)g(of)f(all)f(p)q
(ossible)224 1165 y(t)o(yp)q(es)18 b(whic)o(h)g(the)f(subtree)i(migh)o
(t)c(ha)o(v)o(e,)j(as)f(a)g(result)h(of)e(the)i(allo)o(w)o(ed)e(co)q
(ercions,)i(and)224 1215 y(all)e(the)i(matc)o(hing)d(c)o(hoices)j(of)e
(op)q(erators.)29 b(If)17 b(w)o(e)g(reac)o(h)h(the)f(ro)q(ot)g(of)g
(the)h(tree)g(with)f(a)224 1265 y(set)g(con)o(taining)e(more)g(than)h
(one)g(t)o(yp)q(e,)g(then)h(the)f(tree)h(is)f(am)o(biguous.)22
b(If)15 b(the)i FK(p)n(ossible)224 1314 y(typ)n(e)d(set)j
FN(is)12 b(a)g(singleton,)g(then)i(w)o(e)e(propagate)h(an)f(inherited,)
h FK(demande)n(d)i(typ)n(e)h FN(attribute)224 1364 y(do)o(wn)e(the)g
(tree,)g(so)f(as)h(to)f(iden)o(tify)g(eac)o(h)h(op)q(erator.)k(In)c
(the)g(example)e(in)h(the)h(\014gure,)g(the)224 1414
y(demanded)g(t)o(yp)q(es)g(of)f(the)i(t)o(w)o(o)e(op)q(erands)i(of)e
FM(G)g FN(are)h FM(T)1092 1420 y Fz(1)1125 1414 y FN(and)f
FM(R)p FN(,)h(th)o(us)g(selecting)g(the)h(\014rst)224
1464 y(of)h(the)h(t)o(w)o(o)e FM(F)22 b FN(functions.)i(This)16
b(c)o(hoice)h(of)e(meaning)f(for)i FM(F)21 b FN(mak)o(es)15
b FM(R)h FN(the)h(demanded)224 1514 y(t)o(yp)q(es)e(of)e(the)i(t)o(w)o
(o)e(op)q(erands)i(of)e FM(F)6 b FN(,)13 b(necessitating)i(the)g(co)q
(ercions)g(sho)o(wn)f(on)f(the)i(righ)o(t.)287 1565 y(This)e(t)o(w)o
(o-pass)g(attribution)g(can)g(b)q(e)h(used)g(to)g(solv)o(e)f(problems)f
(of)h(the)h(same)e(general)224 1615 y(kind,)20 b(in)f(whic)o(h)g(m)o
(ultiple)e(in)o(terpretations)j(are)g(p)q(ossible.)34
b(In)19 b(suc)o(h)h(cases,)i(w)o(e)d(m)o(ust)224 1664
y(ha)o(v)o(e)14 b(a)g FK(c)n(ost)g(function)k FN(asso)q(ciated)c(with)g
(eac)o(h)g(rewriting)g(step,)g(and)g(w)o(e)g(seek)h(to)f(c)o(ho)q(ose)
224 1714 y(the)19 b(lo)o(w)o(est)f(cost)g(rewriting)g(of)f(the)i(tree.)
31 b(This)18 b(least-cost)g(tree)i(rewriting)d(tec)o(hnique)224
1764 y(is)e(seldom)f(necessary)j(for)e(op)q(erator)g(iden)o
(ti\014cation,)f(but)h(forms)f(the)i(basis)f(of)f(the)h(most)224
1814 y(p)q(o)o(w)o(erful)i(metho)q(d)g(of)g(instruction)g(selection)i
(curren)o(tly)f(kno)o(wn.)28 b(Chapter)18 b(6)f(has)h(the)224
1864 y(details.)354 1849 y Fz(5)287 1915 y FN(All)8 b(of)h(the)h
(computations)e(necessary)k(for)d(op)q(erator)h(iden)o(ti\014cation)f
(ma)o(y)e(b)q(e)j(automat-)224 1965 y(ically)k(pro)q(duced)i(from)e(sp)
q(eci\014cations.)22 b(Suc)o(h)16 b(a)f(to)q(ol)f(forms)g(part)h(of)f
(the)i FK(Eli)j FN(compiler)224 2014 y(writing)14 b(en)o(vironmen)o(t.)
224 2159 y FI(2.6)67 b(Rewriting)23 b(the)g(tree)224
2252 y FN(As)d(w)o(ell)e(as)h(attributing)g(the)g(tree,)j(it)c(is)h
(usually)f(necessary)k(to)c(rewrite)i(the)g(tree)g(to)224
2302 y(tak)o(e)e(in)o(to)e(accoun)o(t)i(the)f(result)h(of)f(ev)n
(aluation.)26 b(F)m(or)17 b(example,)f(in)h(languages)f(suc)o(h)i(as)
224 2352 y FK(Mo)n(dula-2)7 b FN(,)13 b(it)g(is)g(normal)e(to)j(fold)e
(the)i(ev)n(aluation)e(of)h(constan)o(t)h(expressions)h(at)e(compile)
224 2402 y(time.)25 b(In)17 b(suc)o(h)g(cases,)h(a)e(p)q(ossibly)g
(complex)g(expression)h(tree)h(ma)o(y)d(b)q(e)i(replaced)g(b)o(y)g(a)
224 2451 y(single,)c(literal)h(leaf-no)q(de.)p 224 2491
577 2 v 271 2518 a Fy(5)288 2530 y Fx(If)g(w)o(e)g(lo)q(ok)g(at)f
(\014gure)g(2.7)h(from)f(this)g(new)h(p)q(ersp)q(ectiv)o(e,)e(w)o(e)j
(see)e(that)g(there)g(are)h(t)o(w)o(o)g(consisten)o(t)224
2569 y(op)q(erator)h(iden)o(ti\014cation)o(s.)30 b(W)m(e)17
b(could)f(ha)o(v)o(e)g(iden)o(ti\014ed)f(b)q(oth)h(of)h(the)f
(additions)f(as)i(\015oating)e(p)q(oin)o(t)224 2609 y(double)c(op)q
(erations,)f(and)i(co)q(erced)f(the)h(v)n(alues)f(of)h
Fr(b)h Fx(and)f Fr(c)h Fx(directly)e(to)h(double.)17
b(As)d(it)e(happ)q(ens,)f(only)224 2648 y(the)k(iden)o(ti\014cati)o(on)
d(giv)o(en)i(in)h(the)f(\014gure)g(is)h(consisten)o(t)e(with)i(the)f
Fr(C)k Fx(standard,)13 b(whic)o(h)i(sp)q(eci\014es)e(the)224
2688 y(usual)e(binary)f(con)o(v)o(ersions)e(on)j(only)g(one)f(op)q
(erand)g(of)h(a)g(binary)f(op)q(erator.)p eop
%%Page: 35 41
35 40 bop 224 274 a FL(2.6.)31 b(REWRITING)13 b(THE)h(TREE)813
b FN(35)287 390 y(It)11 b(is)h(p)q(ossible)g(to)f(adopt)g(di\013ering)h
(approac)o(hes)g(to)f(this)h(rewriting.)17 b(A)o(t)12
b(one)g(extreme,)224 440 y(some)k(sc)o(ho)q(ols)g(of)g(compiler)f
(construction)i(suggest)g(that)f(a)g(completely)f(new)i(and)f(sep-)224
490 y(arate)h FK(c)n(o)n(de-tr)n(e)n(e)h FN(b)q(e)f(constructed.)26
b(A)o(t)16 b(the)h(other)f(extreme,)g(w)o(e)g(migh)o(t)e(generate)j(co)
q(de)224 540 y(b)o(y)d(tra)o(v)o(ersing)h(the)f(original)f
FK(AST)6 b FN(,)13 b(and)h(restrict)h(ourselv)o(es)g(to)f(simply)f
(annotating)g(the)224 590 y FK(AST)21 b FN(in)14 b(order)i(to)f
(facilitate)f(this.)21 b(In)15 b(the)h(examples)e(giv)o(en)g(in)h(this)
g(c)o(hapter,)g(w)o(e)g(ha)o(v)o(e)224 640 y(assumed)j(that)f
(additional)f(no)q(des)j(will)d(b)q(e)i(in)o(tro)q(duced)g(in)o(to)f
(the)h FK(AST)23 b FN(as)18 b(necessary)m(,)224 689 y(and)c(that)g
(whole)g(trees)h(ma)o(y)d(b)q(e)j(replaced)f(b)o(y)g(equiv)n(alen)o(t)f
(single)h(no)q(des.)287 749 y(In)g(either)h(case,)g(the)f(ob)r(jectiv)o
(e)h(of)f(the)g(rewriting)h(step)g(is)f(to)g(pro)q(duce)h(a)f(tree)h
(whic)o(h)224 799 y(mak)o(es)j(the)i(co)q(de-generating)g(tra)o(v)o
(ersal)f(as)g(simple)f(as)h(p)q(ossible.)34 b(W)m(e)19
b(ma)o(y)e(think)i(of)224 848 y(the)d(rewriting)e(as)h(some)e(kind)i
(of)e(transformation)g(in)o(to)h(a)g(canonical)g(form.)k(Tw)o(o)d
(small)224 898 y(examples)e(from)f FK(Mo)n(dula-2)21
b FN(ma)o(y)12 b(help)i(to)f(mak)o(e)g(this)h(clear.)224
1057 y FO(Making)i(standard)e(functions)e(canonical)224
1151 y FN(Some)f(of)g(the)i(built-in)d(pro)q(cedures)k(and)e(functions)
g(of)f FK(Mo)n(dula-2)18 b FN(ha)o(v)o(e)12 b(alternate)g(forms.)224
1201 y(F)m(or)e(example)g FK(INC)16 b FN(and)10 b FK(DEC)16
b FN(ha)o(v)o(e)11 b(one-parameter)f(and)g(t)o(w)o(o)g(parameter)g
(forms.)16 b(Since)224 1251 y(w)o(e)j(m)o(ust)e(c)o(hec)o(k)i(the)f
(actual)g(parameters)g(for)g(correctness)j(during)c(t)o(yp)q(e)i(c)o
(hec)o(king,)g(it)224 1301 y(simpli\014es)12 b(the)i(subsequen)o(t)h
(co)q(de)g(emission)d(tra)o(v)o(ersal)h(if)g(the)h(single)f(parameter)g
(form)e(is)224 1350 y(transformed)j(in)o(to)f(the)h(more)f(general)h(t)
o(w)o(o-parameter)f(form.)287 1410 y(Essen)o(tially)d(the)h(same)e
(considerations)i(apply)f(in)g(the)h(case)h(of)d(obsolete)i(syn)o(tax)g
(forms)224 1460 y(whic)o(h)19 b(are)h(replaced)f(b)o(y)g(some)f
(preferred)j(form.)31 b(An)20 b(example)d(in)i FK(Mo)n(dula-2)25
b FN(is)19 b(the)224 1509 y(transformation)f(of)h(the)h(obsolete)g
FK(typ)n(e)g(tr)n(ansfer)f(function)24 b FN(in)o(to)18
b(the)j(preferred)g(form)224 1559 y(using)14 b FK(SYSTEM.CAST)5
b FN(.)287 1619 y(Syn)o(tactically)m(,)12 b(the)j(built-in)f(functions)
g(and)g(pro)q(cedures)j(app)q(ear)e(as)f(ordinary)g(pro-)224
1668 y(cedure)20 b(in)o(v)o(o)q(cations.)31 b(The)19
b(iden)o(tit)o(y)e(of)h(the)h(no)q(des)g(is)f(not)h(kno)o(wn)e(un)o
(til)h(after)g(name)224 1718 y(binding)f(has)h(b)q(een)h(completed.)30
b(Ho)o(w)o(ev)o(er,)19 b(since)f(these)i(pro)q(cedures)g(usually)d(do)g
(not)224 1768 y(giv)o(e)f(rise)h(to)f(a)g(pro)q(cedure)j(call)c(at)h
(run)o(time,)g(it)g(mak)o(es)f(sense)j(to)e(replace)h(the)g(original)
224 1818 y(pro)q(cedure-call)f(no)q(des)f(b)o(y)g(another)g(no)q(de)g
(t)o(yp)q(e.)21 b(Since)15 b(w)o(e)g(ha)o(v)o(e)f(to)h(mak)o(e)e(the)i
(separa-)224 1868 y(tion)h(b)q(et)o(w)o(een)h(built-in)e(pro)q(cedures)
j(and)e(others)h(during)e(static)h(seman)o(tic)f(analysis,)h(it)224
1917 y(mak)o(es)d(sense)j(to)d(not)h(ha)o(v)o(e)g(to)g(do)f(so)h(again)
f(during)h(co)q(de)g(generation.)224 2076 y FO(Remo)o(ving)g(syn)o
(tactic)g(sugar)224 2170 y FN(The)g(replacemen)o(t)g(of)f(the)h(single)
f(parameter)g(form)f(of)g FK(INC)20 b FN(b)o(y)13 b(the)h(more)e
(general)i(t)o(w)o(o-)224 2220 y(parameter)c(form)e(ma)o(y)f(b)q(e)k
(view)o(ed)e(as)h(the)g(remo)o(v)n(al)e(of)h(a)g(la)o(y)o(er)h(of)f
(syn)o(tactic)h(sugar,)g(placed)224 2270 y(in)18 b(the)g(language)f
(for)g(con)o(v)o(enience)i(without)f(adding)f(expressivit)o(y)m(.)29
b(Other)19 b(examples)224 2320 y(exist)c(also.)287 2379
y(All)e(of)h(the)g(explicit)g(t)o(yp)q(e)h(con)o(v)o(ersions)g(in)f
FK(ISO)h(Mo)n(dula-2)f FN(are)h(sp)q(ecial)g(cases)g(of)f(the)224
2429 y FK(V)l(AL)i FN(function.)25 b(Th)o(us)16 b(w)o(e)h(ma)o(y)d
(transform)h(all)g(these)j(sp)q(ecial)e(cases)i(a)o(w)o(a)o(y)m(,)d
(and)h(lea)o(v)o(e)224 2479 y(only)e(a)f(single,)g(parameterized)h(co)q
(ercion)h(function)f(in)f(the)h(tree)i(for)d(co)q(de)i(generation.)287
2538 y(The)k(transformation)d(of)i(m)o(ulti-dim)o(ensional)c(arra)o(y)
19 b(t)o(yp)q(e)g(declarations)f(from)f(the)224 2588
y(comma-separated)f(list)g(form)f(to)i(the)h FK(ARRA)m(Y)g(OF)f(ARRA)m
(Y)h(OF)k FN(form)16 b(also)g(falls)g(in)224 2638 y(the)h(category)e
(of)g(remo)o(v)n(al)f(of)h(syn)o(tactic)h(sugar.)23 b(In)15
b(this)h(case)g(ho)o(w)o(ev)o(er)g(w)o(e)g(can)g(create)224
2688 y(the)f(canonical)e(form)f(directly)i(during)g(tree)h
(construction.)p eop
%%Page: 36 42
36 41 bop 224 274 a FN(36)567 b FL(CHAPTER)14 b(2.)32
b(A)m(TTRIBUTE)13 b(EV)-5 b(ALUA)m(TION)224 390 y FI(2.7)67
b(Finding)24 b(out)f(more)224 481 y FG(<<)f(citations)e(for)h(idl,)g
(DIS10514,)f(Eli,)h(Oberon2,)f(etc)h(>>)224 619 y FI(2.8)67
b(Exercises)254 710 y FN(2.1)254 793 y(2.2)p eop
%%Page: 37 43
37 42 bop 224 702 a FJ(Chapter)32 b(3)224 910 y FP(Run)m(time)37
b(Organization)224 1151 y FI(3.1)67 b(The)22 b(run)n(time)i(en)n
(vironmen)n(t)224 1242 y FN(In)12 b(almost)e(all)g(cases,)k(our)d
(compilers)g(do)g(not)h(generate)h(all)e(of)g(the)h(co)q(de)h(whic)o(h)
e(is)h(needed)224 1292 y(to)e(implemen)o(t)d(an)o(y)i(particular)g
(source)i(program.)k(Except)c(for)f(some)e(sp)q(ecialized)j(em)o(b)q
(ed-)224 1342 y(ded)i(systems,)f(the)h(link)o(ed)e(ob)r(ject)i(co)q(de)
g(do)q(es)f(not)g(in)o(terface)h(to)f(the)g(bare)h(hardw)o(are,)f(but)
224 1392 y(rather)17 b(to)f(a)f(virtual)g(mac)o(hine)g(consisting)h(of)
f(the)i(hardw)o(are,)f(together)h(with)e(facilities)224
1441 y(pro)o(vided)f(b)o(y)g(an)f(op)q(erating)h(system.)287
1492 y(It)9 b(is)h(rather)h(di\016cult)e(to)g(generalize)h(ab)q(out)g
(the)g(run)o(time)f(en)o(vironmen)o(t)f(within)h(whic)o(h)224
1541 y(our)18 b(programs)e(are)h(exp)q(ected)j(to)d(w)o(ork,)g(since)h
(there)h(is)e(a)g(great)g(div)o(ersit)o(y)m(.)28 b(Di\013eren)o(t)224
1591 y(op)q(erating)11 b(systems)h(pro)o(vide)e(di\013eren)o(t)i
(facilities,)f(and)f(di\013eren)o(t)i(lev)o(els)g(of)e(program)f(pro-)
224 1641 y(tection,)k(and)f(the)h(facilities)e(required)i(to)f(supp)q
(ort)h(di\013eren)o(t)g(languages)f(v)n(ary)f(somewhat)224
1691 y(also.)28 b(In)18 b(this)f(c)o(hapter,)i(in)e(order)h(to)f(b)q(e)
h(concrete,)h(w)o(e)f(shall)f(fo)q(cus)g(on)g(a)g(t)o(ypical)g(en-)224
1741 y(vironmen)o(t)f(whic)o(h)h(has)g(an)g(underlying)g(op)q(erating)f
(system)h(with)g(facilities)f(similar)e(to)224 1790 y
FK(UNIX)7 b FN(.)12 b(Except)i(for)e(explicit)h(digressions,)g(w)o(e)g
(shall)f(also)g(concen)o(trate)i(on)f(the)g(facilities)224
1840 y(required)i(for)f(the)h(supp)q(ort)g(of)e(pro)q(cedural)i
(languages)f(of)f(the)i FK(ALGOL)f FN(family)l(,)d(that)j(is,)224
1890 y FK(Pasc)n(al,)h(Mo)n(dula-2,)g(A)n(da,)g(C)20
b FN(and)13 b(related)i FK(obje)n(ct)g(oriente)n(d)f(languages)p
FN(.)287 1940 y(The)c(op)q(erating)g(system)g(t)o(ypically)e(pro)o
(vides)j(facilities)e(for)g(input)h(and)g(output,)h(access)224
1990 y(to)h(some)f(kind)h(of)f(\014le)h(system,)g(and)g(p)q(erhaps)h
(most)e(imp)q(ortan)o(t,)f(resource)k(managemen)o(t.)224
2040 y(The)i(op)q(erating)f(system)g(is)g(usually)f(resp)q(onsible)i
(for)f(protecting)h(the)f(v)n(arious)g(memory)224 2090
y(segmen)o(ts)h(from)e(in)o(v)n(alid)g(access,)k(and)e(for)f
(protecting)i(the)f(memory)d(b)q(elonging)i(to)h(one)224
2139 y(pro)q(cess)g(from)c(other)j(pro)q(cesses.)287
2189 y(Except)d(for)g(a)f(few)g(degenerate)j(systems,)d(suc)o(h)i(as)e
FK(MS-DOS)5 b FN(,)12 b(the)g(op)q(erating)g(system)224
2239 y(is)h(able)g(to)g(exercise)h(con)o(trol)f(o)o(v)o(er)g(resources)
i(with)e(the)g(help)g(of)f(hardw)o(are)i(mec)o(hanisms.)224
2289 y(The)f(most)e(common)e(mec)o(hanism)h(is)i(the)h(implemen)o
(tation)c(of)j(a)f(m)o(ulti-lev)o(el)f(mac)o(hine)h(in)224
2339 y(the)k(hardw)o(are.)21 b(A)14 b(t)o(ypical)g(suc)o(h)h(mac)o
(hine)e(has)i(m)o(ultiple)d(op)q(erating)i(states,)h
FK(user)g(state)224 2389 y FN(and)f(one)f(or)g(more)g
FK(privile)n(ge)n(d)g(states)p FN(.)18 b(Certain)13 b(instructions)i
(ma)o(y)c(only)i(b)q(e)g(executed)j(in)224 2438 y(privileged)d(states,)
h(and)g(cause)g(a)f(trap)g(to)h(b)q(e)f(tak)o(en)h(if)e(an)h(attempt)g
(is)g(made)f(to)h(execute)224 2488 y(them)18 b(in)g(user)h(state.)32
b(F)m(urthermore)18 b(the)h(mapping)d(b)q(et)o(w)o(een)k(virtual)d
(addresses)j(and)224 2538 y(ph)o(ysical)15 b(addresses)j(is)d(mo)q
(di\014ed)f(during)h(the)h(c)o(hange)g(of)f(state,)h(so)f(that)h(it)f
(is)g(p)q(ossible)224 2588 y(to)i(ensure)h(that)e(memory)e(b)q
(elonging)i(to)g(the)i(op)q(erating)e(system)g(is)h(inaccessible)g
(from)224 2638 y(co)q(de)h(executing)f(in)g(user)h(state.)27
b(Suc)o(h)17 b(systems)g(can)g(pro)o(vide)f(protection)i(for)e(v)n
(arious)224 2688 y(regions)f(of)g(memory)m(,)d(usually)i(on)g(a)h
FK(p)n(er-p)n(age)j FN(basis,)d(where)h(a)f(page)g(is)f(of)h(the)g
(order)h(of)924 2793 y(37)p eop
%%Page: 38 44
38 43 bop 224 274 a FN(38)562 b FL(CHAPTER)14 b(3.)32
b(R)o(UNTIME)13 b(OR)o(GANIZA)m(TION)224 390 y FN(512)j(to)g(8192)f(b)o
(ytes,)i(dep)q(ending)g(on)f(the)g(particular)g(system.)25
b(P)o(ages)17 b(ma)o(y)d(ha)o(v)o(e)i FK(r)n(e)n(ad,)224
440 y(write)g FN(and)e FK(exe)n(cute)j FN(p)q(ermissions.)287
491 y(The)10 b(nature)g(of)f(the)h(resource)i(managemen)o(t)7
b(pro)o(vided)i(b)o(y)h(the)g(run)o(time)e(en)o(vironmen)o(t)224
541 y(is)13 b(an)f(imp)q(ortan)o(t)f(parameter)h(of)f(our)i(co)q(de)g
(generation,)g(ho)o(w)o(ev)o(er)f(a)g(detailed)h(discussion)224
591 y(of)k(this)g(sub)r(ject)h(b)q(elongs)f(prop)q(erly)g(in)g(a)f
(text)i(on)e(op)q(erating)h(systems)g(theory)m(,)g(rather)224
641 y(than)d(a)g(b)q(o)q(ok)f(on)h(co)q(de)h(generation.)224
765 y FH(3.1.1)56 b(Memory)16 b(organization)224 844
y FN(Programs)g(compiled)f(from)f(sources)k(in)e(pro)q(cedural)h
(languages)f(divide)g(their)h(memory)224 894 y(use)d(within)e(a)g(n)o
(um)o(b)q(er)g(of)g(disjoin)o(t)g(categories.)18 b(These)c(separate)g
(categories)f(are)g(c)o(hosen)224 943 y(on)k(the)g(basis)f(of)g(the)h
(required)g(lifetime)e(of)h(the)h(data,)f(and)g(the)h(required)h
(visibilit)o(y)c(of)224 993 y(the)h(data)e(ob)r(ject.)287
1044 y FK(UNIX)23 b FN(systems)17 b(pro)o(vide)g(four)f(di\013eren)o(t)
i FK(memory)g(se)n(gments)i FN(as)d(they)h(are)f(called.)224
1094 y(The)10 b FK(TEXT)h(se)n(gment)i FN(is)d(read-only)m(,)f(and)g
(con)o(tains)g(the)h(co)q(de)h(of)e(the)h(user)g(program.)15
b(This)224 1144 y(protection)h(is)e(imp)q(ortan)o(t,)f(as)i(it)f(prev)o
(en)o(ts)i(erroneous)g(data)f(accesses)i(from)c(corrupting)224
1194 y(the)i(co)q(de)g(during)e(its)h(execution.)287
1245 y(The)19 b FK(D)o(A)m(T)m(A)f(se)n(gment)23 b FN(con)o(tains)18
b(data,)h(the)g(con)o(ten)o(t)g(of)f(whic)o(h)g(is)g(sp)q(eci\014ed)i
(prior)224 1295 y(to)e(the)h(start)g(of)e(the)i(program.)29
b(This)18 b(segmen)o(t)f(is)h(therefore)i(suitable)e(for)f(constan)o
(ts)224 1345 y(and)c(for)g(initialized)f(data.)17 b(In)d(some)e
FK(UNIX)19 b FN(implemen)o(tations)10 b(there)15 b(are)e(t)o(w)o(o)g
(separate)224 1394 y(data)i(segmen)o(ts,)g(one)g(of)f(whic)o(h)h(has)g
(a)g(read-only)f(attribute,)i(and)e(is)h(protected)i(b)o(y)e(the)224
1444 y(hardw)o(are's)20 b(memory)d(managemen)o(t,)h(and)h(another)h
(with)f(the)h(read-write)g(attribute,)224 1494 y(whic)o(h)11
b(is)g(used)h(for)f(initialized)f(data.)17 b(It)11 b(is)g(helpful)f(if)
h(our)g(co)q(de)h(generators)g(can)f(preserv)o(e)224
1544 y(the)22 b(distinction)e(b)q(et)o(w)o(een)h(read-only)g(and)f
(read-write)h(data)f(declarations)h(for)f(these)224 1594
y(cases.)287 1645 y(The)e FK(BSS)h(se)n(gment)j FN(is)c(used)h(for)e
(uninitialized)g(data,)h(and)g(is)f(usually)g(able)h(to)g(b)q(e)224
1695 y(v)n(aried)f(in)g(size)i(during)e(program)f(execution.)29
b(This)17 b(is)h(a)f(read-write)h(segmen)o(t.)28 b(Most)224
1745 y(systems)13 b(clear)g(the)f(allo)q(cated)g(memory)e(to)i(all)f
(zero)i(b)o(ytes,)g(during)f(the)h(allo)q(cation.)j(The)224
1794 y(name,)i(for)f(obscure)i(reasons,)h(is)d(an)h(initialism)c(for)k
FK(Blo)n(ck)g(Starte)n(d)h(by)f(Symb)n(ol)p FN(.)30 b(This)224
1844 y(segmen)o(t)19 b(is)g(used)g(for)g(v)n(ariables)f(whic)o(h)h(are)
g(of)f(static)i(exten)o(t,)g(and)f(is)g(also)f(used)i(for)224
1894 y(the)d FK(he)n(ap)p FN(,)e(for)h(languages)f(whic)o(h)g(pro)o
(vide)g(for)g(dynamically)e(allo)q(cated)i(ob)r(jects.)24
b(Heap)224 1944 y(managemen)o(t)12 b(is)h(not)h(treated)h(here.)287
1995 y(Finally)m(,)k(the)i FK(ST)m(A)o(CK)f(se)n(gment)25
b FN(con)o(tains)20 b(uninitialized)f(data,)i(and)f(is)g(used)i(for)224
2045 y(the)d(run)o(time)d(stac)o(k)j(of)e(user)i(programs.)28
b(This)18 b(is)f(a)h(read-write)g(segmen)o(t.)29 b(Primitiv)o(e)224
2095 y(systems)16 b(without)e(paging)g(hardw)o(are)i(ma)o(y)d(require)j
(the)g(size)g(of)e(the)i(stac)o(k)g(segmen)o(t)e(to)224
2144 y(b)q(e)i(sp)q(eci\014ed)g(at)e(link-edit)g(time,)f(but)i(it)f(is)
h(usual)f(for)h(the)g(stac)o(k)g(to)g(b)q(e)g(allo)q(cated)f(some)224
2194 y(minima)o(l)g(default)j(size,)h(and)f(to)g(expand)g
(automatically)d(as)j(the)h(gro)o(wth)f(of)f(the)i(stac)o(k)224
2244 y(causes)h(page)e(faults)g(to)g(o)q(ccur.)29 b(Almost)16
b(all)g(con)o(temp)q(orary)h(systems)g(ha)o(v)o(e)g(the)h(stac)o(k)224
2294 y(segmen)o(t)e(gro)o(wing)f(from)f(higher)i(to)g(lo)o(w)o(er)f
(addresses,)j(that)e(is,)g(the)g(stac)o(k)h(is)e(in)o(v)o(erted.)224
2344 y(The)h FK(Hew)r(lett-Packar)n(d)f(Pr)n(e)n(cision)h(A)o(r)n
(chite)n(ctur)n(e)h FN(is)e(almost)f(unique)h(in)g(that)g(the)h(stac)o
(k)224 2393 y(gro)o(ws)e(up)o(w)o(ard)g(in)f(the)i(address)g(space.)224
2509 y FO(Scop)q(e)h(and)f(exten)o(t)224 2588 y FN(Scop)q(e)f(and)f
(exten)o(t)h(are)f(the)h(t)o(w)o(o)e(attributes)i(whic)o(h)f(con)o
(trol)f(the)i(visibilit)o(y)d(and)h(lifetime)224 2638
y(of)i(data)h(in)f(our)g(languages.)20 b(In)15 b(some)e(languages)h
(the)h(t)o(w)o(o)g(attributes)g(are)g(in)o(tert)o(wined)224
2688 y(in)f(suc)o(h)g(a)g(w)o(a)o(y)f(that)h(the)h(programmer)c(ma)o(y)
h(not)i(con)o(trol)g(the)g(t)o(w)o(o)g(separately)m(.)p
eop
%%Page: 39 45
39 44 bop 224 274 a FL(3.1.)31 b(THE)14 b(R)o(UNTIME)g(ENVIR)o(ONMENT)
658 b FN(39)287 390 y(By)12 b FK(sc)n(op)n(e)k FN(w)o(e)d(mean)e(the)i
(textual)g(range)f(of)g(program)f(statemen)o(ts)i(and)f(declarations)
224 440 y(o)o(v)o(er)18 b(whic)o(h)f(a)g(declared)h(name)f(is)g(asso)q
(ciated)h(with)f(a)g(particular)g(ob)r(ject.)29 b(By)18
b FK(extent)224 490 y FN(w)o(e)13 b(mean)f(the)h(temp)q(oral)e(range,)i
(at)f(run)o(time,)f(throughout)i(whic)o(h)f(a)h(declared)g(datum)e(is)
224 540 y(b)q(ound)j(to)g(a)g(particular)f(memory)f(lo)q(cation.)287
590 y(Roughly)e(sp)q(eaking,)h(there)i(are)e(four)g(p)q(ossible)h
(exten)o(ts)h(whic)o(h)e(a)g(datum)f(migh)o(t)f(ha)o(v)o(e.)224
674 y FO(Automatic:)19 b FN(a)12 b(datum)e(of)i(automatic)e(exten)o(t)i
(is)g(allo)q(cated)f(storage)h(at)g(the)h(in)o(v)o(o)q(cation)328
723 y(of)f(a)g(pro)q(cedure)i(or)f(function,)e(or)i(en)o(try)g(to)f(a)g
(blo)q(c)o(k.)17 b(The)c(space)g(is)f(automatically)328
773 y(reclaimed)h(when)h(the)h(pro)q(cedure)h(is)e(completed,)e(or)i
(con)o(trol)g(lea)o(v)o(es)g(the)g(blo)q(c)o(k)224 857
y FO(Static:)20 b FN(a)15 b(datum)f(of)h(static)g(exten)o(t)i(is)e
(allo)q(cated)g(storage)h(at)f(the)h(start)g(of)f(execution,)328
907 y(and)f(remains)f(un)o(til)g(the)h(program)f(terminates)224
991 y FO(Explicit:)19 b FN(a)14 b(datum)e(of)h(explicit)h(exten)o(t)h
(is)e(allo)q(cated)h(storage)g(as)g(a)g(result)g(of)g(a)f(call)g(to)328
1041 y(some)e(allo)q(cation)e(routine,)j(suc)o(h)g(as)f
FK(NEW)20 b FN(or)11 b FG(malloc)o FN(.)17 b(The)11 b(storage)h(is)f
(explicitly)328 1091 y(deallo)q(cated)j(b)o(y)g(a)f(corresp)q(onding)i
(call)e(to)h FK(DISPOSE)20 b FN(or)14 b FG(free)224 1175
y FO(P)o(ersisten)o(t)o(:)k FN(a)d(datum)f(of)h(p)q(ersisten)o(t)i
(exten)o(t)f(has)f(a)g(lifetime)e(whic)o(h)i(p)q(ersists)i(b)q(ey)o
(ond)328 1224 y(termination)f(of)g(the)i(program.)26
b(None)17 b(of)g(the)h(common)c(pro)q(cedural)k(languages)328
1274 y(supp)q(ort)d(an)o(y)e(p)q(ersisten)o(t)j(data,)d(other)i(than)e
(\014les)287 1358 y(The)h(scop)q(e)h(of)f(name)f(declarations)h(is)g
(usually)f(delimited)f(b)o(y)i(some)f(kind)g(of)h(enclos-)224
1408 y(ing)g(syn)o(tactic)g(structure)i(in)e(the)g(source)h(program.)i
(F)m(or)c(example,)f(in)i FK(Pasc)n(al)k FN(v)n(ariables)224
1457 y(declared)f(inside)f(a)g(pro)q(cedure)h(ha)o(v)o(e)f(a)g(scop)q
(e)h(whic)o(h)e(is)h(the)h(whole)e(of)h(the)g(text)g(of)g(the)224
1507 y(pro)q(cedure)j(in)e(whic)o(h)g(they)h(are)g(declared.)28
b(In)18 b FM(C)h FN(the)f(scop)q(e)h(of)d(a)h(v)n(ariable)f(name)g(de-)
224 1557 y(clared)e(within)f(a)h(function)f(extends)i(from)d(the)i(p)q
(oin)o(t)f(of)g(declaration)g(to)g(the)i(end)f(of)f(the)224
1607 y(function.)385 1592 y Fz(1)428 1607 y FN(Pro)q(cedural)k
(languages)f(generally)f(pro)o(vide)h(some)f(or)h(all)f(of)g(the)i
(follo)o(wing)224 1657 y(scop)q(e)e(delimiting)d(structures.)224
1740 y FO(Blo)q(c)o(k:)21 b FN(a)13 b(name)f(of)h(blo)q(c)o(k)g(scop)q
(e)i(is)f(visible)e(within)h(the)h(blo)q(c)o(k)f(in)g(whic)o(h)h(it)f
(is)g(declared)224 1824 y FO(Pro)q(cedure:)20 b FN(a)11
b(name)g(of)g(pro)q(cedure)j(scop)q(e)f(is)f(visible)f(within)g(the)h
(pro)q(cedure)i(in)d(whic)o(h)328 1874 y(it)j(is)f(declared)224
1958 y FO(File:)20 b FN(a)d(name)f(of)h(\014le)g(scop)q(e)h(is)g
(visible)e(within)h(the)h(whole)f(of)f(the)i(\014le)g(or)f(mo)q(dule)f
(in)328 2008 y(whic)o(h)e(it)f(is)h(declared)224 2092
y FO(Global:)19 b FN(a)13 b(name)g(of)f(global)g(scop)q(e)j(is)e
(visible)g(throughout)h(the)g(whole)f(of)g(the)h(program)328
2142 y(in)g(whic)o(h)g(it)g(o)q(ccurs.)20 b(F)m(or)14
b(most)f(languages,)g(mo)q(dules)g(other)i(than)f(the)g(declaring)328
2191 y(mo)q(dule)e(m)o(ust)h(explicitly)f(imp)q(ort)g(the)i(global)d
(name)i(in)g(order)h(to)f(mak)o(e)f(it)h(visible)287
2275 y(Apart)d(from)e(explicitly)h(allo)q(cated)h(ob)r(jects,)h(for)f
(whic)o(h)g(the)h(resp)q(onsibilit)o(y)e(is)h(en)o(tirely)224
2325 y(with)g(the)i(programmer,)c(the)j(scop)q(e)g(rules)g(place)g(a)f
(constrain)o(t)h(on)f(the)h(exten)o(t)h(of)d(declared)224
2375 y(data.)19 b(It)c(is)f(an)g(ob)o(vious)g(rule)g(that)h(the)g
(lifetime)d(of)i(a)g(named)f(datum)g(m)o(ust)g(extend)j(for)224
2425 y(at)g(least)h(as)f(long)f(as)h(con)o(trol)g(remains)f(within)g
(the)i(con)o(trol)f(structure)i(whic)o(h)e(delimits)224
2474 y(the)j(scop)q(e.)31 b(Th)o(us)18 b(data)g(of)f(blo)q(c)o(k)h
(scop)q(e)h(ma)o(y)d(ha)o(v)o(e)h(an)h(automatic)e(exten)o(t)j(whic)o
(h)e(is)224 2524 y(shorter)f(than)e(that)g(of)f(the)i(surrounding)f
(pro)q(cedure.)20 b(Similarly)l(,)11 b(\014le)j(scop)q(e)h(and)f
(global)224 2574 y(scop)q(e)h(data)f(m)o(ust)f(ha)o(v)o(e)h(static)g
(exten)o(t.)p 224 2610 577 2 v 271 2636 a Fy(1)288 2648
y Fx(In)g(b)q(oth)g(cases)g(there)f(is)i(some)f(\014ne)g(prin)o(t)f
(here,)i(whic)o(h)f(has)g(to)h(do)f(with)h(declaration)o(s)d(of)j
(other)224 2688 y(ob)r(jects)10 b(with)i(the)e(same)h(name)f(in)h
(nested)f(scop)q(es.)k(These)d(issues)g(are)f(discussed)g(in)h(detail)f
(later.)p eop
%%Page: 40 46
40 45 bop 224 274 a FN(40)562 b FL(CHAPTER)14 b(3.)32
b(R)o(UNTIME)13 b(OR)o(GANIZA)m(TION)287 390 y FN(Within)i(these)i
(constrain)o(ts,)g(the)f(notions)g(of)f(scop)q(e)i(and)f(exten)o(t)h
(are)f(indep)q(enden)o(t,)224 440 y(although)10 b(as)h(noted)h(ab)q(o)o
(v)o(e,)f(some)f(languages)g(do)h(not)g(allo)o(w)e(indep)q(enden)o(t)j
(sp)q(eci\014cation.)224 490 y(Figure)g(3.1,)e(3.2,)h(and)g(3.3)f(sho)o
(w)i(whic)o(h)f(com)o(binations)e(are)j(a)o(v)n(ailable)e(for)h(three)h
(di\013eren)o(t)224 540 y(languages.)30 b(In)18 b(all)f(of)h(these)h
(tables,)g(the)g(annotation)e FK(invalid)h(c)n(ombination)k
FN(denotes)224 590 y(com)o(binations)9 b(whic)o(h)i(w)o(ould)f(violate)
g(the)i(constrain)o(t)f(that)g(exten)o(t)h(m)o(ust)e(at)g(least)i(matc)
o(h)224 640 y(scop)q(e.)20 b(Other)15 b(annotations)f(are)g(used)h(for)
f(com)o(binations)d(whic)o(h)j(logically)e(migh)o(t)g(exist)224
689 y(but)j(for)e(whic)o(h)h(there)h(is)f(no)f(syn)o(tax,)h(or)g(are)g
(forbidden)g(b)o(y)f(other)i(language)e(rules.)p 226
792 1437 2 v 225 825 2 34 v 457 825 V 466 825 V 1017
815 a Fq(Scop)q(e)p 1662 825 V 467 827 1197 2 v 225 858
2 34 v 251 848 a(Exten)o(t)p 457 858 V 466 858 V 128
w(Global)g(scop)q(e)p 726 858 V 49 w(File)e(scop)q(e)p
1046 858 V 156 w(Pro)q(cedure)g(scop)q(e)p 1368 858 V
50 w(Blo)q(c)o(k)g(scop)q(e)p 1662 858 V 226 860 1437
2 v 226 868 V 225 901 2 34 v 251 891 a(Static)p 457 901
V 466 901 V 143 w Fz(do)q(es)g(not)g(exist)p 726 901
V 60 w Fq(v)n(ar)g Fz(declarations)p 1046 901 V 83 w(not)g(p)q(ossible)
h(in)p 1368 901 V 111 w Fp(Pasc)n(al)h Fz(do)q(es)e(not)p
1662 901 V 225 935 V 457 935 V 466 935 V 491 925 a(in)h
Fp(Pasc)n(al)p 726 935 V 126 w Fz(outside)g(pro)q(cedures)p
1046 935 V 49 w Fp(Pasc)n(al)p 1368 935 V 226 w Fz(ha)o(v)o(e)f(lo)q
(cal)g(blo)q(c)o(ks)p 1662 935 V 226 936 1437 2 v 225
969 2 34 v 251 959 a Fq(Pro)q(cedure-)p 457 969 V 466
969 V 56 w Fz(in)o(v)n(alid)p 726 969 V 167 w(in)o(v)n(alid)p
1046 969 V 226 w Fq(v)n(ar)g Fz(declarations)p 1368 969
V 85 w Fp(Pasc)n(al)i Fz(do)q(es)e(not)p 1662 969 V 225
1003 V 251 993 a Fq(automatic)p 457 1003 V 466 1003 V
75 w Fz(com)o(bination)p 726 1003 V 84 w(com)o(bination)p
1046 1003 V 143 w(inside)i(pro)q(cedures)p 1368 1003
V 71 w(ha)o(v)o(e)e(lo)q(cal)g(blo)q(c)o(ks)p 1662 1003
V 226 1004 1437 2 v 225 1037 2 34 v 251 1028 a Fq(Blo)q(c)o(k-)p
457 1037 V 466 1037 V 133 w Fz(in)o(v)n(alid)p 726 1037
V 167 w(in)o(v)n(alid)p 1046 1037 V 226 w(in)o(v)n(alid)p
1368 1037 V 228 w Fp(Pasc)n(al)i Fz(do)q(es)e(not)p 1662
1037 V 225 1071 V 251 1061 a Fq(automatic)p 457 1071
V 466 1071 V 75 w Fz(com)o(bination)p 726 1071 V 84 w(com)o(bination)p
1046 1071 V 143 w(com)o(bination)p 1368 1071 V 145 w(ha)o(v)o(e)g(lo)q
(cal)g(blo)q(c)o(ks)p 1662 1071 V 226 1072 1437 2 v 583
1188 a FN(Figure)j(3.1:)j(Scop)q(e)e(and)f(exten)o(t)h(for)e
FK(Pasc)n(al)287 1289 y FN(In)d(the)i(case)g(of)e FK(Pasc)n(al)t
FN(,)h(note)g(that)g(there)h(are)f(only)f(t)o(w)o(o)g(c)o(hoices.)18
b(V)m(ariables)10 b(declared)224 1339 y(within)i(pro)q(cedures)i(ha)o
(v)o(e)e(pro)q(cedure)i(scop)q(e,)g(and)e(pro)q(cedure-automatic)g
(exten)o(t.)18 b(V)m(ari-)224 1389 y(ables)h(declared)g(outside)f(of)g
(pro)q(cedures)i(ha)o(v)o(e)e(\014le)g(scop)q(e,)i(and)e(static)g
(exten)o(t.)32 b(Since)224 1439 y(standard)13 b FK(Pasc)n(al)k
FN(programs)11 b(are)h(single,)g(monolithic)e(compilation)f(units,)j
(the)h(question)224 1489 y(of)j(global)g(scop)q(e)h(do)q(es)h(not)e
(arise,)i(although)d(most)h FK(Pasc)n(al)21 b FN(implemen)o(tatio)o(ns)
14 b(pro)o(vide)224 1538 y(some)j(form)f(of)h(separate)i(compilation)c
(as)i(an)h(extension,)g(with)g(explicit)f(con)o(trol)g(o)o(v)o(er)224
1588 y(global)c(visibilit)o(y)m(.)p 225 1691 1441 2 v
224 1724 2 34 v 455 1724 V 464 1724 V 1017 1714 a Fq(Scop)q(e)p
1664 1724 V 465 1725 1201 2 v 224 1757 2 34 v 249 1747
a(Exten)o(t)p 455 1757 V 464 1757 V 129 w(Global)f(scop)q(e)p
724 1757 V 49 w(File)f(scop)q(e)p 1048 1757 V 160 w(Pro)q(cedure)g
(scop)q(e)p 1370 1757 V 49 w(Blo)q(c)o(k)g(scop)q(e)p
1664 1757 V 225 1759 1441 2 v 225 1767 V 224 1800 2 34
v 249 1790 a(Static)p 455 1800 V 464 1800 V 144 w Fz(exp)q(orted)g
Fp(V)m(AR)p 724 1800 V 50 w Fz(non-exp)q(orted)h Fp(V)m(AR)p
1048 1800 V 49 w Fz(not)f(p)q(ossible)p 1370 1800 V 149
w Fp(Mo)n(dula)j Fz(do)q(es)c(not)p 1664 1800 V 224 1833
V 455 1833 V 464 1833 V 490 1823 a(declarations)p 724
1833 V 86 w(declarations)p 1048 1833 V 150 w(in)i Fp(Mo)n(dula)p
1370 1833 V 173 w Fz(ha)o(v)o(e)g(lo)q(cal)f(blo)q(c)o(ks)p
1664 1833 V 225 1835 1441 2 v 224 1868 2 34 v 249 1858
a Fq(Pro)q(cedure-)p 455 1868 V 464 1868 V 57 w Fz(in)o(v)n(alid)p
724 1868 V 166 w(in)o(v)n(alid)p 1048 1868 V 230 w Fp(V)m(AR)h
Fz(declarations)p 1370 1868 V 63 w Fp(Mo)n(dula)i Fz(do)q(es)c(not)p
1664 1868 V 224 1901 V 249 1891 a Fq(automatic)p 455
1901 V 464 1901 V 76 w Fz(com)o(bination)p 724 1901 V
83 w(com)o(bination)p 1048 1901 V 147 w(inside)j(pro)q(cedures)p
1370 1901 V 70 w(ha)o(v)o(e)f(lo)q(cal)f(blo)q(c)o(ks)p
1664 1901 V 225 1903 1441 2 v 224 1936 2 34 v 249 1926
a Fq(Blo)q(c)o(k-)p 455 1936 V 464 1936 V 134 w Fz(in)o(v)n(alid)p
724 1936 V 166 w(in)o(v)n(alid)p 1048 1936 V 230 w(in)o(v)n(alid)p
1370 1936 V 227 w Fp(Mo)n(dula)j Fz(do)q(es)c(not)p 1664
1936 V 224 1970 V 249 1960 a Fq(automatic)p 455 1970
V 464 1970 V 76 w Fz(com)o(bination)p 724 1970 V 83 w(com)o(bination)p
1048 1970 V 147 w(com)o(bination)p 1370 1970 V 144 w(ha)o(v)o(e)i(lo)q
(cal)f(blo)q(c)o(ks)p 1664 1970 V 225 1971 1441 2 v 556
2087 a FN(Figure)j(3.2:)j(Scop)q(e)e(and)f(exten)o(t)h(for)e
FK(Mo)n(dula-2)287 2188 y FN(In)f FK(Mo)n(dula-2)6 b
FN(,)12 b(the)h(situation)f(is)g(sligh)o(tly)f(more)g(\015exible,)h(as)
g(the)h(imp)q(ort)e(and)h(exp)q(ort)224 2238 y(facilities)h(allo)o(w)f
(con)o(trol)i(o)o(v)o(er)g(the)g(visibilit)o(y)e(of)i(v)n(ariables)f
(of)g(static)h(exten)o(t.)287 2288 y(In)9 b(language)g
FM(C)j FN(there)f(are)f(man)o(y)d(more)i(p)q(ossibilities.)16
b(V)m(ariables)9 b(declared)h(outside)g(of)224 2338 y(functions)g(alw)o
(a)o(ys)f(ha)o(v)o(e)h(static)g(exten)o(t,)h(but)f(ma)o(y)e(ha)o(v)o(e)
i(global)e(scop)q(e)j(\(the)g(default\))f(or)g(b)q(e)224
2388 y(explicitly)i(restricted)j(to)e(\014le)g(scop)q(e.)19
b(V)m(ariables)12 b(declared)i(within)e(functions)h(ha)o(v)o(e)g(func-)
224 2438 y(tion)j(scop)q(e,)i(and)f(function-automatic)d(exten)o(t)j
(as)g(default.)25 b(F)m(unction)16 b(lo)q(cal)g(v)n(ariables)224
2488 y(ma)o(y)e(b)q(e)i(explicitly)f(giv)o(en)g(the)i(static)f(storage)
g(class,)g(whic)o(h)f(allo)o(ws)g(them)g(to)g(preserv)o(e)224
2537 y(their)d(v)n(alues)f(b)q(et)o(w)o(een)i(in)o(v)o(o)q(cations)d
(of)h(the)h(function)f(to)g(whic)o(h)h(they)g(b)q(elong.)k(Note)c(that)
224 2587 y(the)h(use)h(of)d(this)i(facilit)o(y)e(requires)i(that)g
(static)f(v)n(ariables)g(b)q(e)h(giv)o(en)f(a)g(predictable)h(initial)
224 2637 y(v)n(alue,)g(in)h(this)g(case)g(zero.)287 2688
y(V)m(ariables)8 b(declared)j(within)d(a)h Ft(f)14 b(\001)7
b(\001)g(\001)12 b(g)d FN(blo)q(c)o(k)g(ha)o(v)o(e)g(blo)q(c)o(k)g
(scop)q(e,)i(and)e(blo)q(c)o(k-automatic)p eop
%%Page: 41 47
41 46 bop 224 274 a FL(3.1.)31 b(THE)14 b(R)o(UNTIME)g(ENVIR)o(ONMENT)
658 b FN(41)p 232 392 1426 2 v 231 425 2 34 v 445 425
V 454 425 V 1008 415 a Fq(Scop)q(e)p 1657 425 V 455 427
1203 2 v 231 459 2 34 v 257 449 a(Exten)o(t)p 445 459
V 454 459 V 110 w(Global)13 b(scop)q(e)p 753 459 V 88
w(File)e(scop)q(e)p 1045 459 V 127 w(F)m(unction)g(scop)q(e)p
1354 459 V 63 w(Blo)q(c)o(k)g(scop)q(e)p 1657 459 V 232
460 1426 2 v 232 469 V 231 502 2 34 v 257 492 a(Static)p
445 502 V 454 502 V 125 w Fz(default)h(for)f(\014le-)p
753 502 V 83 w(`)p Fo(static)p Fz(')k(\014le-lev)o(el)p
1045 502 V 50 w(`)p Fo(static)p Fz(')g(declarati-)p 1354
502 V 50 w(`)p Fo(static)p Fz(')f(declarat-)p 1657 502
V 231 535 V 445 535 V 454 535 V 479 525 a(lev)o(el)e(declarations)p
753 535 V 50 w(declarations)p 1045 535 V 117 w(ons)g(inside)g(func's)p
1354 535 V 73 w(ions)f(inside)i(blo)q(c)o(ks)p 1657 535
V 232 537 1426 2 v 231 570 2 34 v 257 560 a Fq(F)m(unction-)p
445 570 V 454 570 V 63 w Fz(in)o(v)n(alid)p 753 570 V
206 w(in)o(v)n(alid)p 1045 570 V 197 w(declaration)e(def-)p
1354 570 V 84 w(not)g(p)q(ossible)h(in)g FB(C)p 1657
570 V 231 603 V 257 593 a Fq(automatic)p 445 603 V 454
603 V 57 w Fz(com)o(bination)p 753 603 V 123 w(com)o(bination)p
1045 603 V 114 w(ault)g(inside)g(func's)p 1354 603 V
1657 603 V 232 605 1426 2 v 231 638 2 34 v 257 628 a
Fq(Blo)q(c)o(k-)p 445 638 V 454 638 V 115 w Fz(in)o(v)n(alid)p
753 638 V 206 w(in)o(v)n(alid)p 1045 638 V 197 w(in)o(v)n(alid)p
1354 638 V 216 w(declaration)e(def-)p 1657 638 V 231
671 V 257 661 a Fq(automatic)p 445 671 V 454 671 V 57
w Fz(com)o(bination)p 753 671 V 123 w(com)o(bination)p
1045 671 V 114 w(com)o(bination)p 1354 671 V 133 w(ault)h(inside)i(blo)
q(c)o(ks)p 1657 671 V 232 673 1426 2 v 627 789 a FN(Figure)h(3.3:)j
(Scop)q(e)d(and)g(exten)o(t)h(for)e FM(C)224 928 y FN(exten)o(t.)25
b(If)15 b(they)h(are)g(declared)h(with)e(the)i(static)f(storage)g
(class)g(then)g(they)g(ha)o(v)o(e)g(static)224 977 y(exten)o(t.)287
1030 y(Notice)d(that)f(in)g(language)g FM(C)j FN(the)e(\\)p
FG(static)p FN(")e(storage)i(class)g(sp)q(eci\014er)i(is)d(am)o
(biguous.)224 1080 y(Outside)17 b(of)f(functions)g(its)g(e\013ect)i(is)
e(to)g(o)o(v)o(erride)g(the)h(default)e(visibilit)o(y)m(,)f(reducing)j
(the)224 1130 y FK(sc)n(op)n(e)12 b FN(from)d(global)h(to)h
(\014le-scop)q(e.)18 b(Inside)12 b(a)f(function,)g(the)h(e\013ect)h(of)
e(the)g(\\)p FG(static)p FN(")f(stor-)224 1180 y(age)j(class)f(sp)q
(ec\014er)j(is)d(to)g(o)o(v)o(erride)h(the)f(default)g
FK(extent)p FN(,)h(c)o(hanging)e(that)i(from)d(automatic)224
1229 y(to)k(static.)287 1282 y(In)f FK(Mo)n(dula-2)6
b FN(,)13 b(v)n(ariables)f(of)g(global)g(scop)q(e)i(are)f(explicitly)f
(exp)q(orted)i(b)o(y)f(the)h(mo)q(dule)224 1332 y(in)21
b(whic)o(h)f(they)h(are)g(declared,)i(and)e(b)q(ecome)f(visible)g(in)g
(other)i(mo)q(dules)d(only)h(after)224 1382 y(explicit)12
b(imp)q(ort)f(in)o(to)g(those)i(mo)q(dules.)j(In)d FM(C)s
FN(,)e(v)n(ariables)h(of)f(global)g(scop)q(e)i(are)g(implicitl)o(y)224
1432 y(exp)q(orted)h(b)o(y)e(the)h(absence)h(of)d(the)i(\\)p
FG(static)p FN(")e(storage)h(class)h(sp)q(eci\014er)h(in)e(the)h(mo)q
(dule)e(in)224 1482 y(whic)o(h)g(they)g(are)g(declared.)18
b(Other)12 b(mo)q(dules)d(of)h(the)h(program)e(can)i(mak)o(e)e(these)j
(v)n(ariables)224 1531 y(visible)i(with)h(an)f(explicit)h(\\)p
FG(extern)p FN(")e(declaration,)h(or)g(ma)o(y)f(use)j(the)f(\\last)f
(resort")i(rule)224 1581 y(that)g(an)o(y)f(undeclared)h(v)n(ariable)f
(is)g(assumed)g(to)g(b)q(e)h(a)f(global)f(v)n(ariable)g(of)h(t)o(yp)q
(e)h(\\)p FG(int)p FN(".)224 1631 y(Sensible)f FM(C)h
FN(programmers)c(do)i(not)g(use)g(this)g(implicit)e(b)q(eha)o(viour.)
224 1755 y FO(Storage)j(managemen)o(t)224 1838 y FN(In)h
FK(Mo)n(dula-2)22 b FN(w)o(e)16 b(ha)o(v)o(e)f(sym)o(b)q(olic)f
(constan)o(ts,)j(declared)f(after)g(the)g FK(CONST)21
b FN(k)o(eyw)o(ord,)224 1887 y(and)15 b(v)n(ariables)g(whic)o(h)g(the)h
(language)e(do)q(es)i(not)f(guaran)o(tee)h(are)g(initialized.)k
(Programs)224 1937 y(ma)o(y)13 b(not)i(refer)h(to)e(the)h(address)h(of)
e(a)h(constan)o(t,)g(nor)g(pass)g(it)f(as)h(the)g(actual)g(parameter)
224 1987 y(to)g(a)f(formal)f(parameter)h(of)g FK(V)l(AR)i
FN(mo)q(de.)k(Nev)o(ertheless,)d(some)d(constan)o(ts)h(do)g(ha)o(v)o(e)
g(an)224 2037 y(address)20 b(at)f(run)o(time,)f(while)g(others)h(do)g
(not.)32 b(Small)16 b(in)o(tegral)i(constan)o(ts)h(suc)o(h)g(as)g(5,)
224 2087 y(sa)o(y)m(,)c(w)o(ould)g(nev)o(er)i(b)q(e)f(placed)g(in)f
(memory)e(for)j(an)o(y)f(mac)o(hine)f(arc)o(hitecture)k(whic)o(h)d(has)
224 2137 y(instructions)i(with)e(imm)o(ediate)e(op)q(erands.)24
b(All)15 b(legal)f(uses)j(of)e(suc)o(h)h(a)f(constan)o(t)h(w)o(ould)224
2186 y(simply)c(insert)j(the)f(constan)o(t)h(as)f(an)f(immediate)e(op)q
(erand)k(in)e(the)i(ob)r(ject)f(co)q(de.)287 2239 y(The)j(situation)g
(is)g(quite)g(di\013eren)o(t)h(in)f(the)g(case)h(of)f(structured)i
(constan)o(ts)f(suc)o(h)g(as)224 2289 y(c)o(haracter)f(strings)e(or)g
(the)g(constan)o(t)g(v)n(alue)g(constructors)h(whic)o(h)f(app)q(ear)g
(in)g FK(ISO)j FN(draft)224 2339 y(standard)h FK(Mo)n(dula-2)7
b FN(.)32 b(In)18 b(these)i(cases)g(an)e(area)h(of)f(the)h(data)g
(segmen)o(t)f(m)o(ust)f(b)q(e)i(set)224 2389 y(aside)g(for)g(the)g
(constan)o(t,)h(and)e(suitably)g(initialized.)31 b(Note)19
b(carefully)g(that)f(although)224 2438 y(legal)13 b(source)h(programs)f
(cannot)g(men)o(tion)f(the)i(address)h(of)d(suc)o(h)j(a)e(constan)o(t,)
g(the)h(in)o(ter-)224 2488 y(mediate)h(represen)o(tation)j(often)e
(manipulates)e(the)i(address.)26 b(F)m(or)15 b(example,)g(the)i(blo)q
(c)o(k)224 2538 y(cop)o(y)12 b(op)q(eration)g(whic)o(h)g(assigns)h(a)e
(literal)h(string)g(to)g(an)g(arra)o(y)f(v)n(ariable)g(w)o(ould)h(t)o
(ypically)224 2588 y(need)k(to)f(b)q(e)g(passed)h(the)g(address)g(of)e
(the)i(constan)o(t)f(string.)21 b(A)15 b(correct)i(co)q(de)e(generator)
224 2638 y(will)10 b(nev)o(er)i(threaten)g(the)g(in)o(tegrit)o(y)e(of)g
(suc)o(h)i(a)f(constan)o(t)g(when)h(the)f(address)i(is)e(implicitl)o(y)
224 2688 y(tak)o(en)17 b(in)f(this)g(w)o(a)o(y)m(.)24
b(Nev)o(ertheless,)19 b(it)d(is)g(sensible)h(to)f(allo)q(cate)g
(read-only)g(storage)h(for)p eop
%%Page: 42 48
42 47 bop 224 274 a FN(42)562 b FL(CHAPTER)14 b(3.)32
b(R)o(UNTIME)13 b(OR)o(GANIZA)m(TION)224 390 y FN(suc)o(h)f(constan)o
(t)f(data,)g(for)f(those)i(mac)o(hine)d(arc)o(hitectures)k(whic)o(h)e
(pro)o(vide)g(suc)o(h)g(a)g(facilit)o(y)m(.)287 443 y(In)k(language)f
FM(C)k FN(the)e(situation)e(is)h(more)f(complex.)21 b(Originally)13
b FM(C)18 b FN(did)c(not)h(pro)o(vide)224 492 y(for)f(manifest)f
(constan)o(ts,)h(and)g(it)g(w)o(as)g(usual)g(to)g(use)h(the)f
(facilities)g(of)f(the)i(prepro)q(cessor)224 542 y(to)h(substitute)i
(literals)d(for)h(sym)o(b)q(olic)e(names.)978 527 y Fz(2)1020
542 y FN(Suc)o(h)j(macro)d(literals)i(do)g(not)g(ha)o(v)o(e)g(an)224
592 y(address,)h(and)e(in)f(the)i(case)g(of)f(string)g(literals)f(eac)o
(h)i(applied)e(o)q(ccurrence)k(of)d(the)h(macro)224 642
y(name)d(ma)o(y)f(giv)o(e)h(rise)i(to)f(a)f(new)h(cop)o(y)g(of)g(the)g
(string)g(at)g(some)f(new)h(address.)287 694 y(With)h
FK(ANSI)h(C)p FN(,)f(the)h(situation)f(is)g(b)q(etter)i(resolv)o(ed.)24
b(File)15 b(scop)q(e)i(v)n(ariable)d(declara-)224 744
y(tions)h(ma)o(y)e(b)q(e)i(giv)o(en)f(the)i(\\)p FG(const)p
FN(")d(attribute,)i(whic)o(h)g(giv)o(es)f(some)g(lev)o(el)h(of)f
(protection)224 793 y(to)h(the)g(v)n(alue.)k(These)c(\\constan)o(t)g(v)
n(ariables")f(are)h(still)e(data)h(ob)r(jects,)h(and)g(ha)o(v)o(e)f(a)g
(run-)224 843 y(time)k(address,)j(whic)o(h)e(ma)o(y)e(ev)o(en)j(b)q(e)f
(referenced)j(in)c(the)i(program.)31 b(Conforming)17
b FM(C)224 893 y FN(compilers)e(will)f(c)o(hec)o(k)i(that)f(no)g
(assignmen)o(t)g(is)g(made)f(to)h(a)g(datum)f(declared)j(with)e(the)224
943 y(const)20 b(attribute,)h(but)f(cannot)f(alw)o(a)o(ys)f(ensure)j
(the)f(in)o(tegrit)o(y)f(of)f(v)n(alues)h(whic)o(h)g(ha)o(v)o(e)224
993 y(their)13 b(addresses)h(tak)o(en)e(explicitly)m(.)k(It)c(is)f
(therefore)j(sensible)f(to)e(place)h(all)f(suc)o(h)i(constan)o(t)224
1043 y(v)n(ariables)h(in)f(a)h(read-only)f(segmen)o(t,)g(if)g(that)h
(is)g(p)q(ossible.)287 1095 y FK(ANSI)d(C)17 b FN(also)9
b(pro)o(vides)i(for)f(scalar)h(v)n(ariables)e(to)i(b)q(e)g(declared)g
(with)f(the)h(\\)p FG(register)p FN(")224 1144 y(storage)17
b(class,)g(or)f(with)g(the)h(\\)p FG(volatile)p FN(")d(attribute.)26
b(Compilers)14 b(are)j(not)f(obliged)f(to)224 1194 y(place)f(v)n
(ariables)e(and)g(parameters)h(declared)h(with)f(register)h(class)f(in)
g(mac)o(hine)e(registers,)224 1244 y(and)18 b(man)o(y)d(compilers)h
(simply)g(ignore)h(suc)o(h)h(declarations.)28 b(A)o(t)18
b(b)q(est,)h(suc)o(h)f(a)f(storage)224 1294 y(class)e(declaration)f(is)
h(a)f(hin)o(t)g(to)g(the)h(compiler)e(that)h(the)h(v)n(ariable)f(in)g
(question)g(is)h(lik)o(ely)224 1344 y(to)k(b)q(e)g(hea)o(vily)e(used.)
32 b(Ho)o(w)o(ev)o(er,)20 b(suc)o(h)f(a)f(hin)o(t)g(mak)o(es)f(a)i
(nonsense)g(of)f(the)h(notion)f(of)224 1393 y(program)f(p)q(ortabilit)o
(y)m(,)g(since)i(the)g(same)e(co)q(de)i(ma)o(y)d(b)q(e)j(compiled)d(on)
i(mac)o(hines)g(with)224 1443 y(v)o(ery)j(few)f(registers,)j(or)d(with)
f(v)o(ery)i(man)o(y)d(registers.)38 b(In)20 b(an)o(y)g(case,)i(an)e
(optimizing)224 1493 y(compiler)c(can)h(probably)f(mak)o(e)f(a)i(b)q
(etter)h(c)o(hoice)f(of)g(data)f(to)h(place)g(in)f(registers)i(than)224
1543 y(most)13 b(programmers.)287 1595 y(The)e(\\)p FG(volatile)p
FN(")e(mark)o(er)i(has)g(mandatory)f(seman)o(tics.)16
b(Suc)o(h)c(a)f(declaration)g(w)o(arns)224 1645 y(the)i(compiler)e
(that)h(the)g(v)n(alue)g(ma)o(y)e(b)q(e)j(c)o(hanged)f(without)g(an)o
(y)f(apparen)o(t)i(direct)g(assign-)224 1695 y(men)o(t)k(in)h(the)g
(source)i(co)q(de.)30 b(Suc)o(h)19 b(v)n(ariables)e(cannot)h(tak)o(e)g
(part)g(in)f(common)f(sub)q(ex-)224 1744 y(pression)i(elimination)c(or)
j(v)n(alue)f(trac)o(king)g(optimizations.)25 b(Ev)o(ery)17
b(time)e(the)j(program)224 1794 y(calls)e(for)g(the)h(v)n(alue)e(of)h
(suc)o(h)h(a)e(v)n(ariable)h(to)g(b)q(e)g(used,)h(the)g(v)n(alue)f
FK(must)k FN(b)q(e)c(read)h(anew)224 1844 y(from)10 b(memory)m(.)15
b(Consider)d(a)f(program)f(whic)o(h)i(insp)q(ects)h(a)f(memory-m)o(a)o
(pp)q(ed)e(p)q(eripheral)224 1894 y(device)19 b(register.)31
b(Clearly)18 b(suc)o(h)g(a)g(v)n(ariable)f(cannot)h(b)q(e)g(used)h(as)f
(part)g(of)g(a)f(common)224 1944 y(sub)q(expression,)h(since)f(its)e(v)
n(alue)g(ma)o(y)f(c)o(hange)i(without)g(an)o(y)f(action)g(b)o(y)h(the)g
(program.)224 1994 y(Similarly)m(,)g(programs)h(with)i(m)o(ultiple)d
(threads)k(and)f(pre-emptiv)o(e)f(thread)h(sc)o(heduling)224
2043 y(m)o(ust)13 b(treat)i(v)n(ariables)e(whic)o(h)h(are)g(shared)h(b)
q(et)o(w)o(een)g(threads)g(as)f(v)o(olatile.)224 2193
y FI(3.2)67 b(Pro)r(cedure)22 b(call)i(and)f(return)224
2288 y FN(The)14 b(main)c(organizational)h(principle)h(for)h(programs)e
(written)i(in)f(pro)q(cedural)i(languages)224 2337 y(is)e
FK(pr)n(o)n(c)n(e)n(dur)n(al)f(abstr)n(action)p FN(.)17
b(Pro)q(cedures)d(and)d(functions)g(are)h(used)g(to)f(encapsulate)i
(com-)224 2387 y(plex)j(op)q(erations,)g(and)f(are)h(passed)h
(parameters)f(to)f(con)o(trol)h(their)g(e\013ect.)25
b(W)m(e)15 b(use)i(the)224 2437 y(term)g(\\pro)q(cedure")h(to)f(mean)f
(either)i FK(pur)n(e)f(pr)n(o)n(c)n(e)n(dur)n(es)s FN(,)h(that)f(is,)g
(pro)q(cedures)i(in)o(v)o(ok)o(ed)224 2487 y(solely)14
b(for)f(their)i(side-e\013ects,)g(or)f(to)g(refer)h(to)f(v)n
(alue-returning)f(functions.)1437 2472 y Fz(3)p 224 2531
577 2 v 271 2557 a Fy(2)288 2569 y Fx(Note)c(the)g(unfortunate)e
(e\013ect)h(that)h(this)g(has)g(on)g(program)f(clarit)o(y)m(,)g(b)q
(ecause)g(of)h(the)g(di\013eren)o(t)f(scop)q(e)224 2609
y(rules)j(whic)o(h)g(apply)f(to)h(prepro)q(cessor)d(declarations)h(and)
h(data)h(declaration)o(s.)271 2636 y Fy(3)288 2648 y
Fx(Note)d(that)g(in)h(the)f Fr(C)j Fx(literature,)c(all)h(suc)o(h)g
(routines)f(are)h(called)f(\\functions",)f(with)j(pure)e(pro)q(cedures)
224 2688 y(b)q(eing)j(considered)f(to)i(b)q(e)g(functions)e(whic)o(h)i
(return)f(the)h(\\)p Fs(void)p Fx(")f(t)o(yp)q(e.)p eop
%%Page: 43 49
43 48 bop 224 274 a FL(3.2.)31 b(PR)o(OCEDURE)14 b(CALL)g(AND)g(RETURN)
602 b FN(43)287 390 y(In)12 b(general,)g(pro)q(cedures)j(do)d(not)h
(encapsulate)g(program)e(state,)i(although)e(they)i(ma)o(y)224
440 y(require)f(lo)q(cal)e(v)n(ariables)g(during)g(their)h(execution.)
18 b(An)o(y)10 b(suc)o(h)i(lo)q(cal)e(data,)g(together)i(with)224
490 y(parameter)i(information)c(and)k(the)g(information)d(necessary)k
(to)f(allo)o(w)e(the)i(pro)q(cedure)h(to)224 540 y(return)g(correctly)m
(,)g(forms)d(part)i(of)f(the)i(pro)q(cedure's)h FK(activation)f(r)n(e)n
(c)n(or)n(d)p FN(.)224 656 y FH(3.2.1)56 b(Register)17
b(use)h(con)n(v)n(en)n(tions)224 732 y FN(Older)d(mac)o(hine)d(arc)o
(hitectures)k(often)d(pro)o(vided)h(mac)o(hine)e(registers)j(with)f
(restricted)h(or)224 782 y(otherwise)k(sp)q(ecialized)f(purp)q(oses.)29
b(Th)o(us)18 b(registers)h(w)o(ere)f(reserv)o(ed)h(b)o(y)e(the)h(hardw)
o(are)224 832 y(as)i(stac)o(k)g(p)q(oin)o(ters,)i(argumen)o(t)c(p)q
(oin)o(ters,)j(segmen)o(t)f(p)q(oin)o(ters,)h(index)f(registers,)i
(base)224 882 y(registers)17 b(and)d(general)h(purp)q(ose)h(registers.)
22 b(It)15 b(is)g(rather)g(more)f(common)e(in)i(recen)o(t)j(ar-)224
932 y(c)o(hitectures)d(to)d(ha)o(v)o(e)g FK(gener)n(al)h(r)n(e)n
(gister)f(or)n(ganization)p FN(,)h(in)e(whic)o(h)i(almost)d(all)h(the)i
(op)q(erand)224 982 y(registers)i(are)f(able)f(to)h(b)q(e)g(used)g(for)
f(an)o(y)g(computational)e(purp)q(ose.)18 b(Suc)o(h)13
b(a)f(general)h(reg-)224 1031 y(ister)19 b(mac)o(hine)e(ma)o(y)f(allo)o
(w)g(registers)k(to)e(b)q(e)g(used)h(in)f(arbitrary)f(w)o(a)o(ys,)i
(but)f(it)f(is)h(still)224 1081 y(necessary)k(to)e(ha)o(v)o(e)f(agreed)
i(con)o(v)o(en)o(tions)e(for)h(register)h(use.)36 b(These)21
b(rules)f(are)g(often)224 1131 y(called)13 b FK(softwar)n(e)g(c)n
(onventions)k FN(since)c(they)g(constrain)g(the)h(w)o(a)o(y)e(that)g
(co)q(de)i(is)e(generated,)224 1181 y(but)j(are)f(not)g(constrain)o(ts)
g(whic)o(h)g(are)g(inheren)o(t)h(in)e(the)i(hardw)o(are)f(arc)o
(hitecture.)287 1231 y(In)j(order)h(to)f(see)h(wh)o(y)f(these)i(con)o
(v)o(en)o(tions)e(are)h(necessary)m(,)h(consider)f(the)g(separate)224
1280 y(compilation)d(of)i(mo)q(dules,)g(or)g(ev)o(en)h(just)g(the)g
(calling)e(of)h(library)g(pro)q(cedures.)31 b(When)224
1330 y(compiling)13 b(co)q(de)k(for)f(a)f(pro)q(cedure)j(whic)o(h)d
(calls)h(a)f(library)g(routine,)i(it)e(is)h(necessary)h(to)224
1380 y(kno)o(w)10 b(whic)o(h)g(mac)o(hine)f(registers)i(migh)o(t)d(b)q
(e)j(mo)q(di\014ed)e(b)o(y)g(the)i(called)f(routine,)h(and)e(whic)o(h)
224 1430 y(ones)j(are)g(guaran)o(teed)g(to)f(ha)o(v)o(e)g(the)h(same)e
(con)o(ten)o(ts)j(on)e(their)g(return.)19 b(If)11 b(parameters)g(are)
224 1480 y(passed)j(to)e(the)h(called)f(pro)q(cedure)j(in)d(registers,)
h(it)f(is)h(necessary)h(for)e(caller)h(and)f(callee)g(to)224
1529 y(agree)h(on)e(whic)o(h)h(registers)h(to)f(use,)h(and)e(the)i
(order)f(in)g(whic)o(h)f(the)i(parameters)f(app)q(ear)g(in)224
1579 y(these)17 b(registers.)24 b(Return)16 b(v)n(alues)f(from)f
(functions)h(m)o(ust)f(also)h(b)q(e)h(passed)g(in)f(a)g(register)224
1629 y(agreed)g(b)q(et)o(w)o(een)g(caller)f(and)g(callee.)287
1679 y(As)20 b(a)f(\014rst)h(step,)i(w)o(e)d(distinguish)g(b)q(et)o(w)o
(een)i(registers)g(whic)o(h)f(are)g(unc)o(hanged)g(b)o(y)224
1729 y(pro)q(cedure)e(calls,)d(and)g(those)h(whic)o(h)g(are)g(p)q
(ossibly)f(mo)q(di\014ed)f(b)o(y)h(suc)o(h)i(calls.)22
b(W)m(e)15 b(shall)224 1779 y(call)j(registers)h(whic)o(h)f(are)g
(threatened)i(b)o(y)d(pro)q(cedure)j(calls)e(\\)p FK(c)n(al)r
(ler-saves)f(r)n(e)n(gisters)s FN(".)224 1828 y(Supp)q(ose)g(that)g
(suc)o(h)g(a)e(register)j(happ)q(ens)f(to)f(ha)o(v)o(e)g(a)g(liv)o(e)
1181 1813 y Fz(4)1215 1828 y FN(datum)e(in)i(it)g(immedia)o(tely)224
1878 y(b)q(efore)g(the)f(call)f(to)g(some)g(pro)q(cedure.)22
b(Since)15 b(the)g(called)g(pro)q(cedure)h(is)f(free)g(to)g(destro)o(y)
224 1928 y(the)e(con)o(ten)o(ts)h(of)e(the)h(register)g(it)f(is)g(the)h
(resp)q(onsibilit)o(y)f(of)g(the)h FK(c)n(al)r(ler)j
FN(to)c(sa)o(v)o(e)g(the)h(v)n(alue,)224 1978 y(and)h(restore)i(it)d
(after)h(the)h(call)e(returns.)287 2028 y(The)j(other)h(category)f(of)g
(register,)h(is)f(those)h(whic)o(h)f(are)g(guaran)o(teed)h(to)f(ha)o(v)
o(e)g(their)224 2077 y(v)n(alues)d(preserv)o(ed)h(across)f(the)h(call)d
(and)i(return)g(of)f(an)o(y)g(pro)q(cedure.)19 b(W)m(e)13
b(shall)e(call)h(these)224 2127 y(registers)i(\\)p FK(c)n(al)r(le)n
(e-saves)g(r)n(e)n(gisters)s FN(".)i(If)c(liv)o(e)g(v)n(alues)g(are)h
(in)f(suc)o(h)h(registers)h(at)e(pro)q(cedure)224 2177
y(calls,)j(then)g(the)h(caller)f(tak)o(es)g(no)g(action)g(to)g(sa)o(v)o
(e)g(the)g(v)n(alues.)21 b(Ho)o(w)o(ev)o(er,)15 b(in)g(the)h(called)224
2227 y(pro)q(cedure,)i(if)e(it)f(b)q(ecomes)i(necessary)h(to)e(use)h
(suc)o(h)f(a)g(callee-sa)o(v)o(es)h(register,)g(then)g(the)224
2277 y(called)10 b(pro)q(cedure)h(m)o(ust)e(sa)o(v)o(e)h(the)g
(register)h(itself,)f(and)f(restore)i(the)g(original)d(v)n(alue)h(b)q
(efore)224 2326 y(returning)15 b(to)f(the)g(caller.)287
2376 y(T)m(o)19 b(place)i(all)e(registers)j(in)e(either)h(category)g
(is)f(v)o(ery)h(ine\016cien)o(t.)37 b(F)m(or)20 b(example,)224
2426 y(if)f(all)g(registers)i(w)o(ere)g(callee-sa)o(v)o(es,)g(then)g(a)
f(called)f(pro)q(cedure)j(w)o(ould)d(ha)o(v)o(e)g(to)h(sa)o(v)o(e)224
2476 y(and)d(subsequen)o(tly)g(restore)h(ho)o(w)o(ev)o(er)f(man)o(y)e
(registers)j(w)o(ere)f(required)g(to)f(execute)j(the)224
2526 y(pro)q(cedure)14 b(co)q(de.)19 b(In)12 b(man)o(y)e(cases)k(the)e
(sa)o(v)o(ed)h(registers)h(w)o(ould)d(not)h(con)o(tain)g(liv)o(e)f(v)n
(alues,)224 2576 y(so)i(the)g(pro)q(cedure)h(en)o(try)f(and)g(exit)f(w)
o(ould)g(carefully)g(sa)o(v)o(e)g(and)h(restore)h(garbage)e(v)n(alues.)
p 224 2610 577 2 v 271 2636 a Fy(4)288 2648 y Fx(By)d
Fu(live)k Fx(w)o(e)d(mean)e(that)g(the)h(v)n(alue)f(in)h(the)f
(register)g(migh)o(t)g(b)q(e)h(needed)e(again)h(after)g(the)h(call)g
(returns.)224 2688 y(Suc)o(h)i(v)n(alues)f(are)h(said)f(to)h(b)q(e)g
Fu(live)j(acr)n(oss)f(the)g(c)n(al)r(l)p Fx(.)p eop
%%Page: 44 50
44 49 bop 224 274 a FN(44)562 b FL(CHAPTER)14 b(3.)32
b(R)o(UNTIME)13 b(OR)o(GANIZA)m(TION)287 390 y FN(Ha)o(ving)g(a)g(con)o
(v)o(en)o(tion)h(in)f(whic)o(h)h(all)f(registers)i(w)o(ere)g(caller-sa)
o(v)o(es)f(w)o(ould)f(not)h(su\013er)224 440 y(from)h(the)h(same)f
(problem.)23 b(A)o(t)15 b(least)i(on)e(the)i(calling)d(side)i(the)h(co)
q(de)f(generator)h(w)o(ould)224 490 y(b)q(e)i(able)f(to)g(compute)f
(whic)o(h)h(registers)h(con)o(tain)f(liv)o(e)f(v)n(alues,)h(so)g
(garbage)g(w)o(ould)f(not)224 540 y(b)q(e)h(sa)o(v)o(ed)f(and)g
(restored.)30 b(Ho)o(w)o(ev)o(er,)18 b(making)c(all)i(registers)j
(caller-sa)o(v)o(es)e(su\013ers)i(from)224 590 y(an)g(equally)g(silly)f
(ine\016ciency)m(.)34 b(The)19 b(problem)f(is)h(that)g(during)g(co)q
(de)h(generation)g(for)224 640 y(the)15 b(caller)f(w)o(e)g(are)g(not)g
(a)o(w)o(are)f(of)h(ho)o(w)f(man)o(y)f(free)j(registers)g(the)f(called)
g(pro)q(cedure)i(will)224 689 y(actually)d(need)i(to)f(use.)19
b(Th)o(us)14 b(w)o(e)g(ma)o(y)e(carefully)h(sa)o(v)o(e)h(and)g(restore)
h(v)n(alues)f(in)f(order)h(to)224 739 y(free)h(up)f(registers)h(whic)o
(h)f(are)h(nev)o(er)f(used)h(b)o(y)f(the)g(callee.)287
789 y(It)i(turns)g(out)g(that)g(a)f(partitioning)g(of)g(the)h(register)
h(set)g(b)q(et)o(w)o(een)g(caller-sa)o(v)o(es)f(and)224
839 y(callee-sa)o(v)o(es,)e(with)f(appro)o(ximately)f(equal)h(n)o(um)o
(b)q(ers)g(in)g(eac)o(h)i(category)m(,)e(is)g(statistically)224
889 y(b)q(etter)g(than)e(either)g(of)f(the)i(pure)f(strategies)h(men)o
(tioned)e(b)q(efore.)18 b(The)11 b(idea)g(is)f(as)h(follo)o(ws.)224
938 y(During)k(co)q(de)h(generation)g(our)f(register)i(allo)q(cator)d
(will)g(try)i(to)f(k)o(eep)h(v)n(alues)g(whic)o(h)f(are)224
988 y(liv)o(e)c(across)i(pro)q(cedure)g(calls)f(in)f(callee-sa)o(v)o
(es)h(registers.)19 b(The)12 b(caller-sa)o(v)o(es)g(registers)h(will)
224 1038 y(b)q(e)20 b(used)f(for)f(short-liv)o(ed)h(v)n(alues)f(whic)o
(h)g(are)h(not)g(liv)o(e)f(across)h(an)o(y)f(call.)32
b(In)18 b(a)h(called)224 1088 y(pro)q(cedure,)c(if)e(only)f(a)h(few)g
(registers)i(are)f(needed,)g(then)g(the)g(register)g(allo)q(cator)f
(will)e(use)224 1138 y(the)16 b(caller-sa)o(v)o(es)f(set)h(\014rst,)g
(since)f(these)i(are)e(kno)o(wn)g(to)f(b)q(e)i(free)g(to)e(use)i(and)f
(mo)q(dify)d(at)224 1187 y(will.)k(If)11 b(it)h(should)f(turn)h(out)f
(that)h(more)e(registers)k(are)d(needed,)i(or)f(the)g(called)f(pro)q
(cedure)224 1237 y(itself)k(has)g(v)n(alues)f(whic)o(h)h(are)g(liv)o(e)
f(across)i(another)f(pro)q(cedure)i(call,)d(then)h(some)f(callee-)224
1287 y(sa)o(v)o(es)h(registers)g(m)o(ust)e(b)q(e)i(freed.)287
1337 y(F)m(or)10 b(the)h(kind)f(of)g(co)q(de)i(generators)g(that)e(w)o
(e)h(consider)h(here,)g(and)e(whic)o(h)h(bu\013er)h(whole)224
1387 y(pro)q(cedures)i(un)o(til)c(after)h(register)h(allo)q(cation)d
(has)i(b)q(een)h(p)q(erformed,)f(it)g(is)g(normal)d(to)j(sa)o(v)o(e)224
1437 y(an)o(y)h(callee-sa)o(v)o(es)g(registers)i(in)d(the)h
FK(pr)n(o)n(c)n(e)n(dur)n(e)h(entry)g(pr)n(olo)n(g)p
FN(.)k(This)11 b(prolog)g(p)q(erforms)h(the)224 1486
y(housek)o(eeping)j(asso)q(ciated)h(with)e(pro)q(cedure)i(en)o(try)m(.)
j(Similarly)l(,)11 b(the)k(restoration)g(of)f(an)o(y)224
1536 y(callee-sa)o(v)o(es)e(registers)g(forms)d(part)i(of)f(the)h
FK(pr)n(o)n(c)n(e)n(dur)n(e)g(exit)h(epilo)n(g)p FN(.)17
b(This)10 b(epilog)g(p)q(erforms)224 1586 y(the)15 b(housek)o(eeping)g
(asso)q(ciated)f(with)g(the)g(pro)q(cedure)i(exit.)224
1702 y FH(3.2.2)56 b(Activ)m(ation)17 b(records)224 1779
y FN(In)i(languages)f(whic)o(h)h(supp)q(ort)g(the)g(recursiv)o(e)h
(calling)e(of)g(pro)q(cedures)j(eac)o(h)e(call)f(of)g(a)224
1828 y(pro)q(cedure)f(m)o(ust)e(ha)o(v)o(e)g(a)f(new)i(activ)n(ation)e
(record)i(allo)q(cated)f(to)g(it.)21 b(Th)o(us)16 b(if)e(recursion)224
1878 y(o)q(ccurs,)e(eac)o(h)e(in)o(v)o(o)q(cation)f(of)g(a)g(recursiv)o
(e)j(pro)q(cedure)f(has)f(a)g(separate,)h(priv)n(ate)f(activ)n(ation)
224 1928 y(record.)35 b(Languages)18 b(whic)o(h)h(do)g(not)g(supp)q
(ort)h(recursion,)g(suc)o(h)g(as)f FK(F)o(OR)m(TRAN)p
FN(,)f(can)224 1978 y(allo)q(cate)13 b(activ)n(ation)f(records)i
(statically)m(.)j(Ev)o(en)c(for)g(recursiv)o(e)h(languages,)f(it)f(is)h
(p)q(ossible)224 2028 y(to)18 b(allo)q(cate)f(most)f(activ)n(ation)g
(records)j(statically)m(,)d(but)i(it)f(is)g(not)g(pro\014table)h(to)f
(do)g(so)224 2077 y(on)d FK(RISC)21 b FN(mac)o(hines)13
b(where)i(access)h(to)e(static)h(v)n(ariables)e(ma)o(y)f(b)q(e)j(more)e
(costly)h(than)g(to)224 2127 y(v)n(ariables)g(in)f(a)h(lo)q(cal)f(stac)
o(k)h(frame.)287 2177 y(Logically)m(,)d(activ)n(ation)h(records)k(con)o
(tain)d(sev)o(eral)i(categories)f(of)g(data.)287 2259
y Ft(\017)20 b FN(pro)q(cedure)c(link)n(age)d(information)287
2341 y Ft(\017)20 b FN(parameter)14 b(data)287 2424 y
Ft(\017)20 b FN(declared)15 b(lo)q(cal)e(v)n(ariables)287
2506 y Ft(\017)20 b FN(w)o(orkspace)15 b(for)e(the)i(pro)q(cedure)224
2588 y(W)m(e)f(deal)g(with)f(eac)o(h)h(of)g(these)h(categories)g(in)e
(some)g(detail)h(later.)287 2638 y(There)j(is)g(actually)e(no)i(reason)
g(that)f(activ)n(ation)g(records)i(m)o(ust)d(b)q(e)i(allo)q(cated)f(on)
h(a)224 2688 y(stac)o(k.)23 b(Logically)m(,)13 b(at)i(an)o(y)g(p)q(oin)
o(t)g(in)f(execution)j(of)d(a)h(program)f(the)i(activ)n(ation)e
(records)p eop
%%Page: 45 51
45 50 bop 224 274 a FL(3.2.)31 b(PR)o(OCEDURE)14 b(CALL)g(AND)g(RETURN)
602 b FN(45)224 390 y(of)15 b(all)f(the)i(curren)o(tly)g(activ)o(e)f
(pro)q(cedures)j(form)13 b(a)i(link)o(ed)g(list.)21 b(A)o(t)15
b(the)h(head)g(of)e(list)h(w)o(e)224 440 y(ha)o(v)o(e)i(the)g(activ)n
(ation)e(record)i(for)f(the)h FK(curr)n(ently)g(exe)n(cuting)g(pr)n(o)n
(c)n(e)n(dur)n(e)p FN(.)25 b(In)17 b(the)g(tail)e(of)224
490 y(the)20 b(list)e(w)o(e)h(ha)o(v)o(e)g(the)g(activ)n(ation)e
(record)j(of)e(the)i FK(c)n(al)r(ler)i FN(of)c(the)i(curren)o(t)g(pro)q
(cedure,)224 540 y(follo)o(w)o(ed)d(b)o(y)g(the)i(caller)f(of)f(the)i
(caller,)f(and)g(so)g(on.)29 b(If)18 b(the)h(curren)o(t)g(pro)q(cedure)
h(calls)224 590 y(another)14 b(pro)q(cedure,)h(the)f(activ)n(ation)e
(record)j(for)e(that)g(pro)q(cedure)i(is)e(added)h(to)f(the)h(list.)224
640 y(If)h(the)g(curren)o(t)h(pro)q(cedure)g(returns,)g(the)f(head)g
(of)f(the)h(list)f(is)g(remo)o(v)o(ed,)g(the)h(activ)n(ation)224
689 y(record)f(of)e(the)h(caller)f(b)q(ecomes)h(the)g(head)f(of)g(the)h
(new)g(list,)f(and)g(the)h(caller)f(b)q(ecomes)h(the)224
739 y(curren)o(tly)i(activ)o(e)f(pro)q(cedure.)287 791
y(Ho)o(w)o(ev)o(er,)i(since)g(the)h(addition)d(and)i(remo)o(v)n(al)d
(of)i(activ)n(ation)g(records)i(alw)o(a)o(ys)e(tak)o(es)224
840 y(place)d(at)g(the)h(head)f(of)f(the)h(list,)g(it)f(mak)o(es)g
(sense)i(to)f(sp)q(ecialize)g(the)h(list)e(to)h(a)f(stac)o(k.)18
b(Th)o(us)224 890 y(w)o(e)13 b(sp)q(eak)h(of)e FK(stack)i(fr)n(ames)h
FN(rather)f(than)e(activ)n(ation)g(records,)i(almost)c(as)j(though)g
(using)224 940 y(a)h(stac)o(k)g(w)o(as)g(the)h(only)e(p)q(ossible)h
(organization.)224 1056 y FO(Explicitly)f(link)o(ed)h(activ)m(ation)g
(records)224 1136 y FN(There)21 b(are)f(t)o(w)o(o)f(circumstances)h
(under)g(whic)o(h)g(activ)n(ation)e(records)j(ma)o(y)c(usefully)i(or)
224 1185 y(necessarily)c(b)q(e)g(implemen)o(ted)c(b)o(y)j(means)f(of)g
(an)h(explicit)g(link)o(ed)f(list.)287 1237 y(When)j(a)h(pro)q(cedural)
g(language)f(is)g(implemen)o(ted)f(b)o(y)h(tranlation)g(to)g(a)g(lo)o
(w)o(er)h(lev)o(el)224 1287 y(language,)h(there)h(are)f(usually)f
(certain)i(di\016culties)e(caused)i(b)o(y)f(the)g(mismatc)o(h)d(in)j
(the)224 1336 y(seman)o(tics)10 b(of)f(the)i(source)g(and)f(target)g
(languages.)16 b(Language)10 b FM(C)i FN(is)e(almost)e(the)j(univ)o
(ersal)224 1386 y(c)o(hoice)j(for)e(target)h(languages)g(for)f(this)h
(purp)q(ose,)h(b)q(ecause)g(of)e(its)h(wide)g(a)o(v)n(ailabilit)o(y)l
(,)c(and)224 1436 y(the)16 b(ease)h(with)e(whic)o(h)g(its)h(t)o(yp)q(e)
g(system)f(ma)o(y)e(b)q(e)j(breac)o(hed.)24 b(Ho)o(w)o(ev)o(er,)16
b(when)g FK(Pasc)n(al)5 b FN(-)224 1486 y(lik)o(e)12
b(languages)f(are)i(translated)g(to)f FM(C)j FN(there)e(is)f(no)g
(simple)f(w)o(a)o(y)g(of)h(expressing)h(the)g(scop)q(e)224
1536 y(rules)j(of)e FK(Pasc)n(al)20 b FN(in)14 b FM(C)k
FN(terms.)j(In)15 b(particular,)f(in)h(language)f FM(C)j
FN(there)g(is)e(no)f(facilit)o(y)g(for)224 1585 y(referring)g(to)f(the)
g(lo)q(cal)f(data)h(of)f(lexically)g(enclosing)g(pro)q(cedures,)j(the)f
(so-called)e FK(uplevel)224 1635 y(data)s FN(.)25 b(There)17
b(are)f(sev)o(eral)h(tric)o(ks)f(whic)o(h)g(ma)o(y)e(b)q(e)i(used)h(to)
f(circum)o(v)o(en)o(t)f(this)h(problem,)224 1685 y(and)f(one)f(of)g
(the)h(simplest,)e(conceptually)m(,)g(is)h(to)h(allo)q(cate)e(activ)n
(ation)g(records)j(from)d(the)224 1735 y FK(he)n(ap)h
FN(rather)d(than)f(use)h(the)g(language)e FM(C)j FN(stac)o(k.)18
b(In)10 b(this)g(case)h(uplev)o(el)f(activ)n(ation)f(records)224
1785 y(app)q(ear)14 b(as)e(explicit)h(records)h(in)e(a)h(link)o(ed)f
(list,)g(and)g(ma)o(y)f(b)q(e)i(accessed)i(b)o(y)e(the)g(normal)e
FM(C)224 1835 y FN(selection)k(mec)o(hanisms.)287 1886
y(The)d(second)h(circumstance)f(under)g(whic)o(h)g(explicitly)e(link)o
(ed)h(activ)n(ation)g(records)i(are)224 1936 y(found)i(is)f(in)h(the)g
(implemen)o(tation)d(of)i(those)h(functional)f(languages)g(whic)o(h)h
(pro)o(vide)g(for)224 1986 y FK(c)n(ontinuations)p FN(.)k(In)12
b(these)h(languages)f(the)h(strict)g(order)f(of)g(pro)q(cedure)i(call)d
(and)h(return)h(is)224 2035 y(complicated)g(b)o(y)g(the)h(p)q
(ossibilit)o(y)e(of)g(susp)q(ending)j(a)e(pro)q(cedure,)i(and)e(then)h
(reactiv)n(ating)224 2085 y(it)20 b(later.)37 b(In)20
b(suc)o(h)g(cases)i(the)e(activ)n(ation)f(records)j(form)c(a)i(tree.)37
b(In)20 b(this)g(tree,)j(the)224 2135 y(curren)o(tly)16
b(activ)o(e)g(and)f(susp)q(ended)i(pro)q(cedures)g(are)f(at)f(the)g
(lea)o(v)o(es,)h(and)f(the)g(paren)o(t)h(of)224 2185
y(eac)o(h)f(activ)n(ation)d(record)j(is)f(the)h(record)g(of)e(its)h
(caller.)224 2309 y FH(3.2.3)56 b(Stac)n(k)18 b(organization)224
2389 y FN(In)f(the)h(usual)f(w)o(a)o(y)f(of)g(implemen)o(ting)e(pro)q
(cedural)j(languages)g(activ)n(ation)e(records)k(are)224
2438 y(allo)q(cated)d(in)f(a)h FK(runtime)g(stack)p FN(.)24
b(When)16 b(this)g(is)f(the)i(case,)g(w)o(e)f(refer)h(to)e(the)i(activ)
n(ation)224 2488 y(records)e(as)f FK(stack)h(fr)n(ames)p
FN(.)i(The)d(activ)n(ation)e(records)j(exist)f(in)f(a)g(separate)i
(memory)c(seg-)224 2538 y(men)o(t,)j(whic)o(h)g(t)o(ypically)f(has)i
(the)g(b)q(ene\014t)g(of)f(some)g(hardw)o(are)h(supp)q(ort.)20
b(In)15 b(traditional)224 2588 y(mac)o(hine)j(arc)o(hitectures,)j(one)e
(mac)o(hine)e(register)i(w)o(as)g(reserv)o(ed)h(for)e(use)i(as)e(a)g
FK(top-of-)224 2638 y(stack)d(p)n(ointer)p FN(,)f(\()p
FK(sp)s FN(\),)f(and)h(certain)g(instructions)h(use)f(the)h(stac)o(k)f
(p)q(oin)o(ter)g(as)g(an)g(implicit)224 2688 y(op)q(erand.)p
eop
%%Page: 46 52
46 51 bop 224 274 a FN(46)562 b FL(CHAPTER)14 b(3.)32
b(R)o(UNTIME)13 b(OR)o(GANIZA)m(TION)p 867 390 307 4
v 867 1065 4 675 v 1170 1065 V 867 1068 307 4 v 870 541
300 2 v 870 616 V 870 916 V 720 616 132 2 v 810 615 a
FC(-)-188 b Fn(fp)p 720 1066 V 810 1065 a FC(-)g Fn(sp)907
597 y FN(stac)o(k)15 b(mark)907 709 y(lo)q(cal)907 765
y(v)n(ariable)907 822 y(space)907 447 y(incoming)907
503 y(parameters)907 990 y(w)o(orkspace)451 1198 y(Figure)f(3.4:)j
(Stac)o(k)d(frame)f(with)g(stac)o(k)i(and)e(frame)g(p)q(oin)o(ters)224
1335 y FO(Stac)o(k)j(and)f(frame)g(p)q(oin)o(ters)224
1415 y FN(The)g FK(Intel-386)20 b FN(is)14 b(t)o(ypical)f(of)g(these)i
(con)o(v)o(en)o(tional)e(arc)o(hitectures.)21 b(The)14
b(register)h(\\)p FG(esp)p FN(")224 1465 y(\(32-bit)i(extended)i(stac)o
(k)f(p)q(oin)o(ter\))g(p)q(oin)o(ts)f(to)h(the)g(top)f(of)g(the)i(run)o
(time)d(stac)o(k,)i(whic)o(h)224 1515 y(gro)o(ws)13 b(do)o(wn)o(w)o
(ard)f(in)g(the)h(address)h(space.)908 1500 y Fz(5)945
1515 y FN(The)f(\\)p FG(call)p FN(")e(and)h(\\)p FG(ret)p
FN(")g(\(return\))i(instruc-)224 1565 y(tions)f(mo)q(dify)d(the)j(stac)
o(k)g(p)q(oin)o(ter)g(as)g(side-e\013ects)i(of)d(their)h(execution,)g
(and)f(\\)p FG(push)p FN(")f(and)224 1614 y(\\)p FG(pop)p
FN(")i(instructions)i(op)q(erate)g(on)e(this)h(stac)o(k.)287
1666 y(It)19 b(is)f(con)o(v)o(en)o(tional)g(to)h(reserv)o(e)i(a)d
(second)i(hardw)o(are)f(register)h(as)f(a)g(p)q(oin)o(ter)g(to)g(a)224
1716 y(kno)o(wn)g(lo)q(cation)g(in)f(the)i(stac)o(k)g(frame.)33
b(This)19 b(register)h(is)g(called)f(the)g FK(fr)n(ame)h(p)n(ointer)224
1766 y(r)n(e)n(gister)t FN(,)d(\()p FK(fp)s FN(\).)28
b(In)18 b(the)g FK(Intel-386)23 b FN(arc)o(hitecture,)c(the)f(\\)p
FG(ebp)p FN(")e(register)j(is)e(used)h(as)g(the)224 1816
y(frame)c(p)q(oin)o(ter.)23 b(In)16 b(this)f(arc)o(hitecture)i(the)f
(top-of-stac)o(k)f(ma)o(y)e(c)o(hange)j(during)f(the)h(ex-)224
1865 y(ecution)g(of)f(the)h(pro)q(cedure,)h(for)e(example,)f(as)h(pro)q
(cedure)j(parameters)d(are)h(pushed,)g(so)224 1915 y(the)g(frame)e(p)q
(oin)o(ter)h(pro)o(vides)g(a)f(\014xed)i(reference)h(in)e(the)g(frame)f
(throughout)h(execution)224 1965 y(of)f(the)g(pro)q(cedure.)287
2017 y(The)k(la)o(y)o(out)f(of)h(stac)o(k)g(frames,)g(for)g(suc)o(h)h
(mac)o(hine)d(organizations)i(is)g(t)o(ypically)e(as)224
2067 y(sho)o(wn)e(in)f(\014gure)h(3.4.)j(There)e(are)f(four)g(regions)f
(in)h(the)g(frame:)i(the)f(stac)o(k)f(mark,)d(whic)o(h)224
2117 y(con)o(tains)g(the)g(link)n(age)f(information,)e(the)j(incoming)e
(parameter)h(area,)h(the)h(lo)q(cal)d(v)n(ariable)224
2166 y(area,)16 b(and)g(\014nally)e(an)o(y)h(w)o(orkspace)i(required)g
(b)o(y)e(the)h(pro)q(cedure.)26 b(The)16 b(frame)e(p)q(oin)o(ter)224
2216 y(register)19 b(allo)o(ws)c(con)o(v)o(enien)o(t)j(access)h(to)e
(the)g(parameters)g(and)g(lo)q(cal)g(data)f(of)h(the)g(pro-)224
2266 y(cedure.)22 b(P)o(arameters)15 b(will)e(ha)o(v)o(e)i(a)f(p)q
(ositiv)o(e)g(o\013set)i(from)d FK(fp)k FN(while)d(lo)q(cal)g(v)n
(ariables)g(will)224 2316 y(ha)o(v)o(e)g(negativ)o(e)g(o\013sets.)287
2368 y(The)f(stac)o(k)h(mark)e(con)o(tains)h(at)g(least)g(enough)h
(information)c(to)j(allo)o(w)f(the)h(pro)q(cedure)224
2417 y(to)19 b(return,)h(restoring)f(the)g(stac)o(k)g(state)g(of)f(the)
h(caller.)31 b(F)m(or)18 b(the)h FK(386)25 b FN(only)18
b(t)o(w)o(o)g(data)224 2467 y(are)d(necessary:)21 b(the)15
b(address)h(of)e(the)h(next)g(instruction)g(in)e(the)j(calling)c(pro)q
(cedure,)k(and)224 2517 y(the)h(frame)e(p)q(oin)o(ter)h(v)n(alue)f(of)g
(the)i(caller.)24 b(F)m(or)15 b(this)h(mac)o(hine)f(the)i(\\)p
FG(call)j FK(pr)n(o)n(c-name)s FN(")224 2567 y(instruction)13
b(transfers)h(con)o(trol)f(to)f(the)h(en)o(try)h(p)q(oin)o(t)e(of)g
(the)h(nominated)e(pro)q(cedure,)j(and)p 224 2610 577
2 v 271 2636 a Fy(5)288 2648 y Fx(Note)f(the)f(p)q(erv)o(ersit)o(y)f
(of)i(this)g(con)o(v)o(en)o(tion)o(.)18 b(W)m(e)13 b(call)g(the)f
(limit)g(of)h(the)g(stac)o(k)f(\\the)g(top",)g(despite)224
2688 y(the)f(fact)g(that)f(in)h(memory)f(address)g(terms)g(it)h(is)h
(actually)d(the)i(lo)o(w)o(est)g(address)f(on)h(the)f(stac)o(k.)p
eop
%%Page: 47 53
47 52 bop 224 274 a FL(3.2.)31 b(PR)o(OCEDURE)14 b(CALL)g(AND)g(RETURN)
602 b FN(47)224 390 y(pushes)14 b(the)e(address)h(of)f(the)g
(instruction)g(follo)o(wing)e(the)i(call)f(\(the)i FK(r)n(eturn)f(addr)
n(ess)s FN(\))h(on)o(to)224 440 y(the)k(stac)o(k.)23
b(Figure)16 b(3.5)f(sho)o(ws)h(the)g(stac)o(k)g(state)g(b)q(efore,)h
(during)e(and)h(after)f(pro)q(cedure)224 490 y FM(P)20
b FN(calls)13 b(pro)q(cedure)j FM(Q)p FN(.)i(In)c(part)g(\()p
FM(a)p FN(\))g(the)h(stac)o(k)f(frame)f(of)g FM(P)19
b FN(is)14 b(sho)o(wn,)f(with)h(the)h(frame)224 540 y(p)q(oin)o(ter)k
(p)q(oin)o(ting)e(to)h(the)h(stac)o(k)f(mark,)f(and)h(the)h(stac)o(k)g
(p)q(oin)o(ter)f(to)g(the)h(`top')e(of)h(the)224 590
y(stac)o(k.)289 704 y FD(\()p Fm(a)p FD(\))p 221 734
187 4 v 221 914 4 180 v 404 914 V 221 917 187 4 v 239
773 a Fr(P)f Fx(params)p 223 794 184 2 v 223 809 2 15
v 404 809 V 223 811 184 2 v 239 869 a Fr(P)g Fx(lo)q(cals)681
704 y FD(\()p Fm(b)p FD(\))p 611 734 187 4 v 611 914
4 180 v 794 914 V 611 917 187 4 v 629 773 a Fr(P)g Fx(params)p
611 914 V 611 974 4 60 v 794 974 V 611 977 187 4 v 629
953 a Fr(Q)12 b Fx(params)p 613 794 184 2 v 613 809 2
15 v 794 809 V 613 811 184 2 v 629 869 a Fr(P)17 b Fx(lo)q(cals)1071
704 y FD(\()p Fm(c)p FD(\))p 1001 734 187 4 v 1001 914
4 180 v 1184 914 V 1001 917 187 4 v 1019 773 a Fr(P)g
Fx(params)p 1001 914 V 1001 989 4 75 v 1184 989 V 1001
992 187 4 v 1019 953 a Fr(Q)11 b Fx(params)p 1002 794
184 2 v 1002 809 2 15 v 1184 809 V 1002 811 184 2 v 1019
869 a Fr(P)17 b Fx(lo)q(cals)p 1002 974 V 1002 989 2
15 v 1184 989 V 1002 991 184 2 v 1459 704 a FD(\()p Fm(d)p
FD(\))p 1390 734 187 4 v 1390 914 4 180 v 1574 914 V
1390 917 187 4 v 1409 773 a Fr(P)g Fx(params)p 1390 914
V 1390 1154 4 240 v 1574 1154 V 1390 1157 187 4 v 1409
953 a Fr(Q)11 b Fx(params)p 1392 794 184 2 v 1392 809
2 15 v 1574 809 V 1392 811 184 2 v 1409 869 a Fr(P)17
b Fx(lo)q(cals)p 1392 974 V 1392 989 2 15 v 1574 989
V 1392 991 184 2 v 1409 1064 a Fr(Q)11 b Fx(lo)q(cals)p
419 915 45 2 v 419 914 a FC(\033)478 923 y Fu(sp)p 419
810 V 419 809 a FC(\033)480 818 y Fu(fp)p 809 975 V 809
974 a FC(\033)868 983 y Fu(sp)p 809 810 V 809 809 a FC(\033)869
818 y Fu(fp)p 1199 990 V 1199 989 a FC(\033)1257 998
y Fu(sp)p 1199 810 V 1199 809 a FC(\033)1259 818 y Fu(fp)p
1589 1155 V 1589 1154 a FC(\033)1647 1163 y Fu(sp)p 1589
990 V 1589 989 a FC(\033)1649 998 y Fu(fp)p 1363 982
2 12 v 1363 959 V 1363 935 V 1363 912 V 1363 889 V 1363
866 V 1363 843 V 1363 820 V 1364 982 45 2 v 1364 981
a FC(\033)1409 982 y Fl(p)p 1364 810 30 2 v 1352 809
a FC(-)396 1287 y FN(Figure)j(3.5:)j(Pro)q(cedure)f FM(P)j
FN(calls)14 b(pro)q(cedure)i FM(Q)p FN(,)d(with)g(parameters)287
1414 y(In)f(part)h(\()p FM(b)p FN(\),)f(the)i(pro)q(cedure)g
FM(P)k FN(has)13 b(pushed)g(the)g(parameters)g(for)f
FM(Q)h FN(on)o(to)f(the)h(stac)o(k)224 1463 y(in)e(preparation)g(for)f
(the)h(call.)17 b(Note)11 b(that)g(the)g(stac)o(k)g(p)q(oin)o(ter)g
(has)g(mo)o(v)o(ed)e(to)i(accomo)q(date)224 1513 y(the)k(parameters,)e
(but)h(the)h(frame)e(p)q(oin)o(ter)h(is)f(unc)o(hanged.)287
1573 y(In)d(part)h(\()p FM(c)p FN(\),)h(the)f(pro)q(cedure)i
FM(P)j FN(has)11 b(executed)i(the)e(\\)p FG(call)p FN(")f(instruction.)
17 b(The)11 b(return)224 1622 y(address)16 b(in)e(the)g(co)q(de)h(of)f
FM(P)19 b FN(is)14 b(pushed)h(on)o(to)f(the)h(stac)o(k)f(as)h(a)e
(side-e\013ect)j(of)e(the)h(\\)p FG(call)p FN(")224 1672
y(instruction.)k(Con)o(trol)12 b(has)i(no)o(w)f(passed)h(to)f(pro)q
(cedure)j FM(Q)p FN(,)d(whic)o(h)g(pro)q(ceeds)i(to)e(execute)224
1722 y(its)h FK(pr)n(o)n(c)n(e)n(dur)n(e)h(entry)f(pr)n(olo)n(g)p
FN(.)287 1781 y(The)g(purp)q(ose)g(of)f(the)h(prolog)f(is)g(to)g
(complete)g(the)h(creation)g(of)f(the)h(stac)o(k)g(mark)d(and)224
1831 y(stac)o(k)18 b(frame)e(for)g FM(Q)p FN(.)28 b(In)17
b(this)g(case)h(the)f(stac)o(k)h(mark)d(consists)j(of)f(just)g(t)o(w)o
(o)g(data:)24 b(the)224 1881 y(return)14 b(address)f(is)f(already)g
(pushed,)h(and)e(a)h(p)q(oin)o(ter)g(to)g(the)h(previous)f(stac)o(k)h
(mark)d(m)o(ust)224 1931 y(no)o(w)15 b(b)q(e)g(pushed)h(also.)21
b(Finally)m(,)12 b(the)k(stac)o(k)f(p)q(oin)o(ter)g(m)o(ust)f(b)q(e)i
(adjusted)f(do)o(wn)o(w)o(ard,)f(to)224 1981 y(mak)o(e)h(space)i(for)f
(the)h(lo)q(cal)f(v)n(ariables)f(of)h FM(Q)p FN(,)g(arriving)f(at)h
(\014gure)f(3.5)p FM(d)o FN(.)25 b(The)16 b FK(Intel-x86)224
2030 y FN(assem)o(bler)e(is)g(|)249 2188 y FF(Q:)700
b FD(;)13 b FE(start)f(entry)h(pr)n(olo)n(g)f(of)h(Q)417
2233 y FF(pushl)68 b(ebp)344 b FD(;)13 b FE(push)f(long)g(fr)n(ame)i(p)
n(ointer)417 2279 y FF(movl)88 b(esp,ebp)264 b FD(;)13
b FE(curr)n(ent)f(sp)h(b)n(e)n(c)n(omes)f(new)i(fp)417
2325 y FF(subl)88 b(48,esp)284 b FD(;)13 b FE(make)g(r)n(o)n(om)g(for)h
(lo)n(c)n(al)e(vars)417 2370 y(save)h(c)n(al)r(le)n(e-sav)o(es)d(r)n(e)
n(gisters,)i(if)h(ne)n(e)n(de)n(d)224 2479 y FN(where)f(w)o(e)e(ha)o(v)
o(e)g(assumed)f(that)h(in)g(this)g(example)f(the)h(total)f(space)i
(required)g(for)f(v)n(ariables)224 2529 y(and)k(w)o(orkspace)h(is)f
(48-b)o(ytes.)287 2588 y(The)f(v)n(alue)f(of)g(the)i(previous)f(frame)e
(p)q(oin)o(ter,)i(whic)o(h)g(is)f(sa)o(v)o(ed)h(in)g(the)g(stac)o(k)g
(mark,)e(is)224 2638 y(called)j(the)g FK(dynamic)i(link)p
FN(.)i(The)c(link)o(ed)f(list)g(of)g(stac)o(k)i(marks)d(whic)o(h)i(is)g
(thereb)o(y)h(formed)224 2688 y(is)f(called)g(the)g FK(dynamic)i(chain)
p FN(.)p eop
%%Page: 48 54
48 53 bop 224 274 a FN(48)562 b FL(CHAPTER)14 b(3.)32
b(R)o(UNTIME)13 b(OR)o(GANIZA)m(TION)224 390 y FO(The)j(epilog)e(with)g
(stac)o(k)i(and)f(frame)g(p)q(oin)o(ters)224 472 y FN(The)g(pro)q
(cedure)h(return)g(pro)q(cess)g(retraces)g(the)f(steps)g(of)f(the)h
(call.)j(The)d(\\)p FG(ret)p FN(")e(instruc-)224 522
y(tion)f(p)q(ops)h(the)g(top-of-stac)o(k)e(v)n(alue)h(in)o(to)f(the)i
FK(pr)n(o)n(gr)n(am)g(c)n(ounter)k FN(or)12 b FK(instruction)h(p)n
(ointer)p FN(,)224 572 y(as)18 b(the)g FK(Intel)k FN(do)q(cumen)o
(tation)16 b(calls)h(it.)29 b(W)m(e)17 b(m)o(ust)g(th)o(us)h(exp)q(ose)
g(the)g(return)h(address)224 622 y(b)o(y)d(discarding)g(the)h(lo)q(cal)
f(v)n(ariable)f(space,)i(and)f(restoring)h(the)g(caller's)f(frame)f(p)q
(oin)o(ter)224 671 y(v)n(alue.)20 b(The)15 b(instructions)g(of)f(the)h
(pro)q(cedure)i(exit)d(epilog)g(corresp)q(onding)h(to)g(the)g(en)o(try)
224 721 y(prolog)e(example)g(are)h(|)249 851 y FF(xLab:)640
b FD(;)13 b FE(start)f(exit)h(epilo)n(g)f(of)h(Q)417
897 y(r)n(estor)n(e)g(c)n(al)r(le)n(e-save)o(s)e(r)n(e)n(gisters,)g(if)
j(save)n(d)417 943 y FF(addl)88 b(48,esp)284 b FD(;)13
b FE(r)n(emove)g(lo)n(c)n(al)f(variable)f(sp)n(ac)n(e)417
988 y FF(popl)88 b(ebp)344 b FD(;)13 b FE(r)n(estor)n(e)f(c)n(al)r
(ler's)g(fr)n(ame)h(p)n(ointer)417 1034 y FF(ret)512
b FD(;)13 b FE(p)n(op)f(r)n(eturn)h(addr)n(ess)f(and)g(r)n(eturn)287
1122 y FN(Finally)m(,)7 b(the)j(used)h(parameter)e(v)n(alues)g(m)o(ust)
f(b)q(e)i(remo)o(v)o(ed)f(to)g(get)h(bac)o(k)f(to)g(\014gure)15
b(3.5)p FM(a)o FN(.)224 1172 y(This)e(ma)o(y)d(b)q(e)j(done)f(either)h
(b)o(y)g(the)f(returning)h(pro)q(cedure)h(during)e(the)h(epilog,)e(or)i
(b)o(y)f(the)224 1222 y(caller)k(after)g(the)h(call.)23
b(W)m(e)16 b(shall)f(assume)g(that)h(the)h(parameters)f(are)g(remo)o(v)
o(ed)f(b)o(y)h(the)224 1272 y(caller)e(in)g(this)g(case.)19
b(T)o(ypical)13 b(co)q(de)h(for)g(the)g(call)f(of)h FM(Q)f
FN(in)h(pro)q(cedure)h FM(P)20 b FN(migh)o(t)12 b(b)q(e)i(|)417
1402 y FE(push)e(Q's)i(p)n(ar)n(ameters)e(onto)g(the)h(stack)417
1447 y FF(call)88 b(Q)384 b FD(;)13 b FE(c)n(al)r(l)f(the)h(pr)n(o)n(c)
n(e)n(dur)n(e)417 1493 y FF(addl)88 b(16,esp)284 b FD(;)13
b FE(r)n(emove)g(16)g(bytes)f(of)h(p)n(ar)n(ameters)224
1581 y FN(where)k(w)o(e)e(ha)o(v)o(e)g(assumed)f(that)h(there)i(w)o
(ere)f(16)e(b)o(ytes)i(of)e(parameters)h(passed)h(to)f
FM(Q)g FN(in)224 1631 y(this)f(example.)224 1753 y FK(RISC)23
b FO(stac)o(k)15 b(frames)224 1835 y FN(T)o(ypical)h
FK(RISC)22 b FN(mac)o(hine)16 b(arc)o(hitectures)i(encourage)f
(simpli\014ed)e(call)g(and)i(return)g(con-)224 1885 y(v)o(en)o(tions,)d
(and)g(pass)g(at)g(least)g(the)g(\014rst)h(few)f(parameters)g(in)g
(registers.)19 b(T)o(ypically)m(,)12 b(they)224 1935
y(do)h(not)g(ha)o(v)o(e)g(instructions)h(whic)o(h)e(p)q(erform)h
(side-e\013ects,)i(suc)o(h)e(as)g(the)h(adjustmen)o(t)e(of)h(a)224
1985 y(stac)o(k)h(p)q(oin)o(ter.)j(Indeed,)d(for)e(man)o(y)f(of)h
(these)i(mac)o(hines)e(the)i(use)f(of)f(particular)h(registers)224
2034 y(as)i(stac)o(k)g(and)g(frame)e(p)q(oin)o(ters)j(is)e(only)g(a)g
(matter)g(of)g(soft)o(w)o(are)h(con)o(v)o(en)o(tion,)f(and)h(is)f(not)
224 2084 y(\\built-in")i(in)o(to)h(the)i(hardw)o(are)f(arc)o(hitecture)
h(in)e(an)o(y)h(w)o(a)o(y)m(.)28 b(The)18 b(details)g(of)f(parame-)224
2134 y(ter)f(passing)f(are)g(giv)o(en)g(in)f(the)i(next)f(section,)h
(ho)o(w)o(ev)o(er)f(for)g(the)g(momen)o(t)e(it)h(su\016ces)i(to)224
2184 y(note)i(that)f(non-leaf)f(pro)q(cedures,)k(that)d(is,)g(pro)q
(cedure)i(whic)o(h)e(call)g(other)g(pro)q(cedures,)224
2234 y(m)o(ust)e(reserv)o(e)j(a)e(parameter)f(assem)o(bly)g(area)h(on)g
(the)h(top)e(of)h(their)g(stac)o(k)h(frame.)22 b(This)224
2284 y(parameter)13 b(assem)o(bly)e(area)i(m)o(ust)e(b)q(e)i(large)g
(enough)f(to)h(accomo)q(date)f(the)h(largest)f(group)224
2333 y(of)i(parameters)g(whic)o(h)f(that)h(particular)g(pro)q(cedure)i
(passes)f(to)f(an)o(y)f(of)g(its)h(callees.)287 2386
y(The)g FK(MIPS)h(R3000)21 b FN(arc)o(hitecture)16 b(is)d(t)o(ypical,)g
(and)g(w)o(e)h(shall)g(use)g(it)g(as)f(an)h(example.)224
2436 y(A)g(t)o(ypical)f(stac)o(k)i(frame)d(is)i(sho)o(wn)g(in)f
(\014gure)i(3.6.)287 2488 y(In)f(this)h(\014gure,)f(the)h(p)q(osition)f
(of)g(the)h(stac)o(k)g(mark)e(is)h(indicated)h(b)o(y)f(a)g
FK(virtual)h(fr)n(ame)224 2538 y(p)n(ointer)p FN(.)k(W)m(e)13
b(w)o(ould)h(prefer)h(not)f(to)g(w)o(aste)g(a)g(register)h(with)f(a)g
(second)h(p)q(oin)o(ter)f(in)o(to)g(the)224 2588 y(stac)o(k)i(frame,)e
(so)h(if)g(w)o(e)g(can)h(ensure)h(that)e(the)h(size)g(of)f(the)h(stac)o
(k)g(frame)e(do)q(es)i(not)f(v)n(ary)224 2638 y(during)g(pro)q(cedure)h
(execution,)g(w)o(e)f(ma)o(y)e(address)j(all)d(data)h(in)h(the)g(frame)
f(using)g(o\013sets)224 2688 y(from)f(the)h(stac)o(k)g(p)q(oin)o(ter.)p
eop
%%Page: 49 55
49 54 bop 224 274 a FL(3.2.)31 b(PR)o(OCEDURE)14 b(CALL)g(AND)g(RETURN)
602 b FN(49)539 349 y
 12827443 12498534 0 0 12827443 12498534 startTexFig
 539 349 a
%%BeginDocument: riscfrm.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-29.0 235.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Polyline
n 159 259 m 79 259 l  79 79 l  159 79 l  clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 80 100 m 158 100 l gs col-1 s gr
% Polyline
n 79 167 m 158 167 l gs col-1 s gr
% Polyline
n 80 226 m 159 226 l gs col-1 s gr
% Polyline
n 79 49 m 79 79 l  159 79 l  159 49 l gs 0.95 setgray fill gr
gs col-1 s gr
% Polyline
n 50 259 m 75 259 l gs col-1 s gr
n 67.000 257.000 m 75.000 259.000 l 67.000 261.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 48 99 m 76 99 l gs col-1 s gr
n 68.000 97.000 m 76.000 99.000 l 68.000 101.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 153.000 90.000 m 174.500 90.000 l
	174.500 90.000 196.000 90.000 186.500 104.000 DrawSplineSection
	186.500 104.000 177.000 118.000 189.000 118.000 DrawSplineSection
	201.000 118.000 l gs col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
95 93 m 
gs 1 -1 scale (stack mark) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
96 200 m 
gs 1 -1 scale (workspace) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
98 121 m 
gs 1 -1 scale (local) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
97 135 m 
gs 1 -1 scale (variable) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
97 149 m 
gs 1 -1 scale (space) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
96 61 m 
gs 1 -1 scale (incoming) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
95 72 m 
gs 1 -1 scale (parameters) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
204 128 m 
gs 1 -1 scale (stack mark) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
37 261 m 
gs 1 -1 scale (sp) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
205 116 m 
gs 1 -1 scale (fixed sized) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
96 237 m 
gs 1 -1 scale (parameter) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
96 249 m 
gs 1 -1 scale (assembly area) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
32 102 m 
gs 1 -1 scale (vfp) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 264 1232 a FN(Figure)14 b(3.6:)j FK(RISC)j FN(stac)o(k)15
b(frame)d(with)i(stac)o(k)g(p)q(oin)o(ter)g(and)g(virtual)f(frame)f(p)q
(oin)o(ter)287 1370 y(It)f(is)g(con)o(v)o(enien)o(t)h(in)f(suc)o(h)h
(cases)h(to)e(refer)h(to)f(the)h FK(virtual)g(fr)n(ame)g(p)n(ointer)j
FN(in)c(the)h FK(V)l(AL)p FN(,)224 1420 y(since)k(the)g(\014nal)f
(frame)e(size)j(is)f(not)g(kno)o(wn)g(un)o(til)f(after)i(register)g
(allo)q(cation.)k(The)c(\014nal)224 1470 y(translation)e(to)f(assem)o
(bly)g(language)g(will)f(mak)o(e)h(the)h(transformation)e(|)663
1567 y FK(vfp)42 b Ft(!)f FN(\()p FK(sp)16 b FN(+)e FD
(\014nal-frame-size)s FN(\))287 1730 y(As)j(it)f(turns)i(out,)f(for)f
(the)h FK(MIPS)23 b FN(arc)o(hitecture,)c(the)e(stac)o(k)g(mark)e(is)i
(empt)o(y)m(.)25 b(The)224 1779 y(return)19 b(address)g(of)e(the)h(pro)
q(cedure)h(call)e(is)g(mo)o(v)o(ed)f(in)o(to)g(a)h(general)h(purp)q
(ose)h(register,)224 1829 y(and)13 b(as)h(w)o(e)f(ha)o(v)o(e)g(just)g
(seen)i(there)f(is)f(no)g(frame)f(p)q(oin)o(ter.)18 b(Corresp)q(onding)
13 b(to)g(\014gure)h(3.5,)224 1879 y(w)o(e)h(ha)o(v)o(e)e(\014gure)i
(3.7)e(in)g(the)h FK(MIPS)20 b FN(case.)353 1984 y Fk(\()p
Fj(a)p Fk(\))289 2071 y FM(P)f FN(params)p 267 2097 232
4 v 267 2322 4 225 v 495 2322 V 267 2325 232 4 v 289
2295 a(assem)o(bly)p 268 2022 229 2 v 268 2097 2 75 v
495 2097 V 268 2099 229 2 v 270 2248 225 2 v 289 2153
a FM(P)g FN(lo)q(cals,)289 2209 y(w)o(orkspace)842 1984
y Fk(\()p Fj(b)p Fk(\))p 754 2097 232 4 v 754 2322 4
225 v 982 2322 V 754 2325 232 4 v 776 2071 a FM(P)g FN(params)776
2295 y FM(Q)14 b FN(params)p 756 2022 229 2 v 756 2097
2 75 v 982 2097 V 756 2099 229 2 v 757 2248 225 2 v 776
2153 a FM(P)19 b FN(lo)q(cals,)776 2209 y(w)o(orkspace)1330
1984 y Fk(\()p Fj(c)p Fk(\))p 1241 2097 232 4 v 1241
2322 4 225 v 1470 2322 V 1241 2325 232 4 v 1264 2071
a FM(P)g FN(params)p 1241 2322 V 1241 2547 4 225 v 1470
2547 V 1241 2550 232 4 v 1264 2295 a FM(Q)13 b FN(params)p
1243 2022 229 2 v 1243 2097 2 75 v 1470 2097 V 1243 2099
229 2 v 1245 2248 225 2 v 1264 2153 a FM(P)19 b FN(lo)q(cals,)1264
2209 y(w)o(orkspace)1264 2415 y FM(Q)13 b FN(lo)q(cals,)1264
2472 y(w)o(orkspace)p 514 2323 57 2 v 514 2322 a FC(\033)588
2333 y FK(sp)p 514 2098 V 514 2097 a FC(\033)581 2108
y FK(vfp)p 1001 2323 V 1001 2322 a FC(\033)1076 2329
y FK(sp)p 1001 2098 V 1001 2097 a FC(\033)1068 2104 y
FK(vfp)p 1488 2548 V 1488 2547 a FC(\033)1563 2558 y
FK(sp)p 1488 2323 V 1488 2322 a FC(\033)1556 2333 y FK(vfp)499
2679 y FN(Figure)h(3.7:)j FM(P)i FN(calls)14 b FM(Q)p
FN(,)f FK(MIPS)20 b FN(arc)o(hitecture)15 b(v)o(ersion)p
eop
%%Page: 50 56
50 55 bop 224 274 a FN(50)562 b FL(CHAPTER)14 b(3.)32
b(R)o(UNTIME)13 b(OR)o(GANIZA)m(TION)287 390 y FN(In)19
b(\014gure)14 b(3.7)p FM(a)o FN(,)20 b(pro)q(cedure)g
FM(P)25 b FN(has)19 b(a)f(stac)o(k)h(frame)f(whic)o(h)h(consists)h(of)e
(space)i(for)224 440 y(lo)q(cals)14 b(and)h(w)o(orkspace,)g(and)f(a)h
(parameter)f(assem)o(bly)f(area.)20 b FM(P)6 b FN('s)14
b(o)o(wn)g(parameters)h(are)224 490 y(in)f(the)g(stac)o(k)h(frame)d(of)
h FM(P)6 b FN('s)14 b(caller.)287 540 y(In)k(\014gure)d(3.7)p
FM(b)o FN(,)k(the)h(parameters)f(for)f FM(Q)h FN(ha)o(v)o(e)f(b)q(een)i
(placed)f(in)o(to)f(the)i(parameter)224 590 y(assem)o(bly)9
b(area,)h(and)f(the)h(\\)p FG(jal)p FN(")e(\(jump)g(and)h(link\))g
(instruction)h(is)f(executed.)18 b(The)10 b(return)224
640 y(address)16 b(is)e(placed)h(in)f FM(r)613 646 y
Fz(31)648 640 y FN(.)20 b(The)15 b(pro)q(cedure)h(prolog)e(of)f
FM(Q)i FN(mo)o(v)o(es)e(the)i(stac)o(k)g(p)q(oin)o(ter)f(to)224
689 y(mak)o(e)8 b(ro)q(om)h(for)g FM(P)d FN('s)j(lo)q(cals)g(and)g(w)o
(orkspace,)i(and)e(for)h(an)f(outgoing)f(parameter)h(assem)o(bly)224
739 y(area)14 b(also)g(if)f FM(P)19 b FN(is)14 b(not)g(a)f(leaf)g(pro)q
(cedure.)287 789 y(If)h FM(P)20 b FN(is)14 b(a)g(leaf)g(pro)q(cedure,)i
(the)g(en)o(try)f(prolog)e(is)i(almost)d(empt)o(y)m(.)19
b(There)d(is)e(nothing)224 839 y(to)i(do)g(except)i(to)e(adjust)g(the)g
(stac)o(k)h(p)q(oin)o(ter.)25 b(In)16 b(fact,)g(if)f
FM(P)22 b FN(is)16 b(a)g(leaf)f(pro)q(cedure,)j(has)224
889 y(no)e(lo)q(cal)f(v)n(ariables)g(and)g(do)q(es)h(not)g(run)g(out)g
(of)f(caller-sa)o(v)o(es)h(registers)h(during)e(register)224
938 y(allo)q(cation,)d(then)h(the)h(stac)o(k)f(frame)f(is)h(completely)
f(empt)o(y)m(,)f(and)i(there)h(is)f(nothing)g(to)g(do)224
988 y(in)g(the)h(prolog.)j(In)c(suc)o(h)h(a)e(case,)i(the)g(epilog)e
(will)g(simply)f(b)q(e)i(the)h(return)g(instruction)g(|)249
1106 y FF(xLab:)640 b FD(;)13 b FE(start)f(exit)h(epilo)n(g)f(of)h(Q)
417 1152 y FF(jr)128 b Fm(r)602 1156 y Fy(31)989 1152
y FD(;)13 b FE(jump)g(to)g(r)n(eturn)g(adr)g(r)n(e)n(g)287
1230 y FN(In)e(the)g(more)f(general,)i(non-leaf)e(case,)i(or)f(when)g
(a)g(real)g(stac)o(k)g(frame)f(do)q(es)i(need)g(to)f(b)q(e)224
1280 y(constructed,)16 b(the)f(prolog)e(m)o(ust)g(mak)o(e)g(space)i
(for)f(the)g(lo)q(cal)g(v)n(ariables,)f(w)o(orkspace)h(and)224
1330 y(the)f(outgoing)e(parameter)h(assem)o(bly)g(area.)17
b(Since)c(an)o(y)f(subsequen)o(t)i(pro)q(cedure)g(call)e(will)224
1380 y(destro)o(y)j(the)g(return)h(address)f(in)f FM(r)786
1386 y Fz(31)821 1380 y FN(,)f(this)i(register)g(m)o(ust)e(b)q(e)i(sa)o
(v)o(ed)f(in)g(the)h(w)o(orkspace,)224 1430 y(along)k(with)h(an)o(y)f
(other)i(callee-sa)o(v)o(es)g(registers)g(whic)o(h)f(the)h(pro)q
(cedure)h(destro)o(ys.)37 b(A)224 1479 y(t)o(ypical)13
b(prolog,)g(in)g(suc)o(h)i(a)f(case)g(migh)o(t)e(b)q(e)j(|)249
1597 y FF(Q:)700 b FD(;)13 b FE(start)f(entry)h(pr)n(olo)n(g)f(of)h(Q)
417 1643 y FF(sub)108 b(sp,64,sp)244 b FD(;)13 b FE(make)g(r)n(o)n(om)g
(for)h(lo)n(c)n(al)e(vars)417 1689 y(save)h(c)n(al)r(le)n(e-sav)o(es)d
(r)n(e)n(gs,)j(including)e Fm(r)977 1693 y Fy(31)1010
1689 y FE(,)i(if)g(ne)n(e)n(de)n(d)287 1767 y FN(The)j(pro)q(cedure)h
(epilog)e(rev)o(erses)i(the)f(ab)q(o)o(v)o(e)g(pro)q(cess.)24
b(An)o(y)16 b(callee-sa)o(v)o(es)g(registers)224 1817
y(are)i(restored,)h(the)e(curren)o(t)i(stac)o(k)e(frame)f(is)g(remo)o
(v)o(ed,)h(and)f(the)i(pro)q(cedure)h(jumps)c(to)224
1867 y(the)g(return)g(address)g(|)417 1985 y FE(r)n(estor)n(e)e(c)n(al)
r(le)n(e-save)o(s)e(r)n(e)n(gs,)h(including)f Fm(r)1018
1989 y Fy(31)1051 1985 y FE(,)i(if)g(save)n(d)417 2030
y FF(add)108 b(sp,64,sp)244 b FD(;)13 b FE(r)n(emove)g(stack)f(fr)n
(ame)417 2076 y FF(jr)128 b Fm(r)602 2080 y Fy(31)989
2076 y FD(;)13 b FE(jump)g(to)g(r)n(eturn)g(adr)g(r)n(e)n(g)224
2155 y FN(Note)j(that)f(since)g(the)h(parameter)e(assem)o(bly)g(area)h
(is)g(allo)q(cated)f(as)h(a)g(\014xed)g(part)g(of)g(the)224
2204 y(stac)o(k)d(frame,)e(there)j(is)e(no)g(co)q(de)i(to)e(remo)o(v)o
(e)f(the)i(parameters)g(after)f(eac)o(h)h(pro)q(cedure)i(call.)224
2312 y FO(V)l(ariable)g(size)i(stac)o(k)f(marks)224 2389
y FN(In)f(some)e(run)o(time)g(con)o(v)o(en)o(tions,)h(registers)i(are)e
(sa)o(v)o(ed)h FK(inside)i FN(the)e(stac)o(k)f(frame,)f(so)h(that)224
2438 y(the)k(size)g(of)e(the)i(stac)o(k)f(frame)f(is)h(not)g(kno)o(wn)f
(un)o(til)h(co)q(de)g(generation)h(is)e(complete.)24
b(In)224 2488 y(suc)o(h)18 b(cases,)g(it)e(is)g(con)o(v)o(enien)o(t)h
(to)f(extend)i(the)f(concept)g(of)f(the)h(virtual)f(frame)f(p)q(oin)o
(ter)224 2538 y(one)g(further)f(step.)287 2588 y(F)m(or)k(suc)o(h)i
(con)o(v)o(en)o(tions,)f(it)g(is)f(con)o(v)o(enien)o(t)i(to)e
(manipulate)f(the)i(virtual)f(assem)o(bly)224 2638 y(language)d(as)h
(though)f(there)i(are)e(t)o(w)o(o)g(p)q(oin)o(ters,)h(one)g(to)f(eac)o
(h)h(end)g(of)f(the)h(stac)o(k)g(mark.)224 2688 y(P)o(arameters)i(are)h
(accessed)h(relativ)o(e)e(to)g(the)g FK(virtual)g(ar)n(gument)h(p)n
(ointer)j FN(\()p FK(vap)s(\))p FN(,)d(while)p eop
%%Page: 51 57
51 56 bop 224 274 a FL(3.2.)31 b(PR)o(OCEDURE)14 b(CALL)g(AND)g(RETURN)
602 b FN(51)518 349 y
 13485260 12498534 0 0 13485260 12498534 startTexFig
 518 349 a
%%BeginDocument: twovfps.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-29.0 235.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Polyline
n 159 259 m 79 259 l  79 79 l  159 79 l  clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 80 100 m 158 100 l gs col-1 s gr
% Polyline
n 79 167 m 158 167 l gs col-1 s gr
% Polyline
n 80 226 m 159 226 l gs col-1 s gr
% Polyline
n 79 49 m 79 79 l  159 79 l  159 49 l gs 0.95 setgray fill gr
gs col-1 s gr
% Polyline
n 50 259 m 75 259 l gs col-1 s gr
n 67.000 257.000 m 75.000 259.000 l 67.000 261.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 48 99 m 76 99 l gs col-1 s gr
n 68.000 97.000 m 76.000 99.000 l 68.000 101.000 l gs 2 setlinejoin col-1 s gr
n 49 79 m 49 79 l gs col-1 s gr
% Polyline
n 49 80 m 76 80 l gs col-1 s gr
n 68.000 78.000 m 76.000 80.000 l 68.000 82.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 153.000 90.000 m 174.500 90.000 l
	174.500 90.000 196.000 90.000 186.500 104.000 DrawSplineSection
	186.500 104.000 177.000 118.000 189.000 118.000 DrawSplineSection
	201.000 118.000 l gs col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
95 93 m 
gs 1 -1 scale (stack mark) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
96 238 m 
gs 1 -1 scale (outgoing) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
97 249 m 
gs 1 -1 scale (parameters) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
96 200 m 
gs 1 -1 scale (workspace) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
98 121 m 
gs 1 -1 scale (local) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
97 135 m 
gs 1 -1 scale (variable) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
97 149 m 
gs 1 -1 scale (space) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
96 61 m 
gs 1 -1 scale (incoming) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
95 72 m 
gs 1 -1 scale (parameters) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
204 128 m 
gs 1 -1 scale (stack mark) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
204 115 m 
gs 1 -1 scale (variably sized) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
37 261 m 
gs 1 -1 scale (sp) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
33 101 m 
gs 1 -1 scale (vlp) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
32 82 m 
gs 1 -1 scale (vap) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 440 1232 a FN(Figure)14 b(3.8:)j FK(RISC)j FN(stac)o(k)15
b(frame)d(with)i(t)o(w)o(o)f(virtual)g(p)q(oin)o(ters)224
1355 y(lo)q(cals)h(are)h(accessed)i(relativ)o(e)d(to)g(the)h
FK(virtual)f(lo)n(c)n(al)h(p)n(ointer)k FN(\()p FK(vlp)s(\))p
FN(.)g(Figure)14 b(3.8)f(has)i(the)224 1405 y(diagram)d(whic)o(h)i
(corresp)q(onds)i(to)d(\014gure)i(3.6)e(in)g(this)h(case.)287
1455 y(Once)i(co)q(de)g(generation)g(is)f(complete,)g(and)g(the)h
(sizes)g(of)f(the)h(frame)e(and)h(mark)f(are)224 1504
y(kno)o(wn,)f(references)k(to)d(the)g(t)o(w)o(o)g(virtual)f(p)q(oin)o
(ters)h(are)h(adjusted)f(|)517 1584 y FK(vlp)42 b Ft(!)f
FN(\()p FK(sp)16 b FN(+)e FD(\014nal-frame-size)s FN(\))507
1646 y FK(vap)42 b Ft(!)f FN(\()p FK(sp)16 b FN(+)e FD
(\014nal-frame-size)i FN(+)f FD(\014nal-mark-size)r FN(\))224
1814 y FO(Allo)q(cating)f(space)h(for)g(blo)q(c)o(k)g(lo)q(cals)224
1891 y FN(Lo)q(cal)k(blo)q(c)o(ks,)g(as)g(they)g(app)q(ear)g(in)g
FM(C)i FN(and)e(some)e(other)j(languages,)f(allo)o(w)e(for)h(lo)q(cal)
224 1940 y(v)n(ariables)f(to)f(b)q(e)i(declared)g(within)e(unnamed)f
(blo)q(c)o(ks.)27 b(These)19 b(blo)q(c)o(ks)d(ma)o(y)f(b)q(e)j(nested)
224 1990 y(within)h(eac)o(h)h(other,)h(and)e(pro)o(vide)g(for)g(t)o
(ypical)f(nested)j(scop)q(e)g(visibilit)o(y)c(rules.)35
b(The)224 2040 y(seman)o(tics)16 b(of)g(suc)o(h)i(lo)q(cal)d(v)n
(ariables)h(are)h(describ)q(ed)h(b)o(y)e(an)h(abstraction)f(in)g(whic)o
(h)h(the)224 2090 y(v)n(ariables)h(are)h(automatically)c(allo)q(cated)j
(when)h(con)o(trol)g(en)o(ters)h(the)f(blo)q(c)o(k,)g(with)f(the)224
2140 y(space)f(b)q(eing)e(freed)i(when)f(the)g(blo)q(c)o(k)f(is)g
(left.)23 b(The)16 b(e\013ect)h(of)e(these)i(seman)o(tics)e(ma)o(y)f(b)
q(e)224 2189 y(obtained)e(without)f(the)h(complexit)o(y)d(of)i
(actually)f(extending)i(and)f(con)o(tracting)h(the)g(stac)o(k)224
2239 y(frame)h(when)h(suc)o(h)h(blo)q(c)o(ks)f(are)g(en)o(tered)i(and)d
(left.)287 2289 y(Since)e(blo)q(c)o(ks)f(whic)o(h)h(are)f(not)h(nested)
h(do)e(not)h(ha)o(v)o(e)f(v)n(ariables)g(of)g(o)o(v)o(erlapping)f
(exten)o(t,)224 2339 y(it)15 b(is)f(p)q(ossible)h(to)g(use)h(the)f
(same)f(space)i(for)e(the)h(v)n(ariables)f(of)h(non-o)o(v)o(erlapping)e
(blo)q(c)o(ks,)224 2389 y(as)19 b(sho)o(wn)h(in)e(\014gure)i(3.9.)32
b(It)19 b(is)g(p)q(ossible)g(to)g(\014nd)g(the)h(smallest)d(stac)o(k)j
(frame)d(whic)o(h)224 2438 y(will)c(accomo)q(date)h(all)f(blo)q(c)o(k)h
(v)n(ariables)g(using)g(a)g(simple)f(attribute)i(ev)n(aluation.)j
(During)224 2488 y(tra)o(v)o(ersal)i(of)f(the)i FK(AST)k
FN(of)19 b(the)h(pro)q(cedure,)j(w)o(e)d(ev)n(aluate)f(t)o(w)o(o)h
(data.)35 b(An)20 b(inherited)224 2538 y(attribute)f(carries)g(the)g
FK(curr)n(entF)m(r)n(ameSize)s FN(,)f(while)g(a)f(syn)o(thesised)j
(attribute)f FK(maxSize)224 2588 y FN(trac)o(ks)c(the)f(maxim)o(um)9
b(stac)o(k)15 b(frame)d(size.)287 2638 y(Of)18 b(course,)j(it)e(is)f
(not)h(necessary)i(to)d(reuse)j(the)e(stac)o(k)g(frame)f(space)i(in)e
(this)h(w)o(a)o(y)m(.)224 2688 y(F)m(or)f(some)e(bac)o(k)o(ends,)j(the)
g(task)e(of)g(co)q(de)i(impro)o(v)o(emen)o(t)c(will)h(b)q(e)i(simpler)e
(if)h(only)g(one)p eop
%%Page: 52 58
52 57 bop 224 274 a FN(52)562 b FL(CHAPTER)14 b(3.)32
b(R)o(UNTIME)13 b(OR)o(GANIZA)m(TION)237 349 y
 22365798 11577589 0 0 22365798 11577589 startTexFig
 237 349
a
%%BeginDocument: blockex.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-40.0 238.0 translate 0.900 -0.900 scale
0.500 setlinewidth
% Polyline
n 312 206 m 312 86 l  252 86 l  252 206 l  clp gs col-1 s gr
% Polyline
n 362 151 m 362 96 l  312 96 l  312 151 l  clp gs col-1 s gr
% Polyline
n 422 141 m 422 111 l  362 111 l  362 141 l  clp gs col-1 s gr
% Polyline
n 392 201 m 392 161 l  312 161 l  312 201 l  clp gs col-1 s gr
% Polyline
n 387 228 m 422 228 l gs col-1 s gr
n 414.000 226.000 m 422.000 228.000 l 414.000 230.000 l gs 2 setlinejoin col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
257 96 m 
gs 1 -1 scale (begin) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
257 201 m 
gs 1 -1 scale (end) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
247 186 m 
gs 1 -1 scale  90.0 rotate (position in function) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
252 216 m 
gs 1 -1 scale (0) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
298 216 m 
gs 1 -1 scale (20) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
345 216 m 
gs 1 -1 scale (40) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
397 216 m 
gs 1 -1 scale (60) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
252 231 m 
gs 1 -1 scale (limit of stack frame use, bytes) col-1 show gr
/Courier findfont 10.00 scalefont setfont
44 79 m 
gs 1 -1 scale (void Example\(void\)) col-1 show gr
/Courier findfont 10.00 scalefont setfont
44 94 m 
gs 1 -1 scale ({) col-1 show gr
/Courier findfont 10.00 scalefont setfont
59 124 m 
gs 1 -1 scale ({) col-1 show gr
/Courier findfont 10.00 scalefont setfont
74 159 m 
gs 1 -1 scale ({) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
89 174 m 
gs 1 -1 scale (declare 24 bytes of variables) col-1 show gr
/Courier findfont 10.00 scalefont setfont
74 189 m 
gs 1 -1 scale (}) col-1 show gr
/Courier findfont 10.00 scalefont setfont
59 204 m 
gs 1 -1 scale (}) col-1 show gr
/Courier findfont 10.00 scalefont setfont
59 219 m 
gs 1 -1 scale ({) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
74 234 m 
gs 1 -1 scale (declare 32 bytes of variables) col-1 show gr
/Courier findfont 10.00 scalefont setfont
59 249 m 
gs 1 -1 scale (}) col-1 show gr
/Courier findfont 10.00 scalefont setfont
44 264 m 
gs 1 -1 scale (}) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
59 109 m 
gs 1 -1 scale (declare  24 bytes of variables) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
74 140 m 
gs 1 -1 scale (declare 20 bytes of variables) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 287 1174 a FN(Figure)h(3.9:)j FM(C)g FN(function)c(with)h(lo)q(cal)f
(blo)q(c)o(ks,)g(sho)o(wing)h(frame)e(space)j(allo)q(cation)224
1311 y(logical)i(v)n(ariable)g(is)h(found)f(at)h(an)o(y)g(particular)g
(o\013set.)31 b(In)19 b(suc)o(h)f(cases)i(there)f(is)f(some)224
1361 y(b)q(ene\014t)e(in)e(not)g(o)o(v)o(erlapping)f(blo)q(c)o(k)h(v)n
(ariables,)f(and)h(simply)f(allo)q(cating)f(space)k(to)e(blo)q(c)o(k)
224 1410 y(v)n(ariables)f(just)h(as)f(if)g(they)h(w)o(ere)g(declared)h
(at)e(the)h(pro)q(cedure)i(lev)o(el.)h(Figure)d(3.10)e(sho)o(ws)224
1460 y(a)j(p)q(ossible)h(allo)q(cation,)d(for)i(the)h(previous)g
(example,)e(but)h(without)g(the)h(o)o(v)o(erlapping)e(of)224
1510 y(blo)q(c)o(k)g(v)n(ariables.)432 1565 y
 16182312 9012101 0 0 16182312 9012101 startTexFig
 432 1565
a
%%BeginDocument: blockex2.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-55.0 216.0 translate 0.900 -0.900 scale
0.500 setlinewidth
% Polyline
n 254 236 m 289 236 l gs col-1 s gr
n 281.000 234.000 m 289.000 236.000 l 281.000 238.000 l gs 2 setlinejoin col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
119 239 m 
gs 1 -1 scale (regions of stack frame use, bytes) col-1 show gr
% Polyline
n 139 209 m 139 89 l  79 89 l  79 209 l  clp gs col-1 s gr
% Polyline
n 189 154 m 189 99 l  139 99 l  139 154 l  clp gs col-1 s gr
% Polyline
n 249 144 m 249 114 l  189 114 l  189 144 l  clp gs col-1 s gr
% Polyline
n 329 204 m 329 164 l  249 164 l  249 204 l  clp gs col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
84 99 m 
gs 1 -1 scale (begin) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
84 204 m 
gs 1 -1 scale (end) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
74 189 m 
gs 1 -1 scale  90.0 rotate (position in function) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
79 219 m 
gs 1 -1 scale (0) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
125 219 m 
gs 1 -1 scale (20) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
172 219 m 
gs 1 -1 scale (40) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
224 219 m 
gs 1 -1 scale (60) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
274 219 m 
gs 1 -1 scale (80) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
319 219 m 
gs 1 -1 scale (100) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 224 2227 a FN(Figure)i(3.10:)21 b FM(C)e FN(function)d(with)f(lo)q
(cal)g(blo)q(c)o(ks,)h(allo)q(cated)g(with)f(pro)q(cedure-automatic)224
2277 y(exten)o(t)224 2457 y FH(3.2.4)56 b(P)n(arameter)17
b(passing)224 2538 y FN(There)j(are)f(t)o(w)o(o)f(main)f(metho)q(ds)h
(b)o(y)g(whic)o(h)h(parameters)f(are)h(passed)h(to)e(pro)q(cedures.)224
2588 y(They)j(ma)o(y)e(b)q(e)i(pushed)g(on)o(to)f(the)h(run)o(time)f
(stac)o(k,)i(or)e(they)h(ma)o(y)e(b)q(e)i(assem)o(bled)f(in)224
2638 y(\014xed)g(lo)q(cations)f(at)g(the)g(top)h(of)e(the)i(caller's)f
(stac)o(k)h(frame.)32 b(W)m(e)19 b(refer)h(to)f(these)i(t)o(w)o(o)224
2688 y(metho)q(ds)16 b(as)g FK(stack-p)n(ar)n(ameters)s
FN(,)f(and)h FK(\014xe)n(d)h(assembly)p FN(.)23 b(Cho)q(osing)16
b(a)f(metho)q(d)g(has)h(far-)p eop
%%Page: 53 59
53 58 bop 224 274 a FL(3.2.)31 b(PR)o(OCEDURE)14 b(CALL)g(AND)g(RETURN)
602 b FN(53)224 390 y(reac)o(hing)12 b(consequences,)i(since)e(the)g(w)
o(a)o(y)e(in)h(whic)o(h)g(the)h(fron)o(t-end)f(ev)n(aluates)h
(parameter)224 440 y(expressions)17 b(is)d(distinctly)g(di\013eren)o(t)
i(for)e(the)h(t)o(w)o(o)f(cases.)22 b(Finally)m(,)12
b(a)i(v)n(ariation)f(of)h(\014xed)224 490 y(assem)o(bly)20
b(is)g(used)h(for)f(those)h(mac)o(hines)f(whic)o(h,)h(lik)o(e)f
FK(SUN)g(micr)n(osystem's)g(SP)m(AR)o(C)224 540 y FN(arc)o(hitecuture,)
c(ha)o(v)o(e)d FK(r)n(e)n(gister)h(windows)p FN(.)224
776 y FO(P)o(arameter)g(mo)q(de)i(and)f(structure)224
897 y FN(Within)g(algol-fam)o(i)o(ly)d(languages,)j(there)h(are)g(sev)o
(eral)g(di\013eren)o(t)g(parameter)f(seman)o(tics.)224
947 y(When)e(an)g(actual)f(parameter)h(is)g(passed)g(to)g(a)g(formal)d
(parameter)i(whic)o(h)h(is)g(sp)q(eci\014ed)h(as)224
997 y(ha)o(ving)d FK(value)i(mo)n(de)g(semantics)i FN(the)e(v)n(alue)e
(of)g(the)h(expression)h(is)e(ev)n(aluated)h(and)f(passed)224
1047 y(to)i(the)h(formal.)h(Within)d(the)h(called)g(pro)q(cedure,)h
(the)g(formal)c(is)j(treated)h(as)f(an)g(ordinary)224
1097 y(lo)q(cal)g(v)n(ariable)g(and)h(ma)o(y)e(b)q(e)i(mo)q(di\014ed)f
(at)h(will.)287 1171 y(When)e(an)f(actual)h(parameter)f(is)h(passed)h
(to)e(a)h(formal)d(parameter)i(whic)o(h)h(is)g(sp)q(eci\014ed)224
1220 y(as)18 b(ha)o(ving)f FK(variable)h(mo)n(de)h(semantics)s
FN(,)g(the)g(actual)e(parameter)h(m)o(ust)f(b)q(e)h(a)g(v)n(ariable.)
224 1270 y(Within)c(the)h(called)f(pro)q(cedure,)j(the)e(formal)d(is)i
(treated)i(as)f(an)f(ordinary)g(v)n(ariable,)f(and)224
1320 y(ma)o(y)i(b)q(e)i(read)h(and)e(written)h(at)g(will.)24
b(Ho)o(w)o(ev)o(er,)18 b(after)f(the)g(return)h(of)e(the)h(called)f
(pro-)224 1370 y(cedure,)22 b(the)e(actual)g(parameter)f(v)n(ariable)f
(will)g(ha)o(v)o(e)h(the)h(\014nal)f(v)n(alue)g(that)g(w)o(as)h(last)
224 1420 y(assigned)15 b(to)e(it)h(in)f(the)i(called)e(pro)q(cedure.)
287 1494 y(In)h(language)g FK(A)n(da)25 b FN(formal)12
b(parameters)j(are)g(sp)q(eci\014ed)h(as)f(ha)o(ving)e
FK(in,)j(out)i FN(or)d FK(inout)224 1543 y FN(seman)o(tics.)i(The)12
b(seman)o(tics)f(of)f FK(in)15 b FN(mo)q(de)10 b(parameters)h(are)h
(not)f(quite)g(the)h(same)f(as)g(v)n(alue)224 1593 y(mo)q(de.)21
b(The)15 b(actual)g(parameter)f(expression)i(is)f(ev)n(aluated)g(and)g
(passed)h(to)f(the)g(formal.)224 1643 y(Ho)o(w)o(ev)o(er,)f(within)e
(the)i(called)f(pro)q(cedure)i(the)f(formal)d(is)i(a)g(lo)q(cal)g
(constan)o(t,)g(and)g(cannot)224 1693 y(b)q(e)i(c)o(hanged)g(or)g(ev)o
(en)g(threatened.)21 b FK(Inout)e FN(mo)q(de)13 b(has)i(iden)o(tical)e
(seman)o(tics)h(to)g(v)n(ariable)224 1743 y(mo)q(de,)k(while)g
FK(out)23 b FN(mo)q(de)17 b(carries)i(the)g(\014nal)f(v)n(alue)g(of)f
(the)i(formal)d(out)j(to)f(the)h(actual)224 1792 y(v)n(ariable,)13
b(but)h(do)q(es)g(not)g(bring)g(the)g(initial)e(v)n(alue)h(of)h(the)g
(actual)g(in)o(to)f(the)h(pro)q(cedure.)287 1866 y(F)m(or)g(simple)e
(scalar)j(t)o(yp)q(es)g(and)f(p)q(oin)o(ters,)h(v)n(alue)e(parameters)h
(are)h(alw)o(a)o(ys)e FK(p)n(asse)n(d)j(by)224 1916 y(value)p
FN(.)22 b(That)14 b(is)h(to)g(sa)o(y)m(,)f(the)h(expression)h(is)f(ev)n
(aluated,)g(and)f(copied)h(to)g(the)h(parameter)224 1966
y(lo)q(cation)e(of)f(the)i(formal)d(parameter.)19 b(V)m(ariable)13
b(mo)q(de)g(parameters)i(are)f(usually)g FK(p)n(asse)n(d)224
2016 y(by)e(r)n(efer)n(enc)n(e)p FN(,)d(in)h FK(Pasc)n(al)t
FN(-st)o(yle)g(languages.)16 b(When)10 b(a)g(parameter)f(is)h(passed)h
(b)o(y)e(reference,)224 2066 y(the)15 b(address)g(of)f(the)g(actual)g
(v)n(ariable)f(is)h(passed)h(to)e(the)i(called)f(pro)q(cedure,)h
(creating)g(an)224 2115 y FK(alias)22 b FN(to)c(the)i(original)c(v)n
(ariable.)31 b(When)19 b(co)q(de)g(is)g(generated)h(to)e(access)i(suc)o
(h)g(formal)224 2165 y(parameters,)14 b(the)g(compiler)e(m)o(ust)h(p)q
(erform)f(an)i(additional)d(dereference)17 b(of)c(the)h(p)q(oin)o(ter)
224 2215 y(to)g(reac)o(h)h(the)f(actual)g(v)n(alue.)287
2289 y(In)h(principle,)f(v)n(ariable)g(mo)q(de)g(parameters)h(could)f
(b)q(e)i(passed)g(b)o(y)e(cop)o(ying)h(in)o(to)f(the)224
2339 y(formal)c(at)h(pro)q(cedure)j(in)o(v)o(o)q(cation,)d(and)g(cop)o
(ying)h(the)g(\014nal)f(v)n(alue)g(out)h(at)g(the)g(pro)q(cedure)224
2389 y(return.)37 b(The)20 b(di\013erences)i(b)q(et)o(w)o(een)f(the)f
(t)o(w)o(o)f(metho)q(ds)g(only)g(b)q(ecome)h(apparen)o(t)g(for)224
2438 y(pathological)c(programs)g(whic)o(h,)h(for)g(example,)f(pass)i
(the)g(same)e(v)n(ariable)g(to)h(separate)224 2488 y(v)n(ariable)i(mo)q
(de)g(formal)e(parameters.)35 b(In)20 b(suc)o(h)g(a)f(case,)j(if)d
(reference)j(seman)o(tics)d(are)224 2538 y(used)f(then)f(mo)q(difying)c
(one)j(formal)e(will)h(c)o(hange)i(b)q(oth,)f(while)g(if)g(a)g(cop)o
(y-in,)g(cop)o(y-out)224 2588 y(implemen)o(tation)e(is)k(c)o(hosen)g
(then)h(the)f(t)o(w)o(o)f(ma)o(y)e(b)q(e)k(mo)q(di\014ed)d(indep)q
(enden)o(tly)m(.)29 b(Here)224 2638 y(is)15 b(a)g FK(Mo)n(dula-2)21
b FN(program)14 b(whic)o(h)h(tests)h(for)f(the)g(metho)q(d)g(of)f
(passing)h(of)f(v)n(ariable)g(mo)q(de)224 2688 y(parameters.)k(Of)c
(course,)h FK(Mo)n(dula-2)20 b FN(sp)q(eci\014es)c(passing)e(b)o(y)f
(reference.)p eop
%%Page: 54 60
54 59 bop 224 274 a FN(54)562 b FL(CHAPTER)14 b(3.)32
b(R)o(UNTIME)13 b(OR)o(GANIZA)m(TION)295 381 y FF(MODULE)18
b(CopyOrRe)o(f;)335 427 y(IMPORT)f(InOut;)335 472 y(VAR)h(val)g(:)i
(INTEGER;)335 564 y(PROCEDUR)o(E)d(Horrible\()o(VA)o(R)g(a)i(:)g
(INTEGER;)e(VAR)h(b)h(:)h(INTEGER\))o(;)335 609 y(BEGIN)374
655 y(INC\(a\);)d(INC\(b\);)335 701 y(END)h(Horrible;)295
792 y(BEGIN)335 838 y(val)g(:=)h(0;)335 883 y(Horrible)o(\(va)o(l,)o
(val)o(\);)335 929 y(IF)77 b(val)19 b(=)g(1)g(THEN)f(InOut.Writ)o(eSt)o
(ri)o(ng\()o("P)o(ass)o(ed)e(by)j(copying"\))o(;)335
975 y(ELSIF)e(val)i(=)g(2)g(THEN)f(InOut.Writ)o(eSt)o(ri)o(ng\()o("P)o
(ass)o(ed)e(by)j(reference)o("\);)335 1020 y(ELSE)292
b(InOut.Writ)o(eSt)o(ri)o(ng\()o("P)o(ara)o(met)o(er)o(s)17
b(are)h(broken"\);)335 1066 y(END;)335 1112 y(InOut.Wr)o(ite)o(Ln)o(;)
295 1157 y(END)h(CopyOrRef)o(.)224 1288 y FN(In)e FK(A)n(da)i
FN(non-scalar)e(parameters)f(of)g(an)o(y)g(mo)q(de)f(ma)o(y)g(b)q(e)i
(passed)g(b)o(y)f(reference,)j(or)e(b)o(y)224 1338 y(cop)o(ying)i
(\(cop)o(ying)g(in,)h(out,)g(or)g(in)f(and)g(out,)h(repsectiv)o(ely\).)
36 b FK(A)n(da)23 b FN(programs)18 b(whic)o(h)224 1388
y(dep)q(end)e(on)d(a)h(particular)f(metho)q(d)g(of)h(parameter)f
(passing)h(are)g(incorrect.)287 1438 y(The)g(situation)g(with)g
(structured)i(parameters,)e(either)h(arra)o(ys)g(or)f(records,)h(is)f
(some-)224 1488 y(what)j(di\013eren)o(t.)26 b(In)17 b(general,)f(v)n
(alue)g(mo)q(de)f(parameters)i(need)g(to)f(b)q(e)h(copied)g(b)o(y)f
(some)224 1538 y(kind)h(of)f(blo)q(c)o(k)g(cop)o(y)g(op)q(eration,)h
(so)g(that)f(the)i(formal)c(ma)o(y)g(b)q(e)k(mo)q(di\014ed)d(without)h
(af-)224 1587 y(fecting)e(the)g(actual.)j(Ho)o(w)o(ev)o(er,)d(the)g
(cop)o(ying)e(ma)o(y)g(b)q(e)i(done)g(either)g(b)o(y)f(the)h(caller)f
(or)h(b)o(y)224 1637 y(the)h(callee.)j(F)m(or)c(arra)o(ys)g(and)f
(records,)i(there)g(are)g(at)e(least)i(three)g(kno)o(wn)e(v)n
(ariations.)224 1745 y FO(P)o(assed)i(b)o(y)g(reference,)g(copied)f(b)o
(y)h(the)g(callee)224 1821 y FN(In)i(this)f(case,)i(the)e(co)q(de)i(of)
d(the)i(caller)g(passes)g(a)f(reference)j(to)d(the)h(actual)f
(parameter,)224 1871 y(exactly)e(as)f(if)g(the)h(formal)d(parameter)i
(w)o(as)g(of)g(v)n(ariable)f(mo)q(de.)17 b(The)d(callee)f(then)h(mak)o
(es)224 1921 y(a)g(cop)o(y)g(as)g(part)g(of)g(the)g(pro)q(cedure)i(en)o
(try)f(prolog.)i(In)d(this)h(case,)f(space)h(for)f(the)g(cop)o(y)g(is)
224 1971 y(allo)q(cated)g(as)h(part)f(of)g(the)g(lo)q(cal)g(v)n
(ariable)f(space)i(of)f(the)h(called)f(pro)q(cedure.)21
b(The)15 b(called)224 2021 y(pro)q(cedure)h(can)e(directly)g(access)i
(the)f(comp)q(onen)o(ts)e(of)g(the)i(lo)q(cal)e(cop)o(y)m(.)224
2128 y FO(Copied)i(b)o(y)g(caller,)g(passed)g(b)o(y)g(v)m(alue)224
2205 y FN(In)e(this)g(case,)g(the)h(caller)e(copies)i(the)f(v)n(alue)f
(in)o(to)g(the)i(reserv)o(ed)g(lo)q(cations)e(in)h(the)g(param-)224
2254 y(eter)18 b(area)e(of)f(the)i(called)e(pro)q(cedure.)27
b(As)16 b(b)q(efore,)h(the)f(called)g(pro)q(cedure)i(can)e(directly)224
2304 y(access)g(the)f(comp)q(onen)o(ts)e(of)g(the)i(formal)c
(parameter.)224 2412 y FO(Copied)k(b)o(y)g(caller,)g(passed)g(b)o(y)g
(reference)224 2488 y FN(With)i(this)g(con)o(v)o(en)o(tion,)h(the)g
(caller)f(copies)h(the)g(v)n(alue)f(in)o(to)f(a)h(temp)q(orary)g(area)g
(in)g(its)224 2538 y(o)o(wn)c(stac)o(k)g(frame,)e(and)i(passes)h(a)f
(reference)i(to)e(this)f(temp)q(orary)h(lo)q(cation)e(to)i(the)h
(called)224 2588 y(pro)q(cedure.)20 b(In)13 b(this)g(case,)g(the)g
(called)g(pro)q(cedure)i(m)o(ust)c(access)k(the)e(comp)q(onen)o(ts)g
(of)f(the)224 2638 y(formal)d(indirectly)m(,)i(dereferencing)i(the)e(p)
q(oin)o(ter)h(whic)o(h)f(the)g(caller)g(placed)h(in)e(the)i(param-)224
2688 y(eter)k(area.)i FK(SUN)d(Micr)n(osystems)h FM(C)h
FN(compilers)c(pass)h(structures)j(using)c(this)h(metho)q(d.)p
eop
%%Page: 55 61
55 60 bop 224 274 a FL(3.2.)31 b(PR)o(OCEDURE)14 b(CALL)g(AND)g(RETURN)
602 b FN(55)224 349 y
 22760488 12498534 0 0 22760488 12498534 startTexFig
 224 349 a
%%BeginDocument: values.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-27.0 202.0 translate 0.900 -0.900 scale
0.500 setlinewidth
% Polyline
n 39 164 m 54 164 l gs col-1 s gr
n 46.000 162.000 m 54.000 164.000 l 46.000 166.000 l gs 2 setlinejoin col-1 s gr
/Times-Italic findfont 10.00 scalefont setfont
29 164 m 
gs 1 -1 scale (fp) col-1 show gr
% Polyline
n 179 184 m 194 184 l gs col-1 s gr
n 186.000 182.000 m 194.000 184.000 l 186.000 186.000 l gs 2 setlinejoin col-1 s gr
/Times-Italic findfont 10.00 scalefont setfont
169 184 m 
gs 1 -1 scale (fp) col-1 show gr
% Polyline
n 319 184 m 334 184 l gs col-1 s gr
n 326.000 182.000 m 334.000 184.000 l 326.000 186.000 l gs 2 setlinejoin col-1 s gr
/Times-Italic findfont 10.00 scalefont setfont
309 184 m 
gs 1 -1 scale (fp) col-1 show gr
% Polyline
n 39 224 m 54 224 l gs col-1 s gr
n 46.000 222.000 m 54.000 224.000 l 46.000 226.000 l gs 2 setlinejoin col-1 s gr
/Times-Italic findfont 10.00 scalefont setfont
29 224 m 
gs 1 -1 scale (sp) col-1 show gr
% Polyline
n 179 224 m 194 224 l gs col-1 s gr
n 186.000 222.000 m 194.000 224.000 l 186.000 226.000 l gs 2 setlinejoin col-1 s gr
/Times-Italic findfont 10.00 scalefont setfont
169 224 m 
gs 1 -1 scale (sp) col-1 show gr
% Polyline
n 319 224 m 334 224 l gs col-1 s gr
n 326.000 222.000 m 334.000 224.000 l 326.000 226.000 l gs 2 setlinejoin col-1 s gr
/Times-Italic findfont 10.00 scalefont setfont
309 224 m 
gs 1 -1 scale (sp) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
69 104 m 
gs 1 -1 scale (caller's) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
69 118 m 
gs 1 -1 scale (frame) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
209 104 m 
gs 1 -1 scale (caller's) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
209 118 m 
gs 1 -1 scale (frame) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
209 199 m 
gs 1 -1 scale (callee's) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
209 213 m 
gs 1 -1 scale (frame) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
349 199 m 
gs 1 -1 scale (callee's) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
349 213 m 
gs 1 -1 scale (frame) col-1 show gr
1.000 setlinewidth
% Polyline
n 259 224 m 259 79 l  199 79 l  199 224 l  clp gs col-1 s gr
% Polyline
n 399 224 m 399 79 l  339 79 l  339 224 l  clp gs col-1 s gr
% Polyline
n 119 224 m 119 79 l  59 79 l  59 224 l  clp gs col-1 s gr
% Polyline
n 59 139 m 119 139 l gs col-1 s gr
% Polyline
n 199 139 m 259 139 l gs col-1 s gr
% Polyline
n 339 159 m 399 159 l gs col-1 s gr
0.500 setlinewidth
% Polyline
n 59 159 m 119 159 l gs col-1 s gr
% Polyline
n 59 164 m 119 164 l gs col-1 s gr
% Polyline
n 119 209 m 119 189 l  59 189 l  59 209 l  clp gs 0.90 setgray fill gr
gs col-1 s gr
% Polyline
n 259 169 m 259 149 l  199 149 l  199 169 l  clp gs 0.90 setgray fill gr
gs col-1 s gr
% Polyline
n 399 129 m 399 109 l  339 109 l  339 129 l  clp gs 0.90 setgray fill gr
gs col-1 s gr
% Polyline
n 199 179 m 259 179 l gs col-1 s gr
% Polyline
n 199 184 m 259 184 l gs col-1 s gr
% Polyline
n 339 179 m 399 179 l gs col-1 s gr
% Polyline
n 339 184 m 399 184 l gs col-1 s gr
% Polyline
n 379 169 m 414 169 l  414 129 l  404 129 l gs col-1 s gr
n 412.000 131.000 m 404.000 129.000 l 412.000 127.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 99 149 m 134 149 l  134 59 l gs col-1 s gr
n 132.000 67.000 m 134.000 59.000 l 136.000 67.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 134 59 m 134 49 l gs col-1 s gr
n 132.000 57.000 m 134.000 49.000 l 136.000 57.000 l gs 2 setlinejoin col-1 s gr
/Times-Italic findfont 10.00 scalefont setfont
124 44 m 
gs 1 -1 scale (actual) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
224 24 m 
gs 1 -1 scale (\(b\)) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
364 24 m 
gs 1 -1 scale (\(c\)) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
84 24 m 
gs 1 -1 scale (\(a\)) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
69 154 m 
gs 1 -1 scale (pars.) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
349 169 m 
gs 1 -1 scale (pars.) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
78 201 m 
gs 1 -1 scale (copy) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
219 161 m 
gs 1 -1 scale (copy) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
360 121 m 
gs 1 -1 scale (copy) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 491 1232 a FN(Figure)14 b(3.11:)j(Cop)o(ying)12 b(structured)17
b(v)n(alue)c(parameters)619 1282 y(\(a\))h(P)o(assed)h(b)o(y)e
(reference,)j(copied)e(b)o(y)g(called)g(pro)q(cedure)619
1332 y(\(b\))g(Copied)g(b)o(y)f(caller,)h(passed)h(b)o(y)e(v)n(alue)619
1381 y(\(c\))h(Copied)g(b)o(y)g(caller,)f(passed)i(b)o(y)f(reference)
287 1597 y(The)f(relationship)f(b)q(et)o(w)o(een)j(these)f(three)g(con)
o(v)o(en)o(tions)f(is)g(sho)o(wn)g(in)g(\014gure)g(3.11,)f(for)224
1647 y(a)k(con)o(v)o(en)o(tional)e(stac)o(k)i(organisation)f(with)g(a)g
(stac)o(k)h(and)g(frame)e(p)q(oin)o(ter.)24 b(The)16
b(shaded)224 1696 y(area)e(in)g(eac)o(h)g(diagram)e(is)i(the)g(copied)g
(v)n(alue.)287 1767 y(In)g(part)g FM(a)f FN(the)i(datum)d(in)i(the)g
(parameter)g(area)g(of)f(the)i(callee)f(p)q(oin)o(ts)f(to)h(the)h
(actual)224 1817 y(parameter)d(somewhere)g(in)g(memory)m(.)i(The)e
(callee)g(has)g(made)f(a)h(cop)o(y)f(in)o(to)h(its)f(o)o(wn)h(stac)o(k)
224 1866 y(frame,)h(in)g(the)h(lo)q(cal)f(v)n(ariable)g(space.)287
1937 y(In)d(part)h FM(b)f FN(the)h(datum)e(has)i(b)q(een)g(copied)g(b)o
(y)f(the)h(caller,)g(with)f(the)h(v)n(alue)f(b)q(eing)g(placed)224
1987 y(in)k(the)g(parameter)g(space)h(of)e(the)i(callee's)e(stac)o(k)i
(frame.)287 2057 y(In)e(part)g FM(c)g FN(the)g(datum)f(has)h(b)q(een)h
(copied)f(b)o(y)g(the)g(caller)g(in)o(to)f(its)h(o)o(wn)g(w)o
(orkspace.)18 b(A)224 2107 y(reference)e(to)e(this)f(cop)o(y)h(is)f
(placed)h(in)f(the)h(callee's)g(parameter)f(area,)g(so)h(that)f(the)h
(callee)224 2157 y(can)h(access)g(the)g(v)n(alue)e(indirectly)m(.)224
2373 y FO(Constructed)h(v)m(alues)224 2488 y FN(The)e(discussion)f(of)g
(passing)g(structured)i(v)n(alues)d(to)h(v)n(alue)g(mo)q(de)f(formal)e
(parameters)j(has)224 2538 y(implicitly)h(assumed)i(that)g(suc)o(h)i(v)
n(alues)e(arise)h(from)e(reference)k(to)d(v)n(ariables.)19
b(Ho)o(w)o(ev)o(er,)224 2588 y(structured)i(v)n(alues)d(can)h(arise)f
(as)h(computed)f(results)h(in)f(at)g(least)h(three)g(instances)h(in)224
2638 y FK(Mo)n(dula-2)7 b FN(:)17 b(functions)c(returning)g(structured)
h(v)n(alues,)e(set)i(op)q(erations)e(on)h(large)f(\(m)o(ulti-)224
2688 y(w)o(ord\))i(sets,)h(and)f(non-constan)o(t)g(v)n(alue)f
(constructors.)p eop
%%Page: 56 62
56 61 bop 224 274 a FN(56)562 b FL(CHAPTER)14 b(3.)32
b(R)o(UNTIME)13 b(OR)o(GANIZA)m(TION)274 427 y FF(PROCEDURE)j(Foo\(par)
h(:)39 b(BigSet\);)17 b Fw(\001)6 b(\001)g(\001)19 b
FF(END)f(Foo;)274 518 y(Foo\(Set\(\)\))o(;)223 b(\(*)19
b(pass)f(function)f(return)g(value)h(as)h(paramete)o(r)e(*\))274
609 y(Foo\(a)h(+)h(b\);)225 b(\(*)19 b(pass)f(expression)e(result)h
(value)h(as)h(parameter)d(*\))274 701 y(Foo\(BigSet)o({i)g(..)j(j}\);)
48 b(\(*)19 b(pass)f(constructe)o(d)f(value)g(as)i(parameter)d(*\))287
845 y FN(In)g(eac)o(h)h(case,)g(the)g(v)n(alue)f(m)o(ust)g(b)q(e)h
(materialized)d(in)i(some)g(memory)e(lo)q(cation.)24
b(In)224 895 y(the)16 b(case)h(of)e(parameter)g(passing)g(con)o(v)o(en)
o(tions)h(whic)o(h)f(rely)h(on)f(the)h(callee)g(making)d(the)224
945 y(cop)o(y)m(,)19 b(it)e(is)h(not)g(p)q(ossible)h(for)e(the)i(v)n
(alue)f(to)f(b)q(e)i(constructed)h(in)e(place.)31 b(F)m(or)18
b(b)q(oth)g(of)224 994 y(the)h(other)g(metho)q(ds)f(of)g(parameter)g
(passing,)g(it)g(is)g(p)q(ossible)h(to)f(construct)i(or)e(return)224
1044 y(the)c(v)n(alue)e(directly)h(in)o(to)f(the)h(cop)o(y)g(p)q
(osition,)f(th)o(us)h(a)o(v)o(oiding)e(an)h(additional)f(blo)q(c)o(k)h
(cop)o(y)224 1094 y(op)q(eration.)224 1209 y FO(Op)q(en)j(arra)o(ys)224
1288 y FK(Pasc)n(al)5 b FN(,)10 b FK(Mo)n(dula-2)17 b
FN(and)10 b FK(A)n(da)j FN(all)d(allo)o(w)e(for)i(parameters)g(to)g(b)q
(e)h(arra)o(ys,)g(the)g(size)g(of)e(whic)o(h)224 1337
y(is)17 b(unkno)o(wn)g(to)g(the)h(called)e(pro)q(cedure.)30
b(In)17 b FK(Pasc)n(al)k FN(t)o(w)o(o)c(additional,)f(hidden)h(in)o
(teger)224 1387 y(parameters)f(are)h(passed)f(to)g(the)h(called)e(pro)q
(cedure,)j(sp)q(ecifying)e(the)g(upp)q(er)h(and)f(lo)o(w)o(er)224
1437 y(b)q(ounds)e(of)e(the)i FK(c)n(onformant)g(arr)n(ay)p
FN(,)e(as)h(it)f(is)h(called.)k(In)c FK(Mo)n(dula-2)19
b FN(formal)11 b(op)q(en)i(arra)o(ys)224 1487 y(are)i(alw)o(a)o(ys)e
(indexed)h(starting)g(from)e(zero,)j(so)f(a)g(single,)f(hidden)h
(cardinal)f FK(HIGH)21 b FN(v)n(alue)224 1537 y(is)14
b(passed)h(for)f(eac)o(h)g(dimension)e(of)i(the)g(arra)o(y)m(.)287
1588 y(Only)h(t)o(w)o(o)g(of)g(the)i(three)g(parameter)e(passing)h(con)
o(v)o(en)o(tions)f(of)g(\014gure)i(3.11)d(ma)o(y)g(b)q(e)224
1638 y(used)i(to)e(pass)h(op)q(en)g(arra)o(ys.)21 b(It)14
b(is)h(not)f(con)o(v)o(enien)o(t)h(to)g(pass)g(the)g(arra)o(y)f(b)o(y)h
(v)n(alue,)e(since)224 1687 y(the)f(actual)f(arra)o(y)g(v)n(alue)g
(size)h(w)o(ould)e(mo)q(dify)f(the)j(run)o(time)e(o\013sets)i(of)f
(other)h(parameters.)287 1739 y(The)h(arra)o(y)f(ma)o(y)f(b)q(e)i
(passed)h(b)o(y)e(reference,)j(and)e(copied)g(b)o(y)f(the)i(caller.)j
(This)c(en)o(tails)224 1788 y(a)19 b(t)o(w)o(o-step)g(pro)q(cedure)h
(en)o(try)f(prolog.)31 b(First)19 b(the)g(stac)o(k)g(p)q(oin)o(ter)g(m)
o(ust)f(b)q(e)h(adjusted)224 1838 y(to)f(pro)o(vide)g(space)h(for)e
(all)g(the)h(data)g(the)g(size)h(of)e(whic)o(h)h(is)g(kno)o(wn)f(at)h
(compile)e(time.)224 1888 y(The)i(stac)o(k)g(m)o(ust)f(then)h(b)q(e)h
(adjusted)f(a)f(second)i(time,)d(b)o(y)i(a)f(v)n(ariable)g(amoun)o(t)e
(whic)o(h)224 1938 y(dep)q(ends)g(on)e(the)g(actual)f
FK(HIGH)20 b FN(v)n(alue.)d(The)c(prolog)f(m)o(ust)g(then)i(execute)g
(a)f(blo)q(c)o(k)f(cop)o(y)224 1988 y(op)q(eration)g(to)g(fetc)o(h)h
(the)f(v)n(alue.)17 b(Finally)m(,)10 b(the)i(reference)j(to)d(the)g
(actual)g(parameter)f(m)o(ust)224 2037 y(b)q(e)h(o)o(v)o(erwritten)f
(to)g(p)q(oin)o(t)f(to)h(the)g(cop)o(y)m(.)17 b(The)11
b(compiler)e(cannot)i(generate)h(co)q(de)g(to)f(access)224
2087 y(the)k(cop)o(y)g(directly)m(,)e(since)i(the)g(o\013set)g(of)f
(the)h(cop)o(y)f(is)g(not)h(kno)o(wn)e(un)o(til)h(run)o(time.)k(Th)o
(us)224 2137 y(an)c(indirect)g(access)i(m)o(ust)d(b)q(e)h(used,)h(see)g
(\014gure)f(3.12.)287 2188 y(If)k(this)i(metho)q(d)e(of)g(passing)h(op)
q(en)h(arra)o(ys)f(is)g(c)o(hosen,)i(it)e(follo)o(ws)e(that)i(the)h
(stac)o(k)224 2238 y(frame)14 b(no)g(longer)g(has)h(a)f(size)i(whic)o
(h)e(is)h(kno)o(wn)f(at)g(compile)f(time.)19 b(Hence)d(either)f(space)
224 2288 y(for)21 b(the)g(cop)o(y)f(m)o(ust)g(b)q(e)h(allo)q(cated)f
(from)f(outside)i(the)g(stac)o(k,)i(or)d(the)i(p)q(ossibilit)o(y)d(of)
224 2338 y(sa)o(ving)12 b(a)g(register)i(and)e(using)g(a)g(virtual)g
(frame)f(p)q(oin)o(ter)h(m)o(ust)g(b)q(e)h(foregone,)f(at)g(least)h
(for)224 2387 y(pro)q(cedures)k(with)c(v)n(alue)g(op)q(en)i(arra)o(y)e
(parameters.)287 2438 y(As)k(an)g(alternativ)o(e,)f(the)i(arra)o(y)f
(ma)o(y)d(b)q(e)k(copied)f(b)o(y)g(the)g(caller,)g(and)g(then)g(passed)
224 2488 y(b)o(y)f(reference.)25 b(In)15 b(this)h(case,)g(the)g(stac)o
(k)g(frame)e(of)h(the)h(caller)f(m)o(ust)g(pro)o(vide)g(space)i(for)224
2538 y(the)d(cop)o(y)m(.)j(This)c(is)g(con)o(v)o(enien)o(t,)g(since)h
(in)f(most)f(cases)i(the)g(caller)f(kno)o(ws)g(the)g(size)h(of)f(the)
224 2588 y(arra)o(y)g(at)f(compile)f(time,)g(and)i(hence)h(can)f
(generate)h(b)q(etter)g(qualit)o(y)d(cop)o(ying)h(co)q(de.)19
b(The)224 2638 y(exceptional)14 b(case)g(arises)f(when)h(a)f(pro)q
(cedure)i(tak)o(es)e(an)g(op)q(en)h(arra)o(y)e(formal)f(and)i(passes)
224 2688 y(it)i(on)f(to)h(another)g(pro)q(cedure.)23
b(In)15 b(just)g(this)g(case,)g(the)g(size)h(of)e(the)i(cop)o(y)e(is)h
(not)g(kno)o(wn)p eop
%%Page: 57 63
57 62 bop 224 274 a FL(3.2.)31 b(PR)o(OCEDURE)14 b(CALL)g(AND)g(RETURN)
602 b FN(57)487 349 y
 14471987 13090570 0 0 14471987 13090570 startTexFig
 487 349 a
%%BeginDocument: opencp.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-27.0 225.0 translate 0.900 -0.900 scale
0.500 setlinewidth
% Polyline
n 39 164 m 54 164 l gs col-1 s gr
n 46.000 162.000 m 54.000 164.000 l 46.000 166.000 l gs 2 setlinejoin col-1 s gr
/Times-Italic findfont 10.00 scalefont setfont
29 164 m 
gs 1 -1 scale (fp) col-1 show gr
% Polyline
n 39 224 m 54 224 l gs col-1 s gr
n 46.000 222.000 m 54.000 224.000 l 46.000 226.000 l gs 2 setlinejoin col-1 s gr
/Times-Italic findfont 10.00 scalefont setfont
29 224 m 
gs 1 -1 scale (sp) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
69 104 m 
gs 1 -1 scale (caller's) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
69 118 m 
gs 1 -1 scale (frame) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
209 104 m 
gs 1 -1 scale (caller's) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
209 118 m 
gs 1 -1 scale (frame) col-1 show gr
% Polyline
n 179 164 m 194 164 l gs col-1 s gr
n 186.000 162.000 m 194.000 164.000 l 186.000 166.000 l gs 2 setlinejoin col-1 s gr
/Times-Italic findfont 10.00 scalefont setfont
169 164 m 
gs 1 -1 scale (fp) col-1 show gr
% Polyline
n 179 249 m 194 249 l gs col-1 s gr
n 186.000 247.000 m 194.000 249.000 l 186.000 251.000 l gs 2 setlinejoin col-1 s gr
/Times-Italic findfont 10.00 scalefont setfont
169 249 m 
gs 1 -1 scale (sp) col-1 show gr
1.000 setlinewidth
% Polyline
n 119 224 m 119 79 l  59 79 l  59 224 l  clp gs col-1 s gr
% Polyline
n 59 139 m 119 139 l gs col-1 s gr
% Polyline
n 199 139 m 259 139 l gs col-1 s gr
0.500 setlinewidth
% Polyline
n 59 159 m 119 159 l gs col-1 s gr
% Polyline
n 59 164 m 119 164 l gs col-1 s gr
% Polyline
n 99 149 m 134 149 l  134 59 l gs col-1 s gr
n 132.000 67.000 m 134.000 59.000 l 136.000 67.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 134 59 m 134 49 l gs col-1 s gr
n 132.000 57.000 m 134.000 49.000 l 136.000 57.000 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
% Polyline
n 259 249 m 259 79 l  199 79 l  199 249 l  clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 199 159 m 259 159 l gs col-1 s gr
% Polyline
n 199 164 m 259 164 l gs col-1 s gr
% Polyline
n 259 249 m 259 224 l  199 224 l  199 249 l  clp gs 0.90 setgray fill gr
gs col-1 s gr
% Polyline
n 239 149 m 274 149 l  274 249 l  264 249 l gs col-1 s gr
n 272.000 251.000 m 264.000 249.000 l 272.000 247.000 l gs 2 setlinejoin col-1 s gr
/Times-Italic findfont 10.00 scalefont setfont
124 44 m 
gs 1 -1 scale (actual) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
69 154 m 
gs 1 -1 scale (pars.) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
69 179 m 
gs 1 -1 scale (initial) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
69 193 m 
gs 1 -1 scale (callee's) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
69 207 m 
gs 1 -1 scale (frame) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
209 154 m 
gs 1 -1 scale (pars.) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
209 199 m 
gs 1 -1 scale (frame) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
209 184 m 
gs 1 -1 scale (callee's) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
220 239 m 
gs 1 -1 scale (copy) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
224 39 m 
gs 1 -1 scale (\(b\)) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
84 39 m 
gs 1 -1 scale (\(a\)) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 463 1269 a FN(Figure)14 b(3.12:)j(Cop)o(ying)c(an)h(op)q(en)g(arra)o
(y)m(,)f(b)q(efore)h(and)g(after)224 1403 y(b)o(y)h(either)h(the)f
(caller)g(or)f(the)i(callee)f(at)f(compile)g(time.)19
b(F)m(or)14 b(this)h(case)h(a)e(cop)o(y)h(lo)q(cation)224
1453 y(m)o(ust)e(b)q(e)i(pro)o(vided)f(o\013-stac)o(k,)f(or)h(a)g(v)n
(ariable)e(size)j(stac)o(k)f(frame)f(created.)287 1503
y(A)h(curious)i(constrain)o(t)f(app)q(ears)g(in)g(draft)f(standard)h
FK(Mo)n(dula-2)7 b FN(.)20 b(In)15 b(this)g(language,)224
1553 y(it)g(is)g(p)q(ossible)h(that)f(the)h(size)g(of)f(arra)o(y)g
(elemen)o(ts)g(ma)o(y)f(b)q(e)h(di\013eren)o(t)i(in)e(the)g(called)g
(and)224 1603 y(calling)i(pro)q(cedures.)31 b(This)18
b(means)f(that)h(the)g(elemen)o(ts)f(of)h(op)q(en)g(arra)o(ys)f(of)h
(subrange)224 1652 y(t)o(yp)q(es)d(ma)o(y)c(need)j(to)f(b)q(e)h(either)
g(widened)g(or)f(narro)o(w)o(ed)h(and)f(range)g(c)o(hec)o(k)o(ed)i
(during)e(the)224 1702 y(parameter)h(cop)o(ying)g(pro)q(cess.)20
b(This)14 b(seems)g(to)g(constrain)h(compilers)e(to)h(use)h(the)g
(\\cop)o(y)224 1752 y(b)o(y)h(the)h(caller,)f(and)g(pass)h(b)o(y)f
(reference")i(con)o(v)o(en)o(tion)e(of)f(\014gure)g(3.11)p
FM(c)n FN(,)h(since)h(only)f(the)224 1802 y(caller)e(kno)o(ws)g(the)g
(storage)h(size)f(of)g(the)g(elemen)o(ts)g(of)f(the)i(actual)e(arra)o
(y)m(.)224 1912 y FO(Pushing)g(parameters)i(on)g(the)g(stac)o(k)224
1990 y FN(The)k(traditional)d(metho)q(d)h(of)g(passing)g(parameters)h
(on)g(a)f(run)o(time)g(stac)o(k,)i(is)e(to)h(push)224
2040 y(eac)o(h)f(of)f(the)h(parameters,)f(in)g(order,)h(as)g(they)f
(are)h(computed.)25 b(The)17 b(parameters)f(th)o(us)224
2089 y(app)q(ear)g(in)f(the)h(callee's)f(parameter)g(area)h(with)f(the)
h(\014rst)g(parameter)f(to)g(b)q(e)h(pushed)g(at)224
2139 y(the)e(greatest)g(o\013set)f(from)e(the)i(stac)o(k)h(mark.)i(The)
d(last)f(parameter)h(to)f(b)q(e)h(pushed)h(w)o(ould)224
2189 y(b)q(e)h(nearest)g(to)f(the)g(stac)o(k)h(mark.)287
2239 y(Language)i FM(C)k FN(allo)o(ws)c(v)n(ariable)g(n)o(um)o(b)q(ers)
g(of)h(parameters,)h(with)e(optional)g(param-)224 2289
y(eters)i(follo)o(wing)c(mandatory)g(parameters)i(in)g(the)h(formal)d
(parameter)i(list.)27 b(Since)18 b(the)224 2339 y(mandatory)10
b(parameters)i(m)o(ust)f(b)q(e)h(at)g(kno)o(wn)f(o\013sets,)i(it)f
(follo)o(ws)e(that)i(optional)e(param-)224 2389 y(eters)j(m)o(ust)e(b)q
(e)h(pushed)g(on)o(to)f(the)h(stac)o(k)g(\014rst,)g(follo)o(w)o(ed)e(b)
o(y)i(the)g(mandatory)d(parameters)224 2438 y(at)17 b(smaller,)e(kno)o
(wn)h(o\013sets)i(from)c(the)j(stac)o(k)g(mark.)24 b(It)17
b(follo)o(ws)e(that)h(when)h FM(C)i FN(imple-)224 2488
y(men)o(tations)14 b(pass)i(parameters)g(b)o(y)f(pushing)g(them)g(on)g
(the)h(stac)o(k,)g(they)g(are)f(pushed)i(in)224 2538
y(righ)o(t-to-left)11 b(order.)19 b(It)12 b(also)f(follo)o(ws)f(that)j
(the)f(caller)g(kno)o(ws)g(the)h(size)g(of)e(the)i(parameter)224
2588 y(area,)18 b(but)f(the)h(callee)f(do)q(es)g(not.)27
b(Th)o(us)18 b(the)f(caller)g(m)o(ust)f(b)q(e)i(resp)q(onsible)g(for)e
FK(cutting)224 2638 y(b)n(ack)k(the)f(stack)p FN(,)g(that)g(is,)f(for)h
(remo)o(ving)d(the)j(parameters)g(from)d(the)j(stac)o(k)g(after)g(the)
224 2688 y(called)d(pro)q(cedure)i(returns.)25 b(These)17
b(con)o(v)o(en)o(tions:)22 b(pushing)16 b(parameters)g(righ)o
(t-to-left,)p eop
%%Page: 58 64
58 63 bop 224 274 a FN(58)562 b FL(CHAPTER)14 b(3.)32
b(R)o(UNTIME)13 b(OR)o(GANIZA)m(TION)224 390 y FN(and)j(cutting)g(the)h
(stac)o(k)g(in)e(the)i(caller,)f(ha)o(v)o(e)g(come)f(to)h(b)q(e)g(kno)o
(wn)g(as)g(\\)p FK(C)g(c)n(al)r(ling)h(c)n(on-)224 440
y(ventions)s FN(".)287 490 y(Man)o(y)12 b FK(Pasc)n(al)17
b FN(compilers)11 b(adopt)h(di\013eren)o(t)i(con)o(v)o(en)o(tions,)e
(in)g(whic)o(h)g(the)h(parameters)224 540 y(are)h(ev)n(aluated)f(and)g
(pushed)h(left-to-righ)o(t,)e(and)h(in)f(whic)o(h)h(the)h(callee)f(is)g
(resp)q(onsible)i(for)224 590 y(remo)o(ving)f(the)h(parameters)g(from)f
(the)h(stac)o(k)h(prior)f(to)f(the)i(return)g(instruction.)22
b(These)224 640 y(so-called)e FK(Pasc)n(al)25 b(c)n(al)r(ling)c(c)n
(onventions)k FN(are)20 b(a)o(wkw)o(ard)g(to)g(implemen)o(t)e(on)i(mac)
o(hines)224 689 y(whic)o(h)e(do)g(not)g(pro)o(vide)f(hardw)o(are)h
(supp)q(ort)h(in)e(the)i(form)d(of)h(a)h(\\return)h(and)e(remo)o(v)o(e)
224 739 y FM(N)j FN(parameters")14 b(instruction.)20
b(With)14 b(our)h(standard)g(stac)o(k)g(frame)e(the)i(parameters)g(are)
224 789 y(b)q(elo)o(w)e(the)g(return)g(address)h(in)e(the)h(frame,)e
(see)j(\014gure)f(3.4.)j(So)c(if)g(the)h(mac)o(hine)e(do)q(es)i(not)224
839 y(ha)o(v)o(e)g(a)g(parameterized)g(return)h(instruction)g(the)f
(return)i(address)f(m)o(ust)e(b)q(e)i(sa)o(v)o(ed)f(while)224
889 y(the)i(stac)o(k)f(p)q(oin)o(ter)g(is)g(adjusted)g(to)g(remo)o(v)o
(e)f(the)i(parameters.)287 938 y(Nested)i(pro)q(cedure)g(calls)e(do)g
(not)g(cause)i(an)o(y)e(problems)f(for)h(those)h(calling)e(con)o(v)o
(en-)224 988 y(tions)g(whic)o(h)h(push)f(parameters)h(on)f(the)h(run)o
(time)e(stac)o(k.)19 b(Consider)c(the)g(follo)o(wing)d(call,)224
1038 y(whic)o(h)i(in)o(v)o(olv)o(es)f(a)h(nested)h(function)f
(application)e(|)607 1115 y FG(WriteCard\(ValueOf\()o(str\),)18
b(width\);)224 1193 y FN(Supp)q(ose)d(w)o(e)f(wish)g(to)g(ev)n(aluate)f
(the)i(ab)q(o)o(v)o(e)f(expression,)g(using)g FM(C)i
FN(calling)d(con)o(v)o(en)o(tions,)224 1243 y(where)i
FK(V)m(alueOf)23 b FN(tak)o(es)14 b(an)f(op)q(en)i(arra)o(y)e
(parameter.)287 1293 y(W)m(e)20 b(need)h(to)f(push)h(the)g(parameters)f
(to)g(the)h(call)f(of)f(\\)p FG(WriteCard)p FN(")f(in)i(righ)o(t-to-)
224 1342 y(left)c(order.)26 b(Therefore,)18 b(the)f(generated)h(ob)r
(ject)f(co)q(de)g(m)o(ust)e(\014rst)i(fetc)o(h)g(and)f(push)h(the)224
1392 y(v)n(ariable)d FK(width)p FN(,)g(then)h(w)o(e)g(m)o(ust)f(ev)n
(aluate)g(and)h(push)g(the)g(left)g(hand)f(parameter)h(of)f(the)224
1442 y(call.)j(Recursiv)o(ely)m(,)c(in)f(order)i(to)f(ev)n(aluate)f
(the)i(nested)g(function)f(call)f(w)o(e)h(m)o(ust)f(push)i(the)224
1492 y(parameters)g(of)f(the)h(function,)f(call)g(the)h(function,)f
(and)g(push)h(the)g(returned)i(v)n(alue.)h(The)224 1542
y(steps)f(are)e(as)g(follo)o(ws)e(|)379 1613 y FE(push)g(the)h(value)f
(of)20 b FF(width)124 b FD(;)13 b FE(2nd)f(p)n(ar)n(am)h(of)g(WriteCar)
n(d)p FD(;)379 1659 y FE(push)f(the)h(HIGH)f(value)g(of)20
b FF(str)49 b FD(;)13 b FE(2nd)f(p)n(ar)n(am)h(of)g(V)m(alueOf)p
FD(;)379 1705 y FE(push)f(the)h(addr)n(ess)f(of)h(of)20
b FF(str)82 b FD(;)13 b FE(1st)f(p)n(ar)n(am)h(of)h(V)m(alueOf)p
FD(;)379 1750 y FE(c)n(al)r(l)f(function)g FF(ValueOf)379
1796 y FE(r)n(emove)g(2)g(p)n(ar)n(ams)g(fr)n(om)h(stack)55
b FD(;)13 b FE(r)n(emove)f(V)m(alueOf)g(p)n(ar)n(ams)379
1842 y(push)g(r)n(esult)h(of)20 b FF(ValueOf)142 b FD(;)13
b FE(1st)f(p)n(ar)n(am)h(of)h(WriteCar)n(d)379 1887 y(c)n(al)r(l)f(pr)n
(o)n(c)n(e)n(dur)n(e)g FF(WriteCard)379 1933 y FE(r)n(emove)g(2)g(p)n
(ar)n(ams)g(fr)n(om)h(stack)55 b FD(;)13 b FE(r)n(emove)f(WriteCar)n(d)
i(p)n(ar)n(ams)224 2007 y FN(W)m(e)f(ha)o(v)o(e)f(assumed)g(that)h(the)
g(calling)f(con)o(v)o(en)o(tions)g(exp)q(ect)j FK(V)m(alueOf)20
b FN(to)13 b(cop)o(y)g(the)g(op)q(en)224 2057 y(arra)o(y)h(parameter,)f
(as)h(sho)o(wn)g(in)f(\014gure)i(3.12.)287 2107 y(Note)i(that)h(in)e
(this)i(example)e(the)i(ev)n(aluation)d(of)i(parameters)g(is)g(o)o(v)o
(erlapp)q(ed,)h(but)224 2157 y(this)13 b(causes)g(no)f(di\016cult)o(y)m
(.)k(When)c FK(V)m(alueOf)21 b FN(is)12 b(in)o(v)o(ok)o(ed)f(it)h(exp)q
(ects,)i(and)e(\014nds,)g(t)o(w)o(o)g(pa-)224 2207 y(rameters.)18
b(It)13 b(neither)g(kno)o(ws)g(nor)f(cares)i(that)e(one)h(of)f(the)h
(parameters)f(of)g(the)h(enclosing)224 2256 y(pro)q(cedure)j(call)d
(has)h(b)q(een)h(ev)n(aluated)f(and)g(is)f(on)h(the)h(stac)o(k)f
(already)m(.)287 2306 y(In)9 b(the)h(case)g(of)f(structured)i
(parameters)f(whic)o(h)f(are)g(passed)i(b)o(y)e(v)n(alue,)g(as)g(in)g
(\014gure)14 b(3.11)p FM(b)o FN(,)224 2356 y(a)i(t)o(ypical)f(sequence)
i(of)e(instructions)i(w)o(ould)d(b)q(e)j(to)e(mo)o(v)o(e)f(the)i(stac)o
(k)g(p)q(oin)o(ter)g(to)g(mak)o(e)224 2406 y(ro)q(om)9
b(for)h(the)g(parameter)g(v)n(alue,)g(then)h(in)o(v)o(ok)o(e)e(a)h(blo)
q(c)o(k-cop)o(y)f(op)q(eration)h(with)g(the)h(actual)224
2456 y(parameter)j(v)n(alue)f(as)h(source)h(op)q(erand,)f(and)g(the)g
(top-of-stac)o(k)g(as)g(destination.)224 2561 y FO(P)o(assing)g
(parameters)g(in)h(registers)224 2638 y FN(It)f(has)g(b)q(ecome)f
(common)e(in)i(mo)q(dern)g(mac)o(hine)f(con)o(v)o(en)o(tions)i(for)f
(the)h(\014rst)g(few)g(param-)224 2688 y(eters)21 b(of)d(pro)q(cedures)
j(to)e(b)q(e)g(passed)h(in)e(registers.)35 b(This)18
b(con)o(v)o(en)o(tion)h(partly)f(re\015ects)p eop
%%Page: 59 65
59 64 bop 224 274 a FL(3.2.)31 b(PR)o(OCEDURE)14 b(CALL)g(AND)g(RETURN)
602 b FN(59)224 390 y(the)15 b(greater)h(n)o(um)o(b)q(er)d(of)h
(registers)i(whic)o(h)e(are)g(a)o(v)n(ailable)e(in)i(suc)o(h)h(mac)o
(hines.)j(Ho)o(w)o(ev)o(er,)224 440 y(there)13 b(are)e(comp)q(elling)e
(p)q(erformance)h(adv)n(an)o(tages)h(from)e(suc)o(h)i(a)g(c)o(hoice,)h
(particularly)e(for)224 490 y FK(RISC)23 b FN(arc)o(hitectures.)k(In)16
b(these)h(arc)o(hitectures)i(v)n(alues)d(are)g(computed)g(in)o(to)f
(registers,)224 540 y(and)e(m)o(ust)f(b)q(e)i(loaded)e(in)o(to)h
(registers)h(b)q(efore)g(b)q(eing)f(used)h(as)f(op)q(erands)h(in)e
(instructions.)224 590 y(If)18 b(parameters)g(are)h(passed)g(in)f
(registers,)i(then)f(there)g(are)g(a)f(statistically)f(signi\014can)o
(t)224 640 y(prop)q(ortion)g(of)f(cases)j(where)f(it)e(is)h(p)q
(ossible)g(to)g(ev)n(aluate)g(the)g(argumen)o(t)f(in)o(to)g(the)i(pa-)
224 689 y(rameter)13 b(register,)h(call)e(the)h(pro)q(cedure,)h(and)f
(ha)o(v)o(e)g(the)g(callee)g(use)g(the)h(v)n(alue)e(out)h(of)f(the)224
739 y(register)18 b(without)f(ev)o(er)h(mo)o(ving)c(the)j(v)n(alue)f
(in)o(to)g(memory)m(.)24 b(T)o(ypical)16 b FK(RISC)23
b FN(mac)o(hines)224 789 y(pass)14 b(the)g(\014rst)g(four)e(to)h(six)g
(parameters)g(in)g(registers,)h(placing)f(an)o(y)f(further)i
(parameters)224 839 y(in)o(to)g(a)f(reserv)o(ed)j FK(p)n(ar)n(ameter)e
(assembly)h(ar)n(e)n(a)i FN(in)c(the)i(stac)o(k)f(frame.)287
889 y(The)i(price)g(whic)o(h)f(is)h(paid)f(for)g(the)h(e\016ciency)h
(adv)n(an)o(tages)e(of)g(passing)g(parameters)224 938
y(in)e(registers)h(is)e(some)g(added)h(complexit)o(y)e(at)i(compile)e
(time,)g(as)h(extra)i(static)f(analysis)e(is)224 988
y(necessary)m(.)287 1038 y(With)h(\014xed)h(parameter)g(assem)o(bly)m
(,)e(the)i(ev)n(aluation)f(and)h(placemen)o(t)f(of)g(parameters)224
1088 y(for)k(nested)h(pro)q(cedure)h(calls)d(cannot)h(b)q(e)h(o)o(v)o
(erlapp)q(ed.)24 b(Let)16 b(us)g(supp)q(ose)h(that)f(the)h(\014rst)224
1138 y(t)o(w)o(o)h(parameters)h(are)f(placed)h(in)f FM(r)806
1144 y Fz(4)842 1138 y FN(and)g FM(r)946 1144 y Fz(5)983
1138 y FN(resp)q(ectiv)o(ely)m(,)i(as)e(is)g(the)h(case)h(for)e
FK(MIPS)224 1187 y FN(arc)o(hitecure)e(mac)o(hines.)h(F)m(or)d(our)f
(previous)i(example)d(|)607 1273 y FG(WriteCard\(ValueOf\()o(str\),)18
b(width\);)224 1358 y FN(this)f(con)o(v)o(en)o(tion)g(determines)g
(that)g FK(width)j FN(will)15 b(b)q(e)j(loaded)e(in)o(to)h
FM(r)1324 1364 y Fz(5)1342 1358 y FN(,)g(the)h FK(V)m(alueOf)25
b FN(re-)224 1408 y(sult)18 b(in)o(to)e FM(r)415 1414
y Fz(4)433 1408 y FN(,)i FK(HIGH)7 b FN(\()p FK(str)t
FN(\))17 b(in)o(to)f FM(r)788 1414 y Fz(5)806 1408 y
FN(,)i(and)f(the)g(reference)j(to)d FK(str)k FN(in)o(to)16
b FM(r)1402 1414 y Fz(4)1421 1408 y FN(.)27 b(Clearly)17
b(the)224 1458 y(ev)n(aluation)11 b(of)g(these)i(parameters,)f(and)g
(their)g(placemen)o(t)f(in)o(to)g(the)h(parameter)g(registers)224
1508 y(cannot)g(b)q(e)h(done)f(in)f(an)h(arbitrary)f(order,)i(since)g
(the)f(same)f(resource)j(is)d(used)i(rep)q(eatedly)m(.)287
1558 y(In)k(general,)i(a)e(safe)h(strategy)h(is)e(to)h(serialize)g(all)
e(pro)q(cedure)k(calls.)29 b(This)18 b(ma)o(y)e(b)q(e)224
1607 y(done)f(either)g(b)o(y)f(the)h(fron)o(tend)f(or)g(the)h(bac)o(k)o
(end.)k(In)14 b(e\013ect,)i(the)e(calls)g(are)h(unnested)h(b)o(y)224
1657 y(p)q(erforming)11 b(the)i(function)f(ev)n(aluations)f(\014rst,)h
(and)g(mo)o(ving)e(the)j(function)e(results)j(to)e(the)224
1707 y(parameter)k(registers)h(afterw)o(ard.)24 b(In)16
b(later)g(c)o(hapters)h(w)o(e)f(shall)f(see)i(that)f(using)g
FK(V)l(AL)p FN('s)224 1757 y(virtual)f(registers)i(to)f(store)h
(function)e(results)i(while)e(parameters)h(are)g(b)q(eing)g(ev)n
(aluated)224 1807 y(solv)o(es)e(the)h(problem)e(elegan)o(tly)m(.)287
1856 y(Notice)20 b(that)g(the)g(problem)e(with)i(o)o(v)o(erlapp)q(ed)g
(parameter)f(ev)n(aluations)g(do)q(es)h(not)224 1906
y(inheren)o(tly)f(ha)o(v)o(e)f(to)g(do)g(with)g(the)h(use)g(of)e
(registers)j(for)e(the)h(parameters.)31 b(The)18 b(ro)q(ot)224
1956 y(cause)d(is)f(that)g(the)h(parameters)e(are)i(b)q(eing)f(passed)h
(in)e(a)h(shared)g(resource.)287 2006 y(In)f(order)h(to)f(deal)h(with)f
(an)g(arbitrary)g(n)o(um)o(b)q(er)g(of)f(parameters,)i(w)o(e)f(shall)g
(allo)q(cate)g(a)224 2056 y FK(p)n(ar)n(ameter)h(assembly)g(ar)n(e)n(a)
i FN(at)d(the)h(top)f(of)f(the)i(stac)o(k)f(frame)f(of)h(the)g(curren)o
(t)i(pro)q(cedure.)224 2106 y(This)h(area)g(m)o(ust)f(b)q(e)i(large)f
(enough)g(to)f(con)o(tain)h(the)g(parameters)g(of)g(whic)o(hev)o(er)h
(called)224 2155 y(pro)q(cedure)k(requires)e(the)g(largest)g(parameter)
f(space.)33 b(This)18 b(assem)o(bly)g(size)h(attribute)224
2205 y(m)o(ust)13 b(b)q(e)i(ev)n(aluated)e(b)o(y)h(static)g(analysis)f
(of)h(the)g(pro)q(cedure)i(b)q(o)q(dy)m(.)287 2255 y(As)c(far)f(as)h
(fron)o(t-ends)g(are)g(concerned,)i(parameters)e(are)g(mo)o(v)o(ed)e
(to)i(kno)o(wn)f(o\013sets)i(in)224 2305 y(the)j(parameter)e(assem)o
(bly)g(area.)21 b(Bac)o(k-ends)16 b(ma)o(y)d(v)o(ery)i(w)o(ell)g
(decide)g(that)g(the)h(\014rst)f FM(N)224 2355 y FN(b)o(ytes)e(of)e
(this)h(assem)o(bly)f(area)h(will)e(b)q(e)i(placed)h(in)e(mac)o(hine)f
(registers,)k(but)e(the)g(fron)o(t-end)224 2404 y(ma)o(y)g(usually)h
(abstract)i(this)f(detail)f(a)o(w)o(a)o(y)m(.)224 2511
y FO(Using)i(\014xed)g(assem)o(bly)f(on)h(non)g FK(RISC)22
b FO(mac)o(hines)224 2588 y FN(There)11 b(ma)o(y)d(b)q(e)i(some)f(adv)n
(an)o(tage)f(in)h(adopting)g(\014xed)h(parameter)f(assem)o(bly)g(con)o
(v)o(en)o(tions,)224 2638 y(ev)o(en)14 b(in)f(the)g(case)h(of)f(mac)o
(hines)f(whic)o(h)h(traditionally)e(push)j(their)f(parameters)g(on)o
(to)g(the)224 2688 y(stac)o(k.)29 b(The)18 b FK(Intel-386)23
b FN(arc)o(hitecture)c(is)e(a)g(t)o(ypical)g(example.)27
b(In)17 b(this)g(mac)o(hine,)g(it)f(is)p eop
%%Page: 60 66
60 65 bop 224 274 a FN(60)562 b FL(CHAPTER)14 b(3.)32
b(R)o(UNTIME)13 b(OR)o(GANIZA)m(TION)224 390 y FN(p)q(ermissible)h(to)g
(use)h(the)f(stac)o(k)h(p)q(oin)o(ter)f(as)g(an)g(index)g(register,)h
(so)f(parameters)h(ma)o(y)d(b)q(e)224 440 y(placed)k(in)g(a)f
(parameter)h(assem)o(bly)e(area)i(relativ)o(e)g(to)g(the)g(\\)p
FG(esp)p FN(")f(register.)24 b(Eac)o(h)17 b(suc)o(h)224
490 y(access)h(is)d(sligh)o(tly)f(faster)j(than)e(a)h(\\)p
FG(pushl)p FN(",)e(on)h(a)o(v)o(erage.)23 b(Using)15
b(\014xed)h(assem)o(bly)f(also)224 540 y(ensures)h(that)e(it)g(is)f
(nev)o(er)i(necessary)h(to)e(w)o(aste)g(cycles)h(cutting)f(bac)o(k)g
(the)h(stac)o(k.)287 591 y(Ho)o(w)o(ev)o(er,)e(the)g(main)e(adv)n(an)o
(tage)h(of)g(adopting)g(suc)o(h)i(con)o(v)o(en)o(tions)f(is)g(to)g
(create)h(\014xed)224 641 y(size)19 b(stac)o(k)f(frames,)g(so)g(that)g
(no)g(register)h(needs)g(to)f(b)q(e)g(w)o(asted)h(on)e(a)h(frame)f(p)q
(oin)o(ter.)224 691 y(In)i(the)g FK(Intel)k FN(case)d(this)e(means)g
(the)h(di\013erence)i(b)q(et)o(w)o(een)f(ha)o(ving)e(sev)o(en)h
(registers)h(to)224 741 y(allo)q(cate,)13 b(rather)i(than)f(the)g
(usual)g(six.)287 792 y(The)j(only)f(disadv)n(an)o(tage)f(of)h(suc)o(h)
i(a)e(con)o(v)o(en)o(tion)g(is)h(the)g(sligh)o(tly)e(greater)j
(analysis)224 842 y(whic)o(h)i(is)f(required)i(at)e(compile)f(time,)h
(and)g(the)h(fact)g(that)f(debugger)i(programs)d(are)224
892 y(able)f(to)f(supply)h(far)f(less)h(information)d(when)j(programs)e
(use)j(these)g(con)o(v)o(en)o(tions.)26 b(F)m(or)224
942 y(example,)9 b(debuggers)i(are)f(unable)f(to)g(deduce)i(the)f(n)o
(um)o(b)q(er)f(of)g(parameters)g(b)o(y)h(examining)224
992 y(the)20 b(instruction)g(at)f(the)h(return)g(address.)36
b(P)o(erhaps)20 b(more)e(serious)i(is)f(the)h(fact)f(that)224
1041 y(debuggers)h(are)e(unable)g(to)f(trace)i(the)g(dynamic)d(call)h
(c)o(hain)h(without)f(sp)q(ecial)i(help,)f(if)224 1091
y(there)d(are)e(no)f(con)o(v)o(en)o(tional)g(stac)o(k)h(frames.)k(P)o
(ossibly)12 b(the)i(b)q(est)g(compromise)c(is)j(to)f(used)224
1141 y(\014xed)f(assem)o(bly)m(,)d(but)i(create)i(con)o(v)o(en)o
(tional)c(stac)o(k)j(frames)e(with)g(a)h(frame)e(p)q(oin)o(ter)i
(register)224 1191 y(in)k(the)g(presence)j(of)c(the)h(debugging)g
FO({g)f FN(command)e(line)j(option.)224 1308 y FO(P)o(assing)g
(parameters)g(in)h(register)e(windo)o(ws)224 1387 y FN(Some)e
FK(RISC)17 b FN(mac)o(hines)11 b(ha)o(v)o(e)g(registers)i(whic)o(h)e
(are)h(arranged)f(in)g(o)o(v)o(erlapping)f(windo)o(ws.)224
1437 y(In)j(the)g FK(SP)m(AR)o(C)18 b FN(arc)o(hitecture)c(there)g(are)
e(32)g(general)h(purp)q(ose)g(registers)h(of)d(whic)o(h)i(eigh)o(t)224
1487 y(are)i(global,)e(and)h(do)g(not)g(form)f(part)i(of)f(the)h(windo)
o(w.)j(The)d(other)g(24)f(registers)i(include)224 1537
y(eigh)o(t)h(registers)h(whic)o(h)f(o)o(v)o(erlap)f(b)q(et)o(w)o(een)i
(the)f(caller)g(and)f(callee)h(pro)q(cedures,)i(and)e(16)224
1587 y(fresh)g(registers.)26 b(The)17 b(register)g(windo)o(ws)f(form)e
(a)i(circular)g(bu\013er)h(of)e(p)q(erhaps)j(four)d(or)224
1636 y(eigh)o(t)k(register)h(sets.)35 b(These)20 b(sets)g(are)f(used)h
(as)f(a)g(\014nite)g(depth)g(stac)o(k.)34 b(If)18 b(the)i(stac)o(k)224
1686 y(o)o(v)o(er\015o)o(ws,)h(the)g(b)q(ottom)e(set)h(of)g(16)f
(registers)j(are)e(sa)o(v)o(ed)g(to)g(a)g(reserv)o(ed)i(lo)q(cation)d
(in)224 1736 y(the)f(corresp)q(onding)h(stac)o(k)e(frame.)28
b(If)17 b(the)h(stac)o(k)f(b)q(ecomes)h(empt)o(y)e(during)h(pro)q
(cedure)224 1786 y(return,)h(then)g(one)f(or)f(more)g(sa)o(v)o(ed)h
(windo)o(ws)f(are)h(restored)i(from)c(their)i(stac)o(k)g(frames.)224
1836 y(Figure)d(3.13)f(sho)o(ws)h(the)g(relationship)f(b)q(et)o(w)o
(een)j(the)e(register)h(windo)o(ws)e(of)g(a)h(caller)f(and)224
1886 y(callee)h(pro)q(cedures.)287 1937 y(The)19 b(region)f(of)g(o)o(v)
o(erlap)g(b)q(et)o(w)o(een)i(a)e(caller)h(and)f(callee)h(register)g
(windo)o(w)f(is)g(used)224 1987 y(to)e(pass)g(the)g(\014rst)g(six)g
(parameters)f(of)g(the)i(call.)22 b(The)16 b(output)g(registers)h
FM(o)p FN(0)e(to)h FM(o)p FN(5)f(hold)224 2037 y(the)20
b(\014rst)f(six)g(outgoing)f(parameters,)h(or)g(more)f(generally)h(the)
g(\014rst)h(48)e(b)o(ytes)h(of)g(the)224 2086 y(parameter)c(assem)o
(bly)f(area.)21 b(These)16 b(six)f(registers)h(app)q(ear)g(as)f(input)f
(registers)j FM(i)p FN(0)e(to)f FM(i)p FN(5)224 2136
y(in)g(the)g(register)h(windo)o(w)e(of)h(the)g(called)g(pro)q(cedure.)
287 2188 y(F)m(or)h(mac)o(hines)h(with)f(register)j(windo)o(ws)d(the)i
(passing)f(of)f(parameters)i(in)o(v)o(olv)o(es)e(the)224
2238 y(same)f(considerations)i(as)f(for)f(other)i(mac)o(hines)d(with)i
(\014xed)g(parameter)g(assem)o(bly)m(.)k(The)224 2287
y(ma)r(jor)d(di\013erence)j(is)e(that)g(no)g(sp)q(ecial)g(steps)i(need)
f(to)f(b)q(e)g(tak)o(en)h(to)e(sa)o(v)o(e)i(and)f(restore)224
2337 y(callee-sa)o(v)o(es)d(registers.)19 b(In)13 b(e\013ect,)h(the)g
(outgoing)e(lo)q(cal)g(and)h(input)f(registers)j(are)e(callee-)224
2387 y(sa)o(v)o(es,)g(since)f(they)h(are)f(preserv)o(ed)i(across)f(pro)
q(cedure)h(calls.)i(Ho)o(w)o(ev)o(er,)d(nothing)e(need)i(b)q(e)224
2437 y(done)j(to)f(sa)o(v)o(e)g(them,)f(since)i(they)g(will)d(b)q(e)j
(automatically)c(sa)o(v)o(ed)j(if)f(the)i(circular)f(bu\013er)224
2487 y(\014lls)f(up,)f(and)h(in)f(man)o(y)f(cases)k(will)c(nev)o(er)j
(b)q(e)f(sa)o(v)o(ed.)287 2538 y(Of)g(course,)h(the)g(stac)o(k)g(frame)
e(m)o(ust)h(reserv)o(e)i(space)f(for)f(the)h(register)h(windo)o(w)d(to)
i(b)q(e)224 2588 y(sa)o(v)o(ed,)10 b(just)g(in)f(case)i(that)e(should)g
(that)h(pro)o(v)o(e)f(to)h(b)q(e)g(necessary)h(inside)f(some)e
(dynamically)224 2638 y(nested)19 b(pro)q(cedure)g(call.)27
b(It)17 b(is)g(normal)e(to)i(allo)q(cate)f(this)h(space)h(as)g(part)f
(of)f(the)i(stac)o(k)224 2688 y(mark,)13 b(so)i(that)g(there)h(is)f(a)f
(comparativ)o(ely)f(large)h(gap)g(b)q(et)o(w)o(een)i(the)g(negativ)o(e)
e(o\013set)i(of)p eop
%%Page: 61 67
61 66 bop 224 274 a FL(3.2.)31 b(PR)o(OCEDURE)14 b(CALL)g(AND)g(RETURN)
602 b FN(61)482 349 y
 14603550 17629511 0 0 14603550 17629511 startTexFig
 482 349 a
%%BeginDocument: windows.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-90.0 288.0 translate 0.900 -0.900 scale
0.500 setlinewidth
% Polyline
n 319 299 m 319 259 l  259 259 l  259 299 l  clp gs col-1 s gr
	[4.000000] 0 setdash
% Polyline
n 179 159 m 259 159 l gs col-1 s gr
	[] 0 setdash
n 251.000 157.000 m 259.000 159.000 l 251.000 161.000 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Polyline
n 179 119 m 259 119 l gs col-1 s gr
	[] 0 setdash
n 251.000 117.000 m 259.000 119.000 l 251.000 121.000 l gs 2 setlinejoin col-1 s gr
n 179 259 m 179 259 l gs col-1 s gr
	[4.000000] 0 setdash
% Polyline
n 179 259 m 259 259 l gs col-1 s gr
	[] 0 setdash
n 251.000 257.000 m 259.000 259.000 l 251.000 261.000 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Polyline
n 179 299 m 259 299 l gs col-1 s gr
	[] 0 setdash
n 251.000 297.000 m 259.000 299.000 l 251.000 301.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 179 299 m 179 259 l  119 259 l  119 299 l  clp gs col-1 s gr
% Polyline
n 179 249 m 179 209 l  119 209 l  119 249 l  clp gs col-1 s gr
% Polyline
n 179 159 m 179 119 l  119 119 l  119 159 l  clp gs col-1 s gr
% Polyline
n 179 204 m 179 164 l  119 164 l  119 204 l  clp gs col-1 s gr
% Polyline
n 319 159 m 319 119 l  259 119 l  259 159 l  clp gs col-1 s gr
% Polyline
n 319 114 m 319 74 l  259 74 l  259 114 l  clp gs col-1 s gr
% Polyline
n 319 69 m 319 29 l  259 29 l  259 69 l  clp gs col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
104 124 m 
gs 1 -1 scale (o7) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
104 299 m 
gs 1 -1 scale (g0) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
104 264 m 
gs 1 -1 scale (g7) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
324 299 m 
gs 1 -1 scale (g0) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
324 264 m 
gs 1 -1 scale (g7) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
324 159 m 
gs 1 -1 scale (i0) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
104 249 m 
gs 1 -1 scale (i0) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
104 214 m 
gs 1 -1 scale (i7) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
104 204 m 
gs 1 -1 scale (l0) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
104 169 m 
gs 1 -1 scale (l7) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
104 159 m 
gs 1 -1 scale (o0) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
324 124 m 
gs 1 -1 scale (i7) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
324 114 m 
gs 1 -1 scale (l0) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
324 34 m 
gs 1 -1 scale (o7) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
324 69 m 
gs 1 -1 scale (o0) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
324 79 m 
gs 1 -1 scale (l7) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
129 134 m 
gs 1 -1 scale (output) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
129 148 m 
gs 1 -1 scale (registers) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
129 224 m 
gs 1 -1 scale (input) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
129 238 m 
gs 1 -1 scale (registers) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
129 274 m 
gs 1 -1 scale (global) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
129 288 m 
gs 1 -1 scale (registers) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
269 274 m 
gs 1 -1 scale (global) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
269 288 m 
gs 1 -1 scale (registers) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
269 134 m 
gs 1 -1 scale (input) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
269 148 m 
gs 1 -1 scale (registers) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
269 44 m 
gs 1 -1 scale (output) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
269 58 m 
gs 1 -1 scale (registers) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
129 194 m 
gs 1 -1 scale (registers) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
129 179 m 
gs 1 -1 scale (local) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
269 89 m 
gs 1 -1 scale (local) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
269 104 m 
gs 1 -1 scale (registers) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
99 319 m 
gs 1 -1 scale (caller's register window) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
239 319 m 
gs 1 -1 scale (callee's register window) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 283 1557 a FN(Figure)14 b(3.13:)j(Ov)o(erlapping)c(register)i(windo)o
(ws)f(of)f(caller)h(and)f(callee)h(in)g FK(SP)m(AR)o(C)224
1692 y FN(the)j(\014rst)f(lo)q(cal)f(v)n(ariable,)f(and)i(the)g(p)q
(ositiv)o(e)f(o\013set)i(of)e(the)h(home)f(lo)q(cation)f(of)h(the)i
(\014rst)224 1742 y(parameter.)287 1793 y(There)12 b(are)g(some)f(sp)q
(ecial)h(p)q(ossibilities)f(whic)o(h)g(arise)h(in)f(the)h(case)h(of)e
(leaf)f(pro)q(cedures.)224 1843 y(F)m(or)j(leaf)f(pro)q(cedures)j(that)
e(can)g(compute)g(their)g(results)h(without)f(using)f(other)i(than)f
(the)224 1893 y(global)h(and)h(input)g(registers)i(it)d(is)h(not)g
(necessary)j(to)d(ev)o(en)h(sa)o(v)o(e)f(the)h(previous)f(register)224
1943 y(windo)o(w.)i(F)m(or)11 b(small)e(leaf)i(pro)q(cedures)j(this)e
(ma)o(y)d(giv)o(e)i(a)g(w)o(orth)o(while)g(p)q(erformance)h(gain.)224
2058 y FO(Returning)h(function)g(results)224 2137 y FN(It)i(is)f
(almost)f(univ)o(ersal)h(that)h(functions)f(return)i(scalar)f(results)g
(in)f(a)g(mac)o(hine)g(register.)224 2187 y(On)j FK(Intel-386)k
FN(it)16 b(is)g(the)g FK(e)n(ax)h FN(register,)g(on)f
FK(MIPS)21 b FN(it)16 b(is)g FM(r)1167 2193 y Fz(2)1185
2187 y FN(,)g(while)f(on)h FK(SP)m(AR)o(C)22 b FN(it)16
b(is)f FM(i)p FN(0)224 2237 y(from)d(the)h(returning)h(functions)f(p)q
(oin)o(t)f(of)g(view,)h(and)f FM(o)p FN(0)h(from)e(the)j(p)q(oin)o(t)e
(of)h(view)f(of)h(the)224 2286 y(caller.)287 2338 y(The)19
b(situation)f(with)g(\015oating)g(p)q(oin)o(t)g(results)i(is)f(more)f
(div)o(erse,)i(although)e(hardly)224 2387 y(more)d(complex.)21
b(Some)14 b(mac)o(hines)g(ha)o(v)o(e)h(a)g(sp)q(eci\014ed)i(\015oating)
d(p)q(oin)o(t)h(register)h(whic)o(h)f(is)224 2437 y(used)f(for)f
(function)g(results,)h(while)f(in)g(the)g FK(Intel)18
b FN(arc)o(hitecture)d(it)d(is)h(usual)g(to)g(return)i(the)224
2487 y(result)g(in)e(the)i(top)f(of)f(the)i(\015oating)d(p)q(oin)o(t)i
(copro)q(cessor)i(stac)o(k.)287 2538 y(Rather)f(more)g(in)o(teresting)h
(is)g(the)g(task)f(of)g(returning)i(results,)f(suc)o(h)h(as)e
(structures,)224 2588 y(or)j(ev)o(en)g(arra)o(ys,)g(whic)o(h)g(are)g
(to)q(o)f(large)h(to)f(\014t)h(in)f(a)g(mac)o(hine)f(register.)31
b(A)o(t)17 b(a)h(certain)224 2638 y(lev)o(el)d(of)f(abstraction,)h(the)
g(solution)f(is)g(simple.)19 b(The)c(called)g(function)f(m)o(ust)g(b)q
(e)h(passed)224 2688 y(an)f(additional)e(argumen)o(t)h(whic)o(h)g(p)q
(oin)o(ts)h(to)f(the)i(lo)q(cation)e(in)o(to)g(whic)o(h)g(the)i(result)
f(m)o(ust)p eop
%%Page: 62 68
62 67 bop 224 274 a FN(62)562 b FL(CHAPTER)14 b(3.)32
b(R)o(UNTIME)13 b(OR)o(GANIZA)m(TION)224 390 y FN(b)q(e)j(placed.)23
b(There)16 b(are)g(really)e(only)h(t)o(w)o(o)g(decisions)h(to)f(b)q(e)h
(made:)j(where)e(is)e(the)h(result)224 440 y(lo)q(cation)c(to)g(b)q(e)h
(allo)q(cated,)f(and)h(ho)o(w)f(is)g(the)h(extra)g(reference)i
(parameter)d(to)h(b)q(e)g(passed?)287 490 y(Consider)21
b(a)f(statemen)o(t)g(whic)o(h)g(assigns)h(a)f(structured)j(function)d
(result)h(to)f(some)224 540 y(v)n(ariable)13 b(|)696
590 y FG(vector)20 b(:=)i(VecFunc\()5 b Ft(\001)i(\001)g(\001)e
FG(\);)224 657 y FN(Conceptually)m(,)18 b(the)h(returning)g(of)f(a)g
(function)g(result)h(is)f(an)g(indivisible)f(op)q(eration)h(in)224
706 y(most)d(languages.)23 b(Y)m(et,)16 b(the)h(function)e(m)o(ust)g
(ob)o(viously)f(construct)k(the)e(result)h(comp)q(o-)224
756 y(nen)o(t)f(b)o(y)f(comp)q(onen)o(t)f(in)g(some)h(fashion.)20
b(The)c(danger)f(is)g(that,)g(for)f(some)g(pathalogical)224
806 y(c)o(hoice)j(of)f(input)g(argumen)o(ts,)f(the)i(partially)d
(constructed)19 b(result)e(migh)o(t)d(o)o(v)o(erwrite)i(its)224
856 y(o)o(wn)g(input)h(data.)25 b(This)17 b(problem)e(ma)o(y)f(b)q(e)j
(a)o(v)o(oided,)f(b)o(y)h(su\016cien)o(tly)f(strict)h(language)224
906 y(seman)o(tics.)g(F)m(or)10 b(example,)f(a)h(language)g(whic)o(h)g
(p)q(ermitted)g(functions)h(to)f(tak)o(e)g(only)g(v)n(alue)224
955 y(parameters,)k(and)f(forbade)h(access)h(to)f(non-lo)q(cal)f(data)g
(within)g(function)g(b)q(o)q(dies,)h(w)o(ould)224 1005
y(prev)o(en)o(t)h(this)f(problem.)k(Ho)o(w)o(ev)o(er,)c(in)f(con)o(v)o
(en)o(tional)g(languages)h(there)h(are)f(no)g(suc)o(h)h(re-)224
1055 y(strictions.)k(There)14 b(seems)f(to)g(b)q(e)h(only)e(t)o(w)o(o)h
(conserv)n(ativ)o(ely)g(safe)h(c)o(hoices.)k(One)c(solution)224
1105 y(is)j(to)f(insist)g(that)h(functions)f(whic)o(h)g(return)i
(structures)h(m)o(ust)c(construct)j(their)f(results)224
1155 y(in)e(a)g(temp)q(orary)g(lo)q(cation)f(in)h(their)g(o)o(wn)g
(stac)o(k)h(frame,)e(then)i(return)g(the)g(v)n(alue)f(to)g(the)224
1204 y(caller)f(with)g(a)g(blo)q(c)o(k)f(cop)o(y)m(.)18
b(A)c(second)h(solution)e(w)o(ould)g(b)q(e)i(to)e(allo)o(w)g(suc)o(h)h
(functions)g(to)224 1254 y(construct)i(their)e(results)h(in)e(the)h
(indicated)g(destination)g(lo)q(cation,)e(and)i(ha)o(v)o(e)f(the)h
(caller)224 1304 y(determine)j(when)g(this)g(destination)f(m)o(ust)f(b)
q(e)j(a)e(temp)q(orary)g(lo)q(cation)f(whic)o(h)i(is)f(after-)224
1354 y(w)o(ard)h(copied)g(to)f(the)h(real)g(destination.)26
b(The)17 b(p)q(oin)o(t)f(of)g(this)h(second)g(strategy)h(is)e(that)224
1404 y(when)d(the)h(caller)e(is)g(compiled)f(it)h(ma)o(y)f(b)q(e)i(p)q
(ossible)g(to)f(determine)h(that)f(the)h(destination)224
1454 y(is)h(logically)e(inaccessible)j(to)e(the)i(function,)e(and)h
(hence)h(an)f(additional)e(blo)q(c)o(k)h(cop)o(y)h(can)224
1503 y(b)q(e)g(a)o(v)o(oided.)j(In)c(the)h(example)e(giv)o(en)g(ab)q(o)
o(v)o(e,)h(where)h(the)g(destination)f(is)g(a)g(named)f(lo)q(ca-)224
1553 y(tion,)h(a)h(temp)q(orary)f(lo)q(cation)g(probably)g(m)o(ust)g(b)
q(e)i(allo)q(cated)e(b)o(y)h(the)g(caller.)k(The)c(caller)224
1603 y(then)h(p)q(erforms)e(a)h(blo)q(c)o(k)g(cop)o(y)f(to)h(the)h
(destination)e(after)h(the)h(function)f(returns.)1543
1588 y Fz(6)287 1653 y FN(Some)9 b(arc)o(hitectural)i(con)o(v)o(en)o
(tions)f(pass)h(the)g(result)g(p)q(oin)o(ter)f(as)g(a)g(hidden,)h
(additional)224 1703 y(\014rst)16 b(parameter.)21 b(This)15
b(\014ts)g(w)o(ell)f(with)h(stac)o(k)g(parameter)g(con)o(v)o(en)o
(tions,)g(since)g(after)h(all)224 1752 y(of)e(the)h(explicit)f
(parameters)g(ha)o(v)o(e)g(b)q(een)i(pushed,)f(the)g(destination)f(p)q
(oin)o(ter)h(is)f(pushed.)224 1802 y(Within)j(the)h(called)g(function,)
f(all)g(parameters)g(ha)o(v)o(e)h(their)g(o\013sets)h(increased)g(b)o
(y)e(one)224 1852 y(p)q(oin)o(ter)c(size.)18 b(It)13
b(is)f(p)q(ossible)h(to)f(adopt)g(the)i(same)d(strategy)i(ev)o(en)g
(when)g(parameters)g(are)224 1902 y(passed)e(in)e(registers,)j(and)d
(this)h(is)f(the)h(standard)g(con)o(v)o(en)o(tion)f(on)h(the)g
FK(MIPS)15 b FN(arc)o(hitecture.)287 1952 y(Other)i(con)o(v)o(en)o
(tions)g(are)g(p)q(ossible.)27 b(In)17 b(the)g(case)g(of)f
FK(SP)m(AR)o(C)23 b FN(a)17 b(reserv)o(ed)h(lo)q(cation)224
2002 y(within)d(the)i(stac)o(k)f(mark)e(space)i(is)g(used)g(for)g(the)g
(destination)g(p)q(oin)o(ter,)f(while)g(in)h(other)224
2051 y(con)o(v)o(en)o(tions)e(an)g(otherwise)h(un)o(used)g(register)g
(is)e(used)i(to)f(pass)g(the)h(p)q(oin)o(ter.)224 2165
y FH(3.2.5)56 b(Addressing)18 b(data)h(from)f(non-lo)r(cal)f(scop)r(es)
224 2242 y FN(The)h(languages)e FK(Pasc)n(al)t FN(,)i
FK(Mo)n(dula-2)23 b FN(and)16 b FK(A)n(da)k FN(pro)q(cedures)g(ma)o(y)
15 b(b)q(e)i(declared)h(nested)224 2292 y(inside)c(other)h(pro)q
(cedures.)20 b(Language)13 b FM(C)k FN(do)q(es)e(not)e(p)q(ermit)g(suc)
o(h)i(nesting.)287 2342 y(It)h(is)g(seman)o(tically)d(p)q(ossible)k
(for)e(nested)j(pro)q(cedures)g(to)e(refer)h(to)f(data)f(whic)o(h)h
(has)224 2391 y(b)q(een)11 b(declared)f(in)g(enclosing)f(scop)q(es,)i
(and)f(whic)o(h)f(exists)h(in)f(separate)i(activ)n(ation)d(records.)224
2441 y(W)m(e)20 b(refer)h(to)f(an)o(y)g(suc)o(h)h(access)h(as)e
FK(uplevel)h(addr)n(essing)p FN(.)37 b(In)20 b(this)h(section,)h(w)o(e)
e(shall)224 2491 y(explore)14 b(t)o(w)o(o)g(di\013eren)o(t)g(mec)o
(hanisms)e(whic)o(h)h(pro)o(vide)h(suc)o(h)g(uplev)o(el)f(addressing.)
19 b(These)224 2541 y(t)o(w)o(o)14 b(mec)o(hanisms)e(are)i
FK(the)h(display)g(ve)n(ctor)p FN(,)e(and)h FK(the)h(static)f(chain)p
FN(.)p 224 2570 577 2 v 271 2597 a Fy(6)288 2609 y Fx(The)e
Fi(gardens)g(p)q(oin)o(t)g Fx(compilers)d(adopt)h(this)h(second)f(con)o
(v)o(en)o(tion.)j(F)m(unctions)d(alw)o(a)o(ys)h(construct)224
2648 y(results)g(in)h(the)g(destination)d(lo)q(cation,)i(passed)g(to)h
(them)f(b)o(y)g(their)h(caller.)k(The)c(compiler)e(of)i(the)g(caller)
224 2688 y(m)o(ust)f(determine)e(if)i(the)g(destination)d(m)o(ust)j(b)q
(e)g(a)g(temp)q(orary)m(,)d(or)k(ma)o(y)e(b)q(e)h(the)g(ultimate)e
(destination.)p eop
%%Page: 63 69
63 68 bop 224 274 a FL(3.2.)31 b(PR)o(OCEDURE)14 b(CALL)g(AND)g(RETURN)
602 b FN(63)249 349 y
 21971107 17300602 0 0 21971107 17300602 startTexFig
 249 349 a
%%BeginDocument: scopetree.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-9.0 270.0 translate 0.900 -0.900 scale
/Times-Bold findfont 10.00 scalefont setfont
49 84 m 
gs 1 -1 scale (procedure) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
64 99 m 
gs 1 -1 scale (var) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
69 69 m 
gs 1 -1 scale (P1 local variables;) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
49 134 m 
gs 1 -1 scale (procedure) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
64 149 m 
gs 1 -1 scale (var) col-1 show gr
0.500 setlinewidth
% Ellipse
n 328 109 13 13 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 309 149 13 13 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 349 150 13 13 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 288 189 13 13 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 328 190 13 13 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 368 190 13 13 0 360 DrawEllipse gs col-1 s gr
n 337.332 128.910 m 335.000 121.000 l 340.780 126.881 l gs 2 setlinejoin col-1 s gr
% Polyline
n 335 121 m 345 138 l gs col-1 s gr
n 298.220 166.881 m 304.000 161.000 l 301.668 168.910 l gs 2 setlinejoin col-1 s gr
% Polyline
n 304 161 m 294 178 l gs col-1 s gr
n 318.137 167.965 m 316.000 160.000 l 321.633 166.022 l gs 2 setlinejoin col-1 s gr
% Polyline
n 316 160 m 326 178 l gs col-1 s gr
n 357.000 171.000 m 355.000 163.000 l 360.529 169.118 l gs 2 setlinejoin col-1 s gr
% Polyline
n 355 163 m 363 178 l gs col-1 s gr
n 316.489 126.135 m 322.000 120.000 l 320.024 128.006 l gs 2 setlinejoin col-1 s gr
% Polyline
n 322 120 m 313 137 l gs col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
362 193 m 
gs 1 -1 scale (P21) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
345 153 m 
gs 1 -1 scale (P2) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
321 193 m 
gs 1 -1 scale (P12) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
282 192 m 
gs 1 -1 scale (P11) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
305 153 m 
gs 1 -1 scale (P1) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
324 113 m 
gs 1 -1 scale (P0) col-1 show gr
% Polyline
n 184 279 m 184 189 l  29 189 l  29 279 l  clp gs col-1 s gr
% Polyline
n 169 169 m 169 124 l  44 124 l  44 169 l  clp gs col-1 s gr
% Polyline
n 169 119 m 169 74 l  44 74 l  44 119 l  clp gs col-1 s gr
% Polyline
n 184 184 m 184 44 l  29 44 l  29 184 l  clp gs col-1 s gr
% Polyline
n 199 299 m 199 9 l  9 9 l  9 299 l  clp gs col-1 s gr
% Polyline
n 169 264 m 169 219 l  44 219 l  44 264 l  clp gs col-1 s gr
/Times-Bold findfont 10.00 scalefont setfont
19 19 m 
gs 1 -1 scale (program) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
34 34 m 
gs 1 -1 scale (var) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
64 19 m 
gs 1 -1 scale (P0;) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
99 84 m 
gs 1 -1 scale (P11\(...\);) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
54 34 m 
gs 1 -1 scale (P0 globals;) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
84 99 m 
gs 1 -1 scale (P11 local variables;) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
49 113 m 
gs 1 -1 scale (begin) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
99 134 m 
gs 1 -1 scale (P12\(...\);) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
49 164 m 
gs 1 -1 scale (begin) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
94 164 m 
gs 1 -1 scale (end;) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
34 179 m 
gs 1 -1 scale (begin) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
79 179 m 
gs 1 -1 scale (end;) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
104 179 m 
gs 1 -1 scale (\(* P1 *\)) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
34 199 m 
gs 1 -1 scale (procedure) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
84 199 m 
gs 1 -1 scale (P2\(...\);) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
49 229 m 
gs 1 -1 scale (procedure) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
99 229 m 
gs 1 -1 scale (P21\(...\);) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
34 274 m 
gs 1 -1 scale (begin) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
79 274 m 
gs 1 -1 scale (end;) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
109 274 m 
gs 1 -1 scale (\(* P2 *\)) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
19 294 m 
gs 1 -1 scale (begin) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
64 294 m 
gs 1 -1 scale (end.) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
84 294 m 
gs 1 -1 scale (\(* P0 *\)) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
84 149 m 
gs 1 -1 scale (P12 local variables;) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
81 111 m 
gs 1 -1 scale (...) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
79 161 m 
gs 1 -1 scale (...) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
64 177 m 
gs 1 -1 scale (...) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
64 271 m 
gs 1 -1 scale (...) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
49 256 m 
gs 1 -1 scale (begin) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
94 256 m 
gs 1 -1 scale (end;) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
118 257 m 
gs 1 -1 scale (\(* P21 *\)) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
64 243 m 
gs 1 -1 scale (var) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
78 255 m 
gs 1 -1 scale (...) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
84 244 m 
gs 1 -1 scale (P21 local variables;) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
49 212 m 
gs 1 -1 scale (var) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
69 212 m 
gs 1 -1 scale (P2 local variables;) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
98 113 m 
gs 1 -1 scale (end;) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
123 113 m 
gs 1 -1 scale (\(* P11 *\)) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
120 163 m 
gs 1 -1 scale (\(* P12 *\)) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
35 55 m 
gs 1 -1 scale (procedure) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
85 55 m 
gs 1 -1 scale (P1\(...\);) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
50 69 m 
gs 1 -1 scale (var) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
48 292 m 
gs 1 -1 scale (...) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 398 1536 a FN(Figure)14 b(3.14:)i(Program)d(sk)o(eleton)h(and)g
(corresp)q(onding)h(scop)q(e)g(tree)224 1684 y FO(Nested)g(scop)q(e)h
(rules)224 1775 y FN(Since)e(pro)q(cedures)h(m)o(ust)d(alw)o(a)o(ys)g
(b)q(e)i(prop)q(erly)f(nested,)h(eac)o(h)g(nested)g(pro)q(cedure)h(has)
f(an)224 1825 y(unique)j(enclosing)f(pro)q(cedure.)28
b(W)m(e)16 b(ma)o(y)e(therefore)k(represen)o(t)h(the)e(nesting)g(of)e
(pro)q(ce-)224 1875 y(dures)d(b)o(y)d(means)h(of)f(a)h
FK(sc)n(op)n(e)i(tr)n(e)n(e)p FN(.)k(The)10 b(sk)o(eleton)h(of)e(a)h
(program,)f(and)h(the)g(corresp)q(onding)224 1925 y(scop)q(e)17
b(tree)g(are)g(sho)o(wn)f(in)f(\014gure)h(3.14.)23 b(This)16
b(particular)f(program)f(is)i(used)h(as)f(an)f(ex-)224
1975 y(ample)e(throughout)h(this)f(section.)287 2032
y(The)k(rule)g(for)g(iden)o(ti\014er)g(visibilit)o(y)e(in)i(languages)f
(with)h(nested)h(scop)q(es)h(is)e(that)g(an)224 2082
y(applied)12 b(o)q(ccurrence)k(of)c(a)g(particular)g(iden)o(ti\014er)h
(will)e(b)q(e)i(b)q(ound)g(to)f(the)i(most)d(lo)q(cal)h(dec-)224
2132 y(laration)k(of)g(that)h(iden)o(ti\014er.)27 b(In)16
b(op)q(erational)g(terms,)h(the)g(lo)q(cal)f(scop)q(e)i(name-table)d
(is)224 2182 y(searc)o(hed)g(\014rst,)f(and)f(in)g(the)h(ev)o(en)o(t)g
(that)g(the)g(name)e(is)h(not)g(found,)g(the)h(ancestors)h(in)e(the)224
2231 y(scop)q(e)j(tree)g(are)f(searc)o(hed)i(successiv)o(ely)m(.)22
b(If)14 b(the)h(ro)q(ot)g(no)q(de)g(is)g(reac)o(hed)h(without)e(a)h
(dec-)224 2281 y(laration)f(b)q(eing)i(disco)o(v)o(ered,)g(then)g(the)g
(iden)o(ti\014er)f(is)g(undeclared,)i(and)e(the)h(o)q(ccurrence)224
2331 y(is)e(erroneous.)287 2389 y(Note)i(a)f(curiosit)o(y)g(with)g(the)
i(scop)q(e)f(tree)h(in)e(\014gure)h(3.14.)22 b(Pro)q(cedure)c(names)c
(o)q(ccur)224 2438 y(as)19 b(lab)q(els)f(of)g(the)i(scop)q(es,)g(and)f
(these)h(names)e(themselv)o(es)g(denote)i(declared)f(en)o(tities.)224
2488 y(Ho)o(w)o(ev)o(er,)14 b(the)g(declaration)g(of)f(a)g(pro)q
(cedure)j(o)q(ccurs)f(in)e(the)h(scop)q(e)h(whic)o(h)f(is)f(the)h
FK(p)n(ar)n(ent)224 2538 y FN(of)i(the)h(no)q(de)g(in)f(the)i(tree)f
(whic)o(h)g(is)f(lab)q(elled)g(with)g(the)h(pro)q(cedure)i(name.)25
b(Th)o(us)16 b(it)g(is)224 2588 y(p)q(ossible,)c(for)f(example,)f(to)i
(call)e(pro)q(cedure)k FK(P2)j FN(from)10 b(pro)q(cedure)j
FK(P12)18 b FN(although)10 b(it)i(do)q(es)224 2638 y(not)k(lo)q(ok)f
(from)f(the)i(\014gure)g(as)g(though)g FK(P2)21 b FN(is)16
b(on)f(the)i(path)e(from)f FK(P12)22 b FN(to)16 b(the)g(ro)q(ot)g(of)
224 2688 y(the)h(scop)q(e)g(tree.)24 b(In)16 b(fact,)g
FK(P2)22 b FN(is)15 b(declared)i(inside)e(the)i(scop)q(e)g(of)e
FK(P0)p FN(,)h(whic)o(h)f FK(is)k FN(on)d(the)p eop
%%Page: 64 70
64 69 bop 224 274 a FN(64)562 b FL(CHAPTER)14 b(3.)32
b(R)o(UNTIME)13 b(OR)o(GANIZA)m(TION)480 349 y
 14669332 17366384 0 0 14669332 17366384 startTexFig
 480 349
a
%%BeginDocument: stack1.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-83.0 271.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Polyline
n 119 179 m 179 179 l gs col-1 s gr
n 119 239 m 119 239 l gs col-1 s gr
% Polyline
n 119 239 m 179 239 l gs col-1 s gr
% Polyline
n 179 299 m 179 59 l  119 59 l  119 299 l  clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 119 64 m 179 64 l gs col-1 s gr
% Polyline
n 119 134 m 179 134 l gs col-1 s gr
% Polyline
n 119 139 m 179 139 l gs col-1 s gr
% Polyline
n 119 194 m 179 194 l gs col-1 s gr
% Polyline
n 119 199 m 179 199 l gs col-1 s gr
% Polyline
n 119 254 m 179 254 l gs col-1 s gr
% Polyline
n 119 259 m 179 259 l gs col-1 s gr
n 192.000 301.000 m 184.000 299.000 l 192.000 297.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 184 299 m 204 299 l gs col-1 s gr
n 192.000 261.000 m 184.000 259.000 l 192.000 257.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 184 259 m 204 259 l gs col-1 s gr
% Polyline
n 131 61 m 118 61 l  105 38 l gs col-1 s gr
1.000 setlinewidth
% Polyline
n 340 179 m 340 59 l  279 59 l  279 179 l  clp gs col-1 s gr
0.000 setlinewidth
% Polyline
n 338 177 m 338 60 l  281 60 l  281 177 l  clp gs 0.95 setgray fill gr
% Polyline
n 178 133 m 178 120 l  121 120 l  121 133 l  clp gs 0.95 setgray fill gr
% Polyline
n 177 177 m 177 140 l  121 140 l  121 177 l  clp gs 0.95 setgray fill gr
% Polyline
n 178 253 m 178 240 l  121 240 l  121 253 l  clp gs 0.95 setgray fill gr
% Polyline
n 177 297 m 177 260 l  121 260 l  121 297 l  clp gs 0.95 setgray fill gr
0.500 setlinewidth
% Open spline
n 130.000 256.000 m 120.000 256.000 l
	120.000 256.000 110.000 256.000 107.500 251.500 DrawSplineSection
	107.500 251.500 105.000 247.000 105.000 228.000 DrawSplineSection
	105.000 228.000 105.000 209.000 110.500 204.000 DrawSplineSection
	116.000 199.000 l gs col-1 s gr
n 108.735 202.902 m 116.000 199.000 l 111.426 205.861 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
% Polyline
n 119 119 m 179 119 l gs col-1 s gr
0.500 setlinewidth
% Open spline
n 130.000 196.000 m 120.000 196.000 l
	120.000 196.000 110.000 196.000 107.500 191.500 DrawSplineSection
	107.500 191.500 105.000 187.000 105.000 168.000 DrawSplineSection
	105.000 168.000 105.000 149.000 110.500 144.000 DrawSplineSection
	116.000 139.000 l gs col-1 s gr
n 108.735 142.902 m 116.000 139.000 l 111.426 145.861 l gs 2 setlinejoin col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
287 116 m 
gs 1 -1 scale (variables) col-1 show gr
% Open spline
n 131.000 136.000 m 121.500 136.000 l
	121.500 136.000 112.000 136.000 108.500 132.000 DrawSplineSection
	108.500 132.000 105.000 128.000 105.000 100.500 DrawSplineSection
	105.000 100.500 105.000 73.000 110.500 68.500 DrawSplineSection
	116.000 64.000 l gs col-1 s gr
n 108.542 67.518 m 116.000 64.000 l 111.075 70.614 l gs 2 setlinejoin col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
129 84 m 
gs 1 -1 scale (P0 stack) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
129 154 m 
gs 1 -1 scale (P1 stack) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
129 170 m 
gs 1 -1 scale (frame) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
124 214 m 
gs 1 -1 scale (P11 stack) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
124 230 m 
gs 1 -1 scale ( frame) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
124 274 m 
gs 1 -1 scale (P12 stack) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
124 290 m 
gs 1 -1 scale ( frame) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
208 261 m 
gs 1 -1 scale (fp) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
206 301 m 
gs 1 -1 scale (sp) col-1 show gr
/Times-Bold findfont 17.00 scalefont setfont
128 257 m 
gs 1 -1 scale (.) col-1 show gr
/Times-Bold findfont 17.00 scalefont setfont
130 197 m 
gs 1 -1 scale (.) col-1 show gr
/Times-Bold findfont 17.00 scalefont setfont
129 137 m 
gs 1 -1 scale (.) col-1 show gr
/Times-Bold findfont 17.00 scalefont setfont
129 63 m 
gs 1 -1 scale (.) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
124 99 m 
gs 1 -1 scale (workspace) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
92 42 m 
gs 1 -1 scale (nil) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
131 20 m 
gs 1 -1 scale (Stack) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
131 36 m 
gs 1 -1 scale (Segment) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
288 37 m 
gs 1 -1 scale (Segment) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
288 22 m 
gs 1 -1 scale (Data) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
287 100 m 
gs 1 -1 scale (P0 global) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 224 1540 a FN(Figure)20 b(3.15:)28 b(Stac)o(k)19 b(frame)f(sho)o(wing)
h(dynamic)f(c)o(hain.)34 b(Accessible)21 b(data)e(areas)h(are)224
1590 y(shaded)224 1718 y(path.)224 1834 y FO(The)c(dynamic)f(c)o(hain)
224 1913 y FN(Let)d(us)f(supp)q(ose,)h(for)e(the)i(program)d(sho)o(wn)i
(in)f(\014gure)h(3.14,)f(that)h(the)g(follo)o(wing)d(sequence)224
1963 y(of)14 b(pro)q(cedure)h(calls)f(tak)o(es)g(place)g(|)354
2056 y FD(program)g FE(P0)k FD(calls)c(pro)q(cedure)g
FE(P1)354 2102 y FD(pro)q(cedure)h FE(P1)i FD(calls)e(pro)q(cedure)f
FE(P11)354 2148 y FD(pro)q(cedure)h FE(P11)i FD(calls)d(pro)q(cedure)h
FE(P12)224 2288 y FN(After)21 b(these)g(calls,)f(the)g(stac)o(k)g(is)g
(as)g(sho)o(wn)f(in)h(\014gure)g(3.15,)f(whic)o(h)h(also)f(sho)o(ws)h
(the)224 2337 y(dynamic)12 b(c)o(hain)h(linking)f(the)i(stac)o(k)g
(frames.)j(In)c(this)g(\014gure,)h(the)g(accessible)h(data)e(areas)224
2387 y(are)h(sho)o(wn)g(shaded,)g(and)f(the)i(dynamic)c(c)o(hain)j(is)f
(the)h(link)o(ed)f(list)g(sho)o(wn)h(do)o(wn)f(the)i(left)224
2437 y(hand)f(side)g(of)g(the)g(stac)o(k.)287 2488 y(The)d(v)n
(ariables)f(whic)o(h)g(are)h(declared)h(in)e(the)h(b)q(o)q(dy)g(of)f
(the)h(program)e(are)j(placed)e(in)h(the)224 2538 y(data)k(segmen)o(t,)
e(as)i(they)g(ha)o(v)o(e)f(static)h(exten)o(t.)21 b(Ho)o(w)o(ev)o(er,)
14 b(the)i(program)c(ma)o(y)h(still)g(ha)o(v)o(e)224
2588 y(a)i(stac)o(k)g(frame,)f(if)g(it)g(needs)j(some)d(w)o(orkspace.)
22 b(In)15 b(this)g(example,)e(since)j(the)f(curren)o(tly)224
2638 y(activ)o(e)e(pro)q(cedure)i(is)e(nested,)h(the)f(co)q(de)h(has)f
(access)h(to)f(the)g(v)n(ariables)g(of)f(pro)q(cedure)i
FK(P1)p FN(,)224 2688 y(as)g(w)o(ell)g(as)g(to)f(its)h(o)o(wn)g(lo)q
(cals)f(and)h(the)g(program)e(globals.)p eop
%%Page: 65 71
65 70 bop 224 274 a FL(3.2.)31 b(PR)o(OCEDURE)14 b(CALL)g(AND)g(RETURN)
602 b FN(65)224 390 y FO(The)16 b(displa)o(y)d(v)o(ector)224
467 y FN(One)j(metho)q(d)e(of)g(accessing)i(data)e(in)g(the)h(stac)o(k)
h(frames)d(of)h(enclosing)h(pro)q(cedures)i(is)d(to)224
517 y(main)o(tain)i(a)h(p)q(oin)o(ter)h(stac)o(k,)h(called)f(a)g
FK(display)g(ve)n(ctor)p FN(,)g(whic)o(h)g(p)q(oin)o(ts)g(to)g(eac)o(h)
g(of)g(the)224 567 y(logically)13 b(accessible)j(stac)o(k)f(frames.)20
b(In)15 b(the)g(case)h(of)e(diagram)f(3.15,)g(the)j(v)o(ector)f(w)o
(ould)224 617 y(logically)g(ha)o(v)o(e)i(three)h(p)q(oin)o(ters,)g(p)q
(oin)o(ting)e(to)h(the)g(lo)q(cal)f(frame)g(\()p FK(P12)6
b FN(\),)18 b(the)f(enclosing)224 666 y(frame)11 b(\()p
FK(P1)6 b FN(\),)12 b(and)g(to)g(the)g(global)e(data)i(area.)18
b(In)11 b(practice)i(only)f(the)g(in)o(termediate)f(lev)o(els)224
716 y(of)j(the)h(v)o(ector)g(need)h(to)e(b)q(e)h(implemen)o(ted,)d
(since)j(the)g(lo)q(cal)f(p)q(oin)o(ter)h(simply)d(duplicates)224
766 y(the)18 b(frame)e(p)q(oin)o(ter,)h(and)g(the)h(global)d(p)q(oin)o
(ter)j(p)q(oin)o(ts)f(to)f(the)i(static)f(data)g(area.)28
b(The)224 816 y(in)o(termediate)17 b(lev)o(els)g(of)g(the)h(displa)o(y)
e(v)o(ector)i(are)g(usually)e(k)o(ept)i(in)f(a)g(\014xed)h(size)g(arra)
o(y)224 866 y(in)g(the)h(run)o(time)d(supp)q(ort)j(system.)31
b(The)18 b(\014xed)g(size)h(of)f(the)g(arra)o(y)g(places)h(a)e(limit)f
(on)224 915 y(the)j(allo)o(w)o(able)c(depth)k(of)e(static)h(nesting)g
(of)f(pro)q(cedure)i(declarations,)f(with)g(limits)d(of)224
965 y(10)g(to)h(16)f(b)q(eing)g(common.)20 b(In)c(the)g(case)g(of)f
(programming)d(languages)j(whic)o(h)g(supp)q(ort)224
1015 y(coroutines,)g(the)f(displa)o(y)f(v)o(ector)i(forms)d(part)i(of)f
(the)i(p)q(er-coroutine)g(state.)287 1065 y(Lo)q(cal)f(data)h(is)f
(accessed)k(relativ)o(e)c(to)h(the)h(frame)d(p)q(oin)o(ter,)i(as)g(alw)
o(a)o(ys,)f(while)g(global)224 1115 y(data)e(is)g(also)g(accessed)i(in)
e(the)g(normal)e(w)o(a)o(y)m(.)17 b(In)o(termediate)12
b(lev)o(el)f(data)h(at)g(lev)o(el)g FM(N)5 b FN(,)12
b(with)224 1164 y(stac)o(k)j(frame)d(o\013set)j FM(k)g
FN(is)f(accessed)i(b)o(y)d(the)i(address)g(expression)g(|)801
1252 y FG(display)o FN([)p FM(N)5 b FN(])j(+)i FM(k)287
1339 y FN(Main)o(tainence)17 b(of)f(the)h(displa)o(y)f(v)o(ector)h
(data)g(is)f(one)h(of)g(the)g(tasks)g(whic)o(h)g(m)o(ust)f(b)q(e)224
1389 y(p)q(erformed)h(b)o(y)f(the)i(pro)q(cedure)g(prolog)e(and)h
(epilog.)26 b(Ho)o(w)o(ev)o(er,)17 b(not)g(ev)o(ery)g(pro)q(cedure)224
1439 y(needs)g(to)d(manipulate)f(the)i(displa)o(y)m(.)20
b(A)15 b(pro)q(cedure)h(has)f(an)g(attribute)g(whic)o(h)g(indicates)224
1488 y(whether)c(or)f(not)g(it)f(has)h(data)f(whic)o(h)h(is)f(uplev)o
(el)h(addressed,)h(and)f(another)g(whic)o(h)f(sp)q(eci\014es)224
1538 y(the)h(lev)o(el)f(of)g(static)h(nesting,)g(\\)p
FG(lexLevel)p FN(".)k(The)c(emission)e(of)h(displa)o(y)f(co)q(de)i(in)f
(the)h(prolog)224 1588 y(is)k(con)o(trolled)g(b)o(y)f(the)i(follo)o
(wing)c(logic)i(|)393 1670 y FF(IF)f FE(pr)n(o)n(c)n(e)n(dur)n(e)f(has)
i(uplevel)e(addr)n(esse)n(d)g(obje)n(cts)j FF(THEN)444
1715 y FE(emit)f(c)n(o)n(de)f(to)i(save)g FF(display[l)o(ex)o(Lev)o
(el])9 b FE(in)k(worksp)n(ac)n(e)s FD(;)444 1761 y FE(emit)g(c)n(o)n
(de)f(to)i(c)n(opy)e(fp)h(to)h FF(display[le)o(xLe)o(vel)o(])393
1807 y(END;)224 1936 y FN(In)g(the)h(epilog,)d(the)j(corresp)q(onding)g
(logic)d(is)i(|)393 2018 y FF(IF)e FE(pr)n(o)n(c)n(e)n(dur)n(e)f(has)i
(uplevel)e(addr)n(esse)n(d)g(obje)n(cts)j FF(THEN)444
2064 y FE(emit)f(c)n(o)n(de)f(to)i(r)n(estor)n(e)g FF(display[l)o(exL)o
(ev)o(el])9 b FE(fr)n(om)14 b(worksp)n(ac)n(e)s FD(;)393
2109 y FF(END;)287 2239 y FN(It)c(is)h(seen)h(that)f(at)f(most)f(a)i
(single)f(displa)o(y)g(lo)q(cation)g(needs)i(to)e(b)q(e)h(sa)o(v)o(ed)g
(and)g(restored)224 2289 y(on)j(pro)q(cedure)i(en)o(try)f(and)f(exit.)
19 b(That)14 b(suc)o(h)h(sa)o(ving)f(and)g(restoring)g(is)g(necessary)j
(at)d(all)224 2339 y(ma)o(y)k(b)q(e)j(understo)q(o)q(d)g(b)o(y)f
(considering)g(the)g(situation)g(where)h(a)e(v)o(ery)h(deeply)h(nested)
224 2389 y(pro)q(cedure)15 b(p)q(erforms)d(an)h(\\uplev)o(el)f(call")g
(to)h(a)f(m)o(uc)o(h)g(less)h(nested)h(pro)q(cedure.)20
b(Consider)224 2438 y(\014gure)d(3.16)d(in)i(whic)o(h)g(a)f(pro)q
(cedure)j(at)e(lev)o(el)f(4)h(calls)g(one)g(of)f(its)h(o)o(wn)f
(predecessors)k(at)224 2488 y(lev)o(el)e(1.)26 b(Before)18
b(the)f(call,)g(the)g(displa)o(y)f(v)o(ector)i(has)e(\014v)o(e)i(activ)
o(e)e(elemen)o(ts,)h(and)g(these)224 2538 y(elemen)o(ts)12
b(m)o(ust)e(b)q(e)i(unc)o(hanged)g(when)g(con)o(trol)g(returns)h(to)e
FK(P4)18 b FN(after)11 b FK(P1)18 b FN(returns.)h(After)224
2588 y FK(P1)h FN(has)14 b(b)q(een)h(called,)e(the)i(displa)o(y)e(has)h
(only)f(t)o(w)o(o)g(activ)o(e)h(elemen)o(ts.)287 2638
y(It)f(app)q(ears)h(as)g(though)f(the)h(whole)g(displa)o(y)e(m)o(ust)g
(b)q(e)i(sa)o(v)o(ed)g(and)f(restored)j(when)e(an)224
2688 y(uplev)o(el)j(call,)g(suc)o(h)h(as)g(that)f(in)g(\014gure)h(3.16)
e(o)q(ccurs.)29 b(Ho)o(w)o(ev)o(er,)18 b(this)g(is)f(not)g(so,)g(since)
p eop
%%Page: 66 72
66 71 bop 224 274 a FN(66)562 b FL(CHAPTER)14 b(3.)32
b(R)o(UNTIME)13 b(OR)o(GANIZA)m(TION)159 349 y
 24799723 14866677 0 0 24799723 14866677 startTexFig
 159 349
a
%%BeginDocument: stack2.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-69.0 235.0 translate 0.900 -0.900 scale
0.500 setlinewidth
% Ellipse
n 114 79 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 114 119 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 114 159 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 114 199 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 114 239 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 88 159 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 87 198 11 11 0 360 DrawEllipse gs col-1 s gr
% Polyline
n 114 109 m 114 89 l gs col-1 s gr
n 112.000 97.000 m 114.000 89.000 l 116.000 97.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 114 149 m 114 129 l gs col-1 s gr
n 112.000 137.000 m 114.000 129.000 l 116.000 137.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 114 189 m 114 169 l gs col-1 s gr
n 112.000 177.000 m 114.000 169.000 l 116.000 177.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 114 229 m 114 209 l gs col-1 s gr
n 112.000 217.000 m 114.000 209.000 l 116.000 217.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 94 149 m 108 128 l gs col-1 s gr
n 101.898 133.547 m 108.000 128.000 l 105.226 135.766 l gs 2 setlinejoin col-1 s gr
% Polyline
n 95 190 m 108 168 l gs col-1 s gr
n 102.208 173.870 m 108.000 168.000 l 105.652 175.905 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Open spline
n 124.000 239.000 m 134.000 239.000 l
	134.000 239.000 144.000 239.000 144.000 229.000 DrawSplineSection
	144.000 229.000 144.000 219.000 144.000 179.000 DrawSplineSection
	144.000 179.000 144.000 139.000 144.000 129.000 DrawSplineSection
	144.000 129.000 144.000 119.000 134.000 119.000 DrawSplineSection
	124.000 119.000 l gs col-1 s gr
	[] 0 setdash
n 132.000 121.000 m 124.000 119.000 l 132.000 117.000 l gs 2 setlinejoin col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
108 244 m 
gs 1 -1 scale (P4) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
108 204 m 
gs 1 -1 scale (P3) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
108 164 m 
gs 1 -1 scale (P2) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
108 124 m 
gs 1 -1 scale (P1) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
108 83 m 
gs 1 -1 scale (P0) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
133 252 m 
gs 1 -1 scale (P4 calls P1) col-1 show gr
1.000 setlinewidth
% Polyline
n 299 219 m 299 39 l  239 39 l  239 219 l  clp gs col-1 s gr
% Polyline
n 239 179 m 299 179 l gs col-1 s gr
% Polyline
n 239 139 m 299 139 l gs col-1 s gr
% Polyline
n 239 99 m 299 99 l gs col-1 s gr
% Polyline
n 239 59 m 299 59 l gs col-1 s gr
% Polyline
n 459 259 m 459 39 l  399 39 l  399 259 l  clp gs col-1 s gr
% Polyline
n 399 59 m 459 59 l gs col-1 s gr
% Polyline
n 399 99 m 459 99 l gs col-1 s gr
% Polyline
n 399 139 m 459 139 l gs col-1 s gr
% Polyline
n 399 179 m 459 179 l gs col-1 s gr
% Polyline
n 399 219 m 459 219 l gs col-1 s gr
0.500 setlinewidth
n 312.000 221.000 m 304.000 219.000 l 312.000 217.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 304 219 m 324 219 l gs col-1 s gr
n 312.000 181.000 m 304.000 179.000 l 312.000 177.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 304 179 m 324 179 l gs col-1 s gr
n 472.000 221.000 m 464.000 219.000 l 472.000 217.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 464 219 m 484 219 l gs col-1 s gr
n 472.000 261.000 m 464.000 259.000 l 472.000 257.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 464 259 m 484 259 l gs col-1 s gr
% Polyline
n 329 119 m 329 39 l  359 39 l  359 119 l gs col-1 s gr
% Polyline
n 169 119 m 169 39 l  199 39 l  199 119 l gs col-1 s gr
% Polyline
n 169 49 m 199 49 l gs col-1 s gr
% Polyline
n 169 59 m 199 59 l gs col-1 s gr
% Polyline
n 169 69 m 199 69 l gs col-1 s gr
% Polyline
n 169 79 m 199 79 l gs col-1 s gr
% Polyline
n 169 89 m 199 89 l gs col-1 s gr
% Polyline
n 329 49 m 359 49 l gs col-1 s gr
% Polyline
n 329 59 m 359 59 l gs col-1 s gr
0.000 setlinewidth
% Polyline
n 457 256 m 457 220 l  401 220 l  401 256 l  clp gs 0.95 setgray fill gr
% Polyline
n 297 96 m 297 60 l  241 60 l  241 96 l  clp gs 0.95 setgray fill gr
% Polyline
n 297 137 m 297 100 l  241 100 l  241 137 l  clp gs 0.95 setgray fill gr
% Polyline
n 297 177 m 297 141 l  241 141 l  241 177 l  clp gs 0.95 setgray fill gr
% Polyline
n 297 217 m 297 181 l  241 181 l  241 217 l  clp gs 0.95 setgray fill gr
0.500 setlinewidth
% Open spline
n 344.000 44.000 m 361.500 44.000 l
	361.500 44.000 379.000 44.000 379.000 31.500 DrawSplineSection
	379.000 31.500 379.000 19.000 389.000 19.000 DrawSplineSection
	399.000 19.000 l gs col-1 s gr
n 391.000 17.000 m 399.000 19.000 l 391.000 21.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 184.000 44.000 m 201.500 44.000 l
	201.500 44.000 219.000 44.000 219.000 31.500 DrawSplineSection
	219.000 31.500 219.000 19.000 229.000 19.000 DrawSplineSection
	239.000 19.000 l gs col-1 s gr
n 231.000 17.000 m 239.000 19.000 l 231.000 21.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 184.000 54.000 m 194.000 54.000 l
	194.000 54.000 204.000 54.000 209.000 54.000 DrawSplineSection
	209.000 54.000 214.000 54.000 219.000 56.500 DrawSplineSection
	219.000 56.500 224.000 59.000 229.000 59.000 DrawSplineSection
	234.000 59.000 l gs col-1 s gr
n 226.000 57.000 m 234.000 59.000 l 226.000 61.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 184.000 84.000 m 191.500 84.000 l
	191.500 84.000 199.000 84.000 201.500 86.500 DrawSplineSection
	201.500 86.500 204.000 89.000 211.500 131.500 DrawSplineSection
	211.500 131.500 219.000 174.000 221.500 176.500 DrawSplineSection
	221.500 176.500 224.000 179.000 229.000 179.000 DrawSplineSection
	234.000 179.000 l gs col-1 s gr
n 226.000 177.000 m 234.000 179.000 l 226.000 181.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 184.000 74.000 m 194.000 74.000 l
	194.000 74.000 204.000 74.000 206.500 76.500 DrawSplineSection
	206.500 76.500 209.000 79.000 214.000 106.500 DrawSplineSection
	214.000 106.500 219.000 134.000 221.500 136.500 DrawSplineSection
	221.500 136.500 224.000 139.000 229.000 139.000 DrawSplineSection
	234.000 139.000 l gs col-1 s gr
n 226.000 137.000 m 234.000 139.000 l 226.000 141.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 184.000 64.000 m 196.500 64.000 l
	196.500 64.000 209.000 64.000 211.500 66.500 DrawSplineSection
	211.500 66.500 214.000 69.000 216.500 81.500 DrawSplineSection
	216.500 81.500 219.000 94.000 221.500 96.500 DrawSplineSection
	221.500 96.500 224.000 99.000 229.000 99.000 DrawSplineSection
	234.000 99.000 l gs col-1 s gr
n 226.000 97.000 m 234.000 99.000 l 226.000 101.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 344.000 54.000 m 354.000 54.000 l
	354.000 54.000 364.000 54.000 366.500 56.500 DrawSplineSection
	366.500 56.500 369.000 59.000 374.000 136.500 DrawSplineSection
	374.000 136.500 379.000 214.000 381.500 216.500 DrawSplineSection
	381.500 216.500 384.000 219.000 389.000 219.000 DrawSplineSection
	394.000 219.000 l gs col-1 s gr
n 386.000 217.000 m 394.000 219.000 l 386.000 221.000 l gs 2 setlinejoin col-1 s gr
/Times-Italic findfont 10.00 scalefont setfont
328 182 m 
gs 1 -1 scale (fp) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
325 221 m 
gs 1 -1 scale (sp) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
487 222 m 
gs 1 -1 scale (fp) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
485 261 m 
gs 1 -1 scale (sp) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
249 89 m 
gs 1 -1 scale (frame) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
409 91 m 
gs 1 -1 scale (frame) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
410 131 m 
gs 1 -1 scale (frame) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
409 170 m 
gs 1 -1 scale (frame) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
408 213 m 
gs 1 -1 scale (frame) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
408 252 m 
gs 1 -1 scale (frame) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
250 131 m 
gs 1 -1 scale (frame) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
248 212 m 
gs 1 -1 scale (frame) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
249 173 m 
gs 1 -1 scale (frame) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
249 75 m 
gs 1 -1 scale (P1 stack) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
249 158 m 
gs 1 -1 scale (P3 stack) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
249 197 m 
gs 1 -1 scale (P4 stack) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
250 117 m 
gs 1 -1 scale (P2 stack) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
408 196 m 
gs 1 -1 scale (P4 stack) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
409 155 m 
gs 1 -1 scale (P3 stack) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
410 115 m 
gs 1 -1 scale (P2 stack) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
409 74 m 
gs 1 -1 scale (P1 stack) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
408 235 m 
gs 1 -1 scale (P1 stack) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
243 22 m 
gs 1 -1 scale (data seg.) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
402 22 m 
gs 1 -1 scale (data seg.) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
167 34 m 
gs 1 -1 scale (display) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
328 34 m 
gs 1 -1 scale (display) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 245 1382 a FN(Figure)h(3.16:)j(Scop)q(e)e(tree,)g(with)e(b)q(efore)i
(and)f(after)g(stac)o(k)g(frames)f(when)h FK(P4)h FN(calls)e
FK(P1)224 1522 y FN(w)o(e)k(ma)o(y)e(simply)g(lea)o(v)o(e)h(all)g(of)g
(the)h(displa)o(y)f(elemen)o(ts)h(unc)o(hanged)g(in)f(the)i(v)o(ector,)
f(and)224 1572 y(only)12 b(sa)o(v)o(e)h(and)f(restore)i(the)g(ones)f
(whic)o(h)f(are)h(actually)f(o)o(v)o(erwritten)h(b)o(y)f(the)h(call.)k
(In)c(the)224 1622 y(example)i(giv)o(en,)g(only)g(the)h(elemen)o(t)f
(at)h(index)f(1)h(is)f(o)o(v)o(erwritten,)i(so)e(it)h(is)f(su\016cien)o
(t)h(to)224 1672 y(sa)o(v)o(e)e(and)g(restore)i(that)e(one)g(elemen)o
(t.)224 1799 y FO(The)i(static)e(c)o(hain)224 1883 y
FN(The)j(alternativ)o(e)e(to)h(the)g(displa)o(y)f(v)o(ector)h(is)g(the)
g(use)h(of)e(a)h(second)g(link)o(ed)f(list)h(of)f(stac)o(k)224
1933 y(frames)e(whic)o(h)g(w)o(e)g(call)f(the)i FK(static)g(chain)s
FN(,)g(since)g(it)e(re\015ects)k(the)d(static)h(structure)h(of)e(the)
224 1983 y(program.)j(With)10 b(this)g(organisation,)g(eac)o(h)h(stac)o
(k)g(mark)e(con)o(tains)i(an)f(additional)f(datum,)224
2032 y(the)14 b FK(static)f(link)t FN(,)g(whic)o(h)g(p)q(oin)o(ts)g(to)
f(the)i(stac)o(k)f(frame)f(of)g(the)h(lexically)f(enclosing)g(scop)q
(e.)287 2086 y(Figure)h(3.17)f(is)h(a)g(mo)q(di\014ed)f(v)o(ersion)i
(of)f(\014gure)g(3.15,)f(whic)o(h)h(sho)o(ws)h(the)g(static)g(c)o(hain)
224 2136 y(\(dashed)21 b(lines\))e(as)h(w)o(ell)f(as)g(the)i(dynamic)c
(c)o(hain.)35 b(Notice)20 b(that)f(all)g(accessible)i(data)224
2186 y(areas)16 b(ma)o(y)e(b)q(e)i(accessed)i(b)o(y)d(follo)o(wing)e
(the)j(static)g(links)f(starting)h(from)d(the)j(curren)o(tly)224
2235 y(activ)o(e)11 b(pro)q(cedure.)18 b(The)11 b(static)f(links)g(of)g
(other)g(pro)q(cedures,)j(suc)o(h)e(as)f FK(P11)17 b
FN(in)9 b(\014gure)i(3.17,)224 2285 y(p)q(oin)o(t)f(to)h(the)g(stac)o
(k)g(frames)f(of)g(their)h(statically)e(enclosing)i(pro)q(cedure,)h
(but)f(are)g(of)f(course)224 2335 y(inaccessible)15 b(un)o(til)e(con)o
(trol)h(returns)h(to)f(the)h(pro)q(cedure)g(with)f(the)g(c)o(hain-end.)
287 2389 y(In)g(order)h(to)f(access)h(uplev)o(el)f(data)g(using)g
(static)g(links,)f(it)h(is)g(necessary)i(to)e(follo)o(w)e(as)224
2438 y(man)o(y)d(links)h(in)f(the)i(c)o(hain)f(as)h(the)g(lexical)e
(lev)o(el)h(di\013erence)i(b)q(et)o(w)o(een)g(the)f(curren)o(tly)g
(activ)o(e)224 2488 y(pro)q(cedure)k(and)d(the)i(pro)q(cedure)g(whic)o
(h)f(declared)g(the)g(data.)18 b(This)12 b(is)h(in)f(con)o(trast)h(to)g
(the)224 2538 y(situation)k(with)g(a)g(displa)o(y)g(v)o(ector,)h(where)
h(access)g(to)f(an)o(y)f(in)o(termediate-lev)o(el)f(datum)224
2588 y(tak)o(es)f(constan)o(t)g(time,)d(irresp)q(ectiv)o(e)k(of)d(the)i
(di\013erence)h(in)e(lexical)f(lev)o(el.)18 b(Ho)o(w)o(ev)o(er,)c(this)
224 2638 y(distinction)j(should)h(not)f(b)q(e)h(w)o(eigh)o(ted)f(to)q
(o)h(hea)o(vily)m(,)e(since)i(studies)h(ha)o(v)o(e)e(sho)o(wn)g(that)
224 2688 y(t)o(ypical)c(programs)g(access)j(data)d(o)o(v)o(er)h(only)f
(a)h(v)o(ery)g(shallo)o(w)f(range)h(of)f(nesting)h(lev)o(els.)p
eop
%%Page: 67 73
67 72 bop 224 274 a FL(3.2.)31 b(PR)o(OCEDURE)14 b(CALL)g(AND)g(RETURN)
602 b FN(67)480 349 y
 14669332 17366384 0 0 14669332 17366384 startTexFig
 480 349 a
%%BeginDocument: stack3.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-83.0 271.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Polyline
n 119 179 m 179 179 l gs col-1 s gr
n 119 239 m 119 239 l gs col-1 s gr
% Polyline
n 119 239 m 179 239 l gs col-1 s gr
% Polyline
n 179 299 m 179 59 l  119 59 l  119 299 l  clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 119 64 m 179 64 l gs col-1 s gr
% Polyline
n 119 134 m 179 134 l gs col-1 s gr
% Polyline
n 119 139 m 179 139 l gs col-1 s gr
% Polyline
n 119 194 m 179 194 l gs col-1 s gr
% Polyline
n 119 199 m 179 199 l gs col-1 s gr
% Polyline
n 119 254 m 179 254 l gs col-1 s gr
% Polyline
n 119 259 m 179 259 l gs col-1 s gr
n 192.000 301.000 m 184.000 299.000 l 192.000 297.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 184 299 m 204 299 l gs col-1 s gr
n 192.000 261.000 m 184.000 259.000 l 192.000 257.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 184 259 m 204 259 l gs col-1 s gr
% Polyline
n 131 61 m 118 61 l  105 38 l gs col-1 s gr
1.000 setlinewidth
% Polyline
n 340 179 m 340 59 l  279 59 l  279 179 l  clp gs col-1 s gr
0.000 setlinewidth
% Polyline
n 338 177 m 338 60 l  281 60 l  281 177 l  clp gs 0.95 setgray fill gr
% Polyline
n 178 133 m 178 120 l  121 120 l  121 133 l  clp gs 0.95 setgray fill gr
% Polyline
n 177 177 m 177 140 l  121 140 l  121 177 l  clp gs 0.95 setgray fill gr
% Polyline
n 178 253 m 178 240 l  121 240 l  121 253 l  clp gs 0.95 setgray fill gr
% Polyline
n 177 297 m 177 260 l  121 260 l  121 297 l  clp gs 0.95 setgray fill gr
0.500 setlinewidth
% Open spline
n 130.000 256.000 m 120.000 256.000 l
	120.000 256.000 110.000 256.000 107.500 251.500 DrawSplineSection
	107.500 251.500 105.000 247.000 105.000 228.000 DrawSplineSection
	105.000 228.000 105.000 209.000 110.500 204.000 DrawSplineSection
	116.000 199.000 l gs col-1 s gr
n 108.735 202.902 m 116.000 199.000 l 111.426 205.861 l gs 2 setlinejoin col-1 s gr
% Open spline
n 130.000 196.000 m 120.000 196.000 l
	120.000 196.000 110.000 196.000 107.500 191.500 DrawSplineSection
	107.500 191.500 105.000 187.000 105.000 168.000 DrawSplineSection
	105.000 168.000 105.000 149.000 110.500 144.000 DrawSplineSection
	116.000 139.000 l gs col-1 s gr
n 108.735 142.902 m 116.000 139.000 l 111.426 145.861 l gs 2 setlinejoin col-1 s gr
% Open spline
n 131.000 136.000 m 121.500 136.000 l
	121.500 136.000 112.000 136.000 108.500 132.000 DrawSplineSection
	108.500 132.000 105.000 128.000 105.000 100.500 DrawSplineSection
	105.000 100.500 105.000 73.000 110.500 68.500 DrawSplineSection
	116.000 64.000 l gs col-1 s gr
n 108.542 67.518 m 116.000 64.000 l 111.075 70.614 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
% Polyline
n 119 119 m 179 119 l gs col-1 s gr
0.500 setlinewidth
	[4.000000] 0 setdash
% Open spline
n 170.000 256.000 m 176.500 256.000 l
	176.500 256.000 183.000 256.000 189.000 250.000 DrawSplineSection
	189.000 250.000 195.000 244.000 195.000 198.500 DrawSplineSection
	195.000 198.500 195.000 153.000 188.000 146.000 DrawSplineSection
	181.000 139.000 l gs col-1 s gr
	[] 0 setdash
/Times-Roman findfont 10.00 scalefont setfont
287 116 m 
gs 1 -1 scale (variables) col-1 show gr
	[4.000000] 0 setdash
% Open spline
n 165.000 196.000 m 174.500 196.000 l
	174.500 196.000 184.000 196.000 186.500 193.500 DrawSplineSection
	186.500 193.500 189.000 191.000 189.000 175.000 DrawSplineSection
	189.000 175.000 189.000 159.000 189.000 153.000 DrawSplineSection
	189.000 153.000 189.000 147.000 185.500 143.000 DrawSplineSection
	182.000 139.000 l gs col-1 s gr
	[] 0 setdash
n 185.763 146.338 m 182.000 139.000 l 188.773 143.704 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Open spline
n 168.000 136.000 m 194.000 136.000 l
	194.000 136.000 220.000 136.000 229.500 127.000 DrawSplineSection
	229.500 127.000 239.000 118.000 239.000 98.500 DrawSplineSection
	239.000 98.500 239.000 79.000 249.500 69.000 DrawSplineSection
	249.500 69.000 260.000 59.000 267.500 59.000 DrawSplineSection
	275.000 59.000 l gs col-1 s gr
	[] 0 setdash
n 267.000 57.000 m 275.000 59.000 l 267.000 61.000 l gs 2 setlinejoin col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
129 84 m 
gs 1 -1 scale (P0 stack) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
129 154 m 
gs 1 -1 scale (P1 stack) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
129 170 m 
gs 1 -1 scale (frame) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
124 214 m 
gs 1 -1 scale (P11 stack) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
124 230 m 
gs 1 -1 scale ( frame) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
124 274 m 
gs 1 -1 scale (P12 stack) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
124 290 m 
gs 1 -1 scale ( frame) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
208 261 m 
gs 1 -1 scale (fp) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
206 301 m 
gs 1 -1 scale (sp) col-1 show gr
/Times-Bold findfont 17.00 scalefont setfont
128 257 m 
gs 1 -1 scale (.) col-1 show gr
/Times-Bold findfont 17.00 scalefont setfont
130 197 m 
gs 1 -1 scale (.) col-1 show gr
/Times-Bold findfont 17.00 scalefont setfont
129 137 m 
gs 1 -1 scale (.) col-1 show gr
/Times-Bold findfont 17.00 scalefont setfont
129 63 m 
gs 1 -1 scale (.) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
124 99 m 
gs 1 -1 scale (workspace) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
92 42 m 
gs 1 -1 scale (nil) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
131 20 m 
gs 1 -1 scale (Stack) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
131 36 m 
gs 1 -1 scale (Segment) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
288 37 m 
gs 1 -1 scale (Segment) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
288 22 m 
gs 1 -1 scale (Data) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
287 100 m 
gs 1 -1 scale (P0 global) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 224 1540 a FN(Figure)19 b(3.17:)25 b(Stac)o(k)18 b(frame)e(sho)o(wing)
i(static)g(and)g(dynamic)e(c)o(hains.)31 b(Static)18
b(c)o(hain)f(is)224 1590 y(dashed)e(lines)287 1719 y(In)f(order)i(to)e
(main)o(tain)e(the)j(static)g(c)o(hain,)f(it)g(is)g(necessary)j(for)d
(pro)q(cedures)j(to)d(store)224 1769 y(the)j(extra)g(datum)e(in)g(the)i
(stac)o(k)g(mark,)d(as)j(part)f(of)f(the)i(en)o(try)g(prolog.)24
b(This)16 b(requires)224 1818 y(co)q(op)q(eration)11
b(b)q(et)o(w)o(een)i(the)e(caller)g(and)f(callee.)17
b(The)12 b(caller)e(m)o(ust)g(pass)i(the)f(extra)g(datum,)224
1868 y(and)h(the)h(prolog)e(m)o(ust)g(store)i(it.)k(It)12
b(is)g(common)d(for)i(the)i(static)f(link)f(to)h(b)q(e)h(passed)g(to)f
(the)224 1918 y(called)i(pro)q(cedure)i(as)e(a)f(v)n(alue)h(in)f(a)h
(mac)o(hine)e(register,)j(but)f(other)g(p)q(ossibilities)g(exist.)287
1970 y(Of)19 b(course,)j(not)d(all)f(pro)q(cedures)k(need)e(to)g(set)g
(up)f(a)h(static)f(link.)34 b(Ho)o(w)o(ev)o(er,)21 b(the)224
2020 y(conditions)d(under)h(whic)o(h)f(it)g(is)g(necessary)i(to)e(do)g
(so)h(are)f(di\013eren)o(t)h(to)f(the)h(condition)224
2069 y(under)h(whic)o(h)e(pro)q(cedures)j(need)e(to)f(manipulate)e(the)
j(displa)o(y)f(v)o(ector.)32 b(A)18 b(pro)q(cedure)224
2119 y(needs)e(a)d(static)h(link)f(to)h(b)q(e)h(passed)f(to)g(it)g
(when)g(it)g(is)f(called,)h(if)f(either)287 2208 y Ft(\017)20
b FN(the)15 b(pro)q(cedure)h(accesses)h(uplev)o(el)d(data)g(declared)h
(in)e(a)h(statically)f(enclosing)h(pro-)328 2258 y(cedure,)h(or)287
2349 y Ft(\017)20 b FN(the)14 b(pro)q(cedure)g(encloses)g(a)f(pro)q
(cedure)h(whic)o(h)f(accesses)i(data)e(declared)g(in)g(a)f(stat-)328
2399 y(ically)h(enclosing)h(pro)q(cedure)224 2488 y(The)k(\014rst)f
(rule)g(corresp)q(onds)i(to)e(the)g(rule)g(for)g(the)g(displa)o(y)f(v)o
(ector)h(case.)28 b(The)17 b(second)224 2538 y(rule)f(re\015ects)h(the)
e(fact)g(that)g(the)h(c)o(hain)f(m)o(ust)e(pass)j(from)d(the)j(frame)d
(of)i(the)g(pro)q(cedure)224 2588 y(con)o(taining)10
b(the)h(data)f(to)g(the)h(frame)e(of)h(the)h(pro)q(cedure)h(whic)o(h)f
(accesses)i(the)e(data.)16 b(Along)224 2638 y(the)g(w)o(a)o(y)m(,)e
(the)i(c)o(hain)f(ma)o(y)e(pass)i(through)h(other)f(frames)g(whic)o(h)g
(pla)o(y)f(no)h(other)g(part)h(in)224 2688 y(the)f(pro)q(cess.)p
eop
%%Page: 68 74
68 73 bop 224 274 a FN(68)562 b FL(CHAPTER)14 b(3.)32
b(R)o(UNTIME)13 b(OR)o(GANIZA)m(TION)287 390 y FN(The)20
b(v)n(alue)g(of)f(the)i(static)f(link)g(whic)o(h)g(is)g(passed)h(to)f
(a)f(called)h(pro)q(cedure)i(v)n(aries)224 440 y(according)15
b(to)g(the)g(lexical)f(relationship)g(b)q(et)o(w)o(een)j(the)e(called)g
(and)f(calling)f(pro)q(cedures.)224 490 y(The)g(link)e(whic)o(h)i(is)f
(passed)h(to)f(the)h(called)f(pro)q(cedure)i(should)e(p)q(oin)o(t)g(to)
g(the)h(stac)o(k)g(frame)224 540 y(of)h(the)g(lo)o(w)o(est)g(common)d
(ancestor)k(of)e(the)i(called)e(and)h(calling)f(pro)q(cedures.)287
590 y(Supp)q(osing)f(that)h(the)g(link)f(is)g(to)h(b)q(e)g(passed)g(in)
g(a)f(register)i FM(r)1247 596 y FB(link)1310 590 y FN(,)e(and)h(\\)p
FG(caller)p FN(")d(and)224 640 y(\\)p FG(callee)p FN(")i(denote)h
(references)j(to)d(the)h(resp)q(ectiv)o(e)h(pro)q(cedure)g(descriptors)
f(in)f(the)g FK(AST)6 b FN(.)224 689 y(W)m(e)14 b(shall)f(also)g
(assume)g(that)h(the)g(frame)f(p)q(oin)o(ter)h(register)g
FK(fp)j FN(p)q(oin)o(ts)c(to)h(the)g(static)g(link)224
739 y(\014eld)e(in)g(the)g(stac)o(k)g(mark.)k(The)c(relev)n(an)o(t)g
(part)g(of)f(the)i(co)q(de)f(whic)o(h)g(emits)f(the)h(call)f(w)o(ould)
224 789 y(then)k(b)q(e)f(|)288 905 y FE(lo)n(ad)e(up)h(p)n(ar)n
(ameters)f(to)h(the)g(c)n(al)r(l,)f(if)h(any)p FD(;)288
950 y FF(IF)f FE(c)n(al)r(le)n(e)g(ne)n(e)n(ds)g(a)h(static)f(link)j
FF(THEN)339 996 y FE(emit)h FD(\\)p FF(move)11 b FE(fp,)p
Fm(r)600 1000 y Fh(link)659 996 y FD(";)i FF(\(*)18 b
FE(initialize)11 b(linkage)h(r)n(e)n(gister)j FF(*\))339
1042 y(FOR)j(ix)h(:=)g(0)g(TO)g(caller^.le)o(xL)o(eve)o(l)e(-)i
(callee^.l)o(exL)o(ev)o(el)d(DO)377 1087 y FE(emit)g
FD(\\)p FF(lw)c FD(\()p Fm(r)570 1091 y Fh(link)630 1087
y FD(\),)p Fm(r)673 1091 y Fh(link)732 1087 y FD(";)h
FF(\(*)19 b FE(der)n(efer)n(enc)n(e)11 b(linkage)g(r)n(e)n(gister)k
FF(*\))339 1133 y(END;)288 1179 y(END;)288 1224 y FE(emit)e(the)g(c)n
(al)r(l)f(instruction)p FD(;)224 1350 y FN(In)g(the)g(case)g(of)f(the)h
(call)e(of)h(a)g(c)o(hild)g(pro)q(cedure,)i(the)f(static)g(link)e(is)h
(just)h(the)g FK(fp)h FN(register)g(of)224 1400 y(the)g(caller,)g
(while)e(for)i(a)f(call)f(of)h(a)g(pro)q(cedure)i(at)f(the)g(same)e
(lexical)h(lev)o(el,)g(the)h(static)f(link)224 1450 y(is)g(a)f(cop)o(y)
g(of)g(the)h(static)f(link)g(of)f(the)i(caller.)17 b(In)12
b(the)g(general)f(case,)i(the)f(static)f(c)o(hain)g(m)o(ust)224
1500 y(b)q(e)18 b(follo)o(w)o(ed)d(a)h(n)o(um)o(b)q(er)g(of)g(steps)i
(equal)e(to)h(the)g(di\013erence)h(in)f(lexical)e(lev)o(els)i(b)q(et)o
(w)o(een)224 1550 y(the)d(caller)f(and)f(callee.)18 b(The)13
b(static)h(link)d(of)i(that)g(frame)e(will)g(p)q(oin)o(t)i(to)f(the)i
(frame)d(of)i(the)224 1599 y(common)e(ancestor)16 b(of)d(the)h(called)g
(and)g(calling)e(pro)q(cedure.)287 1649 y(Figure)i(3.18)e(sho)o(ws)i(a)
g(v)n(ariation)e(on)h(the)i(uplev)o(el)e(call)g(example)f(in)i
(\014gure)g(3.16,)e(but)224 1699 y(this)17 b(time)e(with)h(static)h(c)o
(hains.)26 b(It)16 b(will)f(b)q(e)i(seen)h(that)f(the)g(di\013erence)h
(in)e(lexical)g(lev)o(el)224 1749 y(b)q(et)o(w)o(een)g(the)f(caller)f
(\()p FK(P4)6 b FN(\))15 b(and)f(callee)h(\()p FK(P2)6
b FN(\))14 b(is)g(t)o(w)o(o.)19 b(The)c(static)g(link)e(of)h
FK(P4)20 b FN(p)q(oin)o(ts)14 b(to)224 1799 y(the)f(frame)e(of)g
FK(P3)6 b FN(,)12 b(and)g(the)h(link)e(of)h FK(P3)18
b FN(p)q(oin)o(ts)12 b(to)g(the)g(frame)f(of)h FK(P2)6
b FN(.)17 b(The)c(link)e(of)g FK(P2)18 b FN(is)224 1848
y(th)o(us)c(passed)g(as)f(the)g(static)g(link)f(to)h(the)g(call.)k(As)d
(stated,)f(the)h(link)e(p)q(oin)o(ts)g(to)h(the)h(frame)224
1898 y(of)g FK(P1)p FN(,)f(whic)o(h)h(is)g(the)g(lo)o(w)o(est)g(common)
d(ancestor)k(of)f FK(P4)19 b FN(and)14 b FK(P2)p FN(.)224
2013 y FH(3.2.6)56 b(Arc)n(hitectures)17 b(with)i(global)f(data)h(p)r
(oin)n(ters)224 2090 y FN(So)12 b(far)g(w)o(e)h(ha)o(v)o(e)f(assumed)f
(that)i(within)e(an)o(y)h(pro)q(cedure,)i(access)g(to)e(statically)f
(allo)q(cated)224 2140 y(data)h(is)f(uniform.)k(That)d(is)g(to)f(sa)o
(y)m(,)g(it)g(has)h(b)q(een)h(assumed)e(that)h(access)h(to)f(data)f
(declared)224 2189 y(in)16 b(the)h(same)f(compilation)d(unit)j(as)h
(the)g(pro)q(cedure)h(\()p FK(lo)n(c)n(al)f(static)f(data)s
FN(\))h(is)g(p)q(erformed)224 2239 y(in)d(the)h(same)e(w)o(a)o(y)g(as)i
(access)h(to)e(data)f(declared)i(in)f(other)h(compilation)c(units)j(\()
p FK(external)224 2289 y(static)j(data)s FN(\).)27 b(There)17
b(are)g(circumstances)h(under)f(whic)o(h)f(this)h(assumption)e(migh)o
(t)f(not)224 2339 y(hold.)287 2389 y(The)k(\014nal)f(address)j(of)d
(static)h(data)g(is)g(unkno)o(wn)g(at)f(compile)g(time)f(and)i(b)q
(ecomes)224 2438 y(kno)o(wn,)13 b(at)g(the)h(earliest,)f(at)g(link)f
(edit)h(time.)k(Indeed,)d(in)e(the)i(case)g(of)f(dynamic)e(linking,)224
2488 y(treated)g(in)e(section)i(3.2.8,)d(the)i(address)h(of)e(the)h
(data)g(ma)o(y)d(b)q(e)j(unkno)o(wn)g(un)o(til)f(the)h(mo)q(dule)224
2538 y(is)j(loaded)e(at)h(run)o(time.)17 b(Th)o(us)12
b(the)h(output)g(of)e(a)h(co)q(de)h(generator)g(can)g(only)e(refer)i
(to)g(suc)o(h)224 2588 y(data)g(sym)o(b)q(olically)l(.)i(In)e(either)g
(case)h(at)f(run)o(time)e(the)j(address)g(is)e(kno)o(wn,)g(t)o
(ypically)g(as)h(a)224 2638 y(32-bit)h(address)h(constan)o(t.)20
b(The)14 b(instructions)h(ma)o(y)e(refer)i(to)f(the)h(data)f(either)h
(using)f(an)224 2688 y(address)i(constan)o(t,)e(or)f(as)h(an)g
(o\013set)h(from)d(a)i FK(glob)n(al)g(data)h(p)n(ointer)p
FN(.)p eop
%%Page: 69 75
69 74 bop 224 274 a FL(3.2.)31 b(PR)o(OCEDURE)14 b(CALL)g(AND)g(RETURN)
602 b FN(69)205 349 y
 23352524 14866677 0 0 23352524 14866677 startTexFig
 205 349 a
%%BeginDocument: stack4.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-91.0 235.0 translate 0.900 -0.900 scale
0.500 setlinewidth
% Ellipse
n 139 84 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 139 124 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 139 164 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 139 204 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 139 244 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 113 164 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 112 203 11 11 0 360 DrawEllipse gs col-1 s gr
1.000 setlinewidth
% Polyline
n 299 219 m 299 39 l  239 39 l  239 219 l  clp gs col-1 s gr
% Polyline
n 239 179 m 299 179 l gs col-1 s gr
% Polyline
n 239 139 m 299 139 l gs col-1 s gr
% Polyline
n 239 99 m 299 99 l gs col-1 s gr
% Polyline
n 239 59 m 299 59 l gs col-1 s gr
% Polyline
n 459 259 m 459 39 l  399 39 l  399 259 l  clp gs col-1 s gr
% Polyline
n 399 59 m 459 59 l gs col-1 s gr
% Polyline
n 399 99 m 459 99 l gs col-1 s gr
% Polyline
n 399 139 m 459 139 l gs col-1 s gr
% Polyline
n 399 179 m 459 179 l gs col-1 s gr
% Polyline
n 399 219 m 459 219 l gs col-1 s gr
0.500 setlinewidth
n 312.000 221.000 m 304.000 219.000 l 312.000 217.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 304 219 m 324 219 l gs col-1 s gr
n 312.000 181.000 m 304.000 179.000 l 312.000 177.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 304 179 m 324 179 l gs col-1 s gr
n 472.000 221.000 m 464.000 219.000 l 472.000 217.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 464 219 m 484 219 l gs col-1 s gr
n 472.000 261.000 m 464.000 259.000 l 472.000 257.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 464 259 m 484 259 l gs col-1 s gr
0.000 setlinewidth
% Polyline
n 457 256 m 457 220 l  401 220 l  401 256 l  clp gs 0.95 setgray fill gr
% Polyline
n 297 96 m 297 60 l  241 60 l  241 96 l  clp gs 0.95 setgray fill gr
% Polyline
n 297 137 m 297 100 l  241 100 l  241 137 l  clp gs 0.95 setgray fill gr
% Polyline
n 297 177 m 297 141 l  241 141 l  241 177 l  clp gs 0.95 setgray fill gr
% Polyline
n 297 217 m 297 181 l  241 181 l  241 217 l  clp gs 0.95 setgray fill gr
% Polyline
n 457 97 m 457 60 l  401 60 l  401 97 l  clp gs 0.95 setgray fill gr
0.500 setlinewidth
% Polyline
n 139 114 m 139 94 l gs col-1 s gr
n 137.000 102.000 m 139.000 94.000 l 141.000 102.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 139 154 m 139 134 l gs col-1 s gr
n 137.000 142.000 m 139.000 134.000 l 141.000 142.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 139 194 m 139 174 l gs col-1 s gr
n 137.000 182.000 m 139.000 174.000 l 141.000 182.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 139 234 m 139 214 l gs col-1 s gr
n 137.000 222.000 m 139.000 214.000 l 141.000 222.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 119 154 m 133 133 l gs col-1 s gr
n 126.898 138.547 m 133.000 133.000 l 130.226 140.766 l gs 2 setlinejoin col-1 s gr
% Polyline
n 120 195 m 133 173 l gs col-1 s gr
n 127.208 178.870 m 133.000 173.000 l 130.652 180.905 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Open spline
n 244.000 64.000 m 236.500 56.500 l
	236.500 56.500 229.000 49.000 224.000 44.000 DrawSplineSection
	224.000 44.000 219.000 39.000 219.000 33.500 DrawSplineSection
	219.000 33.500 219.000 28.000 223.500 25.000 DrawSplineSection
	223.500 25.000 228.000 22.000 233.500 20.500 DrawSplineSection
	239.000 19.000 l gs col-1 s gr
	[] 0 setdash
n 230.756 19.175 m 239.000 19.000 l 231.808 23.034 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Open spline
n 404.000 64.000 m 396.500 56.500 l
	396.500 56.500 389.000 49.000 384.000 44.000 DrawSplineSection
	384.000 44.000 379.000 39.000 379.000 34.000 DrawSplineSection
	379.000 34.000 379.000 29.000 382.500 25.500 DrawSplineSection
	382.500 25.500 386.000 22.000 392.500 20.500 DrawSplineSection
	399.000 19.000 l gs col-1 s gr
	[] 0 setdash
n 390.755 18.850 m 399.000 19.000 l 391.655 22.748 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Open spline
n 244.000 144.000 m 236.500 136.500 l
	236.500 136.500 229.000 129.000 224.000 124.000 DrawSplineSection
	224.000 124.000 219.000 119.000 219.000 114.000 DrawSplineSection
	219.000 114.000 219.000 109.000 221.500 106.500 DrawSplineSection
	221.500 106.500 224.000 104.000 231.500 104.000 DrawSplineSection
	239.000 104.000 l gs col-1 s gr
	[] 0 setdash
n 231.000 102.000 m 239.000 104.000 l 231.000 106.000 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Open spline
n 244.000 104.000 m 236.500 96.500 l
	236.500 96.500 229.000 89.000 224.000 84.000 DrawSplineSection
	224.000 84.000 219.000 79.000 219.000 74.000 DrawSplineSection
	219.000 74.000 219.000 69.000 221.500 66.500 DrawSplineSection
	221.500 66.500 224.000 64.000 231.500 64.000 DrawSplineSection
	239.000 64.000 l gs col-1 s gr
	[] 0 setdash
n 231.000 62.000 m 239.000 64.000 l 231.000 66.000 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Open spline
n 244.000 184.000 m 236.500 176.500 l
	236.500 176.500 229.000 169.000 224.000 164.000 DrawSplineSection
	224.000 164.000 219.000 159.000 219.000 154.000 DrawSplineSection
	219.000 154.000 219.000 149.000 221.500 146.500 DrawSplineSection
	221.500 146.500 224.000 144.000 231.500 144.000 DrawSplineSection
	239.000 144.000 l gs col-1 s gr
	[] 0 setdash
n 231.000 142.000 m 239.000 144.000 l 231.000 146.000 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Open spline
n 404.000 184.000 m 396.500 176.500 l
	396.500 176.500 389.000 169.000 384.000 164.000 DrawSplineSection
	384.000 164.000 379.000 159.000 379.000 154.000 DrawSplineSection
	379.000 154.000 379.000 149.000 381.500 146.500 DrawSplineSection
	381.500 146.500 384.000 144.000 391.500 144.000 DrawSplineSection
	399.000 144.000 l gs col-1 s gr
	[] 0 setdash
n 391.000 142.000 m 399.000 144.000 l 391.000 146.000 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Open spline
n 404.000 144.000 m 396.500 136.500 l
	396.500 136.500 389.000 129.000 384.000 124.000 DrawSplineSection
	384.000 124.000 379.000 119.000 379.000 114.000 DrawSplineSection
	379.000 114.000 379.000 109.000 381.500 106.500 DrawSplineSection
	381.500 106.500 384.000 104.000 391.500 104.000 DrawSplineSection
	399.000 104.000 l gs col-1 s gr
	[] 0 setdash
n 391.000 102.000 m 399.000 104.000 l 391.000 106.000 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Open spline
n 404.000 104.000 m 396.500 96.500 l
	396.500 96.500 389.000 89.000 384.000 84.000 DrawSplineSection
	384.000 84.000 379.000 79.000 379.000 74.000 DrawSplineSection
	379.000 74.000 379.000 69.000 381.500 66.500 DrawSplineSection
	381.500 66.500 384.000 64.000 391.500 64.000 DrawSplineSection
	399.000 64.000 l gs col-1 s gr
	[] 0 setdash
n 391.000 62.000 m 399.000 64.000 l 391.000 66.000 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Open spline
n 404.000 224.000 m 391.500 211.500 l
	391.500 211.500 379.000 199.000 374.000 194.000 DrawSplineSection
	374.000 194.000 369.000 189.000 369.000 134.000 DrawSplineSection
	369.000 134.000 369.000 79.000 374.000 71.500 DrawSplineSection
	374.000 71.500 379.000 64.000 386.500 64.000 DrawSplineSection
	394.000 64.000 l gs col-1 s gr
	[] 0 setdash
	[4.000000] 0 setdash
% Open spline
n 149.000 244.000 m 156.500 244.000 l
	156.500 244.000 164.000 244.000 166.500 241.500 DrawSplineSection
	166.500 241.500 169.000 239.000 169.000 204.000 DrawSplineSection
	169.000 204.000 169.000 169.000 166.500 166.500 DrawSplineSection
	166.500 166.500 164.000 164.000 156.500 164.000 DrawSplineSection
	149.000 164.000 l gs col-1 s gr
	[] 0 setdash
n 157.000 166.000 m 149.000 164.000 l 157.000 162.000 l gs 2 setlinejoin col-1 s gr
/Times-Italic findfont 10.00 scalefont setfont
328 182 m 
gs 1 -1 scale (fp) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
325 221 m 
gs 1 -1 scale (sp) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
487 222 m 
gs 1 -1 scale (fp) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
485 261 m 
gs 1 -1 scale (sp) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
249 89 m 
gs 1 -1 scale (frame) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
409 91 m 
gs 1 -1 scale (frame) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
410 131 m 
gs 1 -1 scale (frame) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
409 170 m 
gs 1 -1 scale (frame) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
408 213 m 
gs 1 -1 scale (frame) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
408 252 m 
gs 1 -1 scale (frame) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
250 131 m 
gs 1 -1 scale (frame) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
248 212 m 
gs 1 -1 scale (frame) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
249 173 m 
gs 1 -1 scale (frame) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
249 75 m 
gs 1 -1 scale (P1 stack) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
249 158 m 
gs 1 -1 scale (P3 stack) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
249 197 m 
gs 1 -1 scale (P4 stack) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
250 117 m 
gs 1 -1 scale (P2 stack) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
408 196 m 
gs 1 -1 scale (P4 stack) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
409 155 m 
gs 1 -1 scale (P3 stack) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
410 115 m 
gs 1 -1 scale (P2 stack) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
409 74 m 
gs 1 -1 scale (P1 stack) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
243 22 m 
gs 1 -1 scale (data seg.) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
402 22 m 
gs 1 -1 scale (data seg.) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
408 235 m 
gs 1 -1 scale (P2 stack) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
133 249 m 
gs 1 -1 scale (P4) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
133 209 m 
gs 1 -1 scale (P3) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
133 169 m 
gs 1 -1 scale (P2) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
133 129 m 
gs 1 -1 scale (P1) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
133 88 m 
gs 1 -1 scale (P0) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
158 257 m 
gs 1 -1 scale (P4 calls P2) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 245 1382 a FN(Figure)14 b(3.18:)j(Scop)q(e)e(tree)g(and)f(static)g(c)o
(hain,)f(with)h(stac)o(k)g(frames)f(when)h FK(P4)h FN(calls)e
FK(P2)287 1519 y FN(F)m(or)d(mac)o(hines)g(with)g(v)n(ariable)g(length)
g(instructions,)i(suc)o(h)f(as)g(most)e FK(CISC)17 b
FN(mac)o(hines,)224 1568 y(there)j(is)f(no)f(problem)f(in)h(using)g
(long)g(imm)o(ediate)e(address)k(constan)o(ts)f(as)g(part)g(of)f(an)224
1618 y(address)13 b(expression.)18 b(F)m(or)11 b(example,)e(in)i(the)h
FK(i386)f FN(arc)o(hitecture)i(address)f(literals)f(ma)o(y)e(b)q(e)224
1668 y(32-bit)h(immediate)e(constan)o(ts,)k(and)f(hence)h(ma)o(y)d(p)q
(oin)o(t)h(an)o(ywhere)i(in)e(the)i(address)g(space.)224
1718 y(In)k FK(RISC)23 b FN(mac)o(hines)15 b(this)h(is)g(imp)q
(ossible,)e(since)j(the)f(32-bit)f(\014xed-length)i(instructions)224
1768 y(ha)o(v)o(e)c(only)f(space)h(for)f(a)h(short)g(o\013set)g
(\014eld.)18 b(T)o(ypically)11 b(literal)h(addresses)i(ma)o(y)d(b)q(e)i
(16-bit)224 1817 y(o\013sets)k(from)d(some)h(address)i(register,)g(or)e
(m)o(ust)g(b)q(e)h(loaded)f(in)o(to)g(a)h(register)g(using)g(t)o(w)o(o)
224 1867 y(or)e(more)f(instructions.)603 1852 y Fz(7)287
1919 y FN(Man)o(y)f(programs)g(will)f(require)j(static)f(data)g(the)h
(total)e(size)i(of)e(whic)o(h)h(easily)f(exceeds)224
1969 y(the)21 b(range)g(of)e(the)i(allo)o(w)o(ed)e(literal)g(o\013set,)
j(p)q(osing)e(a)g(di\016cult)g(design)g(issue)h(for)f(the)224
2019 y(run)o(time)14 b(con)o(v)o(en)o(tions.)20 b(The)15
b(simplest,)e(but)i(least)g(satisfactory)f(solution,)g(w)o(ould)f(b)q
(e)i(to)224 2069 y(accept)k(that)e(accessing)i(statically)d(allo)q
(cated)h(data)f(will)g(alw)o(a)o(ys)g(tak)o(e)i(more)e(that)h(one)224
2118 y(instruction.)26 b(Consider)16 b(the)h(example)e(of)h(loading)e
(the)j(w)o(ord)f(at)g(address)i FK(gName)h FN(in)o(to)224
2168 y(register)c FG(r7)f FN(sa)o(y)m(.)p 224 2265 1449
2 v 223 2311 2 46 v 249 2297 a Fv(Logical)g(asm)h(co)q(de)74
b(Literal)15 b(asm)g(co)q(de)260 b(Co)q(de)15 b(after)g(linking)p
1672 2311 V 224 2312 1449 2 v 223 2358 2 46 v 249 2344
a FF(lw)39 b FE(gName)p FF(,r7)149 b(lui)19 b(hi\()p
FE(gName)s FF(\),$)l(at)228 b(lui)18 b FE(HHHH)6 b FF(,$)m(at)p
1672 2358 V 223 2404 V 653 2390 a(lw)39 b(lo\()p FE(gName)s
FF(\)\($)l(at\),r7)148 b(lw)38 b FE(LLLL)p FF(\($at\),r7)p
1672 2404 V 224 2405 1449 2 v 224 2478 a FN(The)16 b(logical)e(assem)o
(bler)h(instruction)h(just)f(asks)h(for)f(the)h(w)o(ord)g(at)f(the)h
(named)e(lo)q(cation)224 2527 y(to)i(b)q(e)g(loaded.)23
b(The)16 b(assem)o(bler)f(m)o(ust)f(expand)i(this)g(out)f(to)h(t)o(w)o
(o)f(instructions)h(b)o(y)g(\014rst)p 224 2570 577 2
v 271 2597 a Fy(7)288 2609 y Fx(Man)o(y)10 b Fu(RISC)k
Fx(assem)o(blers)8 b(ha)o(v)o(e)h(a)i(single)e(op)q(co)q(de)f(whic)o(h)
i(apparen)o(tly)d(loads)i(a)i(32-bit)e(literal)f(in)o(to)i(a)224
2648 y(register.)15 b(Ho)o(w)o(ev)o(er,)d(these)e(instructions)f(are)j
(in)o(v)n(ariably)d(macros)h(whic)o(h)i(expand)d(out)j(to)f(t)o(w)o(o)h
(or)g(three)224 2688 y(real)f(instructions.)p eop
%%Page: 70 76
70 75 bop 224 274 a FN(70)562 b FL(CHAPTER)14 b(3.)32
b(R)o(UNTIME)13 b(OR)o(GANIZA)m(TION)224 390 y FN(loading)e(the)h(high)
f(signi\014cance)i(part)f(of)f(the)h(address)h(\\)p FG(hi\()p
FK(gName)s FG(\))p FN(")e(in)o(to)g(a)h(temp)q(orary)224
440 y(register,)18 b(using)e(a)h FK(lo)n(ad)g(upp)n(er)g(imme)n(diate)j
FN(\\)p FG(lui)p FN(")15 b(instruction.)26 b(The)17 b
FK(assembler)g(tem-)224 490 y(p)n(or)n(ary)g FN(register,)e
FG($at)p FN(,)d(is)i(reserv)o(ed)i(for)d(this)h(role.)k(A)c(second)h
(instruction)f(will)e(tak)o(e)i(the)224 540 y(lo)o(w)e(signi\014cance)h
(part)g(of)f(the)h(address)h(\\)p FG(lo\()p FK(gName)s
FG(\))p FN(")e(and)g(use)i(this)e(as)h(an)g(o\013set)g(from)224
590 y(the)k(assem)o(bler)f(temp)q(orary)f(register,)j(\014nally)d
(loading)f(the)j(required)g(w)o(ord.)25 b(After)17 b(the)224
640 y(link)o(er)f(has)g(resolv)o(ed)g(the)h(lo)q(cation)e(of)g
FK(gName)s FN(,)h(the)h(\\)p FG(hi\(\))p FN(")d(and)i(\\)p
FG(lo\(\))p FN(")f(expressions)224 689 y(b)q(ecome)f(short)h(imm)o
(ediate)d(op)q(erands)i(whic)o(h)g(w)o(e)g(ha)o(v)o(e)g(denoted)h
FK(HHHH)20 b FN(and)13 b FK(LLLL)p FN(.)287 739 y(The)e(only)f
(alternativ)o(e)h(to)f(this)h(lab)q(orious)f(mec)o(hanism)f(is)i(to)f
(use)i(one)f(of)f(the)i(registers)224 789 y(as)j(a)f(p)q(oin)o(ter)g
(in)o(to)g(the)h(static)f(data)g(area,)g(and)g(either)i(address)f(only)
f(some)f(of)h(the)h(data)224 839 y(this)f(w)o(a)o(y)m(,)f(or)g(c)o
(hange)i(the)f(register)h(as)f(di\013eren)o(t)h(regions)f(of)f(the)i
(data)e(are)i(required.)224 945 y FO(Shared)g(global)f(p)q(oin)o(ters)
224 1022 y FN(The)19 b(compromise)d(whic)o(h)i(is)g(con)o(v)o(en)o
(tionally)e(used)j(in)f(systems)g(based)h(on)f(the)h
FK(MIPS)224 1072 y FN(arc)o(hitecture)d(is)d(to)g(reserv)o(e)i(a)e
(single)g(register)i(for)e(use)h(as)f(a)g(global)f(p)q(oin)o(ter)h
(throughout)224 1122 y(the)j(whole)f(of)g(the)h(program)d(execution.)23
b(This)15 b(register,)i(called)d FG($gp)h FN(in)g(the)h(assem)o(bler)
224 1171 y(format,)c(is)i(set)h(up)e(on)h(program)e(initialization,)f
(and)j(is)g(nev)o(er)g(c)o(hanged.)287 1221 y(In)g(this)g(con)o(v)o(en)
o(tion,)f(statically)g(declared)i(data)f(is)g(segregated,)h(with)e
(small)f(ob)r(jects)224 1271 y(placed)17 b(close)g(together)h(so)e
(that)h(all)e(ma)o(y)g(b)q(e)i(addressed)h(as)f(a)f(short)h(o\013set)h
(from)c FG($gp)p FN(.)224 1321 y(Larger)f(ob)r(jects)g(are)f(placed)g
(elsewhere)i(in)e(the)g(address)h(space,)g(and)f(m)o(ust)f(b)q(e)i
(addressed)224 1371 y(using)h(the)h(t)o(w)o(o)e(instruction)h(idiom.)
287 1420 y(If)j(an)g(ob)r(ject)i(is)e(within)g(o\013set)h(range)g(of)f
(the)h(global)e(p)q(oin)o(ter,)i(the)g(co)q(de)h(example)224
1470 y(ab)q(o)o(v)o(e)14 b(ma)o(y)e(b)q(e)i(implemen)o(ted)e(b)o(y)i
(the)g(m)o(uc)o(h)f(more)g(e\016cien)o(t)h(|)p 224 1553
1449 2 v 223 1598 2 46 v 249 1585 a Fv(Logical)g(asm)h(co)q(de)74
b(Literal)15 b(asm)g(co)q(de)260 b(Co)q(de)15 b(after)g(linking)p
1672 1598 V 224 1600 1449 2 v 223 1646 2 46 v 249 1632
a FF(lw)39 b FE(gName)p FF(,r7)149 b(lw)39 b(ofst\()p
FE(gName)s FF(\))o(\($)l(gp\),r7)109 b(lw)38 b FE(SSSS)t
FF(\($)n(at\),r7)p 1672 1646 V 224 1647 1449 2 v 224
1707 a FN(In)14 b(this)f(case,)h(the)g(link)o(er)f(resolv)o(es)h(the)g
(o\013set)h(of)e FK(gName)j FN(from)c(the)i(global)e(p)q(oin)o(ter)h
(as)h(a)224 1757 y(short)h(immedia)o(te)d(op)q(erand)i(whic)o(h)g(w)o
(e)g(ha)o(v)o(e)g(denoted)h FK(SSSS)5 b FN(.)287 1807
y(Of)11 b(course,)i(all)d(of)h(this)h(can)g(only)f(w)o(ork)g(if)g(the)h
(assem)o(bler)f(kno)o(ws)h(those)g(static)g(names)224
1857 y(whic)o(h)18 b(are)g(within)f(o\013set)i(range)f(of)f(the)i
(global)d(p)q(oin)o(ter,)i(and)g(those)g(whic)o(h)g(m)o(ust)f(b)q(e)224
1907 y(addressed)22 b(using)d(the)h(t)o(w)o(o)f(instruction)h(form.)34
b(In)19 b(the)i FK(MIPS)k FN(case,)c(the)g(assem)o(bler)224
1956 y(m)o(ust)15 b(kno)o(w)g(the)h(storage)g(size)g(of)f(eac)o(h)h(ob)
r(ject.)24 b(If)15 b(the)h(ob)r(ject)g(is)f(not)h(larger)f(than)h(the)
224 2006 y(magic)f(\\gn)o(um")g(then)j(it)f(is)g(addressed)h(relativ)o
(e)f(to)g(the)h(global)d(p)q(oin)o(ter)i(with)g(a)g(short)224
2056 y(o\013set.)23 b(If)14 b(the)i(ob)r(ject)g(is)f(larger)g(than)g
(\\gn)o(um",)d(or)j(is)g(of)g(unkno)o(wn)f(size,)i(then)g(it)e(m)o(ust)
224 2106 y(b)q(e)h(addressed)h(using)d(the)i(long)e(form.)287
2156 y(Since)j(decisions)g(based)g(on)g(the)g(\\gn)o(um")d(are)j
(applied)g(during)f(the)h(compilation)d(of)224 2206 y(individual)j(mo)q
(dules,)h(it)g(is)h(p)q(ossible)g(that)g(during)f(linking)f(the)i
(short)h(data)e(area)h(will)224 2255 y(b)q(ecome)e(to)q(o)f(large,)g
(and)g(o)o(v)o(er\015o)o(w.)23 b(If)15 b(this)h(happ)q(ens,)g(there)h
(is)e(no)g(alternativ)o(e)h(but)f(to)224 2305 y(go)f(bac)o(k)g(and)g
(recompile)f(ev)o(erything)h(with)g(a)g(smaller)e(\\gn)o(um".)k(It)e
(is)g(usually)g(though)o(t)224 2355 y(to)21 b(not)f(b)q(e)h(practical)g
(to)f(rewrite)h(ob)r(ject)h(co)q(de)f(once)g(it)f(has)h(b)q(een)h(pro)q
(duced,)g(since)224 2405 y(program)14 b(relativ)o(e)g(jumps)g(in)g(the)
h(co)q(de)h(migh)o(t)c(b)q(e)k(in)o(v)n(alidated)d(b)o(y)h(v)n(arying)g
(the)h(length)224 2455 y(of)f(instruction)g(sequences.)224
2561 y FO(V)l(arying)h(global)f(p)q(oin)o(ters)224 2638
y FN(An)e(alternativ)o(e)e(sc)o(heme)i(for)e(addressing)i(static)g
(data)e(is)h(based)h(on)f(the)h(assumption)d(that)224
2688 y(the)17 b(data)g(for)f(eac)o(h)h(compilation)c(unit)j(will)f
(fall)g(within)h(the)h(addressing)g(range)g(of)f(the)p
eop
%%Page: 71 77
71 76 bop 224 274 a FL(3.2.)31 b(PR)o(OCEDURE)14 b(CALL)g(AND)g(RETURN)
602 b FN(71)224 390 y(global)13 b(p)q(oin)o(ter)i FK(for)g(that)h(c)n
(ompilation)g(unit)t FN(.)k(Th)o(us)15 b(eac)o(h)g(compilation)d(unit)j
(will)e(use)j(a)224 440 y(di\013eren)o(t)g(con)o(ten)o(t)g(for)e(the)h
(global)f(p)q(oin)o(ter,)g(making)f(it)h(p)q(oin)o(t)g(to)h(its)g(o)o
(wn)f(area.)21 b(There)224 490 y(are)15 b(t)o(w)o(o)f(b)q(ene\014ts)h
(to)f(this)g(sc)o(heme.)19 b(Firstly)m(,)13 b(the)i(c)o(hances)g(of)f
(o)o(v)o(er\015o)o(wing)f(the)i(area)f(are)224 540 y(sharply)g
(reduced,)h(and)f(secondly)m(,)f(ev)o(en)h(if)f(the)h(area)g(do)q(es)h
(o)o(v)o(er\015o)o(w)e(the)h(assem)o(bler)g(will)224
590 y(kno)o(w)k(this)h(at)f(compile)f(time.)31 b(Ho)o(w)o(ev)o(er,)19
b(the)g(sc)o(heme)g(has)f(a)h(disadv)n(an)o(tage)e(in)h(that)224
640 y(pro)q(cedure)j(call)d(and)g(return)i(are)f(complicated)f(b)o(y)g
(the)i(necessit)o(y)g(of)e(mo)q(difying)d(and)224 689
y(restoring)i(the)g(global)d(p)q(oin)o(ter)j(for)e(ev)o(ery)i
(out-of-mo)q(dule)d(call,)i(using)f(a)h FK(lo)n(ad)h(addr)n(ess)s
FN(,)224 739 y(\\)p FG(la)p FN(")e(instruction.)25 b(Here)17
b(are)f(examples)f(of)h(in-mo)q(dule)e(and)i(out-of-mo)q(dule)d(calls,)
j(for)224 789 y(call)e(con)o(v)o(en)o(tions)f(in)h(whic)o(h)g(all)e
(the)j(w)o(ork)e(is)h(done)g(on)g(the)g(caller)g(side)g(|)p
245 821 1399 2 v 244 867 2 46 v 270 853 a Fv(In-mo)q(dule)f(call)420
b(Out-of-mo)q(dule)12 b(call)p 1643 867 V 245 868 1399
2 v 244 914 2 46 v 270 900 a FE(lo)n(ad)h(up)g(p)n(ar)n(ameters)381
b(lo)n(ad)12 b(up)h(p)n(ar)n(ameters)p 1643 914 V 244
960 V 270 946 a FF(call)18 b FE(ownPr)n(o)n(c)459 b FF(la)58
b FE(farGP)t FF(,$)n(gp)p 1643 960 V 244 1005 V 270 992
a FD(...)667 b FF(call)18 b FE(farPr)n(o)n(c)p 1643 1005
V 244 1051 V 970 1037 a FF(la)58 b FE(ownGP)t FF(,$)n(gp)p
1643 1051 V 244 1097 V 970 1083 a FD(...)p 1643 1097
V 245 1098 1399 2 v 224 1158 a FN(Note)16 b(that)e(b)q(oth)h(of)f(the)h
(loads)f(of)g(the)i(global)d(p)q(oin)o(ter)i(in)f(this)h(example)e
(will)g(need)j(t)o(w)o(o)224 1207 y(instructions.)29
b(Both)17 b FK(farGP)k FN(and)c FK(ownGP)22 b FN(are)17
b(long)f(sym)o(b)q(olic)g(literals.)27 b(A)17 b(mo)q(dule's)224
1257 y(o)o(wn)11 b(global)f(p)q(oin)o(ter)i(v)n(alue)e(could)i(b)q(e)g
(stored)g(in)f(its)g(o)o(wn)g(data)g(area,)h(but)f(this)h(w)o(ould)e
(not)224 1307 y(help)15 b(since)h(after)f(the)g(call)f(returns)i(the)f
(mo)q(dule's)e(o)o(wn)i(data)f(is)h(inaccessible)g(since)h(the)224
1357 y(global)11 b(p)q(oin)o(ter)i(is)g(in)o(v)n(alid.)i(Some)d(of)g
(the)h(alternativ)o(e)f(metho)q(ds)g(to)h(sa)o(v)o(e)g(an)f
(instruction)224 1407 y(or)i(t)o(w)o(o)g(are)g(explored)g(in)g(the)g
(exercises.)287 1456 y(A)h(completely)f(di\013eren)o(t)i(approac)o(h)f
(is)g(used)h(in)e(mac)o(hines)h(whic)o(h)f(try)i(to)f(share)h(the)224
1506 y(global)g(p)q(oin)o(ter)h(b)q(et)o(w)o(een)h(as)f(man)o(y)e(mo)q
(dules)h(as)h(p)q(ossible.)27 b(In)17 b(suc)o(h)h(cases)g(the)g(link)o
(er)224 1556 y(m)o(ust)g(pac)o(k)h(as)f(m)o(uc)o(h)g(of)g(the)h(global)
e(data)h(in)o(to)g(one)h(area)g(as)f(p)q(ossible,)i(and)e(rewrite)224
1606 y(the)c(ob)r(ject)g(co)q(de)g(to)e(tak)o(e)h(accoun)o(t)h(of)e
(the)i(sharing)f(of)f(the)i(p)q(oin)o(ter)f(b)q(et)o(w)o(een)h(mo)q
(dules.)1648 1591 y Fz(8)224 1656 y FN(In)k(eac)o(h)g(case)g(w)o(e)f
(shall)g(assume)g(that)g(a)g(dedicated)h(lo)q(cation)f(in)g(eac)o(h)g
(non-leaf)g(stac)o(k)224 1705 y(frame)h(is)h(reserv)o(ed)j(for)c(sa)o
(ving)h(the)h(global)d(p)q(oin)o(ter.)34 b(Ev)o(ery)20
b(pro)q(cedure)h(call)e(is)g(no)o(w)224 1755 y(assem)o(bled)f
(optimistically)m(,)d(assuming)i(that)i(no)f(mo)q(di\014cation)e(of)i
(the)g(global)f(p)q(oin)o(ter)224 1805 y(will)c(b)q(e)i(necessary)m(.)
20 b(Ho)o(w)o(ev)o(er,)14 b(the)g(next)h(instruction)f(follo)o(wing)d
(the)k(call)e(is)h(a)g(\\no-op".)224 1855 y(This)e(instruction)g(is)f
(the)h(\014rst)g(instruction)g(to)g(b)q(e)g(executed)h(follo)o(wing)c
(the)j(return)h(of)e(the)224 1905 y(called)i(pro)q(cedure,)h(and)e(is)h
(padding)f(whic)o(h)g(reserv)o(es)j(a)d(lo)q(cation)g(so)g(that)h(the)g
(link)o(er)f(has)224 1955 y(space)18 b(to)f(place)g(the)h(instruction)f
(whic)o(h)g(restores)i(the)f(global)d(p)q(oin)o(ter)i(if)f(that)i
(should)224 2004 y(pro)o(v)o(e)f(necessary)m(.)26 b(The)16
b(sequence)j(of)c(ev)o(en)o(ts)i(in)f(the)h(\\luc)o(ky")e(case,)i
(where)g(the)g(global)224 2054 y(p)q(oin)o(ter)e(is)e(not)h(mo)q
(di\014ed,)e(is)i(sho)o(wn)g(in)f(\014gure)i(3.19.)255
2109 y
 21773762 4275814 0 0 21773762 4275814 startTexFig
 255 2109 a
%%BeginDocument: lucky.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-20.0 78.0 translate 0.900 -0.900 scale
0.500 setlinewidth
% Polyline
n 92 37 m 316 36 l gs col-1 s gr
n 307.991 34.036 m 316.000 36.000 l 308.009 38.036 l gs 2 setlinejoin col-1 s gr
% Open spline
n 377.000 66.000 m 383.500 66.000 l
	383.500 66.000 390.000 66.000 390.000 77.000 DrawSplineSection
	390.000 77.000 390.000 88.000 206.000 84.000 DrawSplineSection
	206.000 84.000 22.000 80.000 22.000 65.000 DrawSplineSection
	22.000 65.000 22.000 50.000 29.000 50.000 DrawSplineSection
	36.000 50.000 l gs col-1 s gr
n 28.000 48.000 m 36.000 50.000 l 28.000 52.000 l gs 2 setlinejoin col-1 s gr
/Courier-Bold findfont 10.00 scalefont setfont
39 67 m 
gs 1 -1 scale (...) col-1 show gr
/Courier-Bold findfont 10.00 scalefont setfont
319 39 m 
gs 1 -1 scale (foo:) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
339 54 m 
gs 1 -1 scale (foo-body) col-1 show gr
/Courier-Bold findfont 10.00 scalefont setfont
339 69 m 
gs 1 -1 scale (return) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
40 26 m 
gs 1 -1 scale (load params) col-1 show gr
/Courier-Bold findfont 10.00 scalefont setfont
39 53 m 
gs 1 -1 scale (nop) col-1 show gr
/Courier-Bold findfont 10.00 scalefont setfont
39 39 m 
gs 1 -1 scale (call foo) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 382 2471 a FN(Figure)f(3.19:)j(Pro)q(cedure)f(call)d(not)h(needing)g
(an)g(adjustmen)o(t)f(to)g FG($gp)287 2568 y FN(In)e(the)i(\\unluc)o
(ky")e(case,)h(where)h(an)f(adjustmen)o(t)e(to)i(the)g(global)e(p)q
(oin)o(ter)i(is)g(required,)224 2618 y(the)17 b(link)o(er)f(will)f
(create)j(a)e FK(indir)n(e)n(ct)h(c)n(al)r(ling)g(stub)s
FN(,)f(and)g(o)o(v)o(erwrite)h(the)g(call)f(instruction)p
224 2649 577 2 v 271 2676 a Fy(8)288 2688 y Fx(The)11
b(details)e(of)i(ho)o(w)f(the)g Fu(IBM)i(Power)j Fx(arc)o(hitecture)8
b(uses)i(this)g(idea)g(are)g(giv)o(en)g(in)g(a)h(later)f(section.)p
eop
%%Page: 72 78
72 77 bop 224 274 a FN(72)562 b FL(CHAPTER)14 b(3.)32
b(R)o(UNTIME)13 b(OR)o(GANIZA)m(TION)224 390 y FN(in)h(the)i(ob)r(ject)
f(co)q(de)g(so)g(that)f(the)i(call)d(go)q(es)i(to)g(the)g(stub.)20
b(The)15 b(\\)p FK(no-op)s FN(")g(follo)o(wing)d(the)224
440 y(call)i(instruction)h(will)e(b)q(e)i(also)e(o)o(v)o(erwritten,)i
(in)f(this)g(case)i(with)e(the)h(instruction)f(whic)o(h)224
490 y(restores)i(the)f(global)d(p)q(oin)o(ter)i(of)f(the)i(caller.)287
542 y(The)c(co)q(de)h(of)f(the)h(stub)g(will)e(sa)o(v)o(e)h(the)h
(curren)o(t)h(global)c(p)q(oin)o(ter)j(in)f(the)h(reserv)o(ed)h(stac)o
(k)224 592 y(frame)g(lo)q(cation,)g(load)g(up)h(the)h(new)f(global)e(p)
q(oin)o(ter,)i(and)g FK(jump)j FN(to)d(the)g(real)g(pro)q(cedure)224
642 y(en)o(try)j(p)q(oin)o(t.)24 b(Figure)16 b(3.20)f(sho)o(ws)h(the)h
(sequence)h(of)e(ev)o(en)o(ts)h(in)e(this)h(case,)i(where)f(it)e(is)224
692 y(assumed)c(that)f(the)i(reserv)o(ed)g(lo)q(cation)e(in)g(the)h
(stac)o(k)g(frame)f(is)g FG(\($fp-8\))p FN(.)16 b(Note)11
b(carefully)m(,)255 756 y
 21773762 7762247 0 0 21773762 7762247 startTexFig
 255 756 a
%%BeginDocument: unlucky.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-20.0 131.0 translate 0.900 -0.900 scale
0.500 setlinewidth
% Open spline
n 117.000 37.000 m 138.000 37.000 l
	138.000 37.000 159.000 37.000 145.500 72.000 DrawSplineSection
	145.500 72.000 132.000 107.000 143.500 107.000 DrawSplineSection
	155.000 107.000 l gs col-1 s gr
n 147.000 105.000 m 155.000 107.000 l 147.000 109.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 223.000 142.000 m 262.000 142.000 l
	262.000 142.000 301.000 142.000 300.000 89.500 DrawSplineSection
	300.000 89.500 299.000 37.000 307.500 37.000 DrawSplineSection
	316.000 37.000 l gs col-1 s gr
n 308.000 35.000 m 316.000 37.000 l 308.000 39.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 377.000 66.000 m 383.500 66.000 l
	383.500 66.000 390.000 66.000 390.000 79.000 DrawSplineSection
	390.000 79.000 390.000 92.000 206.000 85.500 DrawSplineSection
	206.000 85.500 22.000 79.000 22.000 64.500 DrawSplineSection
	22.000 64.500 22.000 50.000 29.000 50.000 DrawSplineSection
	36.000 50.000 l gs col-1 s gr
n 28.000 48.000 m 36.000 50.000 l 28.000 52.000 l gs 2 setlinejoin col-1 s gr
/Courier-Bold findfont 10.00 scalefont setfont
39 53 m 
gs 1 -1 scale (lw   -8\($fp\),$gp) col-1 show gr
/Courier-Bold findfont 10.00 scalefont setfont
39 67 m 
gs 1 -1 scale (...) col-1 show gr
/Courier-Bold findfont 10.00 scalefont setfont
39 39 m 
gs 1 -1 scale (call fooStub) col-1 show gr
/Courier-Bold findfont 10.00 scalefont setfont
319 39 m 
gs 1 -1 scale (foo:) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
339 54 m 
gs 1 -1 scale (foo-body) col-1 show gr
/Courier-Bold findfont 10.00 scalefont setfont
339 69 m 
gs 1 -1 scale (return) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
40 26 m 
gs 1 -1 scale (load params) col-1 show gr
/Courier-Bold findfont 10.00 scalefont setfont
158 110 m 
gs 1 -1 scale (fooStub:) col-1 show gr
/Courier-Bold findfont 10.00 scalefont setfont
179 133 m 
gs 1 -1 scale (lw farGP,$gp) col-1 show gr
/Courier-Bold findfont 10.00 scalefont setfont
178 145 m 
gs 1 -1 scale (jmp foo) col-1 show gr
/Courier-Bold findfont 10.00 scalefont setfont
179 120 m 
gs 1 -1 scale (sw $gp,-8\($fp\)) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 452 1339 a FN(Figure)j(3.20:)i(Pro)q(cedure)g(call)d(using)h(a)g(stub)
g(to)g(adjust)g FG($gp)224 1444 y FN(that)f(the)g(stub)f(do)q(es)i(not)
e FK(c)n(al)r(l)k FN(the)d(real)f(pro)q(cedure,)i(but)e(jumps)f(to)h
(it.)18 b(This)12 b(means)f(that)224 1494 y(the)h(return)g(address)g
(from)d(the)i(\014rst)g(call)f(is)h(unmo)q(di\014ed,)f(and)g(the)i
(real)e(target)h(pro)q(cedure)224 1543 y(returns)17 b(to)e(its)g
(caller)g(without)f(passing)h(through)g(the)h(stub)g(again.)k(Suc)o(h)
15 b(stubs)h(whic)o(h)224 1593 y(are)k(called)e(as)h(pro)q(cedures,)j
(but)d FK(jump)i FN(rather)f(than)f FK(r)n(eturn)i FN(are)e(called)g
FK(tr)n(amp)n(olines)224 1643 y FN(since)c(they)g(\\b)q(ounce")f(the)g
(\015o)o(w)g(of)f(con)o(trol)h(on)f(to)h(another)g(destination.)224
1773 y FH(3.2.7)56 b(Pro)r(cedure)17 b(parameters)g(and)i(v)m(ariables)
224 1854 y FO(Represen)o(tation)12 b(of)j(pro)q(cedure)f(v)m(alues)224
1935 y FN(Man)o(y)h(languages)f(pro)o(vide)h(for)g(pro)q(cedures)i(to)e
(b)q(e)g(treated)h(as)f(v)n(alues.)21 b(In)15 b FK(Pasc)n(al)k
FN(pro-)224 1985 y(cedures)j(ma)o(y)17 b(b)q(e)k(passed)f(as)g
(parameters)f(to)h(other)g(pro)q(cedures.)37 b FK(Mo)n(dula-2)26
b FN(allo)o(ws)224 2035 y(pro)q(cedure)18 b(t)o(yp)q(es)f(to)e(b)q(e)i
(declared,)g(and)e(v)n(ariables,)g(parameters)h(and)g(function)f
(return)224 2085 y(v)n(alues)h(to)g(b)q(e)h(declared)g(to)f(b)q(e)g(of)
g(suc)o(h)h(t)o(yp)q(es.)25 b FM(C)19 b FN(allo)o(ws)c(t)o(yp)q(es)i
(to)f(b)q(e)g(de\014ned)h(whic)o(h)224 2135 y(are)f(p)q(oin)o(ters)f
(to)g(functions,)g(and)g(allo)o(ws)f(v)n(ariables,)g(parameters)h(and)f
(function)h(return)224 2184 y(v)n(alues)f(to)g(b)q(e)g(of)g(suc)o(h)g
(t)o(yp)q(es.)287 2237 y(The)f(use)g(of)f(pro)q(cedure)i(v)n(alues)e
(is)h(deeply)g(em)o(b)q(edded)f(in)g(the)h(st)o(yle)g(of)f(programming)
224 2287 y(whic)o(h)k(uses)g(ob)r(jects,)h(and)e(graphical)f(user)j(in)
o(terfaces.)23 b(In)16 b(suc)o(h)g(en)o(vironmen)o(ts)e(pro)q(ce-)224
2336 y(dure)j(v)n(alues)f(are)g(passed)h(to)e(pro)q(cedures,)j(and)e
(are)g(en)o(tered)i(in)d(structures)j(and)e(tables)224
2386 y(so)e(as)g(to)g(customize)g(b)q(eha)o(viour)f(at)h(run)o(time.)
287 2438 y(If)k(w)o(e)i(consider)g(the)f(case)h(of)f(simple)f(pro)q
(cedures)j(whic)o(h)e(are)g(not)g(nested)i(within)224
2488 y(an)o(y)15 b(other)g(pro)q(cedure,)i(then)e(there)h(are)g(essen)o
(tially)e(t)o(w)o(o)h(w)o(a)o(ys)f(of)g(represen)o(ting)j(a)d(pro-)224
2538 y(cedure)j(v)n(alue)e(at)g(run)o(time.)21 b(Most)15
b(mac)o(hine)f(arc)o(hitectures)j(pro)o(vide)e(a)g(subroutine)h(call)
224 2588 y(instruction)i(whic)o(h)f(can)g(tak)o(e)h(either)g(a)f
(literal)f(constan)o(t)i(lab)q(el)e(as)i(a)f(target)g(op)q(erand,)224
2638 y(or)e(can)g(jump)e(to)i(an)f(address)i(held)f(in)g(a)f(mac)o
(hine)f(register.)22 b(In)15 b(the)g(case)h(of)e(the)i
FK(MIPS)224 2688 y FN(arc)o(hitecture)g(there)f(are)g(t)o(w)o(o)e
(instructions)i(|)p eop
%%Page: 73 79
73 78 bop 224 274 a FL(3.2.)31 b(PR)o(OCEDURE)14 b(CALL)g(AND)g(RETURN)
602 b FN(73)442 427 y FF(jal)68 b FE(pr)n(o)n(c-lab)n(el)247
b FD(;)12 b FE(jump)h(to)g(lab)n(el)f(and)h(link)442
472 y FF(jalr)48 b Fm(r)587 476 y Fh(dst)975 472 y FD(;)12
b FE(jump)h(to)g(r)n(e)n(g)g(tar)n(get)g(and)f(link)224
558 y FN(This)g(suggests)h(that)f(the)g(address)i(of)d(the)h(en)o(try)h
(p)q(oin)o(t)e(of)g(the)i(pro)q(cedure)g(migh)o(t)d(b)q(e)i(used)224
608 y(as)i(the)g(v)n(alue.)j(Indeed)e(this)f(is)f(the)h(most)f(common)d
(implemen)o(tation)g(of)j(pro)q(cedure)j(v)n(al-)224
657 y(ues.)i(When)12 b(this)f(is)h(the)f(case,)i(creating)f(a)f(pro)q
(cedure)i(v)n(alue)d(from)g(a)h(declared)h(pro)q(cedure)224
707 y(consists)17 b(of)e(simply)e(taking)h(its)i(en)o(try)g(p)q(oin)o
(t)f(address.)24 b(If)15 b(some)f(v)n(ariable)g FK(fo)n(o)k
FN(con)o(tains)224 757 y(the)13 b(en)o(try)f(p)q(oin)o(t)g(address,)h
(sa)o(y)e(of)g FK(InOut.WriteLn)s FN(,)h(then)h(the)f(call)f
FG(foo\(\))g FN(will)f(generate)224 807 y(the)15 b(follo)o(wing)c(co)q
(de)k(|)442 928 y FF(lw)88 b(foo)p FD(,)p Fm(r)658 932
y Fy(11)975 928 y FD(;)12 b FE(any)h(fr)n(e)n(e)g(r)n(e)n(g)g(wil)r(l)g
(do)442 973 y FF(jalr)48 b Fm(r)587 977 y Fy(11)975 973
y FD(;)12 b FE(jump)h(to)g(entry)g(p)n(oint)f(and)g(link)287
1059 y FN(The)i(alternativ)o(e)g(represen)o(tation)i(for)d(pro)q
(cedure)j(v)n(alues)e(uses)i(a)d(descriptor,)i(some-)224
1109 y(times)e(in)g(the)i(data)e(segmen)o(t.)18 b(In)13
b(this)h(case,)g(the)h(descriptor)g(can)f(con)o(tain)f(an)g(arbitrary)
224 1158 y(amoun)o(t)f(of)i(data,)f(whic)o(h)h(m)o(ust)e(include)i(the)
h(pro)q(cedure)h(en)o(try)e(address.)287 1208 y(With)g(suc)o(h)i
(represen)o(tations,)h(the)f(pro)q(cedure)h(v)n(alue)e(is)g(the)h
(address)g(of)f(the)g(pro)q(ce-)224 1258 y(dure)j(descriptor.)28
b(When)17 b(a)g(pro)q(cedure)i(is)d(called,)h(the)h(parameters)f(of)f
(the)h(indirectly)224 1308 y(called)j(pro)q(cedure)h(are)f(ev)n
(aluated)f(normally)m(,)f(but)h(the)i(descriptor)f(address)h(m)o(ust)e
(b)q(e)224 1358 y(passed)14 b(as)f(an)g(additional)e(parameter)i(to)g
(a)f(dispatc)o(h)i(pro)q(cedure.)19 b(In)13 b(the)h(case)g(of)e
FK(RISC)224 1407 y FN(mac)o(hines)k(the)i(additional)d(parameter)h(w)o
(ould)g(normally)e(b)q(e)k(placed)f(in)f(a)h(caller-sa)o(v)o(es)224
1457 y(register)g(other)g(than)e(the)i(standard)f(parameter)f
(registers.)26 b(Rep)q(eating)15 b(the)i(ab)q(o)o(v)o(e)e(ex-)224
1507 y(ample,)9 b(in)i(this)f(case)i FK(fo)n(o)h FN(w)o(ould)d(ha)o(v)o
(e)g(the)h(descriptor)h(address)g(in)e(it,)g(and)g(the)i(call)d
FG(foo\(\))224 1557 y FN(w)o(ould)k(pro)q(duce)j(the)e(follo)o(wing)d
(co)q(de)k(|)442 1678 y FF(lw)69 b(foo)p FD(,)p Fm(r)639
1682 y Fy(3)955 1678 y FD(;)12 b FE(r3)i(is)f(extr)n(a)g(disp)n(atch)e
(ar)n(g)442 1723 y FF(jal)49 b($)o($dispatch)205 b FD(;)12
b FE(c)n(al)r(l)h(the)g(disp)n(atch)e(pr)n(o)n(c)n(e)n(dur)n(e)224
1809 y FN(The)i(dispatc)o(h)g(pro)q(cedure,)i(whic)o(h)d(is)h(often)f
(a)h(sytem)f(routine,)g(m)o(ust)g(p)q(erform)f(whatev)o(er)224
1859 y(manipulations)i(are)j(required)g(b)q(efore)h(jumping)c(to)i(the)
h(pro)q(cedure)i(en)o(try)e(p)q(oin)o(t.)22 b(Here)224
1908 y(is)14 b(an)g(outline)f(of)g(some)g(t)o(ypical)h(co)q(de)g(|)274
2029 y FF($$)o(dispatch:)482 b FD(;)12 b FE(disp)n(atch)f(pr)n(o)n(c)n
(e)n(dur)n(e)h(entry)g(p)n(oint)442 2075 y(initialize,)f(using)h
Fm(r)730 2079 y Fy(3)761 2075 y FE(to)h(ac)n(c)n(ess)f(descriptor)442
2120 y(move)h(entry)g(addr)n(ess)e(fr)n(om)j(descriptor)d(to)i
Fm(r)1112 2124 y Fy(1)442 2166 y FF(jalr)48 b Fm(r)587
2170 y Fy(1)975 2166 y FD(;)12 b FE(c)n(al)r(l)h(to)g(r)n(e)n(al)g
(entry)f(p)n(oint)442 2212 y(r)n(estor)n(e)h(original)e(pr)n(o)n(c)n(e)
n(dur)n(e)h(state)442 2257 y FF(ret)473 b FD(;)12 b FE(r)n(eturn)h(to)g
(original)e(c)n(al)r(ler)224 2389 y FN(A)k(di\016cult)f(issue)i(for)e
(the)i(design)f(of)f(dispatc)o(h)h(stubs)h(of)e(this)h(kind)f(is)h(to)f
(decide)i(where)224 2438 y(to)c(sa)o(v)o(e)g(an)o(y)g(state)h(of)e(the)
i(original)d(caller,)i(in)f(cases)j(where)f(state)g(m)o(ust)e(b)q(e)h
(sa)o(v)o(ed.)18 b(Since)224 2488 y(the)12 b(\014nal)e(destination)h
(ma)o(y)e(b)q(e)j(una)o(w)o(are)f(of)f(whether)j(it)d(is)h(called)g
(directly)g(or)g(indirectly)m(,)224 2538 y(the)17 b(stub)f(m)o(ust)e
(rely)i(on)f(space)i(surrendered)h(b)o(y)e(the)g(caller)f(to)h(sa)o(v)o
(e)g(an)o(y)f(data.)22 b(If)16 b(the)224 2588 y(state)f(is)e(stored)i
(in)e(the)h(stac)o(k)g(frame)e(of)h(the)h(caller,)f(and)g(the)h(state)h
(is)e(restored)i(b)o(y)e(co)q(de)224 2638 y(in)h(the)h(caller,)e(then)i
(the)f(stub)h(ma)o(y)d(b)q(e)j(con\014gured)g(as)f(a)f(tramp)q(oline)g
(in)g(the)i(same)e(w)o(a)o(y)224 2688 y(as)h(outlined)g(in)f
(\014gure3.20.)p eop
%%Page: 74 80
74 79 bop 224 274 a FN(74)562 b FL(CHAPTER)14 b(3.)32
b(R)o(UNTIME)13 b(OR)o(GANIZA)m(TION)287 390 y FN(Pro)q(cedure)k(v)n
(alues)e(for)g(nested)i(pro)q(cedures)g(are)f(necessarily)g(more)f
(complex,)e(since)224 440 y(they)19 b(m)o(ust)e(not)g(only)h(ha)o(v)o
(e)f(en)o(try)i(p)q(oin)o(t)e(information,)f(but)i(m)o(ust)f(ha)o(v)o
(e)g(information)224 490 y(regarding)c(their)h(en)o(vironmen)o(t)d(as)i
(w)o(ell.)k(Suc)o(h)d(a)e(com)o(bination)f(of)h(a)h(pro)q(cedure)i
(plus)e(an)224 540 y(execution)i(en)o(vironmen)o(t)e(is)h(called)f(a)h
FK(closur)n(e)p FN(.)287 594 y(Nested)e(pro)q(cedures)h(m)o(ust)d(ha)o
(v)o(e)h(access)i(to)d(all)g(the)i(v)n(ariables)e(of)g(all)g(relativ)o
(ely)g(global)224 644 y(scop)q(es)18 b(in)d(whic)o(h)h(they)h(are)f
(declared.)26 b(In)16 b(the)g(case)h(of)e(run)o(time)g(organizations)g
(whic)o(h)224 694 y(use)20 b(a)d(displa)o(y)h(v)o(ector,)h(a)f(n)o(um)o
(b)q(er)g(of)g(displa)o(y)f(v)o(ector)i(elemen)o(ts)f(equal)g(to)g(the)
h(static)224 744 y(nesting)14 b(depth)f(of)f(the)i(pro)q(cedure)h(m)o
(ust)c(b)q(e)j(sa)o(v)o(ed)f(as)g(part)g(of)f(the)i(closure.)k(In)13
b(the)g(case)224 793 y(of)i(run)o(time)g(organizations)g(whic)o(h)g
(use)i(a)e(static)h(c)o(hain,)g(a)f(single)g(p)q(oin)o(ter)h(to)g(the)g
(head)224 843 y(of)e(the)g(c)o(hain)g(su\016ces.)287
897 y(Th)o(us)h(a)f(closure)i(consists)g(of)e(a)h(minim)n(um)c(of)j(t)o
(w)o(o)g(addresses,)j(the)f(en)o(try)f(p)q(oin)o(t)g(ad-)224
947 y(dress,)d(and)e(a)f(static)h(link)f(p)q(oin)o(ter.)17
b(Suc)o(h)10 b(a)f(pro)q(cedure)j(v)n(alue)d(ma)o(y)f(either)i(b)q(e)g
(represen)o(ted)224 997 y(as)j(an)f(address)i(pair,)e(or)g(ma)o(y)e(b)q
(e)j(a)f(single)g(p)q(oin)o(ter)h(to)f(a)g(descriptor)i(whic)o(h)e(con)
o(tains)h(the)224 1047 y(en)o(vironmen)o(t)g(information.)287
1101 y(The)h(sa)o(ving)f(of)g(pro)q(cedure)i(closures)g(as)f(v)n
(ariables)f(is)h(sub)r(ject)h(to)e(some)g(constrain)o(ts.)224
1151 y(The)i(en)o(vironmen)o(t)f(part)g(of)g(the)h(closure)g(consists)g
(of)f(references)j(to)e(activ)n(ation)e(records)224 1201
y(of)19 b(enclosing)g(pro)q(cedures.)36 b(In)19 b(languages)g(whic)o(h)
g(allo)q(cate)f(activ)n(ation)g(records)j(on)e(a)224
1250 y(run)o(time)c(stac)o(k,)i(the)f(en)o(vironmen)o(t)f(of)h(a)f
(closure)i(b)q(ecomes)f(in)o(v)n(alid)e(as)i(so)q(on)g(as)g(an)o(y)g
(of)224 1300 y(the)d(stac)o(k)g(frames)f(of)f(the)i(en)o(vironmen)o(t)e
(are)i(deallo)q(cated.)18 b(Th)o(us)12 b(a)g(closure)i(can)e(only)g(b)q
(e)224 1350 y(guaran)o(teed)g(to)f(b)q(e)h(v)n(alid)e(if)g(the)i(exten)
o(t)g(of)e(the)i(en)o(vironmen)o(t)e(is)h(greater)h(than)g(the)f(exten)
o(t)224 1400 y(of)i(the)g(v)n(ariable)e(in)i(whic)o(h)f(it)h(is)f
(stored.)19 b(This)13 b(condition)f(can)g(b)q(e)i(c)o(hec)o(k)o(ed)g
(statically)e(for)224 1450 y(assignmen)o(t)h(of)g(literal)g(pro)q
(cedures)j(to)e(pro)q(cedure)h(v)n(ariables.)i(Ho)o(w)o(ev)o(er,)d(it)g
(requires)h(an)224 1500 y(explicit)h(represen)o(tation)h(of)e(the)i
(static)f(depth,)h(and)e(a)h(run)o(time)e(c)o(hec)o(k,)j(in)f(the)g
(case)h(of)224 1549 y(assignmen)o(t)c(of)g(one)i(pro)q(cedure)g(v)n
(ariable)e(to)h(another.)224 1681 y FO(P)o(ascal)h(pro)q(cedure)f
(parameters)224 1765 y FK(Pasc)n(al)k FN(has)c(only)e(pro)q(cedure)k
(parameters,)d(and)g(do)q(es)h(not)g(allo)o(w)d(closures)k(to)e(b)q(e)h
(stored)224 1815 y(in)g(v)n(ariables.)j(This)d(c)o(hoice)g(ensures)i
(that)e(pro)q(cedure)i(v)n(alues)e(are)g(alw)o(a)o(ys)f(v)n(alid.)287
1869 y(The)f(actual)g(parameter)g(passed)i(to)e(a)g(formal)e(parameter)
i(of)g(pro)q(cedure)i(mo)q(de)d(m)o(ust)224 1919 y(necessarily)k(b)q(e)
f(a)f(pro)q(cedure)i(whic)o(h)f(is)f(visible)g(to)g(the)h(caller.)k
(The)c(only)e(nested)j(pro)q(ce-)224 1969 y(dures)i(visible)f(to)f(a)h
(pro)q(cedure)i(are)e(pro)q(cedures)i(whic)o(h)e(are)g(declared)h(in)e
(the)i(caller)e(or)224 2019 y(its)h(ancestors.)25 b(Hence)17
b(the)f(uplev)o(el)f(en)o(vironmen)o(t)g(of)g(the)h(parameter)f(m)o
(ust)g(p)q(ersist)h(at)224 2069 y(least)d(as)g(long)f(as)h(the)g
(caller.)18 b(Since)13 b(the)g(pro)q(cedure)i(v)n(alue)d(only)g(p)q
(ersists)i(as)f(long)f(as)h(the)224 2118 y(callee,)h(the)g(closure)h(m)
o(ust)e(alw)o(a)o(ys)g(b)q(e)h(v)n(alid.)287 2173 y(Consider)21
b(the)g(scop)q(e)h(tree)g(in)f(\014gure)g(3.14)f(on)g(page)h(63.)38
b(Pro)q(cedure)23 b FK(P12)k FN(ma)o(y)224 2222 y(pass)16
b(an)o(y)e(one)i(of)e FK(P1,)i(P2,)g(P11,)h(P12)e FN(as)g(actual)g
(parameters)g(to)g(a)f(formal)f(pro)q(cedure.)224 2272
y(The)k(\014rst)g(t)o(w)o(o)e(ha)o(v)o(e)h(an)g(en)o(vironmen)o(t)f
(whic)o(h)h(is)g(static,)g(and)g(the)h(latter)f(t)o(w)o(o)g(ha)o(v)o(e)
g(an)224 2322 y(en)o(vironmen)o(t)h(whic)o(h)g(is)g(v)n(alid)e(so)j
(long)e(as)h FK(P1)24 b FN(has)17 b(a)g(v)n(alid)f(stac)o(k)h(frame.)27
b(Since)18 b FK(P12)224 2372 y FN(cannot)c(b)q(e)h(called)f(unless)g
FK(P1)20 b FN(is)14 b(v)n(alid,)e(the)i(closure)h(is)f(alw)o(a)o(ys)e
(safe.)224 2503 y FO(Mo)q(dula-2)j(pro)q(cedure)f(v)m(ariables)224
2588 y FK(Mo)n(dula-2)20 b FN(allo)o(ws)12 b(pro)q(cedure)k(v)n(alues)d
(to)g(b)q(e)h(assigned)g(to)g(v)n(ariables,)e(passed)j(as)e(param-)224
2638 y(eters)i(and)e(returned)h(as)f(function)g(results.)19
b(Ho)o(w)o(ev)o(er)13 b(it)g(has)g(a)f(rule)i(whic)o(h)e(prev)o(en)o
(ts)j(the)224 2688 y(exten)o(t)j(problems)e(men)o(tioned)g(in)h(the)h
(last)e(section.)29 b(Pro)q(cedure)19 b(v)n(alues)d(in)h
FK(Mo)n(dula-2)p eop
%%Page: 75 81
75 80 bop 224 274 a FL(3.2.)31 b(PR)o(OCEDURE)14 b(CALL)g(AND)g(RETURN)
602 b FN(75)224 390 y(can)13 b(only)f(b)q(e)h(pro)q(cedures)h(declared)
g(at)e(the)h(outer)g(lev)o(el,)f(that)g(is,)g(pro)q(cedures)j(whic)o(h)
d(are)224 440 y(not)i(nested)i(within)d(other)h(pro)q(cedures.)21
b(This)13 b(is)h(sometimes)e(called)i(the)g(lev)o(el-0)f(rule.)287
491 y(This)f(rule)h(remo)o(v)o(es)f(all)g(p)q(ossibilit)o(y)f(of)h
(error,)i(as)e(pro)q(cedures)j(declared)f(at)e(the)i(outer)224
541 y(lev)o(el)20 b(ha)o(v)o(e)h(no)f(en)o(vironmen)o(t)f(other)i(than)
f(the)h(static)g(en)o(vironmen)o(t.)36 b(Therefore)22
b(no)224 591 y(en)o(vironmen)o(t)11 b(needs)i(to)f(b)q(e)g(stored)h(as)
f(part)g(of)f(the)i(closure,)f(and)g(pro)q(cedure)i(v)n(alues)d(ma)o(y)
224 641 y(b)q(e)k(represen)o(ted)i(as)d(a)f(single)h(address)h(v)n
(alue.)224 756 y FO(Language)g(C)h(p)q(oin)o(ter)e(to)h(functions)224
835 y FN(In)g(language)f FM(C)j FN(the)e(situation)f(is)h(ev)o(en)g
(simpler)f(than)g FK(Mo)n(dula-2)6 b FN(.)21 b(Nested)16
b(pro)q(cedures)224 885 y(do)c(not)g(exist)g(in)g FM(C)s
FN(.)17 b(This)12 b(means)f(that)h(ev)o(ery)h(pro)q(cedure)h
(necessarily)f(ob)q(eys)f(the)h(lev)o(el-0)224 934 y(rule,)h(so)g(that)
g(pro)q(cedure)i(v)n(alues)d(do)h(not)g(require)h(an)o(y)e(en)o
(vironmen)o(t)g(information.)224 1058 y FH(3.2.8)56 b(Dynamic)16
b(linking)224 1137 y FN(Op)q(erating)11 b(systems)e(suc)o(h)i(as)f
FK(UNIX)15 b FN(pro)o(vide)10 b(for)f(the)i(sharing)e(of)g(the)h(co)q
(de)h(of)e(programs,)224 1187 y(if)k(m)o(ultiple)e(instances)k(of)d
(the)i(same)f(program)f(are)h(running)h(at)f(the)h(same)e(time.)17
b(In)c(this)224 1236 y(case,)20 b(eac)o(h)f(instance)g(of)e(the)i
(program)d(has)i(its)h(o)o(wn)e(priv)n(ate)h(data)g(segmen)o(t,)g(but)h
(all)224 1286 y(instances)c(share)g(the)g(text)f(segmen)o(t.)287
1337 y(In)e(mo)q(dern)g(soft)o(w)o(are)g(systems,)h(this)f(sharing)h
(of)f(the)h(co)q(de)g(of)f(en)o(tire)h(programs)e(ma)o(y)224
1387 y(still)19 b(b)q(e)h(ine\016cien)o(t,)h(as)f(sev)o(eral)g
FK(di\013er)n(ent)k FN(programs)18 b(running)i(sim)o(ultaneously)d(ma)o
(y)224 1437 y(ha)o(v)o(e)h(large)f(b)q(o)q(dies)g(of)g(iden)o(tical)g
(library)f(co)q(de)i(statically)f(b)q(ound)g(to)g(eac)o(h)h(program's)
224 1487 y(executable)i(image.)28 b(Dynamic)16 b(linking)g(is)i(the)h
(mec)o(hanism)c(whic)o(h)j(allo)o(ws)f(dissimilar)224
1537 y(programs)c(to)h(share)g(common)d(co)q(de.)19 b(It)14
b(is)f(so)h(called,)f(b)q(ecause)j(the)e(co)q(de)h(of)e(libraries)g(is)
224 1586 y(loaded)i(dynamically)l(,)d FK(on)k(demand)p
FN(.)22 b(In)14 b(this)h(w)o(a)o(y)m(,)f(co)q(de)h(whic)o(h)g(is)f(nev)
o(er)i(used)g(is)e(nev)o(er)224 1636 y(loaded.)33 b(F)m(urthermore)18
b(requests)j(to)e(load)e(mo)q(dules)h(whic)o(h)h(turn)g(out)g(to)f(b)q
(e)i(already)224 1686 y(loaded)13 b(are)g(honored)g(b)o(y)g(allo)o
(wing)d(shared)k(access)h(to)d(the)i(already)e(loaded)h(co)q(de.)18
b(There)224 1736 y(are)e(a)e(n)o(um)o(b)q(er)h(of)f(di\013eren)o(t)i(w)
o(a)o(ys)e(in)h(whic)o(h)g(dynamic)e(linking)g(is)i(implemen)o(ted.)k
(Here)224 1786 y(w)o(e)c(shall)e(only)g(deal)g(with)h(one)g(p)q
(ossibilit)o(y)f(in)g(detail.)287 1837 y(Dynamic)g(loading)i(places)h
(additional)e(demands)h(on)h(co)q(de)g(generation.)24
b(In)16 b(partic-)224 1887 y(ular,)f(the)h(lo)q(cation)e(of)h(the)h
(dynamically)c(loaded)j(library)f(cannot)i(b)q(e)g(kno)o(wn)e(un)o(til)
h(the)224 1936 y(library)d(has)h(b)q(een)h(loaded)e(at)h(run)o(time.)k
(Th)o(us)c(the)g(addresses)i(of)d(the)h(pro)q(cedures)i(in)e(the)224
1986 y(libraries)h(ha)o(v)o(e)g(to)f(remain)g(unresolv)o(ed)i(un)o(til)
e(run)o(time.)287 2037 y(It)f(is)g(normal)e(to)j(allo)o(w)d(for)i
(dynamic)f(loading)f(b)o(y)i(making)e(the)j(calls)f(to)g(dynamically)
224 2087 y(loaded)20 b(pro)q(cedures)i(indirect.)38 b(One)20
b(w)o(a)o(y)g(of)f(arranging)h(this)g(is)g(to)g(create)h(a)f(global)224
2137 y(table)12 b(whic)o(h)h(holds)f(the)g(addresses)j(of)c(all)g(of)h
(the)h(dynamically)c(loaded)j(pro)q(cedure)i(en)o(try)224
2187 y(p)q(oin)o(ts.)19 b(The)c(table)f(migh)o(t)e(hold)h(\()p
FK(name,)i(addr)n(ess)s FN(\))g(pairs)f(with)g(the)h(addresses)h
(initially)224 2237 y(p)q(oin)o(ting)d(to)h(a)g(system)g(trap)g
(handler.)19 b(When)14 b(the)h(trap)f(handler)g(is)g(activ)n(ated,)g
(it)f(m)o(ust)224 2286 y(arrange)h(the)f(loading)f(of)g(the)i(library)e
(\(if)h(it)f(is)h(not)g(already)g(loaded\),)f(and)h(the)h(up)q(dating)
224 2336 y(of)g(the)g(address)h(\014eld)f(in)g(the)g(pair.)287
2387 y(An)19 b(alternativ)o(e)f(arrangemen)o(t)h(uses)h(indirect)f
(calling)f(stubs)i(so)f(that)g(the)g(call)f(to)224 2437
y(the)e(library)e(routine)h(go)q(es)g(\014rst)g(to)g(the)g(stub.)22
b(The)15 b(stub)g(m)o(ust)f(in)o(v)o(ok)o(e)g(a)g(trap)h(handler)224
2487 y(on)i(the)g(\014rst)g(call,)f(but)g(ma)o(y)f(b)q(e)i(up)q(dated)g
(to)f(call)g(the)h(loaded)f(pro)q(cedure)i(directly)f(on)224
2537 y(subsequen)o(t)d(calls.)i(Note)c(that)g(this)f(arrangemen)o(t)g
(requires)i(the)f(stubs)g(to)f(b)q(e)h(in)f(a)h(region)224
2587 y(of)i(memory)d(whic)o(h)j(is)g(b)q(oth)g(executable)h(and)e
(writable.)287 2638 y(As)e(will)e(b)q(e)i(seen)h(directly)m(,)f(it)f
(is)h(not)f(only)g(the)i(co)q(de)f(whic)o(h)g(calls)f(dynamically)e
(loaded)224 2688 y(libraries)k(whic)o(h)h(is)f(di\013eren)o(t.)18
b(Co)q(de)13 b(capable)f(of)g(b)q(eing)g(dynamically)d(loaded)j(m)o
(ust)g(able)p eop
%%Page: 76 82
76 81 bop 224 274 a FN(76)562 b FL(CHAPTER)14 b(3.)32
b(R)o(UNTIME)13 b(OR)o(GANIZA)m(TION)224 390 y FN(to)h(run)g(with)g
(the)g(same)f(result,)h(no)g(matter)f(where)i(in)e(the)i(memory)c
(space)k(it)f(is)f(loaded.)224 440 y(Suc)o(h)i(co)q(de)f(is)g(said)g
(to)f(b)q(e)i FK(p)n(osition)g(indep)n(endent)p FN(.)224
547 y FO(P)o(osition)e(indep)q(enden)n(t)f(co)q(de)224
623 y FN(P)o(osition)h(indep)q(enden)o(t)h(co)q(de)h(is)e(co)q(de)h
(whic)o(h)f(runs)h(in)f(the)h(same)e(w)o(a)o(y)h(no)g(matter)f(where)
224 673 y(it)i(is)g(loaded)g(in)g(the)h(address)g(space.)20
b(In)14 b(order)h(to)f(b)q(e)h(p)q(osition)f(indep)q(enden)o(t,)h(the)f
(co)q(de)224 723 y(m)o(ust)f(con)o(tain)h(no)f(addresses)j(whic)o(h)e
(are)g(b)q(ound)g(b)q(efore)h(loading.)287 773 y(There)h(are)f(sev)o
(eral)h(issues)g(in)o(v)o(olv)o(ed,)e(but)h(let)g(us)h(deal)e(\014rst)i
(with)f(a)g(non-issue.)22 b(Al-)224 823 y(most)c(all)f(con)o(temp)q
(orary)h(mac)o(hine)f(arc)o(hitectures)k(pro)o(vide)e(for)f
(conditional)f(and)h(un-)224 872 y(conditional)12 b(branc)o(h)i
(instructions)f(to)g(b)q(e)h FK(pr)n(o)n(gr)n(am)f(c)n(ounter)i(r)n
(elative)p FN(.)h(F)m(or)d(example,)f(an)224 922 y(assem)o(bler)i(pro)q
(cessing)h(the)f(instruction)h(|)354 1000 y FF(br)k(label2)155
b(;)19 b FE(unc)n(onditio)o(nal)10 b(br)n(anch)i(to)j
FF(label2)224 1083 y FN(will)c(compute)h(the)h(address)h(o\013set)f(b)q
(et)o(w)o(een)g(the)g(lo)q(cation)f(\\)p FK(lab)n(el2)6
b FN(")11 b(and)h(the)h FK(addr)n(ess)g(of)224 1132 y(the)i(next)g
(instruction)s FN(,)d(sym)o(b)q(olically)f(\\)p FK(her)n(e)s
FN(")h(and)h(will)f(emit)g(binary)h(co)q(de)h(corresp)q(ond-)224
1182 y(ing)g(to)f(the)i(follo)o(wing)c(|)354 1260 y FF(<)p
FE(br)i(op)n(c)n(o)n(de)s FF(><)p FE(o\013)o(set)s FF(>)224
1343 y FN(A)o(t)j(run)o(time,)e(the)i(e\013ect)g(of)f(this)g
(instruction)h(is)f(simply)e(to)i(add)g(the)h(immediate)c(o\013set)224
1392 y(to)17 b(the)g(program)e(coun)o(ter,)j(so)e(that)h(the)g
(successor)i(instruction)e(of)f(the)h(branc)o(h)g(is)g(the)224
1442 y(instruction)e(at)e FK(lab)n(el2)p FN(.)287 1492
y(If)j(all)g(of)h(the)h(\015o)o(w)e(of)h(con)o(trol)g(branc)o(hing)g
(within)f(a)h(single)g(pro)q(cedure)i(uses)f(these)224
1542 y(relativ)o(e)f(branc)o(hes,)i(then)f(the)f(pro)q(cedure)i(will)d
(b)q(eha)o(v)o(e)i(in)e(exactly)h(the)h(same)e(w)o(a)o(y)h(no)224
1592 y(matter)d(where)h(in)e(the)i(memory)c(it)i(is)h(loaded.)287
1641 y(Ho)o(w)o(ev)o(er,)k(access)h(to)e(statically)g(allo)q(cated)g
(data,)g(and)h(calls)f(to)g(other)h(pro)q(cedures)224
1691 y(traditionally)13 b(use)i(imm)o(ediate)d(addresses)k(em)o(b)q
(edded)e(in)g(the)h(co)q(de,)g(and)f(hence)h(cannot)224
1741 y(b)q(e)h(p)q(osition)d(indep)q(enden)o(t.)22 b(In)14
b(fact,)h(if)e(the)i(called)g(co)q(de)g(or)g(data)f(b)q(elong)g(to)g(a)
h(mo)q(dule)224 1791 y(whic)o(h)i(is)h(loaded)e(indep)q(enden)o(tly)m
(,)i(then)g(ev)o(en)g(program)d(coun)o(ter)k(relativ)o(e)e(addressing)
224 1841 y(do)q(es)c(not)f(help.)18 b(In)12 b(suc)o(h)h(cases,)g
(either)g(the)g(unresolv)o(ed)f(immediate)d(addresses)15
b(m)o(ust)c(b)q(e)224 1891 y(adjusted)k(as)f(the)g(program)f(is)g
(loaded,)g(or)h(access)i(m)o(ust)d(b)q(e)h(indirect.)287
1940 y(The)h FK(IBM)i(Power)i FN(arc)o(hitecture)f(uses)e(con)o(v)o(en)
o(tions)f(in)g(whic)o(h)h(all)e(co)q(de)i(is)f(p)q(osition)224
1990 y(indep)q(enden)o(t.)28 b(Eac)o(h)17 b(mo)q(dule)e(con)o(tributes)
j(part)f(of)f(a)g(table,)h(called)f(the)i FK(glob)n(al)f(o\013set)224
2040 y(table)e FN(whic)o(h)c(at)g(run)o(time)f(holds)i(the)g(addresses)
h(of)e(all)f(un)o(b)q(ound)h(lo)q(cations.)17 b(All)11
b(accesses)224 2090 y(to)i(lo)q(cations)g(whic)o(h)g(are)h(not)f
(statically)f(b)q(ound)h(m)o(ust)f(b)q(e)i(made)e(b)o(y)h(fetc)o(hing)g
(the)h(\014xed-)224 2140 y(up)g(address)g(from)e(the)i(global)d
(o\013set)j(table.)k(This)13 b(mec)o(hanism)e(is)i(conceptually)g
(simple,)224 2189 y(but)i(requires)g(some)e(care)h(with)g(the)g
(details)g(of)f(implemen)o(tation.)287 2239 y(Access)i(to)d(the)h
(global)e(o\013set)j(table)f(is)f(v)o(ery)h(frequen)o(t,)h(so)e(it)h
(is)f(imp)q(ortan)o(t)f(to)i(ensure)224 2289 y(that)18
b(these)h(accesses)h(are)e(e\016cien)o(t.)29 b(This)18
b(is)f(ensured)i(b)o(y)f(reserving)g(a)f(register)i FM(R)1606
2300 y FN(got)224 2339 y(whic)o(h)d(p)q(oin)o(ts)f(to)h(the)g
(applicable)e(table.)23 b(F)m(or)15 b(eac)o(h)h(separately)g(link)o(ed)
f(program)f(frag-)224 2389 y(men)o(t)e(the)h(link)o(er)g(will)e
(attempt)h(to)g(construct)j(a)d(single)g(table)h(from)e(the)i(separate)
h(tables)224 2438 y(arising)j(from)g(eac)o(h)h(compilation.)27
b(Pro)o(vided)18 b(the)g(size)h(of)e(the)i(single)e(table)h(do)q(es)g
(not)224 2488 y(exceed)f(the)f(o\013set)g(addressing)f(range,)g
FM(R)904 2500 y FN(got)978 2488 y(will)f(not)h(need)h(to)e(b)q(e)i(c)o
(hanged)f(as)g(pro)q(ce-)224 2538 y(dures)h(in)f(the)g(b)q(ound)g(part)
g(call)f(eac)o(h)i(other.)21 b(If)15 b(the)g(size)h(of)e(the)i(shared)f
(table)g(exceeds)224 2588 y(the)h(o\013set)g(address)h(range,)e(or)g
(for)g(calls)f(b)q(et)o(w)o(een)j(separately)e(link)o(ed)g(comp)q(onen)
o(ts)g(the)224 2638 y(link)o(er)e(will)f(in)o(tro)q(duce)i(tramp)q
(oline)d(stubs)j(and)f(rewrite)h(the)g(ob)r(ject)g(co)q(de)g(as)g
(illustrated)224 2688 y(in)g(\014gure)g(3.20.)p eop
%%Page: 77 83
77 82 bop 224 274 a FL(3.3.)31 b(OBJECT)15 b(ORIENTED)f(LANGUA)o(GES,)f
(AND)h(METHOD)h(DISP)m(A)m(TCH)58 b FN(77)287 390 y(Notice)11
b(the)h(rather)g(subtle)g(hierarc)o(h)o(y)g(of)f(binding)f(times)g(in)o
(v)o(olv)o(ed)g(here.)19 b(A)o(t)11 b(compile)224 440
y(time,)16 b(the)i(assem)o(bler)e(will)f(kno)o(w)i(the)g
FK(r)n(elative)g(index)22 b FN(of)16 b(a)h(particular)g(datum)e(within)
224 490 y(the)e(p)q(er-compilation-unit)d FK(table)k(of)f(c)n(ontents)p
FN(.)18 b(A)o(t)13 b(link)e(time,)g(these)j(tables)e(of)g(con)o(ten)o
(ts)224 540 y(will)i(b)q(e)h(merged)g(in)o(to)f(one)h(or)g(more)f
(global)f(o\013set)j(tables.)21 b(The)15 b(link)o(er)g(will)e(b)q(e)j
(able)e(to)224 590 y(compute)g(the)g(absolute)g(index)g(in)o(to)f(the)h
(global)e(table)i(corresp)q(onding)h(to)e(eac)o(h)h(relativ)o(e)224
640 y(index)h(in)f(the)i(constituen)o(t)f(mo)q(dules.)k(The)d(link)o
(er)e(is)g(th)o(us)h(able)g(to)f(\014x)h(up)g(the)g(indexed)224
689 y(accesses)g(b)o(y)d(o)o(v)o(erwriting)g(the)g(ob)r(ject)h(co)q
(de.)19 b(Finally)m(,)10 b(the)i FK(c)n(ontents)17 b
FN(of)11 b(the)i(global)d(table)224 739 y(are)j(determined)f(b)o(y)g
(the)h(loader,)e(when)i(the)g(v)n(arious)e(parts)i(of)e(the)i(program)e
(are)h(loaded.)224 881 y FI(3.3)67 b(Ob)t(ject)21 b(orien)n(ted)i
(languages,)e(and)i(metho)r(d)f(dis-)378 955 y(patc)n(h)224
1056 y FH(3.3.1)56 b(Run)n(time)16 b(p)r(olymorphism)224
1134 y FN(The)j(essence)i(of)d(the)g(ob)r(ject)h(orien)o(ted)g
(programming)c(paradigm,)h(is)i(the)h(creation)g(of)224
1184 y(data)d(ob)r(jects)g(whic)o(h)g(encapsulate)g(b)q(oth)g(state)g
(\(data)f(v)n(alues\))h(and)f(b)q(eha)o(viour)g(\(meth-)224
1234 y(o)q(ds\).)22 b(The)16 b(encapsulation)f(of)f(b)q(eha)o(viour)h
(is)f(in)o(v)n(ariably)f(implemen)o(ted)g(b)o(y)i(asso)q(ciating)224
1283 y(pro)q(cedure)h(v)n(alues)e(with)f(ob)r(jects.)287
1334 y(Most)e(ob)r(ject)h(orien)o(ted)g(languages)f(allo)o(w)f(a)h
(restricted)i(form)c(of)i FK(p)n(olymorphism)p FN(,)g(that)224
1384 y(is)20 b FK(variability)e(of)i(form)p FN(.)34 b(There)21
b(are)e(t)o(w)o(o)g(asp)q(ects)i(of)e(this)g(p)q(olymorphism.)31
b(Firstly)m(,)224 1434 y(there)20 b(is)e(some)f(kind)h(of)g(p)q
(olymorphic)e(assignmen)o(t,)i(in)g(whic)o(h)g(ob)r(jects)h(b)q
(elonging)e(to)224 1484 y(an)o(y)j(subt)o(yp)q(e)h(of)e(a)h(particular)
f(t)o(yp)q(e)i(ma)o(y)d(b)q(e)i(assigned)g(to)g(v)n(ariables)f(of)g
(that)h(t)o(yp)q(e.)224 1533 y(Th)o(us)13 b(for)e(statically)h(t)o(yp)q
(ed)g(languages,)g(v)n(ariables)f(ha)o(v)o(e)h(a)g(t)o(yp)q(e)g(at)g
(run)o(time)f(whic)o(h)h(ma)o(y)224 1583 y(b)q(e)h(some)f(subt)o(yp)q
(e)h(of)f(the)h(statically)e(declared)j(t)o(yp)q(e)e(of)g(the)h(ob)r
(ject.)18 b(Suc)o(h)13 b(p)q(olymorphic)224 1633 y(assignmen)o(t)e(pro)
o(vides)h(an)f(alternativ)o(e)g(to)h(the)g(use)g(of)f(union)g(t)o(yp)q
(es)i(for)e(the)h(construction)224 1683 y(of)i(heterogeneous)i(data)d
(structures.)287 1733 y(The)g(second)g(asp)q(ect)h(of)e(p)q
(olymorphism)d(is)j(the)h(run)o(time)f(dispatc)o(h)h(of)e(metho)q(ds.)
17 b(If)c(a)224 1783 y(named)h(metho)q(d)g(is)g(in)o(v)o(ok)o(ed)g(on)g
(a)g(particular)h(ob)r(ject,)g(then)g(the)g(actual)g(co)q(de)g(whic)o
(h)f(is)224 1833 y(executed)g(is)d(the)g(metho)q(d)g(of)f(that)i(name)e
(whic)o(h)h(is)g(asso)q(ciated)h(with)f(that)g(particular)g(ob-)224
1883 y(ject.)19 b(Th)o(us)13 b(di\013eren)o(t)h(subt)o(yp)q(es)h(of)d
(a)h(particular)g(t)o(yp)q(e)h(ma)o(y)d(ha)o(v)o(e)i(di\013eren)o(t)h
(b)q(eha)o(viours)224 1933 y(asso)q(ciated)h(with)f(the)g(same)f(metho)
q(d)g(name.)287 1983 y(The)j(implemen)o(tatio)o(n)d(of)i(metho)q(d)g
(dispatc)o(h)h(relies)g(on)g(the)g(existence)i(of)d(tables)h(of)224
2033 y(pro)q(cedure)k(v)n(alues,)f(together)g(with)e(some)h(kind)f(of)h
(indexing.)30 b(Since)18 b(eac)o(h)h(t)o(yp)q(e)f(ma)o(y)224
2083 y(ha)o(v)o(e)13 b(a)f(large)h(n)o(um)o(b)q(er)f(of)g(metho)q(ds)g
(de\014ned)i(on)e(it,)h(and)f(there)i(ma)o(y)d(b)q(e)i(a)g(large)f(n)o
(um)o(b)q(er)224 2133 y(of)j(instances)h(of)f(eac)o(h)g(particular)g(t)
o(yp)q(e,)g(some)g(sharing)g(of)f(metho)q(d)g(tables)i(is)f(p)q
(ossible.)224 2182 y(Where)22 b(suc)o(h)f(shared)h(tables)e(exist)h(at)
g(run)o(time,)f(w)o(e)h(shall)f(call)g(the)h(data)f(structure)224
2232 y(whic)o(h)e(con)o(tains)f(them)f(the)i FK(runtime)g(descriptor)p
FN(.)28 b(The)18 b(di\013erences)h(b)q(et)o(w)o(een)g(v)n(arious)224
2282 y(languages,)g(in)f(terms)g(of)g(run)o(time)f(structure,)22
b(come)17 b(do)o(wn)h(to)h(di\013eren)o(t)g(metho)q(ds)f(of)224
2332 y(indexing)c(in)o(to)f(these)i(metho)q(d)e(tables.)224
2444 y FO(Classes)j(and)f(t)o(yp)q(es)224 2522 y FN(The)d(use)h(of)d
(the)i(terms)g FK(class)i FN(and)e FK(typ)n(e)s FN(,)f(and)h(consequen)
o(tly)g(sub)q(class)g(and)g(subt)o(yp)q(e,)g(dif-)224
2572 y(fer)h(from)d(language)h(to)h(language.)k(Ho)o(w)o(ev)o(er)d
(here)g(w)o(e)f(adopt)g(the)g(follo)o(wing)e(de\014nitions)1647
2557 y Fz(9)p 224 2610 577 2 v 271 2636 a Fy(9)288 2648
y Fx(F)m(or)k(the)f(sak)o(e)g(of)h(simplicit)o(y)m(,)e(w)o(e)j(refer)e
(here)g(to)g(a)h(class)g(system)e(in)i(whic)o(h)g(ev)o(ery)e(class)i
(con)o(tains)224 2688 y(all)d(features)e(of)i(ev)o(ery)f(sup)q
(erclass.)j(W)m(e)f(also)e(mak)o(e)g(the)h(assumption)d(that)i(all)h
(ob)r(jects)e(of)i(a)h(giv)o(en)d(class)p eop
%%Page: 78 84
78 83 bop 224 274 a FN(78)562 b FL(CHAPTER)14 b(3.)32
b(R)o(UNTIME)13 b(OR)o(GANIZA)m(TION)287 390 y Ft(\017)20
b FN(a)c FO(class)f FN(is)h(an)f(abstract)i(ob)r(ject,)f(whic)o(h)g(sp)
q(eci\014es)i(a)d(particular)h(set)h(of)e FK(fe)n(atur)n(es)s
FN(,)328 440 y(including)c(data)h(\014elds)h(and)f(metho)q(ds)f(whic)o
(h)h(are)h(b)q(ound)f(to)g(ob)r(jects)h(of)f(that)g(class)287
526 y Ft(\017)20 b FN(a)g FO(sub)q(class)e FN(is)i(a)g(class)g(whic)o
(h)g(is)g(related)h(to)f(another)g(class,)i(the)e FK(sup)n(er)n(class)p
FN(,)328 576 y(b)o(y)g(extension.)36 b(That)19 b(is,)i(ev)o(ery)f(ob)r
(ject)h(of)e(the)h(sub)q(class)h(con)o(tains)e(all)g(of)g(the)328
625 y(features)d(of)f(the)h(sup)q(erclass)h(including)d(\(p)q(ossibly)h
(di\013eren)o(t\))h(metho)q(ds)f(with)g(the)328 675 y(same)e(names)287
761 y Ft(\017)20 b FN(a)14 b FO(t)o(yp)q(e)f FN(is)h(a)f(\014nite)h
(set)h(of)e(classes)287 846 y Ft(\017)20 b FN(a)14 b
FO(subt)o(yp)q(e)e FN(is)h(an)o(y)h(prop)q(er)h(subset)g(of)e(a)h(t)o
(yp)q(e)287 932 y Ft(\017)20 b FN(a)14 b FO(ob)s(ject)e
FN(is)i(an)f(instance)i(of)e(a)h(class)224 1017 y(Ob)r(jects)h(are)e
(th)o(us)g(data.)k(Ev)o(ery)c(ob)r(ject)h(has)f(a)f(class,)h(and)f(ma)o
(y)f(b)q(elong)h(to)h(one)g(or)f(more)224 1067 y(t)o(yp)q(es)j(whic)o
(h)f(con)o(tain)f(that)h(class)h(in)e(their)h(de\014ning)g(set.)287
1117 y(The)19 b(relationship)g(b)q(et)o(w)o(een)h(t)o(yp)q(es)h(and)e
(their)g(subt)o(yp)q(es,)i(and)e(classes)i(and)e(their)224
1167 y(sub)q(classes)i(are)e(indep)q(enden)o(t.)33 b(Ho)o(w)o(ev)o(er)
19 b(most)e(ob)r(ject)i(orien)o(ted)g(languages)f(use)i(the)224
1217 y(same)15 b(syn)o(tactic)i(mec)o(hanisms)d(to)h(de\014ne)i(b)q
(oth,)f(or)g(p)q(erhaps)h(do)f(not)f(ev)o(en)i(distinguish)224
1266 y(b)q(et)o(w)o(een)f(the)e(t)o(w)o(o)g(concepts.)287
1317 y(Nev)o(ertheless,)21 b(from)16 b(the)j(p)q(oin)o(t)f(of)f(view)h
(of)g(implem)o(en)o(tation)d(of)j(ob)r(ject)h(orien)o(ted)224
1367 y(dispatc)o(h,)g(it)f(is)g(helpful)f(to)h(think)g(of)f(a)h(t)o(yp)
q(e)h(as)f(b)q(eing)g(a)f(particular)h(class,)h(together)224
1417 y(with)c(all)f(of)h(the)h(sub)q(classes)h(of)e(that)g(class.)22
b(In)16 b(this)f(case,)h(from)d(the)j(ab)q(o)o(v)o(e)f(de\014nition,)
224 1466 y(w)o(e)k(ma)o(y)d(b)q(e)j(sure)g(that)f(ev)o(ery)h(ob)r(ject)
g(of)f(that)g(class)h(con)o(tains)f(a)g(subset)h(of)f(metho)q(ds)224
1516 y(whic)o(h)c(exist)g(for)g(ev)o(ery)h(class)f(in)f(the)i(t)o(yp)q
(e.)224 1636 y FH(3.3.2)56 b(Languages)18 b(with)h(single)f
(inheritance)224 1713 y FN(Languages)g(in)g(whic)o(h)f(classes)i(ma)o
(y)d(b)q(e)j(de\014ned)g(as)f(sub)q(classes)h(of)f(a)f(single)h(class)g
(are)224 1763 y(said)f(to)g(ha)o(v)o(e)g FK(single)g(inheritanc)n(e)s
FN(.)28 b(In)17 b(suc)o(h)h(languages)e(the)i(class)f(structure)j(ma)o
(y)15 b(b)q(e)224 1813 y(represen)o(ted)i(b)o(y)c(trees,)i(with)e(ev)o
(ery)i(class)f(p)q(ossessing)g(a)g(single)f(paren)o(t)h(class,)g(whic)o
(h)f(w)o(e)224 1863 y(call)h(the)g(sup)q(erclass.)287
1913 y(With)g(single)g(inheritance)h(it)f(follo)o(ws)f(that)h(ev)o(ery)
i(ob)r(ject)f(of)f(a)g(particular)g(class)h(has)224 1963
y(\(at)k(least\))f(the)h(same)f(features)h(as)f(its)h(single)f(sup)q
(erclass.)33 b(In)18 b(particular,)g(ob)r(jects)i(of)224
2013 y(a)g(sub)q(class)i(ma)o(y)c(de\014ne)k(new)f(metho)q(d)e(names,)i
(but)f(they)h(will)e(necessarily)j(con)o(tain)224 2063
y(metho)q(ds)14 b(with)f(the)i(same)e(names)g(as)h(the)g(metho)q(ds)g
(of)f(the)i(sup)q(erclass.)287 2113 y(The)10 b(implemen)o(tation)d(of)i
(metho)q(d)h(dispatc)o(h)g(in)g(suc)o(h)g(cases)i(is)e(simple.)15
b(The)c(reason)f(is)224 2163 y(that)j(w)o(e)h(ma)o(y)d(assign)i
(\014xed)g(o\013sets)h(to)f(particular)g(metho)q(d)f(names)g(at)h
(compile)e(time.)17 b(If)224 2213 y(a)12 b(class)g(has)g(sev)o(eral)h
(sub)q(classes,)g(then)g(an)o(y)e(additional)f(metho)q(ds)h(of)h(the)g
(sub)q(classes)i(will)224 2263 y(ha)o(v)o(e)g(higher)f(o\013sets)i(in)e
(the)g(descriptor)i(then)f(the)g(metho)q(d)f(names)f(whic)o(h)h(are)h
(common)224 2313 y(to)k(all.)27 b(Giv)o(en)17 b(this)g(prop)q(ert)o(y)m
(,)h(w)o(e)g(ma)o(y)e(pro)q(duce)i(co)q(de)g(to)g(index)f(in)o(to)g
(the)h(tables)f(at)224 2362 y(compile)e(time.)23 b(Figure)17
b(3.21)d(sho)o(ws)j(a)f(p)q(ossible)g(run)o(time)f(structure)k(for)c
(ob)r(jects)j(with)224 2412 y(shared)d(metho)q(d)e(tables.)287
2463 y(In)d(this)g(\014gure,)h(three)g(ob)r(jects)g(are)g(sho)o(wn)f
(on)g(the)h(left,)f(t)o(w)o(o)f(of)h(the)g(same)g(class)g
FM(T)c FN(,)k(and)224 2512 y(a)16 b(third)f(of)g(class)h
FM(T)6 b FN(1.)23 b(All)15 b(ob)r(jects)i(con)o(tain)e(an)g(unnamed)g
(\014eld)h(whic)o(h)f(references)k(the)224 2562 y(run)o(time)12
b(class)i(descriptor,)g(whic)o(h)f(in)g(turn)h(encapsulates)g(the)g
(metho)q(d)e(dispatc)o(h)i(table.)224 2612 y(It)i(is)f(assumed)g(that)g
FM(T)6 b FN(1)15 b(is)g(a)g(sub)q(class)h(of)f FM(T)6
b FN(,)15 b(so)h(that)f(the)h(t)o(w)o(o)f(classes)h(ha)o(v)o(e)f
(common)p 224 2649 577 2 v 224 2688 a Fx(share)c(the)g(same)f(represen)
o(tatio)o(n.)i(W)m(e)g(therefore)d(refer)h(to)i(monotone,)c(represen)o
(tatio)o(nal)g(classes.)p eop
%%Page: 79 85
79 84 bop 224 274 a FL(3.3.)31 b(OBJECT)15 b(ORIENTED)f(LANGUA)o(GES,)f
(AND)h(METHOD)h(DISP)m(A)m(TCH)58 b FN(79)270 349 y
 21313290 13156352 0 0 21313290 13156352 startTexFig
 270
349 a
%%BeginDocument: dispatch1.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-49.0 234.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Polyline
n 139 79 m 139 39 l  99 39 l  99 79 l  clp gs col-1 s gr
% Polyline
n 139 159 m 139 119 l  99 119 l  99 159 l  clp gs col-1 s gr
% Polyline
n 139 259 m 139 199 l  99 199 l  99 259 l  clp gs col-1 s gr
% Polyline
n 279 119 m 279 39 l  239 39 l  239 119 l  clp gs col-1 s gr
% Polyline
n 279 259 m 279 159 l  239 159 l  239 259 l  clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 279 249 m 279 239 l  239 239 l  239 249 l  clp gs 0.95 setgray fill gr
gs col-1 s gr
% Polyline
n 279 109 m 279 99 l  239 99 l  239 109 l  clp gs 0.95 setgray fill gr
gs col-1 s gr
% Polyline
n 269 104 m 329 104 l gs 0.95 setgray fill gr
gs col-1 s gr
n 321.000 102.000 m 329.000 104.000 l 321.000 106.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 269 244 m 329 244 l gs 0.95 setgray fill gr
gs col-1 s gr
n 321.000 242.000 m 329.000 244.000 l 321.000 246.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 329 104 m 339 104 l gs 0.95 setgray fill gr
gs col-1 s gr
n 331.000 102.000 m 339.000 104.000 l 331.000 106.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 329 244 m 339 244 l gs 0.95 setgray fill gr
gs col-1 s gr
n 331.000 242.000 m 339.000 244.000 l 331.000 246.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 239 229 m 279 229 l gs col-1 s gr
% Polyline
n 239 219 m 279 219 l gs col-1 s gr
% Polyline
n 239 209 m 279 209 l gs col-1 s gr
% Polyline
n 239 89 m 279 89 l gs col-1 s gr
% Polyline
n 239 79 m 279 79 l gs col-1 s gr
% Polyline
n 139 79 m 139 69 l  99 69 l  99 79 l  clp gs 0.95 setgray fill gr
gs col-1 s gr
% Polyline
n 139 159 m 139 149 l  99 149 l  99 159 l  clp gs 0.95 setgray fill gr
gs col-1 s gr
% Polyline
n 139 259 m 139 249 l  99 249 l  99 259 l  clp gs 0.95 setgray fill gr
gs col-1 s gr
% Open spline
n 129.000 74.000 m 144.000 74.000 l
	144.000 74.000 159.000 74.000 169.000 74.000 DrawSplineSection
	169.000 74.000 179.000 74.000 179.000 86.500 DrawSplineSection
	179.000 86.500 179.000 99.000 179.000 109.000 DrawSplineSection
	179.000 109.000 179.000 119.000 206.500 119.000 DrawSplineSection
	234.000 119.000 l gs col-1 s gr
% Open spline
n 129.000 154.000 m 144.000 154.000 l
	144.000 154.000 159.000 154.000 169.000 154.000 DrawSplineSection
	169.000 154.000 179.000 154.000 179.000 136.500 DrawSplineSection
	179.000 136.500 179.000 119.000 189.000 119.000 DrawSplineSection
	189.000 119.000 199.000 119.000 216.500 119.000 DrawSplineSection
	234.000 119.000 l gs col-1 s gr
n 226.000 117.000 m 234.000 119.000 l 226.000 121.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 129.000 254.000 m 139.000 254.000 l
	139.000 254.000 149.000 254.000 191.500 256.500 DrawSplineSection
	234.000 259.000 l gs col-1 s gr
n 226.131 256.534 m 234.000 259.000 l 225.896 260.527 l gs 2 setlinejoin col-1 s gr
/Times-Italic findfont 10.00 scalefont setfont
349 109 m 
gs 1 -1 scale (Draw\(\) ) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
349 244 m 
gs 1 -1 scale (Draw\(\) ) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
384 109 m 
gs 1 -1 scale (method) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
384 244 m 
gs 1 -1 scale (method) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
284 169 m 
gs 1 -1 scale (method table) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
284 49 m 
gs 1 -1 scale (method table ) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
54 224 m 
gs 1 -1 scale (object of) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
54 139 m 
gs 1 -1 scale (object of) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
54 59 m 
gs 1 -1 scale (object of) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
59 149 m 
gs 1 -1 scale (class T) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
59 69 m 
gs 1 -1 scale (class T) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
54 234 m 
gs 1 -1 scale (class T1) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
289 59 m 
gs 1 -1 scale (for class T) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
289 179 m 
gs 1 -1 scale (for class T1) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
359 119 m 
gs 1 -1 scale (for class T) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
354 254 m 
gs 1 -1 scale (for class T1) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 224 1274 a FN(Figure)18 b(3.21:)25 b(Metho)q(d)18 b(dispatc)o(h)g(in)f
(language)g(with)g(single)g(inheritance)i(and)e(shared)224
1323 y(metho)q(d)c(tables)224 1450 y(metho)q(d)i(names,)f(including)g
(a)g(metho)q(d)h(called)f FK(Dr)n(aw)p FN(.)21 b(The)16
b(t)o(w)o(o)f(metho)q(d)f(tables)h(place)224 1500 y(corresp)q(onding)j
(metho)q(ds)d(at)i(the)f(same)g(table)g(o\013sets.)26
b(In)17 b(order)g(to)f(access)i(the)f FK(Dr)n(aw)224
1550 y FN(metho)q(d)e(of)g(an)o(y)g(ob)r(ject)i(of)e(a)g(class)h(b)q
(elonging)f(to)g(the)h(t)o(yp)q(e,)g(the)h(steps)f(are)g(the)h(same:)
224 1600 y(follo)o(w)11 b(the)i(hidden)g(p)q(oin)o(ter)g(to)g(the)g
(class)g(descriptor,)h(go)e(to)g(the)i(kno)o(wn)e(o\013set)i(and)e
(call)224 1650 y(the)j(pro)q(cedure)h(v)n(alue)d(found)g(there.)224
1772 y FH(3.3.3)56 b(Languages)18 b(with)h(m)n(ultiple)d(inheritance)
224 1850 y FN(Languages)i(with)f(m)o(ultiple)e(inheritance)j(allo)o(w)e
(the)i(de\014nition)e(of)h(a)g(class)h(whic)o(h)f(is)h(a)224
1900 y(sub)q(class)h(of)f(more)f(than)h(one)g(sup)q(erclass.)32
b(Di\013eren)o(t)18 b(languages)g(attac)o(h)g(detailed)g(se-)224
1950 y(man)o(tics)e(to)h(suc)o(h)g(m)o(ultiple-paren)o(t)e(classes)j
(in)e(sev)o(eral)i(di\013eren)o(t)f(w)o(a)o(ys.)27 b(Here)18
b(w)o(e)f(are)224 2000 y(only)d(concerned)h(with)f(the)g(issue)h(of)e
(ob)r(ject)i(orien)o(ted)f(dispatc)o(h)g(in)g(suc)o(h)h(languages.)287
2051 y(The)i(di\016cult)o(y)f(is)h(that)g(it)g(is)g(no)g(longer)g(p)q
(ossible)g(to)g(ensure)h(that)g(the)f(o\013set)h(of)f(a)224
2101 y(particular)c(named)f(metho)q(d)g(is)g(the)i(same)e(in)g(a)h
(class)g(and)g(all)e(of)h(its)h(descendan)o(ts.)20 b(Th)o(us)224
2151 y(a)c(more)f(complicated)g(w)o(a)o(y)h(of)f(na)o(vigating)f(metho)
q(d)i(tables)g(m)o(ust)f(b)q(e)i(used.)25 b(F)m(or)16
b(some)224 2200 y(languages)e(this)g(requires)h(a)e(second)i(lev)o(el)f
(of)f(indirection.)287 2251 y(An)f(alternativ)o(e)f(implemen)o(tation)e
(concept)k(to)f(that)g(of)f(using)h(class)g(descriptors)i(also)224
2301 y(comes)j(in)o(to)f(con)o(ten)o(tion)g(in)h(these)h(cases.)27
b(View)o(ed)17 b(at)g(the)g(most)f(basic)h(lev)o(el,)f(metho)q(d)224
2351 y(dispatc)o(h)j(consists)h(of)e(querying)h(the)g(run)o(time)e
(class)j(of)e(an)g(ob)r(ject,)i(and)f(accessing)h(a)224
2401 y(table)14 b(whic)o(h)g(maps)f(from)f(class)i(and)g(metho)q(d)f
(name)f(to)i(pro)q(cedure)i(v)n(alue.)512 2494 y(Dispatc)o(hT)m(ab)11
b(:)g(Class)e Ft(\002)h FN(Name)g Ft(!)h FN(Pro)q(cedureV)m(alue)224
2588 y(Of)16 b(course,)i(this)e(mapping)d(is)j(v)o(ery)g(sparse,)i(so)e
(that)g(some)f(kind)g(of)g(fast,)h(sparse)h(table)224
2638 y(lo)q(okup)g(data)g(structure)j(is)d(required.)30
b(The)18 b(metho)q(d)f(also)f(requires)j(that)f(classes)g(and)224
2688 y(names)c(b)q(e)i(iden)o(ti\014ed)f(b)o(y)f(a)h(globally)d(unique)
j(denotation,)g(a)f(requiremen)o(t)h(whic)o(h)g(do)q(es)p
eop
%%Page: 80 86
80 85 bop 224 274 a FN(80)562 b FL(CHAPTER)14 b(3.)32
b(R)o(UNTIME)13 b(OR)o(GANIZA)m(TION)224 390 y FN(not)e(\014t)g(w)o
(ell)g(with)f(separate)j(compilation)8 b(of)i(classes.)18
b(Nev)o(ertheless,)c(suc)o(h)e(sc)o(hemes)f(ma)o(y)224
440 y(b)q(e)k(made)d(quite)i(e\016cien)o(t,)f(particularly)g(when)h
(they)g(use)h(a)e(metho)q(d)g(cac)o(he)h(whic)o(h)g(tak)o(es)224
490 y(adv)n(an)o(tage)f(of)h(a)f(sort)i(of)e(\\lo)q(calit)o(y)f(of)h
(reference".)224 625 y FI(3.4)67 b(Error)23 b(handling)i(and)e
(exceptions)224 724 y FH(3.4.1)56 b(What)18 b(is)h(an)g(exception)224
801 y FN(An)c(exception)f(is)g(an)g(abnormal)e(ev)o(en)o(t)j(whic)o(h)f
(o)q(ccurs)h(during)f(the)g(execution)h(of)f(a)f(pro-)224
850 y(gram,)f(whic)o(h)h(prev)o(en)o(ts)i(the)f(program)e(from)f(con)o
(tin)o(uing)i(in)g(its)g(normal)e(state.)19 b(The)14
b(act)224 900 y(of)g(signalling)f(the)i(detection)g(of)f(suc)o(h)h(an)f
(abnormal)e(state)k(is)e(called)g FK(r)n(aising)h(an)h(exc)n(ep-)224
950 y(tion)p FN(.)27 b(An)o(y)16 b(attempt)g(whic)o(h)h(the)g(program)e
(or)i(run)o(time)e(system)i(mak)o(e)e(to)i(resp)q(ond)g(to)224
1000 y(the)d(exception,)g(b)o(y)g(terminating)d(the)j(program)e(in)h
(an)g(orderly)h(fashion)f(for)g(example,)e(is)224 1050
y(called)j FK(hand)r(ling)i(the)f(exc)n(eption)p FN(.)287
1100 y(Exceptions,)21 b(in)e(general)g(ha)o(v)o(e)g(three)i(di\013eren)
o(t)f(sources.)36 b(There)20 b(are)g(exceptions)224 1149
y(whic)o(h)13 b(are)h(detected)h(b)o(y)e(the)g(hardw)o(are)g(of)g(the)g
(underlying)g(mac)o(hine.)j(Most)e(mac)o(hines,)224 1199
y(for)d(example,)f(raise)h(an)f(exception)i(if)e(an)h(attempt)f(is)g
(made)g(to)h(p)q(erform)f(a)g(whole)h(n)o(um)o(b)q(er)224
1249 y(division)i(with)h(a)g(zero)i(divisor.)i(Exceptions)e(ma)o(y)c
(also)i(b)q(e)h(signalled)e(b)o(y)h(co)q(de)h(whic)o(h)f(is)224
1299 y(implicitly)d(pro)q(duced)k(b)o(y)e(the)h(compiler,)e(as)i(sp)q
(eci\014ed)h(b)o(y)e(the)i(seman)o(tics)e(of)g(the)h(source)224
1349 y(language.)19 b(F)m(or)14 b(example,)f(if)g(an)h(attempt)g(is)g
(made)g(to)g(assign)g(an)g(out-of-range)g(in)o(teger)224
1398 y(to)i(a)f(subrange)h(v)n(ariable)e(in)h FK(Pasc)n(al)5
b FN(-family)12 b(languages,)j(then)h(an)f(exception)h(is)f(raised.)224
1448 y(Finally)m(,)9 b(man)o(y)f(languages)h(pro)o(vide)h(for)f(user)i
(co)q(de)g(to)f(explicitly)f(raise)h(exceptions,)i(using)224
1498 y(syn)o(tactic)j(constructs)h(suc)o(h)e(as)g(|)367
1574 y FG(IF)f FK(Bo)n(ole)n(an-expr)n(ession)i FG(THEN)21
b(Exceptions.RAISE\()o FK(exc)n(eption-id)t FG(\);)224
1651 y FN(Some)c(systems)g(ma)o(y)f(ha)o(v)o(e)h(hardw)o(are)h(whic)o
(h)f(detects)i(an)f(exception)g(that)f(other)h(ma-)224
1700 y(c)o(hines)d(only)e(detect)j(using)d(explicit)h(tests)h(in)e(the)
i(ob)r(ject)f(co)q(de.)19 b(As)14 b(an)g(example,)e(man)o(y)224
1750 y FK(RISC)20 b FN(mac)o(hines)11 b(ha)o(v)o(e)i(instructions)g
(whic)o(h)g(trap)g(in)o(teger)g(o)o(v)o(er\015o)o(ws,)g(but)g(require)h
(soft-)224 1800 y(w)o(are)f(tests)h(to)e(detect)h(unsigned)g(o)o(v)o
(er\015o)o(ws.)18 b(Other)13 b(mac)o(hines)e(are)i(capable)f(of)g
(trapping)224 1850 y(either)17 b(signed)g(or)f(unsigned)g(o)o(v)o
(er\015o)o(ws.)25 b(As)16 b(an)g(ideal,)g(the)g(p)q(ossible)h(resp)q
(onses)h(of)e(the)224 1900 y(run)o(time)g(en)o(vironmen)o(t)g(to)g
(exceptions)i(raised)f(from)e(an)o(y)h(one)h(of)f(these)j(three)f
(sources)224 1949 y(should)c(b)q(e)h(iden)o(tical.)287
1999 y(Man)o(y)i(exceptions)i(are)f(caused)g(b)o(y)g(errors,)h(either)g
(in)e(the)h(co)q(de)g(of)f(the)i(executing)224 2049 y(program,)11
b(or)g(b)o(y)h(erroneous)h(data.)k(Th)o(us)12 b(m)o(uc)o(h)e(exception)
j(handling)d(amoun)o(ts)h(to)g(error)224 2099 y(handling)k(of)g(one)h
(kind)f(or)g(another.)24 b(A)16 b(full)e(discussion)i(of)f(the)i(p)q
(ossible)f(resp)q(onses)h(to)224 2149 y(the)12 b(raising)f(of)f(an)h
(exception)h(is)f(b)q(ey)o(ond)h(our)f(scop)q(e)h(here,)h(except)f(for)
f(the)h(impact)d(whic)o(h)224 2198 y(this)14 b(has)g(on)g(run)o(time)f
(organization.)287 2248 y(In)20 b(general,)h(when)f(an)g(exception)h
(is)e(raised,)j(the)e(run)o(time)f(system)h(attempts)f(to)224
2298 y(regain)d(con)o(trol)f(of)g(execution,)i(and)e(pass)i(con)o(trol)
e(to)h(an)f FK(exc)n(eption)i(hand)r(ler)p FN(.)24 b(The)16
b(ex-)224 2348 y(ception)j(handler)f(is)f(resp)q(onsible)i(for)f(p)q
(erforming)e(an)o(y)i(corrections)h(whic)o(h)f(are)g(to)g(b)q(e)224
2398 y(attempted)12 b(b)q(efore)h(resuming)e(normal)f(execution,)i(or)g
(to)g(terminate)f(the)i(program)d(in)i(an)224 2448 y(orderly)i
(fashion.)224 2561 y FH(3.4.2)56 b(Thro)n(wing)19 b(and)g(catc)n(hing)
224 2638 y FN(In)h(order)g(to)g(discuss)h(the)f(mec)o(hanisms)d(of)i
(exception)i(handling,)e(it)g(is)h(necessary)h(to)224
2688 y(settle)16 b(on)f(some)f(kind)g(of)g(underlying)h(primitiv)o(e)d
(op)q(erations)j(from)e(whic)o(h)i(the)g(detailed)p eop
%%Page: 81 87
81 86 bop 224 274 a FL(3.4.)31 b(ERR)o(OR)13 b(HANDLING)h(AND)g(EX)o
(CEPTIONS)511 b FN(81)224 390 y(b)q(eha)o(viour)17 b(sp)q(eci\014ed)h
(for)f(di\013eren)o(t)h(languages)e(ma)o(y)f(b)q(e)i(constructed.)29
b(Here)18 b(w)o(e)f(shall)224 440 y(assume)c(just)g(three)i(common)10
b(c)o(haracteristics)15 b(of)e(the)g(exception)h(handling)e(mo)q(del)g
(with)224 490 y(whic)o(h)i(w)o(e)g(deal)g(|)287 583 y
Ft(\017)20 b FO(Static)e(asso)q(ciation)g(of)i(handlers)d(with)i
(regions.)27 b FN(Ev)o(ery)18 b(exception)g(han-)328
633 y(dling)12 b(con)o(text)i(is)e(statically)g(asso)q(ciated)i(with)e
(a)h(certain)h(region)e(of)g(program)g(exe-)328 682 y(cution,)j
(usually)f(a)g(comp)q(ound)g(statemen)o(t)h(or)f(an)h(en)o(tire)g(pro)q
(cedure)i(b)q(o)q(dy)m(.)j(This)328 732 y(\\protected)12
b(region")e(is)g(called)g(the)h FK(try-blo)n(ck)t FN(.)16
b(Eac)o(h)11 b(suc)o(h)g(blo)q(c)o(k)f(has)h(an)f FK(exc)n(eption)328
782 y(hand)r(ler)19 b FN(asso)q(ciated)14 b(with)g(it)287
878 y Ft(\017)20 b FO(Automatic)9 b(propagation)g(to)h(the)g(caller.)16
b FN(In)10 b(the)g(ev)o(en)o(t)h(that)e(the)i(co)q(de)f(whic)o(h)328
928 y(raises)16 b(the)g(exception)g(is)g(not)f(statically)g(within)f(a)
h(try-blo)q(c)o(k,)h(con)o(trol)f(passes)h(to)328 977
y(the)g(exception)h(handling)d(con)o(text)j(of)e(the)h(caller)f(of)g
(the)i(co)q(de)f(whic)o(h)g(raised)g(the)328 1027 y(exception.)26
b(In)16 b(the)h(ev)o(en)o(t)g(that)g(there)g(is)f(no)h(exception)g
(handler)f(in)g(the)h(calling)328 1077 y(con)o(text,)g(con)o(trol)f
(passes)h(to)f(the)h(exception)f(handling)f(con)o(text)i(of)e(the)i
(caller)f(of)328 1127 y(the)f(caller,)e(and)h(so)g(on)287
1223 y Ft(\017)20 b FO(Non-resumption)e(seman)o(tics.)31
b FN(After)20 b(a)e(handler)h(has)g(completed,)h(con)o(trol)328
1272 y(do)q(es)g(not)f(con)o(tin)o(ue)g(in)f(the)i(raising)e(co)q(de.)
34 b(Rather,)19 b(con)o(trol)g(con)o(tin)o(ues)g(either)328
1322 y(from)12 b(the)j(end)f(of)f(the)i(try-blo)q(c)o(k,)e(or)h(at)g
(some)f(explicitly)g(sp)q(eci\014ed)i(retry)g(p)q(oin)o(t)224
1415 y(The)20 b(languages)f(whic)o(h)g(\014t)g(this)h(c)o
(haracteristic)g(include)g FK(A)n(da)s FN(,)g FK(Mo)n(dula-3)6
b FN(,)20 b FG(C++)p FN(,)g FK(Eif-)224 1465 y(fel,)e(Sather)k
FN(and)c(ISO-)p FK(Mo)n(dula-2)6 b FN(.)28 b(Of)18 b(course,)h(what)e
(happ)q(ens)h(inside)g(the)g(exception)224 1515 y(handlers)e(for)f
(these)i(v)n(arious)e(languages)g(is)g(quite)g(di\013eren)o(t.)24
b(What)15 b(w)o(e)h(are)f(concerned)224 1564 y(with)f(here)g(is)f(ho)o
(w)h(con)o(trol)f(passes)i(from)c(co)q(de)k(of)d(the)i(raiser)g(to)g
(the)g(en)o(try)g(p)q(oin)o(t)f(of)g(the)224 1614 y(asso)q(ciated)i
(handler)558 1599 y Fz(10)593 1614 y FN(.)287 1667 y(All)f(of)g(these)i
(languages)e(ha)o(v)o(e)h(exception)h(handling)d(mo)q(dels)h(whic)o(h)h
(allo)o(w)e(the)i(def-)224 1717 y(inition)f(of)g(exception)h(handling)e
(clauses)j(in)e(the)h(syn)o(tax)g(of)f(the)h(program)e(source)j(co)q
(de.)224 1767 y(When)g(an)g(exception)g(is)g(raised,)g(the)g(exception)
g(is)g(said)f(to)h(b)q(e)g FK(thr)n(own)p FN(.)23 b(Con)o(trol)15
b(then)224 1817 y(passes)21 b(to)f(the)g(exception)g(handling)e(clause)
i(of)f(the)h(nearest)h(dynamically)16 b(enclosing)224
1866 y(pro)q(cedure)g(with)e(a)f(handler.)19 b(The)14
b(handler)g(is)g(said)f(to)h FK(c)n(atch)j FN(the)e(exception)287
1919 y(Note)g(that)g(the)h(asso)q(ciation)e(b)q(et)o(w)o(een)i(the)g(p)
q(oin)o(t)e(of)h(raising)f(of)g(the)i(exception)f(and)224
1969 y(the)j(handler)e(is)h FK(dynamic)r FN(,)g(rather)h(than)e(dep)q
(ending)h(on)g(the)g(static)g(syn)o(tactic)g(nesting)224
2019 y(structure)j(of)d(the)h(co)q(de.)30 b(This)17 b(mak)o(es)g(go)q
(o)q(d)g(sense,)i(as)f(it)f(turns)i(out.)28 b(As)18 b(a)g(famili)o(ar)
224 2069 y(example)12 b(supp)q(ose)h(that)g(w)o(e)g(wish)f(to)h(fold)e
(constan)o(t)i(arithmetic)f(in)g(the)h(static)g(seman)o(tic)224
2119 y(analysis)k(phase)h(of)e(a)h(compiler.)27 b(Immediately)14
b(w)o(e)k(are)g(faced)f(with)g(a)g(dilemma.)25 b(W)m(e)224
2168 y(cannot)14 b(allo)o(w)e(the)i(compiler)e(to)h(coredump)g(with)g
(an)g(o)o(v)o(er\015o)o(w)g(exception)h(just)g(b)q(ecause)224
2218 y(it)e(is)g(compiling)d(co)q(de)j(with)g(an)f(out)h(of)f(range)h
(expression.)19 b(Instead)13 b(w)o(e)f(wish)f(to)h(pro)q(duce)224
2268 y(an)k(error)g(message)g(for)f(the)h(user,)h(and)e(con)o(tin)o(ue)
h(with)f(the)h(seman)o(tic)f(analysis.)22 b(There)224
2318 y(are)15 b(t)o(w)o(o)e(approac)o(hes)i(to)f(this)f(goal.)287
2371 y(W)m(e)j(migh)o(t)f(pro)q(duce)j(an)e(arithmetic)g(mo)q(dule)f
(whic)o(h)i(exp)q(orts)h(the)f(arithmetic)f(op-)224 2421
y(erations,)f(and)g(p)q(erforms)f(su\016cien)o(t)i(tests)g(to)f
(determine)g(from)e(the)i(op)q(erands)h(whether)224 2471
y(or)h(not)g(an)g(o)o(v)o(er\015o)o(w)f(will)f(o)q(ccur.)28
b(Ev)o(ery)18 b(pro)q(cedure)h(of)d(the)h(mo)q(dule)f(w)o(ould)g
(return)i(a)224 2520 y(Bo)q(olean)f(v)n(ariable)e(parameter,)i(allo)o
(wing)d(an)j(appropriate)g(error)g(message)g(to)f(b)q(e)h(pro-)224
2570 y(duced.)p 224 2610 577 2 v 255 2636 a Fy(10)288
2648 y Fx(Note)10 b(that)g(issues)f(whic)o(h)h(ha)o(v)o(e)f(to)i(do)f
(with)g(concurrency)l(,)e(and)i(async)o(hrono)o(us)e(signals)h(are)h
(orthog-)224 2688 y(onal)h(to)g(the)g(\015o)o(w)g(of)g(con)o(trol)f
(matters)g(considered)e(here.)p eop
%%Page: 82 88
82 87 bop 224 274 a FN(82)562 b FL(CHAPTER)14 b(3.)32
b(R)o(UNTIME)13 b(OR)o(GANIZA)m(TION)287 390 y FN(Alternativ)o(ely)m(,)
18 b(w)o(e)g(migh)o(t)f(simply)f(go)i(ahead)g(and)h(p)q(erform)e(the)i
(arithmetic,)f(but)224 440 y(place)12 b(an)e(exception)i(handler)f(in)f
(the)i(pro)q(cedure)h(whic)o(h)d(calls)h(the)g(expression)i(ev)n
(aluator.)224 490 y(The)i(handler)f(can)g(catc)o(h)h(the)f(exception)h
(thro)o(wn)f(b)o(y)g(the)g(o)o(v)o(er\015o)o(w,)g(pro)q(duce)h(the)f
(error)224 540 y(message,)g(and)g(then)h(pro)q(ceed)g(with)f(seman)o
(tic)g(analysis)f(of)g(the)i(next)g(expression.)20 b(Note)224
590 y(that)13 b(it)g(is)g(not)g(the)g(pro)q(cedure)i(whic)o(h)e(raises)
h(the)g(error)g(whic)o(h)e(p)q(erforms)h(the)h(exception)224
640 y(handling)9 b(and)h(writes)h(the)g(error)g(message.)16
b(The)11 b(raising)e(pro)q(cedure)j(ma)o(y)c(b)q(e)j(called)f(from)224
689 y(sev)o(eral)h(di\013eren)o(t)g(places)g(in)f(the)g(compiler,)f
(and)h(w)o(e)h(migh)o(t)d(wish)i(for)g(the)g(same)g(exception)224
739 y(to)16 b(ha)o(v)o(e)g(di\013eren)o(t)h(outcomes)f(dep)q(ending)g
(on)g(the)h(con)o(text.)25 b(Th)o(us)16 b(w)o(e)h(ha)o(v)o(e)e(a)h
(general)224 789 y(abstraction)f(principle:)k(only)13
b(the)i(pro)q(cedure)h(raising)e(the)g(exception)h(kno)o(ws)g(what)f
(the)224 839 y(exception)19 b(is,)f(but)f(only)g(the)h(caller)g(of)f
(the)h(pro)q(cedure)h(kno)o(ws)f(what)f(an)g(appropriate)224
889 y(resp)q(onse)f(is)e(in)f(an)o(y)h(particular)f(case.)287
939 y(It)c(is)h(usual)f(for)h(an)f(exception)i(handler)f(to)f(share)i
(the)f(namespace)g(of)f(the)h(pro)q(cedure)i(in)224 989
y(whic)o(h)f(it)f(is)h(em)o(b)q(edded.)17 b(Th)o(us)11
b(the)g(b)q(o)q(dy)f(of)g(the)i(pro)q(cedure)g(and)f(the)g(exception)g
(handler)224 1038 y(asso)q(ciated)k(with)e(it)h(share)g(the)g(same)f
(activ)n(ation)g(record.)19 b(It)14 b(follo)o(ws)e(that)i(b)q(et)o(w)o
(een)h(the)224 1088 y(thro)o(wing)d(of)f(the)i(exception)g(b)o(y)f(the)
g(raiser,)h(and)f(the)h(catc)o(hing)f(b)o(y)g(the)g(handler,)g(zero)h
(or)224 1138 y(more)e(activ)n(ation)f(records)j(ma)o(y)d(need)i(to)f(b)
q(e)h(remo)o(v)o(ed)f(from)f(the)i(dynamic)d(c)o(hain.)17
b(In)12 b(the)224 1188 y(case)k(that)f(the)h(exception)g(handling)e(mo)
q(del)f(do)q(es)j(not)f(pro)o(vide)g(for)f(direct)i(resumption)224
1238 y(of)h(these)h(con)o(texts,)g(these)g(activ)n(ation)d(records)k
(ma)o(y)c(b)q(e)i(discarded,)h(and)f(w)o(e)g(sp)q(eak)g(of)224
1287 y FK(unwinding)f(the)f(stack)j FN(to)c(reac)o(h)h(the)f(stac)o(k)h
(frame)d(with)i(the)g(handler.)224 1405 y FH(3.4.3)56
b(T)-5 b(rap)19 b(handlers)224 1482 y FN(Giv)o(en)14
b(a)h(uniform)d(w)o(a)o(y)i(of)g(handling)g(exceptions,)h(it)f(is)h
(necessary)h(to)f(transform)e(hard-)224 1532 y(w)o(are)e(signalled)d
(exceptions,)k(so)e(that)g(they)g(follo)o(w)e(the)j(same)e(con)o(trol)g
(logic)g(as)h(exceptions)224 1582 y(thro)o(wn)j(b)o(y)f(soft)o(w)o
(are.)17 b(It)c(is)f(usual)g(to)g(install)g FK(tr)n(ap)h(hand)r(lers)j
FN(to)c(catc)o(h)h(suc)o(h)g(signals)e(and)224 1632 y(to)18
b(explicitly)e(jump)g(in)o(to)h(the)h(exception)g(catc)o(hing)g(co)q
(de.)30 b(The)18 b(details)f(of)g(suc)o(h)h(trap)224
1681 y(handling)13 b(are)h(v)o(ery)h(op)q(erating)e(system)h(sp)q
(eci\014c.)224 1799 y FH(3.4.4)56 b(Un)n(winding)19 b(the)f(stac)n(k)
224 1876 y FN(The)e(pro)q(cess)g(of)e(thro)o(wing)h(and)f(catc)o(hing)h
(an)g(exception)g(amoun)o(ts,)e(at)i(the)g(implemen-)224
1926 y(tation)d(lev)o(el,)g(to)h(a)f(non-lo)q(cal)f(transfer)j(of)e
(con)o(trol.)1047 1911 y Fz(11)1099 1926 y FN(The)h(task)g(of)f(the)h
(run)o(time)f(system)224 1976 y(is)17 b(to)f(restore)i(the)f(mac)o
(hine)e(state)i(to)f(b)q(e)h(consisten)o(t)g(with)f(that)h(of)e(the)i
(catc)o(hing)f(pro-)224 2026 y(cedure.)28 b(There)17
b(are)g(sev)o(eral)g(asp)q(ects)h(of)e(this.)26 b(Ob)o(viously)m(,)15
b(the)i(state)h(of)d(the)i(run)o(time)224 2075 y(stac)o(k)d(m)o(ust)e
(b)q(e)i(suc)o(h)g(that)f(the)h(activ)n(ation)d(record)k(of)d(the)i
(catc)o(her)h(is)d(on)h(the)h(top)f(of)g(the)224 2125
y(stac)o(k.)18 b(Ho)o(w)o(ev)o(er,)11 b(w)o(e)h(m)o(ust)e(also)g
(ensure)j(that)e(other)h(asp)q(ects)g(of)f(mac)o(hine)e(state,)j(suc)o
(h)g(as)224 2175 y(the)k(v)n(alues)e(of)g(callee-sa)o(v)o(es)h
(registers)i(ha)o(v)o(e)d(b)q(een)i(restored.)22 b(As)15
b(an)g(example,)e(supp)q(ose)224 2225 y(w)o(e)j(ha)o(v)o(e)f(the)h
(dynamic)d(situation)h(depicted)j(in)d(\014gure)i(3.22.)21
b(Pro)q(cedure)c FM(A)e FN(has)h(called)224 2275 y(pro)q(cedure)f
FM(B)r FN(,)e(whic)o(h)g(has)f(an)h(exception)g(handler.)18
b(Pro)q(cedure)d FM(B)g FN(has)e(called)f FM(C)s FN(,)g(whic)o(h)224
2324 y(has)i(called)g(pro)q(cedure)i FM(D)q FN(.)i(W)m(e)c(assume)f
(that)h FM(D)i FN(has)e(raised)g(an)g(exception.)287
2375 y(The)i(need)i(to)e(restore)i(the)e(callee-sa)o(v)o(es)h
(registers)h(ma)o(y)c(b)q(e)j(understo)q(o)q(d)h(from)c(this)224
2424 y(\014gure.)k(Supp)q(ose,)13 b(as)f(an)f(extreme)h(example,)f
(that)g FM(B)k FN(needs)e(few)e(registers)j(and)d(sa)o(v)o(es)i(no)224
2474 y(callee-sa)o(v)o(es)h(registers)h(in)e(its)h(prolog.)i(Supp)q
(ose)f(ho)o(w)o(ev)o(er)e(that)h FM(C)i FN(and)d FM(D)i
FN(sa)o(v)o(e)e(some)g(of)224 2524 y(these)j(registers)f(in)f(their)g
(activ)n(ation)e(records.)20 b(When)14 b(the)h(exception)f(is)g(caugh)o
(t)g(b)o(y)g(the)224 2574 y(exception)j(handler)f(of)f
FM(B)r FN(,)h(w)o(e)g(m)o(ust)f(ha)o(v)o(e)g(already)g(restored)j
(these)f(v)n(alues,)e(otherwise)p 224 2610 577 2 v 255
2636 a Fy(11)288 2648 y Fx(Indeed,)7 b(one)h(of)h(the)f(most)g(telling)
f(criticisms)g(of)i(exception)d(handling)g(as)j(a)g(programmin)o(g)d
(language)224 2688 y(facilit)o(y)k(is)i(that)e(it)h(pro)o(vides)f(a)h
(bac)o(k-do)q(or)e(w)o(a)o(y)i(to)g(place)g(non-lo)q(cal)e
Fi(goto)p Fx(s)j(in)f(programs.)p eop
%%Page: 83 89
83 88 bop 224 274 a FL(3.4.)31 b(ERR)o(OR)13 b(HANDLING)h(AND)g(EX)o
(CEPTIONS)511 b FN(83)384 349 y
 17695293 11117117 0 0 17695293 11117117 startTexFig
 384 349 a
%%BeginDocument: exstack1.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-54.0 198.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Polyline
n 139 219 m 139 59 l  79 59 l  79 219 l  clp gs col-1 s gr
% Polyline
n 319 139 m 319 59 l  259 59 l  259 139 l  clp gs col-1 s gr
% Polyline
n 79 99 m 139 99 l gs col-1 s gr
% Polyline
n 79 139 m 139 139 l gs col-1 s gr
% Polyline
n 79 179 m 139 179 l gs col-1 s gr
% Polyline
n 259 99 m 319 99 l gs col-1 s gr
0.500 setlinewidth
	[4.000000] 0 setdash
% Polyline
n 259 139 m 259 219 l  319 219 l  319 139 l gs col-1 s gr
	[] 0 setdash
n 152.000 221.000 m 144.000 219.000 l 152.000 217.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 144 219 m 164 219 l gs col-1 s gr
n 152.000 191.000 m 144.000 189.000 l 152.000 187.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 144 189 m 164 189 l gs col-1 s gr
n 332.000 141.000 m 324.000 139.000 l 332.000 137.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 324 139 m 344 139 l gs col-1 s gr
n 332.000 111.000 m 324.000 109.000 l 332.000 107.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 324 109 m 344 109 l gs col-1 s gr
% Polyline
n 59 49 m 59 39 l gs col-1 s gr
n 57.000 47.000 m 59.000 39.000 l 61.000 47.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 239 49 m 239 39 l gs col-1 s gr
n 237.000 47.000 m 239.000 39.000 l 241.000 47.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 89.000 189.000 m 84.000 189.000 l
	84.000 189.000 79.000 189.000 74.000 189.000 DrawSplineSection
	74.000 189.000 69.000 189.000 64.000 184.000 DrawSplineSection
	64.000 184.000 59.000 179.000 59.000 169.000 DrawSplineSection
	59.000 169.000 59.000 159.000 69.000 154.000 DrawSplineSection
	79.000 149.000 l gs col-1 s gr
n 70.950 150.789 m 79.000 149.000 l 72.739 154.367 l gs 2 setlinejoin col-1 s gr
% Open spline
n 89.000 149.000 m 84.000 149.000 l
	84.000 149.000 79.000 149.000 74.000 149.000 DrawSplineSection
	74.000 149.000 69.000 149.000 64.000 144.000 DrawSplineSection
	64.000 144.000 59.000 139.000 59.000 129.000 DrawSplineSection
	59.000 129.000 59.000 119.000 69.000 114.000 DrawSplineSection
	79.000 109.000 l gs col-1 s gr
n 70.950 110.789 m 79.000 109.000 l 72.739 114.367 l gs 2 setlinejoin col-1 s gr
% Open spline
n 89.000 109.000 m 84.000 109.000 l
	84.000 109.000 79.000 109.000 74.000 109.000 DrawSplineSection
	74.000 109.000 69.000 109.000 64.000 104.000 DrawSplineSection
	64.000 104.000 59.000 99.000 59.000 89.000 DrawSplineSection
	59.000 89.000 59.000 79.000 69.000 74.000 DrawSplineSection
	79.000 69.000 l gs col-1 s gr
n 70.950 70.789 m 79.000 69.000 l 72.739 74.367 l gs 2 setlinejoin col-1 s gr
% Open spline
n 89.000 69.000 m 84.000 69.000 l
	84.000 69.000 79.000 69.000 74.000 69.000 DrawSplineSection
	74.000 69.000 69.000 69.000 64.000 64.000 DrawSplineSection
	64.000 64.000 59.000 59.000 59.000 54.000 DrawSplineSection
	59.000 49.000 l gs col-1 s gr
n 57.000 57.000 m 59.000 49.000 l 61.000 57.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 269.000 109.000 m 264.000 109.000 l
	264.000 109.000 259.000 109.000 254.000 109.000 DrawSplineSection
	254.000 109.000 249.000 109.000 244.000 104.000 DrawSplineSection
	244.000 104.000 239.000 99.000 239.000 89.000 DrawSplineSection
	239.000 89.000 239.000 79.000 249.000 74.000 DrawSplineSection
	259.000 69.000 l gs col-1 s gr
n 250.950 70.789 m 259.000 69.000 l 252.739 74.367 l gs 2 setlinejoin col-1 s gr
% Open spline
n 269.000 69.000 m 264.000 69.000 l
	264.000 69.000 259.000 69.000 254.000 69.000 DrawSplineSection
	254.000 69.000 249.000 69.000 244.000 64.000 DrawSplineSection
	244.000 64.000 239.000 59.000 239.000 54.000 DrawSplineSection
	239.000 49.000 l gs col-1 s gr
n 237.000 57.000 m 239.000 49.000 l 241.000 57.000 l gs 2 setlinejoin col-1 s gr
/Times-Italic findfont 10.00 scalefont setfont
169 189 m 
gs 1 -1 scale (fp) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
349 109 m 
gs 1 -1 scale (fp) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
169 219 m 
gs 1 -1 scale (sp) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
349 139 m 
gs 1 -1 scale (sp) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
94 89 m 
gs 1 -1 scale (A frame) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
94 124 m 
gs 1 -1 scale (B frame) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
94 204 m 
gs 1 -1 scale (D frame) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
94 164 m 
gs 1 -1 scale (C frame) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
274 124 m 
gs 1 -1 scale (B frame) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
274 84 m 
gs 1 -1 scale (A frame) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
64 44 m 
gs 1 -1 scale (dynamic chain) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
244 44 m 
gs 1 -1 scale (dynamic chain) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 224 1144 a FN(Figure)18 b(3.22:)23 b(Exception)18 b(handling)e
(example.)27 b(Pro)q(cedure)19 b FM(D)g FN(thro)o(ws,)f(pro)q(cedure)h
FM(B)224 1194 y FN(catc)o(hes)224 1309 y(an)o(y)11 b(subsequen)o(t)i
(return)f(of)e FM(B)k FN(will)c(fail)f(to)i(honor)g(the)h(obligation)c
(to)j(return)i(with)d(callee-)224 1359 y(sa)o(v)o(es)15
b(registers)g(unc)o(hanged.)287 1409 y(There)c(are)g(sev)o(eral)f(w)o
(a)o(ys)g(of)g(pro)o(viding)f(for)h(suc)o(h)h(sa)o(ving)e(and)h
(restoring)h(of)e(pro)q(cedure)224 1459 y(state.)31 b(The)18
b(most)f(straigh)o(tforw)o(ard)g(of)g(these)i(uses)g(the)g(equiv)n
(alen)o(t)e(of)g(the)h(primitiv)o(e)224 1508 y(op)q(erations)d(pro)o
(vided)e(b)o(y)h(the)g FM(C)s FN(-library)f(functions)h(\\)p
FG(setjmp)p FN(")e(and)i(\\)p FG(longjmp)p FN(".)224
1614 y FO(Setjmp)g(and)h(long)q(jmp)224 1691 y FN(The)e(functions)g(\\)
p FG(setjmp)p FN(")d(and)j(\\)p FG(longjmp)p FN(")d(pro)o(vide)i(for)g
(non-lo)q(cal)f(transfer)j(of)e(con)o(trol)224 1741 y(in)18
b(the)h(standard)g FM(C)i FN(library)m(.)30 b(They)19
b(do)f(so)g(b)o(y)g(sa)o(ving)g(and)g(restoring)h(a)f(substan)o(tial)
224 1790 y(part)h(of)f(the)g(stac)o(k)h(and)f(mac)o(hine)f(state)i(in)f
(a)g(mac)o(hine)f(dep)q(enden)o(t)j(structure)h(called)224
1840 y(a)d(\\)p FG(jmpbuf)p FN(".)29 b(As)18 b(used)h(for)f(non-lo)q
(cal)f(jumps,)g(the)i(use)g(of)e(these)i(functions)g(has)f(the)224
1890 y(follo)o(wing)12 b(structure)k(|)354 1964 y FF(jmpbuf)i(state;)95
b(/*)19 b FE(variable)12 b(for)h(state)f(info)g FF(*/)354
2009 y Fw(\001)6 b(\001)g(\001)354 2055 y FF(if)19 b(\(setjmp\(st)o
(ate)o(\))d(==)j(0\))g({)482 2101 y Fw(\001)6 b(\001)g(\001)13
b FE(c)n(ontr)n(ol)f(arrives)g(her)n(e)h(after)g(initial)e(c)n(al)r(l)
354 2146 y FF(})20 b(else)e({)482 2192 y Fw(\001)6 b(\001)g(\001)13
b FE(c)n(ontr)n(ol)f(arrives)g(her)n(e)h(after)g(longjmp)354
2238 y FF(})224 2359 y FN(The)h FG(setjmp)d FN(function)i(is)g(called)f
(with)h(the)g(allo)q(cated)g(state)h(bu\013er)g(as)e(parameter.)18
b(The)224 2409 y(function)h(sa)o(v)o(es)g(all)f(of)g(the)i(necessary)h
(state)f(information)c(in)i(the)i(jump)d(bu\013er,)j(and)224
2459 y(alw)o(a)o(ys)f(returns)j(from)c(suc)o(h)j(explicit)f(calls)g
(with)f(a)h(zero)h(return)g(v)n(alue.)36 b(Therefore,)224
2509 y(after)16 b(ev)o(ery)g(explicit)e(call)h(of)f(the)i(function)f
(con)o(trol)g(passes)h(to)f(the)h FK(then-p)n(art)j FN(of)14
b(the)i(if)224 2559 y(statemen)o(t.)287 2608 y(If)d(at)h(an)o(y)f
(subsequen)o(t)j(stage)e(of)g(the)g(program)e(execution)j(the)f(call)
702 2688 y FG(longjmp\(state,)p FK(numb)n(er)t FG(\);)p
eop
%%Page: 84 90
84 89 bop 224 274 a FN(84)562 b FL(CHAPTER)14 b(3.)32
b(R)o(UNTIME)13 b(OR)o(GANIZA)m(TION)224 390 y FN(is)j(made,)g(then)g
(the)h(original)e(call)g(of)h FG(setjmp)e FN(\\returns")k(again,)d
(with)h FK(numb)n(er)k FN(as)d(the)224 440 y(return)g(v)n(alue.)22
b(The)16 b(explicit)f(return)i(v)n(alue)e(cannot)h(ev)o(er)g(b)q(e)g
(zero.)24 b(The)16 b(e\013ect)h(is)e(that)224 490 y FG(longjmp)f
FN(has)i(\\thro)o(wn")f(the)g(v)n(alue)g FK(numb)n(er)t
FN(,)h(and)f(the)h FK(else-p)n(art)i FN(of)d(the)h(if)e(statemen)o(t)
224 540 y(has)g(\\caugh)o(t")g(it.)287 590 y(A)o(t)j(one)h(lev)o(el,)f
(implemen)o(tation)d(is)j(relativ)o(ely)g(straigh)o(tforw)o(ard.)28
b(All)17 b(callee-sa)o(v)o(es)224 640 y(registers)k(m)o(ust)d(b)q(e)i
(sa)o(v)o(ed)f(b)o(y)g(the)h FG(setjmp)p FN(,)e(as)h(m)o(ust)g(the)g
(program)f(coun)o(ter,)j(frame)224 690 y(p)q(oin)o(ter,)d(stac)o(k)g(p)
q(oin)o(ter,)g(and)f(p)q(ossibly)g(other)h(data)e(p)q(oin)o(ters.)29
b(The)18 b(call)e(of)h FG(longjmp)224 740 y FN(simply)11
b(restores)16 b(the)d(stac)o(k)h(state)g(and)f(the)h(registers)g(from)e
(the)h(jump)f(bu\013er,)i(and)f(then)224 789 y(jumps)g(to)h(the)g(sa)o
(v)o(ed)g(program)f(coun)o(ter)h(address.)1042 774 y
Fz(12)287 840 y FN(View)o(ed)19 b(at)g(another)h(lev)o(el,)g(the)f
(implemen)o(tation)d(and)j(use)h(of)f(these)h(facilities)e(is)224
889 y(problematic.)e(Remem)o(b)q(er)7 b(that)j(the)g(name)e(\\)p
FG(setjmp)p FN(")g(is)h(just)h(another)g(standard)g(library)224
939 y(iden)o(ti\014er,)i(and)f(no)g(sp)q(ecial)g(seman)o(tics)g(are)h
(attac)o(hed)f(to)g(the)h(calling)e(of)g(suc)o(h)i(a)f(function.)224
989 y(In)i(particular,)f(it)g(is)g(seman)o(tically)e(legal)h(to)i(use)g
(the)g(name)e(of)h(suc)o(h)h(an)f(in)o(teger)h(function)224
1039 y(in)h(an)g(arbitrary)f(expression.)20 b(Ho)o(w)o(ev)o(er,)14
b(it)f(is)h(hazardous)g(to)g(do)g(so.)k(Indeed)d(the)f
FK(ANSI)224 1089 y(C)21 b FN(standard)15 b(do)q(es)g(not)g(ev)o(en)g
(guaran)o(tee)h(that)e(an)h(assignmen)o(t)e(of)h(the)i(function)e
(return)224 1138 y(v)n(alue)g(will)e(w)o(ork)i(correctly)m(.)k
(Consider)c(the)h(follo)o(wing)c(fragmen)o(t)h(of)i(assem)o(bly)e(co)q
(de)j(|)354 1226 y FF(pushl)j(myJmpBuf)75 b(;)20 b FE(push)12
b(addr)n(ess)g(of)h(jmpbuf)f(as)h(p)n(ar)n(am)354 1272
y(save)g(any)f(c)n(al)r(ler-saves)e(r)n(e)n(gisters)354
1317 y FF(call)38 b(setjmp)115 b(;)20 b FE(c)n(al)r(l)12
b(the)h(function,)e(r)n(esult)h(in)h(e)n(ax)354 1363
y(r)n(estor)n(e)g(any)f(c)n(al)r(ler-saves)f(r)n(e)n(gisters)354
1409 y Fw(\001)6 b(\001)g(\001)224 1544 y FN(The)14 b(problem)d(is)i
(that)g(after)h(the)f FG(longjmp)p FN(,)e(the)j(co)q(de)g(\\restores")g
(an)o(y)f(caller-sa)o(v)o(es)g(reg-)224 1594 y(isters)k(from)d(their)i
(allo)q(cated)g(temp)q(oraries)f(in)h(the)g(caller's)g(stac)o(k)g
(frame.)22 b(But)17 b(con)o(trol)224 1644 y(has)c(not)g(necessarily)g
(stepp)q(ed)i(through)d(the)i(co)q(de)f(as)g(sho)o(wn,)f(indeed)h(the)h
(same)d(temp)q(o-)224 1693 y(rary)k(lo)q(cations)e(ma)o(y)f(ha)o(v)o(e)
i(b)q(een)i(reused)f(for)f(the)h(caller-sa)o(v)o(es)f(registers)i(of)d
(other)i(calls.)224 1743 y(Th)o(us)j(after)f(the)h(long)e(jump,)f(the)j
(con)o(ten)o(ts)g(of)f(caller-sa)o(v)o(es)g(registers)i(are)e
(unreliable.)224 1793 y(In)g(particular,)g(v)n(alues)g(corresp)q
(onding)h(to)e(already)h(ev)n(aluated)f(sub)q(expressions)j(of)e(the)
224 1843 y(expression)e(whic)o(h)f(con)o(tains)g(the)h(call)e(of)g
FG(setjmp)g FN(are)h(susp)q(ect.)287 1893 y(The)20 b(problem)f(ma)o(y)f
(b)q(e)i(a)o(v)o(oided)g(b)o(y)f(adopting)g(register)i(allo)q(cation)e
(rules)h(whic)o(h)224 1943 y(simply)8 b(do)h(not)h(p)q(ermit)f(v)n
(alues)g(whic)o(h)h(are)g(liv)o(e)e(across)j FK(any)j
FN(function)9 b(call)g(to)h(b)q(e)g(allo)q(cated)224
1993 y(to)k(caller-sa)o(v)o(es)g(registers.)20 b(This)14
b(is)f(an)h(extreme)g(but)g(su\016cien)o(t)h(resp)q(onse.)1439
1978 y Fz(13)287 2043 y FN(It)k(is)f(also)g(imp)q(ortan)o(t)f(to)i
(remem)o(b)q(er)f(that)g(the)i(jump)d(bu\013er)j(m)o(ust)d(b)q(e)j
(allo)q(cated)224 2093 y(suc)o(h)14 b(that)g(the)g(exten)o(t)g(of)f
(the)h(v)n(ariable)e(exceeds)j(that)f(of)e(the)i(co)q(de)g(whic)o(h)f
(con)o(tains)h(the)224 2142 y(non-lo)q(cal)h(jumps.)23
b(The)17 b(w)o(arning)e(in)h(the)g(the)h(standard)f FK(UNIX)22
b(man)e FN(pages)c(is)g(w)o(orth)224 2192 y(rep)q(eating)f(|)328
2276 y(If)i FG(longjmp\(env\))d FN(is)j(called)f(ev)o(en)i(though)f
FG(env)f FN(w)o(as)h(nev)o(er)g(primed)f(b)o(y)h(a)328
2326 y(call)g(to)h FG(setjmp\(env\))p FN(,)f(or)h(when)g(the)h(last)f
(suc)o(h)g(call)g(w)o(as)g(in)f(a)h(function)328 2376
y(that)c(has)g(since)h(returned,)g(absolute)f(c)o(haos)g(is)g(guaran)o
(teed.)p 224 2412 577 2 v 255 2439 a Fy(12)288 2451 y
Fx(This)g(is)f(y)o(et)g(another)f(example)f(of)j(a)f
Fu(tr)n(amp)n(oline)18 b Fx(pro)q(cedure.)h(It)13 b(is)h(called)e(as)i
(a)f(pro)q(cedure,)e(but)224 2490 y(\\returns")e(b)o(y)i(jumping)f(to)h
(a)g(lo)q(cation)e(other)i(than)f(its)h(real)g(return)f(address.)255
2518 y Fy(13)288 2530 y Fx(In)i(suc)o(h)f(a)i(case,)e(it)i(is)f
(misleading)e(to)i(sp)q(eak)f(of)h(caller-sa)o(v)o(es)e(and)h
(callee-sa)o(v)o(es)f(registers.)16 b(Rather)224 2569
y(there)9 b(are)g(registers)f(whic)o(h)h(are)h(destro)o(y)o(ed)d(b)o(y)
i(calls,)h(and)f(others)f(whic)o(h)h(are)g(preserv)o(ed)f(o)o(v)o(er)h
(calls.)14 b(The)224 2609 y(\\no)d(caller-sa)o(v)o(es")e(rule)i(comes)f
(do)o(wn)i(to)f(insisting)f(that)h(v)n(alues)g(whic)o(h)g(are)g(liv)o
(e)g(across)g(an)o(y)g(call)g(m)o(ust)224 2648 y(either)i(b)q(e)h
(placed)f(in)h(preserv)o(ed)e(registers,)h(or)h(m)o(ust)f(b)q(e)h(held)
g(in)g(memory)e(lo)q(cations)g(whic)o(h)i(are)f(not)224
2688 y(reused)d(for)h(an)o(y)g(other)f(purp)q(ose)g(within)g(that)h
(pro)q(cedure.)p eop
%%Page: 85 91
85 90 bop 224 274 a FL(3.4.)31 b(ERR)o(OR)13 b(HANDLING)h(AND)g(EX)o
(CEPTIONS)511 b FN(85)224 390 y FO(Building)12 b(exception)i(handling)f
(out)i(of)g(setjmp)224 470 y FN(In)21 b(principle,)g(it)f(is)g(p)q
(ossible)g(to)g(build)g(exception)h(handling)e(using)h(the)h
(facilities)e(of)224 519 y FG(setjmp)h FN(and)g FG(longjmp)p
FN(.)37 b(In)21 b(e\013ect,)j(ev)o(ery)d(pro)q(cedure)i(with)d(an)h
(exception)g(handler)224 569 y(allo)q(cates)16 b(space)h(for)e(a)h
(jump)e(bu\013er)i(in)g(its)f(stac)o(k)i(frame,)d(and)i(links)f(this)g
(stac)o(k)i(frame)224 619 y(to)c(a)g(global)f(handler)h(list)g(at)g(en)
o(try)m(.)k(On)d(exit,)f(the)g(handler)h(is)f(unlink)o(ed)f(so)h(the)h
(original)224 669 y(head)h(of)e(the)i(list)f(once)h(more)e(b)q(ecomes)h
(the)h FK(active)g(exc)n(eption)h(hand)r(ler)p FN(.)j(The)c(follo)o
(wing)224 719 y(co)q(de)g(is)f(inserted)h(in)o(to)e(the)i(pro)q
(cedure,)g(immediately)10 b(follo)o(wing)i(the)i(prolog)f(|)448
811 y Fw(\001)6 b(\001)g(\001)280 856 y FD(;)12 b FE(end)h(of)g
(standar)n(d)e(pr)n(olo)n(g)448 902 y FF(leal)87 b Fm(N)t(N)t
FF(\(ebp\),eax)155 b FD(;)12 b FE(lo)n(ad)g(addr)n(ess)g(of)h(jmpbuf)
448 948 y FF(pushl)67 b(eax)345 b FD(;)12 b FE(push)g(as)h(p)n(ar)n(am)
g(to)g(setjmp)448 993 y FF(call)87 b(setjmp)285 b FD(;)12
b FE(stor)n(e)h(the)f(pr)n(o)n(c)n(e)n(dur)n(e)g(state)448
1039 y FF(testl)67 b(eax,eax)265 b FD(;)12 b FE(is)h(r)n(eturn)g(value)
f(non-zer)n(o?)448 1085 y FF(jnz)107 b(handler)265 b
FD(;)12 b FE(if)h(so,)g(jump)g(to)g(hand)r(ler...)448
1130 y(link)f(jmpbuf)g(as)h(he)n(ad)g(of)g(hand)r(ler)e(list)448
1176 y Fw(\001)6 b(\001)g(\001)12 b FE(try-p)n(art)g(b)n(o)n(dy)h(of)g
(pr)n(o)n(c)n(e)n(dur)n(e)448 1222 y(unlink)e(jmpbuf)i(fr)n(om)g(hand)r
(ler)f(list)280 1267 y FD(;)g FE(start)h(of)g(standar)n(d)e(epilo)n(g)
448 1313 y Fw(\001)6 b(\001)g(\001)448 1359 y FF(ret)512
b FD(;)12 b FE(normal)h(r)n(eturn)280 1404 y FF(handler:)580
b FD(;)12 b FE(hand)r(ler)g(b)n(o)n(dy)g(starts)g(her)n(e...)448
1450 y Fw(\001)6 b(\001)g(\001)287 1543 y FN(Note)16
b(that)g(this)g(use)h(of)f FG(setjmp)p FN(,)f(since)i(it)e(is)h
(completely)f(con)o(trolled)h(b)o(y)g(the)h(com-)224
1593 y(piler,)f(do)q(es)g(not)g(su\013er)h(from)d(the)i(problems)f
(whic)o(h)h(arise)g(in)f(the)h(programmed)d(use)k(of)224
1643 y(the)g(library)f(function.)25 b(Nev)o(ertheless,)18
b(there)g(are)f(some)e(disadv)n(an)o(tages)h(in)f(organizing)224
1693 y(exception)d(handling)e(in)h(this)g(w)o(a)o(y)m(.)16
b(In)11 b(particular,)g(the)h(o)o(v)o(erhead)g(of)e(setting)i(and)f
(linking)224 1743 y(handlers)i(ma)o(y)e(b)q(e)i(quite)f(considerable.)
18 b(This)12 b(o)o(v)o(erhead)h(is)f(a)g(p)q(enalt)o(y)g(whic)o(h)h(is)
f(paid)g(b)o(y)224 1792 y(ev)o(ery)17 b(call)f(of)f(ev)o(ery)i(pro)q
(cedure)i(whic)o(h)d(con)o(tains)g(an)g(exception)h(handler,)f(ev)o(en)
h(if)f(the)224 1842 y(condition)e(whic)o(h)f(the)i(handler)f(is)g(in)o
(tended)g(to)g(guard)g(against)f(is)h(extremely)f(rare.)287
1893 y(As)j(an)g(ideal,)g(w)o(e)h(w)o(ould)e(wish)h(the)h(o)o(v)o
(erhead)g(of)f(setting)g(and)g(remo)o(ving)f(handlers)224
1943 y(to)g(b)q(e)g(zero,)h(or)f(as)g(close)g(to)f(zero)i(as)f
(practicable.)21 b(In)15 b(this)g(w)o(a)o(y)f(a)g(p)q(enalt)o(y)h(w)o
(ould)f(only)224 1993 y(b)q(e)h(paid)e(in)h(cases)h(where)g(an)f
(exception)g(actually)f(did)h(o)q(ccur.)224 2108 y FO(Lo)o(w-o)o(v)o
(erhead)g(un)o(windin)o(g)224 2187 y FN(The)d(essence)h(of)d(lo)o(w-o)o
(v)o(erhead)g(exception)h(handling)f(is)g(the)i(incremen)o(tal)e
(reconstruction)224 2237 y(of)j(the)h(state)g(information)c(from)i(eac)
o(h)i(stac)o(k)f(frame)f(as)i(the)f(stac)o(k)h(is)f(un)o(w)o(ound)g
(from)f(the)224 2286 y(thro)o(w)o(er)17 b(to)g(the)g(catc)o(her.)27
b(In)16 b(principle,)h(the)g(information)c(is)k(already)f(presen)o(t)i
(in)e(the)224 2336 y(co)q(de)k(and)g(on)f(the)g(stac)o(k.)35
b(After)20 b(all,)f(the)h(normal)d(c)o(hain)i(of)f(pro)q(cedure)j
(return)g(will)224 2386 y(restore)16 b(the)e(state)h(in)f(exactly)g
(this)f(w)o(a)o(y)m(.)287 2437 y(When)i(a)g(pro)q(cedure)i(returns)f
(normally)m(,)c(state)k(is)f(restored)h(b)o(y)f(the)h(co)q(op)q
(eration)f(of)224 2487 y(t)o(w)o(o)k(mec)o(hanisms.)33
b(In)19 b(the)h(co)q(de)h(of)d(the)i(epilog,)g(the)g(o\013sets)g(of)f
(sa)o(v)o(ed)h(data)f(in)g(the)224 2537 y(curren)o(t)d(stac)o(k)e
(frame)f(are)h(enco)q(ded.)20 b(In)14 b(the)h(stac)o(k)f(frame)f
(itself,)g(another)h(datum)f(links)224 2587 y(the)i(curren)o(t)g(stac)o
(k)g(frame)d(to)i(the)g(frame)f(of)g(its)h(caller.)287
2638 y(Note)19 b(that)g(the)h(pro)q(cess)h(of)d(incremen)o(tally)g(un)o
(winding)g(the)i(stac)o(k)f(is)g(necessarily)224 2688
y(ine\016cen)o(t.)g(In)13 b(\014gure)h(3.22)e(the)i(frame)e(of)g(pro)q
(cedure)j FM(D)g FN(is)e(discarded)h(after)g(p)q(erforming)p
eop
%%Page: 86 92
86 91 bop 224 274 a FN(86)562 b FL(CHAPTER)14 b(3.)32
b(R)o(UNTIME)13 b(OR)o(GANIZA)m(TION)224 390 y FN(the)18
b(state)g(restoration)f(actions)g(whic)o(h)g(are)g(needed)i(b)o(y)d
FM(D)q FN(.)28 b(Then)17 b(the)h(frame)e(of)g FM(C)j
FN(is)224 440 y(discarded)c(after)f(the)g(state)g(restoration)g
(actions)g(whic)o(h)g FM(C)i FN(requires)f(are)f(p)q(erformed.)j(It)224
490 y(is)12 b(p)q(ossible,)f(ev)o(en)h(probable)f(p)q(erhaps,)i(that)e
(the)h(state)g(restoration)f(actions)h(in)o(v)o(olv)o(ed)e(for)224
540 y FM(C)18 b FN(will)13 b(o)o(v)o(erwrite)h(some)g(of)g(the)h(state)
g(whic)o(h)g(has)f(b)q(een)i(restored)g(for)e FM(D)q
FN(.)21 b(In)14 b(e\013ect,)i(w)o(e)224 590 y(ma)o(y)c(p)q(erform)g(a)h
(signi\014can)o(t)g(amoun)o(t)f(of)h(unnecessary)i(w)o(ork)e(during)g
(stac)o(k)h(un)o(winding.)224 640 y(Nev)o(ertheless,)g(it)c(is)h(our)g
(goal)e(to)i(mak)o(e)e(the)j(exception-free)g(execution)f(run)h(as)e
(e\016cien)o(tly)224 689 y(as)21 b(p)q(ossible,)g(ev)o(en)g(at)f(the)h
(cost)g(of)f(making)e(exception)j(handling)e(considerable)i(less)224
739 y(sp)q(eedy)m(.)287 790 y(In)15 b(order)g(to)g(b)q(e)g(able)g(to)g
(un)o(wind)f(the)i(stac)o(k)f(incremen)o(tally)m(,)e(w)o(e)i(m)o(ust)f
(ha)o(v)o(e)h(access)224 840 y(to)j(information)c(equiv)n(alen)o(t)j
(to)g(the)h(o\013sets)g(enco)q(ded)h(in)o(to)d(eac)o(h)i(pro)q
(cedure's)h(normal)224 890 y(exit)e(epilog,)f(and)h(w)o(e)g(m)o(ust)e
(b)q(e)j(able)e(to)h(na)o(vigate)f(the)h(dynamic)e(c)o(hain)h(on)h(the)
g(stac)o(k.)224 940 y(As)k(usual)f(this)g(information)e(ma)o(y)g(b)q(e)
j(enco)q(ded)g(either)g(as)g(data)f(for)f(in)o(terpretation,)224
989 y(or)d(pro)q(cedurally)m(.)23 b(In)16 b(the)g(\014rst)h(case,)f(a)g
(p)q(ossible)f(implemen)o(tation)e(w)o(ould)h(in)o(v)o(olv)o(e)h(the)
224 1039 y(creation)d(of)e(run)o(time)h(pro)q(cedure)i(descriptors)f
(at)f(compile)f(time,)g(and)h(their)g(loading)f(in)o(to)224
1089 y(memory)e(when)i(the)h(program)d(is)i(loaded.)16
b(Eac)o(h)10 b(pro)q(cedure)i(descriptor)f(needs)g(to)f(con)o(tain)224
1139 y(information)k(on)j(the)g(n)o(um)o(b)q(er)f(of)g(registers)i
(whic)o(h)e(w)o(ere)i(sa)o(v)o(ed,)f(the)g(lo)q(cations)g(in)f(the)224
1189 y(stac)o(k)11 b(frame)d(at)i(whic)o(h)g(they)g(w)o(ere)h(sa)o(v)o
(ed,)f(and)g(the)g(size)h(of)e(the)h(stac)o(kframe.)16
b(In)10 b(this)g(case,)224 1238 y(a)j(routine)g(in)g(the)g(run)o(time)f
(supp)q(ort)i(system)f(reads)h(the)f(data)g(for)f(the)i(descriptor)g
(of)f(the)224 1288 y(curren)o(t)18 b(pro)q(cedure,)g(and)e(in)o
(terpretiv)o(ely)h(executes)h(the)f(state)g(restoration)f(op)q
(erations)224 1338 y(as)e(sp)q(eci\014ed.)287 1389 y(Alternativ)o(ely)m
(,)j(w)o(e)g(migh)o(t)f(pro)q(duce)j(an)e(additional)e(sequence)20
b(of)d(ob)r(ject)h(co)q(de)h(for)224 1439 y(eac)o(h)14
b(pro)q(cedure,)i(whic)o(h)d(p)q(erforms)g(the)h(state)h(restoration)e
(incremen)o(t)h(when)g(executed.)224 1489 y(W)m(e)c(ma)o(y)e(think)i
(of)g(these)h(co)q(de)g(segmen)o(ts)f(as)g(b)q(eing)g
FK(dummy)i(epilo)n(gs)p FN(,)f(since)g(they)f(p)q(erform)224
1538 y(the)15 b(state)g(restoration)f(of)f(a)h(real)g(epilog,)e(but)i
(without)g(the)g(pro)q(cedure)i(return.)287 1589 y(In)i(the)h(case)g
(of)f(run)o(time)f(descriptors,)k(or)d(in)g(the)h(case)g(of)f(dumm)o(y)
e(epilogs,)i(note)224 1639 y(that)d FK(every)j FN(pro)q(cedure)e(m)o
(ust)d(ha)o(v)o(e)h(one,)g(and)g(not)g(just)h(those)g(pro)q(cedures)h
(whic)o(h)e(ha)o(v)o(e)224 1689 y(exception)h(handlers.)287
1740 y(The)f(\014nal)e(problem)g(whic)o(h)i(needs)h(to)e(b)q(e)h(solv)o
(ed,)f(is)g(ho)o(w)g(to)h(link)e(together)i(the)g(pro-)224
1790 y(cedure)i(descriptors)h(\(or)d(equiv)n(alen)o(tly)m(,)e(the)j
(dumm)o(y)d(epilogs\))i(in)g(the)h(stac)o(k)f(un)o(winding)224
1840 y(equiv)n(alen)o(t)c(of)g(the)i(dynamic)d(c)o(hain.)16
b(An)11 b(extremely)f(simple)f(solution)h(w)o(ould)g(b)q(e)h(to)g(mak)o
(e)224 1889 y(ev)o(ery)i(pro)q(cedure)h(place)e(a)g(p)q(oin)o(ter)g(to)
g(its)g(descriptor)h(as)f(part)h(of)e(the)i(stac)o(k)f(mark)e(whic)o(h)
224 1939 y(it)17 b(creates)h(during)e(the)h(prolog.)25
b(This)16 b(metho)q(d)g(w)o(ould)g(ha)o(v)o(e)g(a)g(space)i(o)o(v)o
(erhead)f(equal)224 1989 y(to)f(that)g(of)g(main)o(taini)o(ng)d(a)j
(static)g(c)o(hain,)g(that)g(is,)g(one)g(extra)g(p)q(oin)o(ter)g(w)o
(ould)g(need)g(to)224 2039 y(b)q(e)f(stored)g(p)q(er)g(stac)o(k)g
(frame.)i(The)e(execution)f(o)o(v)o(erhead)h(w)o(ould)e(b)q(e)i(one)f
(extra)h(instruc-)224 2089 y(tion)h(p)q(er)g(pro)q(cedure)i(en)o(try)m
(,)d(where)i(once)g(again)d(ev)o(en)i(pro)q(cedures)i(without)e
(exception)224 2138 y(handling)d(w)o(ould)g(ha)o(v)o(e)h(to)g(pa)o(y)f
(this)h(price.)287 2189 y(A)h(second)g(solution)f(is)h(in)f(tune)i
(with)e(the)h(philosoph)o(y)f(of)g(making)e(the)k(o)o(v)o(erhead)f(of)
224 2239 y(setting)f(handlers)g(as)f(lo)o(w)f(as)i(p)q(ossible,)f(ev)o
(en)h(at)f(the)h(cost)g(of)e(making)f(the)j(un)o(winding)e(of)224
2289 y(the)j(stac)o(k)f(m)o(uc)o(h)e(slo)o(w)o(er.)18
b(In)c(this)f(case,)i(a)e(run)o(time)f(table)i(maps)e(instruction)i
(addresses)224 2339 y(to)19 b(pro)q(cedure)h(descriptors.)34
b(The)19 b(compiler)e(creates)j(a)e(sym)o(b)q(olic)f(v)o(ersion)h(of)g
(part)h(of)224 2389 y(this)f(table)g(as)f(eac)o(h)h(mo)q(dule)f(is)g
(compiled,)g(and)g(the)h(link)o(er)g(resolv)o(es)g(the)g(sym)o(b)q(ols)
e(to)224 2438 y(their)g(run)o(time)e(addresses)j(at)d(link)g(time.)20
b(During)14 b(un)o(winding)g(of)h(the)g(stac)o(k,)g(when)h(the)224
2488 y(un)o(winding)g(of)g(one)g(frame)g(is)g(complete,)g(the)h(return)
h(address)g(stored)f(in)f(the)h(frame)e(is)224 2538 y(accessed.)20
b(This)11 b(address)i(is)e(mapp)q(ed)g(through)g(the)h(table,)f(to)h
(\014nd)f(the)h(descriptor)h(of)e(the)224 2588 y(calling)j(pro)q
(cedure.)22 b(The)15 b(o)o(v)o(erhead)h(of)e(this)g(lo)q(okup)g(is)h
(quite)g(high,)f(since)h(it)g(is)f(usually)224 2638 y(necessary)g(to)e
(searc)o(h)h(hierarc)o(hically)f(through)g(a)g(global,)e(and)i(then)g
(a)g(p)q(er-mo)q(dule)f(table)224 2688 y(to)17 b(\014nd)h(the)g(matc)o
(hing)d(en)o(try)m(.)28 b(The)17 b(en)o(tries)i(hold)d(upp)q(er)i(and)f
(lo)o(w)o(er)g(b)q(ounds)h(for)f(the)p eop
%%Page: 87 93
87 92 bop 224 274 a FL(3.5.)31 b(FINDING)14 b(OUT)g(MORE)869
b FN(87)224 390 y(co)q(de)14 b(addresses)h(of)d(eac)o(h)h(pro)q
(cedure.)19 b(Figure)13 b(3.23)e(sho)o(ws)i(the)h(address)g(map)d
(structure.)268 490 y
 21379072 10853990 0 0 21379072 10853990 startTexFig
 268 490 a
%%BeginDocument: adrmap.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-102.0 175.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Polyline
n 179 100 m 179 40 l  139 40 l  139 100 l  clp gs col-1 s gr
% Polyline
n 259 160 m 259 100 l  219 100 l  219 160 l  clp gs col-1 s gr
% Polyline
n 339 160 m 339 100 l  299 100 l  299 160 l  clp gs col-1 s gr
% Polyline
n 459 160 m 459 100 l  419 100 l  419 160 l  clp gs col-1 s gr
0.500 setlinewidth
	[4.000000] 0 setdash
% Polyline
n 439 119 m 474 119 l gs col-1 s gr
	[] 0 setdash
n 466.000 117.000 m 474.000 119.000 l 466.000 121.000 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Polyline
n 439 139 m 474 139 l gs col-1 s gr
	[] 0 setdash
n 466.000 137.000 m 474.000 139.000 l 466.000 141.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 169.000 85.000 m 214.000 85.000 l
	214.000 85.000 259.000 85.000 269.000 85.000 DrawSplineSection
	269.000 85.000 279.000 85.000 279.000 95.000 DrawSplineSection
	279.000 95.000 279.000 105.000 279.000 122.500 DrawSplineSection
	279.000 122.500 279.000 140.000 279.000 147.500 DrawSplineSection
	279.000 147.500 279.000 155.000 289.000 155.000 DrawSplineSection
	299.000 155.000 l gs col-1 s gr
n 291.000 153.000 m 299.000 155.000 l 291.000 157.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 169.000 45.000 m 274.000 45.000 l
	274.000 45.000 379.000 45.000 389.000 45.000 DrawSplineSection
	389.000 45.000 399.000 45.000 399.000 52.500 DrawSplineSection
	399.000 52.500 399.000 60.000 399.000 100.000 DrawSplineSection
	399.000 100.000 399.000 140.000 399.000 147.500 DrawSplineSection
	399.000 147.500 399.000 155.000 409.000 155.000 DrawSplineSection
	419.000 155.000 l gs col-1 s gr
n 411.000 153.000 m 419.000 155.000 l 411.000 157.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 169.000 95.000 m 174.000 95.000 l
	174.000 95.000 179.000 95.000 189.000 95.000 DrawSplineSection
	189.000 95.000 199.000 95.000 199.000 105.000 DrawSplineSection
	199.000 105.000 199.000 115.000 199.000 127.500 DrawSplineSection
	199.000 127.500 199.000 140.000 199.000 147.500 DrawSplineSection
	199.000 147.500 199.000 155.000 209.000 155.000 DrawSplineSection
	219.000 155.000 l gs col-1 s gr
n 211.000 153.000 m 219.000 155.000 l 211.000 157.000 l gs 2 setlinejoin col-1 s gr
	1 setlinecap [1 3.000000] 3.000000 setdash
% Open spline
n 457.000 192.000 m 465.000 192.000 l
	465.000 192.000 473.000 192.000 473.000 185.000 DrawSplineSection
	473.000 185.000 473.000 178.000 456.000 178.000 DrawSplineSection
	456.000 178.000 439.000 178.000 439.000 166.000 DrawSplineSection
	439.000 154.000 l gs col-1 s gr
	[] 0 setdash 0 setlinecap
n 437.000 162.000 m 439.000 154.000 l 441.000 162.000 l gs 2 setlinejoin col-1 s gr
	1 setlinecap [1 3.000000] 3.000000 setdash
% Open spline
n 185.000 21.000 m 171.500 21.000 l
	171.500 21.000 158.000 21.000 158.000 30.500 DrawSplineSection
	158.000 40.000 l gs col-1 s gr
	[] 0 setdash 0 setlinecap
n 160.000 32.000 m 158.000 40.000 l 156.000 32.000 l gs 2 setlinejoin col-1 s gr
	1 setlinecap [1 3.000000] 3.000000 setdash
% Open spline
n 379.000 23.000 m 364.500 24.000 l
	364.500 24.000 350.000 25.000 314.500 68.500 DrawSplineSection
	314.500 68.500 279.000 112.000 269.000 112.000 DrawSplineSection
	259.000 112.000 l gs col-1 s gr
	[] 0 setdash 0 setlinecap
n 267.000 114.000 m 259.000 112.000 l 267.000 110.000 l gs 2 setlinejoin col-1 s gr
	1 setlinecap [1 3.000000] 3.000000 setdash
% Open spline
n 380.000 23.000 m 368.500 26.000 l
	368.500 26.000 357.000 29.000 358.000 70.500 DrawSplineSection
	358.000 70.500 359.000 112.000 349.000 112.000 DrawSplineSection
	339.000 112.000 l gs col-1 s gr
	[] 0 setdash 0 setlinecap
n 347.000 114.000 m 339.000 112.000 l 347.000 110.000 l gs 2 setlinejoin col-1 s gr
	1 setlinecap [1 3.000000] 3.000000 setdash
% Open spline
n 380.000 23.000 m 373.000 28.000 l
	373.000 28.000 366.000 33.000 382.500 73.500 DrawSplineSection
	382.500 73.500 399.000 114.000 409.000 114.000 DrawSplineSection
	419.000 114.000 l gs col-1 s gr
	[] 0 setdash 0 setlinecap
n 411.000 112.000 m 419.000 114.000 l 411.000 116.000 l gs 2 setlinejoin col-1 s gr
/Times-Bold findfont 25.00 scalefont setfont
166 87 m 
gs 1 -1 scale (.) col-1 show gr
/Times-Bold findfont 25.00 scalefont setfont
166 97 m 
gs 1 -1 scale (.) col-1 show gr
/Times-Bold findfont 25.00 scalefont setfont
166 47 m 
gs 1 -1 scale (.) col-1 show gr
/Courier findfont 10.00 scalefont setfont
202 79 m 
gs 1 -1 scale (mod2_procDesc) col-1 show gr
/Courier findfont 10.00 scalefont setfont
201 56 m 
gs 1 -1 scale (modN_procDesc) col-1 show gr
/Courier findfont 10.00 scalefont setfont
203 171 m 
gs 1 -1 scale (mod1_procDesc) col-1 show gr
/Courier findfont 10.00 scalefont setfont
113 111 m 
gs 1 -1 scale (_gp_procDesc) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
383 26 m 
gs 1 -1 scale (per-module tables) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
189 23 m 
gs 1 -1 scale (global table) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
314 194 m 
gs 1 -1 scale (sequence of procedure descriptors) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 273 1269 a FN(Figure)j(3.23:)j(Tw)o(o-lev)o(el)c(descriptor)i(map,)d
(with)h(global)f(and)i(p)q(er-mo)q(dule)f(tables)287
1377 y(The)i(implemen)o(tatio)o(n)d(describ)q(ed)17 b(has)e(a)f
(completely)g(zero)i(o)o(v)o(erhead,)f(in)f(the)i(sense)224
1426 y(that)11 b(there)g(are)g(no)f(additional)f(instructions)i(whic)o
(h)f(need)h(to)f(b)q(e)h(executed)i(in)c(the)i(normal)224
1476 y(en)o(try)k(or)e(exit)h(of)f(an)o(y)g(pro)q(cedure.)19
b(Ho)o(w)o(ev)o(er,)14 b(there)h(is)e(a)h(subtle)g(seman)o(tic)e(p)q
(oin)o(t)h(whic)o(h)224 1526 y(needs)j(to)e(b)q(e)g(treated)i
(correctly)f(in)e(suc)o(h)i(systems.)k(An)o(y)14 b(lo)q(cal)f(v)n
(ariables)g(referenced)k(in)224 1576 y(b)q(oth)12 b(the)g(try-part)g
(and)f(the)i(handler)e(part)h(of)f(a)g(pro)q(cedure)j(m)o(ust)c(b)q(e)i
(stored)h(in)e(memory)224 1626 y(rather)i(than)f(in)g(registers,)h
(since)g(our)f(compilers)f(will)f(b)q(e)j(unable)f(to)f(unco)o(v)o(er)i
(de\014nition-)224 1676 y(use)20 b(relationships)f(whic)o(h)f(pass)i
(through)f(the)g FK(se)n(cr)n(et)g(c)n(ontr)n(ol)g(\015ow)k
FN(of)18 b(the)i(exception)224 1725 y(mec)o(hanism.)28
b(Th)o(us)18 b(all)f(suc)o(h)i(v)n(ariables)e(m)o(ust)g(b)q(e)i
(treated)g(as)f(though)f(they)i(had)f(the)224 1775 y(\\)p
FG(volatile)p FN(")f(attribute)i(discussed)i(on)e(page)g(42.)32
b(This)19 b(seman)o(tic)f(subtlet)o(y)h(places)h(a)224
1825 y(small)13 b(but)i(\014nite)g(b)q(ound)h(on)e(the)i(exten)o(t)g
(to)f(whic)o(h)f(suc)o(h)i(exception)g(handling)e(ma)o(y)f(b)q(e)224
1875 y(said)h(to)g(b)q(e)g FK(zer)n(o)h(overhe)n(ad)p
FN(.)224 2012 y FI(3.5)67 b(Finding)24 b(out)f(more)224
2128 y(3.6)67 b(Exercises)254 2219 y FN(3.1)254 2302
y(3.2)p eop
%%Page: 88 94
88 93 bop 224 274 a FN(88)562 b FL(CHAPTER)14 b(3.)32
b(R)o(UNTIME)13 b(OR)o(GANIZA)m(TION)p eop
%%Page: 89 95
89 94 bop 224 761 a FJ(Chapter)32 b(4)224 1028 y FP(Generating)40
b(In)m(termediate)224 1153 y(Co)s(de)609 1488 y
 10590863 18945146 0 0 10590863 18945146 startTexFig
 609 1488
a
%%BeginDocument: treearch.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-23.0 294.0 translate 0.585 -0.585 scale
1.000 setlinewidth
	[6.000000] 0 setdash
% Polyline
n 313 429 m 313 409 l  173 409 l  173 429 l  clp gs col-1 s gr
	[] 0 setdash
/Times-Bold findfont 11.00 scalefont setfont
183 422 m 
gs 1 -1 scale (optional optimization step) col-1 show gr
	[6.000000] 0 setdash
% Polyline
n 313 349 m 313 329 l  173 329 l  173 349 l  clp gs col-1 s gr
	[] 0 setdash
/Times-Bold findfont 11.00 scalefont setfont
183 342 m 
gs 1 -1 scale (optional optimization step) col-1 show gr
	[6.000000] 0 setdash
% Polyline
n 313 268 m 313 248 l  173 248 l  173 268 l  clp gs col-1 s gr
	[] 0 setdash
/Times-Bold findfont 11.00 scalefont setfont
183 261 m 
gs 1 -1 scale (optional optimization step) col-1 show gr
	[6.000000] 0 setdash
% Polyline
n 313 189 m 313 169 l  173 169 l  173 189 l  clp gs col-1 s gr
	[] 0 setdash
/Times-Bold findfont 11.00 scalefont setfont
183 182 m 
gs 1 -1 scale (optional optimization step) col-1 show gr
% Polyline
n 239 79 m 239 39 l  79 39 l  79 79 l  clp gs col-1 s gr
% Polyline
n 239 159 m 239 119 l  79 119 l  79 159 l  clp gs col-1 s gr
% Polyline
n 239 319 m 239 279 l  79 279 l  79 319 l  clp gs col-1 s gr
% Polyline
n 239 399 m 239 359 l  79 359 l  79 399 l  clp gs col-1 s gr
% Polyline
n 239 479 m 239 439 l  79 439 l  79 479 l  clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 159 19 m 159 39 l gs col-1 s gr
n 161.000 31.000 m 159.000 39.000 l 157.000 31.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 79 m 159 119 l gs col-1 s gr
n 161.000 111.000 m 159.000 119.000 l 157.000 111.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 159 m 159 199 l gs col-1 s gr
n 161.000 191.000 m 159.000 199.000 l 157.000 191.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 239 m 159 279 l gs col-1 s gr
n 161.000 271.000 m 159.000 279.000 l 157.000 271.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 319 m 159 359 l gs col-1 s gr
n 161.000 351.000 m 159.000 359.000 l 157.000 351.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 399 m 159 439 l gs col-1 s gr
n 161.000 431.000 m 159.000 439.000 l 157.000 431.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 479 m 159 499 l gs col-1 s gr
n 161.000 491.000 m 159.000 499.000 l 157.000 491.000 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
% Polyline
n 239 239 m 79 239 l  79 199 l  239 199 l  clp gs 0.95 setgray fill gr
gs col-1 s gr
/Times-Bold findfont 11.00 scalefont setfont
136 462 m 
gs 1 -1 scale (assembler) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
129 381 m 
gs 1 -1 scale (register binder) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
100 302 m 
gs 1 -1 scale (interpretive code selector) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
107 62 m 
gs 1 -1 scale (front-end tree builder) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
116 142 m 
gs 1 -1 scale (attribute evaluator) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
91 502 m 
gs 1 -1 scale (object file out) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
71 422 m 
gs 1 -1 scale (assembly language) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
39 342 m 
gs 1 -1 scale (virtual assembly language) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
81 262 m 
gs 1 -1 scale (abstract stack IR) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
62 181 m 
gs 1 -1 scale (attributed syntax tree) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
69 102 m 
gs 1 -1 scale (abstract syntax tree) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
97 21 m 
gs 1 -1 scale (source file in) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
135 221 m 
gs 1 -1 scale (tree walker) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 924 2793 a FN(89)p eop
%%Page: 90 96
90 95 bop 224 274 a FN(90)341 b FL(CHAPTER)14 b(4.)32
b(GENERA)m(TING)12 b(INTERMEDIA)m(TE)i(CODE)224 390 y
FI(4.1)67 b(T)-6 b(reew)n(alking)23 b(automata)224 485
y FN(The)13 b(pro)q(cess)g(of)e(pro)q(ducing)h(in)o(termediate)f(co)q
(de)i(from)d(an)h(abstract)i(syn)o(tax)f(tree)h(\()p
FK(AST)6 b FN(\))224 535 y(consists)18 b(of)f(w)o(alking)e(the)j(tree,)
g(emitting)d(the)j(co)q(de)g(as)f(eac)o(h)h(no)q(de)f(is)g(visited.)27
b(There)224 585 y(are)18 b(essen)o(tially)f(t)o(w)o(o)g(st)o(yles)h(of)
f(in)o(termediate)f(co)q(de)i(|)f(those)h(based)g(on)f
FO(tuples)p FN(,)e(and)224 635 y(those)g(based)g(on)f
FO(abstract)h(stac)o(k)h(mac)o(hines)p FN(.)g(W)m(e)e(shall)f(b)q(e)i
(c)o(hie\015y)g(concerned)h(with)224 685 y(abstract)h(stac)o(k)f(mac)o
(hine)e(forms,)g(but)i(it)f(is)g(as)h(w)o(ell)e(to)i(b)q(e)g(a)o(w)o
(are)f(that)h(eac)o(h)f(st)o(yle)h(has)224 734 y(b)q(oth)e(adv)n(an)o
(tages)e(and)h(disadv)n(an)o(tages.)k(Most)c(of)g(the)g(examples)f(in)h
(this)g(b)q(o)q(ok)g(uses)h(the)224 784 y FK(DCo)n(de)k
FN(represen)o(tation)d(detailed)f(in)g(the)g(app)q(endix.)287
836 y(It)20 b(is)h(imp)q(ortan)o(t)e(to)h(discuss)i(wh)o(y)e(it)g(is)h
(useful)f(to)h(ha)o(v)o(e)f(an)g(in)o(termediate)g(form)224
886 y(at)f(all.)33 b(There)21 b(are)e(t)o(w)o(o)g(distinct)g(reasons)i
(wh)o(y)e(a)f(compiler)g(migh)o(t)f(omit)h(this)h(step.)224
936 y(On)d(the)f(one)h(hand)f(simple)e(compilers,)h(particularly)g
(those)i(whic)o(h)f(are)h(targetted)g(on)f(a)224 986
y(single)f(arc)o(hitecture)h(migh)o(t)d(omit)f(this)j(step)g(in)f(the)i
(in)o(terests)g(of)e(simplicit)o(y)m(.)i(The)f(other)224
1035 y(circumstance)f(o)q(ccurs)h(for)e(those)h(co)q(de)g(generators)h
(whic)o(h)e(pro)q(duce)i(co)q(de)f(b)o(y)f FK(b)n(ottom-up)224
1085 y(tr)n(e)n(e-r)n(ewriting)p FN(.)j(F)m(or)e(these)i(co)q(de)f
(generators)g(the)g(trees)g(themselv)o(es)g(are)f(treated)i(as)e(the)
224 1135 y(in)o(termediate)h(form.)i(Suc)o(h)e(co)q(de)h(generators)g
(are)f(considered)i(in)d(detail)g(in)h(c)o(hapter)h(6.)287
1187 y(One)f(of)f(the)h(aims)e(of)h(an)h(in)o(termediate)e(represen)o
(tation)k(\()p FK(IR)r FN(\))d(is)h(to)f(pro)o(vide)h(a)f(clean)224
1237 y(in)o(terface)k(b)q(et)o(w)o(een)h(the)e(language)f(dep)q(enden)o
(t)j(computations)d(of)g(the)i(compiler)e(fron)o(t-)224
1287 y(end,)g(and)f(the)i(mac)o(hine)d(dep)q(enden)o(t)j(computations)d
(of)h(the)h(bac)o(k-end.)21 b(In)14 b(principle,)g(if)224
1336 y(a)f(su\016cien)o(tly)f(capable)g(in)o(termediate)g(represen)o
(tation)i(can)f(b)q(e)g(found,)e(a)i(collection)f(of)f
FM(n)224 1386 y FN(di\013eren)o(t)k(fron)o(t-ends)g(\(one)g(for)e(eac)o
(h)i(language\),)e(and)h FM(m)g FN(di\013eren)o(t)h(bac)o(k-ends)g
(\(one)g(for)224 1436 y(eac)o(h)g(mac)o(hine)d(t)o(yp)q(e\),)i(can)h(b)
q(e)f(used)h(to)f(generate)h FM(n)9 b Ft(\002)g FM(m)15
b FN(compilers.)287 1488 y(As)f(it)f(turns)h(out,)f(it)g(is)h
(di\016cult)f(to)g(mak)o(e)f(a)h(fron)o(t-end)h(completely)e(indep)q
(enden)o(t)j(of)224 1538 y(the)c(target)g(mac)o(hine,)e(at)h(least)g
(for)g(suc)o(h)h(fundamen)o(tal)d(matters)i(as)g(w)o(ord-size.)17
b(Ho)o(w)o(ev)o(er,)224 1587 y(the)g(c)o(hanges)h(required)f(from)e
(one)h(target)h(to)f(another)h(are)g(more)e(a)i(matter)e(of)h(param-)
224 1637 y(eterizing)j(the)g(fron)o(t-end)g(co)q(de)g(rather)g(than)f
(ha)o(ving)f(a)h(di\013eren)o(t)h(fron)o(t-end)g(for)f(eac)o(h)224
1687 y(di\013eren)o(t)d(mac)o(hine.)i(Similarly)l(,)11
b(it)i(is)h(di\016cult)f(to)h(mak)o(e)e(a)i(bac)o(k-end)g(en)o(tirely)g
(language)224 1737 y(indep)q(enden)o(t.)21 b(F)m(or)14
b(example,)f(man)o(y)g(optimizations)f(require)j(kno)o(wledge)f(ab)q
(out)g(whic)o(h)224 1787 y(addresses)h(could)d(p)q(ossibly)h
FK(alias)i FN(other)e(addresses.)20 b(Suc)o(h)13 b(kno)o(wledge)f(is)g
(v)o(ery)h(language)224 1837 y(dep)q(enden)o(t,)h(since)f(some)e
(languages)h(p)q(ermit)f(addresses)j(of)e(op)q(erands)h(to)f(b)q(e)h
(tak)o(en)f(in)g(an)224 1886 y(almost)g(unrestricted)k(manner,)d(while)
g(others)i(sp)q(eci\014cally)f(forbid)g(suc)o(h)g(practices.)287
1938 y(The)h(goal)e(of)g(creating)i(an)f(in)o(termediate)g(represen)o
(tation)i(whic)o(h)e(is)g(suitable)h(for)f FK(al)r(l)224
1988 y FN(languages)f(and)h(mac)o(hines)e(is)i(also)f(somewhat)f
(problematical.)k(It)d(is)h(not)f(hard)h(to)f(use)i(a)224
2038 y(common)7 b(form)h(for)h(languages)g(of)g(similar)e(t)o(yp)q(e)j
(suc)o(h)h(as)e(the)i FK(ALGOL)p FN(-based)e(group,)h(that)224
2088 y(is)i FK(Pasc)n(al)t FN(,)g FK(Mo)n(dula-2)6 b
FN(,)12 b FK(A)n(da)j FN(and)d FM(C)s FN(,)f(and)h(their)g(ob)r
(ject-orien)o(ted)h(extensions.)18 b(Ho)o(w)o(ev)o(er,)224
2138 y(it)13 b(app)q(ears)i(to)e(b)q(e)h(di\016cult)e(to)i(\014nd)f(a)g
(single)g FK(IR)j FN(whic)o(h)d(spans)h(languages)f(as)g(div)o(erse)h
(as)224 2187 y(these)f(and)e(the)g(functional)f(languages)g(suc)o(h)i
(as)f(Lisp,)g(and)g(the)g(new)o(er)h(pattern)g(matc)o(hing)224
2237 y(functional)f(languages.)17 b(Ev)o(en)12 b(more)e(sp)q(ecialized)
j(languages)e(suc)o(h)h(as)g(Prolog)f(ha)o(v)o(e)g(their)224
2287 y(o)o(wn)g(sp)q(ecialized)g(in)o(termediate)f(languages)g(with)h
(instructions)g(suited)g(to)g(the)g(primitiv)o(es)224
2337 y(of)j(that)h(language.)k(It)c(is)f(in)o(teresting)i(that)e(the)h
(most)f(widely)g(used)h(in)o(termediate)f(form)224 2387
y(for)f(prolog)f(is)h(the)h FK(Warr)n(en)g(A)o(bstr)n(act)g(Machine)s
FN(,)f(whic)o(h)h(is)f(an)f(abstract)i(stac)o(k)g(mac)o(hine.)224
2436 y(Ho)o(w)o(ev)o(er,)g(the)f(use)h(of)e(a)h(stac)o(k)g(is)g(almost)
e(the)j(only)e(similarit)o(y)e(with)i(the)i(abstract)g(stac)o(k)224
2486 y(mac)o(hines)f(used)i(for)f(pro)q(cedural)g(languages.)287
2538 y(Whic)o(hev)o(er)h(form)f(of)h(in)o(termediate)f(represen)o
(tation)j(is)e(c)o(hosen,)h(the)g(pro)q(duction)g(of)224
2588 y(in)o(termediate)d(co)q(de)i(is)e(p)q(erformed)g(b)o(y)h(some)f
(set)h(of)f(recursiv)o(e)i(pro)q(cedures.)21 b(These)14
b(pro-)224 2638 y(cedures)19 b(tra)o(v)o(erse)f(the)f(attributed)h(syn)
o(tax)e(tree,)i(emitting)d(instructions)j(in)e(the)h(in)o(ter-)224
2688 y(mediate)d(represen)o(tation.)22 b(Suc)o(h)16 b(a)e(set)i(of)e
(pro)q(cedures)j(mak)o(e)c(up)i(what)g(w)o(e)g(shall)f(call)g(a)p
eop
%%Page: 91 97
91 96 bop 224 274 a FL(4.1.)31 b(TREEW)-5 b(ALKING)14
b(A)o(UTOMA)m(T)m(A)719 b FN(91)224 390 y FO(tree-w)o(alking)14
b(automaton)p FN(.)224 526 y FH(4.1.1)56 b(T)-5 b(uple)18
b(in)n(termediate)e(forms)224 610 y FG(<<still)21 b(to)g(come>>)224
746 y FH(4.1.2)56 b(Abstract)19 b(stac)n(k)f(mac)n(hine)g(forms)224
830 y FN(Abstract)i(stac)o(k)f(mac)o(hine)f(in)o(termediate)g(co)q(de)h
(is)f(the)i(assem)o(bly)d(language)h(for)g(some)224 879
y(idealized)11 b(stac)o(k-orien)o(ted)h(mac)o(hine.)k(In)11
b(suc)o(h)h(a)f(mac)o(hine)e(the)j(op)q(erands)g(of)f(instructions)224
929 y(are)g(implicitly)c(on)i(an)h(ev)n(aluation)f(stac)o(k.)17
b(Binary)10 b(op)q(erations)g(are)g(assumed)g(to)g(p)q(op)g(their)224
979 y(t)o(w)o(o)i(op)q(erands)h(from)d(the)j(stac)o(k,)f(compute)g(the)
g(result)h(of)f(the)g(sp)q(eci\014ed)i(op)q(eration,)e(then)224
1029 y(push)i(the)f(result)h(bac)o(k)f(on)o(to)f(the)h(stac)o(k.)19
b(Unary)13 b(op)q(erations)g(are)g(assumed)f(to)h(p)q(op)g(their)224
1079 y(single)18 b(op)q(erand)g(from)e(the)i(stac)o(k,)g(compute)f(the)
i(result,)f(then)h(push)f(the)g(result)g(bac)o(k)224
1128 y(on)o(to)12 b(the)h(stac)o(k.)18 b(The)12 b(only)g(instructions)h
(whic)o(h)f(refer)h(to)f(memory)e(explicitly)h(are)i(those)224
1178 y(whic)o(h)i(load)f(a)h(new)g(v)n(alue)f(on)o(to)h(the)g(stac)o
(k,)h(or)e(whic)o(h)h(store)h(the)g(v)n(alue)e(curren)o(tly)i(on)o(to)
224 1228 y(the)d(top-of-stac)o(k)e(in)o(to)h(memory)m(.)i(These)f(load)
e(and)h(store)h(instructions)g(are)f(called)g FO(push)224
1278 y FN(and)i FO(p)q(op)f FN(instructions)i(resp)q(ectiv)o(ely)m(.)
287 1331 y(As)h(w)o(e)g(shall)f(see,)i(expressions)h(are)e(ev)n
(aluated)f(b)o(y)h(pushing)g(v)n(alues)f(corresp)q(onding)224
1381 y(to)h(the)g(lea)o(v)o(es)g(of)f(the)h(expressions)h(trees)g(on)o
(to)f(the)g(stac)o(k,)g(and)f(computing)f(the)j(result)224
1431 y(as)g(a)f(v)n(alue)f(on)h(the)h(top)f(of)f(the)i(stac)o(k.)25
b(It)17 b(is)f(an)g(en)o(tirely)g(simple)f(matter)g(to)h(generate)224
1481 y(the)d(co)q(de)f(to)g(do)f(this)h(during)g(a)f(depth-\014rst)i
(recursiv)o(e)g(tra)o(v)o(ersal)f(of)f(the)i(expression)g(tree.)224
1531 y(In)h(e\013ect)i(the)f(tra)o(v)o(ersal)f(translates)h(the)f(tree)
i(in)o(to)d FK(p)n(ost\014x)20 b FN(form.)c(It)e(is)g(the)h(ease)g(of)e
(this)224 1580 y(translation)h(whic)o(h)f(is)h(the)h(c)o(hief)e(adv)n
(an)o(tage)h(of)f(abstract)i(stac)o(k)f(mac)o(hine)e(forms.)287
1634 y(It)j(is)g(normal)d(for)j(the)h(push)f(and)g(p)q(op)g
(instructions)h(to)e(refer)i(to)f(memory)e(in)h(a)h(w)o(a)o(y)224
1684 y(whic)o(h)f(is)g(in)f(some)g(sense)j(isomorphic)c(to)i(the)g
(actual)g(run)o(time)f(organization.)j(Th)o(us)f(for)224
1734 y(the)h(st)o(yle)g(of)f(run)o(time)f(organization)g(whic)o(h)i(is)
f(con)o(v)o(en)o(tionally)f(used)i(for)f(Algol)f(family)224
1783 y(languages)i(w)o(e)g(w)o(ould)g(exp)q(ect)i(to)e(\014nd)g
(instructions)h(whic)o(h)f(push)h(\(that)f(is,)g(load\))g(v)n(al-)224
1833 y(ues)g(from:)i(statically)c(allo)q(cated)h(memory)d(lo)q
(cations,)i(kno)o(wn)g(o\013sets)j(within)d(the)h(lo)q(cal)224
1883 y(activ)n(ation)e(frame,)f(and)i(from)e(uplev)o(el)i(activ)n
(ation)e(frames.)287 1937 y(Since)g(it)g(is)g(usual)g(for)g(pro)q
(cedure)i(activ)n(ation)d(frames)h(to)g(b)q(e)h(allo)q(cated)e(on)h(a)g
(run)o(time)224 1986 y(stac)o(k,)h(w)o(e)g(m)o(ust)f(b)q(e)h
(scrupulous)h(in)e(distinguishing)f(b)q(et)o(w)o(een)j(the)f(stac)o(k)h
(of)e(the)h FK(abstr)n(act)224 2036 y FN(mac)o(hine,)21
b(and)f(the)i FK(runtime)h FN(stac)o(k)e(of)f(the)h(target)g(mac)o
(hine.)37 b(The)21 b(abstract)h(stac)o(k)224 2086 y(app)q(ears)c(only)e
(at)h(compile)f(time,)g(it)g(is)h(an)g(abstraction)g(whic)o(h)g(has)g
(realit)o(y)f(only)h(as)g(a)224 2136 y(data)d(structure)i(during)e(co)q
(de)g(generation.)287 2189 y(It)f(is)g(particularly)g(imp)q(ortan)o(t)e
(to)i(distinguish)g(b)q(et)o(w)o(een)h(the)g(abstract)g(and)f(run)o
(time)224 2239 y(stac)o(ks)i(when)g(discussing)g(pro)q(cedure)h
(calling.)i(As)c(describ)q(ed)i(in)e(c)o(hapter)h(3,)f(man)o(y)e(ma-)
224 2289 y(c)o(hines)18 b(pass)g(parameters)f(to)f(sub-programs)g(b)o
(y)h(pushing)g(v)n(alues,)g(in)f(order,)i(on)o(to)f(the)224
2339 y(run)o(time)f(stac)o(k.)25 b(Since)17 b(these)h(parameter)d(v)n
(alues)h(will)f(b)q(e)i(ev)n(aluated)f(on)o(to)g(the)h(top)f(of)224
2389 y(the)c(abstract)g(stac)o(k,)g(w)o(e)f(m)o(ust)f(ha)o(v)o(e)h
(some)f(explicit)h(mec)o(hanism)d(to)j(emit)f(an)h(instruction)224
2438 y(to)j(cop)o(y)g(the)g(top)g(of)f(the)h(abstract)h(stac)o(k)f(on)o
(to)f(the)h(top)g(of)f(the)h(run)o(time)f(stac)o(k.)18
b(Within)224 2488 y FK(DCo)n(de)i FN(w)o(e)c(ha)o(v)o(e)f(an)h
(abstraction)g(whic)o(h)f(represen)o(ts)k(the)d(transfer)h(of)e
(parameter)h(v)n(al-)224 2538 y(ues)g(to)f(the)g(required)h(parameter)f
(lo)q(cations,)f(wherev)o(er)i(they)g(ma)o(y)d(b)q(e.)21
b(There)16 b(are)g(t)o(w)o(o)224 2588 y(instructions)h(whic)o(h)e(p)q
(erform)g(this)h(action.)23 b FG(mkPar)15 b FN(transfers)i(a)e(single)g
(item)g(from)f(the)224 2638 y(abstract)h(stac)o(k)f(to)g(the)g
(parameter)f(lo)q(cation.)k(It)d(tak)o(es)g(parameters)g(whic)o(h)f(sp)
q(ecify)i(the)224 2688 y(size)e(of)d(the)i(ob)r(ject)h(and)e(the)h
(o\013set)g(in)f(the)h(assem)o(bly)f(area.)17 b FG(blkPar)10
b FN(transfers)j(an)e(en)o(tire,)p eop
%%Page: 92 98
92 97 bop 224 274 a FN(92)341 b FL(CHAPTER)14 b(4.)32
b(GENERA)m(TING)12 b(INTERMEDIA)m(TE)i(CODE)795 747 y
FK(IR)795 799 y FN(\014le)1282 1005 y(selection)1264
934 y(instruction)1282 630 y(fron)o(t-end)1264 709 y(tree-w)o(alk)o(er)
p 1204 578 307 4 v 1204 728 4 150 v 1507 728 V 1204 731
307 4 v 1204 878 V 1204 1028 4 150 v 1507 1028 V 1204
1031 307 4 v 379 1028 V 379 1178 4 150 v 682 1178 V 379
1181 307 4 v 379 578 V 379 653 4 75 v 682 653 V 379 656
307 4 v 379 878 V 379 953 4 75 v 682 953 V 379 956 307
4 v 379 353 V 379 503 4 150 v 682 503 V 379 506 307 4
v 677 809 a Fg(\022\021)677 726 y(\023\020)439 1084 y
FN(instruction)458 1155 y(selection)439 484 y(tree-w)o(alk)o(er)458
405 y(fron)o(t-end)p 1356 878 2 150 v 1357 878 a FC(?)1384
784 y FN(pro)q(cedural)1384 848 y(in)o(terface)p 532
785 150 2 v 532 878 2 94 v 532 878 a FC(?)p 532 747 V
532 747 150 2 v 641 746 a(-)p 532 1028 2 75 v 532 1028
a(?)p 532 578 V 532 578 a(?)551 1002 y FN(pro)q(cedural)h(in)o(terface)
551 548 y(pro)q(cedural)g(in)o(terface)458 930 y(\014le)e(parser)439
634 y(\014le)h(writer)516 1273 y(Figure)g(4.1:)j(Structure)f(with)e
(and)f(without)h FK(IR)i FN(\014le)224 1406 y(structured)h(v)n(ariable)
c(to)h(the)h(parameter)f(lo)q(cation.)19 b(It)14 b(has)g(parameters)h
(for)f(size,)g(o\013set)224 1456 y(and)g(source)h(alignmen)o(t)d(b)q
(oundary)m(.)224 1564 y FO(File)j(and)g(pro)q(cedural)e(in)o(terfaces)
224 1641 y FN(The)19 b(in)o(terface)g(b)q(et)o(w)o(een)h(the)f(tree-w)o
(alking)f(automaton)f(and)h(the)h(bac)o(k)f(end)h(ma)o(y)e(b)q(e)224
1691 y(a)h(\014le)f(whic)o(h)g(con)o(tains)h(some)e(represen)o(tation)j
(of)e(the)h(stream)f(of)g FK(IR)i FN(instructions,)f(or)224
1741 y(it)h(ma)o(y)e(b)q(e)j(simply)d(a)i(set)h(of)f(pro)q(cedures)i
(in)e(the)h(bac)o(k)f(end)h(whic)o(h)f(are)g(called)g(from)224
1791 y(the)d(tree-w)o(alk)o(er.)21 b(The)15 b(di\013erence)i(b)q(et)o
(w)o(een)f(these)g(t)o(w)o(o)f(do)q(es)g(not)g(a\013ect)h(the)f(w)o(a)o
(y)f(that)224 1840 y(the)j(tree-w)o(alk)o(er)f(op)q(erates.)26
b(It)16 b(th)o(us)g(mak)o(es)f(little)g(di\013erence)j(to)e(the)g
(material)e(of)h(this)224 1890 y(c)o(hapter.)287 1940
y(Let)c(us)h(supp)q(ose)h(that)e(the)h(tree)h(w)o(alking)c(automaton)g
(in)i(the)h(fron)o(t-end)g(decides)g(that)224 1990 y(some)k(kind)g(of)f
FK(push)20 b FN(instruction)d(is)f(required.)26 b(W)m(e)16
b(will)f(assume)h(that)g(this)g(results)i(in)224 2040
y(some)e FK(Push)21 b FN(pro)q(cedure)e(b)q(eing)e(in)o(v)o(ok)o(ed.)26
b(In)17 b(the)h(case)f(of)g(a)f(\014le)h(based)h(in)o(terface,)g(the)
224 2090 y FK(Push)g FN(pro)q(cedure)f(will)c(write)h(a)g(push)h
(instruction)g(to)f(the)h(\014le,)f(or)g(bu\013er.)20
b(In)15 b(the)f(bac)o(k-)224 2139 y(end)h(a)g(\014le)f(parser)i(will)d
(recognize)j(the)f(push)g(instruction,)g(and)f(call)g(a)g
FK(Push)k FN(pro)q(cedure)224 2189 y(in)e(the)g(in)o(terpretiv)o(e)h
(co)q(de)f(generator.)25 b(In)16 b(the)g(case)h(of)e(the)i(pro)q
(cedural)f(in)o(terface,)h(the)224 2239 y(tree)h(w)o(alk)o(er)f
(directly)f(calls)h(the)g FK(Push)j FN(pro)q(cedure)f(in)d(the)i(bac)o
(k-end.)26 b(The)17 b(pro)q(cess)i(of)224 2289 y(writing)f(to)g(the)h
(\014le)f(in)g(the)h(fron)o(t-end)g(and)f(reading)g(from)f(the)i
(\014le)f(in)g(the)h(bac)o(k-end)224 2339 y(ha)o(v)o(e)13
b(simply)d(disapp)q(eared.)19 b(It)12 b(is)g(often)h(con)o(v)o(enien)o
(t)g(to)f(generate)i(a)e(new)h(compiler)e(with)224 2389
y(a)17 b(\014le)f(in)o(terface,)h(and)g(to)f(c)o(hange)h(to)f(a)h(pro)q
(cedural)g(in)o(terface)g(at)g(some)e(later)i(stage)g(in)224
2438 y(dev)o(elopmen)o(t)c(\(see)j(\014gure)e(4.1\).)287
2488 y(In)h(almost)f(all)g(compilers)h(it)g(is)g(necessary)j(to)d(p)q
(erform)g FK(some)h FN(kind)f(of)g(bu\013ering)h(of)224
2538 y(the)g(instruction)g(stream,)e(at)h(least)g(on)g(a)g(p)q(er-pro)q
(cedure)j(basis.)j(W)m(e)15 b(shall)f(explore)i(the)224
2588 y(consequences)k(of)c(this)g(fact,)h(and)f(the)h(options)f(for)g
(resolving)g(the)i(problem.)24 b(In)17 b(order)224 2638
y(to)e(motiv)n(ate)e(the)i(discussion)h(w)o(e)f(shall,)f(as)g(an)h
(example,)e(note)j(that)e(it)h(is)g(necessary)h(to)224
2688 y(kno)o(w)i(the)g(size)g(of)f(the)h(pro)q(cedure)i(activ)n(ation)c
(frame)h(during)g(the)h(pro)q(cedure)i(prolog.)p eop
%%Page: 93 99
93 98 bop 224 274 a FL(4.1.)31 b(TREEW)-5 b(ALKING)14
b(A)o(UTOMA)m(T)m(A)719 b FN(93)224 390 y(No)o(w,)19
b(the)g(size)g(of)f(the)h(stac)o(k)f(frame)f(cannot)i(b)q(e)g(computed)
f(in)g(the)g(fron)o(t-end,)h(since)224 440 y(additional)c(lo)q(cations)
h(ma)o(y)f(need)i(to)g(b)q(e)g(allo)q(cated)f(for)g(spilling)f
(registers.)28 b(This)16 b(need)224 490 y(b)q(ecomes)h(apparen)o(t)g
(only)f(in)g(the)i(\014nal)e(stages)h(of)f(co)q(de)i(generation.)26
b(W)m(e)17 b(ma)o(y)d(attac)o(k)224 540 y(this)g(problem)f(sev)o(eral)h
(di\013eren)o(t)h(w)o(a)o(ys.)287 590 y(In)c(the)h(reference)i(arc)o
(hitecture)f(used)f(in)f(this)g(b)q(o)q(ok,)g(the)h(virtual)e(assem)o
(bly)g(language)224 640 y(\()p FK(V)l(AL)p FN(\))i(is)g(bu\013ered)h
(for)e(eac)o(h)i(pro)q(cedure.)19 b(After)12 b(the)h
FK(V)l(AL)e FN(has)h(b)q(een)h(pro)q(duced)g(and)f(the)224
689 y(registers)i(allo)q(cated,)e(the)g(size)h(of)f(the)g(stac)o(k)h
(frame)e(is)h(\014nally)f(kno)o(wn.)17 b(A)o(t)12 b(this)g(stage)h(the)
224 739 y(pro)q(cedure)19 b(prolog)d(ma)o(y)g(b)q(e)h(written)h(to)f
(the)g(output)h(\014le,)f(the)h(instructions)f(from)f(the)224
789 y FK(V)l(AL)f FN(bu\013er)i(written)f(to)f(the)h(output)f(\014le,)h
(and)f(the)h(pro)q(cedure)h(epilog)e(written.)23 b(Since)224
839 y(almost)10 b(all)h(compiler)f(optimizations)f(require)k(whole)e
(pro)q(cedure)i(b)q(o)q(dies)g(to)e(b)q(e)h(bu\013ered,)224
889 y(this)i(is)g(the)h(metho)q(d)e(of)g(c)o(hoice)h(for)g(optimizing)d
(compilers.)287 938 y(An)18 b(alternativ)o(e,)h(used)h(b)o(y)e(man)o(y)
e(compilers)i(whic)o(h)g(pass)h(their)g(output)f(to)h(fully-)224
988 y(featured)c(assem)o(blers,)e(is)g(to)g(lea)o(v)o(e)g(the)h(stac)o
(k)g(frame)e(size)i(as)g(a)f(sym)o(b)q(olic)f(v)n(alue.)17
b(In)c(this)224 1038 y(alternativ)o(e,)h(the)g(co)q(de)h(generator)g
(emits)d(co)q(de)j(whic)o(h)f(lo)q(oks)f(as)h(follo)o(ws)295
1117 y FF(.procentry)i(_Example)472 1163 y(sub)i(sp,FRAME,s)o(p)295
1208 y(;)39 b(procedure)16 b(prolog)472 1254 y(...)295
1300 y(;)39 b(procedure)16 b(epilog)295 1345 y(.endp)295
1391 y(#define)56 b(FRAME)h(28)224 1473 y FN(The)13 b(general)e
(facilit)o(y)f(for)i(referring)g(to)g(macros)f(whic)o(h)g(are)h
(de\014ned)h(later)f(has)g(b)q(een)g(used)224 1522 y(to)k(substitute)h
(the)g(correct)g(frame)e(size)h(in)o(to)f(the)i(resulting)f(ob)r(ject)g
(co)q(de.)25 b(In)16 b(the)g(case)224 1572 y(that)e(the)h(frame)d(size)
j(is)f(zero,)g(the)g(instruction)g(ma)o(y)e(b)q(e)j(transformed)e(in)o
(to)g(a)g(commen)o(t)224 1622 y(b)o(y)h(the)h(macro)d(expansion.)287
1672 y(Of)f(course,)i(this)f(metho)q(d)f(simply)e(p)q(ostp)q(ones)k
(the)g(need)f(to)g(bu\013er)g(the)h(co)q(de)f(\(or)g(read)224
1722 y(the)j(source)g(t)o(wice\))f(to)g(the)h(assem)o(bler.)287
1771 y(All)k(bu\013ering)j(ma)o(y)c(b)q(e)k(a)o(v)o(oided)d(in)i(v)o
(ery)g(simple)e(compilers)g(whic)o(h)i(write)g(their)224
1821 y(output)g(directly)g(to)f(an)g(ob)r(ject)h(\014le,)h(using)e(t)o
(w)o(o)g(di\013eren)o(t)h(metho)q(ds.)38 b(Firstly)m(,)20
b(it)g(is)224 1871 y(p)q(ossible)15 b(for)e(pro)q(cedures)k(to)c(b)q
(egin)h(with)g(a)g(lab)q(el,)f(but)h(for)g(the)g(pro)q(cedure)i(en)o
(try)f(p)q(oin)o(t)224 1921 y(and)f(prolog)e(to)i(b)q(e)g(written)g
FK(after)k FN(the)c(pro)q(cedure)h(b)q(o)q(dy)m(.)j(In)13
b(this)h(case)h(the)f(prolog)e(ends)224 1971 y(with)k(a)f(jump)f(to)h
(the)i(\014rst)f(lab)q(el.)23 b(This)15 b(has)h(some)f(run)o(time)f
(cost,)j(but)e(is)h(v)o(ery)g(simple)224 2021 y(for)e(the)g(compiler)f
(writer.)295 2100 y FF(.procentry)j(_Example)423 2145
y(jmp)j(endLabel)295 2191 y(realEntry:)423 2237 y FE(c)n(o)n(de)13
b(b)n(o)n(dy)f(of)h(pr)n(o)n(c)n(e)n(dur)n(e)295 2282
y FF(;)39 b(procedure)16 b(epilog)423 2328 y FE(r)n(estor)n(e)d(save)n
(d)f(c)n(al)r(le)n(e-sav)o(es)f(r)n(e)n(gisters)423 2374
y FF(return)295 2419 y(endLabel:)423 2465 y(sub)19 b(sp,28,sp)423
2511 y FE(save)13 b(r)n(e)n(quir)n(e)n(d)f(c)n(al)r(le)n(e-sav)o(es)f
(r)n(e)n(gisters)423 2556 y FF(jmp)19 b(realEntry)224
2638 y FN(It)e(should)g(b)q(e)g(noted)g(that)g(when)g(co)q(de)g(is)g
(not)f(bu\013ered,)j(the)e(n)o(um)o(b)q(er)f(of)g(callee-sa)o(v)o(es)
224 2688 y(registers)h(whic)o(h)d(need)i(to)e(b)q(e)h(freed)h(is)e(not)
h(kno)o(wn)f(un)o(til)g(after)g(register)i(allo)q(cation)d(has)p
eop
%%Page: 94 100
94 99 bop 224 274 a FN(94)341 b FL(CHAPTER)14 b(4.)32
b(GENERA)m(TING)12 b(INTERMEDIA)m(TE)i(CODE)224 390 y
FN(b)q(een)21 b(completed.)34 b(Therefore)20 b(this)g(example)e(defers)
i(the)g(emission)e(of)h(co)q(de)h(to)f(sa)o(v)o(e)224
440 y(registers)d(un)o(til)d(after)h(the)g(co)q(de)h(b)q(o)q(dy)f(has)g
(b)q(een)h(emitted.)287 495 y(As)g(a)g(\014nal)f(alternativ)o(e,)h(an)g
(estimate)f(of)h(the)g(frame)f(size)i(ma)o(y)d(b)q(e)j(made,)d(and)i
(this)224 545 y(v)n(alue)h(imm)o(ediately)d(written)j(to)g(the)g
(output)g(\014le.)24 b(On)16 b(those)g(comparativ)o(ely)e(rare)i(o)q
(c-)224 595 y(casions)d(that)g(the)g(size)g(has)g(b)q(een)g
(underestimated,)g(a)f(\014le)g(p)q(osition)g(seek-and-o)o(v)o(erwrite)
224 645 y(is)i(required.)287 700 y(In)i(the)i(most)d(general)i
(structure,)i(a)d(tree)i(w)o(alking)d(automaton)g(ma)o(y)f(pro)q(duce)k
(one)224 750 y(or)d(more)f(data)h(streams)f(as)h(output)h(during)e(its)
h(tra)o(v)o(ersal)g(of)f(the)i FK(AST)6 b FN(.)14 b(The)h(reference)224
799 y(arc)o(hitecture)k(used)e(in)f(this)g(b)q(o)q(ok)h(has)f(a)g
(single)g(stream,)g(but)h(requires)h(p)q(er-pro)q(cedure)224
849 y(bu\013ering)h(during)e(the)i(co)q(de)g(generation)f(pro)q(cess.)
32 b(The)19 b(reference)h(arc)o(hitecture)g(also)224
899 y(assumes)14 b(that)g(certain)h(in)o(ter-pro)q(cedural)f
(information)d(is)j(computed)g(during)f(seman)o(tic)224
949 y(analysis)h(of)f(the)h FK(AST)6 b FN(.)287 1004
y(Some)i(compilers)g(defer)i(m)o(uc)o(h)f(of)f(this)i(computation)e(to)
h(the)h(bac)o(k-end,)g(b)o(y)f(pro)q(ducing)224 1054
y(t)o(w)o(o)k(output)h(streams.)k(T)o(ypically)11 b(the)j(\014rst)g(of)
f(these)i(streams)e(con)o(tains)h(the)g FK(IR)h FN(for)e(the)224
1104 y(b)q(o)q(dy)j(of)g(eac)o(h)g(pro)q(cedure,)i(while)e(the)g
(second)h(has)g(housek)o(eeping)f(information)d(ab)q(out)224
1153 y(eac)o(h)g(pro)q(cedure,)h(information)c(on)i(p)q(ossible)h
(aliasing)d(of)i(addresses,)i(and)f(p)q(erhaps)g(some)224
1203 y(in)o(terpro)q(cedural)18 b(information.)24 b(In)17
b(suc)o(h)g(cases)h(the)g(second)f(stream)g(ma)o(y)d(need)k(to)f(b)q(e)
224 1253 y(read)f(to)e(completion)f(b)q(efore)j(the)f(pro)q(cessing)h
(of)e(the)h(\014rst)h(ma)o(y)c(b)q(egin.)21 b(In)14 b(suc)o(h)i(a)e
(case)224 1303 y(the)d(second)h(stream)d(ma)o(y)g(ha)o(v)o(e)h(a)g(pro)
q(cedural)g(in)o(terface,)i(but)e(the)h(\014rst)g(m)o(ust)e(b)q(e)i
(bu\013ered)224 1353 y(in)j(a)f(\014le.)224 1488 y FO(T)o(yp)q(ed)j
(and)f(un)o(ytp)q(ed)e(instruction)o(s)224 1575 y FN(The)k(op)q
(erations)f(of)g(the)g(in)o(termediate)g(co)q(de)h(ma)o(y)d(b)q(e)j(t)o
(yp)q(ed)f(either)h(explicitly)e(or)h(im-)224 1625 y(plicitly)m(.)25
b(F)m(or)16 b(example)g(the)h(co)q(de)h(generator)f(ma)o(y)e(infer)i
(that)g(an)f FK(add)22 b FN(instruction)17 b(in)224 1675
y(an)c(in)o(termediate)f(co)q(de)i(stream)e(should)h(generate)h(a)e
(\015oating)g(p)q(oin)o(t)g(add)h(op)q(eration)g(if)f(it)224
1724 y(is)k(kno)o(wn)g(that)g(the)g(top)g(of)f(the)i(abstract)f(stac)o
(k)h(curren)o(tly)f(con)o(tains)g(a)g(\015oating)f(p)q(oin)o(t)224
1774 y(op)q(erand.)k(The)13 b(adv)n(an)o(tage)f(of)h(using)g
(implicitly)d(t)o(yp)q(ed)j(instructions)h(in)f(the)h(in)o(termedi-)224
1824 y(ate)h(represen)o(tation)h(is)f(that)f(the)h(n)o(um)o(b)q(er)f
(of)g(di\013eren)o(t)i(op)q(eration)e(co)q(des)i(is)e(k)o(ept)h(to)g
(an)224 1874 y(absolute)i(minim)n(um)o(.)23 b(Ho)o(w)o(ev)o(er,)18
b(it)e(requires)i(extra)f(housek)o(eeping)h(op)q(erations)e(in)h(the)
224 1924 y(co)q(de)d(generator)g(to)f(trac)o(k)h(the)g(t)o(yp)q(e)f(of)
g(eac)o(h)h(op)q(erand)f(on)g(the)h(abstract)g(stac)o(k.)k(The)c(in-)
224 1973 y(termediate)h(form)d(used)j(for)f(the)h(examples)f(in)g(this)
g(b)q(o)q(ok)g(are)h(explicitly)e(t)o(yp)q(ed.)20 b(There)224
2023 y(are)f(th)o(us)g(separate)h(instructions)g(for)e(in)o(teger)h
(addition,)f(and)g(for)h(single)f(and)g(double)224 2073
y(precision)d(\015oating)e(p)q(oin)o(t)g(addition.)224
2238 y FI(4.2)67 b(In)n(tro)r(duction)24 b(to)e(D-Co)r(de)224
2339 y FN(The)f(in)o(termediate)f(represen)o(tation)i(used)f(in)f(the)h
(examples)f(in)g(this)g(b)q(o)q(ok)g(is)h(called)224
2389 y FK(DCo)n(de)s FN(,)d(for)e(somewhat)f(obscure)j(reasons.)27
b FK(DCo)n(de)20 b FN(is)d(a)f(v)o(ery)h(lo)o(w)e(lev)o(el)i(language)e
(as)224 2438 y(abstract)e(stac)o(k)f(mac)o(hine)e(languages)h(go,)h
(since)g(it)f(do)q(es)i(not)e(ev)o(en)h(treat)h(the)f
FK(lo)n(ad)k FN(op)q(era-)224 2488 y(tions)d(whic)o(h)h(push)f(data)g
(on)o(to)g(the)h(stac)o(k)f(of)g(the)h(abstract)g(stac)o(k)f(mac)o
(hine)f(as)h(primitiv)o(e)224 2538 y(op)q(erations.)20
b(Instead)15 b(the)g(language)e(has)i(v)n(arious)e FK(push)j(addr)n
(ess)i FN(op)q(erations,)c(and)g(v)n(ar-)224 2588 y(ious)i
FK(der)n(efer)n(enc)n(e)i FN(op)q(erations.)24 b(The)16
b(justi\014cation)f(for)g(this)h(rather)h(un)o(usual)e(structure)224
2638 y(is)j(the)h(realization)f(that)g(with)g(man)o(y)e(of)h(the)i(new)
g FK(RISC)24 b FN(mac)o(hine)17 b(arc)o(hitectures)k(an)224
2688 y(address)c(ma)o(y)c(b)q(e)j(a)f(v)n(aluable)f(common)f(sub)q
(expression.)24 b(Th)o(us)16 b(an)f(in)o(termediate)f(co)q(de)p
eop
%%Page: 95 101
95 100 bop 224 274 a FL(4.2.)31 b(INTR)o(ODUCTION)14
b(TO)g(D-CODE)706 b FN(95)224 390 y(whic)o(h)16 b(separates)h(the)f
(addresses)h(and)e(the)i(v)n(alues)e(whic)o(h)g(they)h(p)q(oin)o(t)f
(to)g(pro)o(vides)h(ad-)224 440 y(ditional)d(opp)q(ortunities)h(for)f
(optimization.)287 491 y(The)i(full)e FK(DCo)n(de)18
b FN(instruction)d(set)g(app)q(ears)g(as)g(the)g(app)q(endix)g(A.)f
(Here)h(w)o(e)g(quic)o(kly)224 541 y(o)o(v)o(erview)f(a)g(n)o(um)o(b)q
(er)f(of)g(features)i(of)f(the)g FK(IR)r FN(.)224 662
y FH(4.2.1)56 b(Loads)18 b(and)i(stores)224 740 y FO(Load)c(instructi)o
(on)o(s)224 818 y FN(Data)h(are)g(pushed)h(on)o(to)e(the)i(stac)o(k)f
(of)g(the)g(abstract)h(stac)o(k)f(mac)o(hine)f(b)o(y)h(instructions)224
868 y(whic)o(h)f(push)g(addresses)i(of)e(v)n(arious)f(kinds,)g(and)h
(are)g(dereferenced)j(b)o(y)d(v)n(arious)f FK(der)n(efX)224
918 y FN(instructions.)29 b(There)18 b(are)g(three)g(di\013eren)o(t)g
(kinds)f(of)g(addresses)i(whic)o(h)e(o)q(ccur.)29 b(These)224
967 y(are)16 b(the)g(addresses)h(of)d(statically)g(allo)q(cated)h(ob)r
(jects)h(\()p FK(glob)n(al)g(addr)n(esses)s FN(\),)g(addresses)h(of)224
1017 y(ob)r(jects)j(in)e(the)h(curren)o(t)h(stac)o(k)e(frame)f(\()p
FK(lo)n(c)n(al)i(addr)n(esses)s FN(\),)h(and)e(addresses)i(of)e(ob)r
(jects)224 1067 y(whic)o(h)c(are)g(accessed)j(via)c(the)h(displa)o(y)f
(\()p FK(uplevel)i(addr)n(esses)s FN(\).)287 1118 y(The)f(instructions)
h(in)e FK(DCo)n(de)k FN(whic)o(h)d(push)h(addresses)h(are)e(|)328
1203 y FG(pshAdr)20 b FK(identi\014er)14 b FN([)p Ft(\006)p
FK(o\013set)p FN(])h({)g(push)g(the)h(address)g(of)f(the)g(statically)f
(allo-)420 1253 y(cated)g(v)n(ariable)f FK(identi\014er)18
b FN(on)o(to)c(the)g(stac)o(k)328 1321 y FG(pshFP)20
b Ft(\006)p FK(o\013set)14 b FN({)f(push)h(the)g(address)h(at)e(the)h
(giv)o(en)f(o\013set)h(from)e(the)i(frame)420 1371 y(p)q(oin)o(ter)g
(fp)f Ft(\006)p FK(o\013set)328 1439 y FG(pshDsp)20 b
FK(index,)p Ft(\006)c FK(o\013set)f FN({)g(push)g(the)h(address)g
(o\013set)g(from)d(the)i(giv)o(en)g(dis-)420 1489 y(pla)o(y)d(elemen)o
(t)i(b)o(y)f(the)i(giv)o(en)e(amoun)o(t)f(|)i FK(display)t
FN([)p FK(index)5 b FN(])13 b Ft(\006)h FK(o\013set)q
FN(.)224 1575 y(Where)i(particular)e(op)q(erations)g(require)h
(parameters,)f(whic)o(h)h(all)e(the)i(pushes)g(do,)f(these)224
1624 y(follo)o(w)g(the)j(op)q(co)q(de.)25 b(Optional)15
b(parameters)h(are)g(sho)o(wn)g(in)g(square)g(brac)o(k)o(ets)h(in)f
(these)224 1674 y(descriptions.)287 1725 y(There)g(is)f(a)g
(dereference)j(instruction)d(for)g(ev)o(ery)h(di\013eren)o(t)g(t)o(yp)q
(e)f(of)g(op)q(erand)g(whic)o(h)224 1775 y(the)j(mac)o(hine)e(supp)q
(orts.)29 b(These)18 b(basic)g(data)e(t)o(yp)q(es)j(are)e
FK(signe)n(d)h(byte,)h(unsigne)n(d)f(byte,)224 1824 y(signe)n(d)f
(halfwor)n(d,)f(unsigne)n(d)i(halfwor)n(d,)d(wor)n(d,)i(\015o)n(at,)g
(double)p FN(.)24 b(All)15 b(of)g(the)h(examples)f(in)224
1874 y(this)g(c)o(hapter)h(use)f(w)o(ord-sized)g(op)q(erands,)g(in)f
(the)h(in)o(terests)h(of)e(k)o(eeping)h(the)g(n)o(um)o(b)q(er)f(of)224
1924 y(instructions)h(small)548 1909 y Fz(1)564 1924
y FN(.)287 1975 y(The)d(instructions)g(whic)o(h)f(dereference)k
(addresses)e(on)f(the)g(abstract)g(stac)o(k)g(follo)o(w.)j(In)224
2025 y(eac)o(h)g(case)g(the)f(dereferenced)j(v)n(alue)c(replaces)i(the)
g(address)g(on)f(the)g(stac)o(k.)328 2110 y FG(derefSB)19
b FN({)11 b(dereferences)j(the)d(p)q(oin)o(ter)g(to)f
FK(signe)n(d)j(byte)g FN(on)e(the)g(top-of-stac)o(k)328
2178 y FG(derefUB)19 b FN({)d(dereferences)j(the)e(p)q(oin)o(ter)f(to)g
FK(unsigne)n(d)h(byte)i FN(on)d(the)h(top-of-)420 2228
y(stac)o(k)328 2296 y FG(derefS16)i FN({)g(dereferences)j(the)e(p)q
(oin)o(ter)f(to)g FK(signe)n(d)g(16-bit)h(wor)n(d)i FN(on)d(the)420
2346 y(top-of-stac)o(k)328 2414 y FG(derefU16)g FN({)14
b(dereferences)j(the)d(p)q(oin)o(ter)g(to)g FK(unsigne)n(d)h(16-bit)g
(wor)n(d)i FN(on)d(the)420 2464 y(top-of-stac)o(k)328
2532 y FG(derefW)20 b FN({)13 b(dereferences)18 b(the)c(p)q(oin)o(ter)g
(to)g FK(wor)n(d)j FN(on)d(the)h(top-of-stac)o(k)p 224
2570 577 2 v 271 2597 a Fy(1)288 2609 y Fx(64-bit)8 b(extensions)g(of)i
Fu(DCo)n(de)j Fx(still)c(use)h Fu(wor)n(d)j Fx(for)d(the)f(\\natural)f
(mac)o(hine)g(w)o(ord)h(size",)g(but)h(include)224 2648
y(an)e(additional)e(in)o(termediat)o(e-siz)o(ed)f(pair)j(of)g(t)o(yp)q
(es)f({)h Fu(unsigne)n(d)j(mid-wor)n(d,)g(signe)n(d)g(mid-wor)n(d,)e
Fx(for)f(32-bit)224 2688 y(data)p eop
%%Page: 96 102
96 101 bop 224 274 a FN(96)341 b FL(CHAPTER)14 b(4.)32
b(GENERA)m(TING)12 b(INTERMEDIA)m(TE)i(CODE)328 390 y
FG(derefF)20 b FN({)13 b(dereferences)18 b(the)c(p)q(oin)o(ter)g(to)g
FK(\015o)n(at)k FN(on)c(the)g(top-of-stac)o(k)328 455
y FG(derefD)20 b FN({)13 b(dereferences)18 b(the)c(p)q(oin)o(ter)g(to)g
FK(double)j FN(on)d(the)g(top-of-stac)o(k)224 533 y(It)g(is)f(also)g
(necessary)j(to)d(push)h(literals)f(on)o(to)g(the)h(stac)o(k:)k(this)c
(is)f(done)h(b)o(y)f(a)g(push)h(literal)224 583 y(instruction,)g(with)g
(just)g(one)g(sp)q(ecial)g(case)h(|)328 661 y FG(pshLit)20
b FK(numb)n(er)14 b FN({)f(push)i(the)f(literal)f(n)o(um)o(b)q(er)g(on)
o(to)h(the)g(stac)o(k)328 725 y FG(pshZ)20 b FN({)14
b(push)g(an)g(in)o(teger)g(zero)h(on)o(to)e(the)i(stac)o(k)224
832 y FO(Store)g(instructi)o(ons)224 909 y FN(The)i(store)g
(instructions)g(tak)o(e)f(the)g(datum)f(one)h(b)q(elo)o(w)g(the)h
(top-of-stac)o(k,)e(and)h(assigns)224 958 y(that)g(v)n(alue)e(to)i(the)
f(address)i(on)e(the)h(top)f(of)g(the)h(stac)o(k.)23
b(Both)15 b(data)g(are)h(p)q(opp)q(ed.)23 b(The)224 1008
y(instructions)15 b(are)f(|)328 1087 y FG(assignB)19
b FN({)e(assigns)h(the)f(least)h(signi\014can)o(t)e FK(byte)k
FN(of)d(the)h(w)o(ord)f(second)h(on)420 1136 y(the)c(stac)o(k)g(to)g
(the)h(address)g(sp)q(eci\014ed)g(on)f(the)g(top-of-stac)o(k)328
1200 y FG(assign16)19 b FN({)13 b(assigns)g(the)g(least)g(signi\014can)
o(t)f FK(16-bit)i(wor)n(d)i FN(of)d(the)g(w)o(ord)f(sec-)420
1250 y(ond)h(on)h(the)g(stac)o(k)h(to)e(the)i(address)g(sp)q(eci\014ed)
h(on)d(the)i(top-of-stac)o(k)328 1314 y FG(assignW)k
FN({)10 b(assigns)h(the)g FK(wor)n(d)j FN(on)c(the)g(second)i(on)e(the)
h(stac)o(k)f(to)g(the)h(address)420 1364 y(sp)q(eci\014ed)k(on)f(the)g
(top-of-stac)o(k)328 1428 y FG(assignF)19 b FN({)13 b(assigns)g(the)g
FK(\015o)n(at)k FN(second)d(on)f(the)g(stac)o(k)g(to)g(the)g(address)h
(sp)q(ec-)420 1478 y(i\014ed)f(on)h(the)h(top-of-stac)o(k)328
1542 y FG(assignD)k FN({)h(assigns)g(the)g FK(double)j
FN(second)e(on)f(the)g(stac)o(k)g(to)g(the)g(address)420
1592 y(sp)q(eci\014ed)15 b(on)f(the)g(top-of-stac)o(k)224
1670 y(As)e(w)o(ell)f(as)h(these)h(assign)e(op)q(erations)h(there)h(is)
e(a)h(blo)q(c)o(k)f(cop)o(y)g(op)q(eration)h(whic)o(h)f(pro)o(vides)224
1720 y(for)17 b(the)g(assignmen)o(t)f(of)g(en)o(tire)h(v)n(ariables.)26
b(This)17 b(instruction)g(tak)o(es)g(three)h(argumen)o(ts)224
1770 y(on)c(the)g(stac)o(k,)f(and)g(has)h(an)f(optional)f(parameter)h
(whic)o(h)h(sp)q(eci\014es)h(an)o(y)e(alignmen)o(t)e(con-)224
1820 y(strain)o(t)j(for)g(the)g(cop)o(ying)g(op)q(eration.)328
1898 y FG(blkCp)20 b FN([)p FK(alignment)t FN(])d({)g(copies)h(the)h(n)
o(um)o(b)q(er)e(of)g(b)o(ytes)h(on)g(the)g(top)g(of)f(the)420
1948 y(stac)o(k)f(from)e(the)j(address)g(next)g(to)f(top,)g(to)g(the)g
(address)i(b)q(elo)o(w)d(that)420 1998 y(on)i(the)i(stac)o(k.)31
b(P)o(ops)19 b(all)e(three)i(argumen)o(ts)f(from)e(the)j(stac)o(k.)31
b(The)420 2047 y(optional)14 b(alignmen)o(t)g(will)h(b)q(e)i(1,)f(2,)g
(4,)g(or)g(8,)h(to)f(indicate)g(an)o(y)m(,)f(ev)o(en,)420
2097 y(quad)e(or)h(o)q(cto-b)o(yte)g(alignmen)o(t)e(resp)q(ectiv)o(ely)
224 2212 y FH(4.2.2)56 b(Data)19 b(op)r(erations)224
2289 y FK(DCo)n(de)h FN(con)o(tains)d(the)g(usual)f(v)n(ariet)o(y)g(of)
g(arithmetic)f(and)h(bit)o(wise)h(logical)e(op)q(erations.)224
2339 y(There)i(is)e(also)g(a)g(full)g(set)h(of)f(arithmetic)f(op)q
(erations)i(for)f(single)g(and)h(double)f(precision)224
2389 y(\015oating)e(p)q(oin)o(t)h(v)n(alues,)f(and)h(the)g(exp)q(ected)
i(format)c(con)o(v)o(ersion)i(instructions.)287 2438
y(F)m(or)c(all)g(binary)g(op)q(erations,)h(the)h(righ)o(t)e(op)q(erand)
i(is)e(the)i(one)f(on)f(the)i(top)f(of)f(the)h(stac)o(k,)224
2488 y(while)j(the)g(left)g(op)q(erand)g(is)f(b)q(elo)o(w)h(that.)k(In)
c(cases)h(where)g(it)e(is)h(con)o(v)o(enien)o(t)g(to)g(ev)n(aluate)224
2538 y(the)f(op)q(erands)g(in)e(a)h(di\013eren)o(t)h(order,)f(it)g(is)g
(p)q(ossible)g(to)f(do)h(so.)18 b(F)m(or)11 b(comm)o(utativ)o(e)e(op)q
(era-)224 2588 y(tions)j(no)g(further)h(consideration)f(is)g(required,)
g(while)g(for)f(non-comm)o(utativ)o(e)e(op)q(erations)224
2638 y(it)i(is)g(necessary)i(to)d(use)i(the)g(\\)p FG(swap)p
FN(")d(instruction)i(to)g(rev)o(erse)i(the)e(order)h(b)q(efore)g
(executing)224 2688 y(the)j(op)q(eration.)p eop
%%Page: 97 103
97 102 bop 224 274 a FL(4.2.)31 b(INTR)o(ODUCTION)14
b(TO)g(D-CODE)706 b FN(97)224 390 y FO(In)o(teger)14
b(arithmetic)224 477 y FN(In)o(teger)h(arithmetic)e(is)g(alw)o(a)o(ys)g
(p)q(erformed)g(on)g(w)o(ord-sized)i(quan)o(tities)e(in)g
FK(DCo)n(de)s FN(.)19 b(It)13 b(is)224 527 y(assumed)j(that)g(memory)e
(v)n(ariables)i(of)f(narro)o(w)o(er)i(storage)f(size)h(are)g(widened)g
(to)f(w)o(ord-)224 576 y(sized,)24 b(either)e(b)o(y)f(zero)h(extension)
g(or)g(sign)f(extension)h(as)f(appropriate,)i(during)e(the)224
626 y FK(der)n(ef)9 b FN(X)14 b(op)q(eration)f(whic)o(h)h(places)h(the)
f(v)n(alue)f(on)h(the)h(abstract)f(stac)o(k.)287 681
y(This)h(corresp)q(onds)i(with)e(the)h(common)d(con)o(v)o(en)o(tion)i
(for)g FK(RISC)22 b FN(arc)o(hitectures,)17 b(but)224
731 y(ignores)e(the)f(capabilit)o(y)f(of)g(most)g FK(CISC)19
b FN(arc)o(hitectures,)d(whic)o(h)e(pro)o(vide)g(arithmetic)f(on)224
781 y(b)o(yte)i(and)e(halfw)o(ord)g(quan)o(tities.)18
b(The)c(a)o(v)n(ailable)e(op)q(erations)i(are)g(|)328
879 y FG(abs)20 b FN([)p FK(mo)n(de)s FN(])14 b({)h(tak)o(es)f(the)i
(in)o(teger)f(on)f(the)h(top)f(of)g(the)h(abstract)h(stac)o(k)f(and)420
929 y(replaces)h(it)f(b)o(y)h(its)f(absolute)h(v)n(alue.)22
b(If)15 b FK(mo)n(de)k FN(is)d FG(intOver)e FN(then)i(an)o(y)420
979 y(attempt)d(to)g(\014nd)h(the)g(absolute)g(v)n(alue)f(of)h(the)g
(most)e(negativ)o(e)i(in)o(teger)420 1029 y(is)f(trapp)q(ed)328
1105 y FG(add)20 b FN([)p FK(mo)n(de)s FN(])9 b({)g(adds)h(the)g(t)o(w)
o(o)f(w)o(ords)h(on)f(the)h(top)g(of)f(the)h(stac)o(k)g(with)f(o)o(v)o
(er\015o)o(w)420 1155 y(trapping)k(seman)o(tics)g(as)h(sp)q(eci\014ed)i
(b)o(y)d(mo)q(de)328 1232 y FG(div)20 b FK(mo)n(de)c
FN({)d(p)q(erforms)f(the)h(div)f(op)q(eration)h(on)f(the)i(t)o(w)o(o)e
(w)o(ords)h(on)f(the)i(top)420 1282 y(of)d(the)h(stac)o(k)g(with)f(the)
i(signedness)g(implied)c(b)o(y)j(the)g FK(mo)n(de)p FN(.)18
b(The)12 b(righ)o(t)420 1332 y(op)q(erand)i(is)g(on)f(top)328
1408 y FG(mod)20 b FK(mo)n(de)d FN({)d(tak)o(es)g(mo)q(dulus)e(of)i
(the)g(t)o(w)o(o)f(w)o(ords)h(on)g(the)g(top)g(of)f(the)h(stac)o(k)420
1458 y(with)g(the)i(signedness)g(implied)d(b)o(y)i(the)h
FK(mo)n(de)p FN(.)21 b(Righ)o(t)14 b(op)q(erand)i(is)f(on)420
1508 y(top)328 1585 y FG(mul)20 b FN([)p FK(mo)n(de)s
FN(])15 b({)f(m)o(ultiplies)f(the)i(t)o(w)o(o)f(w)o(ords)h(on)g(the)g
(top)g(of)f(the)i(stac)o(k)f(with)420 1635 y(o)o(v)o(er\015o)o(w)e
(trapping)h(seman)o(tics)f(as)h(sp)q(eci\014ed)h(b)o(y)f
FK(mo)n(de)328 1711 y FG(negate)20 b FN([)p FK(mo)n(de)s
FN(])13 b({)h(negates)i(the)f(in)o(teger)f(on)g(the)h(top-of-stac)o(k.)
k(If)14 b FK(mo)n(de)k FN(is)420 1761 y FG(intOver)12
b FN(then)j(an)o(y)e(attempt)g(to)h(negate)h(the)f(most)f(negativ)o(e)h
(in)o(teger)420 1811 y(is)f(trapp)q(ed)328 1888 y FG(rem)20
b FK(mo)n(de)f FN({)14 b(divides)h(the)h(t)o(w)o(o)e(w)o(ords)h(on)g
(the)g(top)g(of)f(the)i(stac)o(k)f(with)g(the)420 1937
y(signedness)c(implied)c(b)o(y)i(the)i FK(mo)n(de)p FN(,)f(and)g
(returns)h(the)f(remainder.)16 b(The)420 1987 y(righ)o(t)d(op)q(erand)h
(is)g(on)g(top)328 2064 y FG(slash)20 b FK(mo)n(de)15
b FN({)c(divides)h(the)g(t)o(w)o(o)f(w)o(ords)h(on)f(the)h(top)g(of)f
(the)h(stac)o(k)g(with)f(the)420 2114 y(signedness)k(implied)c(b)o(y)j
(the)h FK(mo)n(de)p FN(.)j(The)c(righ)o(t)g(op)q(erand)g(is)g(on)f(top)
328 2191 y FG(sub)20 b FN([)p FK(mo)n(de)s FN(])15 b({)h(subtracts)h
(the)f(t)o(w)o(o)f(w)o(ords)h(on)g(the)g(top)g(of)f(the)h(stac)o(k)g
(with)420 2240 y(o)o(v)o(er\015o)o(w)i(trapping)g(seman)o(tics)g(as)h
(sp)q(eci\014ed)h(b)o(y)f(mo)q(de.)31 b(The)19 b(righ)o(t)420
2290 y(op)q(erand)14 b(is)g(on)f(top)224 2389 y(Most)21
b(of)f(these)i(arithmetic)e(op)q(erations)h(ha)o(v)o(e)f(a)h(mo)q(de)e
(argumen)o(t)h(whic)o(h)h(is)f(one)h(of)224 2438 y Ft(f)p
FG(noTrap,)g(crdOver,)f(intOver)p Ft(g)p FN(.)d(The)d(mo)q(de)f
(indicates)i(whether)g(o)o(v)o(er\015o)o(w)f(c)o(hec)o(king)224
2488 y(is)e(to)g(b)q(e)h(emplo)o(y)o(ed)e(or)h(not,)g(and)g(if)f(so,)h
(whether)i(the)f(trapping)e(seman)o(tics)h(are)h(based)g(on)224
2538 y(signed)j(or)g(unsigned)g(arithmetic.)23 b(If)16
b(the)g(mo)q(de)f(is)g(optional,)g(the)h(absence)i(of)d(a)g(mo)q(de)224
2588 y(has)f(the)h(same)e(seman)o(tics)h(as)g FG(noTrap)p
FN(.)i(It)f(the)f(mo)q(de)f(is)h(compulsory)m(,)d(it)j(cannot)g(b)q(e)h
(the)224 2638 y FG(noTrap)h FN(v)n(alue.)27 b(The)18
b(precise)g(seman)o(tics)f(of)f(the)i(division)e(op)q(erations)h(are)h
(de\014ned)g(in)224 2688 y(the)d(app)q(endix)f(on)f(page)h(288.)p
eop
%%Page: 98 104
98 103 bop 224 274 a FN(98)341 b FL(CHAPTER)14 b(4.)32
b(GENERA)m(TING)12 b(INTERMEDIA)m(TE)i(CODE)224 390 y
FO(Bit)o(wise)g(logical)g(op)q(erations)224 469 y FN(The)h(bit)o(wise)e
(logical)g(op)q(erations)h(form)e(a)h(functionally)g(complete)g(set.)
328 555 y FG(andWrd)20 b FN({)13 b(bit)o(wise)h FK(AND)k
FN(of)13 b(t)o(w)o(o)h(top-of-stac)o(k)f(w)o(ords)328
623 y FG(bitNeg)20 b FN({)13 b(bit)o(wise)h(negate)g(top-of-stac)o(k)g
(w)o(ord)328 691 y FG(orWrd)20 b FN({)13 b(bit)o(wise)h
FK(OR)i FN(of)d(the)i(t)o(w)o(o)e(top-of-stac)o(k)g(w)o(ords)328
759 y FG(xorWrd)20 b FN({)13 b(bit)o(wise)h(exclusiv)o(e)g
FK(OR)i FN(of)d(the)i(t)o(w)o(o)e(top)h(w)o(ords)224
872 y FO(Bo)q(olean)h(op)q(erations)224 950 y FK(DCo)n(de)g
FN(do)q(es)d(not)f(con)o(tain)g(Bo)q(olean)g(op)q(erations)g(on)g
(logical)f(v)n(alues,)h(since)h(it)f(is)g(assumed)224
1000 y(that)i(logical)f(v)n(alues)g(will)g(b)q(e)i(ev)n(aluated)e(b)o
(y)h(\015o)o(w)g(of)f(con)o(trol,)h(as)g(describ)q(ed)i(later)e(in)f
(this)224 1050 y(c)o(hapter.)19 b(Ho)o(w)o(ev)o(er,)14
b(there)h(is)f(a)g(Bo)q(olean)f(negate)i(op)q(eration.)j(This)c(is)f(|)
328 1136 y FG(boolNeg)19 b FN({)14 b(negates)h(the)f(Bo)q(olean)g(v)n
(alue)f(on)h(the)g(top-of-stac)o(k)224 1222 y(Since)i(the)g(in)o
(ternal)f(represen)o(tation)h(of)f(Bo)q(olean)g(v)n(alues)g(is)g
FK(T)m(rue)h FN(=)e(1)h(and)g FK(F)m(alse)i FN(=)d(0,)224
1271 y(the)f(same)e(e\013ect)i(as)f(the)h(\\)p FG(boolNeg)p
FN(")d(instruction)i(ma)o(y)e(b)q(e)j(ac)o(hiev)o(ed)f(b)o(y)f(the)i
(instruction)224 1321 y(sequence)j(|)354 1412 y FF(pshLit)i(1)354
1457 y(xorWrd)224 1550 y FN(Some)13 b(fron)o(t-ends)h(ma)o(y)e(pro)q
(duce)k(the)e(second)h(form)d(in)i(the)g FK(IR)r FN(.)287
1601 y(In)j(cases)i(where)f(Bo)q(olean)f(v)n(alues)g(are)h(to)f(b)q(e)h
(fully)e(ev)n(aluated,)h(the)h(set)g(\\)p FG(andWrd,)224
1651 y(orWrd,)j(boolNeg)p FN(")12 b(ma)o(y)g(b)q(e)j(used)f(to)g(pro)o
(vide)g(the)g(Bo)q(olean)g(op)q(erations.)224 1772 y
FH(4.2.3)56 b(Op)r(erations)17 b(on)i(addresses)224 1850
y FN(There)c(is)e(a)g(need)i(to)e(pro)o(vide)g(op)q(erations)h(on)f
(addresses,)i(to)f(allo)o(w)e(arra)o(y)h(indexing)f(and)224
1900 y(record)k(\014eld)f(selection.)21 b(F)m(or)14 b(man)o(y)f(mac)o
(hines)g(addresses)k(ma)o(y)c(b)q(e)i(manipulated)e(using)224
1950 y(the)i(ordinary)f(op)q(erations)h(on)f(the)h(unsigned)g(in)o
(teger)g(t)o(yp)q(e,)f(particularly)g(the)h(ordinary)224
1999 y(\\)p FG(add)p FN(")h(op)q(eration.)26 b(Ho)o(w)o(ev)o(er)17
b(there)h(are)f(some)f(adv)n(an)o(tages)g(in)h(distinguishing)e(op)q
(era-)224 2049 y(tions)f(on)g(addresses,)h(since)g(often)e(the)i
(indexing)e(can)h(b)q(e)g(\\folded")f(in)o(to)g(the)i(addressing)224
2099 y(mo)q(des)f(of)f(the)h(target)h(mac)o(hine.)h FK(DCo)n(de)i
FN(pro)o(vides)c(the)g(follo)o(wing)e(op)q(erations.)328
2185 y FG(addAdr)20 b FN({)e(adds)g(the)h(w)o(ord)g(on)f(the)h
(top-of-stac)o(k)f(to)g(the)h(address)h(b)q(elo)o(w)420
2235 y(that)328 2303 y FG(addOff)g Ft(\006)p FK(o\013set)14
b FN({)g(adds)g(the)g(constan)o(t)h(o\013set)f(to)g(the)g(address)i(on)
d(the)i(top)420 2353 y(of)e(the)h(stac)o(k)224 2438 y(In)f(some)e
(cases)j(it)d(is)i(necessary)h(to)e(p)q(erform)f(more)h(elab)q(orate)g
(op)q(erations)h(on)f(addresses,)224 2488 y(for)17 b(example)f
(comparisons)g(of)h(p)q(oin)o(ter)g(v)n(ariables)f(for)h(equalit)o(y)m
(.)26 b(F)m(or)17 b(some)f(mac)o(hines)224 2538 y(the)k(ordinary)f(in)o
(teger)g(comparison)f(op)q(eration)h(is)g(adequate.)34
b(Ho)o(w)o(ev)o(er,)20 b(this)f(is)g(not)224 2588 y(the)e(case)f(for)f
(mac)o(hines)g(with)g(segmen)o(ted)h(address)g(spaces,)h(suc)o(h)g(as)e
FK(iapx86)22 b FN(in)15 b(16-bit)224 2638 y(mo)q(de.)i
FK(DCo)n(de)e FN(pro)o(vides)c(primitiv)o(es)f(whic)o(h)h(con)o(v)o
(ert)h(b)q(et)o(w)o(een)h(mac)o(hine)d(addresses)j(and)224
2688 y(ordinal)e(n)o(um)o(b)q(ers)g(so)h(as)f(to)h(allo)o(w)e
(arbitrary)h(address)i(manipulations)c(to)i(b)q(e)h(p)q(erformed.)p
eop
%%Page: 99 105
99 104 bop 224 274 a FL(4.2.)31 b(INTR)o(ODUCTION)14
b(TO)g(D-CODE)706 b FN(99)287 390 y(The)14 b(\014rst)g(instruction)h
(abstracts)g(the)f(op)q(eration)g(of)f(turning)g(an)h(unsigned)g(n)o
(um)o(b)q(er)224 440 y(in)o(to)g(the)g(in)o(ternal)g(mac)o(hine)e
(address)j(format.)h(This)e(instruction)g(is)g(called)g(\\)p
FG(makeAdr)p FN(",)224 490 y(it)i(is)h(the)g(in)o(v)o(erse)g(of)e(\\)p
FG(flatten)p FN(",)g(whic)o(h)h(turns)h(a)f(mac)o(hine)g(address)h(in)o
(to)f(an)g(address)224 540 y(ordinal.)287 590 y(As)f(an)f(example)f(of)
h(the)h(use)g(of)f(these)i(instructions,)e(the)h(testing)g(of)f(p)q
(oin)o(ter)h(v)n(alues)224 640 y(for)f(equalit)o(y)m(,)e(in)h(general,)
h(is)g(as)g(follo)o(ws)e(|)320 717 y FF(pshAdr)67 b(ptr1)320
762 y(derefW)353 b FD(;)13 b FE(get)g(p)n(ointer)e(value)h(1)320
808 y FF(flatten)333 b FD(;)13 b FE(make)g(into)f(addr)n(ess)g(or)n
(dinal)320 854 y FF(pshAdr)67 b(ptr2)320 899 y(derefW)353
b FD(;)13 b FE(get)g(p)n(ointer)e(value)h(2)320 945 y
FF(flatten)333 b FD(;)13 b FE(make)g(into)f(addr)n(ess)g(or)n(dinal)320
991 y FF(relEq)373 b FD(;)13 b FE(r)n(elational)e(test)h(for)i(e)n
(quality)793 1036 y FD(;)f FE(Bo)n(ole)n(an)e(is)j(now)f(top-of-stac)o
(k)224 1166 y FN(The)f(relational)e(test)i(p)q(ops)g(the)g(t)o(w)o(o)e
(top)i(data,)f(compares)f(them,)h(and)g(pushes)i(a)d(Bo)q(olean)224
1216 y(result)15 b(on)o(to)e(the)i(top-of-stac)o(k.)287
1266 y(The)g(use)h(of)e(the)i(\015atten)f(instructions)h(is,)e(of)g
(course,)i(only)f(necessary)i(to)d(mak)o(e)g(the)224
1315 y FK(IR)i FN(p)q(ortable)e(to)g(mac)o(hines)f(with)g(segmen)o(ted)
h(address)i(arc)o(hitectures.)224 1430 y FH(4.2.4)56
b(Comparison)18 b(op)r(erations)224 1507 y FK(DCo)n(de)j
FN(has)c(a)g(full)f(rep)q(etoire)i(of)e(comparison)g(op)q(erations,)i
(for)e(b)q(oth)h(signed)h(and)e(un-)224 1557 y(signed)g(t)o(yp)q(es.)24
b(These)17 b(pro)o(vide)e(for)h(tests)h(of)e(the)h(predicates)h
FG(>,)k(>=,)g(=,)h(<=,)f(<,)g(<>)p FN(,)224 1606 y(and)15
b(bitset)h(mem)o(b)q(ership.)j(The)c(set)h(mem)o(b)q(ership)d(op)q
(eration)i FG(setIn)e FN(applies)i(to)g(w)o(ord-)224
1656 y(sized)d(sets)h(only)m(,)d(so)h(that)g(the)h(indexing)f(required)
h(for)e(m)o(ulti-w)o(ord)f(sets)j(m)o(ust)f(app)q(ear)g(ex-)224
1706 y(plicitly)d(in)h(the)h FK(IR)r FN(.)f(The)h FK(DCo)n(de)s
FN(s)g(are,)g(resp)q(ectiv)o(ely)m(,)h FG(intGT,)20 b(intGE,)h(relEQ,)g
(intLE,)224 1756 y(intLT,)g(relNE)8 b FN(for)h(signed)h(op)q(erands,)g
(and)f FG(crdGT,)21 b(crdGE,)f(relEQ,)h(crdLE,)f(crdLT,)224
1806 y(relNE)14 b FN(for)g(unsigned)h(op)q(erands.)21
b(Set)16 b(mem)o(b)q(ership)d(is)h(tested)j(b)o(y)d FG(setIn)p
FN(,)f(while)h FG(setLE)224 1855 y FN(and)g FG(setGE)f
FN(test)i(non-strict)f(set)h(inclusion,)e Ft(\022)p FM(;)7
b Ft(\023)14 b FN(resp)q(ectiv)o(ely)m(.)287 1905 y(All)g(of)g(the)i
(binary)f(predicates)h(p)q(op)f(t)o(w)o(o)g(op)q(erands)h(from)d(the)j
(stac)o(k,)f(compute)g(the)224 1955 y(Bo)q(olean)g(result)h(of)e(the)h
(test,)h(and)f(push)g(the)h(result)f(bac)o(k)g(on)o(to)f(the)i(stac)o
(k.)21 b(The)16 b(result)224 2005 y(of)e(ev)o(ery)g(comparison)f(is)h
(th)o(us)g(an)f(ordinal)g(0)h(or)g(1)f(on)h(the)g(top)g(of)g(the)g
(abstract)h(stac)o(k.)224 2120 y FH(4.2.5)56 b(Branc)n(h,)18
b(jump)g(and)h(call)f(instructions)224 2196 y FO(Conditional)13
b(branc)o(hes)224 2273 y FN(There)i(are)g(t)o(w)o(o)e(conditional)g
(branc)o(h)h(instructions)h(|)328 2349 y FG(brFalse)k
FK(tar)n(get)f(lab)n(el)e FN({)h(branc)o(h)g(if)f(the)i(top-of-stac)o
(k)e(w)o(ord)h(is)g(zero,)h(and)420 2399 y(p)q(op)13
b(the)i(stac)o(k)328 2462 y FG(brTrue)20 b FK(tar)n(get)11
b(lab)n(el)g FN({)f(branc)o(h)i(if)e(the)i(top-of-stac)o(k)e(w)o(ord)h
(is)g(non-zero,)h(and)420 2512 y(p)q(op)h(the)i(stac)o(k)224
2588 y(Eac)o(h)g(of)e(these)i(tak)o(e)f(a)g(lab)q(el)f(as)h(op)q
(erand.)287 2638 y(Note)g(that)f(the)h(in)o(terpretation)g(of)f
FK(F)m(alse)g FN(and)g FK(T)m(rue)g FN(implied)e(b)o(y)j(these)h
(instructions)224 2688 y(is)10 b(sligh)o(tly)f(di\013eren)o(t)i(to)f
(that)g(used)h(in)f(the)h(predicate)g(instructions.)17
b(This)11 b(allo)o(ws)d(a)i(useful)p eop
%%Page: 100 106
100 105 bop 224 274 a FN(100)320 b FL(CHAPTER)14 b(4.)32
b(GENERA)m(TING)12 b(INTERMEDIA)m(TE)i(CODE)224 390 y
FN(optimization)c(to)i(b)q(e)h(implemen)o(ted)e(in)h(those)h(frequen)o
(t)g(cases)h(where)f(comparisons)f(with)224 440 y(zero)j(are)f
(required.)19 b(F)m(or)14 b(example,)e(instead)i(of)g(translating)f(\\)
p FG(IF)21 b(x)g(=)h(0)g(THEN)p FN(")12 b(as)i(|)320
516 y FF(pshAdr)67 b(_x)320 561 y(derefW)320 607 y(pshZ)320
653 y(relEq)320 698 y(brFalse)47 b FE(elseL)n(ab)n(el)224
826 y FN(w)o(e)17 b(ma)o(y)e(use)i(the)g(test-against-zero)g(directly)g
(implemen)o(ted)d(b)o(y)i(the)h FG(brTrue)f FN(instruc-)224
876 y(tion.)320 944 y FF(pshAdr)67 b(_x)320 989 y(derefW)320
1035 y(brFalse)47 b FE(elseL)n(ab)n(el)224 1219 y FO(Uncondition)o(al)
13 b(branc)o(hes)224 1296 y FN(There)i(are)g(three)g(unconditional)e
(branc)o(hes)i(|)328 1371 y FG(branch)20 b FK(tar)n(get-lab)n(el)12
b FN({)i(branc)o(h)g(unconditionally)328 1433 y FG(exit)20
b FN({)14 b(unconditional)e(jump)h(to)g(the)i(pro)q(cedure)h(epilog)328
1495 y FG(switch)k FN({)e(indirectly)h(jump)e(to)i(indexed)h(address)g
(at)f(jump)e(table)i(using)420 1545 y(top-of-stac)o(k)d(as)h(index.)27
b(P)o(erforms)17 b(a)f(case)i(statemen)o(t)f(jump)e(\(more)420
1595 y(details)e(are)h(giv)o(en)g(later\))224 1701 y
FO(Subprogram)f(calls)224 1778 y FN(There)i(are)g(three)g(subprogram)e
(call)g(instructions.)19 b(These)c(are)f(|)328 1853 y
FG(call)20 b FK(identi\014er)14 b FN({)f(call)g(the)i(pro)q(cedure)328
1915 y FG(popCall)k FN({)h(call)f(the)h(pro)q(cedure)i(whose)e(address)
h(is)f(on)g(the)g(top)g(of)f(the)420 1965 y(abstract)14
b(stac)o(k)h(and)e(p)q(op)h(the)h(abstract)f(stac)o(k)328
2027 y FG(trap)20 b FK(identi\014er)14 b FN({)f(same)g(as)h
FG(call)f FN(except)j(no)d(return)i(is)f(exp)q(ected)224
2102 y(The)j(trap)f(instruction)h(is)f(distinguished)g(from)f(the)h
(call)g(only)f(so)h(that)h(optimizers)e(are)224 2152
y(able)f(to)g(construct)h(more)e(accurate)i(\015o)o(w)f(of)f(con)o
(trol)h(information.)287 2202 y(The)g(parameter)g(abstractions)g(are)g
(handled)g(b)o(y)g(t)o(w)o(o)f(instructions)i({)328 2277
y FG(mkPar)20 b FK(size,o\013set)d FN({)f(p)q(op)h(the)g(v)n(alue)g(on)
f(the)i(top)e(of)g(the)i(abstract)g(stac)o(k,)420 2326
y(and)10 b(pass)i(as)e(parameter)h(of)f FK(size)k FN(b)o(ytes)e(to)e
(the)i(parameter)e(area)h(at)g(the)420 2376 y(nominated)k(o\013set.)30
b(In)17 b(case)h(of)f(mac)o(hines)f(whic)o(h)i(pass)f(parameters)420
2426 y(on)c(the)i(run)o(time)d(stac)o(k,)i(the)h(second)g(v)n(alue)e
(will)f(b)q(e)j(ignored)328 2488 y FG(blkPar)20 b FK
(size,o\013set,alignment)g FN({)g(p)q(op)h(the)g(address)g(on)g(the)g
(top)f(of)g(the)420 2538 y(abstract)13 b(stac)o(k,)f(and)g(cop)o(y)g
(the)h(parameter)f(blo)q(c)o(k)g(to)g(whic)o(h)g(it)g(p)q(oin)o(ts)420
2588 y(to)j(the)h(parameter)e(area)i(at)f(the)h(nominated)e(o\013set.)
23 b(The)15 b FK(alignment)420 2638 y FN(parameter,)9
b(whic)o(h)h(is)g(optional,)e(indicates)i(an)o(y)g(alignmen)o(t)d
(constrain)o(t)420 2688 y(of)13 b(the)h(source)h(v)n(alue)p
eop
%%Page: 101 107
101 106 bop 224 274 a FL(4.2.)31 b(INTR)o(ODUCTION)14
b(TO)g(D-CODE)685 b FN(101)224 390 y FH(4.2.6)56 b(Stac)n(k)18
b(housek)n(eeping)224 467 y FN(A)13 b(small)d(n)o(um)o(b)q(er)h(of)h
(housek)o(eeping)g(op)q(erations)h(are)f(necessary)j(for)d(the)g
(abstract)h(stac)o(k.)224 517 y(These)j(allo)o(w)c(v)n(alues)i(to)f(b)q
(e)i(p)q(opp)q(ed)g(from)d(the)i(stac)o(k)h(and)e(discarded,)i
(duplicated,)e(and)224 567 y(sw)o(app)q(ed.)19 b(These)c(are)g(|)328
649 y FG(dup1)20 b FN({)14 b(duplicates)g(the)g(top)g(w)o(ord)g(on)g
(the)g(stac)o(k)328 715 y FG(pop1)20 b FN({)14 b(p)q(ops)g(the)g
(abstract)h(stac)o(k)g(b)o(y)e(one)h(w)o(ord)g(and)g(discards)g(the)h
(v)n(alue)328 782 y FG(swap)20 b FN({)14 b(sw)o(aps)g(the)g(t)o(w)o(o)g
(top)g(w)o(ords)g(on)f(the)i(stac)o(k)287 864 y(The)g
FG(dup1)g FN(instruction)h(is)f(used)h(to)f(duplicate)h(a)f(v)n(alue)f
(when)i(a)f(second)i(cop)o(y)e(is)g(to)224 914 y(b)q(e)i(used)f(later)g
(in)f(the)i(computation.)k(This)16 b(is)g(needed,)h(for)e(example,)g
(if)f(a)i(v)n(alue)f(is)g(to)224 964 y(b)q(e)e(computed,)f(range)g(c)o
(hec)o(k)o(ed,)i(and)e(then)h(used.)18 b(In)12 b(general)h(the)g(range)
f(c)o(hec)o(k)i(will)c(p)q(op)224 1014 y(the)15 b(tested)g(v)n(alue)f
(during)f(the)i(comparison,)d(so)i(a)f(second)i(cop)o(y)f(is)g
(required.)287 1063 y(The)k FG(pop1)f FN(instruction)h(remo)o(v)o(es)f
(a)g(v)n(alue)h(from)e(the)i(abstract)g(stac)o(k,)h(should)f(the)224
1113 y(v)n(alue)c(not)f(b)q(e)i(required)g(an)o(y)e(further.)287
1163 y(The)k FG(swap)e FN(instruction)i(is)g(used)g(to)g(rev)o(erse)h
(the)f(order)h(of)e(the)h(top)f(t)o(w)o(o)g(v)n(alues)h(on)224
1213 y(the)d(abstract)h(stac)o(k)e(if)g(for)g(some)f(reason)i(it)f(has)
h(b)q(een)g(con)o(v)o(enien)o(t)g(to)f(compute)g(the)h(t)o(w)o(o)224
1263 y(v)n(alues)k(in)g(the)g(rev)o(ersed)i(order.)31
b(This)18 b(migh)o(t)e(o)q(ccur,)k(for)e(example,)f(if)g(the)i(left)e
(hand)224 1312 y(side)d(address)h(of)e(an)g(assignmen)o(t)g(statemen)o
(t)g(is)g(computed)g(b)q(efore)h(the)h(righ)o(t)e(hand)g(side)224
1362 y(v)n(alue.)287 1412 y(A)i(common)d(example)i(o)q(ccurs)i(when)g
(pro)q(ducing)f(co)q(de)h(for)e(the)i(Mo)q(dula)e(statemen)o(t)224
1462 y FK(INC)6 b FN(\()p FM(v)q FN(,)p FM(e)p FN(\))q(,)17
b(where)h FM(v)h FN(is)e(some)f(v)n(ariable)g(designator,)h(and)g
FM(e)g FN(is)g(some)f(expression.)29 b(W)m(e)224 1512
y(kno)o(w)18 b(that)g(w)o(e)g(m)o(ust)f(pro)q(duce)j(t)o(w)o(o)d
(copies)i(of)e(the)i(designator)f(address,)i(one)f(to)e(use)224
1561 y(as)h(destination,)f(and)h(one)f(to)g(dereference)k(to)c(obtain)f
(the)i(curren)o(t)h(designator)e(v)n(alue.)224 1611 y(Ho)o(w)o(ev)o
(er,)c(w)o(e)f(wish)g(to)g(compute)f(the)i(address)g(only)f(once.)18
b(The)12 b(follo)o(wing)e(is)i(an)f(elegan)o(t)224 1661
y(solution,)i(sho)o(wing)g(the)i(abstract)f(stac)o(k)h(con)o(ten)o(ts)g
(after)f(eac)o(h)g(instruction.)320 1746 y FE(push)e(addr)n(ess)g(of)g
FD(v)352 b(;)49 b(&v)320 1792 y FF(dup1)561 b FD(;)49
b(&v)67 b(&v)320 1837 y FF(derefW)521 b FD(;)49 b(&v)67
b(v)320 1883 y FE(push)12 b(value)g(of)h FD(e)391 b(;)49
b(&v)67 b(v)97 b(e)320 1929 y FF(add)581 b FD(;)49 b(&v)67
b(v+e)320 1974 y FF(swap)561 b FD(;)49 b(v+e)h(&v)320
2020 y FF(assignW)501 b FD(;)49 b FE(empty)13 b(stack)224
2108 y FN(In)19 b(the)g(ab)q(o)o(v)o(e,)g(\\&v")g(denotes)h(the)f
FK(addr)n(ess)j FN(of)c(v)n(ariable)f(v,)j(while)e(\\v")g(denotes)i
(the)224 2157 y(con)o(ten)o(ts)15 b(of)f(the)g(address.)287
2207 y(Finally)m(,)c(there)j(are)g(a)f(couple)h(of)e(instructions)i
(whic)o(h)f(allo)o(w)f(for)h(v)n(alues)g(to)g(b)q(e)h(mo)o(v)o(ed)224
2257 y(from)c(the)j(abstract)f(stac)o(k)g(in)o(to)f(temp)q(orary)m(,)g
(o\013-stac)o(k)h(lo)q(cations.)16 b(This)11 b(is)g(a)f(con)o(v)o
(enience)224 2307 y(for)k(v)n(alues)g(whic)o(h)f(are)i(used)f(m)o
(ultiple)e(times.)17 b(The)d(instructions)h(are)f(|)328
2389 y FG(mkTmp)20 b FK(frmO\013set)c FN({)h(mo)o(v)o(e)f(cop)o(y)h(of)
f(top-of-stac)o(k)h(to)g(temp)q(orary)f(at)h(\()p FK(fp{)420
2439 y(frmO\013set)t FN(\))328 2505 y FG(pshTmp)j FK(frmO\013set)e
FN({)h(push)h(sa)o(v)o(ed)f(temp)q(orary)g(at)g(\()p
FK(fp{frmO\013set)t FN(\))g(bac)o(k)420 2555 y(on)o(to)13
b(stac)o(k)224 2638 y(The)k(mak)o(e-temp)q(orary)e(instruction)h
(non-destructiv)o(ely)i(mo)o(v)o(es)d(a)h(cop)o(y)h(of)e(the)j(top)e
(of)224 2688 y(stac)o(k)k(v)n(alue)f(in)o(to)g(a)g(temp)q(orary)m(.)34
b(This)20 b(temp)q(orary)f(is)g(pre-assigned)h(a)g(stac)o(k)g(frame)p
eop
%%Page: 102 108
102 107 bop 224 274 a FN(102)320 b FL(CHAPTER)14 b(4.)32
b(GENERA)m(TING)12 b(INTERMEDIA)m(TE)i(CODE)224 390 y
FN(lo)q(cation)c(\(at)g FK(fp)j FN(-)d FK(frmO\013set)p
FN(\))g(b)o(y)g(the)h(fron)o(tend.)17 b(The)11 b(adv)n(an)o(tage)e(o)o
(v)o(er)i(using)f(an)g(explicit)224 440 y(assign)k(to)g(the)g(same)f
(lo)q(cation,)g(is)g(that)h(ev)o(en)h(simple)d(bac)o(k)o(ends)j(can)f
(tak)o(e)g(the)g(hin)o(t)f(and)224 490 y(try)20 b(to)e(k)o(eep)i(the)f
(cop)o(y)g(in)g(a)f(mac)o(hine)g(register.)34 b(The)19
b(push-temp)q(orary)g(instruction)224 540 y(pushes)d(the)e(temp)q
(orary)f(from)f(the)j(nominated)d(lo)q(cation.)287 591
y(T)o(ypical)h(uses)i(of)e(this)h(pair)f(of)h(instructions)g(are)g
(discussed)i(in)d(section)i(4.3.4.)224 711 y FH(4.2.7)56
b(Pro)r(cedure)17 b(headers)224 789 y FK(DCo)n(de)k FN(has)c(a)g(small)
e(n)o(um)o(b)q(er)i(of)f(constructs)j(whic)o(h)e(sp)q(ecify)h(the)g
(prop)q(erties)g(of)f(eac)o(h)224 839 y(pro)q(cedure.)i(Pro)q(cedure)13
b(headers)f(in)f(the)g(co)q(de)h(sp)q(ecify)f(the)h(name,)d(stac)o(k)j
(frame)d(size,)j(the)224 889 y(parameter)e(assem)o(bly)f(area)h(size)h
(\(if)f(required\),)h(and)f(the)h(lexical)e(lev)o(el)h(\(if)f
(required\).)18 b(The)224 939 y(header)11 b(is)e(follo)o(w)o(ed)f(b)o
(y)h(a)g(list)g(of)g(cop)o(y)h(parameter)f(records)i(whic)o(h)e(sp)q
(ecify)h(the)g(structured)224 988 y(v)n(alue)16 b(parameters)h(whic)o
(h)f(need)h(to)f(b)q(e)h(copied)g(b)o(y)f(the)h(callee)f(pro)q(cedure.)
28 b(The)17 b(exact)224 1038 y(form)12 b(of)i(the)g(pro)q(cedure)h
(header)g(dep)q(ends)h(on)d(the)h(target)h(mac)o(hine)d(con)o(v)o(en)o
(tions.)18 b(Here)224 1088 y(are)g(the)f(headers)h(for)e(the)i(same)e
(pro)q(cedure)i(for)f FK(iapx86)6 b FN(,)17 b(con\014gured)h(for)e(con)
o(v)o(en)o(tions)224 1138 y(whic)o(h)e(push)h(parameters)f(on)f(the)i
(stac)o(k)f(|)295 1229 y FF(.PROC)k(_StartHel)o(lo\()o(.SI)o(ZE)o(=0,)o
(.N)o(ODI)o(SPL)o(AY)o(\))224 1324 y FN(and)c(for)g FK(MIPS)19
b FN(pro)q(cessors,)d(whic)o(h)e(use)g(\014xed)h(parameter)e(assem)o
(bly)g(|)295 1415 y FF(.PROC)18 b(_StartHel)o(lo\()o(.SI)o(ZE)o(=0,)o
(.N)o(ODI)o(SPL)o(AY)o(,.A)o(SS)o(EMB)o(LY=)o(8\))224
1510 y FN(In)11 b(eac)o(h)f(case)i(the)f(stac)o(k)f(frame)f(has)i(zero)
g(size,)g(as)g(the)f(pro)q(cedure)j(has)d(no)g(lo)q(cal)g(v)n
(ariables.)224 1560 y(Since)20 b(this)g(is)f(a)g(pro)q(cedure)i(at)e
(the)h(outer)g(lev)o(el)f(there)i(is)e(no)g(displa)o(y)g(manipulatio)o
(n)224 1610 y(required.)g(In)14 b(the)g(case)h(of)e(the)i
FK(MIPS)k FN(mac)o(hine)13 b(the)h(outgoing)f(parameters)g(need)i(to)f
(b)q(e)224 1659 y(assem)o(bled)g(in)o(to)f(a)g(\014xed)i(area)f(in)f
(the)i(stac)o(k)f(frame.)j(In)d(this)g(case)g(an)g(assem)o(bly)f(area)h
(of)224 1709 y(eigh)o(t)h(b)o(ytes)h(is)f(required,)i(for)d(the)i
(parameters)g(of)e(the)i FK(WriteString)i FN(pro)q(cedure)f(whic)o(h)
224 1759 y(this)d(pro)q(cedure)i(calls.)287 1810 y(The)h(stac)o(k)g
(frame)f(size)h(whic)o(h)g(app)q(ears)g(in)g(the)g FK(DCo)n(de)k
FN(header)c(re\015ects)i(the)f(acti-)224 1859 y(v)n(ation)d(record)j
(size)f(as)f(it)g(is)g(kno)o(wn)g(to)g(the)h(fron)o(t-end.)25
b(It)16 b(is)g(p)q(ossible)g(that)h(the)f(co)q(de)224
1909 y(generating)d(bac)o(k-end)h(will)d(enlarge)i(this)g(allo)q
(cation,)e(in)h(order)i(to)f(mak)o(e)e(space)j(for)f(suc)o(h)224
1959 y(things)h(as)g(register)h(spilling.)224 2101 y
FI(4.3)67 b(Generating)15 b(in)n(termediate)i(co)r(de)d(for)h
(expressions)224 2201 y FH(4.3.1)56 b(Ordinary)18 b(expressions)242
2279 y FN(Generating)f(in)o(termediate)g(co)q(de)h(for)f(expressions)i
(is)f(simplicit)o(y)d(itself.)28 b(A)18 b(recursiv)o(e)224
2329 y(pro)q(cedure)c(tra)o(v)o(erses)f(the)f(expression)h(tree)g(in)e
(the)h FK(AST)6 b FN(,)k(emitting)g(co)q(de)i(for)f(the)i(sub)q(ex-)224
2379 y(pressions.)287 2430 y(W)m(e)g(shall)g(mak)o(e)g(the)h(follo)o
(wing)d(simplifying)g(assumptions.)287 2515 y Ft(\017)20
b FN(the)15 b(expression)g(is)e(represen)o(ted)k(b)o(y)d(a)f(tree)287
2601 y Ft(\017)20 b FN(the)15 b(expression)g(computes)e(a)h(w)o
(ord-sized)g(v)n(alue)287 2688 y Ft(\017)20 b FN(the)15
b(expression)g(is)e(not)h(of)g(Bo)q(olean)f(t)o(yp)q(e)i(\(these)g(are)
f(treated)i(in)d(section)i(4.4\))p eop
%%Page: 103 109
103 108 bop 224 274 a FL(4.3.)31 b(GENERA)m(TING)13 b(INTERMEDIA)m(TE)h
(CODE)g(F)o(OR)g(EXPRESSIONS)101 b FN(103)p 270 392 1350
2 v 269 438 2 46 v 335 424 a FF(PROCEDUR)o(E)17 b(PushValue)o(\(e)o(xp)
f(:)j(ExprDesc\);)p 1619 438 V 269 483 V 335 470 a(BEGIN)p
1619 483 V 269 529 V 374 515 a(IF)g(exp^.tag)d(IN)j(binops)e(THEN)p
1619 529 V 269 575 V 413 561 a(PushValue)o(\(ex)o(p^.)o(le)o(ftO)o(p\))
o(;)p 1619 575 V 269 620 V 413 607 a(PushValue)o(\(ex)o(p^.)o(ri)o(ght)
o(Op)o(\);)p 1619 620 V 269 666 V 413 652 a(EmitInstr)o(uct)o(ion)o
(\(t)o(agT)o(oO)o(pCo)o(deM)o(ap)o([ex)o(p^)o(.ta)o(g]\))o(;)f(NewLn;)p
1619 666 V 269 712 V 374 698 a(ELSIF)h(exp^.tag)g(IN)i(unarys)e(THEN)p
1619 712 V 269 757 V 413 744 a(PushValue)o(\(ex)o(p^.)o(ch)o(ild)o(Op)o
(\);)p 1619 757 V 269 803 V 413 789 a(EmitInstr)o(uct)o(ion)o(\(t)o
(agT)o(oO)o(pCo)o(deM)o(ap)o([ex)o(p^)o(.ta)o(g]\))o(;)f(NewLn;)p
1619 803 V 269 849 V 374 835 a(ELSIF)h(exp^.tag)g(=)i(literal)e(THEN)p
1619 849 V 269 894 V 413 881 a(PushLit\(e)o(xp^)o(.li)o(tV)o(alu)o(e\))
o(;)g(NewLn;)p 1619 894 V 269 940 V 374 926 a(ELSE)h(\(*)h(assert:)e
(tag)h(=)h(designator)d(*\))p 1619 940 V 269 986 V 413
972 a(Designato)o(r\(e)o(xp\))o(;)p 1619 986 V 269 1031
V 413 1018 a(EmitInstr)o(uct)o(ion)o(\(d)o(ere)o(fW)o(\);)g(NewLn;)p
1619 1031 V 269 1077 V 374 1063 a(END;)p 1619 1077 V
269 1123 V 335 1109 a(END)i(PushValue)o(;)p 1619 1123
V 270 1124 1350 2 v 398 1240 a FN(Figure)c(4.2:)j(co)q(de)e(of)e
(recursiv)o(e)j(expression)f(tra)o(v)o(ersal)f(pro)q(cedure)287
1370 y Ft(\017)20 b FN(there)14 b(is)e(a)g(mapping)e(from)g(the)j
(expression)g(no)q(de)g(tags)f(to)g FK(IR)i FN(op-co)q(des)f(whic)o(h)f
(w)o(e)328 1419 y(shall)h(assume)h(is)f(called)h FG(tagToOpCodeMap)224
1499 y FN(W)m(e)i(assume)f(that)g(the)h(expression)h(is)e(represen)o
(ted)k(b)o(y)c(a)g(tree,)i(rather)f(than)g(a)f FK(dir)n(e)n(cte)n(d)224
1549 y(acyclic)k(gr)n(aph)s FN(,)f(in)f(the)h(in)o(terests)h(of)e
(simplicit)o(y)m(.)26 b(The)18 b(more)e(general)i(case)h(is)e(treated)
224 1599 y(later,)d(in)f(section)i(4.3.4.)287 1649 y(The)h(template)f
(of)h(the)g(tra)o(v)o(ersal)g(pro)q(cedure)i(is)e(as)g(giv)o(en)g(in)f
(\014gure)i(4.2.)23 b(The)16 b(pro-)224 1698 y(cedure)i
FK(Designator)t FN(\(\))g(pushes)f(the)g(address)h(corresp)q(onding)f
(to)g(the)g(designator.)25 b(It)16 b(is)224 1748 y(assumed)j(that)g
(designators)h(whic)o(h)f(are)g(b)q(ound)g(to)g(literals)g(ha)o(v)o(e)g
(b)q(een)h(transformed)224 1798 y(in)o(to)13 b(literal)g(no)q(des)h(in)
f(the)h FK(AST)k FN(during)13 b(tree-attribution.)19
b(In)13 b(\014gure)h(4.2)e(w)o(e)i(ha)o(v)o(e)f(also)224
1848 y(ignored)h(the)h(need)f(to)g(output)g(the)h FK(mo)n(de)i
FN(mark)o(er)c(for)h(some)f(instructions.)287 1898 y(The)i(mo)q(del)e
(pro)q(cedure)k(as)e(sho)o(wn)g(in)g(\014gure)g(4.2)f(is)h(able)f(to)h
(handle)g(relational)f(op-)224 1948 y(erators)h(using)e(the)h
(tag-to-op)q(co)q(de)f(map.)j(In)d(the)h(case)g(of)f(the)h(ordering)f
(op)q(erators)i(suc)o(h)224 1997 y(as)g FK(less)g(than)j
FN(this)d(relies)g(on)f(the)i(tree-attribution)f(tra)o(v)o(ersal)f(ha)o
(ving)g(p)q(erformed)g(op)q(er-)224 2047 y(ator)j(iden)o(ti\014cation,)
f(that)h(is,)g(it)f(m)o(ust)g(ha)o(v)o(e)g(b)q(een)i(determined)f
(whether)h(a)e(signed)h(or)224 2097 y(unsigned)c(test)h(should)e(b)q(e)
h(p)q(erformed.)k(Not)12 b(sho)o(wn)h(in)f(the)h(\014gure)g(is)f(the)h
(small)d(amoun)o(t)224 2147 y(of)k(additional)e(co)q(de)i(whic)o(h)g
(is)g(required)h(to)e(deal)h(with)g(function)f(calls.)224
2262 y FH(4.3.2)56 b(Designators)224 2339 y FN(In)18
b(man)o(y)e(languages,)i(designators)h(in)e(expressions)j(ma)o(y)c
(represen)o(t)k(sev)o(eral)e(di\013eren)o(t)224 2389
y(kinds)d(of)g(ob)r(ject.)21 b(In)15 b FK(Pasc)n(al)5
b FN(,)14 b(for)h(example,)e(a)i(designator)g(ma)o(y)e(represen)o(t)k
(a)e(v)n(ariable,)224 2438 y(a)20 b(manifest)e(constan)o(t,)j(or)f(a)f
(function)h(ev)n(aluation.)34 b(W)m(e)19 b(shall)g(assume)g(that)h
(during)224 2488 y(static)c(seman)o(tic)e(c)o(hec)o(king)i(manifest)e
(constan)o(ts)i(ha)o(v)o(e)f(b)q(een)h(b)q(ound)f(to)h(their)f
(compile-)224 2538 y(time)c(v)n(alues)g(and)h(transformed)f(in)o(to)g
(literal)g(no)q(des)i(in)e(the)h FK(AST)6 b FN(.)11 b(W)m(e)h(shall)f
(also)g(assume)224 2588 y(that)g(function)g(ev)n(aluations)f(ha)o(v)o
(e)g(also)h(b)q(een)h(transformed)e(in)o(to)g(a)g(distinct)i
(function-call)224 2638 y(no)q(de)17 b(t)o(yp)q(e.)24
b(Th)o(us)16 b(at)f(co)q(de)i(generation)f(time,)e(designators)i(in)g
(expressions)h(represen)o(t)224 2688 y(v)n(ariable)c(accesses.)p
eop
%%Page: 104 110
104 109 bop 224 274 a FN(104)320 b FL(CHAPTER)14 b(4.)32
b(GENERA)m(TING)12 b(INTERMEDIA)m(TE)i(CODE)287 390 y
FN(The)c(pro)q(cess)h(of)e(generating)g FK(IR)i FN(co)q(de)g(for)e
(designators)h(has)f(b)q(een)i(abstracted)f(a)o(w)o(a)o(y)f(in)224
440 y(the)15 b(\014gure)g(4.2.)j(Designators)c(corresp)q(ond)i(to)e
(address)h(expressions.)21 b(W)m(e)13 b(shall)h(assume)224
490 y(that)h(designators)g(are)g(represen)o(ted)i(in)d(the)h
FK(AST)20 b FN(as)14 b(sequences)j(of)d(terms,)g(where)i(eac)o(h)224
540 y(term)d(is)g(one)g(of:)18 b(a)12 b(dereference)17
b(op)q(erator,)c(a)g(constan)o(t)h(o\013set,)f(or)h(an)f(o\013set)h
(expression.)224 590 y(The)j(v)o(ery)f(\014rst)g(term)g(in)f(the)i
(sequence)h(is)d(a)h(b)q(ound)g(iden)o(ti\014er)g(whic)o(h)g(corresp)q
(onds)h(to)224 640 y(some)c(en)o(tire)i(data)f(ob)r(ject.)p
270 780 1350 2 v 269 825 2 46 v 335 812 a FF(\(*)k(push)g(base)g
(address)f(of)i(designator)d(*\))p 1619 825 V 269 871
V 335 857 a(PROCEDUR)o(E)h(PushAddre)o(ss)o(\(ex)o(p)f(:)k(ExprDesc\))o
(;)p 1619 871 V 269 917 V 335 903 a(BEGIN)p 1619 917
V 269 962 V 374 949 a(\(*)f(assert:)d(exp^.tag)h(is)i(designato)o(r)e
(*\))p 1619 962 V 269 1008 V 374 994 a(CASE)h(exp^.mode)e(OF)p
1619 1008 V 269 1054 V 374 1040 a(|)j(static)e(:)p 1619
1054 V 269 1099 V 452 1086 a(EmitInstru)o(cti)o(on)o(\(ps)o(hA)o(dr\))o
(;)p 1619 1099 V 269 1145 V 452 1131 a(EmitName\(e)o(xp^)o(.d)o(esi)o
(g.)o(nam)o(e\);)f(NewLn;)p 1619 1145 V 269 1191 V 374
1177 a(|)j(local)37 b(:)p 1619 1191 V 269 1236 V 452
1223 a(EmitInstru)o(cti)o(on)o(\(ps)o(hF)o(P\);)p 1619
1236 V 269 1282 V 452 1268 a(EmitInt\(ex)o(p^.)o(de)o(sig)o(.v)o(arO)o
(ffs)o(et)o(\);)16 b(NewLn;)p 1619 1282 V 269 1328 V
374 1314 a(|)j(indirect)d(:)p 1619 1328 V 269 1373 V
452 1360 a(EmitInstru)o(cti)o(on)o(\(ps)o(hF)o(P\);)p
1619 1373 V 269 1419 V 452 1405 a(EmitInt\(ex)o(p^.)o(de)o(sig)o(.v)o
(arO)o(ffs)o(et)o(\);)g(NewLn;)p 1619 1419 V 269 1465
V 452 1451 a(EmitInstru)o(cti)o(on)o(\(de)o(re)o(fW\))o(;)36
b(NewLn;)p 1619 1465 V 269 1510 V 374 1496 a(|)19 b(uplevel)e(:)p
1619 1510 V 269 1556 V 452 1542 a(EmitInstru)o(cti)o(on)o(\(ps)o(hD)o
(sp\))o(;)p 1619 1556 V 269 1602 V 452 1588 a(EmitInt\(Le)o(xLe)o(ve)o
(l\(e)o(xp)o(^.d)o(esi)o(g\))o(\);)f(Comma;)p 1619 1602
V 269 1647 V 452 1633 a(EmitInt\(ex)o(p^.)o(de)o(sig)o(.v)o(arO)o(ffs)o
(et)o(\);)g(NewLn;)p 1619 1647 V 269 1693 V 374 1679
a(|)j(uplevIndi)o(rec)o(t)e(:)p 1619 1693 V 269 1739
V 452 1725 a(EmitInstru)o(cti)o(on)o(\(ps)o(hD)o(sp\))o(;)p
1619 1739 V 269 1784 V 452 1770 a(EmitInt\(Le)o(xLe)o(ve)o(l\(e)o(xp)o
(^.d)o(esi)o(g\))o(\);)f(Comma;)p 1619 1784 V 269 1830
V 452 1816 a(EmitInt\(ex)o(p^.)o(de)o(sig)o(.v)o(arO)o(ffs)o(et)o(\);)g
(NewLn;)p 1619 1830 V 269 1875 V 452 1862 a(EmitInstru)o(cti)o(on)o
(\(de)o(re)o(fW\))o(;)36 b(NewLn;)p 1619 1875 V 269 1921
V 374 1907 a(END;)p 1619 1921 V 269 1967 V 335 1953 a(END)18
b(PushAddre)o(ss;)p 1619 1967 V 270 1968 1350 2 v 576
2084 a FN(Figure)c(4.3:)j(The)d FK(PushA)n(ddr)n(ess)k
FN(pro)q(cedure)287 2189 y(First,)e(w)o(e)g(shall)f(describ)q(e)j(the)e
(generation)h(of)e(address)i(expressions)h(for)d(en)o(tire)i(ob-)224
2239 y(jects,)c(that)f(is,)f(for)h(simple)e(designators)i(without)f(an)
o(y)h(selectors.)19 b(W)m(e)11 b(shall)g(assume)g(that)224
2289 y(during)i(the)h(tree-attribution)f(tra)o(v)o(ersal,)g(eac)o(h)h
(base)f(ob)r(ject)h(name)e(has)h(b)q(een)h(decorated)224
2339 y(with)k(an)f FK(ac)n(c)n(essMo)n(de)k FN(attribute.)29
b(This)18 b(attribute)f(determines)h(if)f(the)h(access)h(is)e(to)h(a)
224 2389 y(statically)d(allo)q(cated)f(ob)r(ject,)i(an)f(ob)r(ject)h
(in)f(the)h(lo)q(cal)e(stac)o(k)i(frame,)d(an)i(indirectly)g(ac-)224
2438 y(cessed)e(ob)r(ject)f(\(suc)o(h)g(as)f(a)g(v)n(ariable)e
(parameter\),)i(an)g(ob)r(ject)h(in)e(an)h(uplev)o(el)g(stac)o(k)g
(frame,)224 2488 y(or)k(an)g(indirect)h(access)h(to)e(an)f(ob)r(ject)i
(in)f(an)g(uplev)o(el)g(stac)o(k)g(frame.)20 b(The)c(co)q(de)g(is)f
(giv)o(en)224 2538 y(in)f(\014gure)g(4.3.)287 2588 y(Note)j(in)f
(\014gure)h(4.3)f(that)h(it)f(is)h(necessary)h(to)f(distinguish)f(the)h
(mo)q(de)f(of)g(access)i(to)224 2638 y(particular)10
b(en)o(tire)g(v)n(ariables.)15 b(F)m(or)9 b(example,)g(the)h
FK(IR)h FN(co)q(de)f(used)g(to)f(generate)i(the)f(address)224
2688 y(of)17 b(some)f(lo)q(cal)g(v)n(ariable)g(named)f
FM(x)i FN(dep)q(ends)i(whether)f FM(x)e FN(is)h(a)g(v)n(ariable)f
(parameter)g(or)p eop
%%Page: 105 111
105 110 bop 224 274 a FL(4.3.)31 b(GENERA)m(TING)13 b(INTERMEDIA)m(TE)h
(CODE)g(F)o(OR)g(EXPRESSIONS)101 b FN(105)224 390 y(an)15
b(ordinary)f(v)n(ariable.)20 b(The)15 b(represen)o(tation)h(in)e(the)i
(original)c(program)i(text)h(do)q(es)g(not)224 440 y(distinguish)d
(these)i(t)o(w)o(o)e(case,)h(but)f(the)h FK(IR)h FN(co)q(de)f(requires)
h(an)e(additional)e(dereference)16 b(in)224 490 y(one)f(of)e(the)h
(cases.)287 541 y(The)d(pro)q(cess)i(of)d(forming)f(designator)i
(addresses)i(is)e(b)q(est)h(understo)q(o)q(d)g(if)e(the)i(transla-)224
591 y(tion)g(of)g(individual)e(selection)j(op)q(erations)g(is)f
(demonstrated)g(\014rst.)19 b(Here)13 b(are)g(the)g(simple)224
640 y(cases,)23 b(with)c(the)i(assumption)d(in)i(eac)o(h)g(case)h(that)
f(the)h(en)o(tire)f(data)g(ob)r(ject)g(is)g(some)224
690 y(statically)13 b(allo)q(cated)h(v)n(ariable)f(|)320
780 y FD(;)g FE(tr)n(anslation)d(of)20 b FF(a.b)397 825
y(pshAdr)47 b(_a)247 b FD(;)12 b FE(push)g(addr)n(ess)g(of)h(variable)f
(a)397 871 y FF(addOff)47 b Fm(N)t(N)221 b FD(;)12 b
FE(wher)n(e)h(NN)g(is)g(the)g(o\013set)f(of)h(\014eld)f(b)224
1012 y FN(Here)k(is)d(the)i(co)q(de)f(for)g(a)g(simple)e(dereference)17
b(|)320 1102 y FD(;)c FE(tr)n(anslation)d(of)20 b FF(a)p
Fw(")397 1148 y FF(pshAdr)47 b(_a)247 b FD(;)12 b FE(push)g(addr)n(ess)
g(of)h(variable)f(a)397 1193 y FF(derefW)334 b FD(;)12
b FE(r)n(eplac)n(e)g(by)h(value)f(of)h(p)n(ointer)f(a)224
1334 y FN(Here)k(is)d(the)i(co)q(de)f(for)g(a)g(simple)e(arra)o(y)i
(index)f(|)320 1424 y FD(;)g FE(tr)n(anslation)d(of)20
b FF(a[b])397 1470 y(pshAdr)47 b(_a)247 b FD(;)12 b FE(push)g(addr)n
(ess)g(of)h(variable)f(a)397 1515 y FF(pshAdr)47 b(_b)247
b FD(;)12 b FE(push)g(addr)n(ess)g(of)h(variable)f(b)397
1561 y FF(derefW)334 b FD(;)12 b FE(get)h(c)n(ontents)e(of)i(variable)e
(b)397 1607 y FF(pshLit)47 b Fm(N)t(N)221 b FD(;)12 b
FE(wher)n(e)h(NN)g(is)g(size)g(of)g(arr)n(ay)g(element)397
1652 y FF(mul)107 b(noTrap)167 b FD(;)12 b FE(c)n(ompute)g(o\013set)g
(of)h(b)g(element)397 1698 y FF(addAdr)334 b FD(;)12
b FE(c)n(ompute)g(addr)n(ess)g(of)g FF(a[b])224 1839
y FN(Of)18 b(course,)g(there)h(are)e(simpli\014cations)e(whic)o(h)i
(apply)g(when)g(the)h(elemen)o(t)f(size)h FK(NN)23 b
FN(is)224 1889 y(one,)14 b(or)g(is)g(a)f(p)q(o)o(w)o(er)h(of)g(t)o(w)o
(o.)287 1990 y(In)d(the)i(case)g(that)e(a)h(designator)g(ma)o(y)d(ha)o
(v)o(e)j(sev)o(eral)g(selectors,)i(the)e(tree-w)o(alk)o(er)g(co)q(de)
224 2040 y(requires)20 b(a)e(lo)q(op)g(whic)o(h)g(tra)o(v)o(erses)j
(the)e(sequence)h(of)e(selectors.)34 b(Figure)19 b(4.4)e(has)i(the)224
2090 y(details.)i(Note)15 b(carefully)g(the)g(co)q(de)h(whic)o(h)f
(trac)o(ks)g(the)h(t)o(yp)q(e)f(of)f(the)i(curren)o(tly)f(selected)224
2140 y(comp)q(onen)o(t,)10 b(so)h(that)f(the)h(elemen)o(t-size)g
(attribute)g(ma)o(y)d(b)q(e)j(accessed)i(for)d(indexing)g(co)q(de.)224
2260 y FH(4.3.3)56 b(F)-5 b(unction)19 b(calls)224 2338
y FN(F)m(unction)d(results)h(are)f(obtained)g(b)o(y)g(computing)e(the)i
(parameters)g(\(if)g(an)o(y\))f(and)h(emit-)224 2388
y(ting)g(a)f(call)g(to)h(the)h(en)o(try)f(p)q(oin)o(t)g(name.)22
b(F)m(unction)16 b(calls)f(are)i(exp)q(ected)h(to)d(lea)o(v)o(e)h
(their)224 2438 y(results)g(on)d(the)i(abstract)g(stac)o(k)f(in)g(the)g
(case)h(of)f(simple)e(v)n(alues.)19 b(The)14 b(previous)g(c)o(hapter)
224 2488 y(describ)q(ed)g(the)d(v)n(ariations)f(in)h(the)h(parameter)f
(ev)n(aluation)f(pro)q(cess)j(whic)o(h)f(are)f(necessary)224
2537 y(for)j(di\013eren)o(t)h(mac)o(hine)d(arc)o(hitectures.)287
2588 y(There)17 b(are)g(t)o(w)o(o)f(cases)i(to)e(consider.)26
b(In)16 b(the)h FK(stack)h(p)n(ar)n(ameters)h FN(case,)e(the)g(param-)
224 2638 y(eters)i(are)f(ev)n(aluated)g(b)o(y)f(tra)o(v)o(ersing)g(the)
h(sequence)i(of)d(actual)g(parameter)g(expression)224
2688 y(trees,)i(in)d(the)h(required)h(left-to-righ)o(t)d(or)i(righ)o
(t-to-left)e(order.)27 b(Eac)o(h)17 b(parameter)f(m)o(ust)p
eop
%%Page: 106 112
106 111 bop 224 274 a FN(106)320 b FL(CHAPTER)14 b(4.)32
b(GENERA)m(TING)12 b(INTERMEDIA)m(TE)i(CODE)p 241 392
1409 2 v 240 438 2 46 v 305 424 a FF(PROCEDURE)i(Designator)o(\(e)o(xp)
g(:)k(ExprDesc)o(\);)p 1648 438 V 240 483 V 344 470 a(VAR)f(typ)f(:)h
(TypeDesc;)d(\(*)j(current)e(type)h(*\))p 1648 483 V
240 529 V 305 515 a(BEGIN)p 1648 529 V 240 575 V 344
561 a(PushAddres)o(s\(e)o(xp)o(\);)e(\(*)j(base)f(address)f(*\))p
1648 575 V 240 620 V 344 607 a(typ)i(:=)f(exp^.desig.)o(va)o(rTy)o(pe;)
p 1648 620 V 240 666 V 344 652 a(FOR)31 b FE(every)13
b(sele)n(ctor)i FF(DO)p 1648 666 V 240 712 V 383 698
a(CASE)j(selector)f(OF)p 1648 712 V 240 757 V 383 744
a(|)j(dereferen)o(ce)c(:)p 1648 757 V 240 803 V 462 789
a(typ)i(:=)h(typ^.targe)o(tTy)o(pe)o(;)p 1648 803 V 240
849 V 462 835 a(EmitInstr)o(uct)o(io)o(n\(d)o(ere)o(fW)o(\);)d(NewLn;)p
1648 849 V 240 894 V 383 881 a(|)k(fieldSele)o(ct)c(:)p
1648 894 V 240 940 V 462 926 a(typ)i(:=)h(selector^.)o(fie)o(ld)o(^.f)o
(ie)o(ldT)o(ype)o(;)p 1648 940 V 240 986 V 462 972 a(EmitInstr)o(uct)o
(io)o(n\(a)o(ddO)o(ff)o(\);)p 1648 986 V 240 1031 V 462
1018 a(EmitInt\(s)o(ele)o(ct)o(or^)o(.fi)o(el)o(d^.)o(fi)o(eld)o(Off)o
(se)o(t\);)d(NewLn;)p 1648 1031 V 240 1077 V 383 1063
a(|)k(indexSele)o(ct)c(:)p 1648 1077 V 240 1123 V 462
1109 a(typ)i(:=)h(typ^.eleme)o(ntT)o(yp)o(e;)p 1648 1123
V 240 1168 V 462 1155 a(IF)g(selector^)o(.e)o(xpr)o(ess)o(io)o(n^.)o
(ta)o(g)e(=)i(literal)e(THEN)p 1648 1168 V 240 1214 V
501 1200 a(EmitInstru)o(ct)o(ion)o(\(ad)o(dO)o(ff\))o(;)p
1648 1214 V 240 1260 V 501 1246 a(EmitInt\(se)o(le)o(cto)o(r^.)o(ex)o
(pre)o(ss)o(ion)o(^.v)o(al)o(ue)f(*)j(typ^.size\);)d(NewLn;)p
1648 1260 V 240 1305 V 462 1292 a(ELSE)i(\(*)h(variable)d(index)i(*\))p
1648 1305 V 240 1351 V 501 1337 a(PushValue\()o(se)o(lec)o(tor)o(^.)o
(exp)o(re)o(ssi)o(on\))o(;)e(\(*)j(recurse)e(*\))p 1648
1351 V 240 1397 V 501 1383 a(PushLit\(ty)o(p^)o(.si)o(ze\))o(;)f
(NewLn;)p 1648 1397 V 240 1442 V 501 1429 a(EmitInstru)o(ct)o(ion)o
(\(mu)o(l\))o(;)h(NewLn;)g(\(*)i(no)g(trap)f(*\))p 1648
1442 V 240 1488 V 501 1474 a(EmitInstru)o(ct)o(ion)o(\(ad)o(dA)o(dr\))o
(;)e(NewLn;)p 1648 1488 V 240 1534 V 462 1520 a(END;)p
1648 1534 V 240 1579 V 383 1566 a(END;)p 1648 1579 V
240 1625 V 344 1611 a(END;)p 1648 1625 V 240 1671 V 305
1657 a(END)i(Designator;)p 1648 1671 V 241 1672 1409
2 v 556 1788 a FN(Figure)c(4.4:)j(Co)q(de)d(of)f(designator)h(pro)q
(cedure.)224 1931 y(b)q(e)j(ev)n(aluated)f(on)g(the)h(stac)o(k)f(of)g
(the)h(abstract)g(mac)o(hine,)d(and)i(then)h(tranferred)h(to)e(the)224
1980 y(parameter)e(lo)q(cation)f(b)o(y)h(a)f(\\)p FG(mkPar)p
FN(")g(instruction.)287 2035 y(In)h(the)g(case)h(of)e
FK(\014xe)n(d)j(assembly)t FN(,)d(parameters)h(ev)n(aluations)e(whic)o
(h)i(in)o(v)o(olv)o(e)f(function)224 2085 y(calls)20
b(m)o(ust)f(b)q(e)h(ev)n(aluated)g(\014rst,)h(b)q(efore)g(an)o(y)e(v)n
(alues)h(are)g(mo)o(v)o(ed)e(to)i(the)h(parameter)224
2135 y(lo)q(cations.)h(Note)16 b(that)f(this)h(restriction)g(applies)f
(to)g(some)g(non-ob)o(vious)f(cases,)j(as)e(w)o(ell)224
2185 y(as)j(to)f(explicit)f(function)h(ev)n(aluations.)27
b(Consider)18 b(the)f(case)i(of)d(a)h(mac)o(hine)f(without)h(a)224
2234 y(m)o(ultiply)f(instruction,)k(in)f(whic)o(h)f(m)o(ultiplication)e
(is)i(p)q(erformed)h(b)o(y)f(a)h(function)g(call.)224
2284 y(In)d(suc)o(h)h(a)e(case,)i(an)o(y)e(parameter)g(ev)n(aluation)f
(whic)o(h)i(in)o(v)o(olv)o(es)f(a)g(m)o(ultiplication)d(m)o(ust)224
2334 y(b)q(e)17 b(p)q(erformed)e(b)q(efore)i(an)o(y)f(parameters)f(are)
i(mo)o(v)o(ed,)d(just)i(as)g(for)g(an)o(y)f(other)i(function)224
2384 y(ev)n(aluation.)287 2438 y(Apart)g(from)e(the)i(constrain)o(t)g
(that)g(ev)n(alutions)f(in)o(v)o(olving)f(function)h(calls)h(m)o(ust)f
(b)q(e)224 2488 y(p)q(erformed)9 b(\014rst,)i(parameters)e(ma)o(y)f(b)q
(e)h(ev)n(aluated)g(in)g(an)o(y)g(con)o(v)o(enien)o(t)h(order.)17
b(A)9 b(straigh)o(t-)224 2538 y(forw)o(ard)h(implemen)o(tation)d
(strategy)k(is)f(to)g(split)g(the)h(argumen)o(t)e(expression)i(list)f
(in)o(to)f(t)o(w)o(o.)224 2588 y(The)17 b(list)e(of)g(argumen)o(ts)h
(whic)o(h)f(in)o(v)o(olv)o(e)g(function)g(calls)h(are)g(ev)n(aluated,)g
(in)f(turn,)i(on)o(to)224 2638 y(the)g(stac)o(k)g(of)e(the)i(abstract)g
(mac)o(hine.)23 b(When)16 b(this)h(\014rst)f(list)g(is)g(exhausted,)h
(all)e(of)h(the)224 2688 y(v)n(alues)11 b(are)h(p)q(opp)q(ed)f(and)g
(mo)o(v)o(ed)f(to)g(their)i(sp)q(eci\014ed)g(o\013sets)h(in)d(the)i
(parameter)e(assem)o(bly)p eop
%%Page: 107 113
107 112 bop 224 274 a FL(4.3.)31 b(GENERA)m(TING)13 b(INTERMEDIA)m(TE)h
(CODE)g(F)o(OR)g(EXPRESSIONS)101 b FN(107)224 390 y(area,)16
b(b)o(y)e(a)h(sequence)j(of)c(parameterized)i(\\)p FG(mkPar)p
FN(")d(instructions.)23 b(The)15 b(expressions)i(of)224
440 y(the)e(second)g(list)e(ma)o(y)f(b)q(e)j(ev)n(aluated)e(and)h(mo)o
(v)o(ed)e(one)j(b)o(y)e(one.)287 495 y(Just)f(as)g FK(DCo)n(de)k
FN(abstracts)d(a)o(w)o(a)o(y)e(the)h(details)g(of)f(the)i(mec)o(hanism)
d(b)o(y)h(whic)o(h)h(param-)224 545 y(eters)18 b(are)e(mo)o(v)o(ed)e
(from)g(the)i(abstract)h(stac)o(k)f(to)f(the)i(lo)q(cation)d(required)j
(b)o(y)f(the)g(target)224 595 y(arc)o(hitecture,)f(so)f(it)g(is)f
(necessary)j(to)d(ha)o(v)o(e)h(some)f(abstract)h(w)o(a)o(y)f(of)g(sp)q
(ecifying)h(that)g(the)224 644 y(returned)19 b(v)n(alue)e(is)g(mo)o(v)o
(ed)f(from)g(the)h(actual)g(return)i(lo)q(cation)d(and)i(pushed)g(on)o
(to)f(the)224 694 y(abstract)d(stac)o(k.)k(The)13 b FG(pshRet)p
FK(NN)18 b FN(family)10 b(of)i(instructions)h(p)q(erform)f(this)h
(task.)18 b(Here)13 b(is)224 744 y(the)i FK(DCo)n(de)i
FN(arising)c(from)g(the)h(source)h(language)e(expression)i
FK(R)n(e)n(alMath.sin)s FN(\()p FM(x)p FN(\))f(|)320
856 y FF(pshAdr)67 b(_x)246 b FD(;)13 b FE(addr)n(ess)f(of)h(actual)e
(p)n(ar)n(ameter)320 902 y FF(derefD)353 b FD(;)13 b
FE(get)g(fp)g(double)e(value)320 947 y FF(mkPar)87 b(8,0)226
b FD(;)13 b FE(move)g(to)g(p)n(ar)n(ameter)f(lo)n(c)n(ation)320
993 y FF(call)107 b(_RealMath_)o(sin)320 1039 y(pshRetD)333
b FD(;)13 b FE(push)f(r)n(eturn)h(fp)g(double)e(value)224
1201 y FN(It)h(has)g(b)q(een)h(assumed)e(in)h(this)f(example)g(that)h
(some)f(kind)g(of)g FK(name)i(munging)1478 1186 y Fz(2)1509
1201 y FN(has)f(b)q(een)224 1251 y(used)h(to)f(con)o(v)o(ert)g(the)h
(quali\014ed)e(name)f(in)i(the)g(program)e(in)o(to)i(a)f(unique)h(name)
f(in)g(the)h(\015at)224 1301 y(name)h(space)i(of)e(the)i(system)e(link)
o(er.)224 1442 y FH(4.3.4)56 b(Ev)m(aluating)17 b(D)n(A)n(G)j
(expressions)224 1528 y FN(The)12 b(emission)d(of)i(expression)h(co)q
(de)g(in)e(situations)h(where)h(the)g(expression)g(is)e(represen)o(ted)
224 1578 y(b)o(y)21 b(a)f FK(dir)n(e)n(cte)n(d)g(acyclic)h(gr)n(aph)g
(\(D)o(A)o(G\))h FN(rather)f(than)f(a)g(tree,)j(in)o(tro)q(duces)e
(some)f(new)224 1628 y(issues.)25 b(One)16 b(rather)h(simple)d(case)i
(of)f(this)h(has)g(b)q(een)g(considered)h(already)m(,)e(that)h(of)f
(the)224 1678 y FK(INC)j FN(statemen)o(t)12 b(in)f(Mo)q(dula.)17
b(In)12 b(that)f(case)i(the)g(use)g(of)e(the)h FG(dup1)f
FN(instruction)h(pro)o(vided)224 1727 y(a)19 b(simple)e(solution.)32
b(Ho)o(w)o(ev)o(er,)20 b(in)f(general,)h(the)f(existence)i(of)d(shared)
i(no)q(des)f(in)g(the)224 1777 y(expression)c(represen)o(tation)h
(requires)f(a)f(more)f(\015exible)g(approac)o(h.)287
1832 y(The)k(idea)f(b)q(ehind)h(the)h(metho)q(d)d(presen)o(ted)k(here)f
(is)f(to)f(mark)f(shared)j(no)q(des)f(prior)224 1882
y(to)j(the)g(generation)g(of)f(in)o(termediate)g(co)q(de.)35
b(Suc)o(h)20 b(no)q(des)h(are)f(allo)q(cated)f(a)g(lo)q(cation)224
1931 y(in)d(the)h(stac)o(k)f(frame)f(whic)o(h)h(will)f(b)q(e)h(used)h
(in)f(the)h(corresp)q(onding)g FG(mkTmp)e FN(and)h FG(pshTmp)224
1981 y FN(instructions.)23 b(During)14 b(co)q(de)i(emission,)d(when)j
(the)g(no)q(de)f(is)g(visited)g(for)g(the)g(\014rst)h(time,)224
2031 y(the)h(v)n(alue)e(computed)g(is)h(copied)g(to)f(the)i(temp)q
(orary)m(.)22 b(Subsequen)o(t)17 b(visits)f(to)g(the)g(no)q(de)224
2081 y(do)e(not)g(recurse)i(to)e(the)g(shared)h(no)q(de's)f
(successors,)j(but)d(cause)h(emission)d(of)h(a)h FG(pshTmp)p
FN(.)287 2135 y(As)k(an)g(example,)f(consider)i(generation)f(of)f
FK(DCo)n(de)22 b FN(from)16 b(language)h FM(C)s FN('s)h(m)o(ultiple)224
2185 y(assignmen)o(t)13 b(construct.)20 b(In)14 b FM(C)i
FN(the)f(statemen)o(t)342 2240 y FG(v1)21 b(=)h(v2)f(=)h(v3)f(=)h
FK(exp)s FG(;)109 b(/*)21 b(assign)g(exp)g(to)g(3)h(int)f(variables)f
(*/)224 2295 y FN(assigns)15 b(the)h(v)n(alue)e(of)g(the)h(expression)h
(to)e(all)g(three)i(v)n(ariables.)k(This)14 b(statemen)o(t)h(is)f(not)
224 2344 y(the)h(same)e(as)342 2399 y FG(v1)21 b(=)h
FK(exp)s FG(;)g(v2)f(=)h FK(exp)s FG(;)g(v3)f(=)g FK(exp)s
FG(;)109 b(/*)22 b(not)f(the)g(same)g(*/)224 2454 y FN(either)16
b(in)f(terms)g(of)f(e\016ciency)m(,)h(or)g(seman)o(tically)m(,)e(if)h
(the)h(ev)n(aluation)f(of)g(the)i(expression)224 2503
y FK(exp)j FN(has)d(side-e\013ects.)24 b(The)16 b FK(D)o(A)o(G)h(for)n
(est)h FN(for)d(this)h(statemen)o(t)f(is)g(sho)o(wn)h(in)f(\014gure)h
(4.5.)224 2553 y(If)f(w)o(e)h(supp)q(ose)g(that)f(the)h(shared)g(no)q
(de)g(is)f(assigned)g(stac)o(k)h(lo)q(cation)e FK(fp)p
FN({16)g(the)i FK(DCo)n(de)224 2603 y FN(b)q(ecomes)f(|)p
224 2649 577 2 v 271 2676 a Fy(2)288 2688 y Fx(Also)c(kno)o(wn)g(as)h
Fu(name)h(mangling)p Fx(.)p eop
%%Page: 108 114
108 113 bop 224 274 a FN(108)320 b FL(CHAPTER)14 b(4.)32
b(GENERA)m(TING)12 b(INTERMEDIA)m(TE)i(CODE)303 349 y
 20260782 8091156 0 0 20260782 8091156 startTexFig

303 349 a
%%BeginDocument: multi.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-35.0 162.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Ellipse
n 198 61 18 18 0 360 DrawEllipse gs col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
190 63 m 
gs 1 -1 scale (asgn) col-1 show gr
% Ellipse
n 298 61 18 18 0 360 DrawEllipse gs col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
290 63 m 
gs 1 -1 scale (asgn) col-1 show gr
% Ellipse
n 98 61 18 18 0 360 DrawEllipse gs col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
90 63 m 
gs 1 -1 scale (asgn) col-1 show gr
% Ellipse
n 161 138 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 261 138 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 59 139 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 361 138 11 11 0 360 DrawEllipse gs col-1 s gr
% Polyline
n 156 147 m 140 178 l  181 178 l  166 147 l gs 0.95 setgray fill gr
gs col-1 s gr
% Polyline
n 256 147 m 240 178 l  281 178 l  266 147 l gs 0.95 setgray fill gr
gs col-1 s gr
% Polyline
n 54 148 m 38 179 l  79 179 l  64 148 l gs 0.95 setgray fill gr
gs col-1 s gr
% Polyline
n 356 147 m 340 178 l  381 178 l  366 147 l gs 0.95 setgray fill gr
gs col-1 s gr
0.500 setlinewidth
% Polyline
n 291 78 m 265 128 l gs col-1 s gr
n 270.465 121.825 m 265.000 128.000 l 266.916 119.980 l gs 2 setlinejoin col-1 s gr
% Polyline
n 190 76 m 164 127 l gs col-1 s gr
n 169.415 120.781 m 164.000 127.000 l 165.852 118.964 l gs 2 setlinejoin col-1 s gr
% Polyline
n 89 77 m 63 129 l gs col-1 s gr
n 68.367 122.739 m 63.000 129.000 l 64.789 120.950 l gs 2 setlinejoin col-1 s gr
% Open spline
n 308.000 77.000 m 313.000 83.500 l
	313.000 83.500 318.000 90.000 340.000 95.000 DrawSplineSection
	340.000 95.000 362.000 100.000 361.500 114.000 DrawSplineSection
	361.000 128.000 l gs col-1 s gr
n 363.284 120.076 m 361.000 128.000 l 359.287 119.934 l gs 2 setlinejoin col-1 s gr
% Open spline
n 208.000 77.000 m 214.000 85.500 l
	214.000 85.500 220.000 94.000 290.500 100.000 DrawSplineSection
	290.500 100.000 361.000 106.000 361.000 116.500 DrawSplineSection
	361.000 127.000 l gs col-1 s gr
% Open spline
n 110.000 75.000 m 118.000 84.000 l
	118.000 84.000 126.000 93.000 243.500 102.500 DrawSplineSection
	243.500 102.500 361.000 112.000 361.000 119.500 DrawSplineSection
	361.000 127.000 l gs col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
156 172 m 
gs 1 -1 scale (v2) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
56 173 m 
gs 1 -1 scale (v1) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
257 172 m 
gs 1 -1 scale (v3) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
354 172 m 
gs 1 -1 scale (exp) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 428 953 a FN(Figure)g(4.5:)k FK(D)o(A)o(G)d(for)n(est)i
FN(arising)c(from)f(m)o(ultiple)f(assignmen)o(t)320 1077
y FE(push)h(exp)h(value)396 b FD(;)49 b FE(c)n(ompute)12
b(exp)h(onc)n(e)f(only)320 1123 y FF(mkTmp)18 b(16)483
b FD(;)49 b FE(make)13 b(a)g(c)n(opy)g(to)g(tmp)320 1168
y(push)f(v3)h(addr)n(ess)377 b FD(;)320 1214 y FF(assignW)501
b FD(;)49 b FE(assign)12 b(to)h(v3)320 1260 y FF(pshTmp)k(16)464
b FD(;)49 b FE(use)13 b(the)f(tmp)320 1305 y(push)g(v2)h(addr)n(ess)377
b FD(;)320 1351 y FF(assignW)501 b FD(;)49 b FE(assign)12
b(to)h(v2)320 1397 y FF(pshTmp)k(16)464 b FD(;)49 b FE(use)13
b(the)f(tmp)i(again)320 1442 y(push)e(v1)h(addr)n(ess)377
b FD(;)320 1488 y FF(assignW)501 b FD(;)49 b FE(assign)12
b(to)h(v1)224 1657 y FI(4.4)67 b(Generating)23 b(co)r(de)e(for)h(Bo)r
(olean)g(expressions)224 1749 y FN(Bo)q(olean)16 b(expressions)i(o)q
(ccur)f(in)f(t)o(w)o(o)g(distinct)g(con)o(texts)h(in)f(programmi)o(ng)d
(languages.)224 1799 y(The)18 b(most)d(common)f(case)k(is)e(that)h(of)f
(expressions)i(whic)o(h)f(are)g(ev)n(aluated)g(in)f(order)h(to)224
1848 y(a\013ect)e(\015o)o(w-of-con)o(trol.)h(All)d(of)g(the)h(Bo)q
(olean)f(expressions)j(whic)o(h)d(o)q(ccur)i(in)e(conditional)224
1898 y(statemen)o(ts)j(fall)d(in)o(to)h(this)h(category)m(.)21
b(The)15 b(other)g(p)q(ossibilit)o(y)f(is)g(that)h(of)g(ev)n(aluation)e
(of)224 1948 y(an)k(expression)h(so)f(as)g(to)g(store)h(the)g(v)n
(alue,)e(or)h(pass)h(it)e(as)h(a)g(parameter)f(to)h(a)g(subpro-)224
1998 y(gram.)g(Most)d(con)o(temp)q(orary)f(languages)g(sp)q(ecify)i
FO(short)f(circuit)e FN(\(lazy\))h(ev)n(aluation)g(of)224
2048 y(Bo)q(olean)g(expressions)584 2033 y Fz(3)605 2048
y FN(,)f(so)h(that)h(correct)g(seman)o(tics)f(are)g(alw)o(a)o(ys)g
(obtained)f(b)o(y)h(ev)n(aluat-)224 2097 y(ing)h(Bo)q(olean)f
(expressions)j(using)d(what)h(w)o(e)g(shall)f(call)g
FO(jumping)g(co)q(de)p FN(.)287 2148 y(Jumping)c(co)q(de)i(ev)n
(aluates)g(expressions)h(incremen)o(tally)m(,)d(and)i(exits)g(from)e
(the)i(co)q(de)g(to)224 2198 y(ev)n(aluate)g(terms)f(and)g(factors)h
(just)g(as)g(so)q(on)f(as)h(a)f(result)i(is)e(kno)o(wn.)17
b(The)11 b(main)d(adv)n(an)o(tage)224 2248 y(of)16 b(this)g(feature)h
(is)f(not)h(so)f(m)o(uc)o(h)f(e\016ciency)i(\(it)f(is)g(not)g(alw)o(a)o
(ys)f(the)i(most)e(e\016cien)o(t,)i(as)224 2297 y(sho)o(wn)h(in)f(an)g
(exercise)j(at)d(the)h(end)g(of)f(this)h(c)o(hapter\))h(but)e(the)h(p)q
(ossiblit)o(y)f(of)g(writing)224 2347 y(guarded)e(co)q(de)f(suc)o(h)h
(as)f(|)295 2437 y FF(IF)39 b(\(ptr)18 b(<>)h(NIL\))f(AND)g
(\(ptr^.size)e(<=)j(8\))g(THEN)f(...)224 2531 y FN(In)e(the)g(case)g
(of)e(a)h(language)g(with)g(full)f(ev)n(aluation)g(this)h(w)o(ould)f
(ha)o(v)o(e)h(to)h(b)q(e)f(written)h(as)224 2581 y(the)f(alternativ)o
(e)f(|)p 224 2610 577 2 v 271 2636 a Fy(3)288 2648 y
Fu(A)n(da)19 b Fx(is)c(an)g(exception,)e(as)i(it)g(allo)o(ws)f(the)h
(programme)o(r)d(to)j(sp)q(ecify)f(either)f(full)h(ev)n(aluation)f
(\(the)224 2688 y(default\))d(or)h(short)f(circuit)g(ev)n(aluation)f
(using)h(the)h(sp)q(ecial)f(op)q(erators)f(`)p Fi(or)k(else)p
Fx(')e(and)g(`)p Fi(and)h(then)p Fx('.)p eop
%%Page: 109 115
109 114 bop 224 274 a FL(4.4.)31 b(GENERA)m(TING)13 b(CODE)h(F)o(OR)g
(BOOLEAN)h(EXPRESSIONS)225 b FN(109)295 381 y FF(IF)39
b(ptr)18 b(<>)h(NIL)f(THEN)335 427 y(IF)g(ptr^.size)e(<=)j(8)h(THEN)e
(...)224 613 y FH(4.4.1)56 b(Simple)16 b(jumping)h(co)r(de)224
696 y FN(Jumping)11 b(co)q(de)h(is)g(generated)h(b)o(y)f(a)f(recursiv)o
(e)j(tra)o(v)o(ersal)e(of)f(the)h FK(AST)17 b FN(expression,)c(b)q
(eing)224 746 y(careful)k(to)e(ev)n(aluate)h(strictly)g(left-to-righ)o
(t)f(as)h(demanded)g(b)o(y)g(the)g(desired)h(seman)o(tics.)224
796 y(The)e(recursiv)o(e)g(pro)q(cedure)h(whic)o(h)e(generates)i(the)e
(co)q(de)h(should)f(b)q(e)g(passed)h(the)g(expres-)224
846 y(sion)e(descriptor)h(and)e(t)o(w)o(o)h(lab)q(els.)k(These)d(lab)q
(els)f(are)g(the)g(targets)h(to)f(whic)o(h)f(the)i(con)o(trol)224
895 y(m)o(ust)e(jump)e(in)i(the)g(ev)o(en)o(t)h(that)f(a)g
FK(false)j FN(or)d FK(true)j FN(result)e(is)f(determined.)18
b(The)12 b(expression)224 945 y(signature)j(is)295 1051
y FF(PROCEDURE)h(BoolExpr\(ex)o(p)g(:)k(ExprDesc;)c(fLab,)h(tLab)i(:)g
(LabelType)o(\);)224 1157 y FN(F)m(or)14 b(example,)e(for)i(a)f(simple)
g FK(if)22 b FN(statemen)o(t,)13 b(the)i(pro)q(cedure)h(w)o(ould)d(b)q
(e)h(called)g(with)g(the)224 1206 y(conditional)f(expression)i(as)e
FK(exp)s FN(,)h(and)f(with)h(the)g FK(elsep)n(art)g(lab)n(el)j
FN(and)d(the)g FK(thenp)n(art)h(lab)n(el)224 1256 y FN(as)i(the)g
(other)g(t)o(w)o(o)f(parameters.)25 b(The)17 b(in)o(teresting)g(part)f
(of)g(the)h(co)q(de)g(arises)g(from)e(the)224 1306 y(w)o(a)o(y)f(in)f
(whic)o(h)h(this)g(pro)q(cedure)i(calls)d(itself)h(recursiv)o(ely)m(.)
287 1360 y(W)m(e)9 b(shall)h(in)o(tro)q(duce)g(a)g(graphical)f
(represen)o(tation)j(whic)o(h)e(mak)o(es)f(the)i(understanding)224
1409 y(of)16 b(the)h(co)q(de)g(generation)g(pro)q(cess)h(simple.)24
b(W)m(e)15 b(represen)o(t)k(the)e(co)q(de)g(whic)o(h)f(ev)n(aluates)224
1459 y(eac)o(h)g(sub)q(expression)h(as)e(a)g(blac)o(k)f(b)q(o)o(x)h
(with)g(one)g(en)o(try)h(and)f(t)o(w)o(o)f(exits.)22
b(The)15 b(exits)h(are)224 1509 y(the)d FK(true)g(exit)t
FN(,)e(whic)o(h)h(is)g(tak)o(en)f(when)i(the)f(expression)h(ev)n
(aluates)f(to)g(true,)h(and)e(the)i FK(false)224 1559
y(exit)18 b FN(whic)o(h)c(is)g(tak)o(en)g(otherwise.)p
793 1672 307 4 v 793 1791 4 120 v 1096 1791 V 793 1794
307 4 v 676 1732 120 2 v 755 1731 a FC(-)p 1035 1672
2 60 v 1036 1612 180 2 v 1175 1611 a(-)p 1035 1851 2
60 v 1036 1852 180 2 v 1175 1851 a(-)1051 1657 y FK(TExit)1051
1836 y(FExit)287 1920 y FN(These)k(blo)q(c)o(ks)g(are)f(connected)j
(together)e(in)f(v)n(arious)f(w)o(a)o(ys)h(in)g(order)h(to)g(construct)
224 1970 y(co)q(de)d(for)f(more)f(complex)f(expressions.)20
b(Here)15 b(is)f(the)g(diagram)e(for)h(an)h FK(OR)h FN(expression.)p
1123 2076 307 4 v 1123 2195 4 120 v 1426 2195 V 1123
2198 307 4 v 583 2076 V 583 2195 4 120 v 886 2195 V 583
2198 307 4 v 1365 2255 2 60 v 1366 2256 180 2 v 1504
2255 a FC(-)p 1365 2076 2 60 v 1366 2016 180 2 v 1504
2015 a(-)p 1006 2136 120 2 v 1085 2135 a(-)1381 2240
y FK(FExit)1381 2061 y(TExit)p 467 2136 V 545 2135 a
FC(-)p 826 2076 2 60 v 826 2016 180 2 v 965 2015 a(-)p
826 2255 2 60 v 826 2256 180 2 v 965 2255 a(-)841 2061
y FK(TExit)841 2240 y(FExit)p 1006 2016 360 2 v 1325
2015 a FC(-)p 1005 2255 2 120 v 1201 2150 a FN(term2)-647
b(term1)287 2339 y(In)16 b(this)f(diagram)f(the)i(expression)i(is)d
(comprised)h(of)f(t)o(w)o(o)g(terms.)24 b(In)16 b(the)g(case)h(that)224
2389 y(the)c(\014rst)g(term)e(ev)n(aluates)i(to)f FK(true)i
FN(then)f(con)o(trol)f(passes)h(to)f(the)h(true)g(lab)q(el)e(of)h(the)h
(whole)224 2438 y(expression.)19 b(That)12 b(is,)f(the)i(ev)n(aluation)
e(is)g(\\short)i(circuited")f(when)h(a)e(term)g(ev)n(aluates)h(to)224
2488 y FK(true)s FN(.)19 b(Ho)o(w)o(ev)o(er,)14 b(if)f(the)i(\014rst)g
(term)e(ev)n(aluates)h(to)g FK(false)j FN(con)o(trol)d(passes)h(to)f
(the)h(input)f(of)224 2538 y(the)f(second)g(ev)n(aluation.)j(In)11
b(order)i(to)f(ac)o(hiev)o(e)g(this)f(e\013ect)j(w)o(e)e(m)o(ust)f
(allo)q(cate)g(a)g(lab)q(el)h(for)224 2588 y(the)18 b(p)q(osition)d
(whic)o(h)i(corresp)q(onds)h(to)f(the)g(input)f(of)g(the)i(second)f
(term-b)q(o)o(x.)25 b(Supp)q(ose)224 2638 y(that)18 b(this)g(lab)q(el)f
(is)g(called)g FG(temp)p FN(.)28 b(No)o(w)18 b(co)q(de)g(for)f(the)h
(expression)h(is)e(generated)i(b)o(y)f(a)224 2688 y(recursiv)o(e)e
(call)d(of)g(|)p eop
%%Page: 110 116
110 115 bop 224 274 a FN(110)320 b FL(CHAPTER)14 b(4.)32
b(GENERA)m(TING)12 b(INTERMEDIA)m(TE)i(CODE)295 381 y
FF(AllocateLa)o(bel)o(\(t)o(emp)o(\);)295 427 y(BoolExpr\(e)o(xp^)o(.l)
o(eft)o(Op,)o(te)o(mp,)o(tL)o(ab\))o(;)295 472 y(EmitLabel\()o(tem)o
(p\))o(;)295 518 y(BoolExpr\(e)o(xp^)o(.r)o(igh)o(tOp)o(,f)o(Lab)o(,t)o
(Lab)o(\);)224 592 y FN(Note)j(that)g(the)f(call)g(of)g
FK(Bo)n(olExpr)21 b FN(whic)o(h)16 b(generates)i(co)q(de)f(for)f(the)h
(second)g(term)f(uses)224 642 y(the)d(same)f(lab)q(els)g(as)h(the)g(en)
o(tire)g(expression.)19 b(This)12 b(is)h(in)f(accordance)h(with)g(the)g
(diagram)224 692 y(sho)o(wn)h(ab)q(o)o(v)o(e.)287 742
y(Supp)q(ose)k(w)o(e)g(ha)o(v)o(e)f(the)h(expression)h
FG(\(a)i(OR)h(b\))p FN(,)17 b(where)i FM(a)e FN(and)h
FM(b)f FN(are)h(v)n(ariables)f(of)224 792 y(Bo)q(olean)10
b(t)o(yp)q(e.)17 b(W)m(e)10 b(wish)f(to)h(jump)e(to)i
FG(thenLab)e FN(if)h(the)i(expression)f(is)g(true,)h(and)f
FG(elseLab)224 841 y FN(otherwise.)287 891 y(The)k FK(DCo)n(de)j
FN(generated)f(b)o(y)d(the)i(ab)q(o)o(v)o(e)e(calls)h(should)g(b)q(e)g
(|)507 963 y FF(pshAdr)67 b(_a)507 1009 y(derefUB)507
1054 y(brTrue)g(elseLab)507 1100 y(branch)g(lab1)320
1146 y(lab1:)560 b FD(;)13 b FE(entry)f(of)h(se)n(c)n(ond)f(b)n(ox)507
1191 y FF(pshAdr)67 b(_b)507 1237 y(derefUB)507 1283
y(brTrue)g(elseLab)507 1328 y(branch)g(thenLab)224 1453
y FN(This)14 b(co)q(de)h(can)f(clearly)g(b)q(e)h(optimized)d(b)o(y)i
(eliminating)d(redundan)o(t)j(jumps)f(and)h(lab)q(els.)224
1502 y(This)g(topic)g(is)g(the)g(sub)r(ject)i(of)d(the)h(next)h
(section.)287 1552 y(In)f(the)h(case)g(of)f(a)g(term)f(comprised)h(of)g
(t)o(w)o(o)g(factors)g(with)g(an)g FK(AND)k FN(connectiv)o(e)e(the)224
1602 y(situation)e(is)f(dual.)18 b(Here)d(is)f(the)g(blac)o(k-b)q(o)o
(x)f(diagram)f(|)p 1183 1734 307 4 v 1183 1854 4 120
v 1486 1854 V 1183 1857 307 4 v 643 1734 V 643 1854 4
120 v 946 1854 V 643 1857 307 4 v 1425 1914 2 60 v 1426
1915 180 2 v 1564 1914 a FC(-)p 1425 1734 2 60 v 1426
1675 180 2 v 1564 1674 a(-)p 1066 1795 120 2 v 1145 1794
a(-)1441 1899 y FK(FExit)1441 1719 y(TExit)p 527 1795
V 605 1794 a FC(-)p 886 1734 2 60 v 886 1675 180 2 v
1025 1674 a(-)p 886 1914 2 60 v 886 1915 180 2 v 1025
1914 a(-)901 1719 y FK(TExit)901 1899 y(FExit)p 1065
1794 2 120 v 1051 1915 375 2 v 1385 1914 a FC(-)1261
1809 y FN(factor2)-651 b(factor1)287 1964 y(In)16 b(this)g(diagram)e
(the)j(term)f(is)g(comprised)g(of)g(t)o(w)o(o)g(factors.)26
b(In)16 b(the)h(case)g(that)g(the)224 2014 y(\014rst)f(factor)f(ev)n
(aluates)f(to)h FK(false)i FN(then)e(con)o(trol)g(passes)h(to)e(the)i
(false)e(lab)q(el)g(of)g(the)i(whole)224 2064 y(term.)30
b(That)18 b(is,)h(the)f(ev)n(aluation)f(is)h(\\short)g(circuited")h
(when)g(a)e(factor)h(ev)n(aluates)g(to)224 2113 y FK(false)s
FN(.)g(Ho)o(w)o(ev)o(er,)13 b(if)e(the)j(\014rst)f(factor)g(ev)n
(aluates)f(to)h FK(true)i FN(con)o(trol)e(passes)h(to)e(the)h(input)g
(of)224 2163 y(the)g(second)g(ev)n(aluation.)j(In)11
b(order)i(to)f(ac)o(hiev)o(e)g(this)f(e\013ect)j(w)o(e)e(m)o(ust)f
(allo)q(cate)g(a)g(lab)q(el)h(for)224 2213 y(the)k(p)q(osition)e(whic)o
(h)h(corresp)q(onds)i(to)e(the)h(input)f(of)f(the)i(second)g(factor-b)q
(o)o(x.)21 b(Supp)q(ose)224 2263 y(that)15 b(this)f(lab)q(el)g(is)g
(called)h FG(temp)p FN(.)j(No)o(w)c(co)q(de)i(for)e(the)h(term)e(is)i
(generated)g(b)o(y)g(execution)224 2313 y(of)f(|)295
2377 y FF(AllocateLa)o(bel)o(\(t)o(emp)o(\);)295 2422
y(BoolExpr\(e)o(xp^)o(.l)o(eft)o(Op,)o(fL)o(ab,)o(te)o(mp\))o(;)295
2468 y(EmitLabel\()o(tem)o(p\))o(;)295 2514 y(BoolExpr\(e)o(xp^)o(.r)o
(igh)o(tOp)o(,f)o(Lab)o(,t)o(Lab)o(\);)224 2588 y FN(Note)i(that)f(the)
g(call)f(of)g FK(Bo)n(olExpr)20 b FN(whic)o(h)14 b(generates)j(co)q(de)
e(for)g(the)g(second)h(factor)f(uses)224 2638 y(the)d(same)e(lab)q(els)
g(as)h(the)g(en)o(tire)g(term.)17 b(This)10 b(is)h(in)f(accordance)i
(with)f(the)g(diagram)d(sho)o(wn)224 2688 y(ab)q(o)o(v)o(e.)p
eop
%%Page: 111 117
111 116 bop 224 274 a FL(4.4.)31 b(GENERA)m(TING)13 b(CODE)h(F)o(OR)g
(BOOLEAN)h(EXPRESSIONS)225 b FN(111)287 390 y(Supp)q(ose)16
b(w)o(e)g(ha)o(v)o(e)g(the)g(expression)h FG(\(a)22 b(AND)f(b\))p
FN(,)15 b(where)i FM(a)f FN(and)f FM(b)h FN(are)g(v)n(ariables)f(of)224
440 y(Bo)q(olean)10 b(t)o(yp)q(e.)17 b(W)m(e)10 b(wish)f(to)h(jump)e
(to)i FG(thenLab)e FN(if)h(the)i(expression)f(is)g(true,)h(and)f
FG(elseLab)224 490 y FN(otherwise.)287 540 y(The)k FK(DCo)n(de)j
FN(generated)f(b)o(y)d(the)i(ab)q(o)o(v)o(e)e(calls)h(should)g(b)q(e)g
(|)507 627 y FF(pshAdr)67 b(_a)507 672 y(derefUB)507
718 y(brTrue)g(lab1)507 764 y(branch)g(elseLab)320 809
y(lab1:)560 b FD(;)13 b FE(entry)f(of)h(se)n(c)n(ond)f(b)n(ox)507
855 y FF(pshAdr)67 b(_b)507 901 y(derefUB)507 946 y(brTrue)g(thenLab)
507 992 y(branch)g(elseLab)224 1131 y FN(This)14 b(co)q(de)h(can)f
(clearly)g(b)q(e)h(optimized)d(b)o(y)i(eliminating)d(redundan)o(t)j
(jumps)f(and)h(lab)q(els.)224 1181 y(This)g(topic)g(is)g(the)g(sub)r
(ject)i(of)d(the)h(next)h(section.)287 1231 y(Finally)m(,)d(w)o(e)i(ma)
o(y)f(note)h(that)h(the)g(generation)f(of)g(co)q(de)h(for)f(a)g
FK(NOT)19 b FN(no)q(de)c(is)f(almost)224 1280 y(trivial)f(|)295
1368 y FF(BoolExpr\(e)o(xp^)o(.n)o(otO)o(p,t)o(La)o(b,f)o(La)o(b\);)j
(\(*)j(just)f(swap)g(labels)f(*\))224 1460 y FN(Since)e
FK(NOT)j FN(complemen)o(ts)12 b(logical)g(v)n(alues,)h(the)i
(generation)f(of)f(co)q(de)h(requires)h(a)f(single)224
1510 y(call)k(to)g FK(Bo)n(olExpr)k FN(with)c(the)h(true)g(and)f(false)
f(lab)q(els)h(simply)e(sw)o(app)q(ed)j(in)f(parameter)224
1560 y(p)q(osition!)224 1677 y FH(4.4.2)56 b(Optimized)16
b(jumping)h(co)r(de)224 1754 y FN(Jumping)10 b(co)q(de)j(ma)o(y)d(b)q
(e)i(optimized)e(so)i(as)g(to)f(generate)i(the)g(minim)o(al)8
b(n)o(um)o(b)q(er)j(of)g(lab)q(els.)224 1804 y(This)h(is)f(done)h(b)o
(y)f(the)h(in)o(tro)q(duction)f(of)g(a)g(distinguished)g(v)n(alue)g(of)
g(the)h(lab)q(el)f(t)o(yp)q(e)g(named)224 1854 y FK(fal)r(lThr)n(ough)s
FN(.)26 b(The)17 b(use)h(of)e(this)h(v)n(alue)f(as)h(a)f(parameter)g
(to)h FK(Bo)n(olExpr)k FN(indicates)c(that)224 1904 y(con)o(trol)g(ma)o
(y)d(pass)j(to)f(this)h(lo)q(cation)e(b)o(y)h(simply)f(falling)f
(through.)25 b(F)m(or)16 b(example,)g(the)224 1953 y(co)q(de)e(for)e
(an)h FK(if)21 b FN(statemen)o(t)12 b(ma)o(y)f(b)q(e)j(generated)g(so)f
(that)f(a)h(false)f(v)n(alue)g(in)h(the)g(condition)224
2003 y(test)j(causes)f(a)f(jump)e(to)i(the)h FK(elsep)n(art)t
FN(,)e(while)g(a)h(true)h(v)n(alue)f(simply)e(falls)h(in)o(to)g(the)i
(start)224 2053 y(of)f(the)g(co)q(de)h(for)e(the)i FK(thenp)n(art)p
FN(.)287 2103 y(Before)f(w)o(e)g(lo)q(ok)e(at)i(the)g(c)o(hanges)g(to)f
(the)i(generation)e(of)g(co)q(de)i(for)e(the)h(binary)f(op)q(er-)224
2153 y(ators)i(for)g(fall-through)e(lab)q(els,)i(w)o(e)g(discuss)h(the)
f(generation)g(of)f(co)q(de)i(for)f(the)g(lea)o(v)o(es)g(of)224
2203 y(our)f(expression)h(trees.)224 2312 y FO(Bo)q(olean)g(expression)
f(tree)g(lea)o(v)o(es)224 2388 y FN(The)g(ev)n(aluation)f(of)g(Bo)q
(olean)g(lea)o(v)o(es)h(is)f(p)q(erformed)g(b)o(y)h(pushing)f(a)g(Bo)q
(olean)h(v)n(alue)f(on)o(to)224 2438 y(the)h(top)f(of)f(the)i(abstract)
g(stac)o(k.)k(In)13 b(the)g(case)h(of)f(Bo)q(olean)g(v)n(ariables,)e
(these)k(are)e(pushed)224 2488 y(on)o(to)h(the)g(abstract)h(stac)o(k)f
(in)g(the)g(same)f(w)o(a)o(y)g(as)h(an)o(y)g(other)g(v)n(ariable.)287
2538 y(Relational)9 b(tests)k(are)g(p)q(erformed)e(b)o(y)g(the)i
(normal)c FK(PushV)m(alue)15 b FN(pro)q(cedure.)20 b(The)12
b(t)o(w)o(o)224 2588 y(op)q(erands)18 b(of)e(the)i(relational)e(test)i
(are)f(pushed)h(on)o(to)e(the)i(stac)o(k)f(and)g(the)g(appropriate)224
2638 y(relational)e(test)i(co)q(de)f(is)g(generated.)24
b(All)15 b(these)i(co)q(des)g(lea)o(v)o(e)f(their)g(Bo)q(olean)f
(result)i(on)224 2688 y(the)e(top)f(of)f(the)h(abstract)h(stac)o(k.)p
eop
%%Page: 112 118
112 117 bop 224 274 a FN(112)320 b FL(CHAPTER)14 b(4.)32
b(GENERA)m(TING)12 b(INTERMEDIA)m(TE)i(CODE)287 390 y
FN(Once)d(the)h(v)n(alue)e(is)g(pushed,)i(w)o(e)f(ha)o(v)o(e)f(t)o(w)o
(o)g(w)o(a)o(ys)h(of)f(generating)g(the)i(required)f(jumps,)224
440 y(using)i(either)g FG(brTrue)e FN(or)h FG(brFalse)p
FN(.)k(In)c(the)h(case)h(that)e(b)q(oth)h(lab)q(els)f(are)h(ordinary)e
(lab)q(els)224 490 y(it)j(do)q(es)h(not)e(matter)h(whic)o(h)f(of)h(the)
g(follo)o(wing)d(w)o(e)j(c)o(ho)q(ose.)320 560 y FD(;)f
FE(\014rst)g(version)410 606 y FF(brFalse)47 b FE(falseL)n(ab)n(el)410
651 y FF(branch)67 b FE(trueL)n(ab)n(el)320 743 y FD(;)13
b FE(se)n(c)n(ond)e(version)410 788 y FF(brTrue)67 b
FE(trueL)n(ab)n(el)410 834 y FF(branch)g FE(falseL)n(ab)n(el)224
956 y FN(Ho)o(w)o(ev)o(er,)22 b(if)e(one)g(of)g(the)h(lab)q(els)f(is)g
(the)h(distinguished)f(v)n(alue)g FK(fal)r(lThr)n(ough)j
FN(w)o(e)d(ma)o(y)224 1006 y(pro)q(duce)15 b(nicer)f(co)q(de.)19
b(Here)c(is)e(the)h(fragmen)o(t)f(of)f(the)j FK(Bo)n(olExpr)j
FN(co)q(de)c(whic)o(h)g(generates)224 1056 y(the)h(co)q(de.)295
1118 y FF(\(*)k(Bool)f(is)h(on)g(top-of-st)o(ack)o(,)d(so)j(...)g(*\))
315 1164 y(IF)g(tLab)f(=)h(fallThroug)o(h)d(THEN)354
1209 y(EmitBrFals)o(eT)o(o\(f)o(Lab)o(\);)315 1255 y(ELSIF)i(fLab)g(=)h
(fallThrou)o(gh)d(THEN)354 1301 y(EmitBrTrue)o(To)o(\(tL)o(ab\))o(;)315
1346 y(ELSE)i(\(*)h(two)f(real)g(labels)g(*\))354 1392
y(EmitBrFals)o(eT)o(o\(f)o(Lab)o(\);)354 1438 y(EmitBranch)o(To)o(\(tL)
o(ab\))o(;)315 1483 y(END;)224 1611 y FO(Optimal)c(co)q(de)h(for)h
(binary)e(op)q(erands)224 1688 y FN(Let)h(us)f(lo)q(ok)f(once)i(again)d
(at)i(the)g(blo)q(c)o(k)g(diagram)e(for)h(an)h FK(OR)h
FN(expression.)p 1123 1790 307 4 v 1123 1910 4 120 v
1426 1910 V 1123 1913 307 4 v 583 1790 V 583 1910 4 120
v 886 1910 V 583 1913 307 4 v 1365 1970 2 60 v 1366 1971
180 2 v 1504 1970 a FC(-)p 1365 1790 2 60 v 1366 1731
180 2 v 1504 1730 a(-)p 1006 1851 120 2 v 1085 1850 a(-)1381
1955 y FK(FExit)1381 1775 y(TExit)p 467 1851 V 545 1850
a FC(-)p 826 1790 2 60 v 826 1731 180 2 v 965 1730 a(-)p
826 1970 2 60 v 826 1971 180 2 v 965 1970 a(-)841 1775
y FK(TExit)841 1955 y(FExit)p 1006 1731 360 2 v 1325
1730 a FC(-)p 1005 1970 2 120 v 1201 1865 a FN(term2)-647
b(term1)287 2050 y(Since)16 b(w)o(e)g(generate)h(co)q(de)f(sequen)o
(tially)f(for)h(eac)o(h)g(ev)n(aluation,)e(it)h(is)h(clear)g(that)g
(the)224 2100 y(false)e(exit)g(of)f(the)i(\014rst)f(ev)n(aluation)f
(should)g(fall)g(through)g(in)o(to)h(the)g(en)o(try)h(of)e(the)h
(second)224 2149 y(ev)n(aluation.)j(W)m(e)d(w)o(ould)f(th)o(us)h(exp)q
(ect)i(to)d(b)q(e)i(able)f(to)f(omit)f(the)j(allo)q(cation)d(of)h(the)i
(lab)q(el)224 2199 y(named)e FG(temp)g FN(in)h(the)g(previous)g
(section,)g(and)g(p)q(erform)f(the)i(follo)o(wing)c(calls)i(|)295
2270 y FF(BoolExpr\(e)o(xp^)o(.l)o(eft)o(Op,)o(fa)o(llT)o(hr)o(oug)o
(h,t)o(La)o(b\);)295 2316 y(BoolExpr\(e)o(xp^)o(.r)o(igh)o(tOp)o(,f)o
(Lab)o(,t)o(Lab)o(\);)287 2389 y FN(Ho)o(w)o(ev)o(er,)h(this)g(is)g
(not)g(quite)h(all)e(there)i(is)f(to)g(it.)19 b(It)14
b(is)g(p)q(ossible)h(that)f(the)h(true)g(lab)q(el)224
2438 y(whic)o(h)d(w)o(as)f(passed)i(as)f(an)f(actual)g(parameter)h(to)f
(the)h(outer)h(call)d(of)h FK(Bo)n(olExpr)17 b FN(ma)o(y)9
b(ha)o(v)o(e)224 2488 y(b)q(een)17 b(the)f(distinguished)f(v)n(alue)g
FK(fal)r(lThr)n(ough)p FN(.)21 b(A)15 b(rather)i(ob)o(vious)d(observ)n
(ation)h(is)g(that)224 2538 y(w)o(e)e(cannot)f(use)h
FK(fal)r(lThr)n(ough)i FN(as)e(actual)f(parameter)f(of)h
FK(b)n(oth)h FN(formals)d(in)i(the)g(\014rst)h(call)f(of)224
2588 y FK(Bo)n(olExpr)p FN(.)22 b(Indeed)16 b(w)o(e)f(cannot)h
FK(jump)h FN(to)e FK(fal)r(lThr)n(ough)j FN(out)d(of)f(the)i(\014rst)g
(term)e(b)q(o)o(x.)21 b(In)224 2638 y(this)15 b(case)g(w)o(e)f(m)o(ust)
g(allo)q(cate)f(a)h(new)h(lab)q(el)f FK(xL)n(ab)j FN(to)d(jump)f(to.)19
b(The)c(co)q(de)g(for)f FK(OR)i FN(then)224 2688 y(b)q(ecomes)f(more)d
(complex)h(|)p eop
%%Page: 113 119
113 118 bop 224 274 a FL(4.4.)31 b(GENERA)m(TING)13 b(CODE)h(F)o(OR)g
(BOOLEAN)h(EXPRESSIONS)225 b FN(113)266 381 y FF(IF)19
b(tLab)f(#)h(fallThrou)o(gh)d(THEN)i(xLab)g(:=)h(tLab)f(ELSE)g
(AllocateLab)o(el)o(\(xL)o(ab)o(\))f(END;)266 427 y(BoolExpr\()o(ex)o
(p^.)o(lef)o(tO)o(p,f)o(al)o(lTh)o(rou)o(gh)o(,xL)o(ab)o(\);)266
472 y(BoolExpr\()o(ex)o(p^.)o(rig)o(ht)o(Op,)o(fL)o(ab,)o(tLa)o(b\))o
(;)266 518 y(IF)i(tLab)f(=)h(fallThrou)o(gh)d(THEN)i(EmitLabel\()o(xLa)
o(b\))e(END;)224 634 y FN(The)e(treew)o(alking)f(co)q(de)h(is)f(more)f
(complex,)g(but)i(the)f(generated)i(co)q(de)f(is)f(optimal.)i(Sup-)224
684 y(p)q(ose,)h(as)e(b)q(efore,)h(that)g(w)o(e)g(ha)o(v)o(e)f(the)i
(expression)f FG(\(a)22 b(OR)f(b\))p FN(,)14 b(where)i
FM(a)e FN(and)h FM(b)f FN(are)h(v)n(ari-)224 734 y(ables)c(of)f(Bo)q
(olean)h(t)o(yp)q(e.)17 b(W)m(e)11 b(wish)f(to)h(fall)e(through)i(in)o
(to)f(the)h FK(thenp)n(art)k FN(if)10 b(the)h(expression)224
784 y(is)16 b(true,)g(and)f(jump)f(to)h(the)h(lab)q(el)f
FG(elseLab)f FN(otherwise.)24 b(The)16 b(initial)d(call)i(to)g
FK(Bo)n(olExpr)224 833 y FN(will)e(ha)o(v)o(e)h(actual)f(false)h(and)f
(true)i(lab)q(els)f(\()p FG(elseLab,)20 b(fallThrough)p
FN(\))12 b(resp)q(ectiv)o(ely)m(.)287 890 y(The)i FK(DCo)n(de)j
FN(generated)f(b)o(y)d(the)i(ab)q(o)o(v)o(e)e(calls)h(should)g(b)q(e)g
(|)433 1011 y FF(pshAdr)j(_a)433 1057 y(derefUB)433 1102
y(brTrue)56 b(lab1)155 b(;)13 b FE(lab1)f(is)h(xL)n(ab)295
1148 y FD(;)g FE(else)f(fal)r(l)h(into)f(se)n(c)n(ond)g(test)g(on)h
(false)433 1194 y FF(pshAdr)k(_b)433 1239 y(derefUB)433
1285 y(brFalse)36 b(elseLab)295 1331 y FD(;)13 b FE(else)f(fal)r(l)h
(into)f(thenp)n(art)g(lab)n(el)g(on)h(true)295 1376 y
FF(lab1:)449 b(;)13 b FE(start)g(of)g(thenp)n(art)224
1588 y FO(Bo)q(olExpr)i(and)h(PushBo)q(ol)d(pro)q(cedures)224
1677 y FN(Figure)i(4.6)f(has)h(the)g(complete)f(co)q(de)h(for)g(the)g
FK(Bo)n(olExpr)k FN(pro)q(cedure.)37 b(This)14 b(pro)q(cedure)224
1727 y(is)i(called)f(whenev)o(er)i(the)f(transition)f(has)g(b)q(een)i
(made)d(to)h(jumping)e(co)q(de.)24 b(Within)14 b(this)224
1777 y(pro)q(cedure)19 b(the)e(generated)h(co)q(de)g(ma)o(y)c(rev)o
(ert)k(to)f(ordinary)f(expression)i(ev)n(aluation,)d(if)224
1827 y(a)k(simple)e(Bo)q(olean)i(v)n(alue)f(is)h(required)h(from)d(a)h
(v)n(ariable,)h(function,)g(or)g(from)e(a)i(rela-)224
1877 y(tional)14 b(op)q(erator.)20 b(This)14 b(is)g(seen)i(in)e(the)h
FK(desigNo)n(de)j FN(case)d(and)g(the)g FK(elsep)n(art)i
FN(of)d(the)h(case)224 1926 y(statemen)o(t.)287 1983
y(W)m(e)e(ha)o(v)o(e)h(not)g(y)o(et)g(sho)o(wn)g(ho)o(w)f(the)i
(transition)e(is)h(made)e(in)i(the)g(forw)o(ard)g(direction,)224
2033 y(from)f FK(PushV)m(alue)18 b FN(to)d(the)g(jumping)d(co)q(de.)21
b(Remem)o(b)q(er)13 b(that)i(\014gure)g(4.2)e(is)i(a)f(simpli\014ed)224
2083 y(v)o(ersion)19 b(whic)o(h)g(glosses)g(o)o(v)o(er)g(this)g(p)q
(oin)o(t.)32 b(Occurrences)22 b(of)c(Bo)q(olean)h(expressions)h(as)224
2133 y(con)o(trols)13 b(in)f(conditional)f(statemen)o(ts)i(do)f(not)g
(cause)i(this)e(transition)g(to)g(b)q(e)h(made,)e(since)224
2182 y(from)19 b(the)h(start)h(the)g(result)f(of)g(the)g(ev)n(aluation)
f(is)h(kno)o(wn)f(to)h(b)q(e)h(a)f(\015o)o(w)f(of)h(con)o(trol)224
2232 y(action.)38 b(Ho)o(w)o(ev)o(er,)23 b(wherev)o(er)f(Bo)q(olean)f
(expressions)h(o)q(ccur)g(as)e(righ)o(t-hand-sides)h(of)224
2282 y(assignmen)o(ts,)d(or)g(as)h(actual)e(v)n(alue)h(parameters)g(in)
g(pro)q(cedure)i(calls,)e(the)h FK(PushV)m(alue)224 2332
y FN(pro)q(cedure)f(m)o(ust)d(decide)j(ho)o(w)d(to)h(compute)g(the)g(v)
n(alue)g(on)o(to)g(the)g(top)g(of)g(the)g(abstract)224
2382 y(stac)o(k)f(while)e(resp)q(ecting)j(the)e(short-circuit)h(seman)o
(tics.)287 2438 y(The)g(existing)g FK(Bo)n(olExpr)k FN(pro)q(cedure)e
(is)e(p)q(erfectly)h(adequate)g(for)e(relational)g(op)q(era-)224
2488 y(tors,)e(Bo)q(olean)f(v)n(alued)g(designators)h(and)f(function)g
(calls,)g(and)g(ev)o(en)h(for)f(the)h(unary)f FK(NOT)224
2538 y FN(op)q(erators)g(applied)f(to)f(an)o(y)h(one)g(of)f(these.)18
b(Ho)o(w)o(ev)o(er)11 b(if)e(the)h(expression)h(requires)h(jumping)224
2588 y(co)q(de)k(w)o(e)f(m)o(ust)e(arrange)i(for)f(this)h(\015o)o(w)f
(of)g(con)o(trol)g(to)h(b)q(e)g(turned)h(bac)o(k)e(in)o(to)g(a)g(Bo)q
(olean)224 2638 y(v)n(alue)j(on)g(the)g(top)g(of)g(the)h(abstract)g
(stac)o(k.)28 b(W)m(e)16 b(ma)o(y)g(think)g(of)h(this)g(diagramaticall)
o(y)224 2688 y(th)o(us)e(|)p eop
%%Page: 114 120
114 119 bop 224 274 a FN(114)320 b FL(CHAPTER)14 b(4.)32
b(GENERA)m(TING)12 b(INTERMEDIA)m(TE)i(CODE)p 270 392
1350 2 v 269 438 2 46 v 335 424 a FF(PROCEDUR)o(E)j(BoolExpr\()o(ex)o
(p)g(:)i(ExprDesc;)p 1619 438 V 269 483 V 707 470 a(fLab,tLab)d(:)k
(LabelTyp)o(e\);)p 1619 483 V 269 529 V 374 515 a(VAR)e(local)g(:)h
(LabelType;)p 1619 529 V 269 575 V 335 561 a(BEGIN)p
1619 575 V 269 620 V 374 607 a(CASE)f(exp^.expr)o(Cla)o(ss)e(OF)p
1619 620 V 269 666 V 374 652 a(|)j(orNode)e(:)p 1619
666 V 269 712 V 452 698 a(IF)i(tLab)f(#)h(fallThroug)o(h)p
1619 712 V 269 757 V 531 744 a(THEN)f(local)f(:=)i(tLab)f(ELSE)g
(AllocateLab)o(el)o(\(lo)o(ca)o(l\))e(END;)p 1619 757
V 269 803 V 452 789 a(BoolExpr\(e)o(xp^)o(.l)o(eft)o(Op)o(,fa)o(llT)o
(hr)o(oug)o(h,)o(loc)o(al\))o(;)p 1619 803 V 269 849
V 452 835 a(BoolExpr\(e)o(xp^)o(.r)o(igh)o(tO)o(p,f)o(Lab)o(,t)o(Lab)o
(\);)p 1619 849 V 269 894 V 452 881 a(IF)j(tLab)f(=)h(fallThroug)o(h)e
(THEN)h(EmitLabel)o(\(lo)o(ca)o(l\))e(END;)p 1619 894
V 269 940 V 374 926 a(|)j(andNode)e(:)p 1619 940 V 269
986 V 452 972 a(IF)i(fLab)f(#)h(fallThroug)o(h)p 1619
986 V 269 1031 V 531 1018 a(THEN)f(local)f(:=)i(fLab)f(ELSE)g
(AllocateLab)o(el)o(\(lo)o(ca)o(l\))e(END;)p 1619 1031
V 269 1077 V 452 1063 a(BoolExpr\(e)o(xp^)o(.l)o(eft)o(Op)o(,lo)o(cal)o
(,f)o(all)o(Th)o(rou)o(gh\))o(;)p 1619 1077 V 269 1123
V 452 1109 a(BoolExpr\(e)o(xp^)o(.r)o(igh)o(tO)o(p,f)o(Lab)o(,t)o(Lab)o
(\);)p 1619 1123 V 269 1168 V 452 1155 a(IF)j(fLab)f(=)h(fallThroug)o
(h)e(THEN)h(EmitLabel)o(\(lo)o(ca)o(l\))e(END;)p 1619
1168 V 269 1214 V 374 1200 a(|)j(notNode)e(:)i(BoolJump\(e)o(xp)o(^.n)o
(otO)o(p,)o(tLa)o(b,)o(fLa)o(b\);)p 1619 1214 V 269 1260
V 374 1246 a(|)g(desigNode)d(:)j(\(*)g(Boolean)e(valued)g(variables)g
(*\))p 1619 1260 V 269 1305 V 452 1292 a(Designator)o(\(ex)o(p\))o(;)
330 b(\(*)19 b(address...)d(*\))p 1619 1305 V 269 1351
V 452 1337 a(EmitInstru)o(cti)o(on)o(\(de)o(re)o(fUB)o(\);)g(NewLn;)h
(\(*)i(now)g(value)37 b(*\))p 1619 1351 V 269 1397 V
452 1383 a(IF)19 b(fLab)f(=)h(fallThroug)o(h)e(THEN)h(EmitBrTru)o(eTo)o
(\(t)o(Lab)o(\);)p 1619 1397 V 269 1442 V 452 1429 a(ELSIF)g(tLab)g(=)h
(fallThroug)o(h)e(THEN)h(EmitBrFal)o(se)o(To\()o(fL)o(ab\))o(;)p
1619 1442 V 269 1488 V 452 1474 a(ELSE)g(EmitBrFals)o(eTo)o(\(f)o(Lab)o
(\);)e(EmitBranch)o(To\()o(tL)o(ab\))o(;)p 1619 1488
V 269 1534 V 452 1520 a(END;)p 1619 1534 V 269 1579 V
374 1566 a(|)j(literalNo)o(de)d(:)k(\(*)e(uncondition)o(al)e(branch)h
FD(!!)g(*\)!)p 1619 1579 V 269 1625 V 452 1611 a FF(IF)i(exp^.const)o
(Va)o(lue)d(=)j(0)g(THEN)f(EmitBranchT)o(o\()o(fLa)o(b\))o(;)p
1619 1625 V 269 1671 V 452 1657 a(ELSE)g(\(*)h(==>)g("true")e(*\))i
(EmitBranc)o(hT)o(o\(t)o(Lab)o(\);)p 1619 1671 V 269
1716 V 452 1703 a(END;)p 1619 1716 V 269 1762 V 374 1748
a(ELSE)f(\(*)h(function)d(calls,)h(relational)f(ops)j(*\))p
1619 1762 V 269 1808 V 413 1794 a(PushValue)o(\(ex)o(p\);)p
1619 1808 V 269 1853 V 413 1840 a(IF)g(fLab)f(=)h(fallThroug)o(h)d
(THEN)j(EmitBrTr)o(ueT)o(o\(t)o(La)o(b\);)p 1619 1853
V 269 1899 V 413 1885 a(ELSIF)f(tLab)g(=)h(fallThrou)o(gh)d(THEN)i
(EmitBrFalse)o(To)o(\(fL)o(ab)o(\);)p 1619 1899 V 269
1945 V 413 1931 a(ELSE)g(EmitBrFals)o(eT)o(o\(f)o(La)o(b\);)e
(EmitBranc)o(hTo)o(\(tL)o(ab)o(\);)p 1619 1945 V 269
1990 V 413 1977 a(END;)p 1619 1990 V 269 2036 V 374 2022
a(END;)i(\(*)h(case)f(*\))p 1619 2036 V 269 2082 V 335
2068 a(END)g(BoolExpr;)p 1619 2082 V 270 2083 1350 2
v 519 2199 a FN(Figure)c(4.6:)j(The)d(complete)f FK(Bo)n(olExpr)19
b FN(pro)q(cedure)p 643 2356 307 4 v 643 2476 4 120 v
946 2476 V 643 2479 307 4 v 1183 2356 V 1183 2476 4 120
v 1486 2476 V 1183 2479 307 4 v 1066 2536 180 2 v 1245
2535 2 60 v 1246 2517 a FC(6)p 1051 2296 195 2 v 1245
2356 2 60 v 1246 2356 a(?)p 1486 2416 105 2 v 1549 2415
a(-)p 527 2416 120 2 v -986 w(-)p 886 2356 2 60 v 886
2296 180 2 v 1025 2295 a(-)p 886 2535 2 60 v 886 2536
180 2 v 1025 2535 a(-)1261 2428 y FN(push)c(0/1)-733
b(jump)13 b(co)q(de)901 2341 y(T)m(exit)901 2521 y(F)m(exit)287
2588 y(F)m(or)f(the)h(sak)o(e)f(of)g(simplicit)o(y)e(w)o(e)i(shall)g
(assume)g(that)g(the)h(co)q(de)g(whic)o(h)g(joins)e(together)224
2638 y(the)19 b(t)o(w)o(o)f(\015o)o(ws)h(of)e(con)o(trol)i(to)f(pro)q
(duce)h(a)f(single)h(Bo)q(olean)f(v)n(alue)f(on)i(the)g(top)f(of)g(the)
224 2688 y(stac)o(k)c(is)f(pro)q(duced)i(b)o(y)e(a)g(pro)q(cedure)i
FK(PushBo)n(ol)t FN(.)k(This)13 b(pro)q(cedure)j(tak)o(es)d(the)h
FK(false)i FN(and)p eop
%%Page: 115 121
115 120 bop 224 274 a FL(4.4.)31 b(GENERA)m(TING)13 b(CODE)h(F)o(OR)g
(BOOLEAN)h(EXPRESSIONS)225 b FN(115)224 390 y FK(true)16
b FN(lab)q(els)d(as)h(parameters.)j(F)m(or)c(the)h(momen)o(t,)c(w)o(e)k
(shall)e(assume)h(that)g(the)h(t)o(w)o(o)f(result)224
440 y(v)n(alues)j(are)g(merged)f(on)h(the)g(top)f(of)h(the)g(ev)n
(aluation)e(stac)o(k.)24 b(The)16 b(pro)q(cedure)i(is)d(sho)o(wn)224
490 y(in)h(\014gure)g(4.7.)38 b(In)16 b(the)h(case)f(that)g(the)g
FK(false)j FN(lab)q(el)c(is)h(the)g(sp)q(ecial)g FK(fal)r(lThr)n(ough)i
FN(v)n(alue,)p 270 604 1350 2 v 269 650 2 46 v 335 636
a FF(PROCEDUR)o(E)f(PushBool\()o(fL)o(ab,)f(tLab)i(:)h(LabelType\))o(;)
p 1619 650 V 269 695 V 374 682 a(VAR)f(xLab)g(:)h(LabelType;)p
1619 695 V 269 741 V 335 727 a(BEGIN)p 1619 741 V 269
787 V 374 773 a(AllocateL)o(ab)o(el\()o(xLa)o(b\))o(;)p
1619 787 V 269 832 V 374 819 a(IF)g(fLab)f(=)h(fallThrou)o(gh)d(THEN)p
1619 832 V 269 878 V 413 864 a(EmitInstr)o(uct)o(ion)o(\(p)o(shZ)o(\);)
g(NewLn;)76 b(\(*)19 b(push)f(a)h("false")e(value.)h(*\))p
1619 878 V 269 924 V 413 910 a(<<)h(pop)f(into)g(off-stack)e(location)h
(--)i(see)f(note)g(>>)p 1619 924 V 269 969 V 413 956
a(EmitBranc)o(hTo)o(\(xL)o(ab)o(\);)p 1619 969 V 269
1015 V 413 1001 a(EmitLabel)o(\(tL)o(ab\))o(;)p 1619
1015 V 269 1061 V 413 1047 a(PushLit\(1)o(\);)e(NewLn;)292
b(\(*)19 b(push)f(a)h("true")f(value.)37 b(*\))p 1619
1061 V 269 1106 V 413 1093 a(<<)19 b(pop)f(into)g(off-stack)e(location)
h(--)i(see)f(note)g(>>)p 1619 1106 V 269 1152 V 413 1138
a(EmitLabel)o(\(xL)o(ab\))o(;)330 b(\(*)19 b(Bool)f(is)h(now)f
(stack-top)f(*\))p 1619 1152 V 269 1198 V 413 1184 a(<<)i(push)f
(off-stack)e(location)h(--)h(see)h(note)f(>>)p 1619 1198
V 269 1243 V 374 1230 a(ELSIF)f(...)p 1619 1243 V 269
1289 V 374 1275 a(END;)p 1619 1289 V 269 1335 V 335 1321
a(END)h(PushBool;)p 1619 1335 V 270 1336 1350 2 v 544
1452 a FN(Figure)c(4.7:)j(part)d(of)f(the)h FK(PushBo)n(ol)19
b FN(pro)q(cedure)224 1565 y(the)c(co)q(de)g(pro)q(duced)g(is)e(of)h
(the)g(form)e(|)320 1683 y FD(;)h FE(jump-c)n(o)n(de)e(fr)n(om)j(Bo)n
(olExpr)h FD(\()p FE(exp,fal)r(lthr)n(ou)o(gh,)o(tL)n(ab)q
FD(\))320 1728 y(;)e Fv(b)q(ew)o(are)p FD(,)g FE(this)f(is)i(non-c)n
(onfo)o(rmant)c FD(DCo)q(de)p FE(!)488 1774 y FF(pshZ)442
b FD(;)50 b FE(push)12 b(F)l(ALSE)h(r)n(esult)488 1820
y FF(branch)k(xLab)305 b FD(;)320 1865 y(tLab:)488 1911
y FF(pshLit)17 b(1)365 b FD(;)50 b FE(push)12 b(TR)o(UE)i(r)n(esult)320
1957 y FD(xLab:)224 2071 y FN(Other)h(cases)h(are)e(explored)g(in)g
(the)g(exercises.)287 2127 y(In)o(terpretiv)o(e)j(co)q(de)h(generators)
f(are)g(simpli\014ed)e(b)o(y)h(the)h(guaran)o(tee)g(that)g(the)g(stac)o
(k)224 2177 y(con)o(ten)o(ts)h(are)f(iden)o(tical)e(along)g(all)g
(paths)i(reac)o(hing)f(a)g(lab)q(el.)25 b(This)16 b(is)g(not)h(true)g
(in)f(the)224 2226 y(case)g(sho)o(wn.)k(Along)14 b(eac)o(h)h(path)f
(the)h(stac)o(k)g(has)g(a)f(literal)g(pushed,)h(either)h(zero)f(or)g
(one,)224 2276 y(but)20 b(at)g(the)g(lab)q(el)f(where)i(the)g(con)o
(trol)e(\015o)o(w)g(merges)h(the)g(v)n(alue)f(magically)e(m)o(ust)i(b)q
(e)224 2326 y(treated)e(as)e(a)f(v)n(ariable!)20 b(The)c(simplest)e(w)o
(a)o(y)g(to)h(ensure)h(that)g(the)f(v)n(alues)g(are)g(correctly)224
2376 y(merged)h(is)f(to)h(mo)o(v)o(e)e(them)h(o\013-stac)o(k)h(along)e
(eac)o(h)i(path,)g(and)g(reload)f(the)i(v)n(alue)e(b)q(elo)o(w)224
2426 y(the)i(merge.)22 b FK(DCo)n(de)d FN(pro)o(vides)d(a)f(pair)g(or)g
(primitiv)o(e)f(instructions)i(for)f(doing)g(this,)g(but)224
2475 y(the)21 b(recommended)f(solution)f(is)i(to)f(create)i(a)e(lo)q
(cal)f(v)n(ariable)h(in)g(the)h(run)o(time)e(stac)o(k)224
2525 y(frame,)c(and)h(merge)g(the)h(v)n(alues)f(in)f(this)i(lo)q
(cation.)23 b(In)17 b(e\013ect)g(the)g(Bo)q(olean)f(expression)224
2575 y(has)e(b)q(ecome)g(a)g(conditional)e(assignmen)o(t)h(to)h(the)g
(anon)o(ymous)e(v)n(ariable.)287 2631 y(Using)h(this)g(metho)q(d,)f
(the)i(conforman)o(t)e(v)o(ersion)h(of)g(the)h(example)e(w)o(ould)h(b)q
(ecome)g(|)p eop
%%Page: 116 122
116 121 bop 224 274 a FN(116)320 b FL(CHAPTER)14 b(4.)32
b(GENERA)m(TING)12 b(INTERMEDIA)m(TE)i(CODE)320 381 y
FD(;)f FE(jump-c)n(o)n(de)e(fr)n(om)j(Bo)n(olExpr)h FD(\()p
FE(exp,fal)r(lthr)n(ou)o(gh,)o(tL)n(ab)q FD(\))320 427
y(;)e FE(this)f(is)h(the)g(c)n(onformant)e(version)488
472 y FF(pshZ)442 b FD(;)50 b FE(push)12 b(F)l(ALSE)h(r)n(esult)488
518 y FF(pshFP)e FE(NN)353 b FD(;)50 b FE(assign)11 b(to)j(anon)e
(variable)488 564 y FF(assignW)382 b FD(;)488 609 y FF(branch)17
b(xLab)305 b FD(;)320 655 y(tLab:)488 701 y FF(pshLit)17
b(1)365 b FD(;)50 b FE(push)12 b(TR)o(UE)i(r)n(esult)488
746 y FF(pshFP)d FE(NN)353 b FD(;)50 b FE(assign)11 b(to)j(anon)e
(variable)488 792 y FF(assignW)382 b FD(;)320 838 y(xLab:)488
883 y FF(pshFP)11 b FE(NN)353 b FD(;)50 b FE(fetch)12
b(mer)n(ge)n(d)h(value)488 929 y FF(derefW)402 b FD(;)224
1050 y FN(In)18 b(this)f(example,)f(the)i(stac)o(k)g(is)f(empt)o(y)f
(at)h(the)h(lab)q(el)e FK(xL)n(ab)s FN(,)i(and)f(the)h(Bo)q(olean)f(v)n
(alue)224 1100 y(is)f(at)g(\()p FK(fp)s FN(+)p FK(NN)7
b FN(\))15 b(As)h(will)e(b)q(e)j(seen)g(later,)f(most)e(co)q(de)j
(generators)g(will)d(treat)i(the)h(extra)224 1149 y FK(DCo)n(de)s
FN(s)c(as)g(housek)o(eeping)f(and)g(generate)i(no)e(extra)g
(instructions.)18 b(The)13 b(p)q(osition)e(of)h(the)224
1199 y(extra)j(co)q(de)f(to)g(pro)q(duce)h(this)f(output)g(is)g(mark)o
(ed)f(in)g(\014gure)i(4.7.)224 1359 y FH(4.4.3)56 b(Conditional)18
b(expressions)224 1451 y FN(As)d(describ)q(ed)i(in)d(the)h(last)f
(section,)h(Bo)q(olean)g(expressions)h(ma)o(y)c(b)q(e)j(treated)h(as)f
(assign-)224 1501 y(men)o(ts)h(of)f(a)h(conditional)f(v)n(alue.)24
b FK(Mo)n(dula-2)e FN(has)16 b(suc)o(h)h(expressions)h(as)e(the)h(only)
e(form)224 1550 y(of)20 b(conditional)e(expression.)37
b(Ho)o(w)o(ev)o(er,)21 b(conditional)d(expressions)k(o)q(ccur)e(in)g
(explicit)224 1600 y(form)13 b(in)g(certain)i(other)f
FK(A)o(lgol)t FN(-family)d(languages.)17 b(Language)d
FM(C)s FN('s)f(conditional)g(expres-)224 1650 y(sions)i(are)g(a)f
(familiar)d(instance.)21 b(Figure)15 b(4.8)e(is)i(an)f(example)f(whic)o
(h)i(sho)o(ws)f(the)i(correct)224 1700 y(translation)e(of)f(the)h
(expression)h(|)591 1828 y FD(\()p FE(exp)660 1837 y
Fy(1)678 1828 y FF(?)10 b FE(exp)763 1837 y Fy(2)780
1828 y FF(:)h FE(exp)865 1837 y Fy(3)883 1828 y FD(\))224
1952 y FN(The)k(fron)o(tend)f(m)o(ust)f(allo)q(cate)g(a)h(temp)q(orary)
f(\(in)g(the)i(example)d(at)i(\()p FK(fp)p FN({24\))f(in)h(the)g(lo)q
(cal)224 2002 y(stac)o(k)g(frame\),)d(and)i(assign)g(to)g(this)g(lo)q
(cation)f(along)f(eac)o(h)j(path.)k(The)13 b(resulting)g(v)n(alue)f(is)
224 2052 y(pushed)j(on)f(the)g(stac)o(k)h(after)f(the)g(\015o)o
(w-of-con)o(trol)f(merge)g(p)q(oin)o(t.)224 2232 y FI(4.5)67
b(Generating)23 b(co)r(de)e(for)h(statemen)n(ts)224 2347
y FH(4.5.1)56 b(Assignmen)n(ts)17 b(and)j(pro)r(cedure)d(calls)224
2438 y FN(Co)q(de)f(for)f(assignmen)o(t)g(statemen)o(ts)h(is)f(pro)q
(duced)i(in)e(a)g(straigh)o(tforw)o(ard)g(fashion.)22
b(The)224 2488 y(pro)q(cedures)12 b(required)f(ha)o(v)o(e)e(already)g
(b)q(een)i(met)e(in)g(this)g(c)o(hapter.)18 b(The)10
b(expression)g(on)g(the)224 2538 y(righ)o(t)g(hand)g(side)h(of)f(the)h
(assignmen)o(t)e(is)h(ev)n(aluated)g(b)o(y)g(a)g(call)g(to)g
FK(PushV)m(alue)s FN(,)h(the)g(address)224 2588 y(of)h(the)i(left)e
(hand)h(side)g(v)n(ariable)e(is)i(pushed)h(on)e(the)h(stac)o(k)g(b)o(y)
g(a)f(call)g(to)h FK(Designator)p FN(,)f(and)224 2638
y(an)k(appropriate)h(sized)g(mem)o(b)q(er)d(of)i(the)g
FG(assign)p FK(NN)22 b FN(family)13 b(is)j(emitted.)24
b(Here)18 b(is)e(the)224 2688 y(co)q(de)f(for)f(the)g(assignmen)o(t)f
FG(a)22 b(:=)f(b)g(+)h(1)p FN(,)13 b(for)h(w)o(ord-sized)g(op)q
(erands.)p eop
%%Page: 117 123
117 122 bop 224 274 a FL(4.5.)31 b(GENERA)m(TING)13 b(CODE)h(F)o(OR)g
(ST)m(A)m(TEMENTS)456 b FN(117)p 270 392 1350 2 v 269
1081 2 690 v 507 470 a FE(c)n(ompute)12 b(exp1)h(onto)f(the)g(stack)507
515 y FF(brFalse)47 b(fLabel)h FD(;)h FE(if)14 b(zer)n(o,)e(jump)h(to)g
(else)g(lab)n(el)507 561 y(c)n(ompute)f(exp2)h(onto)f(the)g(stack)507
607 y FF(pshFP)87 b FD({24)111 b(;)49 b FE(fp)r FD({24)13
b FE(is)h(an)f(anonymous)d(variable)507 652 y FF(assignW)215
b FD(;)49 b FE(assign)12 b(exp2)g(to)h(the)g(anonymous)e(variable)507
698 y FF(branch)67 b(xLabel)320 744 y(fLabel:)507 789
y FE(c)n(ompute)12 b(exp3)h(onto)f(the)g(stack)507 835
y FF(pshFP)87 b FD({24)111 b(;)49 b FE(fp)r FD({24)13
b FE(is)h(an)f(anonymous)d(variable)507 881 y FF(assignW)215
b FD(;)49 b FE(assign)12 b(exp3)g(to)h(anon)f(variable)320
926 y FF(xLabel:)507 972 y(pshFP)87 b FD({24)507 1018
y FF(derefW)235 b FD(;)49 b FE(value)12 b(is)i(on)e(top-of-stack)p
1619 1081 V 270 1083 1350 2 v 286 1199 a FN(Figure)i(4.8:)j(Push)e(the)
f(v)n(alue)f FG(IF)22 b(exp1)f(<>)g(0)h(THEN)f(exp2)g(ELSE)g(exp3)g
(END.)320 1324 y FF(pshAdr)67 b(_b)320 1370 y(derefW)320
1416 y(pshLit)g FD(1)320 1461 y FF(add)413 b FD(;)13
b FE(right)f(hand)h(side)f(is)h(top-of-stack)320 1507
y FF(pshAdr)67 b(_a)246 b FD(;)13 b FE(left)f(hand)h(side)f(addr)n(ess)
320 1553 y FF(assignW)333 b FD(;)13 b FE(do)g(the)f(assignment)224
1694 y FN(Some)e(fron)o(t-ends)h(try)g(to)f(minimi)o(ze)f(the)i(heigh)o
(t)f(of)g(the)i(abstract)f(stac)o(k,)g(b)o(y)g(using)f(a)g
FK(most)224 1744 y(c)n(omplex)19 b(\014rst)h FN(strategy)m(.)28
b(In)18 b(the)f(case)h(of)f(v)o(ery)g(complex)f(left)h(hand)g(side)h
(designators)224 1794 y(this)h(will)e(require)i(that)f(the)h(assignmen)
o(t)f(destination)g(address)i(b)q(e)f(computed)f(b)q(efore)224
1843 y(the)13 b(righ)o(t)f(hand)g(side)g(expression.)19
b(Most)12 b(languages)g(allo)o(w)e(suc)o(h)j(a)f(c)o(hoice)g(of)g(ev)n
(aluation)224 1893 y(order.)25 b(The)16 b(pro)q(duced)h
FK(DCo)n(de)j FN(for)15 b(the)h(same)f(example)g(as)h(b)q(efore,)g(but)
g(ev)n(aluated)g(in)224 1943 y(rev)o(erse)g(order)f(w)o(ould)e(then)h
(b)q(e)h(|)320 2024 y FF(pshAdr)67 b(_a)246 b FD(;)13
b FE(left)f(hand)h(side)f(addr)n(ess)320 2070 y FF(pshAdr)67
b(_b)320 2115 y(derefW)320 2161 y(pshLit)g FD(1)320 2207
y FF(add)413 b FD(;)13 b FE(right)f(hand)h(side)f(is)h(top-of-stack)320
2252 y FF(swap)393 b FD(;)13 b FE(destinatio)o(n)e(is)i(now)g
(top-of-stack)320 2298 y FF(assignW)333 b FD(;)13 b FE(do)g(the)f
(assignment)224 2438 y FN(The)17 b(\014nal)f(case)i(of)d(assignmen)o(t)
h(co)q(de)h(is)f(assignmen)o(t)g(of)g(en)o(tire)h(structured)i(v)n
(ariables.)224 2488 y(This)d(is)f(p)q(erformed)g(b)o(y)g(emitting)f(a)h
(\\)p FG(blkCp)p FN(")f(op)q(eration)h(co)q(de.)24 b(This)15
b(instruction)h(has)224 2538 y(three)h(op)q(erands)g(on)e(the)h(stac)o
(k:)22 b(on)15 b(the)h(top-of-stac)o(k)f(is)h(the)g(n)o(um)o(b)q(er)f
(of)g(b)o(ytes)h(of)f(the)224 2588 y(blo)q(c)o(k,)e(b)q(elo)o(w)h(that)
g(is)g(the)g(source)h(address,)g(b)q(elo)o(w)f(that)g(the)g
(destination)g(address.)19 b(All)224 2638 y(three)d(w)o(ords)e(are)g(p)
q(opp)q(ed.)19 b(Here)c(is)f(an)g(example,)e(arising)h(from)g(the)h
(source)h(statemen)o(t)224 2688 y FG(arr)22 b(:=)f("Hello)g(world")12
b FN(|)p eop
%%Page: 118 124
118 123 bop 224 274 a FN(118)320 b FL(CHAPTER)14 b(4.)32
b(GENERA)m(TING)12 b(INTERMEDIA)m(TE)i(CODE)320 381 y
FF(pshAdr)48 b(_arr)206 b FD(;)12 b FE(destination)e(addr)n(ess)320
427 y FF(pshAdr)48 b(_cData+8)126 b FD(;)12 b FE(addr)n(ess)g(of)h
(string)320 472 y FF(pshLit)48 b FD(12)248 b(;)12 b FE(numb)n(er)h(of)g
(bytes)f(in)h(string)320 518 y FF(blkCp)354 b FD(;)12
b FE(do)h(the)g(blo)n(ck)f(c)n(opy)224 738 y FO(Pro)q(cedure)i(calls)
224 820 y FN(Pro)q(cedure)k(calls)e(require)g(the)g(ev)n(aluation)f(of)
g(parameters,)h(if)e(an)o(y)m(,)h(in)g(some)g(order)i(ap-)224
870 y(propriate)i(for)e(the)i(target)f(arc)o(hitecture,)j(and)d(the)g
(call)f(of)h(the)g(pro)q(cedure.)33 b(The)18 b(call)224
919 y(con)o(v)o(en)o(tions)13 b(of)f(some)g(target)h(mac)o(hine)e(and)h
(language)g(com)o(binations)f(ma)o(y)f(require)k(the)224
969 y(caller)19 b(to)f(remo)o(v)o(e)f(the)i(parameters)f(from)f(the)h
(run)o(time)f(stac)o(k)i(follo)o(wing)d(the)j(return.)224
1019 y(Here)c(is)f(an)f(example,)f(for)i(the)g FK(iapx86)20
b FN(arc)o(hitecture,)15 b(arising)e(from)f(the)i(pro)q(cedure)i(call)
224 1069 y FG(WriteString\("abc"\))11 b FN(using)i(the)i(language)e
FM(C)j FN(calling)d(con)o(v)o(en)o(tions)g(|)320 1169
y FF(pshLit)67 b(3)443 b FD(;)13 b FE(HIGH)f(value)g(for)h(p)n(ar)n
(ameter)320 1214 y FF(mkPar)87 b(4,0)320 1260 y(pshAdr)67
b(_cData+12)283 b FD(;)13 b FE(addr)n(ess)f(of)h(p)n(ar)n(ameter)320
1306 y FF(mkPar)87 b(4,0)320 1351 y(call)107 b(_InOut_Wri)o(teS)o(tr)o
(ing)320 1397 y(cutPars)47 b(8)443 b FD(;)13 b FE(r)n(emove)g(8)g
(bytes)f(fr)n(om)i(stack)224 1545 y FN(Note)e(in)e(this)h(case)h(that)f
(w)o(e)g(ma)o(y)e(actually)h FK(evaluate)15 b FN(the)c(parameter)g
(expressions)h(in)f(an)o(y)224 1595 y(con)o(v)o(enien)o(t)j(order,)g
(but)f(the)h(v)n(alues)f(m)o(ust)g(b)q(e)h(mo)o(v)o(ed)d(to)i(the)h
(run)o(time)f(stac)o(k)g(in)g(exactly)224 1645 y(the)i(order)g(exp)q
(ected)g(b)o(y)f(the)h(called)e(pro)q(cedure.)287 1698
y(In)f(the)h(case)h(of)e(the)h FK(MIPS)18 b FN(arc)o(hitecture,)d(the)e
(parameters)f(are)h(mo)o(v)o(ed)e(to)i(a)f(param-)224
1747 y(eter)k(assem)o(bly)c(area,)i(at)g(sp)q(eci\014ed)h(o\013sets.)k
(Here)c(is)f(the)h(co)q(de)f(|)320 1846 y FF(pshAdr)48
b(_cData+12)283 b FD(;)12 b FE(addr)n(ess)g(of)h(p)n(ar)n(ameter)320
1892 y FF(mkPar)68 b(4,0)403 b FD(;)12 b FE(\014rst)h(p)n(ar)n(ameter)g
(at)g(o\013set)f(0)320 1937 y FF(pshLit)48 b(3)443 b
FD(;)12 b FE(HIGH)h(value)f(for)h(p)n(ar)n(ameter)320
1983 y FF(mkPar)68 b(4,4)403 b FD(;)12 b FE(next)h(p)n(ar)n(ameter)f
(at)h(o\013set)f(4)320 2029 y FF(call)88 b(_InOut_Wr)o(it)o(eSt)o(ri)o
(ng)107 b FD(;)12 b FE(no)h(cutb)n(ack)e(is)j(ne)n(e)n(de)n(d)224
2177 y FN(Note)k(that)f(in)g(this)g(case,)i(since)f(w)o(e)f(sp)q(ecify)
h(the)g(lo)q(cation)e(of)g(eac)o(h)i(parameter)f(in)g(the)224
2227 y(assem)o(bly)c(area,)h(w)o(e)g(ma)o(y)e(ev)n(aluate)i(and)g(mo)o
(v)o(e)e(the)j(parameters)f(to)g(the)g(assem)o(bly)f(area)224
2277 y(in)h(an)o(y)f(con)o(v)o(enien)o(t)h(order)h(\(pro)o(vided)f
(they)g(do)g(not)g(in)o(v)o(olv)o(e)e(function)i(calls\).)224
2407 y FH(4.5.2)56 b(Conditional)18 b(statemen)n(ts)224
2488 y FN(The)f(pro)q(duction)f(of)f(co)q(de)i(for)f(conditional)e
(statemen)o(ts)i(\014ts)h(v)o(ery)f(naturally)f(with)h(the)224
2538 y(tec)o(hniques)e(describ)q(ed)h(for)d(ev)n(aluation)f(of)h(Bo)q
(olean)h(expressions)h(b)o(y)e(jumping)e(co)q(de.)19
b(As)224 2588 y(an)f(example,)f(w)o(e)h(consider)h(the)f
FK(if-then-elsif-else-end)f FN(structure.)32 b(W)m(e)18
b(shall)f(assume)224 2638 y(that)k(the)g FK(AST)26 b
FN(has)21 b(a)f(represen)o(tation)i(of)e(these)i(structures)h(corresp)q
(onding)e(to)g(the)224 2688 y(follo)o(wing)12 b FK(IDL)i
FN(fragmen)o(t)e(|)p eop
%%Page: 119 125
119 124 bop 224 274 a FL(4.5.)31 b(GENERA)m(TING)13 b(CODE)h(F)o(OR)g
(ST)m(A)m(TEMENTS)456 b FN(119)p 944 365 2 13 v 944 390
V 945 390 a FC(?)p 757 1454 2 14 v 757 1481 V 757 1508
V 757 1536 V 757 1563 V 757 1590 V 757 1590 a(?)p 757
1778 2 188 v 757 1779 188 2 v 903 1778 a(-)p 757 1440
2 638 v 757 1440 a(?)p 944 1853 2 113 v 945 1853 a(?)p
944 1454 2 14 v 944 1481 V 944 1508 V 944 1536 V 944
1563 V 944 1590 V 945 1590 a(?)p 982 1103 2 38 v 982
1104 150 2 v 1132 1365 2 263 v 945 1366 188 2 v 944 1440
2 75 v 945 1440 a(?)p 888 1328 2 38 v 757 1329 132 2
v 757 1328 a(\033)p 888 1140 2 75 v 889 1140 a(?)p 792
915 307 4 v 792 1065 4 150 v 1095 1065 V 792 1068 307
4 v 792 390 V 792 540 4 150 v 1095 540 V 792 543 307
4 v 792 615 V 792 765 4 150 v 1095 765 V 792 768 307
4 v 792 1140 V 792 1290 4 150 v 1095 1290 V 792 1293
307 4 v 792 1590 V 792 1740 4 150 v 1095 1740 V 792 1743
307 4 v 888 615 2 75 v 889 615 a(?)p 888 803 2 38 v 757
804 132 2 v 757 803 a(\033)p 982 578 2 38 v 982 579 150
2 v 1132 840 2 263 v 945 841 188 2 v 944 915 2 75 v 945
915 a(?)874 1650 y FN(else)14 b(part)866 1200 y(elsif)g(part)874
675 y(then)g(part)982 1047 y(F)-120 b(T)814 972 y(Bo)q(olean)13
b(test)814 447 y(Bo)q(olean)g(test)889 522 y(T)63 b(F)851
735 y(statemen)o(ts)851 1253 y(statemen)o(ts)855 1706
y(statemen)o(ts)552 1910 y(Figure)14 b(4.9:)j(Blo)q(c)o(k)d(structure)i
(of)d(if)g(statemen)o(t)295 2029 y FF(STATEMENT)56 b(::=)18
b(...)h(|)g(ifStateme)o(nt)d(|)j(...)g(;)295 2074 y(ifStatemen)o(t)e
(=>)h(branches)37 b(:)19 b(seqOf)f(CONDSTAT)o(;)295 2120
y(...)295 2166 y(CONDSTAT)76 b(::=)18 b(...)h(|)g(guardedSs)d(|)j(...)g
(;)295 2211 y(guardedSs)56 b(=>)18 b(condition)36 b(:)19
b(EXPR,)589 2257 y(statements)d(:)j(seqOf)f(STATEMENT;)224
2339 y FN(Eac)o(h)f(guarded)f(statemen)o(t)g(sequence)j(consists)e(of)e
(a)h(Bo)q(olean)g(guard)g(expression,)h(and)224 2389
y(the)d(statemen)o(t)e(sequence)j(whic)o(h)e(is)f(executed)j(if)d(the)h
(guard)g(ev)n(aluates)g(to)f(true.)19 b(Th)o(us)13 b(a)224
2438 y(single)g(branc)o(h)g(corresp)q(onds)i(to)e(eac)o(h)g(of)f(the)i
FK(then,)g(elsif)21 b FN(and)12 b FK(else)s FN(parts)i(of)e(the)h
(original)224 2488 y(statemen)o(t.)30 b(F)m(or)17 b(the)h
FK(else)s FN(part)g(w)o(e)g(ma)o(y)e(adopt)h(the)i(con)o(v)o(en)o(tion)
e(that)h(the)g(condition)224 2538 y(expression)d(is)e(empt)o(y)m(.)j(W)
m(e)d(also)f(assume)h(that)g(ev)o(ery)h(suc)o(h)g(statemen)o(t)f(has)h
(at)f(least)g(one)224 2588 y(guarded)i(statemen)o(t)e(with)h(a)g
(non-empt)o(y)e(guard.)287 2638 y(The)h(co)q(de)g(structure)i(whic)o(h)
d(w)o(e)h(wish)g(to)f(pro)q(duce)i(mim)o(ics)c(the)k(order)f(of)f(the)h
(source)224 2688 y(co)q(de)h(with)f(the)h(conditional)e(expressions)i
(in)o(terlea)o(v)o(ed)g(with)e(the)i(statemen)o(t)f(sequences.)p
eop
%%Page: 120 126
120 125 bop 224 274 a FN(120)320 b FL(CHAPTER)14 b(4.)32
b(GENERA)m(TING)12 b(INTERMEDIA)m(TE)i(CODE)224 390 y
FN(Figure)j(4.9)f(sho)o(ws)h(the)h(blo)q(c)o(k)e(diagram)e(of)j(the)g
(co)q(de)h(as)e(it)h(is)f(laid)g(out)h(in)f(the)i(ob)r(ject)p
270 499 1350 2 v 269 544 2 46 v 372 530 a FF(PROCEDURE)e(EncodeIf\(s)o
(tat)g(:)39 b(StatDesc\))o(;)p 1619 544 V 269 590 V 423
576 a(VAR)19 b(this)f(:)39 b(IfBranchD)o(es)o(c;)p 1619
590 V 269 636 V 500 622 a(exitLab,)17 b(nextLab)f(:)39
b(LabelType;)p 1619 636 V 269 681 V 372 667 a(BEGIN)p
1619 681 V 269 727 V 423 713 a(AllocateLa)o(bel)o(\(e)o(xit)o(Lab)o
(\);)p 1619 727 V 269 772 V 423 759 a FE(get)13 b(the)g(\014rst)g(br)n
(anch,)e(assign)h(it)h(to)26 b FF(this;)p 1619 772 V
269 818 V 423 804 a(WHILE)18 b(this)g FE(is)13 b(not)g(the)g(last)f(br)
n(anch)21 b FF(DO)p 1619 818 V 269 864 V 462 850 a(\(*)e(assert:)36
b(this.condi)o(ti)o(on)16 b(<>)j(NIL)g(*\))p 1619 864
V 269 909 V 462 896 a(AllocateL)o(ab)o(el\()o(ne)o(xtL)o(ab\))o(;)d
(\(*)j(next)f(test)g(start)g(*\))p 1619 909 V 269 955
V 462 941 a(BoolExpr\()o(th)o(is.)o(co)o(ndi)o(tio)o(n,)o(nex)o(tL)o
(ab,)o(fal)o(lT)o(hro)o(ug)o(h\);)p 1619 955 V 269 1001
V 462 987 a(Statement)o(Se)o(q\(t)o(hi)o(s.s)o(tat)o(em)o(ent)o(s\))o
(;)p 1619 1001 V 269 1046 V 462 1033 a(EmitBranc)o(hT)o(o\(e)o(xi)o
(tLa)o(b\);)p 1619 1046 V 269 1092 V 462 1078 a(EmitLabel)o(\(n)o(ext)o
(La)o(b\);)p 1619 1092 V 269 1138 V 462 1124 a FE(get)12
b(the)h(next)f(br)n(anch)g(and)h(assign)f(to)i FF(this;)p
1619 1138 V 269 1183 V 423 1170 a(END;)p 1619 1183 V
269 1229 V 423 1215 a(\(*)19 b(now)g(the)f(last)g(--)h(maybe)f(only)g
(--)h(branch)e(*\))p 1619 1229 V 269 1275 V 423 1261
a(IF)i(this.condi)o(ti)o(on)d(<>)j(NIL)g(THEN)p 1619
1275 V 269 1320 V 462 1307 a(BoolExpr\()o(th)o(is.)o(co)o(ndi)o(tio)o
(n,)o(exi)o(tL)o(ab,)o(fal)o(lT)o(hro)o(ug)o(h\);)p 1619
1320 V 269 1366 V 423 1352 a(END;)p 1619 1366 V 269 1412
V 423 1398 a(StatementS)o(eq\()o(th)o(is.)o(sta)o(te)o(men)o(ts)o(\);)p
1619 1412 V 269 1457 V 423 1444 a(EmitLabel\()o(exi)o(tL)o(ab\))o(;)p
1619 1457 V 269 1503 V 372 1489 a(END)g(EncodeIf)o(;)p
1619 1503 V 270 1505 1350 2 v 514 1621 a FN(Figure)14
b(4.10:)j(Outline)d(of)f FK(IF)20 b FN(statemen)o(t)13
b(enco)q(ding)224 1727 y(\014le.)23 b(Figure)15 b(4.10)f(has)i(an)f
(almost)e(fully)h(elab)q(orated)i(v)o(ersion)f(of)g(the)h(algorithm.)k
(Note)224 1777 y(the)d(sp)q(ecial)g(treatmen)o(t)f(of)g(the)h(last)f
(branc)o(h)h(in)f(this)h(pro)q(cedure.)27 b(It)17 b(is)f(only)g(the)h
(\014nal)224 1827 y(branc)o(h)i(whic)o(h)f(ma)o(y)f(ha)o(v)o(e)h(an)g
(empt)o(y)f(condition.)31 b(In)18 b(this)h(branc)o(h)f(the)h(con)o
(trol)f(falls)224 1877 y(through)13 b(in)o(to)f(the)i(\014nal)e
(statemen)o(t)g(sequence)j(if)d(the)i(condition)e(is)g(true,)i(or)e
(empt)o(y)m(,)f(and)224 1927 y(the)16 b(con)o(trol)f(falls)f(out)g(of)h
(the)g(\014nal)g(statemen)o(t)g(sequence)i(in)o(to)d(the)i(exit)f(lab)q
(el,)f(instead)224 1976 y(of)g(taking)f(an)g(unconditional)g(jump)f(as)
i(for)g(all)e(other)j(branc)o(hes.)224 2103 y FO(Case)i(statemen)o(ts)
224 2186 y FN(Case)d(statemen)o(ts)f(are)h(usually)e(implemen)o(ted)f
(b)o(y)i(means)f(of)h(jump)e(tables.)18 b(It)13 b(w)o(ould)g(b)q(e)224
2236 y(p)q(ossible)d(for)f(a)g(bac)o(k-end)h(to)f(optimize)f(lo)o
(w-densit)o(y)h(jump)f(tables)h(b)o(y)h(transforming)d(them)224
2286 y(in)o(to)15 b(sparse)h(table)f(structures.)24 b(Ho)o(w)o(ev)o
(er,)15 b(an)g(optimization)d(of)i(this)i(kind)e(is)h(probably)224
2335 y(b)q(etter)j(done)e(in)g(the)g(fron)o(t-end.)25
b(The)16 b(n)o(um)o(b)q(er)f(of)h(en)o(tries)h(in)e(the)i(jump)d(table)
i(will)f(b)q(e)224 2385 y(equal)k(to)f(the)h(range)g(of)e(non-default)h
(ordinal)g(v)n(alues)g(in)g(the)h(case)g(lab)q(els.)32
b(W)m(e)18 b(shall)224 2435 y(assume)d(that)g(the)h(range)f(of)g(v)n
(alues)f(has)i(b)q(een)g(computed)e(during)h(the)h(static)f(seman)o
(tic)224 2485 y(pro)q(cessing,)k(as)e(discussed)i(on)e(page)g(25.)27
b(The)17 b(generated)h(co)q(de)g(m)o(ust)e(index)h(in)o(to)g(the)224
2535 y(table)d(at)f(run)o(time,)f(to)h(\014nd)h(the)g(address)g(of)f
(the)h(target)g(co)q(de)g(blo)q(c)o(k,)f(and)g(jump)f(to)h(that)224
2584 y(lo)q(cation.)k(Generating)d(the)g(co)q(de)h(is)e(simple.)j
(Generating)e(the)g(jump)e(table)i(is)f(the)h(more)224
2634 y(di\016cult)g(task.)287 2688 y(Here)h(is)f(a)f(simple)g(example)f
(|)p eop
%%Page: 121 127
121 126 bop 224 274 a FL(4.5.)31 b(GENERA)m(TING)13 b(CODE)h(F)o(OR)g
(ST)m(A)m(TEMENTS)456 b FN(121)335 381 y FF(CASE)18 b(value)f(OF)335
427 y(|)i(3,7)f(:)h(x)h(:=)e(0;)335 472 y(|)h(5)58 b(:)19
b(x)h(:=)e(1;)335 518 y(ELSE)g(ABORT;)335 564 y(END;)295
609 y(END)h(Proc;)224 718 y FN(The)10 b(jump)e(table)h(will)f(ha)o(v)o
(e)i(en)o(tries)g(for)f(v)n(alues)g(from)f(3)h(to)h(7.)16
b(The)10 b(required)g(in)o(termediate)224 768 y(co)q(de)15
b(is)f(as)g(follo)o(ws)e(|)320 872 y FF(pshAdr)48 b(_value)166
b FD(;)12 b FE(get)h(the)g(sele)n(ctor)320 917 y FF(derefW)320
963 y(pshLit)48 b(3)266 b FD(;)12 b FE(subtr)n(act)g(lower)h(b)n(ound)
320 1009 y FF(sub)320 1054 y(mkTmp)68 b(16)246 b FD(;)12
b FE(save)g(the)h(sele)n(ctor)f(value)320 1100 y FF(pshLit)48
b(5)266 b FD(;)12 b FE(entries)g(index)k FF([0)j(..)38
b(4])320 1146 y(crdGE)320 1191 y(brTrue)48 b(defaultLa)o(b)87
b FD(;)12 b FE(jump)h(to)g(default)f(lab)n(el)320 1237
y FF(pshTmp)48 b(16)246 b FD(;)12 b FE(a)i(c)n(opy)e(of)h(sele)n(ctor)f
(value)320 1283 y FF(switch)48 b(jmpTabLab)106 b FD(;)12
b FE(jump)h(via)g(jump)g(table)224 1442 y FN(F)m(or)f(compilers)e(whic)
o(h)i(pro)q(duce)g FK(AST)6 b FN(s,)12 b(it)f(is)g(simplest)g(to)g
(allo)o(w)f(con)o(trol)h(to)h(fall)e(in)o(to)h(the)224
1491 y(co)q(de)16 b(whic)o(h)f(indexes)g(in)o(to)f(the)i(jump)d(table,)
h(and)h(follo)o(w)e(this)i(co)q(de)g(with)g(the)g(co)q(de)h(for)224
1541 y(eac)o(h)g(separate)g(case.)23 b(The)16 b(end)f(of)g(eac)o(h)g
(case)h(\(for)f FK(Pasc)n(al)5 b FN(-lik)o(e)14 b(languages\))h(is)f
(mark)o(ed)224 1591 y(b)o(y)g(an)g(unconditional)e(branc)o(h)j(to)e
(the)i(statemen)o(t)f(exit)g(lab)q(el.)224 1727 y FO(Creating)h(the)g
(jump)f(table)224 1813 y FN(The)19 b(creation)f(of)g(the)h(jump)d
(table)i(requires)i(a)d(tra)o(v)o(ersal)i(of)e(the)i(sequence)h
(structure)224 1863 y(whic)o(h)d(represen)o(ts)j(the)d(case)h(list)f
(in)f(the)i FK(AST)6 b FN(.)16 b(This)g(tra)o(v)o(ersal)h(can)h(b)q(e)f
(merged)g(with)224 1913 y(the)h(tra)o(v)o(ersal)e(whic)o(h)h(emits)e
(the)i(co)q(de)h(for)e(the)h(v)n(arious)f(cases.)27 b(During)16
b(the)h(tra)o(v)o(ersal)224 1962 y(a)f FK(sele)n(ctor-value)g(to)h(lab)
n(el)i FN(mapping)14 b(is)i(created.)26 b(Since)16 b(w)o(e)g(kno)o(w)g
(the)g(b)q(ounds)g(of)g(the)224 2012 y(domain,)i(an)h(arra)o(y)g(is)g
(a)g(con)o(v)o(enien)o(t)h(data)f(structure)i(to)e(use.)35
b(A)o(t)19 b(the)h(start)g(of)f(the)224 2062 y(tra)o(v)o(ersal)f(an)g
(arra)o(y)g(is)f(dynamically)e(allo)q(cated)j(whic)o(h)f(is)h(large)g
(enough)g(to)f(hold)h(the)224 2112 y(kno)o(wn)f(n)o(um)o(b)q(er)f(of)g
(jump)f(table)i(en)o(tries.)28 b(All)16 b(en)o(tries)i(are)f
(initialized)f(to)g(the)i(default)224 2162 y(lab)q(el)c(v)n(alue.)287
2217 y(As)g(the)g(statemen)o(t)g(sequence)h(of)e(eac)o(h)i(case)f(is)g
(emitted)f(a)g(lab)q(el)g(is)h(allo)q(cated)f(as)h(the)224
2266 y(en)o(try)20 b(p)q(oin)o(t)e(of)h(eac)o(h)g(case's)h(statemen)o
(t)e(sequence.)36 b(These)20 b(lab)q(els)e(are)i(written)f(in)o(to)224
2316 y(the)c(jump)e(table)h(mapping)f(at)h(all)f(lo)q(cations)h(whic)o
(h)g(corresp)q(ond)i(to)e(v)n(alues)g(in)g(the)h(case)224
2366 y(selector)d(list)e(for)g(that)h(case.)18 b(A)o(t)11
b(the)g(conclusion)f(of)g(the)h(tra)o(v)o(ersal)g(all)e(map)g(en)o
(tries)i(whic)o(h)224 2416 y(do)16 b(not)f(app)q(ear)h(in)f(an)o(y)g
(case)h(list)f(will)f(still)g(select)j(the)f(default)f(\(else\))i
(case.)23 b(The)16 b(map)224 2466 y(ma)o(y)c(then)j(b)q(e)f(written)h
(to)f(the)g(output)g(\014le)g(as)g(so)q(on)g(as)g(all)f(cases)i(ha)o(v)
o(e)e(b)q(een)i(treated.)224 2601 y FO(Sparse)g(tables)224
2688 y FG(<<)22 b(still)f(to)g(come)g(>>)p eop
%%Page: 122 128
122 127 bop 224 274 a FN(122)320 b FL(CHAPTER)14 b(4.)32
b(GENERA)m(TING)12 b(INTERMEDIA)m(TE)i(CODE)224 390 y
FO(Single)g(pass)h(restriction)o(s)224 469 y FN(The)e(creation)g(of)e
(jump)g(tables)h(is)g(rather)h(more)e(problematical)f(for)i(compilers)f
(whic)o(h)i(do)224 519 y(not)f(bu\013er)g(co)q(de)g(in)f(an)g
FK(AST)6 b FN(.)k(In)i(these)g(cases)h(the)f(size)g(of)f(the)g(jump)f
(table)h(is)h(not)f(kno)o(wn)224 568 y(un)o(til)k(all)f(cases)i(ha)o(v)
o(e)f(b)q(een)h(pro)q(cessed.)24 b(F)m(or)15 b(suc)o(h)h(compilers)e
(it)h(is)g(usual)g(to)g(b)q(egin)g(the)224 618 y(case)j(statemen)o(t)f
(co)q(de)h(with)e(an)h(unconditional)e(forw)o(ard)h(jump)g(to)g(some)g
(lab)q(el)g(whic)o(h)224 668 y(follo)o(ws)d(all)f(the)j(case)g(co)q
(de.)287 719 y(The)g(co)q(de)h(for)f(the)h(v)n(arious)e(cases)j(is)e
(directly)g(emitted,)f(and)h(the)h FK(sele)n(ctor-value)f(to)224
769 y(lab)n(el)21 b FN(mapping)14 b(is)i(built)g(concurren)o(tly)m(.)26
b(Note)17 b(that)f(an)h(arra)o(y)f(cannot)g(easily)g(b)q(e)h(used)224
818 y(for)c(this)f(purp)q(ose)i(since)g(the)f(b)q(ounds)g(are)g(not)g
(y)o(et)g(kno)o(wn.)k(Some)12 b(other)h(data)f(structure)224
868 y(m)o(ust)g(b)q(e)h(used)g(to)f(store)h(the)g(mapping)d(as)j(it)f
(is)g(created.)19 b(Note)13 b(that)f(for)g(suc)o(h)h(compilers)224
918 y(the)18 b(c)o(hec)o(k)g(that)f(no)f(case)i(selector)g(v)n(alue)f
(is)f(duplicated)h(m)o(ust)f(b)q(e)i(merged)e(with)g(co)q(de)224
968 y(emission)d(and)h(table)f(building.)287 1018 y(After)k(the)h(co)q
(de)f(for)g(all)f(cases)i(has)f(b)q(een)h(emitted)e(the)i(size)g(of)e
(the)h(jump)f(table)g(is)224 1068 y(kno)o(wn,)f(and)g(the)h(table)g(ma)
o(y)d(b)q(e)j(emitted.)22 b(After)16 b(this,)f(the)h(co)q(de)h(whic)o
(h)e(indexes)h(in)o(to)224 1118 y(the)11 b(jump)e(table)i(can)f(b)q(e)h
(emitted.)17 b(All)9 b(cases)j(th)o(us)f(require)g(three)h(jumps)d(|)h
(one)h(forw)o(ard)224 1168 y(jump)i(to)h(the)h(index)g(co)q(de,)g(the)g
(v)o(ectored,)g(bac)o(kw)o(ard)f(jump)f(to)h(the)h(selected)h(case,)f
(and)224 1218 y(the)g(\014nal,)e(unconditional)f(jump)h(to)g(the)i
(statemen)o(t)f(exit.)224 1339 y FH(4.5.3)56 b(V)-5 b(arious)19
b(lo)r(ops)224 1417 y FN(In)12 b(general)f(terms,)g(co)q(de)h
(generation)g(for)f(lo)q(ops)g(consists)h(of)e(emitting)g(a)h
FK(lo)n(op)j FN(lab)q(el,)d(then)224 1467 y(the)17 b(co)q(de)h(for)e
(the)h(b)q(o)q(dy)f(of)g(the)h(lo)q(op,)f(then)h(a)f(conditional)f(or)i
(unconditional)e(branc)o(h)224 1516 y(bac)o(k)f(to)g(the)g(lo)q(op)g
(lab)q(el.)224 1629 y FO(Lo)q(ops)h(and)h(exits)224 1707
y FN(Simplest)d(of)g(all)g(is)g(the)i(structure)h(for)d(the)i(simple)d
(endless)j(lo)q(op)e(of)g FK(Mo)n(dula-2)7 b FN('s)14
b FK(LOOP)224 1757 y FN(statemen)o(t,)24 b(or)e(C's)g
FG(for\(;;\))p FN(.)42 b(The)23 b(o)o(v)o(erall)e(form)f(of)i(the)h(co)
q(de)g(is)f(sho)o(wn)g(in)g(\014g-)224 1807 y(ure)d(4.11\(a\).)28
b(In)17 b(this)h(case,)h(the)f(branc)o(h)h(at)e(the)h(end)g(of)f(the)i
(lo)q(op)e(is)g(unconditional.)224 1857 y(W)m(e)f(allo)q(cate)f(t)o(w)o
(o)h(lab)q(els)g(at)f(the)i(start)f(|)g(one)g(for)g(the)g
FK(lo)n(op)s FN(-lab)q(el,)f(the)i(other)f(for)g(the)224
1907 y FK(exit)t FN(-lab)q(el.)j(Note)c(that)f(the)h(exit)f(lab)q(el)g
(m)o(ust)f(b)q(e)i(passed)g(as)g(a)f(v)n(alue)g(parameter)g(to)g(the)
224 1956 y(pro)q(cedure)g(whic)o(h)e(emits)e(the)j(statemen)o(t)e
(seqence,)j(so)e(that)g(an)o(y)f FK(EXIT)17 b FN(statemen)o(ts)12
b(will)224 2006 y(ha)o(v)o(e)h(the)h(correct)g(target)f(lab)q(el.)18
b(This)12 b(is)h(necessary)m(,)h(since)g FK(LOOP)j FN(statemen)o(ts)c
(ma)o(y)e(b)q(e)224 2056 y(nested,)k(and)f(an)g FK(EXIT)19
b FN(only)13 b(exits)h(from)e(the)j(innermost)e(one.)224
2169 y FO(The)j(rep)q(eat)f(statemen)o(t)224 2247 y FN(The)23
b FK(REPEA)m(T)k FN(statemen)o(t)22 b(requires)h(the)f(p)q(ost-tested)i
(rep)q(eat)f(lo)q(op)e(sho)o(wn)g(in)h(\014g-)224 2297
y(ure)e(4.11\(b\).)33 b(The)19 b(test)h(is)f(ev)n(aluated)g(with)g(the)
h(true)f(outcome)g(causing)g(con)o(trol)f(to)224 2346
y(fall)c(through)g(out)h(of)f(the)h(lo)q(op.)20 b(The)15
b(pro)q(cedure)i(whic)o(h)d(emits)g(this)h(co)q(de)g(is)g(simplicit)o
(y)224 2396 y(itself,)e(see)j(\014gure)e(4.12.)224 2559
y FO(The)i(while)e(statemen)o(t)224 2638 y FN(The)k(most)e(straigh)o
(tforw)o(ard)h(translation)f(of)h(the)g FK(WHILE)23 b
FN(statemen)o(t)17 b(w)o(ould)g(lead)f(to)224 2688 y(the)k(structure)h
(sho)o(wn)d(in)h(\014gure)g(4.11\(c\).)32 b(This)18 b(ma)o(y)f(b)q(e)i
(ac)o(hiev)o(ed)h(b)o(y)e(a)g(pro)q(cedure)p eop
%%Page: 123 129
123 128 bop 224 274 a FL(4.5.)31 b(GENERA)m(TING)13 b(CODE)h(F)o(OR)g
(ST)m(A)m(TEMENTS)456 b FN(123)p 308 392 1275 2 v 307
438 2 46 v 435 424 a FD(\(a\))p 611 438 V 264 w(\(b\))p
934 438 V 274 w(\(c\))p 1258 438 V 275 w(\(d\))p 1581
438 V 308 439 1275 2 v 307 485 2 46 v 332 471 a FF(loop:)p
611 485 V 204 w(loop:)p 934 485 V 224 w(loop:)p 1258
485 V 262 w FE(Bo)n(ol)13 b(eval)p 1581 485 V 307 531
V 371 517 a(lo)n(op)f(b)n(o)n(dy)p 611 531 V 151 w(lo)n(op)g(b)n(o)n
(dy)p 934 531 V 170 w(Bo)n(ol)h(eval)p 1258 531 V 170
w FF(brFalse)k(exit)p 1581 531 V 307 576 V 371 563 a(branch)g(loop)p
611 576 V 87 w FE(Bo)n(ol)c(eval)p 934 576 V 169 w FF(brFalse)k(exit)p
1258 576 V 49 w(loop:)p 1581 576 V 307 622 V 332 608
a(exit:)p 611 622 V 243 w(brFalse)g(loop)p 934 622 V
86 w FE(lo)n(op)c(b)n(o)n(dy)p 1258 622 V 170 w(lo)n(op)f(b)n(o)n(dy)p
1581 622 V 307 668 V 611 668 V 934 668 V 998 654 a FF(branch)18
b(loop)p 1258 668 V 106 w FE(Bo)n(ol)13 b(eval)p 1581
668 V 307 713 V 611 713 V 934 713 V 960 700 a FF(exit:)p
1258 713 V 262 w(brTrue)k(loop)p 1581 713 V 307 759 V
611 759 V 934 759 V 1258 759 V 1284 745 a(exit)p 1581
759 V 308 761 1275 2 v 307 806 2 46 v 405 793 a FE(LOOP)p
611 806 V 181 w(REPEA)m(T)p 934 806 V 178 w(WHILE)p 1258
806 V 192 w(WHILE)p 1581 806 V 308 808 1275 2 v 610 924
a FN(Figure)d(4.11:)i(V)m(arious)e(lo)q(op)f(structures)p
270 1029 1350 2 v 269 1074 2 46 v 335 1061 a FF(PROCEDUR)o(E)k
(EncodeRep)o(ea)o(t\(s)o(ta)o(t)g(:)i(StatDesc\))o(;)p
1619 1074 V 269 1120 V 374 1106 a(VAR)f(loop)g(:)h(LabelType;)p
1619 1120 V 269 1166 V 354 1152 a(BEGIN)p 1619 1166 V
269 1211 V 393 1198 a(AllocateLa)o(bel)o(\(lo)o(op)o(\);)p
1619 1211 V 269 1257 V 393 1243 a(EmitLabel\()o(loo)o(p\);)506
b(\(*)19 b(loopLab:)36 b(*\))p 1619 1257 V 269 1303 V
393 1289 a(StatementS)o(eq\()o(sta)o(t^)o(.bo)o(dy)o(\);)330
b(\(*)19 b(the)f(body)38 b(*\))p 1619 1303 V 269 1348
V 393 1335 a(BoolExpr\(s)o(tat)o(^.c)o(on)o(Exp)o(,l)o(oop)o(,fa)o(ll)o
(thr)o(ou)o(gh\))o(;)e(\(*)19 b(post-test)d(*\))p 1619
1348 V 269 1394 V 354 1380 a(END)j(EncodeRe)o(pea)o(t;)p
1619 1394 V 270 1396 1350 2 v 494 1512 a FN(Figure)14
b(4.12:)i(W)m(riting)d(out)g(co)q(de)i(for)f FK(REPEA)m(T)19
b FN(lo)q(op)224 1648 y(analagous)d(to)g(the)i(p)q(ost-tested)g(lo)q
(op.)26 b(Ho)o(w)o(ev)o(er)17 b(there)h(are)f(adv)n(an)o(tages)f(in)g
(using)h(the)224 1698 y(alternativ)o(e)12 b(structure)i(sho)o(wn)d(in)h
(\014gure)g(4.11\(d\).)k(Note)d(that)e(the)i(lo)q(op)d(do)q(es)j(not)f
(termi-)224 1748 y(nate)g(with)f(a)g(double)g(jump,)e(th)o(us)j(sa)o
(ving)e(a)h(costly)g(instruction)h(execution.)18 b(In)11
b(addition,)224 1798 y(as)17 b(w)o(e)g(shall)f(see)h(in)f(c)o(hapter)i
(9,)e(the)i(testing)e(of)g(the)i(condition)d(prior)i(to)f(en)o(try)h
(to)g(the)224 1847 y(lo)q(op)f(creates)j(a)e(safe)g(p)q(osition)f(to)h
(whic)o(h)f(lo)q(op-in)o(v)n(arian)o(t)f(co)q(de)i(ma)o(y)e(b)q(e)j(mo)
o(v)o(ed.)25 b(The)224 1897 y(preferred)19 b(v)o(ersion)d(do)q(es)h
(duplicate)g(the)g(co)q(de)g(of)f(the)h(test,)g(but)g(this)f(is)h
(usually)e(not)i(a)224 1947 y(concern.)j(The)14 b(co)q(de)h(is)f(pro)q
(duced)h(as)f(sho)o(wn)g(in)f(\014gure)i(4.13.)p 270
2052 V 269 2097 2 46 v 335 2084 a FF(PROCEDUR)o(E)i(EncodeWhi)o(le)o
(\(st)o(at)f(:)j(StatDesc\);)p 1619 2097 V 269 2143 V
374 2129 a(VAR)f(loop,)g(exit)g(:)h(LabelType;)p 1619
2143 V 269 2189 V 335 2175 a(BEGIN)p 1619 2189 V 269
2234 V 374 2221 a(AllocateL)o(ab)o(el\()o(loo)o(p\))o(;)e(AllocateL)o
(ab)o(el\()o(ex)o(it\))o(;)p 1619 2234 V 269 2280 V 374
2266 a(BoolExpr\()o(st)o(at^)o(.co)o(nE)o(xp,)o(ex)o(it,)o(fal)o(lT)o
(hro)o(ug)o(h\);)36 b(\(*)18 b(pre-test)36 b(*\))p 1619
2280 V 269 2326 V 374 2312 a(EmitLabel)o(\(l)o(oop)o(\);)507
b(\(*)18 b(loopLab:)36 b(*\))p 1619 2326 V 269 2371 V
374 2358 a(Statement)o(Se)o(q\(s)o(tat)o(^.)o(bod)o(y\))o(;)331
b(\(*)18 b(the)h(body)37 b(*\))p 1619 2371 V 269 2417
V 374 2403 a(BoolExpr\()o(st)o(at^)o(.co)o(nE)o(xp,)o(fa)o(llT)o(hro)o
(ug)o(h,l)o(oo)o(p\);)f(\(*)18 b(post-test)e(*\))p 1619
2417 V 269 2463 V 374 2449 a(EmitLabel)o(\(e)o(xit)o(\);)507
b(\(*)18 b(exitLab:)36 b(*\))p 1619 2463 V 269 2508 V
335 2495 a(END)18 b(EncodeWhi)o(le;)p 1619 2508 V 270
2510 1350 2 v 424 2626 a FN(Figure)c(4.13:)j(W)m(riting)12
b(out)i(co)q(de)g(for)g(mo)q(di\014ed)e FK(WHILE)20 b
FN(lo)q(op)p eop
%%Page: 124 130
124 129 bop 224 274 a FN(124)320 b FL(CHAPTER)14 b(4.)32
b(GENERA)m(TING)12 b(INTERMEDIA)m(TE)i(CODE)p 278 392
1334 2 v 277 438 2 46 v 362 424 a FD(\(a\))e(|)i(\\test,)e(then)i
(incremen)o(t")p 934 438 V 177 w(\(b\))f(|)h(\\incremen)o(t,)g(then)f
(test")p 1611 438 V 278 439 1334 2 v 277 485 2 46 v 341
471 a FF(ix)19 b(:=)g(lower-boun)o(d)p 934 485 V 320
w(ix)g(:=)g(lower-boun)o(d)p 1611 485 V 277 531 V 341
517 a(t1)g(:=)g(upper-boun)o(d)p 934 531 V 320 w(t1)g(:=)g(upper-boun)o
(d)p 1611 531 V 277 576 V 341 563 a(IF)g(ix)g(>)g(t1)g(THEN)f(goto)g
(exit)g(END)p 934 576 V 87 w(IF)h(ix)g(>)g(t1)g(THEN)f(goto)g(exit)g
(END)p 1611 576 V 277 622 V 341 608 a(t2)h(:=)g(t1)g(-)g(step)p
934 622 V 323 w(loop:)p 1611 622 V 277 668 V 303 654
a(loop:)p 934 668 V 595 w FE(statement)12 b(se)n(quenc)n(e)p
1611 668 V 277 713 V 341 700 a(statement)g(se)n(quenc)n(e)p
934 713 V 336 w FF(INC\(ix,step)o(\))p 1611 713 V 277
759 V 341 745 a(IF)19 b(ix)g(>)g(t2)g(THEN)f(goto)g(exit)g(END)p
934 759 V 87 w(IF)h(ix)g(<=)g(t1)g(THEN)f(goto)g(loop)g(END)p
1611 759 V 277 805 V 341 791 a(INC\(ix,step)o(\))p 934
805 V 380 w(exit:)p 1611 805 V 277 850 V 341 837 a(goto)g(loop)p
934 850 V 1611 850 V 277 896 V 303 882 a(exit:)p 934
896 V 1611 896 V 278 898 1334 2 v 408 1014 a FN(Figure)c(4.14:)j(Tw)o
(o)c(w)o(a)o(ys)h(of)f(enco)q(ding)h(a)g(for)f(lo)q(op,)g(b)q(oth)h
(wrong)224 1144 y FO(The)i(for)f(statemen)o(t)224 1220
y FN(The)20 b(for)e(statemen)o(t)h(in)f(languages)h(suc)o(h)g(as)g
FK(Pasc)n(al)k FN(and)c FK(Mo)n(dula-2)25 b FN(is)19
b(rather)g(more)224 1270 y(di\016cult)f(to)g(enco)q(de)i(than)e(the)h
(other)f(lo)q(ops.)31 b(This)18 b(di\016cult)o(y)f(arises)i(b)q(ecause)
h(of)e(the)224 1320 y(precise)f(seman)o(tics)e(of)f(the)i(statemen)o
(t.)22 b(There)16 b(are)f(t)o(w)o(o)g(ob)o(vious)f(w)o(a)o(ys)h(in)g
(whic)o(h)g(a)g(for)224 1370 y(lo)q(op)g(migh)o(t)e(b)q(e)j(enco)q
(ded,)g(sho)o(wn)f(in)g(\014gure)h(4.14.)21 b(Since)15
b(the)h(step)g(size)g(is)f(a)g(constan)o(t,)224 1420
y(the)g(t)o(w)o(o)e(ough)o(t)g(to)g(b)q(e)i(equiv)n(alen)o(t,)d(pro)o
(vided)i(a)f(suitable)h(v)n(alue)e(is)i(c)o(hosen)h(for)e(the)h(limit)
224 1469 y(v)n(alue.)36 b(Where)21 b(the)g(t)o(w)o(o)f(actually)f(are)i
(the)f(equiv)n(alen)o(t,)h(w)o(e)f(should)g(prefer)h(the)g(\(b\))224
1519 y(v)o(ersion,)14 b(since)h(it)e(uses)i(a)f(single)f(branc)o(h)i
(statemen)o(t)f(in)f(eac)o(h)h(lo)q(op.)287 1569 y(In)h(this)g(section)
h(w)o(e)g(will)d(consider)j(only)f(lo)q(ops)g(whic)o(h)g(coun)o(t)g(up)
o(w)o(ards.)23 b(The)15 b(same)224 1619 y(reasoning)e(applies)g(to)f
(lo)q(ops)g(whic)o(h)h(coun)o(t)g(do)o(wn,)f(and)h(w)o(e)g(usually)f
(need)h(separate)h(case)224 1669 y(co)q(de)h(for)f(pro)q(ducing)g(the)g
(output)g(for)g(the)g(t)o(w)o(o)g(directions.)287 1719
y(The)g(problem)e(with)h(for)g(lo)q(ops)g(is)h(that)f(the)h
FK(lo)n(op-c)n(ontr)n(ol)g(variable)f FN(m)o(ust)g(ha)o(v)o(e)g(some)
224 1768 y(\014nite)i(represen)o(tation)h(at)e(run)o(time,)f(and)h(the)
h(represen)o(tation)h(ma)o(y)c(o)o(v)o(er\015o)o(w)i(when)h(the)224
1818 y(incremen)o(t)f(is)g(p)q(erformed.)k(Consider)c(the)g(lo)q(op)295
1902 y FF(FOR)19 b(ix)g(:=)f(i)i(TO)e(j)i(BY)f(10)f(DO)h(...)g(END;)224
1990 y FN(in)d(the)h(case)g(that)f(lo)o(w)o(er)g(limit)e(expression)j
FM(i)f FN(has)h(the)g(v)n(alue)e FK(MAX)7 b FN(\()p FK(INTEGER)r
FN(\))14 b(-)f(15,)224 2040 y(and)k FM(j)h FN(is)e FK(MAX)7
b FN(\()p FK(INTEGER)r FN(\).)25 b(On)17 b(the)g(third)f(tra)o(v)o
(ersal)g(of)g(the)h(lo)q(op,)f(the)h(incremen)o(t)224
2090 y(op)q(eration)g(in)g(v)o(ersion)g(\(b\))g(of)f(\014gure)i(4.14)d
(will)h(o)o(v)o(er\015o)o(w)g(the)i(con)o(trol)e(v)n(ariable.)26
b(This)224 2140 y(o)o(v)o(er\015o)o(w)17 b(will)f(either)i(cause)h(the)
f(program)e(to)h(ab)q(ort)g(with)g(a)g(fatal)f(error,)j(or,)f(if)e
FM(N)22 b FN(is)224 2189 y(the)14 b(n)o(um)o(b)q(er)f(of)g(bits)h(in)f
(the)h(w)o(ord,)f(will)f FK(wr)n(ap-ar)n(ound)17 b FN(the)d(v)n
(ariable)f(mo)q(dulo-2)1526 2174 y FB(N)1555 2189 y FN(.)k(This)224
2239 y(will)c(b)q(e)h(a)f(negativ)o(e)g(v)n(alue,)g(causing)g(the)i(lo)
q(op)d(to)i(erroneously)g(con)o(tin)o(ue.)k(Clearly)13
b(b)q(oth)224 2289 y(b)q(eha)o(viours)h(are)h(incorrect.)287
2339 y(Figure)c(4.14)e(v)o(ersion)i(\(a\))g(is)g(no)f(b)q(etter.)19
b(If)10 b(the)i(lo)o(w)o(er)e(b)q(ound)h FM(i)g FN(is)g
FK(MIN)c FN(\()p FK(INTEGER)r FN(\),)224 2389 y(and)16
b(the)g(upp)q(er)g(b)q(ound)g(has)f(v)n(alue)g FK(MIN)7
b FN(\()p FK(INTEGER)r FN(\))14 b(+)g(5,)h(the)i(initial)c(computation)
224 2438 y(of)e FM(j)h Ft(\000)e FN(10)h(will)f(o)o(v)o(er\015o)o(w,)h
(causing)h(either)g(a)f(trap)h(or)g(a)f(mo)q(dulo-2)1274
2423 y FB(N)1315 2438 y FK(wr)n(ap-ar)n(ound)t FN(.)17
b(Once)224 2488 y(again,)c(b)q(oth)h(b)q(eha)o(viours)g(are)g
(incorrect.)287 2538 y(There)e(are)g(man)o(y)d(sp)q(ecial)j(cases)g(in)
f(whic)o(h)g(one)h(of)e(the)i(simple)e(forms)g(in)h(the)h(diagram)224
2588 y(is)f(correct.)18 b(This)11 b(o)q(ccurs,)h(for)e(example,)f(when)
i(one)g(or)g(other)g(of)e(the)j(limits)c(is)i(a)g(constan)o(t,)224
2638 y(or)j(b)q(elongs)g(to)g(some)f(subrange.)18 b(Equally)12
b(w)o(ell,)f(of)i(course,)g(there)h(are)g(cases)g(in)e(whic)o(h)h(it)
224 2688 y(is)h(p)q(ossible)g(to)g(sho)o(w)g(that)g(the)g(pre-test)i
(co)q(de)f(is)e(unnecessary)m(.)p eop
%%Page: 125 131
125 130 bop 224 274 a FL(4.6.)31 b(FINDING)14 b(OUT)g(MORE)848
b FN(125)p 268 392 1354 2 v 267 438 2 46 v 582 424 a
FD(\(a\))p 944 438 V 627 w(\(b\))p 1621 438 V 268 439
1354 2 v 267 485 2 46 v 332 471 a FF(ix)18 b(:=)h(lower-boun)o(d)p
944 485 V 340 w(ix)g(:=)g(lower-bou)o(nd)p 1621 485 V
267 531 V 332 517 a(t1)f(:=)h(upper-boun)o(d)p 944 531
V 340 w(t1)g(:=)g(upper-bou)o(nd)p 1621 531 V 267 576
V 332 563 a(IF)f(ix)h(>)g(t1)g(THEN)f(goto)g(exit)h(END)p
944 576 V 106 w(IF)g(ix)g(>)g(t1)g(THEN)f(goto)g(exit)g(END)p
1621 576 V 267 622 V 332 608 a(t2)g(:=)h(t1)g(-)g(step)p
944 622 V 343 w(loop:)p 1621 622 V 267 668 V 293 654
a(loop:)p 944 668 V 615 w FE(statement)12 b(se)n(quenc)n(e)p
1621 668 V 267 713 V 332 700 a(statement)f(se)n(quenc)n(e)p
944 713 V 356 w FF(INC\(ix,ste)o(p\))p 1621 713 V 267
759 V 332 745 a(IF)18 b(ix)h(>)g(t2)g(THEN)f(goto)g(exit)h(END)p
944 759 V 106 w(IF)12 b FE(over\015ow)g FF(THEN)18 b(goto)g(exit)g(END)
p 1621 759 V 267 805 V 332 791 a(INC\(ix,s)o(tep)o(\))p
944 805 V 438 w(IF)h(ix)g(<=)g(t1)g(THEN)f(goto)g(loop)g(END)p
1621 805 V 267 850 V 332 837 a(IF)g(ix)h(<=)g(t1)g(THEN)f(goto)g(loop)g
(END)p 944 850 V 49 w(exit:)p 1621 850 V 267 896 V 293
882 a(exit:)p 944 896 V 1621 896 V 268 898 1354 2 v 456
1014 a FN(Figure)c(4.15:)j(Tw)o(o)c(w)o(a)o(ys)h(of)f(safely)g(enco)q
(ding)i(the)f(for)g(lo)q(op)287 1146 y(In)h(the)h(most)f(general)h
(case)g(b)q(oth)g(limit)d(expressions)k(are)f(v)n(ariable,)e(and)i(the)
g(range)224 1196 y(of)h(p)q(ossible)g(v)n(alues)g(spans)h(the)f(whole)g
(range)g(of)g(the)g(represen)o(tation.)30 b(In)17 b(suc)o(h)g(cases,)
224 1246 y(t)o(w)o(o)d(tests)i(are)f(necessary)h(for)e(correctness.)22
b(Figure)14 b(4.15)f(sho)o(ws)i(t)o(w)o(o)f(separate)h(w)o(a)o(ys)f(of)
224 1296 y(p)q(erforming)h(t)o(w)o(o)g(tests.)25 b(The)16
b(c)o(hoice)g(b)q(et)o(w)o(een)h(the)f(t)o(w)o(o)f(forms)g(migh)o(t)e
(dep)q(end)k(on)f(the)224 1346 y(a)o(v)n(ailabilit)o(y)11
b(of)i(an)h(o)o(v)o(er\015o)o(w)f(test)i(instruction)f(on)g(the)g
(target)h(mac)o(hine.)224 1483 y FI(4.6)67 b(Finding)24
b(out)f(more)224 1599 y(4.7)67 b(Exercises)224 1690 y
FO(4.1)21 b FG(<<showing)f(cases)h(where)g(jumping)f(code)h(is)g
(worse>>)224 1773 y FO(4.2)g FG(<<all)g(the)g(other)g(cases)g(of)g
(turning)f(jumps)h(into)g(booleans>>)p eop
%%Page: 126 132
126 131 bop 224 274 a FN(126)320 b FL(CHAPTER)14 b(4.)32
b(GENERA)m(TING)12 b(INTERMEDIA)m(TE)i(CODE)p eop
%%Page: 127 133
127 132 bop 224 704 a FJ(Chapter)32 b(5)224 913 y FP(In)m(terpretiv)m
(e)40 b(Co)s(de)f(Selection)609 1153 y
 10590863 18945146 0 0 10590863 18945146 startTexFig
 609 1153 a
%%BeginDocument: intarch.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-23.0 294.0 translate 0.585 -0.585 scale
1.000 setlinewidth
	[6.000000] 0 setdash
% Polyline
n 313 429 m 313 409 l  173 409 l  173 429 l  clp gs col-1 s gr
	[] 0 setdash
/Times-Bold findfont 11.00 scalefont setfont
183 422 m 
gs 1 -1 scale (optional optimization step) col-1 show gr
	[6.000000] 0 setdash
% Polyline
n 313 349 m 313 329 l  173 329 l  173 349 l  clp gs col-1 s gr
	[] 0 setdash
/Times-Bold findfont 11.00 scalefont setfont
183 342 m 
gs 1 -1 scale (optional optimization step) col-1 show gr
	[6.000000] 0 setdash
% Polyline
n 313 268 m 313 248 l  173 248 l  173 268 l  clp gs col-1 s gr
	[] 0 setdash
/Times-Bold findfont 11.00 scalefont setfont
183 261 m 
gs 1 -1 scale (optional optimization step) col-1 show gr
	[6.000000] 0 setdash
% Polyline
n 313 189 m 313 169 l  173 169 l  173 189 l  clp gs col-1 s gr
	[] 0 setdash
/Times-Bold findfont 11.00 scalefont setfont
183 182 m 
gs 1 -1 scale (optional optimization step) col-1 show gr
% Polyline
n 239 79 m 239 39 l  79 39 l  79 79 l  clp gs col-1 s gr
% Polyline
n 239 159 m 239 119 l  79 119 l  79 159 l  clp gs col-1 s gr
% Polyline
n 239 239 m 239 199 l  79 199 l  79 239 l  clp gs col-1 s gr
% Polyline
n 239 399 m 239 359 l  79 359 l  79 399 l  clp gs col-1 s gr
% Polyline
n 239 479 m 239 439 l  79 439 l  79 479 l  clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 159 19 m 159 39 l gs col-1 s gr
n 161.000 31.000 m 159.000 39.000 l 157.000 31.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 79 m 159 119 l gs col-1 s gr
n 161.000 111.000 m 159.000 119.000 l 157.000 111.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 159 m 159 199 l gs col-1 s gr
n 161.000 191.000 m 159.000 199.000 l 157.000 191.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 239 m 159 279 l gs col-1 s gr
n 161.000 271.000 m 159.000 279.000 l 157.000 271.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 319 m 159 359 l gs col-1 s gr
n 161.000 351.000 m 159.000 359.000 l 157.000 351.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 399 m 159 439 l gs col-1 s gr
n 161.000 431.000 m 159.000 439.000 l 157.000 431.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 479 m 159 499 l gs col-1 s gr
n 161.000 491.000 m 159.000 499.000 l 157.000 491.000 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
% Polyline
n 239 319 m 79 319 l  79 279 l  239 279 l  clp gs 0.95 setgray fill gr
gs col-1 s gr
/Times-Bold findfont 11.00 scalefont setfont
136 462 m 
gs 1 -1 scale (assembler) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
129 381 m 
gs 1 -1 scale (register binder) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
134 222 m 
gs 1 -1 scale (tree walker) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
107 62 m 
gs 1 -1 scale (front-end tree builder) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
116 142 m 
gs 1 -1 scale (attribute evaluator) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
91 502 m 
gs 1 -1 scale (object file out) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
71 422 m 
gs 1 -1 scale (assembly language) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
39 342 m 
gs 1 -1 scale (virtual assembly language) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
81 262 m 
gs 1 -1 scale (abstract stack IR) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
62 181 m 
gs 1 -1 scale (attributed syntax tree) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
69 102 m 
gs 1 -1 scale (abstract syntax tree) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
97 21 m 
gs 1 -1 scale (source file in) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
102 301 m 
gs 1 -1 scale (interpretive code selector) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 224 2437 a FN(In)o(terpretiv)o(e)20 b(co)q(de)f(selectors)i(are)e
(push-do)o(wn)f(automata.)30 b(They)18 b(tak)o(e)h(as)f(input)h(the)224
2486 y(strings)14 b(of)e(the)i(in)o(termediate)e(represen)o(tation)j
(\()p FK(IR)r FN(\),)d(and)h(output)g(strings)h(in)e(the)i(target)224
2536 y(language.)35 b(In)20 b(our)f(case,)j(the)e(target)g(language)f
(is)h(the)g(virtual)f(assem)o(bly)f(language)224 2586
y(\()p FK(V)l(AL)p FN(\).)287 2638 y(In)e(the)h(general)g(case)h(it)e
(is)h(necessary)h(for)e(the)i(automaton)c(to)j(ha)o(v)o(e)f(the)h
(language)224 2688 y(recognition)d(p)q(o)o(w)o(er)h(of)e(a)h(push)h(do)
o(wn)f(automatom)c(\()p FK(PD)o(A)p FN(\),)15 b(since)f(the)h(input)f
(language)914 2793 y(127)p eop
%%Page: 128 134
128 133 bop 224 274 a FN(128)371 b FL(CHAPTER)14 b(5.)31
b(INTERPRETIVE)14 b(CODE)g(SELECTION)224 390 y FN(is)k(not)g(regular.)
30 b(The)19 b(co)q(de)g(selector)g(has)f(th)o(us)g(a)g(p)q(oten)o
(tially)f(unlimited)f(n)o(um)o(b)q(er)h(of)224 440 y(in)o(ternal)d
(states.)287 490 y(The)i(task)g(of)f(the)i(co)q(de)g(selector)g(is)f
(to)g(tak)o(e)g(sequences)i(of)d(instructions)i(in)f(the)g
FK(IR)224 540 y FN(and)k(to)f(emit)f(some)g(sequence)k(of)d
(instructions)h(in)f(the)h FK(V)l(AL)f FN(whic)o(h)g(ha)o(v)o(e)g(the)h
(same)224 590 y(meaning.)37 b(In)21 b(order)g(for)g(the)g(co)q(de)g
(selector)h(to)f(pro)q(duce)h(go)q(o)q(d)e(qualit)o(y)g(co)q(de)h(it)f
(is)224 640 y(necessary)f(to)d(accum)o(ulate)g(as)g(m)o(uc)o(h)f(state)
j(information)13 b(as)k(p)q(ossible)f FK(b)n(efor)n(e)j
FN(it)d(issues)224 689 y(eac)o(h)i(instruction.)29 b(The)17
b(normal)e(metho)q(d)i(of)g(doing)f(this)h(is)g(to)g(main)o(tain)e(at)i
(compile)224 739 y(time)e(a)g(data)g(structure)i(whic)o(h)f(w)o(e)f
(shall)g(call)g(a)g FO(shado)o(w)h(stac)o(k)p FN(.)23
b(The)16 b(shado)o(w)f(stac)o(k)224 789 y(at)g(compile)e(time)g(em)o
(ulates)h(the)h(stac)o(k)h(of)e(the)h(abstract)h(stac)o(k)f(mac)o
(hine.)k(An)c(example)224 839 y(will)e(help)h(to)f(mak)o(e)g(the)h(pro)
q(cess)i(clear.)224 975 y FI(5.1)67 b(Co)r(de)21 b(selection)i(for)f(a)
g(load-store)h(arc)n(hitecture)224 1066 y FN(The)e(arc)o(hitecture)i
(whic)o(h)d(w)o(e)h(shall)f(use)h(as)g(the)g(target)g(for)f(our)h
(\014rst)g(example)e(has)224 1115 y(c)o(haracteristics)e(sho)o(wn)d(in)
g(\014gure)h(5.1.)k(W)m(e)14 b(defer)h(all)e(consideration)i(of)f(suc)o
(h)h(things)f(as)224 1165 y(non-scalar)g(\(and)g(ev)o(en)g(\015oating)f
(p)q(oin)o(t\))h(v)n(ariables)f(un)o(til)g(later.)287
1215 y(W)m(e)g(assume)g(that)h(the)g(primitiv)o(e)e(data)h(t)o(yp)q(es)
h(of)g(the)g(target)g(mac)o(hine)e(are)i(declared)224
1265 y(as)g(an)g(en)o(umeration)f(|)295 1334 y FF(TYPE)18
b(Object)g(=)h(\(byteInt,)36 b(byteCard,)f(\(*)19 b(8-bit)f(types)37
b(*\))589 1380 y(shortInt,)17 b(shortCard)o(,)f(\(*)j(16-bit)f(types)f
(*\))589 1425 y(midInt,)57 b(midCard,)e(\(*)19 b(32-bit)f(types)f(*\))
589 1471 y(word,)312 b(\(*)19 b(machine)e(word)h(*\))589
1517 y(float,)g(double\))134 b(\(*)19 b(ieee)f(types)57
b(*\))224 1596 y FN(W)m(e)14 b(also)g(ssume)f(that)i(the)f
FK(DCo)n(de)k FN(instruction)c(set,)h(and)f(the)g(target)h(mac)o(hine)e
(instruc-)224 1646 y(tion)h(set)h(are)f(lik)o(ewise)f(declared)i(as)f
(en)o(umerations)f(|)295 1715 y FF(TYPE)18 b(Instructio)o(n)f(=)i(\()g
(...)g(\);)f(\(*)h(DCode)f(enumeratio)o(n)e(*\))393 1761
y(OpCode)116 b(=)19 b(\()g(...)g(\);)f(\(*)h(Target)f(VAL)g(enum.)37
b(*\))287 1841 y FN(All)13 b(op)q(erations)h(on)g(data)f(are)i(p)q
(erformed)e(en)o(tirely)i(on)e(registers.)20 b(Th)o(us)14
b(to)g(p)q(erform)224 1891 y(op)q(erations)20 b(on)e(data)h(in)f
(memory)f(it)h(is)h(necessary)i(to)e(\014rst)h(load)e(the)h(op)q
(erands)h(in)o(to)224 1940 y(registers,)c(op)q(erate)g(on)f(the)g
(registers,)h(then)g(store)f(the)h(result)f(bac)o(k)g(in)o(to)f(memory)
m(.)k(F)m(or)224 1990 y(this)c(reason)h(suc)o(h)f(mac)o(hine)f(arc)o
(hitectures)j(are)e(called)g FO(load-store)p FN(.)287
2040 y(Binary)20 b(op)q(erations)g(suc)o(h)h(as)g(\\)p
FG(add)p FN(")e(or)h(\\)p FG(sub)p FN(")f(tak)o(e)i(exactly)f(three)i
(argumen)o(ts,)224 2090 y(whic)o(h)10 b(are)g(either)g(all)f
(registers,)i(or)f(t)o(w)o(o)f(registers)i(and)e(a)g(literal.)16
b(Unary)10 b(op)q(erations)g(suc)o(h)224 2140 y(as)k(\\)p
FG(move)p FN(")e(tak)o(e)h(t)o(w)o(o)g(argumen)o(ts)f(whic)o(h)h(are)h
(b)q(oth)f(registers.)20 b(In)13 b(the)h(\014rst)g(instance)g(w)o(e)224
2189 y(will)c(assume)g(that)h(comparison)e(op)q(erations)i(\()p
FK(set)h(instructions)s FN(\),)f(tak)o(e)g(three)h(argumen)o(ts,)224
2239 y(t)o(w)o(o)i(register)h(op)q(erands)g(and)f(a)f(destination)h
(register.)19 b(The)c(destination)e(register)j(has)e(a)224
2289 y(zero)f(or)e(one)g(placed)h(in)o(to)e(it)h(as)h(the)g(Bo)q(olean)
f(result)h(of)e(the)i(sp)q(eci\014ed)h(comparison.)j(Suc)o(h)224
2339 y(a)c(mac)o(hine)e(can)i(then)h(enco)q(de)g(all)d(p)q(ossible)i
(\015o)o(w)f(of)h(con)o(trol)f(on)h(the)g(basis)g(of)f(conditional)224
2389 y(branc)o(hes)16 b(on)d(zero)i(or)f(non-zero)g(register)h(v)n
(alues.)287 2438 y(Other)f FK(RISC)19 b FN(arc)o(hitectures)c(ha)o(v)o
(e)d FK(c)n(ondition)j(c)n(o)n(des)h FN(whic)o(h)d(are)g(set)h(as)f(a)f
(side-e\013ect)224 2488 y(of)g(instruction)g(execution,)g(and)g(ha)o(v)
o(e)g(conditional)e(branc)o(h)j(instructions)f(whic)o(h)g(dep)q(end)224
2538 y(on)h(these)g(condition)f(co)q(des.)19 b(In)12
b(principle,)g(suc)o(h)h(an)f(organization)f(allo)o(ws)h(for)g
(execution)224 2588 y(time)e(to)h(b)q(e)h(sa)o(v)o(ed,)f(since)h
(explicit)e(tests)j(can)e(often)g(b)q(e)h(replaced)g(b)o(y)f(tests)h
(on)f(side-e\013ects)224 2638 y(of)j(instructions)i(whic)o(h)e(are)h
(already)f(presen)o(t.)22 b(Ho)o(w)o(ev)o(er,)15 b(it)f(is)g
(suprizingly)h(di\016cult)e(to)224 2688 y(ac)o(hiev)o(e)i(these)g(sa)o
(vings,)e(so)h(w)o(e)g(shall)f(deal)h(with)f(the)i(simpler)d(case)j
(\014rst.)p eop
%%Page: 129 135
129 134 bop 224 274 a FL(5.1.)31 b(CODE)14 b(SELECTION)h(F)o(OR)f(A)g
(LO)o(AD-STORE)f(AR)o(CHITECTURE)104 b FN(129)287 390
y(The)13 b(load)f(instructions)i(either)g(load)e(a)g(datum)g(from)f
(memory)g(in)o(to)h(a)h(sp)q(eci\014ed)h(reg-)224 440
y(ister,)j(or)e(load)g(a)h(literal)f(in)o(to)g(a)g(register.)25
b(The)16 b(store)g(instruction)g(stores)h(the)g(v)n(alue)e(in)224
490 y(the)h(sp)q(eci\014ed)g(register)f(in)o(to)f(the)h(sp)q(eci\014ed)
h(memory)c(lo)q(cation.)19 b(W)m(e)14 b(shall)g(assume)g(that)224
540 y(the)h(load)f(and)g(store)i(instructions)f(ha)o(v)o(e)f(exactly)h
(one)f(address)i(mo)q(de)d(|)h FK(indexe)n(d)i(indi-)224
590 y(r)n(e)n(ct)t FN(.)j(In)14 b(this)g(mo)q(de)f(the)i(instruction)g
FG(lw)21 b FK(o\013set)p FG(\()p FK(r)n(e)n(g)t FG(\),)p
FK(dst)13 b FN(loads)h(in)o(to)g(the)g(destination)224
640 y(register)k FK(dst)h FN(the)e(datum)d(found)i(in)g(memory)d(at)j
(the)g(lo)q(cation)f(giv)o(en)h(b)o(y)g(the)g(con)o(ten)o(ts)224
689 y(of)g(register)h FK(r)n(e)n(g)h FN(plus)e(the)g(constan)o(t)h
(o\013set)f FK(o\013set)t FN(.)25 b(The)16 b(only)f(sligh)o(t)g(tric)o
(k)h(is)f(that)h(one)224 739 y(of)e(the)h(registers,)h(register)f
FK(zer)n(o)i FN(or)d FM(r)829 745 y FB(z)862 739 y FN(as)h(w)o(e)f
(shall)g(call)g(it,)f(alw)o(a)o(ys)h(con)o(tains)g(the)h(v)n(alue)224
789 y(zero)297 774 y Fz(1)317 789 y FN(.)j(Th)o(us)c(b)o(y)g(using)f
(an)h(o\013set)h(of)e(zero,)h(ordinary)g(indirect)g(addressing)g(is)g
(obtained.)224 839 y(By)h(using)e(an)h(index)g(register)h(of)e
FM(r)782 845 y FB(z)815 839 y FN(absolute)h(addressing)g(is)g
(obtained.)287 906 y(A)o(t)e(this)g(stage)g(in)g(the)g(pro)q(cess)i(of)
d(co)q(de)i(selection,)g(the)f(o\013set)h(of)f(a)f(memory)f(op)q(erand)
224 956 y(ma)o(y)h(b)q(e)i(denoted)g(as)g(the)g(sum)e(of)h(a)g(sym)o(b)
q(olic)e(name)i(and)g(a)g(constan)o(t.)18 b(A)o(t)13
b(run)o(time,)e(the)224 1006 y(o\013set)i(will)d(not)h(b)q(e)i(sym)o(b)
q(olic,)c(but)j(will)e(b)q(e)i(a)g(constan)o(t.)17 b(During)11
b(compilation)e(it)i(ma)o(y)f(b)q(e)224 1055 y(necesary)15
b(to)e(refer)h(to)f(the)g(op)q(erand)h(as,)f(let)g(us)g(sa)o(y)m(,)f
(\\)p FG(extVar+4)p FN(".)k(The)d(link)o(er)g(program)224
1105 y(will)e(w)o(ork)h(out)g(exactly)g(what)g(constan)o(t)h(corresp)q
(onds)h(to)e FK(extV)m(ar)g FN(at)g(link)f(time,)g(and)h(will)224
1155 y(adjust)i(the)h(executable)g(\014le)f(accordingly)m(.)287
1222 y(This)h(mac)o(hine)f(ma)o(y)f(seem)i(unduly)g(simple,)f(but)h(is)
g(represen)o(tativ)o(e)i(of)e(the)h(curren)o(t)224 1272
y(selection)g(of)e(reduced)j(instruction)e(set)h(\()p
FK(RISC)6 b FN(\))16 b(computers.)21 b(The)15 b(most)f(widely)g(a)o(v)n
(ail-)224 1322 y(able)e(of)e(these)j(mac)o(hines)e(are)h(the)g
FK(MIPS)h(Corp)n(or)n(ation)l('s)f(R3000)18 b FN(arc)o(hitecture)13
b(and)e FK(SUN)224 1372 y(Micr)n(osystem's)i(SP)m(AR)o(C)6
b FN(.)11 b(The)i(describ)q(ed)h(mac)o(hine)c(is)i(almost)e(exactly)i
(the)h FK(MIPS)k FN(pro-)224 1421 y(cessor.)27 b FK(SP)m(AR)o(C)22
b FN(is)16 b(only)f(sligh)o(tly)g(more)g(complex)g(with)g
FK(two)k FN(address)e(mo)q(des,)e(rather)224 1471 y(than)i(the)g(one)g
(whic)o(h)f(w)o(e)h(consider)h(here,)g(and)e(with)g(condition)g(co)q
(des)i(instead)f(of)f(the)224 1521 y FK(set)i FN(instructions.)224
1729 y FH(5.1.1)56 b(The)18 b(shado)n(w)i(stac)n(k)224
1838 y FN(The)d(k)o(ey)g(to)f(the)h(design)f(of)g(the)h(shado)o(w)f
(stac)o(k)h(automaton)d(is)i(to)g(ha)o(v)o(e)h(the)f(elemen)o(ts)224
1888 y(of)g(the)i(shado)o(w)e(stac)o(k)h(represen)o(t,)i(in)d(some)g
(sense,)i(the)f(p)q(ossible)g(op)q(erands)h(of)e(the)h(in-)224
1938 y(structions)d(of)e(the)i(target)f(mac)o(hine.)j(The)e(stac)o(k)f
(elemen)o(ts)g(th)o(us)g(b)q(elong)f(to)h(some)f(union)224
1988 y(t)o(yp)q(e.)287 2055 y(In)f(our)f(case,)i(w)o(e)f(shall)g(allo)o
(w)e(the)i(elemen)o(ts)g(of)f(the)i(shado)o(w)e(stac)o(k)i(to)e(b)q(e)i
(one)f(of)f(three)224 2105 y(v)n(arian)o(ts)16 b(|)h(registers,)h
(literals,)e(or)h(sym)o(b)q(olic)e(addresses.)29 b(Register)17
b(elemen)o(ts)f(on)h(the)224 2155 y(virtual)c(stac)o(k)i(simply)d(con)o
(tain)h(the)h(tag,)f(indicating)g(that)h(this)g(elemen)o(t)f(do)q(es)i
(denote)g(a)224 2204 y(register,)h(and)f(an)g(ordinal)f(v)n(alue)g
(whic)o(h)h(denotes)h(the)g(virtual)e(register.)23 b(It)15
b(is)g(assumed)224 2254 y(that)g(there)h(is)f(an)g(unlimited)e(n)o(um)o
(b)q(er)h(of)g(these)i FO(virtual)f(registers)p FN(.)j(It)d(is)g(con)o
(v)o(enien)o(t)224 2304 y(to)j(represen)o(t)h(the)f(real)g(mac)o(hine)e
(registers)j(as)e(the)h(\014rst)g(few,)g(reserv)o(ed)i(v)n(alues)d(of)g
(the)224 2354 y FK(VR)n(e)n(gister)22 b FN(t)o(yp)q(e.)32
b(Literal)18 b(elemen)o(ts)g(on)g(the)h(stac)o(k)g(simply)d(con)o(tain)
i(the)h(tag,)f(and)h(a)224 2404 y(w)o(ord)e(with)g(the)h(v)n(alue)e(of)
h(the)g(literal.)27 b(The)17 b(structure)j(of)c(the)i(sym)o(b)q(olic)d
(address)j(has)224 2453 y(three)g(comp)q(onen)o(ts.)25
b(These)18 b(are)e(an)h(iden)o(ti\014er)f(ordinal)g FK(ident)t
FN(,)g(an)g(o\013set)h FK(o\013)10 b FN(,)16 b(and)h(an)224
2503 y(index)i(register)h FK(r)n(e)n(g)t FN(.)32 b(The)19
b(structure)i(of)e(the)g(shado)o(w)g(stac)o(k)g(elemen)o(ts)g(is)f
(de\014ned)i(as)224 2553 y(follo)o(ws)13 b(|)p 224 2649
577 2 v 271 2676 a Fy(1)288 2688 y Fx(If)c Fr(r)337 2692
y Fh(z)365 2688 y Fx(is)g(used)g(as)g(destination,)e(the)h(result)h(is)
g(discarded;)f(when)h(used)f(as)i(source,)e(a)h(zero)g(is)g(obtained.)p
eop
%%Page: 130 136
130 135 bop 224 274 a FN(130)371 b FL(CHAPTER)14 b(5.)31
b(INTERPRETIVE)14 b(CODE)g(SELECTION)p 224 338 577 2
v 260 392 1371 2 v 259 442 2 50 v 284 427 a FO(op)q(co)q(de)50
b(descripti)o(on)p 891 442 V 203 w(format)p 1150 442
V 117 w(example)p 1629 442 V 260 444 1371 2 v 259 493
2 50 v 571 478 a(load)15 b(and)g(store)g(instructi)o(on)e(examples)p
1629 493 V 260 495 1371 2 v 259 545 2 50 v 284 530 a
FG(li)153 b FN(load)13 b(imm)o(ediate)p 891 545 V 155
w FK(I)p Ft(!)p FK(R)p 1150 545 V 170 w FG(li)22 b(255,)p
FM(r)1348 536 y FB(dst)p 1629 545 V 259 595 V 284 580
a FG(lw)153 b FN(load)13 b(w)o(ord)p 891 595 V 257 w
FK(M)p Ft(!)p FK(R)p 1150 595 V 149 w FG(lw)22 b(var+4\()p
FM(r)1392 586 y FB(ix)1423 580 y FG(\),)p FM(r)1486 586
y FB(dst)p 1629 595 V 259 645 V 284 630 a FG(la)153 b
FN(load)13 b(address)p 891 645 V 213 w FK(M)p Ft(!)p
FK(R)p 1150 645 V 149 w FG(la)22 b(var+4\()p FM(r)1392
636 y FB(ix)1423 630 y FG(\),)p FM(r)1486 636 y FB(dst)p
1629 645 V 259 694 V 284 679 a FG(sw)153 b FN(store)15
b(w)o(ord)p 891 694 V 245 w FK(R)p Ft(!)p FK(M)p 1150
694 V 149 w FG(sw)22 b FM(r)1260 685 y FB(sr)q(c)1308
679 y FG(,var+4\()p FM(r)1481 685 y FB(ix)1512 679 y
FG(\))p 1629 694 V 260 696 1371 2 v 259 746 2 50 v 546
731 a FO(binary)14 b(op)q(eration)g(instructi)o(on)e(examples)p
1629 746 V 260 747 1371 2 v 259 797 2 50 v 284 782 a
FG(nor)131 b FN(logical)12 b(not-or)p 891 797 V 196 w
FK(RR)p Ft(!)p FK(R)p 1150 797 V 126 w FG(nor)22 b FM(r)1282
788 y FB(sr)q(c)p Fz(1)1347 782 y FG(,)p FM(r)1388 788
y FB(sr)q(c)p Fz(2)1453 782 y FG(,)p FM(r)1494 788 y
FB(dst)p 1629 797 V 259 847 V 284 832 a FG(nori)p 891
847 V 545 w FK(RI)p Ft(!)p FK(R)p 1150 847 V 140 w FG(nori)f
FM(r)1303 838 y FB(sr)q(c)p Fz(1)1369 832 y FG(,255,)p
FM(r)1498 838 y FB(dst)p 1629 847 V 259 897 V 284 882
a FG(add)131 b FN(addition)13 b FO(mo)q(d)g FN(2)771
867 y Fz(32)p 891 897 V 917 882 a FK(RR)p Ft(!)p FK(R)p
1150 897 V 126 w FG(add)22 b FM(r)1282 888 y FB(sr)q(c)p
Fz(1)1347 882 y FG(,)p FM(r)1388 888 y FB(sr)q(c)p Fz(2)1453
882 y FG(,)p FM(r)1494 888 y FB(dst)p 1629 897 V 259
947 V 284 932 a FG(addi)p 891 947 V 545 w FK(RI)p Ft(!)p
FK(R)p 1150 947 V 140 w FG(add)g FM(r)1282 938 y FB(sr)q(c)p
Fz(1)1347 932 y FG(,427,)p FM(r)1476 938 y FB(dst)p 1629
947 V 259 997 V 284 982 a FG(sle)131 b FN(set)15 b FM(r)565
988 y FB(dst)626 982 y FN(=)f FM(r)691 988 y FB(sr)q(c)p
Fz(1)756 982 y Ft(\024)g FN(op2)p 891 997 V 50 w FK(RR)p
Ft(!)p FK(R)p 1150 997 V 126 w FG(sle)22 b FM(r)1282
988 y FB(sr)q(c)p Fz(1)1347 982 y FG(,)p FM(r)1388 988
y FB(sr)q(c)p Fz(2)1453 982 y FG(,)p FM(r)1494 988 y
FB(dst)p 1629 997 V 259 1046 V 284 1031 a FG(slei)p 891
1046 V 545 w FK(RI)p Ft(!)p FK(R)p 1150 1046 V 140 w
FG(slei)f FM(r)1303 1037 y FB(sr)q(c)p Fz(1)1369 1031
y FG(,213,)p FM(r)1498 1037 y FB(dst)p 1629 1046 V 260
1048 1371 2 v 259 1098 2 50 v 472 1083 a FO(miscellaneou)o(s)13
b(op)q(eration)h(instructi)o(on)e(examples)p 1629 1098
V 260 1099 1371 2 v 259 1149 2 50 v 284 1134 a FG(move)109
b FN(reg-to-reg)14 b(mo)o(v)o(e)p 891 1149 V 152 w FK(R)p
Ft(!)p FK(R)p 1150 1149 V 156 w FG(move)21 b FM(r)1303
1140 y FB(sr)q(c)1352 1134 y FG(,)p FM(r)1393 1140 y
FB(dst)p 1629 1149 V 259 1199 V 284 1184 a FG(beq)131
b FN(branc)o(h)14 b(if)f(equal)p 891 1199 V 165 w FK(RRL)p
Ft(!)p Fv(v)o(oid)p 1150 1199 V 48 w FG(beq)22 b FM(r)1282
1190 y FB(sr)q(c)p Fz(1)1347 1184 y FG(,)p FM(r)1388
1190 y FB(sr)q(c)p Fz(2)1453 1184 y FG(,label7)p 1629
1199 V 259 1249 V 284 1234 a(jal)131 b FN(subroutine)14
b(call)p 891 1249 V 168 w FK(M)p Ft(!)p Fv(v)o(oid)p
1150 1249 V 97 w FG(jal)22 b(procXYZ)p 1629 1249 V 259
1299 V 284 1284 a(jalr)109 b FN(subroutine)14 b(call)p
891 1299 V 168 w FK(R)p Ft(!)p Fv(v)o(oid)p 1150 1299
V 104 w FG(jalr)21 b FM(r)1303 1290 y FB(sr)q(c)p 1629
1299 V 260 1300 1371 2 v 195 1372 a Fv(Notes)288 1434
y Fw(\017)g FD(F)m(ormat)d(descriptors)h(are)f(in)g(the)g(form)g
FE(inputs)p Fw(!)p FE(outp)o(uts)p FD(.)27 b(In)18 b(these)g(formats,)g
FE(R)h FD(de-)328 1480 y(notes)e(a)e(register,)j FE(I)j
FD(an)16 b(immediate)i(\(literal\))g(op)q(erand,)f FE(L)f
FD(a)g(\(lo)q(cal\))h(lab)q(el,)i(and)d FE(M)22 b FD(a)328
1525 y(\(p)q(ossibly)15 b(sym)o(b)q(olic\))f(memory)e(address.)18
b(Instructions)c(whic)o(h)f(do)f(not)h(ha)o(v)o(e)f(an)h(explicit)328
1571 y(destination)j(ha)o(v)o(e)d(the)g(form)g FE(inputs)p
Fw(!)p Fv(v)o(oid)288 1633 y Fw(\017)21 b FD(In)16 b(the)f(examples,)j
Fm(r)644 1637 y Fh(dst)704 1633 y FD(denotes)e(the)g(destination)i
(register,)f Fm(r)1283 1637 y Fh(sr)q(cN)1371 1633 y
FD(denotes)g(the)f Fm(N)t FD(-th)328 1679 y(source)e(register,)f
Fm(r)610 1683 y Fh(ix)654 1679 y FD(a)g(source)h(register)g(used)f(as)h
(an)f(index)288 1741 y Fw(\017)21 b FD(Man)o(y)10 b(other)g
(instructions)i(exist,)f(and)f(man)o(y)g(more)g(are)f(constructed)i
(using)g(sp)q(ecial)h(cases)328 1787 y(of)e(the)g(example)h
(instructions.)19 b(F)m(or)10 b(example)h(arithmetic)h(negation)f(and)g
(branc)o(h)g(on)f(zero)328 1832 y(are)j(instructions)j(whic)o(h)e(are)f
(pro)q(duced)h(as)g(follo)o(ws)g(|)328 1878 y FF(neg)19
b Fm(r)424 1882 y Fh(sr)q(c)470 1878 y FF(,)p Fm(r)507
1882 y Fh(dst)564 1878 y FD(is)14 b(pro)q(duced)g(b)o(y)g
FF(sub)k Fm(r)919 1882 y Fh(z)937 1878 y FF(,)p Fm(r)974
1882 y Fh(sr)q(c)1020 1878 y FF(,)p Fm(r)1057 1882 y
Fh(dst)1101 1878 y FD(,)13 b(and)328 1924 y FF(bez)19
b Fm(r)424 1928 y Fh(sr)q(c)470 1924 y FF(,)p FE(lab)n(el)c
FD(is)e(pro)q(duced)i(b)o(y)e FF(beq)19 b Fm(r)934 1928
y Fh(z)952 1924 y FF(,)p Fm(r)989 1928 y Fh(sr)q(c)1034
1924 y FF(,)p FE(lab)n(el)686 2040 y FN(Figure)14 b(5.1:)j(Op)q(co)q
(de)e(formats)p 224 2120 577 2 v 335 2280 a FF(TYPE)j(TagType)e(=)k
(\(literal,)o(re)o(gis)o(ter)o(,a)o(ddr)o(es)o(s\);)433
2325 y(Symbolic)o(Val)o(ueD)o(es)o(cri)o(pt)o(or)c(=)k(RECORD)511
2371 y(CASE)e(tag)h(:)g(TagType)e(OF)511 2416 y(|)i(literal)37
b(:)19 b(litW)f(:)h(WORD;)511 2462 y(|)g(register)e(:)i(vReg)f(:)h
(VRegister;)511 2508 y(|)g(address)37 b(:)19 b(idnt)f(:)h(HashBucket)o
(Typ)o(e;)766 2553 y(ofst)f(:)h(INTEGER;)766 2599 y(iReg)f(:)h
(VRegister;)511 2645 y(END;)f(\(*)h(case)f(*\))472 2690
y(END;)p eop
%%Page: 131 137
131 136 bop 224 274 a FL(5.1.)31 b(CODE)14 b(SELECTION)h(F)o(OR)f(A)g
(LO)o(AD-STORE)f(AR)o(CHITECTURE)104 b FN(131)224 390
y(W)m(e)14 b(also)f(de\014ne)i(an)f(arra)o(y)g(of)f(elemen)o(ts)h(of)g
(the)g(descriptor)h(t)o(yp)q(e)g(whic)o(h)f(will)e(act)j(as)f(the)224
440 y(shado)o(w)g(stac)o(k,)g(and)g(will)e(b)q(e)j(the)f(main)e(data)h
(structure)j(of)e(the)g(automaton.)295 521 y FF(VAR)38
b(shadow)18 b(:)h(ARRAY)f(ArrayInd)o(ex)e(OF)j(SymbolicVa)o(lue)o(De)o
(scr)o(ip)o(tor)o(;)393 567 y(tos)78 b(:)19 b(ArrayInde)o(x;)224
650 y FN(It)f(is)e(assumed)h(that)g(there)i(is)d(a)h(sp)q(ecial)h(v)n
(alue)e(of)g(the)i FK(HashBucketT)m(yp)n(e)j FN(t)o(yp)q(e)c(whic)o(h)
224 700 y(denotes)h(no)f(iden)o(ti\014er.)27 b(W)m(e)16
b(will)g(call)g(this)h(distinguished)f(v)n(alue)g FK(idNil)t
FN(.)26 b(Eac)o(h)18 b(of)e(the)224 749 y(other)e(\014elds)f(of)g(the)g
(sym)o(b)q(olic)e(address)j(b)q(elong)f(to)g(a)f(t)o(yp)q(e)i(whic)o(h)
f(already)f(has)h(a)g(distin-)224 799 y(guished)g(v)n(alue.)k(The)12
b(constan)o(t)h(zero)g(denotes)h(no)e(o\013set,)h(while)f(the)h
(register)g FM(r)1498 805 y FB(z)1529 799 y FN(denotes)224
849 y(no)h(indexing)436 834 y Fz(2)287 899 y FN(W)m(e)c(will)f(assume)i
(that)f(there)i(are)g(three)g(sp)q(ecial)f(dedicated)g(registers)i
(whic)o(h)d(simplify)224 949 y(v)n(ariable)k(addressing.)20
b(The)15 b(frame)e(p)q(oin)o(ter)i(register)g FM(r)1116
955 y FB(f)s(p)1169 949 y FN(p)q(oin)o(ts)f(to)h(the)g(curren)o(t)h
(frame)224 999 y(of)k(the)g(run)o(time)f(stac)o(k.)36
b(Th)o(us)20 b(the)h(v)n(ariable)d(at)i(o\013set)h(16)e(in)h(the)g
(curren)o(t)h(run)o(time)224 1048 y(stac)o(k)d(frame)e(w)o(ould)g(b)q
(e)h(represen)o(ted)j(as)d(a)g(sym)o(b)q(olic)e(address)k(b)o(y)d(the)i
(ordered)g(triple)224 1098 y(\()p FK(idNil)p FN(,16,)p
FM(r)414 1104 y FB(f)s(p)451 1098 y FN(\).)287 1148 y(The)g(second)h
(sp)q(ecial)f(register)h(is)f(the)h(stac)o(k)f(p)q(oin)o(ter)g
(register)i FM(r)1356 1154 y FB(sp)1390 1148 y FN(.)30
b(This)18 b(register)224 1198 y(p)q(oin)o(ts)10 b(to)g(the)g(top)g(of)f
(the)h(run)o(time)f(stac)o(k,)i(and)e(is)h(used)h(for)e(indexing)g(in)o
(to)g(the)i(parameter)224 1248 y(assem)o(bly)16 b(area)i(\(and)f(p)q
(ossibly)f(also)h(in)o(to)f(the)i(rest)g(of)f(the)g(stac)o(k)h(frame)e
(if)g(the)i(frame)224 1297 y(size)d(is)f(\014xed\).)287
1347 y(The)19 b(third)g(sp)q(ecial)g(register)h(is)f(the)h(global)d(p)q
(oin)o(ter)i(register)h FM(r)1350 1353 y FB(g)q(p)1386
1347 y FN(.)33 b(This)19 b(register)224 1397 y(p)q(oin)o(ts)c(to)g(the)
h(global)d(area)j(of)e(memory)m(.)19 b(In)c(general,)g(the)g(o\013sets)
i(of)d(named)g(v)n(ariables)224 1447 y(relativ)o(e)f(from)d(this)j(p)q
(oin)o(ter)g(are)f(kno)o(wn)g(only)g(at)g(link)g(time.)k(As)d(an)f
(example,)f(the)i(third)224 1497 y(elemen)o(t)j(of)g(a)g(c)o(haracter)h
(arra)o(y)f(named)f FK(str)20 b FN(w)o(ould)c(b)q(e)g(denoted)i(sym)o
(b)q(olically)13 b(b)o(y)j(the)224 1546 y(triple)e(\()p
FK(str)p FN(,2,)p FM(r)464 1552 y FB(g)q(p)499 1546 y
FN(\).)287 1596 y(It)f(should)f(b)q(e)h(noted)h(that)e(in)h(t)o(ypical)
f FK(RISC)19 b FN(arc)o(hitectures)c(the)e(instruction)g(format)224
1646 y(places)f(a)f(restriction)h(on)f(the)h(p)q(ossible)f(o\013sets)h
(whic)o(h)f(ma)o(y)f(b)q(e)h(enco)q(ded.)19 b(It)11 b(ma)o(y)e(th)o(us)
j(b)q(e)224 1696 y(necessary)h(to)d(c)o(hange)g(the)h(v)n(alue)f(of)f
(the)i(global)e(p)q(oin)o(ter)h(when)h(executing)g(di\013eren)o(t)g
(parts)224 1746 y(of)k(the)h(program,)d(so)i(that)g(lo)q(cal)f(static)i
(data)e(ma)o(y)f(b)q(e)j(accessed.)24 b(F)m(or)15 b(the)g(purp)q(oses)i
(of)224 1796 y(the)d(examples)e(treated)i(here,)g(w)o(e)f(shall)f
(assume)h(that)g(there)h(is)f(no)f(limit)e(on)j(the)h(allo)o(w)o(ed)224
1845 y(o\013sets,)19 b(and)d(that)h(it)f(is)g(not)h(necessary)i(to)d
(indicate)h(indexing)f(b)o(y)g(the)h(global)e(p)q(oin)o(ter)224
1895 y(explicitly)m(.)28 b(The)18 b(app)q(earance)h(of)e(a)g(sym)o(b)q
(olic)f(name)g(will)g(indicate)i(to)f(the)i(assem)o(bler)224
1945 y(that)14 b(the)h(global)d(p)q(oin)o(ter)i(v)n(alue)f(m)o(ust)g(b)
q(e)i(included)f(in)f(the)i(\014nal)e(ob)r(ject)i(co)q(de.)224
2060 y FH(5.1.2)56 b(Using)18 b(the)g(shado)n(w)j(stac)n(k)224
2137 y FN(As)15 b(a)e(\014rst)i(example,)d(w)o(e)i(consider)h(the)g
(follo)o(wing)c(simple)h(pro)q(cedure)k(b)q(o)q(dy)m(.)295
2218 y FF(PROCEDURE)g(DoAssign\(cu)o(rr)o(ent)g(:)j(CARDINAL\);)295
2263 y(BEGIN)335 2309 y(total)e(:=)i(total)f(+)h(current;)295
2355 y(END)g(DoAssign;)224 2438 y FN(In)d(this)g(example)f
FK(total)k FN(is)d(some)f(statically)g(allo)q(cated)g(v)n(ariable)g
(kno)o(wn)g(to)h(the)g(link)o(er.)224 2488 y(The)f(parameter)e
FK(curr)n(ent)18 b FN(is)13 b(in)h(the)g(curren)o(t)i(stac)o(k)e(frame)
e(at)i(o\013set)h(8.)287 2537 y(The)f(resulting)g FK(DCo)n(de)j
FN(sequence)f(is)e(|)p 224 2570 577 2 v 271 2597 a Fy(2)288
2609 y Fx(Note)c(that)g(the)f(use)h(of)h(a)f Fu(physic)n(al,)j(machine)
i Fx(register)8 b(with)j(zero)e(con)o(ten)o(ts)g(is)h(a)h(con)o(v)o
(enienc)o(e)d(only)m(.)224 2648 y(In)j(the)f(case)h(of)f(mac)o(hines)f
(suc)o(h)h(as)h(the)g Fu(iapx86)t Fx(,)h(whic)o(h)f(do)q(es)f(not)g
(implemen)o(t)f(suc)o(h)h(a)h(register,)e(w)o(e)i(can)224
2688 y(simply)f(in)o(v)o(en)o(t)g(a)i(sp)q(ecial)d(v)n(alue)i(of)g(the)
g(virtual)e(register)h(t)o(yp)q(e)g(meaning)g Fu(no)j(r)n(e)n(gister)p
Fx(.)p eop
%%Page: 132 138
132 137 bop 224 274 a FN(132)371 b FL(CHAPTER)14 b(5.)31
b(INTERPRETIVE)14 b(CODE)g(SELECTION)320 381 y FF(pshAdr)j(total)285
b FD(;)13 b FE(push)f(addr)n(ess)g(of)h(total)320 427
y FF(derefW)402 b FD(;)13 b FE(get)g(wor)n(d)g(p)n(ointe)n(d)f(to)h(by)
g(TOS)320 472 y FF(pshFP)18 b(8)384 b FD(;)13 b FE(o\013set)f(8)h(in)g
(curr)n(ent)f(fr)n(ame)320 518 y FF(derefW)402 b FD(;)13
b FE(get)g(wor)n(d)g(p)n(ointe)n(d)f(to)h(by)g(TOS)320
564 y FF(add)462 b FD(;)13 b FE(do)g(the)g(add)320 609
y FF(pshAdr)k(total)285 b FD(;)13 b FE(addr)n(ess)f(of)h(total)f(again)
320 655 y FF(assignW)382 b FD(;)13 b FE(do)g(assignment)320
701 y FF(exit)442 b FD(;)13 b FE(do)g(r)n(eturn)320 746
y FF(endp)442 b FD(;)13 b FE(end)f(marker)224 820 y FN(W)m(e)17
b(will)e(follo)o(w)g(the)j(progress)g(of)f(the)g(shado)o(w)g(stac)o(k,)
h(step)f(b)o(y)g(step,)h(as)f(eac)o(h)h FK(DCo)n(de)224
870 y FN(instruction)d(is)e(issued.)287 919 y(A)o(t)h(\014rst,)h(the)g
(stac)o(k)f(is)g(empt)o(y)m(.)k(After)d(the)g(\014rst)g(instruction)f
(the)h(stac)o(k)g(has)f(exactly)224 969 y(one)h(elemen)o(t.)i(No)d
(output)g(is)g(pro)q(duced.)p 583 996 427 4 v 583 1041
4 45 v 1006 1041 V 583 1044 427 4 v 1006 1021 45 2 v
1006 1020 a FC(\033)628 1029 y FD(adr:)k(\()p FE(total)p
FD(,0,)p Fm(r)861 1033 y Fy(0)876 1029 y FD(\))175 b(top-of-stac)o(k)
287 1091 y FN(The)16 b(second)g FK(DCo)n(de)j FN(asks)d(for)f(the)h
(top-of-stac)o(k)f(to)h(b)q(e)g(dereferenced.)26 b(The)16
b(result)224 1141 y(of)g(this)g(op)q(eration)h(is)f(to)g(replace)h(the)
g(address.)27 b(In)16 b(load-store)g(arc)o(hitectures)j(there)e(is)224
1191 y(no)h(p)q(oin)o(t)g(in)f(dela)o(ying)g(output)h(emission)f(once)i
(a)f(dereference)j(is)c(encoun)o(tered.)33 b(The)224
1241 y(reason)18 b(is)f(that)g(these)h(mac)o(hines)f(ha)o(v)o(e)f(no)h
(instructions)h(whic)o(h)f(op)q(erate)h(on)f(memory)m(.)224
1290 y(Th)o(us)g FK(every)h(p)n(ossible)h FN(instruction)f(whic)o(h)e
(uses)i(this)f(v)n(alue)f(will)f(require)j(the)f(v)n(alue)f(to)224
1340 y(b)q(e)e(in)f(a)g(register.)18 b(Therefore)d(it)e(ma)o(y)e(as)i
(w)o(ell)f(b)q(e)i(fetc)o(hed)g(immediately)l(.)h(In)e(the)h(case)g(of)
224 1390 y(mac)o(hines)e(suc)o(h)h(as)g(the)g FK(iapx86)p
FN(,)h(in)e(con)o(trast,)h(w)o(e)g(w)o(ould)f(dela)o(y)g(pro)q(ducing)g
(an)o(y)h(output,)224 1440 y(hoping)19 b(that)g(the)h(load)f(op)q
(eration)g(could)g(b)q(e)h(folded)f(in)o(to)f(an)h(address)i(mo)q(de)d
(of)h(the)224 1490 y(referencing)d(instruction.)287 1540
y(A)o(t)f(this)g(p)q(oin)o(t)g(it)g(is)g(necessary)i(to)e(decide)h(on)f
(a)g(destination)g(register)i(for)d(the)i(load)224 1589
y(instruction)d(whic)o(h)f(is)h(to)f(b)q(e)h(pro)q(duced.)19
b(In)12 b(the)h(case)h(of)d(co)q(de)j(selectors)g(whic)o(h)e(pro)q
(duce)224 1639 y(real)18 b(assem)o(bly)e(language)g(\(rather)j(than)e
FK(V)l(AL)p FN(\))g(it)g(w)o(ould)f(b)q(e)i(necessary)i(to)d(request)i
(a)224 1689 y(register)f(allo)q(cator)e(mo)q(dule)f(to)h(supply)g(a)h
(register.)27 b(Suc)o(h)17 b(an)f(approac)o(h)g(is)h(called)f
FK(on-)224 1739 y(the-\015y)24 b FN(register)c(allo)q(cation.)33
b(The)20 b(limitations)c(of)j(this)h(approac)o(h)f(are)h(explained)f
(in)224 1789 y(c)o(hapter)g(10.)28 b(In)17 b(an)o(y)g(case,)i(w)o(e)e
(shall)g(assume)g(the)h(existence)h(of)e(a)g(register)h(allo)q(cator)
224 1838 y(whic)o(h)c(supplies)g(a)g(unique)g(virtual)f(register)i(dra)
o(wn)f(from)e(the)i(e\013ectiv)o(ely)h(in\014nite)f(set.)287
1888 y(Supp)q(ose)g(the)h(newly)f(allo)q(cated)f(virtual)g(register)i
(is)f(called)f FM(v)1278 1894 y Fz(1)1297 1888 y FN(.)18
b(A)c FK(V)l(AL)f FN(instruction)224 1938 y(\(lw\))g(to)g(load)f(the)h
(w)o(ord)g(at)g(address)h FK(total)i FN(to)d(virtual)f(register)i(1,)f
FG(lw)21 b(total,)p FM(v)1510 1944 y Fz(1)1527 1938 y
FN(,)13 b(is)g(no)o(w)224 1988 y(emitted.)18 b(and)13
b(the)i(shado)o(w)f(stac)o(k)g(is)g(|)p 583 2007 427
4 v 583 2052 4 45 v 1006 2052 V 583 2055 427 4 v 1006
2032 45 2 v 1006 2031 a FC(\033)628 2040 y FD(reg:)k
Fm(v)727 2044 y Fy(1)1066 2040 y FD(top-of-stac)o(k)287
2102 y FN(The)11 b(next)g(t)o(w)o(o)f FK(DCo)n(de)k FN(instructions)d
(rep)q(eat)h(the)f(pro)q(cess)h(except)g(that)f(the)g(sym)o(b)q(olic)
224 2152 y(address)20 b(refers)f(to)f(the)g(frame)f(p)q(oin)o(ter)h
(register.)31 b(The)19 b(instruction)f FG(lw)j(8\()p
FM(r)1499 2158 y FB(f)s(p)1537 2152 y FG(\),)p FM(v)1601
2158 y Fz(2)1637 2152 y FN(is)224 2201 y(emitted,)13
b(and)h(the)g(shado)o(w)g(stac)o(k)g(is)g(|)p 583 2235
427 4 v 583 2325 4 90 v 1006 2325 V 583 2328 427 4 v
1006 2259 45 2 v 1006 2258 a FC(\033)631 2313 y FD(reg:)k
Fm(v)730 2317 y Fy(1)1066 2265 y FD(top-of-stac)o(k)628
2268 y(reg:)g Fm(v)727 2272 y Fy(2)p 587 2280 420 2 v
287 2374 a FN(The)g FG(add)f FK(DCo)n(de)k FN(is)c(next.)30
b(The)18 b(op)q(erands)g(for)f(the)h(instrucion)g(are)g(the)g(t)o(w)o
(o)f(top)224 2424 y(elemen)o(ts)12 b(on)f(the)i(stac)o(k,)f(registers)h
FM(v)815 2430 y Fz(1)834 2424 y FN(,)p FM(v)866 2430
y Fz(2)884 2424 y FN(.)k(A)12 b(further)h(new)f(register)h(is)f
(obtained,)f(and)h(an)224 2474 y(add)h FK(V)l(AL)f FN(instruction)h
(emitted.)k(The)c(instruction)h(is)e FG(add)21 b FM(v)1218
2480 y Fz(1)1237 2474 y FG(,)p FM(v)1279 2480 y Fz(2)1298
2474 y FG(,)p FM(v)1340 2480 y Fz(3)1358 2474 y FN(,)13
b(and)f(the)i(shado)o(w)224 2524 y(stac)o(k)h(is)e(then)i(|)p
583 2543 427 4 v 583 2588 4 45 v 1006 2588 V 583 2591
427 4 v 1006 2568 45 2 v 1006 2567 a FC(\033)628 2576
y FD(reg:)j Fm(v)727 2580 y Fy(3)1066 2579 y FD(top-of-stac)o(k)287
2638 y FN(The)c(next)g(instruction)g(pushes)h(the)f(sym)o(b)q(olic)e
(address)j(of)e FK(total)k FN(again,)12 b(so)i(that)g(the)224
2688 y(shado)o(w)g(stac)o(k)g(b)q(ecomes)h(|)p eop
%%Page: 133 139
133 138 bop 224 274 a FL(5.1.)31 b(CODE)14 b(SELECTION)h(F)o(OR)f(A)g
(LO)o(AD-STORE)f(AR)o(CHITECTURE)104 b FN(133)p 583 370
427 4 v 583 460 4 90 v 1006 460 V 583 463 427 4 v 1006
395 45 2 v 1006 394 a FC(\033)631 403 y FD(adr:)18 b(\()p
FE(total)p FD(,0,)p Fm(r)864 407 y Fy(0)879 403 y FD(\))1066
400 y(top-of-stac)o(k)628 448 y(reg:)g Fm(v)727 452 y
Fy(3)p 587 416 420 2 v 287 510 a FN(The)12 b(assign)g(instruction)h
(causes)h(the)e(emission)f(of)h(a)g(store)h(w)o(ord)f(\(sw\))h
FK(V)l(AL)f FN(instruc-)224 560 y(tion.)24 b(This)16
b(instruction,)h FG(sw)k(v3,total)n FN(,)16 b(stores)i(the)e(w)o(ord)g
(in)g(virtual)f(register)i(3)f(in)o(to)224 609 y(the)f(memory)c(at)j
(address)h FK(total)t FN(.)j(The)c(assign)g(instruction)g(p)q(ops)g
(the)g(t)o(w)o(o)g(top)f(elemen)o(ts)224 659 y(from)g(the)h(stac)o(k)g
(lea)o(ving)f(the)i(stac)o(k)f(empt)o(y)f(once)h(again.)287
709 y(The)f(\014nal)e(instruction,)i(causes)h(con)o(trol)e(to)g(pro)q
(ceed)i(to)f(the)g(pro)q(cedure)h(exit)e(pream-)224 759
y(ble,)i(whic)o(h)g(unlinks)f(the)h(run)o(time)f(stac)o(k)i(frame)d
(and)i(executes)i(a)e(return)h(instruction.)287 809 y(The)f(complete)f
(output)h(of)g(the)g(b)q(o)q(dy)g(of)f(this)h(pro)q(cedure)i(is)e(th)o
(us)g(|)295 895 y FF(lw)39 b(total,v1)295 941 y(lw)g(8\(fp\),v2)295
986 y(add)19 b(v1,v2,v3)193 b(;)12 b FE(destination)e(is)j(v3)295
1032 y FF(sw)39 b(v3,total)193 b(;)12 b FE(sour)n(c)n(e)g(is)h(on)g
(left)224 1185 y FH(5.1.3)56 b(In)n(ternal)18 b(structure)g(of)h(the)f
(shado)n(w)i(stac)n(k)f(automaton)224 1262 y FN(The)c(shado)o(w)g(stac)
o(k)g(automaton)d(consists)j(of)f(a)h(set)g(of)f(pro)q(cedures,)i(and)f
(a)f(small)e(n)o(um-)224 1312 y(b)q(er)17 b(of)e(utilities.)22
b(The)16 b(utilities)f(do)g(suc)o(h)i(things)e(as)h(allo)q(cating)e
(virtual)g(registers,)j(and)224 1362 y(initializing)10
b(descriptors.)18 b(Eac)o(h)13 b(of)e(the)h(pro)q(cedures)i
FK(Init)t FN(?)p FK(Element)t FN(,)d(where)i(?)k(is)12
b FK(R)n(e)n(g,Lit)224 1411 y FN(or)17 b FK(A)n(dr)p
FN(,)g(tak)o(es)g(as)g(a)g(\014rst)g(parameter)g(the)g(stac)o(k)g
(index)g(at)g(whic)o(h)g(the)g(v)n(alue)f(is)h(to)g(b)q(e)224
1461 y(constructed.)j(The)12 b(remaining)d(parameters)i(are)h(assigned)
g(to)f(the)h(\014elds)g(of)f(the)h(v)n(alue,)f(in)224
1511 y(order.)20 b(W)m(e)14 b(shall)g(also)f(assume)h(the)h(existence)h
(of)e(pro)q(cedures)i FK(EmitRR)o(tR,)g(EmitRItR,)224
1561 y(EmitR)o(tR,)g(EmitR)o(tM)7 b FN(,)15 b(and)g(so)g(on.)22
b(These)17 b(pro)q(cedures)g(are)f(resp)q(onsible)g(for)f(emitting)224
1611 y(an)f(instruction)g(in)g(the)g(sp)q(eci\014ed)i(format)c
FK(RR)p Ft(!)p FK(R)p FN(,)h FK(RI)p Ft(!)p FK(R)p FN(,)h
FK(R)p Ft(!)p FK(R)p FN(,)f FK(R)p Ft(!)p FK(M)p FN(,)h(etcetera.)287
1661 y(There)20 b(is)f(one)h(pro)q(cedure)h(for)e(eac)o(h)h
(instruction)f(of)g(the)h FK(IR)r FN(.)f(Eac)o(h)g(pro)q(cedure)i(is)
224 1710 y(resp)q(onsible)c(for)e(up)q(dating)f(the)i(state)g(of)f(the)
h(automaton,)d(and)i(for)g(determining)f(if)h(an)224
1760 y(instruction)e(needs)g(to)f(b)q(e)h(emitted.)k(W)m(e)12
b(shall)f(consider)i(four)f(or)g(\014v)o(e)h(t)o(ypical)e(cases,)i
(still)224 1810 y(dealing)g(only)g(with)h(our)g(simple)e(load-store)i
(mac)o(hine.)224 1919 y FO(The)i(push)e(instruction)o(s)224
1995 y FN(The)j(push)h(instructions)f(are)g(relativ)o(ely)f(simple,)f
(and)i(nev)o(er)g(cause)h(an)e(instruction)h(to)224 2045
y(b)q(e)e(emitted.)k(They)c(all)e(incremen)o(t)h(the)h(top)f(of)g(the)h
(shado)o(w)f(stac)o(k)g(b)o(y)h(one,)f(and)g(create)224
2095 y(a)g(new)f(sym)o(b)q(olic)f(v)n(alue)h(descriptor)i(for)e(the)h
(new)g(top-of-stac)o(k)f(elemen)o(t.)k(F)m(or)c(example,)224
2145 y(the)i(pro)q(cedure)h(for)d(pushing)h(a)g(literal)f(v)n(alue)g
(migh)o(t)f(b)q(e)i(as)g(follo)o(ws.)295 2231 y FF(PROCEDURE)i
(PshLit\(val)g(:)j(WORD\);)295 2277 y(BEGIN)335 2322
y(INC\(tos\))o(;)335 2368 y(InitLite)o(ral)o(El)o(em\()o(tos)o(,v)o
(al\))o(;)295 2414 y(END)g(PshLit;)224 2561 y FO(The)d(deref)e
(instruction)o(s)224 2638 y FN(F)m(or)g(these)h(instructions)g(and)f
(this)g(arc)o(hitecture,)i(as)e(explained)f(earlier,)h(an)g
(instruction)224 2688 y(is)h(alw)o(a)o(ys)f(pro)q(duced.)22
b(The)15 b(mac)o(hine)f(instructions,)h(and)g(the)g FK(DCo)n(de)j
FN(instructions)e(are)p eop
%%Page: 134 140
134 139 bop 224 274 a FN(134)371 b FL(CHAPTER)14 b(5.)31
b(INTERPRETIVE)14 b(CODE)g(SELECTION)224 390 y FN(assumed)e(to)g(b)q
(elong)g(to)g(separate)h(en)o(umerated)f(t)o(yp)q(es.)19
b(Assuming)11 b(the)h(existence)i(of)e(the)224 440 y(ob)o(vious)i(pro)q
(cedures,)h(the)g(co)q(de)f(could)g(b)q(e)h(as)f(follo)o(ws.)295
537 y FF(PROCEDURE)i(Deref\(elem)g(:)j(Object\);)e(\(*)i(byte,word)o
(,et)o(c.)d(*\))335 582 y(VAR)i(ins)g(:)i(OpCode;)413
628 y(new)e(:)i(VirtualRe)o(g;)295 674 y(BEGIN)335 719
y(ins)e(:=)h(LoadMap[e)o(lem)o(];)d(\(*)j(maps)f(element)f(type)h(to)h
(instr.)e(*\))335 765 y(NewVReg\()o(new)o(\);)173 b(\(*)19
b(gets)f(a)h(newly)f(allocated)e(vreg)i(*\))335 811 y(MakeAddr)o(ess)o
(\(t)o(os\))o(;)95 b(\(*)19 b(make)f(tos)g(into)g(adr)h(if)g(needed)e
(*\))335 856 y(WITH)h(shadow[t)o(os])e(DO)j(EmitMtR\(i)o(ns,)o(id)o
(nt,)o(of)o(st,)o(vRe)o(g,)o(new)o(\))d(END;)335 902
y(InitRegi)o(ste)o(rE)o(lem)o(\(to)o(s,)o(new)o(\);)295
948 y(END)j(Deref;)224 1045 y FN(In)f(this)g(pro)q(cedure,)i
FK(EmitMtR)f FN(is)e(a)h(pro)q(cedure)h(whic)o(h)f(emits)e(an)i
(instruction)g(in)f(the)224 1094 y FK(M)p Ft(!)p FK(R)d
FN(format.)287 1146 y(Up)f(un)o(til)f(no)o(w)g(w)o(e)h(ha)o(v)o(e)g
(assumed)g(the)g(existence)i(of)d(a)h(single)g(data)f(t)o(yp)q(e,)h
FK(wor)n(ds)p FN(.)k(In)224 1196 y(the)h(case)g(of)e(the)h(load-store)g
(mac)o(hines,)f(the)i(complexit)o(y)d(added)i(b)o(y)g(the)g(existence)i
(of)224 1246 y(other)d(data)e(t)o(yp)q(es)i(in)e(memory)e(is)i(v)o(ery)
h(sligh)o(t.)20 b(All)14 b(ob)r(jects)i(in)e(registers)i(are)f(of)f
(32-bit)224 1296 y(w)o(ord)d(size,)h(and)f(all)e(op)q(erations)j(on)e
(registers)j(op)q(erate)f(on)e(w)o(ords.)18 b(Th)o(us)11
b(smaller)e(ob)r(jects)224 1346 y(are)j(widened)g(to)f(w)o(ord)h(size)g
(when)g(they)g(are)g(loaded,)f(and)g(narro)o(w)o(ed)h(to)f(their)h
(target)g(size)224 1395 y(when)i(they)f(are)g(stored.)18
b(In)13 b(the)g(ab)q(o)o(v)o(e)f(pro)q(cedure)j(this)e(additional)d
(factor)j(is)f(apparen)o(t.)224 1445 y(The)j(lo)q(okup)e(table)h
FK(L)n(o)n(adMap)684 1541 y(L)n(o)n(adMap)h FN(:)c FK(Obje)n(ct)g
Ft(!)g FK(OpCo)n(de)224 1636 y FN(maps)g(the)i(primitiv)o(e)d(elemen)o
(t)i(t)o(yp)q(es)h(to)g(mac)o(hine)e(instructions)i(so)f(that)g(the)h
(v)n(alue)f(t)o(yp)q(e)224 1686 y FK(unsigne)n(d)k(byte)i
FN(maps)13 b(in)o(to)g(a)h FK(lo)n(ad)h(byte)h(unsigne)n(d)j
FN(\\)p FG(lbu)p FN(")13 b(instruction,)h(while)g(the)h(t)o(yp)q(e)224
1736 y(v)n(alue)f FK(wor)n(d)j FN(maps)c(in)o(to)g(\\)p
FG(lw)p FN(",)f(and)i(so)g(on.)287 1788 y(The)h(pro)q(cedure)h
FK(MakeA)n(ddr)n(ess)j FN(requires)c(some)f(discussion,)h(as)g(its)f
(op)q(eration)h(is)f(at)224 1838 y(the)20 b(heart)g(of)f(the)h(metho)q
(d.)33 b(A)o(t)20 b(the)g(time)e(that)h FK(Der)n(ef)28
b FN(is)19 b(called,)h(the)g(top-of-stac)o(k)224 1888
y(elemen)o(t)e(is)h(not)f(alw)o(a)o(ys)g(a)g(sym)o(b)q(olic)e(address.)
34 b(It)18 b(migh)o(t)f(b)q(e)i(a)f(register)h(v)n(alue,)g(as)g(a)224
1937 y(result)e(of)f(loading)e(a)i(p)q(oin)o(ter)g(v)n(alue,)f(or)h(as)
h(a)e(result)i(of)f(p)q(oin)o(ter)g(arithmetic.)23 b(In)16
b(some)224 1987 y(source)21 b(languages)e(it)g(migh)o(t)e(ev)o(en)j(b)q
(e)g(a)f(literal)g(v)n(alue.)34 b(The)20 b(task)f(of)g
FK(MakeA)n(ddr)n(ess)224 2037 y FN(it)f(to)g(transform)f(this)h(elemen)
o(t)f(in)o(to)g(a)h(sym)o(b)q(olic)e(address,)k(as)e(required)h(b)o(y)f
(the)g(load)224 2087 y(instruction.)g(The)11 b(co)q(de)h(p)q(erforms)e
(a)h(simple)e(case)j(analysis,)e(and)h(is)g(sho)o(wn)g(in)f(\014gure)i
(5.2.)224 2256 y FO(The)k(assign)e(instruction)o(s)224
2337 y FN(The)e FK(Assign)j FN(instructions)d(are)f(similar)e(in)i
(general)h(terms)f(to)g(the)h FK(Der)n(ef)19 b FN(group.)e(F)m(or)11
b(our)224 2387 y(mac)o(hine,)g(the)i(top-of-stac)o(k)e(elemen)o(t)h(m)o
(ust)f(b)q(e)i(a)f(memory)d(address,)14 b(while)d(the)i(elemen)o(t)224
2436 y(b)q(elo)o(w)h(that)g(m)o(ust)f(b)q(e)h(loaded)g(in)f(a)h
(register.)287 2488 y(A)o(t)9 b(the)i(time)d(that)i FK(Assign)i
FN(is)e(called,)g(the)g(tos)g(is)f(not)h(necessarily)g(a)g(sym)o(b)q
(olic)d(address,)224 2538 y(and)17 b(the)h(stac)o(k)f(elemen)o(t)g
(whic)o(h)g(denotes)h(the)g(righ)o(t)e(hand)h(side)g(of)g(the)h
(assignmen)o(t)d(is)224 2588 y(not)f(necessarily)g(loaded)f(in)o(to)g
(a)g(register.)19 b(The)14 b(righ)o(t-hand)e(v)n(alue)h(migh)o(t,)e
(for)i(example,)224 2638 y(b)q(e)i(the)f(address)h(of)e(some)g(ob)r
(ject)i(whic)o(h)e(is)h(to)f(b)q(e)i(assigned)f(to)f(some)g(reference)j
(datum.)224 2688 y(The)f(co)q(de,)f(b)o(y)g(analogy)e(with)i
FK(Der)n(ef)22 b FN(b)q(ecomes)14 b(|)p eop
%%Page: 135 141
135 140 bop 224 274 a FL(5.1.)31 b(CODE)14 b(SELECTION)h(F)o(OR)f(A)g
(LO)o(AD-STORE)f(AR)o(CHITECTURE)104 b FN(135)p 270 392
1350 2 v 269 438 2 46 v 295 424 a FF(PROCEDURE)16 b(MakeAddress)o(\(l)o
(ev)g(:)j(StackIndex\))o(;)p 1619 438 V 269 483 V 335
470 a(\(*)f(post)g(:)i(shadow[le)o(v])c(is)j(a)g(symbolic)e(address)g
(*\))p 1619 483 V 269 529 V 295 515 a(BEGIN)p 1619 529
V 269 575 V 335 561 a(IF)h(shadow[lev)o(].t)o(ag)e(<>)j(address)e(THEN)
p 1619 575 V 269 620 V 374 607 a(WITH)h(shadow[le)o(v])e(DO)p
1619 620 V 269 666 V 413 652 a(IF)j(tag)f(=)h(register)e(THEN)h(\(*)h
(overwrite)d(as)j(adr)f(*\))p 1619 666 V 269 712 V 452
698 a(InitAddres)o(sEl)o(em)o(\(le)o(v,)o(idN)o(il,)o(0,)o(reg)o(Va)o
(l\);)p 1619 712 V 269 757 V 413 744 a(ELSE)g(\(*)h(tag)f(=)i(literal;)
c(so)j(overwrite)d(as)j(adr)f(*\))p 1619 757 V 269 803
V 452 789 a(InitAddres)o(sEl)o(em)o(\(le)o(v,)o(idN)o(il,)o(li)o(tW,)o
(no)o(Reg)o(\);)p 1619 803 V 269 849 V 413 835 a(END;)p
1619 849 V 269 894 V 374 881 a(END;)g(\(*)h(with)f(*\))p
1619 894 V 269 940 V 335 926 a(END;)g(\(*)g(if)h(*\))p
1619 940 V 269 986 V 295 972 a(END)g(MakeAddre)o(ss)o(;)p
1619 986 V 270 987 1350 2 v 516 1103 a FN(Figure)14 b(5.2:)j(The)e
FK(RISC)20 b FN(v)o(ersion)14 b(of)f FK(MakeA)n(ddr)n(ess)295
1220 y FF(PROCEDURE)j(Assign\(elem)g(:)j(ValueType\))o(;)d(\(*)j
(byte,word,)o(etc)o(.)d(*\))335 1266 y(VAR)i(ins)g(:)i(OpCode;)295
1312 y(BEGIN)335 1357 y(ins)e(:=)h(StoreMap[)o(ele)o(m])o(;)e(\(*)h
(maps)h(element)d(type)j(to)f(instr.)g(*\))335 1403 y(MakeAddr)o(ess)o
(\(t)o(os\))o(;)115 b(\(*)18 b(make)h(tos)f(into)g(adr)h(if)f(needed)g
(*\))335 1449 y(MakeRegi)o(ste)o(r\()o(tos)e(-)j(1\);)g(\(*)f(load)h
(next)f(element)f(into)h(reg.)g(*\))335 1494 y(WITH)g(shadow[t)o(os])e
(DO)374 1540 y(EmitRtM\(i)o(ns)o(,sh)o(ado)o(w[)o(tos)g(-)j(1].vReg,id)
o(nt)o(,of)o(st,)o(iR)o(eg\))o(;)335 1586 y(END;)335
1631 y(DEC\(tos,)o(2\);)232 b(\(*)18 b(remove)g(two)g(top)h(stack)e
(elems)38 b(*\))295 1677 y(END)19 b(Assign;)224 1757
y FN(The)12 b(co)q(de)h(for)e(loading)f(stac)o(k)i(v)n(alues)g(in)o(to)
f(a)g(register,)i FK(MakeR)n(e)n(gister)p FN(,)e(is)h(similar)d(to)i
(that)224 1807 y(for)20 b FK(MakeA)n(ddr)n(ess)s FN(,)g(with)g(one)f
(imp)q(ortan)o(t)f(exception.)36 b FK(MakeA)n(ddr)n(ess)23
b FN(only)18 b(up)q(dates)224 1857 y(the)g(state)f(of)f(the)i(shado)o
(w)e(stac)o(k,)h FK(MakeR)n(e)n(gister)k FN(ma)o(y)15
b(additionally)f(emit)i(an)g(output)224 1907 y(instruction.)36
b(Figure)20 b(5.3)e(has)i(the)g(pro)q(cedure.)37 b(W)m(e)20
b(shall)e(assume)i(that)f(there)i(is)f(a)224 1956 y(similar)11
b(pro)q(cedure)16 b FK(MakeR)n(e)n(gOrLit)h FN(whic)o(h)c(loads)g(the)h
(stac)o(k)f(argumen)o(t)g(if)f(it)h(is)g(neither)224
2006 y(a)h(literal)f(nor)h(a)g(register.)287 2056 y(Assign)d(is)g(th)o
(us)h(an)f(un)o(usual)g(case,)h(since)g(it)f(is)g(p)q(ossible)g(that)g
(a)g(single)g FK(IR)i FN(instruction)224 2106 y(ma)o(y)e(cause)i
FK(two)i FN(mac)o(hine)c(instructions)i(to)f(b)q(e)h(emitted.)k(This)12
b(exceptional)h(case)g(arises,)224 2156 y(for)h(example,)e(whenev)o(er)
j(a)f(literal)f(is)h(assigned.)224 2262 y FO(The)i(addAdr)e
(instruction)224 2339 y FN(F)m(or)20 b(load-store)f(arc)o(hitectures)j
(with)d(a)g(\015at)h(32-bit)f(virtual)f(address)j(space)g(it)e(is)g
(not)224 2389 y(necessary)f(to)d(distinguish)f(b)q(et)o(w)o(een)j
(address)f(arithmetic)e(and)h(data)g(arithmetic,)e(since)224
2438 y(the)20 b(seman)o(tics)f(of)g(eac)o(h)h(are)f(the)h(same.)34
b(This)19 b(is)g(not)g(the)h(case)g(for)f(mac)o(hines)g(with)224
2488 y(segmen)o(ted)14 b(addressing,)g(where)i(address)f(arithmetic)d
(has)i(di\013eren)o(t)h(seman)o(tics.)287 2538 y(Nev)o(ertheless,)f(if)
d(our)h FK(IR)i FN(distinguishes)f(the)f(case)h(of)f(adding)f
(addresses)j(and)e(adding)224 2588 y(data)g(elemen)o(ts,)g(w)o(e)g(ma)o
(y)e(use)j(this)f(to)f(treat)i(some)e(sp)q(ecial)h(cases.)19
b(The)12 b FK(addA)n(dr)17 b FN(instruc-)224 2638 y(tion)g(adds)h(a)e
(n)o(umeric)h(v)n(alue)g(on)g(the)g(top-of-stac)o(k)g(to)g(an)g
(address)i(b)q(elo)o(w)e(that.)28 b(The)224 2688 y(address,)20
b(as)f(usual,)f(ma)o(y)e(or)i(ma)o(y)f(not)h(b)q(e)g(sym)o(b)q(olic.)29
b(The)19 b(pro)q(cedure)h(in)e(\014gure)g(5.4)p eop
%%Page: 136 142
136 141 bop 224 274 a FN(136)371 b FL(CHAPTER)14 b(5.)31
b(INTERPRETIVE)14 b(CODE)g(SELECTION)p 270 392 1350 2
v 269 438 2 46 v 295 424 a FF(PROCEDURE)i(MakeRegiste)o(r\()o(lev)g(:)j
(StackIndex)o(\);)p 1619 438 V 269 483 V 335 470 a(\(*)f(post)g(:)i
(shadow[le)o(v])c(is)j(loaded)e(*\))p 1619 483 V 269
529 V 335 515 a(VAR)h(new)g(:)i(VRegister)o(;)p 1619
529 V 269 575 V 295 561 a(BEGIN)p 1619 575 V 269 620
V 335 607 a(IF)e(shadow[lev)o(].t)o(ag)e(<>)j(register)e(THEN)p
1619 620 V 269 666 V 374 652 a(WITH)h(shadow[le)o(v])e(DO)p
1619 666 V 269 712 V 413 698 a(NewVReg\(n)o(ew\))o(;)173
b(\(*)19 b(get)g(a)g(new)f(reg)h(*\))p 1619 712 V 269
757 V 413 744 a(IF)g(tag)f(=)h(address)e(THEN)h(\(*)h(emit)f(load)g
(adr)h(*\))p 1619 757 V 269 803 V 452 789 a(EmitMtR\(la)o(,id)o(nt)o
(,of)o(st)o(,iR)o(eg,)o(ne)o(w\);)p 1619 803 V 269 849
V 413 835 a(ELSE)f(\(*)h(tag)f(=)i(literal)c(so)j(emit)f(load)g(lit)h
(*\))p 1619 849 V 269 894 V 452 881 a(EmitItR\(li)o(,li)o(tW)o(,ne)o
(w\))o(;)p 1619 894 V 269 940 V 413 926 a(END;)p 1619
940 V 269 986 V 413 972 a(InitRegis)o(ter)o(Ele)o(m\()o(lev)o(,n)o
(ew\))o(;)p 1619 986 V 269 1031 V 374 1018 a(END;)f(\(*)h(with)f(*\))p
1619 1031 V 269 1077 V 335 1063 a(END;)g(\(*)g(if)h(*\))p
1619 1077 V 269 1123 V 295 1109 a(END)g(MakeRegis)o(te)o(r;)p
1619 1123 V 270 1124 1350 2 v 395 1240 a FN(Figure)14
b(5.3:)j(The)e(no-condition-co)q(des)f(v)o(ersion)g(of)f
FK(MakeR)n(e)n(gister)224 1369 y FN(sho)o(ws)j(ho)o(w)f(this)g(is)g
(done.)38 b(Note)16 b(that)f(in)g(sev)o(eral)g(of)g(the)h(sp)q(ecial)f
(cases)i(it)e(is)g(p)q(ossible)p 270 1468 V 269 1513
2 46 v 295 1500 a FF(PROCEDURE)h(AddAdr\(\);)p 1619 1513
V 269 1559 V 335 1545 a(VAR)i(new,)g(old)g(:)i(VRegister)o(;)p
1619 1559 V 269 1605 V 295 1591 a(BEGIN)p 1619 1605 V
269 1650 V 335 1637 a(MakeAddr)o(ess)o(\(t)o(os)c(-)k(1\);)p
1619 1650 V 269 1696 V 335 1682 a(\(*)e(now)h(try)f(to)h(fold)f(the)h
(add)f(into)g(an)h(address)e(mode)h(*\))p 1619 1696 V
269 1742 V 335 1728 a(WITH)g(shadow[t)o(os)e(-)k(1])e(DO)p
1619 1742 V 269 1787 V 374 1774 a(CASE)g(shadow[to)o(s].)o(ta)o(g)f(OF)
p 1619 1787 V 269 1833 V 374 1819 a(|)i(literal)e(:)39
b(\(*)19 b(just)f(add)g(to)h(offset)e(*\))p 1619 1833
V 269 1879 V 452 1865 a(ofst)h(:=)h(ofst)f(+)h(CAST\(INTEGE)o(R,)o(sha)
o(do)o(w[t)o(os])o(.l)o(itW)o(\);)p 1619 1879 V 269 1924
V 374 1911 a(|)g(register)d(:)k(\(*)f(fold)f(into)g(index,)f(if)i
(possible)d(*\))p 1619 1924 V 269 1970 V 452 1956 a(old)j(:=)f
(shadow[tos])o(.v)o(Reg)o(;)p 1619 1970 V 269 2016 V
452 2002 a(IF)h(iReg)f(=)h(noReg)f(THEN)g(iReg)g(:=)h(old;)p
1619 2016 V 269 2061 V 452 2048 a(ELSE)f(\(*)h(emit)f(an)h(add)f
(instruction)e(*\))p 1619 2061 V 269 2107 V 491 2093
a(NewVReg\(new)o(\);)p 1619 2107 V 269 2153 V 491 2139
a(EmitRRtR\(ad)o(d,)o(iRe)o(g,)o(old)o(,ne)o(w\))o(;)p
1619 2153 V 269 2198 V 491 2185 a(iReg)i(:=)h(new;)p
1619 2198 V 269 2244 V 452 2230 a(END;)p 1619 2244 V
269 2290 V 374 2276 a(|)g(address)e(:)i(Assert\(FAL)o(SE)o(,"b)o(ad)d
(tos)j(element"\))o(;)p 1619 2290 V 269 2335 V 374 2322
a(END;)f(\(*)h(case)f(*\))p 1619 2335 V 269 2381 V 335
2367 a(END;)g(\(*)g(with)g(*\))p 1619 2381 V 269 2427
V 335 2413 a(DEC\(tos\))o(;)p 1619 2427 V 269 2472 V
295 2459 a(END)h(AddAdr;)p 1619 2472 V 270 2474 1350
2 v 563 2590 a FN(Figure)14 b(5.4:)j(The)d FK(RISC)21
b FN(v)o(ersion)14 b(of)f FK(A)n(ddA)n(dr)224 2688 y
FN(to)k(a)o(v)o(oid)f(the)h(emission)f(of)g(ev)o(en)i(a)e(single)h
(instruction.)27 b(Ev)o(en)18 b(in)e(the)i(case)f(where)i(an)p
eop
%%Page: 137 143
137 142 bop 224 274 a FL(5.1.)31 b(CODE)14 b(SELECTION)h(F)o(OR)f(A)g
(LO)o(AD-STORE)f(AR)o(CHITECTURE)104 b FN(137)224 390
y(instruction)14 b(is)f(emitted,)g(that)g(instruction)h(simply)d(adds)j
(the)g(t)o(w)o(o)f(index)g(registers,)i(but)224 440 y(lea)o(v)o(es)f
(an)o(y)g(o\013set)h(unc)o(hanged.)287 490 y(If)h(the)h(new)h
(top-of-stac)o(k)e(address)i(v)n(alue)e(subsequenctly)i(dereferenced)i
(b)o(y)d(a)f FK(lo)n(ad)224 540 y FN(instruction,)i(then)f(the)g(sym)o
(b)q(olic)e(addition)h(of)g(the)h(o\013set)h(will)d(ha)o(v)o(e)i(b)q
(een)h(p)q(erformed)224 590 y(at)d(zero)h(cost.)21 b(Ho)o(w)o(ev)o(er,)
15 b(if)f(it)h(should)f(happ)q(en)i(that)e(the)i(new)f(top-of-stac)o(k)
f(address)i(is)224 640 y(loaded)10 b(in)o(to)f(a)g(register,)i(rather)g
(than)e(dereferenced)q(,)k(then)d(the)g(deferred)h(add)f(instruction)
224 689 y(will)j(b)q(e)h(emitted)g(at)f(that)h(time.)287
739 y(By)e(con)o(trast)g(a)f(simple)f(add,)i(where)g(it)f(is)h(not)f
(kno)o(wn)h(that)f(the)h(result)h(is)e(an)g(address,)224
789 y(could)i(tak)o(e)f(t)o(w)o(o)h(instructions.)18
b(One)13 b(to)g(load)e(the)i(address)h(op)q(erand,)f(and)g(then)g
(another)224 839 y(to)h(add)g(the)g(top-of-stac)o(k)g(register)h(to)f
(the)g(loaded)f(address.)287 889 y(Finally)m(,)e(w)o(e)j(lo)q(ok)f(at)h
(the)g(selection)h(of)e(instructions)i(for)e(binary)h(op)q(erations.)
224 994 y FO(The)i(add)f(instructi)o(on)224 1070 y FN(The)21
b(\\)p FG(add)p FN(")d FK(DCo)n(de)24 b FN(calls)19 b(for)g(the)i(t)o
(w)o(o)e(top)h(elemen)o(ts)g(of)f(the)h(shado)o(w)g(stac)o(k)g(to)g(b)q
(e)224 1120 y(added)15 b(together.)k(F)m(or)14 b(our)g(target)g(mac)o
(hine,)e(the)j(left)e(op)q(erand)i(m)o(ust)e(b)q(e)h(in)g(a)g
(register,)224 1170 y(while)h(the)g(righ)o(t)f(op)q(erand)h(ma)o(y)e(b)
q(e)j(either)f(a)g(register)g(or)g(a)g(literal.)k(There)d(is)f(a)f(sp)q
(ecial)224 1220 y(case)i(whic)o(h)e(b)q(ene\014ts)i(from)d(sp)q(ecial)h
(treatmen)o(t.)20 b(If)14 b(the)h FK(left)f(op)n(er)n(and)19
b FN(is)14 b(a)g(literal,)g(then)224 1270 y(w)o(e)21
b(will)e(sa)o(v)o(e)h(an)g(instruction)g(if)g(w)o(e)g(use)h(the)g(comm)
o(utativ)o(e)c(prop)q(ert)o(y)k(of)f(addition,)224 1319
y(and)d(sw)o(ap)f(the)h(t)o(w)o(o)f(top-of-stac)o(k)g(elemen)o(ts.)25
b(It)17 b(is)f(assumed)g(that)g(the)h(fron)o(t-end)g(will)224
1369 y(already)e(ha)o(v)o(e)f(eliminated)f(the)i(case)g(of)f
FK(b)n(oth)k FN(op)q(erands)e(b)q(eing)e(literals.)20
b(Th)o(us)15 b(w)o(e)f(ha)o(v)o(e)224 1419 y(the)j(follo)o(wing)c(co)q
(de)j(in)f(\014gure)h(5.5.)38 b(This)15 b(case)i(is)e(a)g(mo)q(del)g
(for)g(all)f(the)i(comm)o(utativ)o(e)p 270 1514 1350
2 v 269 1559 2 46 v 295 1546 a FF(PROCEDURE)g(Add\(\);)p
1619 1559 V 269 1605 V 335 1591 a(VAR)i(new)g(:)i(VRegister)o(;)p
1619 1605 V 269 1651 V 295 1637 a(BEGIN)p 1619 1651 V
269 1696 V 335 1683 a(NewVReg\()o(new)o(\);)p 1619 1696
V 269 1742 V 335 1728 a(IF)e(shadow[tos)e(-)j(1].tag)f(=)h(literal)e
(THEN)h(SwapTopEl)o(eme)o(nt)o(s\(\))e(END;)p 1619 1742
V 269 1788 V 335 1774 a(MakeRegO)o(rLi)o(t\()o(tos)o(\);)p
1619 1788 V 269 1833 V 335 1820 a(MakeRegi)o(ste)o(r\()o(tos)g(-)j
(1\);)p 1619 1833 V 269 1879 V 315 1865 a(\(*)g(---------)d(possible)g
(stack)i(top)h(elems)e(----------)f(*)p 1619 1879 V 269
1925 V 335 1911 a(*)78 b(literal)16 b(<--)j(tos)156 b(register)16
b(<--)j(tos)77 b(*)p 1619 1925 V 269 1970 V 335 1957
a(*)h(register)291 b(register)232 b(*)p 1619 1970 V 269
2016 V 335 2002 a(*)78 b(...)391 b(...)332 b(*)p 1619
2016 V 269 2062 V 335 2048 a(*)19 b(---------)o(--)o(---)o(---)o(--)o
(---)o(--)o(---)o(---)o(--)o(---)o(--)o(---)o(---)o(--)d(*\))p
1619 2062 V 269 2107 V 335 2094 a(IF)i(shadow[tos)o(].t)o(ag)e(=)j
(literal)e(THEN)p 1619 2107 V 269 2153 V 374 2139 a(EmitRItR\()o(ad)o
(di,)o(sha)o(do)o(w[t)o(os)f(-)j(1].vReg,sh)o(ado)o(w[t)o(os)o(].l)o
(it)o(W,n)o(ew)o(\);)p 1619 2153 V 269 2199 V 335 2185
a(ELSE)f(\(*)g(do)h(register)e(to)i(register)d(add)j(*\))p
1619 2199 V 269 2244 V 374 2231 a(EmitRRtR\()o(ad)o(d,s)o(had)o(ow)o
([to)o(s)d(-)k(1].vReg,s)o(ha)o(dow)o([to)o(s])o(.vR)o(eg)o(,ne)o(w\))o
(;)p 1619 2244 V 269 2290 V 335 2276 a(END;)p 1619 2290
V 269 2336 V 335 2322 a(DEC\(tos\))o(;)p 1619 2336 V
269 2381 V 335 2368 a(shadow[t)o(os])o(.v)o(Reg)c(:=)j(new;)p
1619 2381 V 269 2427 V 295 2413 a(END)g(Add;)p 1619 2427
V 270 2429 1350 2 v 599 2545 a FN(Figure)14 b(5.5:)j(The)d
FK(RISC)20 b FN(v)o(ersion)15 b(of)e FK(A)n(dd)224 2638
y FN(binary)f(op)q(erations.)18 b(The)13 b(non-comm)o(utati)o(v)o(e)d
(ones)i(simply)f(omit)f(the)j(test)g(and)f(sw)o(ap)g(at)224
2688 y(the)j(pro)q(cedure)h(en)o(try)m(.)p eop
%%Page: 138 144
138 143 bop 224 274 a FN(138)371 b FL(CHAPTER)14 b(5.)31
b(INTERPRETIVE)14 b(CODE)g(SELECTION)287 390 y FN(This)i(is)g(almost)e
(all)h(there)j(is)e(to)g(it,)g(at)g(least)g(for)g(load-store)g(mac)o
(hines.)24 b(Ho)o(w)o(ev)o(er,)224 440 y(b)q(efore)15
b(w)o(e)f(pro)q(ceed)i(it)d(is)h(as)g(w)o(ell)f(to)h(consider)h(a)e
(more)g(complex)g(example.)224 555 y FO(Using)i(the)f(shado)o(w)h(stac)
o(k:)22 b(complex)14 b(address)h(expressions)224 634
y FN(Consider)g(the)g(follo)o(wing)c(statemen)o(t,)j(whic)o(h)g(is)g
(the)h(\014rst)g(statemen)o(t)f(of)g(the)h(inner)f(lo)q(op)224
683 y(of)i(a)g(matrix)f(transp)q(ose)i(pro)q(cedure.)28
b(The)17 b(v)n(ariable)e FK(arr)n(ay)k FN(is)d(assumed)g(to)h(b)q(e)g
(a)f FK(V)l(AR)224 733 y FN(parameter,)h(whic)o(h)g(p)q(oin)o(ts)g(to)g
(the)h(actual)e(arra)o(y)h(to)g(b)q(e)g(transp)q(osed.)29
b(F)m(or)17 b(simplicit)o(y)m(,)224 783 y(it)d(is)h(assumed)f(the)h
(size)g(of)f(the)h(arra)o(y)f(is)h(a)f(constan)o(t)h(kno)o(wn)f(to)g
(the)h(compiler,)e(so)h(that)224 833 y(access)i(to)e
FK(HIGH)20 b FN(v)n(alues)14 b(are)g(not)g(required.)295
926 y FF(temp)k(:=)h(array[i,j])o(;)224 1022 y FN(The)c(resulting)f
FK(DCo)n(de)j FN(sequence)f(is)e(|)320 1114 y FF(pshFP)k(8)384
b FD(;)13 b(1)69 b FE(push)12 b(addr)n(ess)g(of)h(p)n(ar)n(am)320
1160 y FF(derefW)402 b FD(;)13 b(2)69 b FE(get)13 b(value)f(of)h(the)g
(p)n(ar)n(am)320 1206 y FF(pshFP)18 b(-4)364 b FD(;)13
b(3)69 b FE(addr)n(ess)12 b(of)h(lo)n(c)n(al)f(var)h(i)320
1251 y FF(derefW)402 b FD(;)13 b(4)69 b FE(get)13 b(value)f(of)h(i)320
1297 y FF(pshLit)k(64)345 b FD(;)13 b(5)69 b FE(c)n(ar)n(dinality)11
b(*)i(element)f(size)320 1342 y FF(mul)462 b FD(;)13
b(6)69 b FE(multiply)12 b(by)h(arr)n(ay)g(size)320 1388
y FF(addAdr)402 b FD(;)13 b(7)69 b FE(add)13 b(o\013set)f(to)h(addr)n
(ess)320 1434 y FF(pshFP)18 b(-8)364 b FD(;)13 b(8)69
b FE(addr)n(ess)12 b(of)h(lo)n(c)n(al)f(var)h(j)320 1479
y FF(derefW)402 b FD(;)13 b(9)69 b FE(get)13 b(value)f(of)h(j)320
1525 y FF(pshLit)k(4)365 b FD(;)13 b(10)50 b FE(element)12
b(size)320 1571 y FF(mul)462 b FD(;)13 b(11)50 b FE(multiply)12
b(by)h(elem)g(size)320 1616 y FF(addAdr)402 b FD(;)13
b(12)50 b FE(add)13 b(o\013set)f(to)h(addr)n(ess)320
1662 y FF(derefW)402 b FD(;)13 b(13)50 b FE(get)13 b(arr)n(ay)g
(element)320 1708 y FF(pshFP)18 b(-12)344 b FD(;)13 b(14)50
b FE(addr)n(ess)12 b(of)h(lo)n(c)n(al)f(var)h(temp)320
1753 y FF(assignW)382 b FD(;)13 b(15)50 b FE(do)13 b(the)g(assign)224
1847 y FN(F)m(or)20 b(this)g(example)f(the)i(instructions)f(ha)o(v)o(e)
g(b)q(een)h(n)o(um)o(b)q(ered)f(for)g(ease)h(of)e(reference.)224
1896 y(The)h(output)f(instructions)g(are)h(as)f(follo)o(ws,)f(and)g
(are)i(emitted)e(at)h FK(DCo)n(de)j FN(indices)d(as)224
1946 y(indicated)14 b(|)320 2030 y FF(lw)19 b(6\(fp\),v1)303
b FD(;)13 b(\(2\))320 2076 y FF(lw)19 b(-4\(fp\),v2)283
b FD(;)13 b(\(4\))320 2121 y FF(muli)18 b(v2,64,v3)264
b FD(;)13 b(\(6\))g(or:)k FF(shl)h(v2,6,v3)320 2167 y(add)h(v1,v3,v4)
283 b FD(;)13 b(\(7\))320 2213 y FF(lw)19 b(-8\(fp\),v5)283
b FD(;)13 b(\(9\))320 2258 y FF(muli)18 b(v5,4,v6)284
b FD(;)13 b(\(11\))g(or:)k FF(shl)h(v5,2,v6)320 2304
y(add)h(v4,v6,v7)283 b FD(;)13 b(\(12\))320 2350 y FF(lw)19
b(\(v7\),v8)323 b FD(;)13 b(\(13\))320 2395 y FF(sw)19
b(v8,-12\(fp\))263 b FD(;)13 b(\(15\))224 2488 y FN(Commen)o(ts)d(in)h
(the)h FK(V)l(AL)g FN(sho)o(w)f(where)i(it)e(w)o(ould)g(b)q(e)i(p)q
(ossible)f(to)f(p)q(erform)g(a)g FK(str)n(ength)i(r)n(e-)224
2538 y(duction)j FN(b)o(y)11 b(con)o(v)o(erting)h(a)f(relativ)o(ely)g
(exp)q(ensiv)o(e)i(op)q(eration)f(\(a)f(m)o(ultiplication)e(\\)p
FG(muli)p FN("\))224 2588 y(in)o(to)19 b(a)g(relativ)o(ely)g(c)o(heap)q
(er)i(one)e(\(a)h(left)f(shift)g(\\)p FG(shl)p FN("\).)34
b(It)19 b(is)g(p)q(ossible)h(to)f(recognize)224 2638
y(the)d(sp)q(ecial)f(case)g(of)f(m)o(ultiplication)d(b)o(y)k(p)q(o)o(w)
o(ers)g(of)f(t)o(w)o(o)h(during)f(the)h(tree)h(w)o(alk,)d(in)i(the)224
2688 y(shado)o(w)f(stac)o(k)g(automaton,)e(or)i(during)f(the)i(\014nal)
e(co)q(de)i(output)f(pro)q(cess.)p eop
%%Page: 139 145
139 144 bop 224 274 a FL(5.1.)31 b(CODE)14 b(SELECTION)h(F)o(OR)f(A)g
(LO)o(AD-STORE)f(AR)o(CHITECTURE)104 b FN(139)287 390
y(Clearly)m(,)9 b(for)h(these)i(load-store)f(arc)o(hitectures)h(the)g
(simplicit)o(y)c(of)h(the)j(mac)o(hine)d(mo)q(del)224
440 y(leads)k(to)g(a)g(shado)o(w)g(stac)o(k)g(automaton)e(whic)o(h)i
(is)g(simple)e(and)i(elegan)o(t.)k(As)d(w)o(e)f(shall)f(see)224
490 y(later,)h(this)g(constrasts)h(to)e(the)i(di\016culties)e(whic)o(h)
g(more)g(complex)f(mac)o(hine)h(mo)q(dels)f(can)224 540
y(place)j(in)g(the)g(w)o(a)o(y)g(of)f(go)q(o)q(d)g(qualit)o(y)g(co)q
(de)i(selection.)224 653 y FH(5.1.4)56 b(Flo)n(w)19 b(of)g(con)n(trol:)
24 b(the)18 b(branc)n(h)i(instructions)224 729 y FN(In)e(our)g
(abstract)h(mac)o(hine)e(mo)q(del)f(Bo)q(olean)i(expressions)h(are)f
(ev)n(aluated)g(b)o(y)g(instruc-)224 779 y(tions)g(whic)o(h)g(lea)o(v)o
(e)g(either)h(a)e(zero)i(or)f(one)g(v)n(alue)g(on)f(the)i(top-of-stac)o
(k.)30 b(The)18 b(\015o)o(w)g(of)224 829 y(con)o(trol)f(instructions)h
(use)h(this)e(Bo)q(olean)g(v)n(alue)g(for)g(branc)o(hing,)g(using)g
(the)h(\\)p FG(brTrue)p FN(")224 879 y(and)c(\\)p FG(brFalse)p
FN(")e(instructions)j(of)e(the)h FK(IR)r FN(.)287 928
y(Some)9 b FK(RISC)17 b FN(arc)o(hitecture)12 b(mac)o(hines)e(pro)o
(vide)g(mac)o(hine)f(instructions)i(whic)o(h)g(matc)o(h)224
978 y(this)i(mo)q(del)e(v)o(ery)i(w)o(ell.)k(F)m(or)12
b(mac)o(hines)g(whic)o(h)g(pro)o(vide)g(a)h(complete)f(set)h(of)f(test)
i(instruc-)224 1028 y(tions)i(and)f(a)g(limited)e(range)j(of)e(branc)o
(h)i(instructions,)g(a)f(direct)i(translation)d(of)h(the)h
FK(IR)224 1078 y FN(instructions)h(is)g(sensible.)26
b(Figure)16 b(5.6)f(is)h(an)g(example)f(pro)q(cedure.)44
b(Note)17 b(that)f(there)p 270 1171 1350 2 v 269 1216
2 46 v 295 1203 a FF(PROCEDURE)g(IntRelLE\(\);)g(\(*)j(signed)e(<=)i
(*\))p 1619 1216 V 269 1262 V 335 1248 a(VAR)f(code)g(:)h(OpCode;)p
1619 1262 V 269 1308 V 413 1294 a(newV)f(:)h(VRegister;)p
1619 1308 V 269 1353 V 295 1340 a(BEGIN)p 1619 1353 V
269 1399 V 335 1385 a(NewVReg\()o(new)o(V\))o(;)e(\(*)i(allocate)d(dst)
j(register)d(*\))p 1619 1399 V 269 1445 V 335 1431 a(IF)i(shadow[tos)e
(-)j(1].tag)f(<>)g(literal)f(THEN)p 1619 1445 V 269 1490
V 374 1477 a(code)h(:=)h(sle;)f(\(*)h(set)f(if)h(<=)g(*\))p
1619 1490 V 269 1536 V 335 1522 a(ELSE)f(\(*)g(do)h(swap)f(*\))p
1619 1536 V 269 1582 V 374 1568 a(SwapTopEl)o(em)o(ent)o(s\(\))o(;)p
1619 1582 V 269 1627 V 374 1614 a(code)g(:=)h(sgt;)f(\(*)h(set)f(if)h
(>)g(*\))p 1619 1627 V 269 1673 V 335 1659 a(END;)p 1619
1673 V 269 1719 V 335 1705 a(MakeRegO)o(rLi)o(t\()o(tos)o(\);)p
1619 1719 V 269 1764 V 335 1751 a(MakeRegi)o(ste)o(r\()o(tos)d(-)j
(1\);)p 1619 1764 V 269 1810 V 335 1796 a(IF)f(shadow[tos)o(].t)o(ag)e
(=)j(literal)e(THEN)p 1619 1810 V 269 1856 V 374 1842
a(EmitRItR\()o(co)o(de,)o(sha)o(do)o(w[t)o(os)f(-)j(1].vReg,sh)o(ado)o
(w[t)o(os)o(].l)o(it)o(W,n)o(ew)o(V\);)p 1619 1856 V
269 1901 V 335 1888 a(ELSE)p 1619 1901 V 269 1947 V 374
1933 a(EmitRRtR\()o(co)o(de,)o(sha)o(do)o(w[t)o(os)d(-)j(1].vReg,sh)o
(ado)o(w[t)o(os)o(].v)o(Re)o(g,n)o(ew)o(V\);)p 1619 1947
V 269 1993 V 335 1979 a(END;)p 1619 1993 V 269 2038 V
335 2025 a(DEC\(tos\))o(;)370 b(\(*)19 b(pop)f(one)g(operand)f(*\))p
1619 2038 V 269 2084 V 335 2070 a(InitRegi)o(ste)o(rE)o(lem)o(\(to)o
(s,)o(new)o(V\))o(;)g(\(*)i(overwrit)o(e)e(other)g(*\))p
1619 2084 V 269 2130 V 295 2116 a(END)i(IntRelLE;)p 1619
2130 V 270 2131 1350 2 v 458 2247 a FN(Figure)14 b(5.6:)j(A)d(t)o
(ypical)f FK(RISC)20 b FN(mac)o(hine)13 b(relop)h(pro)q(cedure)224
2339 y(is)h(a)f(little)f(clev)o(erness)k(here.)j(In)14
b(our)h(target)f(mac)o(hine)f(there)j(are)f FK(set)j
FN(instructions)d(with)224 2389 y FK(RR)p Ft(!)p FK(R)k
FN(and)g FK(RI)p Ft(!)p FK(R)f FN(formats,)g(so)g(that)h(w)o(e)g(will)e
(sa)o(v)o(e)h(an)h(instruction)g(b)o(y)f(sw)o(apping)224
2438 y(op)q(erands)h(in)f(the)h(case)g(that)f(the)h(left)f(op)q(erand)h
(is)f(a)g(literal.)30 b(Of)18 b(course,)i(the)f(actual)224
2488 y(instruction)h(then)f(m)o(ust)f(b)q(e)i(adjusted)g(so)f(as)g(to)g
(still)f(pro)q(duce)i(the)g(correct)g(Bo)q(olean)224
2538 y(result.)287 2588 y(The)14 b(translation)g(of)f
FK(brT)m(rue)j FN(and)e FK(brF)m(alse)j FN(is)d(just)g(an)g
(instruction)g(whic)o(h)g(branc)o(hes)224 2638 y(on)20
b(the)h(tos)f(register)h(b)q(eing)f(not-zero)h(or)f(zero)h(resp)q
(ectiv)o(ely)m(.)38 b(This)20 b(do)q(es)g(not)g(merit)224
2688 y(further)15 b(discussion.)p eop
%%Page: 140 146
140 145 bop 224 274 a FN(140)371 b FL(CHAPTER)14 b(5.)31
b(INTERPRETIVE)14 b(CODE)g(SELECTION)287 390 y FN(The)d(traditional)e
(case)j(of)e(mac)o(hines)f(with)i FK(c)n(ondition)h(c)n(o)n(de)i
FN(or)d FK(\015ag)k FN(registers)d(is)e(some-)224 440
y(what)k(more)f(in)o(v)o(olv)o(ed.)k(This)d(case)g(is)g(treated)h(in)f
(section)g(5.2.)224 555 y FH(5.1.5)56 b(Flo)n(w)19 b(of)g(con)n(trol:)
24 b(the)18 b(subprogram)g(calls)224 631 y FN(The)12
b(selection)g(of)e(co)q(de)i(for)f(the)h(calling)e(of)g(subprograms)h
(is)g(dep)q(enden)o(t)i(on)e(the)h(mac)o(hine)224 681
y(con)o(v)o(en)o(tions)k(for)f(the)h(passing)f(of)f(parameters)i(and)f
(returning)h(function)f(results.)23 b(As)16 b(a)224 731
y(\014rst,)f(simple)d(example)h(w)o(e)h(shall)g(treat)g(a)g(somewhat)f
(mixed)g(mo)q(del.)k(W)m(e)c(shall)h(assume)224 781 y(that)h
(parameters)f(are)h(passed)g(on)f(the)h(stac)o(k,)f(with)g(the)h
FK(last)i FN(parameter)d(b)q(eing)g(pushed)224 830 y
FK(\014rst)t FN(.)39 b(W)m(e)20 b(shall)g(further)i(assume)e(that)h
(the)g FK(c)n(al)r(ling)j FN(pro)q(cedure)f(is)e(resp)q(onsible)h(for)
224 880 y(remo)o(ving)9 b(these)j(parameters)f(from)e(the)i(stac)o(k)g
(after)g(the)g(return.)18 b(These)12 b(are)f(the)g(normal)224
930 y(language)i FM(C)j FN(con)o(v)o(en)o(tions,)d(for)h(mac)o(hine)e
(con)o(v)o(en)o(tions)h(whic)o(h)h(pass)g(parameters)f(on)h(the)224
980 y(run)o(time)e(stac)o(k.)18 b(W)m(e)12 b(shall)f(assume)h(that)h
(the)g(mac)o(hine)e(returns)j(scalar)e(function)g(results)224
1030 y(in)i(a)f(kno)o(wn)h(register)h FM(r)606 1036 y
FB(r)q(et)652 1015 y Fz(3)671 1030 y FN(.)287 1080 y(Some)f(care)j(is)f
(needed)h(in)f(trying)f(to)h(understand)h(ho)o(w)e(co)q(de)i(is)f
(generated)h(for)f(pa-)224 1129 y(rameter)f(passing.)k(F)m(or)14
b(the)g(\014rst)h(time)e(w)o(e)i(need)g(to)f(k)o(eep)h
FK(two)i FN(stac)o(ks)e(in)f(our)g(minds)f(|)224 1179
y(without)h(mixing)e(them)h(up!)20 b(There)15 b(is)f(the)h(stac)o(k)g
(of)e(the)i(abstract)g(mac)o(hine)e(whic)o(h)h(our)224
1229 y(shado)o(w)i(stac)o(k)h(em)o(ulates,)e(and)g(then)i(there)g(is)f
(the)h(real,)f(run)o(time)f(stac)o(k)h(of)f(the)i(target)224
1279 y(mac)o(hine.)g(W)m(e)d(shall)f(b)q(e)h(pushing)g(and)g(p)q
(opping)f(b)q(oth.)287 1329 y(The)f(standard)h FK(DCo)n(de)j
FN(sequence)e(for)e(pro)q(cedure)j(calling)10 b(consists)k(of)d(a)h
(sequence)j(of)224 1378 y(expression)e(ev)n(aluations,)e(whic)o(h)g
(lea)o(v)o(e)h(their)g(results)g(on)g(the)g(top)g(of)f(the)h(abstract)g
(stac)o(k.)224 1428 y(After)17 b(eac)o(h)f(expression)g(ev)n(aluation)f
(a)g(sp)q(ecial)h(\\)p FG(mkPar)p FN(")e(instruction)h(is)h(placed)g
(in)f(the)224 1478 y FK(DCo)n(de)s FN(.)29 b(This)17
b(instruction)h(calls)f(for)g(the)h(top)f(elemen)o(t)g(of)f(the)i
FK(abstr)n(act)j FN(stac)o(k)d(to)f(b)q(e)224 1528 y(pushed)f(on)e(the)
g FK(c)n(oncr)n(ete)j FN(or)e(run)o(time)e(stac)o(k.)19
b(There)c(is)f(a)g(parameter)g(whic)o(h)g(indicates)224
1578 y(the)h(size)f(of)g(the)g(parameter)f(on)h(the)g(concrete)i(stac)o
(k.)i(This)c(is)g(necessary)i(since)e(w)o(e)g(ma)o(y)224
1627 y(ev)n(aluate)f(an)h(expression)g(in)o(to)f(a)g(32-bit)f
(register,)i(for)f(instance,)h(but)g(need)g(to)f(pass)h(it)f(as)224
1677 y(a)h(16-bit)f(quan)o(tit)o(y)g(to)h(the)g(called)g(pro)q(cedure.)
287 1727 y(The)g(co)q(de)h(is)e(relativ)o(ely)h(straigh)o(tforw)o(ard)f
(|)295 1802 y FF(PROCEDURE)j(MkParam\(siz)o(e)g(:)k(CARDINAL\))o(;)295
1847 y(BEGIN)e(\(*)h(assert)e(:)i(size)f(is)h(either)f(2)h(or)g(4)g
(*\))335 1893 y(MakeRegi)o(ste)o(r\()o(tos)o(\);)335
1939 y(IF)f(size)g(=)i(2)f(THEN)410 b(\(*)19 b(16-bit)e(word)h(*\))374
1984 y(EmitRt_\(p)o(us)o(hw,)o(sha)o(do)o(w[t)o(os)o(].v)o(Reg)o(\);)55
b(\(*)19 b(short)f(word)37 b(*\))335 2030 y(ELSE)645
b(\(*)19 b(32-bit)e(word)h(*\))374 2076 y(EmitRt_\(p)o(us)o(hl,)o(sha)o
(do)o(w[t)o(os)o(].v)o(Reg)o(\);)55 b(\(*)19 b(long)f(word)57
b(*\))335 2121 y(END;)335 2167 y(DEC\(tos\))o(;)17 b(\(*)h(remove)g
(from)g(abstract)e(stack)i(*\))295 2213 y(END)h(MkParam;)287
2290 y FN(Generating)f(the)h(actual)f(pro)q(cedure)i(call)e(itself)g
(is)g(quite)g(trivial.)31 b(There)19 b(are)g(t)o(w)o(o)224
2340 y(cases.)k(Calling)13 b(of)i(the)g(named)f(pro)q(cedure)j
FK(name)i FN(causes)d(a)f FG(jal)e FK(name)19 b FN(instruction)c(to)224
2389 y(b)q(e)f(emitted.)j(In)12 b(the)i(case)f(of)g(the)g(call)f(of)g
(pro)q(cedure)j(v)n(ariables,)c(the)j(pro)q(cedure)g
FK(value)i FN(is)224 2439 y(ev)n(aluated)g(on)o(to)e(the)i(top)g(of)e
(the)i(abstract)h(stac)o(k,)e(whic)o(h)h(is)f(then)h(p)q(opp)q(ed)g
(and)f(called.)224 2489 y(This)j(means)f(that)h(the)g(top-of-stac)o(k)f
(m)o(ust)g(b)q(e)h(loaded)f(in)o(to)g(a)h(register)h(and)e(a)g(\\)p
FG(jalr)224 2539 y(reg)p FN(")c(instruction)i(emitted.)p
224 2570 577 2 v 271 2597 a Fy(3)288 2609 y Fx(W)m(e)d(ha)o(v)o(e)e
(departed)g(here)g(from)h(the)g(usual)f(con)o(v)o(en)o(tions)f(for)i
(load-store)e(mac)o(hines.)k(These)e(in)o(v)n(ari-)224
2648 y(ably)f(pass)h(their)f(\014rst)g(few)h(parameters)e(in)h
(registers.)k(W)m(e)d(sho)o(w)g(ho)o(w)g(to)g(deal)f(with)h(this)f(v)n
(ariation)f(in)i(a)224 2688 y(later)g(section.)p eop
%%Page: 141 147
141 146 bop 224 274 a FL(5.2.)31 b(CONDITION)15 b(CODES,)e(MORE)h
(ADDRESS)g(MODES)339 b FN(141)287 390 y(After)13 b(the)g(generation)g
(of)g(the)g(call)f(instruction)h(an)g(instruction)g(m)o(ust)f(b)q(e)h
(generated)224 440 y(to)j(p)q(op)f(the)h(concrete)h(stac)o(k.)23
b(F)m(or)15 b(this)g(reason,)h(the)g FG(cutPars)d FK(DCo)n(de)19
b FN(has)d(a)f(mac)o(hine)224 490 y(dep)q(enden)o(t)i(parameter)e(|)g
(the)g(amoun)o(t)f(b)o(y)h(whic)o(h)g(the)g(concrete)i(stac)o(k)f(p)q
(oin)o(ter)f(m)o(ust)224 540 y(b)q(e)g(adjusted.)287
591 y(The)f(returned)i(v)n(alue)d(of)h(function)f(pro)q(cedures)k(is)d
(somewhere)g(o\013-stac)o(k)g(in)g(our)g(ab-)224 641
y(stract)j(mac)o(hine)d(mo)q(del.)20 b(In)15 b(the)h
FK(DCo)n(de)s FN(,)g(function)f(calls)g(are)g(follo)o(w)o(ed)f(b)o(y)h
(a)g FG(pushRet)224 691 y FN(instruction)d(whic)o(h)g(pushes)g(the)g
(returned)i(v)n(alue)c(bac)o(k)i(on)o(to)f(the)h(abstract)g(stac)o(k.)
18 b(In)11 b(our)224 741 y(shado)o(w)i(stac)o(k)h(a)f(b)q(o)q(ok-k)o
(eeping)g(op)q(eration)g(is)g(required)h(to)f(note)h(that)f(the)h
(top-of-stac)o(k)224 791 y(is)g(in)g(a)f(register.)287
842 y(With)e(the)h FK(V)l(AL)f FN(of)g(our)h(reference)i(mo)q(del,)c
(it)h(is)h(simplest)e(to)i(insist)g(that)f(only)g FK(virtual)224
892 y FN(registers)22 b(are)e(allo)o(w)o(ed)e(on)h(the)i(shado)o(w)e
(stac)o(k.)36 b(Th)o(us)20 b(w)o(e)g(generate)h(an)e(instruction)224
942 y(whic)o(h)14 b(immediately)d(copies)j(the)h(v)n(alue)e(of)g(the)i
(real)e(register)i(to)f(a)g(virtual)f(register.)295 1036
y FF(PROCEDURE)j(PshRet\(\);)h(\(*)h(move)g(return)g(reg)g(to)h(a)g
(vReg)f(*\))335 1081 y(VAR)g(newV)g(:)h(VRegister;)295
1127 y(BEGIN)335 1173 y(NewVReg\()o(new)o(V\))o(;)335
1218 y(EmitRtR\()o(mov)o(e,)o(ret)o(Reg)o(,n)o(ewV)o(\);)335
1264 y(INC\(tos\))o(;)335 1310 y(InitRegi)o(ste)o(rE)o(lem)o(\(to)o(s,)
o(new)o(V\))o(;)295 1355 y(END)g(PshRet;)224 1450 y FN(The)12
b(b)q(ene\014t)g(of)f(this)g(c)o(hoice)h(is)f(that)g(it)g(is)g(not)g
(necessary)i(to)e(b)q(e)h(concerned)h(ab)q(out)e(nested)224
1500 y(function)20 b(calls.)34 b(During)19 b(the)h(register)g(binding)f
(pro)q(cess,)j(if)c(there)j(is)e(no)h(con\015icting)224
1550 y(use,)g(the)g(virtual)d(register)j(will)d(b)q(e)i(assigned)g(to)f
(the)h(return)h(register)g(and)e(the)h(mo)o(v)o(e)224
1599 y(instruction)c(will)d(disapp)q(ear.)287 1651 y(Con)o(v)o(ersely)m
(,)h(the)h(return)h(statemen)o(t)f(of)f(function)g(pro)q(cedures)j(b)q
(ecomes)e(an)g(expres-)224 1701 y(sion)f(ev)n(aluation)f(follo)o(w)o
(ed)f(b)o(y)i(a)g FK(p)n(opR)n(et)18 b FN(instruction)13
b(in)g(the)g FK(IR)r FN(.)g(This)g(is)g(translated)g(as)224
1750 y(follo)o(ws)g(|)295 1836 y FF(PROCEDURE)j(PopRet\(\);)h(\(*)h
(move)g(top-of-stac)o(k)e(to)j(return)f(reg)g(*\))295
1882 y(BEGIN)335 1928 y(MakeRegi)o(ste)o(r\()o(tos)o(\);)335
1973 y(EmitRtR\()o(mov)o(e,)o(sha)o(dow)o([t)o(os])o(.v)o(Reg)o(,re)o
(tR)o(eg\))o(;)335 2019 y(DEC\(tos\))o(;)295 2065 y(END)h(PopRet;)224
2243 y FI(5.2)67 b(Condition)23 b(co)r(des,)e(more)i(address)f(mo)r
(des)224 2337 y FN(In)d(this)f(section)h(w)o(e)g(consider)g(a)f(n)o(um)
o(b)q(er)f(of)h(topics)g(whic)o(h)h(extend)g(the)g(simple)d(co)q(de)224
2387 y(selection)g(pro)q(cedures)g(whic)o(h)f(w)o(e)f(ha)o(v)o(e)h
(considered)g(up)g(un)o(til)e(no)o(w.)20 b(W)m(e)14 b(shall)f(consider)
224 2437 y(three)k(extensions)g(|)e(mac)o(hines)g(with)g
FK(c)n(ondition)i(c)n(o)n(des)j FN(rather)c(than)g(Bo)q(olean)f(set)i
(in-)224 2487 y(structions,)k(load-store)d(mac)o(hines)g(with)g(more)g
(address)h(mo)q(des,)g(and)f(the)i(passing)e(of)224 2536
y(parameters)c(in)g(registers.)287 2588 y(These)j(extensions)g(come)e
(closer)i(to)e(the)i(realit)o(y)e(of)h(load-store)f(arc)o(hitectures)k
(suc)o(h)224 2638 y(as)14 b FK(SP)m(AR)o(C)20 b FN(and)13
b FK(MIPS)5 b FN(.)14 b(W)m(e)f(shall)g(defer)i(consideration)e(of)g
FK(CISC)20 b FN(instruction)14 b(sets)g(to)224 2688 y(section)h(5.3.1.)
p eop
%%Page: 142 148
142 147 bop 224 274 a FN(142)371 b FL(CHAPTER)14 b(5.)31
b(INTERPRETIVE)14 b(CODE)g(SELECTION)224 390 y FH(5.2.1)56
b(Condition)18 b(co)r(des)224 498 y FN(Con)o(v)o(en)o(tional)8
b(mac)o(hine)g(arc)o(hitectures)k(ha)o(v)o(e)d FO(condition)f(co)q(de)h
FN(or)g FO(\015ag)g FN(registers)i(whic)o(h)224 548 y(store)18
b(the)e(outcome)g(of)f(compare)h(and)g(test)h(instructions.)26
b(On)16 b(man)o(y)f(mac)o(hines)g(these)224 598 y(bits)f(ma)o(y)d(b)q
(e)j(set)g(as)f(a)g(side-e\013ect)i(of)d(other)i(instructions,)g(as)f
(w)o(ell)f(as)h(the)h(explicit)f(tests)224 648 y(and)i(compares.)20
b(The)c(concept)g(is)e(plausible,)g(since)i(it)e(allo)o(ws)g(sometimes)
f(for)h(a)h(test)g(to)224 698 y(b)q(e)i(p)q(erformed)f(at)g(no)h
(additional)d(cost.)26 b(Unfortunately)m(,)16 b(the)h(use)g(of)f
(condition)f(co)q(des)224 747 y(in)h(this)h(w)o(a)o(y)e(is)h
(di\016cult.)25 b(In)17 b(mac)o(hines)e(suc)o(h)i(as)f
FK(SP)m(AR)o(C)23 b FN(there)17 b(are)g(t)o(w)o(o)f(v)o(ersions)h(of)
224 797 y(man)o(y)9 b(instructions)h(|)g(one)g(whic)o(h)g(mo)q
(di\014es)f(the)i(condition)f(co)q(des,)h(and)f(one)h(whic)o(h)f(do)q
(es)224 847 y(not.)22 b(In)15 b(this)g(w)o(a)o(y)g(it)g(is)g(easier)g
(to)g(con)o(trol)g(the)h(use)g(of)f(the)g(condition)g(co)q(des)h(when)g
(the)224 897 y(instruction)h(whic)o(h)f FK(sets)k FN(the)d(\015ags)f(b)
q(ecomes)h(separated)g(from)e(the)i(instruction)f(whic)o(h)224
947 y FK(uses)i FN(the)c(\015ags.)k(Ev)o(en)d(so,)e(the)i(use)f(of)g
(suc)o(h)g(side-e\013ects)j(mak)o(es)12 b(sev)o(eral)j(optimizations)
224 996 y(m)o(uc)o(h)f(more)g(di\016cult.)21 b(Here)16
b(w)o(e)f(shall)f(alw)o(a)o(ys)g(set)i(the)f(condition)f(co)q(des)j
(explicitly)d(b)o(y)224 1046 y(use)g(of)d(a)i(test)g(instruction.)18
b(Later,)13 b(after)f(all)g(other)h(optimizations)d(ha)o(v)o(e)i(b)q
(een)i(done,)e(w)o(e)224 1096 y(ma)o(y)j(try)h(to)h(remo)o(v)o(e)e(the)
i(tests)h(b)o(y)e(setting)h(the)g(\015ags)f(as)g(a)g(side-e\013ect)i
(of)e(some)g(other)224 1146 y(instruction.)287 1212 y(Use)g(of)f
(condition)g(co)q(des)h(falls)e(in)o(to)h(t)o(w)o(o)g(cases.)24
b(The)16 b(condition)f(co)q(de)h(ma)o(y)d(imme-)224 1262
y(diately)i(b)q(e)h(used)h(for)e(a)g(conditional)f(branc)o(h,)i(or)f
(the)h(Bo)q(olean)g(result)g(whic)o(h)f(the)h(co)q(de)224
1312 y(represen)o(ts)k(ma)o(y)15 b(b)q(e)i(used)h(as)f(an)f(ordinal)g
(Bo)q(olean)h(v)n(alue.)26 b(In)17 b(one)g(case)h(w)o(e)f(ma)o(y)d(use)
224 1362 y(the)f(condition)f(co)q(des)h(directly)g(in)e(a)h
(conditional)f(branc)o(h)i(instruction,)f(in)g(the)g(other,)h(w)o(e)224
1412 y(need)i(to)f(con)o(v)o(ert)h(the)f(co)q(des)h(to)f(an)g(ordinal)e
(v)n(alue.)287 1478 y(It)j(is)g(relativ)o(ely)g(exp)q(ensiv)o(e)i(to)e
(con)o(v)o(ert)h(condition)f(co)q(des)h(in)o(to)f(an)g(ordinal)f(v)n
(alue)h(if)224 1528 y(the)h(mac)o(hine)d(do)q(es)j(not)f(supp)q(ort)g
(suc)o(h)h(a)e(con)o(v)o(ersion.)21 b(Here)16 b(is)f(some)f(t)o(ypical)
g(co)q(de)i(for)224 1578 y(the)f FK(SP)m(AR)o(C)20 b
FN(pro)q(cessor)c(|)397 1747 y FF(move)i(\045g0,\045i0)207
b FD(;)50 b FE(move)13 b(zer)n(o)g(to)g(i0)397 1793 y
FF(bnCC)18 b(label)247 b FD(;)50 b FE(br)n(anch)12 b(on)h(CC)h(false)
397 1839 y FF(inc)k(\045i0)307 b FD(;)50 b FE(incr)n(ement)12
b(or)n(dinal)320 1884 y FF(label:)402 b FD(;)50 b FE(i0)13
b(now)g(has)g(Bo)n(ole)n(an)287 2056 y FN(Let)19 b(us)g(see)h(ho)o(w)e
(a)h(shado)o(w)f(stac)o(k)i(can)f(con)o(v)o(ert)g(the)g(primitiv)o(es)e
(of)i(our)f FK(IR)j FN(in)o(to)224 2106 y(instructions)c(whic)o(h)g
(set)g(and)f(use)h(condition)f(co)q(des.)27 b(W)m(e)16
b(do)g(this)g(b)o(y)h(in)o(tro)q(ducing)f(an)224 2156
y(extremely)e(p)q(o)o(w)o(erful)g(concept)h(|)f(that)g(of)f(using)h
(the)h(shado)o(w)e(stac)o(k)i(to)f(hold)f(sym)o(b)q(olic)224
2206 y FK(values)18 b FN(as)c(w)o(ell)f(as)h(the)h(sym)o(b)q(olic)d
(addresses)k(whic)o(h)d(w)o(e)h(ha)o(v)o(e)g(used)h(so)f(far.)287
2272 y(When)f(a)h(relational)e(test)j(instruction)f(is)f(encoun)o
(tered)j(in)d(the)h FK(IR)h FN(no)f(instruction)f(is)224
2322 y(pro)q(duced.)26 b(Instead)17 b(the)f(shado)o(w)g(stac)o(k)g(is)g
(up)q(dated)h(to)e(sho)o(w)h(that)g(the)h(v)n(alue)e(on)h(the)224
2372 y(top-of-stac)o(k)10 b(is)g(the)h(v)n(alue)f(whic)o(h)g(w)o(ould)f
(b)q(e)i(generated)g FK(if)g(the)h(sp)n(e)n(ci\014e)n(d)g(test)f(was)g
(c)n(arrie)n(d)224 2422 y(out)p FN(.)19 b(W)m(e)13 b(defer)i(actually)e
(generating)h(an)o(y)f(instruction)i(un)o(til)e(it)g(is)h(kno)o(wn)f
(whether)j(the)224 2472 y(v)n(alue)e(is)f(to)h(b)q(e)h(used)f(for)g
(branc)o(hing)g(or)f(as)h(an)g(ordinal.)287 2538 y(F)m(or)h(load-store)
i(mac)o(hines)e(w)o(e)h(will)f(still)g(need)i(to)f(load)g(the)g(op)q
(erands)h(of)f(the)h(test,)224 2588 y(since)12 b(w)o(e)e(assume)g(that)
g(the)h(v)n(alues)f(will)f(need)i(to)f(b)q(e)h(loaded)f(for)g(the)h
(real)f(test.)18 b(W)m(e)10 b(there-)224 2638 y(fore)15
b(in)o(tro)q(duce)f(a)g(new)g(sym)o(b)q(olic)f(Bo)q(olean)g(elemen)o(t)
h(of)f(the)i FK(Symb)n(olicV)m(alueDescriptor)224 2688
y FN(union,)e(corresp)q(onding)i(to)f(this)g(sym)o(b)q(olic)e(v)n
(alue.)p eop
%%Page: 143 149
143 148 bop 224 274 a FL(5.2.)31 b(CONDITION)15 b(CODES,)e(MORE)h
(ADDRESS)g(MODES)339 b FN(143)295 381 y FF(TYPE)18 b(TagType)f(=)i
(\(symBool,li)o(te)o(ral)o(,re)o(gi)o(ste)o(r,)o(add)o(res)o(s\))o(;)
393 427 y(SymbolicVa)o(lue)o(Des)o(cr)o(ipt)o(or)d(=)433
472 y(RECORD)472 518 y(CASE)i(tag)g(:)i(TagType)c(OF)472
564 y(|)j(symBool)37 b(:)19 b(test)37 b(:)20 b(DCodeType)o(;)727
609 y(lhReg)d(:)j(VRegister)o(;)727 655 y(rhReg)d(:)j(VRegister)o(;)472
701 y(|)f(literal)37 b(:)19 b(litW)37 b(:)20 b(WORD;)472
746 y(...)224 823 y FN(The)15 b(co)q(des)h(for)e(all)f(of)h(the)h
(comparison)e(pro)q(cedures)k(of)d(the)h(shado)o(w)f(stac)o(k)h
(automaton)224 872 y(no)o(w)f(b)q(ecome)g(extremely)f(simple,)f(and)i
(can)g(all)f(share)h(the)h(same)e(pro)q(cedure)j(b)q(o)q(dy)e(|)295
946 y FF(PROCEDURE)i(Relop\(dcode)g(:)j(DCodeType\))o(;)295
992 y(BEGIN)335 1037 y(MakeRegi)o(ste)o(r\()o(tos)d(-)j(1\);)335
1083 y(MakeRegi)o(ste)o(r\()o(tos)o(\);)335 1129 y(InitBool)o(Ele)o(me)
o(nt\()o(tos)d(-)j(1,dcode,)e(\(*)h(test)38 b(*\))472
1174 y(shadow[to)o(s)17 b(-)i(1].vReg,)56 b(\(*)18 b(left)38
b(*\))472 1220 y(shadow[to)o(s].)o(vR)o(eg\))o(;)115
b(\(*)18 b(right)g(*\))335 1266 y(DEC\(tos\))o(;)295
1311 y(END)h(Relop;)224 1388 y FN(The)f(newly)e(pro)q(duced)j(sym)o(b)q
(olic)c(Bo)q(olean)h(v)n(alue)g(will)g(b)q(e)h(used)h(in)e(one)h(of)g
(t)o(w)o(o)f(w)o(a)o(ys.)224 1437 y(It)f(ma)o(y)d(b)q(e)j(on)f(the)h
(top-of-stac)o(k)f(when)h(a)f FG(brTrue)f FN(or)h FG(brFalse)f
FN(is)h(found.)19 b(In)14 b(this)g(case)224 1487 y(the)19
b(shado)o(w)f(stac)o(k)h(automaton)d(will)h(emit)f(a)i(compare)g
(instruction)g(follo)o(w)o(ed)f(b)o(y)h(the)224 1537
y(appropriate)c(conditional)f(branc)o(h.)287 1587 y(F)m(or)i(the)g
(other)h(case)h(of)d(v)n(alue)h(use,)h(the)g(comparison)e(result)i(is)f
(used)h(as)f(an)g(ordinal)224 1637 y(v)n(alue.)k(This)14
b(v)n(alue)g(migh)o(t)e(b)q(e)j(used)g(in)f(an)g(assignmen)o(t,)f(or)i
(as)f(an)g(op)q(erand)h(in)f(another)224 1687 y(comparison.)22
b(In)16 b(this)g(case)g(the)h(co)q(de)f(of)f(the)i(shado)o(w)e(stac)o
(k)h(automaton)e(will)g(reac)o(h)j(a)224 1736 y(state)f(in)f(whic)o(h)g
(it)g(is)g(ask)o(ed)h(to)f(load)f(the)i(stac)o(k)g(elemen)o(t,)e(and)h
(will)f(\014nd)h(the)h(sym)o(b)q(olic)224 1786 y(v)n(alue.)25
b(The)17 b(pro)q(cedure)i(to)d(load)g(abstract)h(stac)o(k)g(elemen)o
(ts)f(in)o(to)g(registers)i(m)o(ust)d(tak)o(e)224 1836
y(in)o(to)h(accoun)o(t)h(this)f(new)h(case,)h(b)o(y)e(emitting)f(co)q
(de)i(to)f(actually)f(p)q(erform)h(the)h(test)g(and)224
1886 y(load)10 b(the)h(v)n(alue)f(in)o(to)g(a)g(register.)18
b(The)11 b FK(MakeR)n(e)n(gister)k FN(pro)q(cedure)e(gets)e(some)f
(extra)h(lines,)224 1936 y(as)j(compared)g(to)f(\014gure)i(5.3)e(|)295
2009 y FF(PROCEDURE)j(MakeRegiste)o(r\()o(lev)g(:)j(StackIndex)o(\);)
335 2055 y(\(*)f(post)g(:)i(shadow[le)o(v])c(is)j(loaded)e(*\))335
2101 y(VAR)h(new)g(:)i(VRegister)o(;)295 2146 y(BEGIN)335
2192 y(IF)e(shadow[lev)o(].t)o(ag)e(<>)j(register)e(THEN)374
2238 y(WITH)h(shadow[le)o(v])e(DO)413 2283 y(NewVReg\(n)o(ew\))o(;)173
b(\(*)19 b(get)g(a)g(new)f(register)f(*\))413 2329 y(IF)i(tag)f(=)h
(symBool)e(THEN)h(\(*)h(compare)e(and)i(load)57 b(*\))452
2375 y(EmitRRt_\(c)o(mp,)o(lh)o(Reg)o(,r)o(hRe)o(g\);)452
2420 y(EmitRt_\(se)o(tMa)o(p[)o(tes)o(t])o(,ne)o(w\);)413
2466 y(ELSIF)18 b(tag)g(=)h(address)e(THEN)h(\(*)h(emit)f(load)g(adr)h
(*\))413 2512 y(...)224 2588 y FN(Note)d(that)g(w)o(e)f(require)h(a)f
(mapping)f(table)h(to)g(con)o(v)o(ert)h(the)g(v)n(arious)f(v)n(alues)g
(of)f(the)i(test)224 2638 y(\014eld)i(of)f(the)i(record)f(in)o(to)f
(the)i(appropriate)e FK(set)22 b FN(function.)29 b(In)18
b(this)f(table,)h(for)g(exam-)224 2688 y(ple,)h FG(setMap[intRelLE])f
(=)k(sle)17 b FN(or)h(whatev)o(er)h(the)g(instruction)f(is)g(for)g(pro)
q(ducing)g(a)p eop
%%Page: 144 150
144 149 bop 224 274 a FN(144)371 b FL(CHAPTER)14 b(5.)31
b(INTERPRETIVE)14 b(CODE)g(SELECTION)224 390 y FN(Bo)q(olean)j(v)n
(alue)f(from)e(a)i(signed)h(comparison.)24 b(In)17 b(the)g(case)g(of)f
(mac)o(hines)g(suc)o(h)h(as)g(the)224 440 y(earlier)e(mo)q(dels)e(of)g
(the)i FK(iapx86)20 b FN(family)11 b(it)j(w)o(ould)f(require)i(sev)o
(eral)g(instructions)g(to)e(pro-)224 490 y(duce)i(the)g(v)n(alue,)e(as)
g(describ)q(ed)j(earlier.)287 541 y(The)e(adv)n(an)o(tage)e(of)h
(deferring)h(the)g(emission)e(of)h(the)h(comparison)e(op)q(eration)i
(should)224 591 y(no)o(w)i(b)q(e)g(clear.)24 b(In)15
b(the)i(case)f(of)f(complex)g(Bo)q(olean)g(expressions)j(the)e(result)g
(of)f(a)h(com-)224 641 y(parison)e(can)h(temp)q(orarily)d(b)q(e)j
(pushed)g(do)o(wn)f(b)q(elo)o(w)g(the)h(top)f(of)f(the)i(shado)o(w)f
(stac)o(k.)19 b(It)224 690 y(do)q(es)12 b(no)f(harm)f(to)h(push)h(sym)o
(b)q(olic)d(v)n(alues)i(do)o(wn)g(the)h(stac)o(k,)f(and)g(once)h(a)f(v)
n(alue)g(is)g(loaded)224 740 y(in)o(to)k(a)f(virtual)g(register)i(it)f
(is)g(safe)g(also.)20 b(Ho)o(w)o(ev)o(er,)15 b(condition)f(co)q(de)i(v)
n(alues)f(cannot)g(b)q(e)224 790 y(pushed)j(do)o(wn)d(the)i(stac)o(k,)g
(since)g(their)f(v)n(alues)g(are)h(v)o(olatile,)d(and)i(will)f(b)q(e)i
(o)o(v)o(erwritten)224 840 y(b)o(y)j(later)f(instructions.)35
b(Of)19 b(course,)j(the)e(abilit)o(y)d(to)j(push)f(a)g(sym)o(b)q(olic)f
(v)n(alue)h(b)q(elo)o(w)224 890 y(the)f(stac)o(k)f(top)g(without)f(c)o
(hanging)g(its)h(meaning)e(dep)q(ends)j(on)f(the)g(single)f(assignmen)o
(t)224 939 y(prop)q(ert)o(y)g(of)e(these)j(registers.)22
b(If)14 b(there)j(is)d(only)g(one)h(de\014nition)g(of)f(eac)o(h)h(of)g
(the)g(virtual)224 989 y(registers)j(whic)o(h)e(are)g(in)o(v)o(olv)o
(ed)e(in)i(the)g(test,)h(the)g(v)n(alues)e(will)g(b)q(e)h(the)g(same)f
(no)h(matter)224 1039 y(ho)o(w)e(m)o(uc)o(h)f(later)h(the)g(test)h(is)f
(p)q(erformed.)287 1090 y(Figure)g(5.7)f(sho)o(ws)h(step)h(b)o(y)f
(step)h(the)g(selection)f(of)g(co)q(de)g(for)g(a)g(Bo)q(olean)g(ev)n
(aluation)224 1140 y(in)j(whic)o(h)f(sym)o(b)q(olic)f(v)n(alues)i(are)g
(pushed)h(b)q(elo)o(w)e(the)i(top)f(of)f(the)h(stac)o(k.)27
b(The)18 b FK(V)l(AL)e FN(in)224 1189 y(this)d(\014gure)g(uses)g(the)g
FK(Intel-386)18 b FN(compare)12 b(\\)p FG(cmp)p FN(",)f(and)h(set)h(\\)
p FG(sle)p FN(",)e(\\)p FG(sne)p FN(")g(instructions.)224
1239 y(This)17 b(metho)q(d)f(of)g(using)g(a)h(sym)o(b)q(olic)d(v)n
(alue)i(to)h(defer)g(co)q(de)h(emission)d(is)i(quite)f(simple,)224
1289 y(and)h(has)g(adv)n(an)o(tages)f(ev)o(en)i(in)e(the)h(case)h(of)e
(mac)o(hines)g(suc)o(h)i(as)f FK(MIPS)22 b FN(whic)o(h)17
b(do)f(not)224 1339 y(ha)o(v)o(e)g(condition)f(co)q(des.)26
b(In)16 b(suc)o(h)g(a)g(case,)h(the)f(use)h(of)e(the)i(sym)o(b)q(olic)d
(v)n(alue)h(allo)o(ws)g(the)224 1389 y(shado)o(w)h(stac)o(k)h
(automaton)d(to)i(w)o(ait)g(un)o(til)f(the)i(use)g(of)f(the)h(v)n(alue)
e(is)h(kno)o(wn.)25 b(In)16 b(some)224 1439 y(cases)g(it)e(is)h(then)g
(p)q(ossible)g(to)f(a)o(v)o(oid)f(the)i(emission)e(of)h(the)h(set)h
(instruction)f(en)o(tirely)m(,)f(b)o(y)224 1488 y(using)g(a)g(compare)f
(and)g(branc)o(h)i(instruction)f(directly)m(.)287 1539
y(The)f FK(IBM)i(Power)i FN(arc)o(hitecture)e(go)q(es)f(ev)o(en)g
(further,)f(in)g(that)g(m)o(ultiple)e(sets)k(of)d(con-)224
1589 y(dition)g(co)q(des)i(exist.)k(In)13 b(this)g(case)h(it)e(is)h
(sensible)g(to)g(treat)h(the)f(condition)f(co)q(de)i(registers)224
1639 y(as)e(just)g(another)g(resource)i(mo)q(delled)c(b)o(y)h(the)h
(set)h(of)e(virtual)f(registers.)19 b(The)12 b(task)g(of)f(reg-)224
1689 y(ister)16 b(allo)q(cation)d(can)i(then)g(b)q(e)h(com)o(bined)d
(with)i(the)g(allo)q(cation)e(of)h(absolute)h(condition)224
1738 y(co)q(de)g(registers.)224 1860 y FH(5.2.2)56 b(More)18
b(address)h(mo)r(des)224 1938 y FN(In)h(order)g(to)f(sho)o(w)h(the)g(w)
o(a)o(y)f(to)g(still)g(more)f(complex)g(cases,)k(w)o(e)e(shall)e
(consider)j(the)224 1988 y(selection)13 b(of)e(co)q(de)h(for)g(an)f
(arc)o(hitecture)j(whic)o(h)d(has)h(just)g(one)g(additional)e(address)j
(mo)q(de.)224 2038 y(Using)h FK(SUN)i(Micr)n(osystem's)e(SP)m(AR)o(C)20
b FN(as)14 b(a)g(mo)q(del)f(w)o(e)h(shall)g(assume)f(that)h(the)h
(second)224 2088 y(address)i(mo)q(de)e(is)g(a)h(t)o(w)o(o-register,)g
(indexed)g(form.)22 b(A)15 b(load)g(or)h(store)g(instruction)g(ma)o(y)
224 2138 y(use)f(a)f(memory)d(address)k(whic)o(h)f(is)g(one)g(of)f(the)
i(t)o(w)o(o)e(forms)745 2187 y FK(symb)n(ol)p FN(+)p
FK(o\013set)i FN(\()p FM(r)1043 2193 y FB(index)1129
2187 y FN(\))224 2237 y(and)828 2287 y(\()p FM(r)863
2293 y FB(sr)q(c)p Fz(1)929 2287 y FN(+)p FM(r)980 2293
y FB(sr)q(c)p Fz(2)1045 2287 y FN(\))224 2337 y(In)g(this)f(second)h
(address)h(mo)q(de,)d(the)i(e\013ectiv)o(e)g(address)h(is)e(the)h(sum)e
(of)h(the)h(con)o(ten)o(ts)g(of)224 2387 y(the)g(t)o(w)o(o)e(nominated)
g(registers.)287 2437 y(Of)j(course)j(the)e(\014rst)h(address)g(mo)q
(de)e(still)g(has)g(all)g(the)i(usual)e(sp)q(ecial)h(cases)h(whic)o(h)
224 2487 y(arise)f(when)g(one)g(of)f(the)h(sym)o(b)q(ols)e(has)h(one)h
(of)f(the)h(distinguished)f(v)n(alues)g FK(idNil)t FN(,)g(0,)g(or)224
2537 y FK(noR)n(e)n(g)p FN(.)287 2588 y(It)d(is)h(suggested)h(that)e
(the)h(b)q(est)h(w)o(a)o(y)e(of)g(coping)g(with)g(this)g(extra)h(mo)q
(de)f(is)g(to)h(enric)o(h)224 2638 y(the)i(structure)i(of)c(the)i(sym)o
(b)q(olic)e(addresses)j(on)e(the)h(shado)o(w)f(stac)o(k.)23
b(Supp)q(ose)16 b(that)f(w)o(e)224 2688 y(mo)q(dify)8
b(the)j FK(Symb)n(olicV)m(alueDescriptor)k FN(t)o(yp)q(e)c(so)f(that)h
(it)f(ma)o(y)e(represen)o(t)13 b(either)e(address)p eop
%%Page: 145 151
145 150 bop 224 274 a FL(5.2.)31 b(CONDITION)15 b(CODES,)e(MORE)h
(ADDRESS)g(MODES)339 b FN(145)p 270 392 1350 2 v 269
438 2 46 v 295 424 a Fv(Co)q(de)15 b(for)g({)32 b FF(IF)19
b(\(var1)f(<)h(var2\))f(<>)g(\(var3)g(<)h(var4\))f(THEN)g(...)p
1619 438 V 269 483 V 393 470 a(pshAdr)g(var1)p 1619 483
V 269 529 V 393 515 a(derefW)273 b(;)12 b FE(emit)k FF("lw)i(var1,v1")p
1619 529 V 269 575 V 393 561 a(pshAdr)g(var2)p 1619 575
V 269 620 V 393 607 a(derefW)273 b(;)12 b FE(emit)k FF("lw)i(var2,v2")p
1619 620 V 269 666 V 393 652 a(intRelLS)p 1619 666 V
269 712 V 295 698 a FD(The)13 b(shado)o(w)h(stac)o(k)f(is)h(no)o(w)f(|)
p 1619 712 V 269 785 2 74 v 442 727 427 4 v 442 772 4
45 v 865 772 V 442 775 427 4 v 865 752 45 4 v 865 750
a Ff(\033)487 760 y FD(b)q(o)q(ol:)18 b(\()p FF(intLE)p
FD(,)p Fm(v)732 764 y Fy(1)747 760 y FD(,)p Fm(v)777
764 y Fy(2)794 760 y FD(\))925 763 y(top-of-stac)o(k)p
1619 785 2 74 v 269 831 2 46 v 393 817 a FF(pshAdr)g(var3)p
1619 831 V 269 877 V 393 863 a(derefW)273 b(;)12 b FE(emit)k
FF("lw)i(var3,v3")p 1619 877 V 269 922 V 393 909 a(pshAdr)g(var4)p
1619 922 V 269 968 V 393 954 a(derefW)273 b(;)12 b FE(emit)k
FF("lw)i(var4,v4")p 1619 968 V 269 1014 V 393 1000 a(intRelLS)p
1619 1014 V 269 1059 V 295 1046 a FD(The)13 b(shado)o(w)h(stac)o(k)f
(is)h(no)o(w)f(|)p 1619 1059 V 269 1184 2 125 v 865 1094
45 4 v 865 1092 a Ff(\033)p 442 1080 427 4 v 442 1170
4 90 v 865 1170 V 442 1173 427 4 v 490 1113 a FD(b)q(o)q(ol:)18
b(\()p FF(intLE)p FD(,)p Fm(v)735 1117 y Fy(3)750 1113
y FD(,)p Fm(v)780 1117 y Fy(4)797 1113 y FD(\))925 1104
y(top-of-stac)o(k)487 1158 y(b)q(o)q(ol:)g(\()p FF(intLE)p
FD(,)p Fm(v)732 1162 y Fy(1)747 1158 y FD(,)p Fm(v)777
1162 y Fy(2)794 1158 y FD(\))p 445 1126 420 2 v 1619
1184 2 125 v 269 1230 2 46 v 295 1216 a(Note)13 b(that)g(w)o(e)g(ha)o
(v)o(e)g(t)o(w)o(o)g(deferred)g(Bo)q(olean)i(ev)n(aluations)h(on)d(the)
g(shado)o(w)h(stac)o(k,)p 1619 1230 V 269 1275 V 295
1262 a(and)g(no)o(w)f(wish)h(to)f(compare)g(them.)k(Recall)e(that)e
(relational)j(op)q(erations)f(on)e(the)p 1619 1275 V
269 1321 V 295 1307 a(shado)o(w)h(stac)o(k)f(m)o(ust)g(alw)o(a)o(ys)h
(load)g(b)q(oth)g(op)q(erands)h(in)o(to)f(registers,)f(so)g(|)p
1619 1321 V 269 1367 V 393 1353 a FF(relNE)293 b(;)12
b FE(emit)k FF("cmp)i(v1,v2")p 1619 1367 V 269 1412 V
786 1399 a(;)12 b FE(emit)k FF("sle)i(v5")p 1619 1412
V 269 1458 V 786 1444 a(;)12 b FE(emit)k FF("cmp)i(v3,v4")p
1619 1458 V 269 1504 V 786 1490 a(;)12 b FE(emit)k FF("sle)i(v6")p
1619 1504 V 269 1549 V 295 1536 a FD(The)13 b(shado)o(w)h(stac)o(k)f
(is)h(no)o(w)f(|)p 1619 1549 V 269 1623 2 74 v 442 1564
427 4 v 442 1609 4 45 v 865 1609 V 442 1612 427 4 v 865
1590 45 4 v 865 1588 a Ff(\033)487 1597 y FD(b)q(o)q(ol:)18
b(\()p FF(relNE)p FD(,)p Fm(v)732 1601 y Fy(5)747 1597
y FD(,)p Fm(v)777 1601 y Fy(6)794 1597 y FD(\))925 1600
y(top-of-stac)o(k)p 1619 1623 2 74 v 269 1669 2 46 v
393 1655 a FF(brFalse)253 b(;)12 b FE(emit)k FF("cmp)i(v5,v6")p
1619 1669 V 269 1714 V 786 1701 a(;)12 b FE(emit)k FF("bne)i(elseLabel)
o(")p 1619 1714 V 270 1716 1350 2 v 467 1832 a FN(Figure)c(5.7:)j(Co)q
(de)d(selection)g(for)g(complex)f(Bo)q(olean)g(test)224
1978 y(t)o(yp)q(e.)295 2097 y FF(TYPE)18 b(TagType)f(=)i(\(symBool,li)o
(te)o(ral)o(,re)o(gi)o(ste)o(r,)o(add)o(res)o(s\))o(;)393
2143 y(SymbolicVa)o(lue)o(Des)o(cr)o(ipt)o(or)d(=)j(RECORD)472
2188 y(CASE)f(tag)g(:)i(TagType)c(OF)472 2234 y(|)j(literal)37
b(:)19 b(litW)37 b(:)20 b(WORD;)472 2280 y(|)f(register)e(:)i(vReg)37
b(:)20 b(VRegister)o(;)472 2325 y(|)f(symBool)37 b(:)19
b(test)37 b(:)20 b(DCodeType)o(;)727 2371 y(lhReg)d(:)j(VRegister)o(;)
727 2416 y(rhReg)d(:)j(VRegister)o(;)472 2462 y(|)f(address)37
b(:)19 b(idnt)37 b(:)20 b(HashBucke)o(tT)o(ype)o(;)727
2508 y(ofst)37 b(:)20 b(INTEGER;)727 2553 y(reg1)37 b(:)20
b(VRegister)o(;)727 2599 y(reg2)37 b(:)20 b(VRegister)o(;)472
2645 y(END;)e(\(*)h(case)f(*\))433 2690 y(END;)p eop
%%Page: 146 152
146 151 bop 224 274 a FN(146)371 b FL(CHAPTER)14 b(5.)31
b(INTERPRETIVE)14 b(CODE)g(SELECTION)287 390 y FN(The)h(v)n(alues)g(of)
g(the)h(sym)o(b)q(olic)d(address)j(t)o(yp)q(e)g(will)e(b)q(e)i
(initialized)d(in)i(the)h(same)e(w)o(a)o(y)224 440 y(as)j(previously)m
(.)25 b(The)16 b(ma)r(jor)f(c)o(hanges)i(caused)h(b)o(y)e(this)g
(greater)i(generalit)o(y)e(are)g(sho)o(wn)224 490 y(in)f(the)g(pro)q
(cedure)i(whic)o(h)e(implemen)o(ts)e(the)i FG(addAdr)f
FN(instruction.)21 b(When)15 b(a)g(v)n(alue)f(in)h(a)224
540 y(register)g(is)f(to)g(b)q(e)g(added)h(to)e(an)h(address,)h(it)e
(ma)o(y)f(go)i(in)o(to)f(either)i(of)e(the)h(index)g(register)224
590 y(p)q(ositions,)g(without)f(generating)h(an)o(y)f(co)q(de.)p
270 874 1350 2 v 269 920 2 46 v 295 906 a FF(PROCEDURE)j(AddAdr\(\);)p
1619 920 V 269 966 V 335 952 a(VAR)i(new,)g(old)g(:)i(VRegister)o(;)p
1619 966 V 269 1011 V 295 998 a(BEGIN)p 1619 1011 V 269
1057 V 335 1043 a(MakeAddr)o(ess)o(\(t)o(os)c(-)k(1\);)p
1619 1057 V 269 1103 V 335 1089 a(\(*)e(now)h(try)f(to)h(fold)f(add)h
(into)f(address)f(modes)g(*\))p 1619 1103 V 269 1148
V 335 1135 a(WITH)h(shadow[t)o(os)e(-)k(1])e(DO)p 1619
1148 V 269 1194 V 374 1180 a(CASE)g(shadow[to)o(s].)o(ta)o(g)f(OF)p
1619 1194 V 269 1240 V 374 1226 a(|)i(literal)e(:)39
b(\(*)19 b(add)f(to)h(offset)e(*\))p 1619 1240 V 269
1285 V 452 1272 a(off)i(:=)f(off)h(+)g(CAST\(INTEG)o(ER,)o(sh)o(ado)o
(w[)o(tos)o(].l)o(it)o(W\);)p 1619 1285 V 269 1331 V
374 1317 a(|)g(register)d(:)k(\(*)f(fold)f(into)g(index)f(*\))p
1619 1331 V 269 1377 V 452 1363 a(old)i(:=)f(shadow[tos])o(.v)o(Reg)o
(;)p 1619 1377 V 269 1422 V 452 1409 a(IF)h(reg1)f(=)h(noReg)f(THEN)g
(reg1)g(:=)h(old;)p 1619 1422 V 269 1468 V 452 1454 a(ELSIF)f(reg2)g(=)
h(noReg)f(THEN)g(reg2)g(:=)h(old;)p 1619 1468 V 269 1514
V 452 1500 a(ELSE)f(\(*)h(emit)f(an)h(add)f(instruction)e(*\))p
1619 1514 V 269 1559 V 491 1546 a(NewVReg\(new)o(\);)p
1619 1559 V 269 1605 V 491 1591 a(EmitRRtR\(ad)o(d,)o(reg)o(2,)o(old)o
(,ne)o(w\))o(;)p 1619 1605 V 269 1651 V 491 1637 a(reg2)i(:=)h(new;)p
1619 1651 V 269 1696 V 452 1682 a(END;)p 1619 1696 V
269 1742 V 374 1728 a(|)g(address)e(:)i(Assert\(FAL)o(SE)o(,"b)o(ad)d
(tos)j(element"\))o(;)p 1619 1742 V 269 1788 V 374 1774
a(END;)f(\(*)h(case)f(*\))p 1619 1788 V 269 1833 V 335
1819 a(END;)g(\(*)g(with)g(*\))p 1619 1833 V 269 1879
V 335 1865 a(DEC\(tos\))o(;)p 1619 1879 V 269 1925 V
295 1911 a(END)h(AddAdr;)p 1619 1925 V 270 1926 1350
2 v 544 2042 a FN(Figure)14 b(5.8:)j(The)d FK(SP)m(AR)o(C)20
b FN(v)o(ersion)14 b(of)f FK(A)n(ddA)n(dr)287 2292 y
FN(A)f(t)o(ypical)f(implemen)o(tatio)o(n)e(is)j(sho)o(wn)g(in)g
(\014gure)g(5.8.)17 b(Compared)11 b(to)g(the)i(equiv)n(alen)o(t)224
2341 y(pro)q(cedure)i(in)d(the)h(previous)g(section,)g(\014gure)g(5.4)e
(it)h(will)f(b)q(e)i(seen)h(that)f(ev)o(en)g(few)o(er)g(cases)224
2391 y(lead)h(to)g(the)g(emission)f(of)g(an)h(instruction.)287
2488 y(As)e(an)g(example)f(of)h(the)g(use)h(of)f(this)g(address)h(mo)q
(de,)e(consider)i(the)g(selection)g(of)e(co)q(de)224
2538 y(for)k(indexing)e(in)o(to)h(a)g(arra)o(y)h FK(arr)n(ay)t
FN([)p FM(i;)7 b(j)r FN(])n(,)14 b(where)i(the)f(arra)o(y)f
FK(arr)n(ay)k FN(is)c(a)h(v)n(ariable)e(param-)224 2588
y(eter.)33 b(In)18 b(section)h(5.1.3)e(w)o(e)h(considered)i(an)e
(assignmen)o(t)f(statemen)o(t)h(whic)o(h)g(included)224
2638 y(this)g(expression)h(ev)n(aluation,)d(for)i(the)g(simple)e
(load-store)h(arc)o(hitecture.)31 b(The)18 b FK(DCo)n(de)224
2688 y FN(sequence)e(is)e(|)p eop
%%Page: 147 153
147 152 bop 224 274 a FL(5.2.)31 b(CONDITION)15 b(CODES,)e(MORE)h
(ADDRESS)g(MODES)339 b FN(147)320 381 y FF(pshFP)18 b(8)384
b FD(;)13 b(1)69 b FE(push)12 b(addr)n(ess)g(of)h(p)n(ar)n(am)320
427 y FF(derefW)402 b FD(;)13 b(2)69 b FE(get)13 b(value)f(of)h(the)g
(p)n(ar)n(am)320 472 y FF(pshFP)18 b(-4)364 b FD(;)13
b(3)69 b FE(addr)n(ess)12 b(of)h(lo)n(c)n(al)f(var)h(i)320
518 y FF(derefW)402 b FD(;)13 b(4)69 b FE(get)13 b(value)f(of)h(i)320
564 y FF(pshLit)k(64)345 b FD(;)13 b(5)69 b FE(c)n(ar)n(dinality)11
b(*)i(element)f(size)320 609 y FF(mul)462 b FD(;)13 b(6)69
b FE(multiply)12 b(by)h(arr)n(ay)g(size)320 655 y FF(addAdr)402
b FD(;)13 b(7)69 b FE(add)13 b(o\013set)f(to)h(addr)n(ess)320
701 y FF(pshFP)18 b(-8)364 b FD(;)13 b(8)69 b FE(addr)n(ess)12
b(of)h(lo)n(c)n(al)f(var)h(j)320 746 y FF(derefW)402
b FD(;)13 b(9)69 b FE(get)13 b(value)f(of)h(j)320 792
y FF(pshLit)k(4)365 b FD(;)13 b(10)50 b FE(element)12
b(size)320 838 y FF(mul)462 b FD(;)13 b(11)50 b FE(multiply)12
b(by)h(elem)g(size)320 883 y FF(addAdr)402 b FD(;)13
b(12)50 b FE(add)13 b(o\013set)f(to)h(addr)n(ess)320
929 y FF(derefW)402 b FD(;)13 b(13)50 b FE(get)13 b(arr)n(ay)g(element)
224 1026 y FN(After)18 b(the)f(pro)q(cessing)h(of)e(instruction)h(6)g
(b)o(y)f(the)i(shado)o(w)e(stac)o(k)h(automaton,)e(the)j(fol-)224
1075 y(lo)o(wing)13 b(instructions)h(will)f(ha)o(v)o(e)g(b)q(een)i
(emitted)f(|)320 1172 y FF(lw)19 b(8\(fp\),v1)303 b FD(;)13
b(\(2\))320 1218 y FF(lw)19 b(-4\(fp\),v2)283 b FD(;)13
b(\(4\))320 1263 y FF(muli)18 b(v2,64,v3)264 b FD(;)13
b(\(6\))g(or:)k FF(shl)h(v2,6,v3)224 1360 y FN(and)c(the)h(shado)o(w)e
(stac)o(k)i(will)d(b)q(e)j(|)p 944 1413 45 4 v 944 1411
a Ff(\033)p 521 1387 427 4 v 521 1477 4 90 v 944 1477
V 521 1480 427 4 v 569 1420 a FD(reg:)i Fm(v)667 1424
y Fy(3)1004 1417 y FD(top-of-stac)o(k)566 1465 y(reg:)g
Fm(v)664 1469 y Fy(1)p 524 1433 420 2 v 224 1529 a FN(In)11
b(this)f(case)i(the)f FG(addAdr)e FN(co)q(de)i(do)q(es)g(not)g(cause)g
(an)f(instruction)h(to)f(b)q(e)h(emitted.)17 b(Instead)224
1579 y(the)d(stac)o(k)f(is)g(up)q(dated)h(so)f(as)g(to)g(ha)o(v)o(e)g
(a)g(sym)o(b)q(olic)e(address,)j(in)e(the)i(new)f(mo)q(de,)f(on)h(top.)
p 521 1608 427 4 v 521 1653 4 45 v 944 1653 V 521 1656
427 4 v 944 1634 45 4 v 944 1632 a Ff(\033)566 1641 y
FD(adr:)k(\()p FE(idNil)p FD(,0,)p Fm(v)807 1645 y Fy(1)822
1641 y FD(,)p Fm(v)852 1645 y Fy(3)869 1641 y FD(\))1004
1644 y(top-of-stac)o(k)224 1705 y FN(The)e(\014nal)e(instructions)i
(emitted)e(are,)h(with)f(their)h(indices)h(in)o(to)e(the)h
FK(DCo)n(de)k FN(|)320 1802 y FF(lw)h(-8\(fp\),v4)283
b FD(;)13 b(\(9\))320 1848 y FF(muli)18 b(v4,4,v5)284
b FD(;)13 b(\(11\))g(or:)k FF(shl)h(v4,2,v5)320 1893
y(add)h(v3,v5,v6)283 b FD(;)13 b(\(12\))320 1939 y FF(lw)19
b(\(v1+v6\),v7)263 b FD(;)13 b(\(13\))224 2036 y FN(A)o(t)20
b FK(DCo)n(de)k FN(index)c(12)f(w)o(e)i(need)g(a)e(third)h(index)g
(register,)i(so)e(it)g(b)q(ecomes)g(necessary)224 2085
y(to)e(emit)f(an)g(instruction)h(whic)o(h)g(adds)g(t)o(w)o(o)f(index)h
(registers.)31 b(Nev)o(ertheless,)21 b(a)d(whole)224
2135 y(instruction)d(has)f(b)q(een)h(sa)o(v)o(ed)f(b)o(y)f(the)i(use)g
(of)e(this)h(new)g(address)h(mo)q(de.)287 2187 y(W)m(e)d(ha)o(v)o(e)h
(created)h(a)f(sym)o(b)q(olic)e(address)j(represen)o(tation)g(whic)o(h)
f(is)g(the)g(union)f(of)h(the)224 2237 y(t)o(w)o(o)k(actual)f(mo)q(des)
g(a)o(v)n(ailable)f(on)i(the)g(mac)o(hine.)25 b(It)17
b(ma)o(y)e(b)q(e)j(noted)f(that)g(this)g(allo)o(ws)224
2287 y(the)c(shado)o(w)g(stac)o(k)g(automaton)d(to)i(accum)o(ulate)g
(sym)o(b)q(olic)e(addresses)15 b(whic)o(h)d(cannot)h(b)q(e)224
2337 y(emitted)i(in)g(a)g(single)g(instruction.)23 b(F)m(or)15
b(example)f(w)o(e)h(migh)o(t)f(end)h(up)h(with)f(an)g(address)224
2387 y(expression)g(whic)o(h)f(has)g(b)q(oth)g(t)o(w)o(o)g(index)g
(registers)h FK(and)k FN(an)14 b(o\013set.)287 2438 y(In)e(the)h(case)g
(that)g(an)f(imp)q(ossible)e(address)k(mo)q(de)d(is)i(created,)g(w)o(e)
g(ha)o(v)o(e)f(to)g(surrender)224 2488 y(the)h(b)q(ene\014t)g(of)d(the)
j(sa)o(v)o(ed)e(instruction)h(b)o(y)g(emitting)d(t)o(w)o(o)j
(instructions.)17 b(The)c FK(Der)n(ef)19 b FN(and)224
2538 y FK(Assign)f FN(pro)q(cedures)f(m)o(ust)d(c)o(hec)o(k)h(for)f
(suc)o(h)i(imp)q(ossible)d(address)i(mo)q(des.)20 b(In)14
b(the)i(ev)o(en)o(t)224 2588 y(that)g(it)e(exists,)i(a)f(preliminary)e
(instruction)j(m)o(ust)e(add)h(the)h(t)o(w)o(o)e(index)h(registers.)24
b(The)224 2638 y(result)19 b(register)h(is)e(then)h(used)g(as)f(the)h
(index)f(register)i(for)e(a)f(single-index-with-o\013set)224
2688 y(instruction.)p eop
%%Page: 148 154
148 153 bop 224 274 a FN(148)371 b FL(CHAPTER)14 b(5.)31
b(INTERPRETIVE)14 b(CODE)g(SELECTION)224 390 y FH(5.2.3)56
b(P)n(assing)19 b(parameters)e(in)h(registers)224 473
y FN(Almost)9 b(all)h FK(RISC)16 b FN(mac)o(hines)10
b(use)h(pro)q(cedure)i(call)c(con)o(v)o(en)o(tions)i(whic)o(h)f(pass)h
(parameters)224 522 y(in)h(registers.)19 b(There)13 b(are)g(adv)n(an)o
(tages)f(at)g(run)o(time)f(from)f(using)i(suc)o(h)h(a)f(con)o(v)o(en)o
(tion)g(ev)o(en)224 572 y(for)18 b(con)o(v)o(en)o(tional)e(mac)o
(hines,)h(but)h(the)g(price)g(for)f(doing)g(so)g(ma)o(y)f(b)q(e)i
(incompatabili)o(t)o(y)224 622 y(with)c(the)g(con)o(v)o(en)o(tions)g
(of)g(other)g(language)f(pro)q(cessors)j(for)e(the)g(same)f(mac)o
(hine.)287 675 y(It)g(is)f(normal)f(for)i(the)g(\014rst)h(few)f(w)o
(ord-sized)g(parameters)g(to)g(b)q(e)g(passed)h(in)e(registers,)224
725 y(and)i(the)g(remainder)f(to)g(b)q(e)h(passed)g(in)f(a)h(parameter)
f(assem)o(bly)f(area,)h(at)g(the)i(top)e(of)g(the)224
774 y(curren)o(t)k(stac)o(k)f(frame.)22 b(F)m(or)16 b(example,)e(the)i
(con)o(v)o(en)o(tion)f(for)g FK(MIPS)22 b FN(pro)q(cessor)17
b(systems)224 824 y(is)g(to)f(pass)i(the)f(\014rst)g(four)g(parameters)
f(in)h(registers)h FM(r)1123 830 y Fz(4)1141 824 y FN({)p
FM(r)1181 830 y Fz(7)1199 824 y FN(.)26 b(In)17 b FK(SP)m(AR)o(C)23
b FN(the)17 b(\014rst)h(six)224 874 y(parameters)d(go)e(in)h(registers)
i FM(o)p FN(0)9 b Ft(\000)h FM(o)p FN(5.)19 b(In)14 b(b)q(oth)g(cases)i
(space)f(is)f(reserv)o(ed)i(on)e(the)h(stac)o(k)224 924
y(for)d(the)h(parameters,)f(so)h(that)f(the)h FK(c)n(al)r(le)n(d)g(pr)n
(o)n(c)n(e)n(dur)n(e)i FN(has)d(a)g(pre-allo)q(cated)h(place)f(to)g(sa)
o(v)o(e)224 974 y(the)j(registers,)g(should)f(that)f(b)q(e)i(necessary)
m(.)287 1026 y(The)c(con)o(v)o(en)o(tions)f(for)g(passing)h(structured)
i(v)n(alue-mo)q(de)8 b(parameters)j(are)g(more)e(v)n(ari-)224
1076 y(able,)14 b(and)f(w)o(ere)i(explored)f(in)g(the)g(c)o(hapter)h
(on)f(run)o(time)f(organization.)287 1129 y(This)f(con)o(v)o(en)o(tion)
g(sets)i(sev)o(eral)f(problems)f(for)g(our)h(co)q(de-selection)h(pro)q
(cess.)19 b(Firstly)m(,)224 1179 y(the)c(calling)e(of)h(functions)g
(during)g(parameter)g(ev)n(aluation)e(is)j(imm)o(ediately)c(made)i
(more)224 1229 y(complex.)23 b(Recall)15 b(that)h(when)g(passing)g
(parameters)g(on)g(the)g(stac)o(k,)h(the)f(stac)o(k)g(seman-)224
1278 y(tics)i(automatically)d(caters)k(for)e(suc)o(h)h(nested)i(calls.)
28 b(Supp)q(ose)19 b(w)o(e)f(wish)f(to)h(mak)o(e)e(the)224
1328 y(pro)q(cedure)g(call)d(|)315 1430 y FF(WriteCard)o(\(GC)o(D\()o
(a,b)o(\),0)o(\);)224 1533 y FN(When)i(parameters)g(are)h(passed)g(on)e
(the)i(stac)o(k,)f(the)g(sequence)i(of)e(ev)o(en)o(ts)h(is)e(as)h
(follo)o(ws.)224 1583 y(First,)i(the)g(zero)g(v)n(alue)e(is)h(pushed)h
(on)f(the)h(stac)o(k.)25 b(Finding)15 b(that)h(the)h(next)g(parameter)
224 1633 y(is)f(a)f(function)g(call,)f(w)o(e)i(push)g(the)g(v)n(alues)f
(of)g FM(b)g FN(then)h FM(a)p FN(,)f(then)h(call)f(the)h(function)f
FK(GCD)t FN(.)224 1682 y(After)d(the)g(function)e(returns,)j(w)o(e)e
(cut)h(the)f(t)o(w)o(o)g(parameters)g(o\013)f(the)i(stac)o(k,)f(and)g
(push)h(the)224 1732 y(v)n(alue)i(returned)h(b)o(y)f(the)g(function.)k
(The)c(parameters)g(of)g FK(WriteCar)n(d)j FN(are)d(no)o(w)g(ready!)287
1785 y(No)o(w)20 b(con)o(trast)h(the)h(situation)e(with)g(the)h
FK(MIPS)26 b FN(arc)o(hitecture.)41 b(F)m(or)20 b(the)h(call)f(of)224
1835 y FK(WriteCar)n(d)i FN(the)c(parameters)g(will)f(b)q(e)i(placed)f
(in)f(registers)j FM(r)1250 1841 y Fz(4)1286 1835 y FN(and)e
FM(r)1390 1841 y Fz(5)1409 1835 y FN(.)30 b(These)19
b(same)224 1885 y(registers)14 b(are)e(used)h(b)o(y)e(parameters)h(of)f
(the)i FK(GCD)j FN(function.)h(The)12 b(conclusion)g(is)f(simple,)224
1934 y(w)o(e)h(cannot)f(transfer)g(the)h(parameters)f(in)o(to)f(their)h
(\014nal)g(p)q(ositions)f(in)h(an)f(arbitrary)h(order.)287
1987 y(Note)g(that)h(this)f(problem)f(is)h(not)g(actually)f(caused)i(b)
o(y)f(the)h(fact)f(that)g(the)h(parameters)224 2037 y(are)17
b(passed)g(in)f(registers.)27 b(It)16 b(is)h(caused)g(b)o(y)f(the)h
(fact)f(that)g(parameters)h(are)f(passed)i(in)224 2087
y(data)f(structures)i(whic)o(h)d(are)h(shared.)27 b(Exactly)16
b(the)h(same)f(problem)f(arises)i(if)f(w)o(e)h(pass)224
2137 y(parameters)e(in)g(\014xed)g(lo)q(cations)g(at)f(the)i(top)f(of)f
(the)h(caller's)g(stac)o(k)h(frame.)j(In)c(practice)224
2186 y FK(RISC)k FN(mac)o(hines)11 b(in)o(v)n(ariably)e(pass)k(the)g
(non-register)f(parameters)g(in)g(a)g(\014xed)g FK(p)n(ar)n(ameter)224
2236 y(assembly)k(ar)n(e)n(a)h FN(at)d(the)h(top)g(of)e(the)i(caller's)
g(stac)o(k)f(frame.)19 b(Th)o(us)14 b(the)h(reasoning)f(of)g(this)224
2286 y(section)h(applies)g(to)f(all)f(parameters,)h(and)g(not)g(just)h
(those)g(whic)o(h)f(are)h(\014nally)e(placed)i(in)224
2336 y(registers.)287 2389 y(The)j(correct)i(w)o(a)o(y)d(to)h(pass)g
(parameters)g(in)o(to)f(\014xed)i(lo)q(cations)e(is)h(to)g(serialize)g
(the)224 2438 y(pro)q(cedure)j(calls.)31 b(This)18 b(necessitates)j
(\014rst)e(ev)n(aluating)e(all)g(those)i(parameters)f(whic)o(h)224
2488 y(require)i(function)f(calls.)33 b(These)21 b(expressions)f(are)g
(ev)n(aluated)f(in)o(to)f(virtual)g(registers.)224 2538
y(When)d(all)f(suc)o(h)h(v)n(alues)g(are)g(complete,)f(the)h(v)n(alues)
g(are)g(copied)g(in)o(to)f(their)h(destination)224 2588
y(p)q(ositions.)i(The)12 b(remainder)e(of)h(the)g(parameters)h(are)f
(then)h(ev)n(aluated)f(and)g(placed)g(in)g(p)q(o-)224
2638 y(sition,)h(in)h(an)o(y)f(order.)19 b(Note)13 b(that)g(there)h(ma)
o(y)d(b)q(e)j(non-ob)o(vious)e(cases,)i(suc)o(h)f(as)g(v)n(ariable)224
2688 y(designators)i(whic)o(h)f(require)g(function)g(ev)n(aluation)e
(in)i(arra)o(y)f(index)h(calculations.)p eop
%%Page: 149 155
149 154 bop 224 274 a FL(5.3.)31 b(MA)o(CHINES)15 b(WITH)e(COMPLEX)i
(ADDRESS)e(MODES)315 b FN(149)287 390 y(F)m(or)14 b(our)h(example)e
(pro)q(cedure)k(call,)d(the)h(sequence)i(of)d(ev)o(en)o(ts)i(migh)o(t)c
(b)q(e)k(as)e(follo)o(ws.)224 440 y FK(WriteCar)n(d)23
b FN(has)d(t)o(w)o(o)f(parameters,)i(one)e(of)g(whic)o(h)h(in)o(v)o
(olv)o(es)e(a)i(function)f(call,)g(so)h(w)o(e)224 490
y(m)o(ust)f(ev)n(aluate)h(this)g(parameter)g(\014rst.)37
b(The)20 b(function)g(call)f(of)g FK(GCD)24 b FN(in)o(v)o(olv)o(es)19
b(only)224 540 y(simple)11 b(parameters)i(so)f(that)h(w)o(e)f(fetc)o(h)
h(the)g(v)n(alue)f(of)g FM(a)g FN(and)h(place)f(it)g(in)g(register)i
FM(r)1556 546 y Fz(4)1574 540 y FN(,)e(and)224 590 y(the)j(v)n(alue)f
(of)g FM(b)g FN(in)g FM(r)552 596 y Fz(5)571 590 y FN(.)20
b(The)15 b(function)f FK(GCD)k FN(is)d(no)o(w)f(called.)19
b(The)c(function)f(returns)i(its)224 640 y(result)g(in)d(register)j
FM(r)557 646 y Fz(2)589 640 y FN(in)e(the)h FK(MIPS)20
b FN(con)o(v)o(en)o(tions,)14 b(so)h(w)o(e)f(cop)o(y)h(the)f(return)i
(register)f(to)224 689 y FM(r)243 695 y Fz(4)262 689
y FN(.)21 b(Finally)m(,)12 b(w)o(e)j(cop)o(y)g(the)g(zero)h(register)g
FM(r)934 695 y FB(z)968 689 y FN(in)o(to)e FM(r)1072
695 y Fz(5)1090 689 y FN(,)h(in)f(order)h(to)g(place)g(a)g(zero)g(in)g
(the)224 739 y(second)g(p)q(osition.)j(W)m(e)13 b(are)i(no)o(w)e
(ready!)287 791 y(In)j(practice)h(it)f(is)g(sensible)h(to)f(ev)n
(aluate)g(all)f(parameters)h(in)g(an)g(order)h(whic)o(h)f(ev)n(al-)224
841 y(uates)21 b(those)f(that)g(use)g(the)g(most)e(registers)k
(\014rst.)35 b(This)20 b(places)g(the)g(least)g FO(register)224
891 y(pressure)e FN(on)i(the)g(register)h(binder.)36
b(The)21 b(reason)f(is)g(simple.)34 b(As)20 b(eac)o(h)h(parameter)224
940 y(is)c(transferred)i(in)o(to)d(its)g(parameter)h(register,)h(the)g
(n)o(um)o(b)q(er)e(of)g(registers)i(a)o(v)n(ailable)d(for)224
990 y(expression)g(ev)n(aluation)e(is)h(decreased)i(b)o(y)d(one.)287
1042 y(W)m(e)h(shall)g(assume)h(that)g(the)g(fron)o(t-end)g(tree)h(w)o
(alk)o(er)f(has)g(determined)g(the)g(optimal)224 1092
y(parameter)e(ev)n(aluation)e(order.)18 b(It)12 b(is)h(also)f
(necessary)i(for)e(the)h(fron)o(t-end)g(to)f(indicate)h(the)224
1141 y(p)q(osition)h(of)g(the)h(parameter,)e(so)i(that)f(it)g(is)g(kno)
o(wn)g(whether)h(to)g(put)f(it)g(in)o(to)g(a)g(register,)224
1191 y(or)k(in)o(to)e(the)i(parameter)f(assem)o(bly)f(area)h(in)g
(memory)m(.)25 b(The)18 b(seman)o(tics)f(of)g(the)g FG(mkPar)224
1241 y FN(instruction)e(m)o(ust)d(th)o(us)j(b)q(e)f(extended)i(to)d
(carry)i(this)f(information.)224 1389 y FI(5.3)67 b(Mac)n(hines)22
b(with)h(complex)g(address)f(mo)r(des)224 1483 y FN(The)16
b(main)d(attribute)i(whic)o(h)g(distinguishes)g(the)h(programming)11
b(mo)q(del)j(of)g FK(CISC)21 b FN(from)224 1533 y FK(RISC)h
FN(mac)o(hines)13 b(is)i(the)g(existence)i(of)d(instructions)i(whic)o
(h)e(tak)o(e)h(their)g(op)q(erands)h(from)224 1583 y(memory)m(.)f
(Since)e(the)g(structure)h(of)e(the)h FK(Symb)n(olicV)m(alueDescriptor)
j FN(t)o(yp)q(e)c(in)g(some)g(sense)224 1632 y(mirrors)g(the)h
(capabilities)f(of)g(the)h(mac)o(hine)e(address)j(mo)q(des,)d(w)o(e)i
(m)o(ust)e(exp)q(ect)k(the)e(sym-)224 1682 y(b)q(olic)h(address)h(v)n
(alues)f(of)f(the)h(union)g(to)f(b)q(e)i(more)e(complex.)287
1734 y(There)k(are)g(t)o(w)o(o)f(sources)i(for)e(this)h(additional)d
(complexit)o(y)m(.)23 b(Firstly)m(,)16 b(the)h(sym)o(b)q(olic)224
1784 y(address)11 b(v)n(alues)f(m)o(ust)e(ha)o(v)o(e)i(su\016cien)o(t)g
(structure)i(to)d(represen)o(t)j(all)d(of)g(the)h(address)h(mo)q(des)
224 1834 y(whic)o(h)17 b(the)g(co)q(de)h(selector)g(is)f(to)f(use.)28
b(There)18 b(is)e(a)h(further)g(di\016cult)o(y)f(ho)o(w)o(ev)o(er.)27
b(Most)224 1883 y(mac)o(hines)15 b(in)h(this)g(traditional)e(mo)q(del)h
(ha)o(v)o(e)h(restrictions)h(on)f(the)g(purp)q(oses)i(for)d(whic)o(h)
224 1933 y(particular)i(mac)o(hine)f(registers)j(ma)o(y)d(b)q(e)i
(used.)29 b(The)18 b(real)f(registers)i(are)e(seman)o(tically)224
1983 y(quite)d(di\013eren)o(t)g(from)e(the)i(nicely)f(uniform)e(and)i
(in)o(terc)o(hangable)h(virtual)e(registers)j(that)224
2033 y(w)o(e)k(ha)o(v)o(e)g(considered)h(so)f(far.)32
b(With)19 b(our)f(reference)k(arc)o(hitecture)e(w)o(e)f(ma)o(y)e
(separate)224 2083 y(these)22 b(t)o(w)o(o)f(sources)h(of)e(complexit)o
(y)m(.)36 b(The)21 b(shado)o(w)g(stac)o(k)g(automaton)d(m)o(ust)i(mo)q
(del)224 2132 y(the)c(complexit)o(y)d(of)h(the)i(address)g(mo)q(des,)e
(while)h(the)g(register)h(binder)f(m)o(ust)f(determine)224
2182 y(the)j(uses)h(of)d(eac)o(h)i(virtual)e(register)j(so)e(that)g(an)
g(appropriate)g(actual)g(register)h(ma)o(y)e(b)q(e)224
2232 y(allo)q(cated.)224 2358 y FH(5.3.1)56 b(A)19 b(CISC)g(mac)n(hine)
f(mo)r(del)224 2439 y FN(F)m(or)f(our)h(examples,)f(w)o(e)g(shall)g
(use)h(a)f(mac)o(hine)f(mo)q(del)g(based)i(on)f(the)h(instruction)f
(set)224 2488 y(and)g(address)h(mo)q(des)e(of)g(the)i
FK(Intel-386)k FN(and)17 b FK(486)1051 2473 y Fz(4)1070
2488 y FN(.)27 b(This)16 b(mo)q(del)f(illustrates)i(most)f(of)p
224 2531 577 2 v 271 2558 a Fy(4)288 2569 y Fx(The)9
b(follo)o(wing)e(deals)h(with)g(the)h(\015at)f(address)f(mo)q(del)g(of)
i(the)f Fu(Intel)k Fx(pro)q(cessors.)g(This)d(address)e(mo)q(del)224
2609 y(is)13 b(used)f(in)g(OS/2,)h(Windo)o(ws)f(NT)i(and)e(the)g(v)n
(arious)f Fu(UNIX)19 b Fx(implemen)o(ta)o(tio)o(ns.)d(When)c(the)g
Fu(Intel-x86)224 2648 y Fx(is)g(used)e(in)h(\\16-bit)e(segmen)o(ted")f
(address)h(mo)q(de,)h(as)h(it)g(is)g(b)o(y)f(MS-DOS,)h(the)g(follo)o
(wing)e(is)i(rather)f(more)224 2688 y(complex.)p eop
%%Page: 150 156
150 155 bop 224 274 a FN(150)371 b FL(CHAPTER)14 b(5.)31
b(INTERPRETIVE)14 b(CODE)g(SELECTION)224 390 y FN(the)20
b(di\016culties)e(that)g(suc)o(h)i(mac)o(hines)d(ma)o(y)g(place)i(in)f
(the)h(w)o(a)o(y)f(of)g(in)o(terpretiv)o(e)h(co)q(de)224
440 y(selection.)g(Earlier)12 b(mo)q(dels)f(of)h(the)h
FK(Intel-x86)18 b FN(family)9 b(are)k(more)e(restrictiv)o(e)j(in)e
(their)g(use)224 490 y(of)i(registers)h(than)f(the)g
FK(386)21 b FN(and)13 b(later)h(mo)q(dels.)287 564 y(Compared)c(to)i
(the)g(load-store)f(arc)o(hitectures,)j(the)f(most)d(striking)h
(di\013erence)j(is)d(that)224 614 y(most)j(instructions)h(are)g(able)f
(to)g(tak)o(e)h(one)f(of)g(their)h(op)q(erands)g(from)e(memory)m(.)k(W)
m(e)d(will)224 664 y(try)g(therefore)h(to)f(use)g(op)q(erands)g
(directly)g(from)e(memory)f(whenev)o(er)k(p)q(ossible,)e(in)h(order)224
714 y(to)g(a)o(v)o(oid)f(ha)o(ving)f(to)i(load)f(op)q(erands)i(with)e
(separate)j(instructions)1307 698 y Fz(5)1326 714 y FN(.)287
788 y(The)e FK(V)l(AL)g FN(whic)o(h)g(w)o(e)h(shall)e(use)i(is)g
(similar)c(to)j(the)h(actual)f FK(iap386)21 b FN(mac)o(hine)13
b(except)224 837 y(for)k(the)g(follo)o(wing)e(asp)q(ects.)28
b(W)m(e)17 b(shall)f(separate)i(the)f(uses)i(of)d(the)h(\\)p
FG(mov)p FN(")f(instruction)224 887 y(for)g(loads,)f(stores,)i(and)e
(register-to-register)j(transfers)f(b)o(y)e(using)h(di\013eren)o(t)g
(virtual)f(in-)224 937 y(structions)h(for)e(the)h(three)h(cases.)21
b(W)m(e)14 b(shall)g(call)f(these)j(instructions)f(\\)p
FG(lw,)21 b(sw,)g(move)p FN(")224 987 y(resp)q(ectiv)o(ely)m(.)e
(During)11 b(the)i(register)g(binding)e(pro)q(cess)j(w)o(e)f(will)d
(con)o(v)o(ert)j(all)e(of)g(these)j(in)o(to)224 1037
y(\\)p FG(mov,movzbl,movzwl,)o(movsb)o(l)p FN(")d(or)j(\\)p
FG(movswl)p FN(")e(instructions,)i(as)g(required.)287
1111 y(A)e(rather)i(more)d(striking)h(c)o(hange)h(is)f(made)g(to)g(all)
f(the)i(op)q(erate)h(instructions.)k(In)13 b(the)224
1160 y(real)e(mac)o(hine,)e(these)j(all)d(o)o(v)o(erwrite)i(one)f(of)g
(their)h(op)q(erands)g(as)f(the)h(destination)g(register.)224
1210 y(In)16 b(the)h FK(V)l(AL)e FN(these)j(all)c(get)i(an)g(extra)h
(op)q(erand,)f(so)g(that)g(the)h(source)g(and)e(destination)224
1260 y(op)q(erands)i(are)g(alw)o(a)o(ys)e(separate.)25
b(F)m(or)15 b(example,)g(the)i(\\)p FG(add)p FN(")e(instruction)h(in)f
(the)i FK(V)l(AL)224 1310 y FN(has)12 b(three)g(op)q(erands)g(rather)g
(than)f(t)o(w)o(o.)17 b(In)11 b(this)g(w)o(a)o(y)g(w)o(e)g(can)g
(ensure)i(that)e(ev)o(ery)h(virtual)224 1360 y(register)h(has)e(a)g
(single)g(de\014nition)g(p)q(oin)o(t.)16 b(The)c(register)g(binder)g
(will)d(attempt)i(to)g(allo)q(cate)224 1409 y(registers)17
b(so)d(that)h(the)g(source)h(and)f(destination)f(are)h(the)h(same,)d
(as)i(is)f(the)i(case)f(for)g(the)224 1459 y(real)h(\\)p
FG(add)p FN(")e(instruction.)22 b(If)15 b(it)g(is)g(not)g(p)q(ossible)g
(to)g(allo)q(cate)g(the)h(same)e(actual)h(register)224
1509 y(to)e(b)q(oth)g(virtual)g(registers)h(then)g(the)f(instruction)h
(m)o(ust)e(b)q(e)h(preceeded)j(b)o(y)d(a)f(register)i(to)224
1559 y(register)g(cop)o(y)m(.)j(In)12 b(this)g(w)o(a)o(y)g(w)o(e)g(a)o
(v)o(oid)f(the)i(destruction)h(of)d(v)n(alues)h(in)g(registers)i(un)o
(til)d(w)o(e)224 1609 y(kno)o(w)h(that)h(the)g(v)n(alues)f(are)g(no)g
(longer)h(needed.)19 b(In)12 b(an)o(y)g(case,)h(this)f(mo)q
(di\014cation)e(mak)o(es)224 1659 y(the)15 b FK(V)l(AL)e
FN(m)o(uc)o(h)g(more)g(similar)e(to)j(the)g(load-store)g(mo)q(del)f
(describ)q(ed)i(so)f(far.)287 1733 y(The)h(mac)o(hine)f(mo)q(del)g(has)
h(a)g(large)g(n)o(um)o(b)q(er)g(of)f(memory)f(address)k(mo)q(des,)d
(but)i(the)224 1782 y(most)c(general)g(one)h(considered)h(here)g(is)e
FK(b)n(ase)n(d,)i(indexe)n(d,)h(sc)n(ale)n(d)t FN(.)i(In)c(this)g
(address)g(mo)q(de)224 1832 y(an)h(address)i(consists)f(of)f(the)h(sum)
e(of)h(a)g(base)h(register,)g(an)f(index)g(register)h(whic)o(h)g(is)f
(op-)224 1882 y(tionally)d(scaled)h(b)o(y)g(either)h(t)o(w)o(o)f(or)g
(four,)g(and)g(an)f(o\013set)i(whic)o(h)f(ma)o(y)f(in)o(v)o(olv)o(e)f
(a)i(sym)o(b)q(olic)224 1932 y(name.)17 b(Either)d(or)f(b)q(oth)h(of)f
(the)h(registers)h(ma)o(y)c(b)q(e)j(omitted,)e(the)i(o\013set)g
(expression)g(and)224 1982 y(the)d(scale)g(factor)g(ma)o(y)d(also)i(b)q
(e)h(omitted,)f(obtaining)f(all)g(other)i(address)h(mo)q(des)e(as)g(sp)
q(ecial)224 2031 y(cases)16 b(of)d(this)h(mo)q(de.)287
2105 y(In)e(our)g(sym)o(b)q(olic)e(represen)o(tation,)k(an)d(address)j
(expression)f(consists)g(of)f(six)f(\014elds)i(|)224
2155 y(base)j(register,)g(index)f(register,)h(index)f(scale,)h(sym)o(b)
q(olic)d(name,)h(o\013set,)i(and)f(t)o(yp)q(e.)22 b(The)224
2205 y(t)o(yp)q(e)17 b(denotes)g(whether)g(the)g(address)g(is)f(kno)o
(wn)g(to)f(b)q(e)i(that)f(of)f(a)h(signed)g(or)g(unsigned)224
2255 y(b)o(yte,)d(and)e(so)h(on.)17 b(Address)d(mo)q(des)d(whic)o(h)h
(ma)o(y)e(b)q(e)j(though)o(t)e(of)h(as)g(sp)q(ecial)g(cases)h(of)e
(this)224 2305 y(general)k(mo)q(de)d(will)h(b)q(e)h(p)q(ermitted.)287
2379 y(The)h(most)e(imp)q(ortan)o(t)f(asp)q(ect)k(of)e(the)h(design)f
(of)g(the)h(shado)o(w)f(stac)o(k)h(for)f(this)h FK(CISC)224
2428 y FN(mac)o(hine)d(mo)q(del)e(is)j(that)f(w)o(e)h(in)o(tro)q(duce)g
(a)f FK(symb)n(olic)h(value)j FN(mem)o(b)q(er)11 b(of)h(the)h(union,)f
(with)224 2478 y(a)i(structure)i(matc)o(hing)c(that)i(of)f(the)i(sym)o
(b)q(olic)d(addresses.)p 224 2610 577 2 v 271 2636 a
Fy(5)288 2648 y Fx(Suc)o(h)f(a)i(strategy)d(uses)i(few)o(er)h
(instruction)o(s,)d(and)i(uses)g(few)o(er)g(registers,)f(but)h(exp)q
(oses)f(few)o(er)h(opti-)224 2688 y(mization)d(opp)q(ortunities.)p
eop
%%Page: 151 157
151 156 bop 224 274 a FL(5.3.)31 b(MA)o(CHINES)15 b(WITH)e(COMPLEX)i
(ADDRESS)e(MODES)315 b FN(151)295 381 y FF(TYPE)18 b(TagType)37
b(=)19 b(\(literal,r)o(eg)o(ist)o(er,)o(cc)o(Res)o(ul)o(t,s)o(ymA)o(dr)
o(,sy)o(mV)o(al\))o(;)393 427 y(ScaleTag)e(=)i(\(noScale,s)o(ca)o(lX2)o
(,sc)o(al)o(X4\))o(;)393 472 y(SymbolicVa)o(lue)o(Des)o(cr)o(ipt)o(or)d
(=)j(RECORD)491 518 y(CASE)f(tag)h(:)g(TagType)e(OF)491
564 y(|)j(register)c(:)j(vReg)38 b(:)19 b(VRegister;)491
609 y(|)h(ccResult)c(:)j(test)38 b(:)19 b(Instructio)o(n;)d(\(*)j
(dcode)f(*\))491 655 y(|)i(symAdr,)d(symVal)g(:)746 701
y(type)38 b(:)19 b(Object;)746 746 y(bReg)38 b(:)19 b(VRegister;)746
792 y(iReg)38 b(:)19 b(VRegister;)746 838 y(scale)f(:)h(ScaleTag;)746
883 y(ofst)38 b(:)19 b(INTEGER;)746 929 y(idnt)38 b(:)19
b(HashBucket)o(Typ)o(e;)491 975 y(|)h(literal)d(:)38
b(litW)g(:)19 b(WORD;)491 1020 y(END;)f(\(*)h(case)f(*\))452
1066 y(END;)g(\(*)h(record)e(*\))224 1154 y FN(The)c(new)f(v)n(alue)g
(t)o(yp)q(e)g(allo)o(ws)f(us)h(to)g(p)q(erform)f FO(sym)o(b)q(olic)h
(dereferences)d FN(on)j(addresses.)224 1204 y(When)k(our)f
FK(IR)i FN(calls)d(for)h(an)g(address)h(v)n(alue)e(to)h(b)q(e)h
(dereferenced)i(w)o(e)d(do)g(not)g(emit)f(an)o(y)224
1254 y(instruction.)k(Instead,)13 b(w)o(e)f(c)o(hange)g(the)g(tag)g(v)n
(alue)f(from)f FK(symA)n(dr)16 b FN(to)11 b(the)i FK(symV)m(al)i
FN(v)n(alue,)224 1304 y(and)i(simply)d(mark)h(the)h(stac)o(k)h(elemen)o
(t)f(with)g(the)h(datum)e(t)o(yp)q(e.)26 b(This)16 b(represen)o(ts)j
(the)224 1354 y(fact)e(that)f(the)i(top)e(of)g(the)h(shado)o(w)f(stac)o
(k)h(is)g(the)g(v)n(alue)e(whic)o(h)i(w)o(ould)f(b)q(e)h(obtained)f
FK(if)224 1404 y(the)g(given)g(addr)n(ess)g(was)f(to)h(b)n(e)f(der)n
(efer)n(enc)n(e)n(d)p FN(.)20 b(W)m(e)15 b(wish)f(to)h(dela)o(y)f(the)h
(actual)g(emission)224 1453 y(of)k(an)f(instruction)i(whic)o(h)f(p)q
(erforms)f(the)i(dereference)h(b)q(ecause)g(w)o(e)e(ma)o(y)e(b)q(e)j
(able)e(to)224 1503 y(incorp)q(orate)g(the)f(load)f(in)o(to)h(an)f
(address)i(mo)q(de)e(of)h(an)f(op)q(erate)i(instruction)g(with)e(one)
224 1553 y(op)q(erand)f(in)e(memory)m(.)287 1603 y(Of)i(course)i(the)f
(correctness)j(of)c(this)g(tec)o(hnique)i(m)o(ust)e(b)q(e)h(critically)
e(examined.)22 b(In)224 1653 y(e\013ect,)e(the)f FK(IR)g
FN(has)f(called)f(for)h(a)f(v)n(alue)g(to)h(b)q(e)g(fetc)o(hed)h(from)d
(memory)f(and)i(w)o(e)h(wish)224 1703 y(to)d(dela)o(y)f(this)g(step)i
(in)d(the)j(hop)q(e)e(of)g(sa)o(ving)g(an)g(instruction.)20
b(W)m(e)14 b(m)o(ust)f(b)q(e)i(completely)224 1752 y(sure)g(that)f
(when)h(w)o(e)f(\014nally)f(fetc)o(h)h(the)h(op)q(erand,)f(it)f(is)h
(still)f(the)h(same)f(v)n(alue.)18 b(Consider)224 1802
y(ev)n(aluation)11 b(of)g(the)h(expression)h(\()p FK(var)p
FN(+)p FK(fx)5 b FN(\(\)\))q(.)17 b(Our)c(co)q(de)f(selector)i(will)c
(dela)o(y)h(dereference)224 1852 y(of)j(the)g(v)n(alue)g(of)f
FK(var)18 b FN(hoping)13 b(to)h(fold)f(it)h(in)o(to)f(the)i(add)e
(instruction.)19 b(Indeed)c(w)o(e)f(will)f(b)q(e)224
1902 y(successful)h(in)d(this)h(quest,)g(since)g(the)h(function)e
(result)h(will)f(b)q(e)h(in)f(a)g(register)i(and)e(w)o(e)h(ma)o(y)224
1952 y(use)j(the)g(comm)o(utati)o(v)o(e)d(la)o(w)g(to)i(generate)h(the)
g(virtual)e(instructions)h(|)320 2038 y FF(call)k(fx)384
b FD(;)50 b FE(r)n(eturn)13 b(value)f(is)h(in)g(e)n(ax)320
2084 y FF(add)19 b(eax,var,v)o(1)224 2172 y FN(This)14
b(sequence)i(is)e(preferred)i(to)d(the)i(alternativ)o(e)f(|)320
2258 y FF(lw)19 b(var,v1)320 2304 y(call)f(fx)384 b FD(;)50
b FE(r)n(eturn)13 b(value)f(is)h(in)g(e)n(ax)320 2350
y FF(add)19 b(v1,eax,v2)224 2438 y FN(The)e(result)f(will)e(b)q(e)j
(the)f(same,)f(pro)o(vided)g(that)h(the)g(function)g
FK(fx)k FN(do)q(es)d(not)f(ha)o(v)o(e)f(side-)224 2488
y(e\013ects)h(whic)o(h)e(mo)q(dify)e(the)i(v)n(alue)f(of)h
FK(var)p FN(.)287 2538 y(Programmi)o(ng)7 b(languages)i(suc)o(h)h(as)f
FK(Mo)n(dula-2)e FN(,)i FM(C)j FN(and)e FK(A)n(da)i FN(allo)o(w)c(the)i
(comm)o(utativ)o(e)224 2588 y(la)o(w)j(to)g(b)q(e)g(used)h(to)f
(rearrange)h(suc)o(h)g(expressions,)h(and)e(p)q(ermit)f(similar)f
(freedom)h(in)h(the)224 2638 y(order)i(of)e(ev)n(aluation)g(of)g
(parameters,)g(arra)o(y)h(indices)g(and)g(the)g(lik)o(e.)k(Certainly)13
b(in)g(all)g(of)224 2688 y(these)18 b(languages)e(a)g(program)f(whic)o
(h)h(ga)o(v)o(e)g(di\013eren)o(t)h(results)h(dep)q(ending)f(on)f(whic)o
(h)g(of)p eop
%%Page: 152 158
152 157 bop 224 274 a FN(152)371 b FL(CHAPTER)14 b(5.)31
b(INTERPRETIVE)14 b(CODE)g(SELECTION)224 390 y FN(the)j(ab)q(o)o(v)o(e)
e(instruction)h(sequences)i(w)o(as)e(used)g(w)o(ould)f(b)q(e)i
(considered)g(to)e(b)q(e)h(incorrect.)224 440 y(Ho)o(w)o(ev)o(er,)j
(for)e(languages)g(whic)o(h)g(demand)f(strict)i(order)h(of)d(ev)n
(aluation)g(of)h(expression)224 490 y(comp)q(onen)o(ts,)d(it)g(ma)o(y)e
(b)q(e)j(necessary)h(to)e(b)q(e)h(more)f(careful.)19
b(What)14 b(is)g(required,)h(in)f(suc)o(h)224 540 y(a)k(strict)g(case,)
h(is)f(the)g(guaran)o(tee)g(that)g(whenev)o(er)h(a)e(function)h(is)f
(ab)q(out)h(to)f(b)q(e)i(called)224 590 y(the)c(shado)o(w)f(stac)o(k)h
(will)e(b)q(e)i(c)o(hec)o(k)o(ed.)20 b(All)14 b(sym)o(b)q(olic)e(v)n
(alues)i(m)o(ust)f(then)i(b)q(e)g FK(r)n(e)n(alize)n(d)f
FN(b)o(y)224 640 y(b)q(eing)g(loaded)g(in)o(to)f(registers.)287
689 y(F)m(rom)j(the)j(descriptor)h(t)o(yp)q(e)e(declaration)g(it)g
(will)f(b)q(e)i(seen)h(that)e(there)i(is)e(another)224
739 y(new)d(tag-t)o(yp)q(e)e(v)n(alue,)g FK(c)n(cR)n(esult)p
FN(.)18 b(F)m(or)13 b(the)h(mac)o(hine)f(mo)q(del)f(of)h(this)h
(section)g(an)g(alterna-)224 789 y(tiv)o(e)j(handling)e(of)g(the)i
(condition)f(co)q(des)h(is)f(suggested.)27 b(In)16 b(this)h(case)g(the)
g(comparison)224 839 y(op)q(eration)e(is)g(carried)h(out)e(immediately)
l(,)e(with)j(the)g(stac)o(k)g(elemen)o(t)g(simply)e(noting)h(the)224
889 y(in)o(tended)f(seman)o(tics.)k(This)12 b(lo)o(w)o(ers)g(the)h
(register)g(pressure,)h(in)e(the)h(ev)o(en)o(t)f(that)g(either)h(or)224
938 y(b)q(oth)j(of)e(the)i(register)g(op)q(erands)g(ha)o(v)o(e)f(their)
h(\014nal)e(use)i(at)f(the)h(comparison.)k(Ho)o(w)o(ev)o(er,)224
988 y(it)15 b(is)h(necessary)h(for)e(all)f(the)i FK(push)j
FN(pro)q(cedures)f(to)d(c)o(hec)o(k)i(if)d(the)i(top-of-stac)o(k)f(is)g
(one)h(of)224 1038 y(these)h(v)n(alues)d(b)q(efore)i(an)o(y)e
(instruction)i(is)e(emitted)g(whic)o(h)h(could)g(o)o(v)o(erwrite)g(the)
h(condi-)224 1088 y(tion)f(co)q(des.)24 b(If)15 b(that)g(is)h(the)g
(case,)g(the)g(v)n(alue)f(m)o(ust)f(b)q(e)i(loaded)f(in)o(to)g(a)g
(virtual)f(register)224 1138 y(b)o(y)g(a)g(set)g(op)q(eration.)224
1254 y FH(5.3.2)56 b(Generating)17 b(co)r(de)h(for)h(the)f(mo)r(del)224
1330 y FN(W)m(e)h(shall)g(consider)h(just)g(a)f(few)g(k)o(ey)g(steps)i
(in)e(the)h(op)q(eration)f(of)g(the)h(shado)o(w)f(stac)o(k)224
1380 y(automaton,)13 b(to)i(illustrate)g(the)h(general)f(metho)q(d.)21
b(W)m(e)14 b(shall)g(consider)i(the)g(pro)q(cedures)224
1430 y FK(Der)n(ef,)f(Assign,)f(PshA)n(dr,)h(A)n(dd)j
FN(and)c FK(R)n(elop)p FN(.)224 1538 y FO(The)i(dereference)d
(instruction)o(s)224 1614 y FN(In)i(this)f(case,)h(the)g(co)q(de)g(is)f
(straigh)o(tforw)o(ard.)19 b(W)m(e)14 b(mak)o(e)e(sure)k(that)e(the)h
(top)f(of)g(stac)o(k)g(is)224 1664 y(a)g(sym)o(b)q(olic)e(address,)j
(and)e(mo)q(dify)f(the)i(tag)g(to)g(mak)o(e)e(it)i(a)f(sym)o(b)q(olic)f
(v)n(alue.)295 1748 y FF(PROCEDURE)k(Deref\(elem)g(:)j(ValueType\);)d
(\(*)j(word,)e(halfword)g(etc)h(*\))295 1794 y(BEGIN)335
1840 y(MakeAddr)o(ess)o(\(t)o(os\))o(;)95 b(\(*)19 b(make)f(tos)g(into)
g(adr)h(if)g(needed)e(*\))335 1885 y(WITH)h(shadow[t)o(os])e(DO)374
1931 y(tag)i(:=)h(symVal;)374 1977 y(type)f(:=)h(typeMap[e)o(le)o(m];)
335 2022 y(END;)f(\(*)g(leave)g(other)g(fields)f(unchanged)f(*\))295
2068 y(END)j(Deref;)224 2155 y FN(The)d(magic)d(is)i(all)f(in)g(the)i
FK(MakeA)n(ddr)n(ess)i FN(pro)q(cedure.)24 b(This)15
b(pro)q(cedure)i(m)o(ust)d(tak)o(e)h(the)224 2204 y(stac)o(k)g(v)n
(alue,)d(and)i(con)o(v)o(ert)h(it)e(in)o(to)g(an)h(address)h(if)e(it)h
(is)g(not)f(already)h(an)g(address.)287 2254 y(The)i
FK(Emit)j FN(pro)q(cedures)f(are)e(mo)q(di\014ed)e(so)i(that)f(for)h
(the)g(case)g(of)f(instructions)i(with)224 2304 y(memory)10
b(op)q(erands)i(all)e(six)i(\014elds)g(of)f(the)h(sym)o(b)q(olic)e
(address)i(are)g(passed)h(as)f(parameters.)224 2354 y(Figure)i(5.9)f
(is)h(the)h FK(CISC)k FN(v)o(ersion)14 b(of)f(the)i(mak)o(e)d(address)j
(pro)q(cedure.)20 b(Note)15 b(that)f(if)f(the)224 2404
y(v)n(alue)f(is)f(already)h(a)g(sym)o(b)q(olic)e(v)n(alue,)h(then)i
(that)f(v)n(alue)f(m)o(ust)g(b)q(e)h(loaded)g(in)o(to)f(a)h(register,)
224 2453 y(and)i(that)g(b)q(ecomes)g(the)h(base)f(register)h(of)e(a)h
(new)g(sym)o(b)q(olic)e(address.)224 2561 y FO(The)k(assign)e
(instruction)o(s)224 2638 y FN(The)21 b(assignmen)o(t)e(op)q(eration)h
(nicely)f(illustrates)h(the)h(di\016cult)o(y)e(of)g(the)i(arc)o
(hitecture.)224 2688 y(The)e(v)n(alue)e(to)h(b)q(e)g(assigned)h(could)e
(initially)f(b)q(e)i(of)f(an)o(y)h(tag)f(t)o(yp)q(e.)31
b(W)m(e)18 b(migh)o(t)d(insist)p eop
%%Page: 153 159
153 158 bop 224 274 a FL(5.3.)31 b(MA)o(CHINES)15 b(WITH)e(COMPLEX)i
(ADDRESS)e(MODES)315 b FN(153)p 270 392 1350 2 v 269
438 2 46 v 295 424 a FF(PROCEDURE)16 b(MakeAddress)o(\(l)o(ev)g(:)j
(StackIndex\))o(;)p 1619 438 V 269 483 V 335 470 a(\(*)f(post)g(:)i
(shadow[le)o(v])c(is)j(a)g(sym)g(adr)f(*\))p 1619 483
V 269 529 V 335 515 a(VAR)g(idx)g(:)i(VRegister)o(;)p
1619 529 V 269 575 V 295 561 a(BEGIN)p 1619 575 V 269
620 V 335 607 a(IF)e(shadow[lev)o(].t)o(ag)e(<>)j(symAdr)e(THEN)h(\(*)h
(load)f(it)h(*\))p 1619 620 V 269 666 V 374 652 a(WITH)f(shadow[le)o
(v])e(DO)p 1619 666 V 269 712 V 413 698 a(IF)j(tag)f(=)h(symVal)f(THEN)
p 1619 712 V 269 757 V 452 744 a(NewVReg\(id)o(x\);)e(\(*)j(load)f
(into)g(new)g(register)f(*\))p 1619 757 V 269 803 V 452
789 a(EmitMtR\(lw)o(,bR)o(eg)o(,iR)o(eg)o(,sc)o(ale)o(,o)o(fst)o(,i)o
(dnt)o(,id)o(x\))o(;)p 1619 803 V 269 849 V 413 835 a(ELSE)p
1619 849 V 269 894 V 452 881 a(Assert\(tag)f(=)j(register,")o(bad)d
(address)h(conversio)o(n")o(\);)p 1619 894 V 269 940
V 452 926 a(idx)i(:=)f(vReg;)p 1619 940 V 269 986 V 413
972 a(END;)p 1619 986 V 269 1031 V 413 1018 a(InitAddre)o(ssE)o(lem)o
(\(l)o(ev,)o(id)o(x,n)o(oRe)o(g,)o(sca)o(le)o(1,i)o(dNi)o(l,)o(0\);)p
1619 1031 V 269 1077 V 413 1063 a(\(*)h(make)f(register)e(the)j(base)f
(reg)g(of)h(new)g(symAdr)e(*\))p 1619 1077 V 269 1123
V 374 1109 a(END;)h(\(*)h(with)f(*\))p 1619 1123 V 269
1168 V 335 1155 a(END;)g(\(*)g(if)h(*\))p 1619 1168 V
269 1214 V 295 1200 a(END)g(MakeAddre)o(ss)o(;)p 1619
1214 V 270 1216 1350 2 v 517 1332 a FN(Figure)14 b(5.9:)j(The)d
FK(CISC)20 b FN(v)o(ersion)14 b(of)f FK(MakeA)n(ddr)n(ess)224
1513 y FN(that)18 b(the)f(v)n(alue)g(b)q(e)h(loaded)e(in)o(to)h(a)g
(register,)h(as)f(w)o(e)h(w)o(ere)g(obliged)e(to)h(do)g(in)g(the)g
(case)224 1562 y(of)f(the)g(load-store)g(arc)o(hitecture,)h(and)f(then)
g(assigned.)24 b(Ho)o(w)o(ev)o(er)16 b(it)g(is)f(w)o(asteful)h(to)g(do)
224 1612 y(so.)23 b(The)16 b(kinds)f(of)g(v)n(alues)g(whic)o(h)h(are)g
(able)f(to)g(b)q(e)h(directly)g(assigned)g(are)g(|)f(v)n(alues)g(in)224
1662 y(registers,)k(literal)d(v)n(alues,)h(and)f(sym)o(b)q(olic)f
(addresses)k(without)d(address)i(registers.)29 b(W)m(e)224
1712 y(th)o(us)14 b(need)h(a)e(utilit)o(y)f(pro)q(cedure)j
FK(MakeAssignOp)i FN(whic)o(h)c(guaran)o(tees)h(that)g(the)g(shado)o(w)
224 1762 y(stac)o(k)h(op)q(erand)g(is)f(in)g(one)g(of)g(these)i(forms.)
i(W)m(e)c(then)h(emit)e(instructions)i(in)e(one)i(of)f(the)224
1811 y(four)g(forms)f(|)320 2084 y FF(sw)69 b Fm(r)446
2088 y Fh(sr)q(c)492 2084 y FD(,)p FE(mem-dst)320 2175
y FF(sw)g FE(liter)n(al)p FD(,)p FE(mem-dst)320 2266
y FF(sw)g FE(addr)n(ess)p FD(,)p FE(mem-dst)46 b FF(;)20
b(no)f(regs)f(in)g(address)320 2358 y(lea)49 b FE(addr)n(ess)p
FD(,)p Fm(v)583 2362 y Fh(n)753 2358 y FF(;)20 b(other)d(symbolic)g
(addresses)f(use)i(the)320 2403 y(sw)69 b Fm(v)448 2407
y Fh(n)469 2403 y FD(,)p FE(mem-dst)130 b FF(;)20 b(load)e(effective)e
(address)h(instructi)o(on)224 2588 y FN(The)d FK(MakeAssignOp)i
FN(pro)q(cedure)e(will)d(load)h FK(c)n(cR)n(esults)k
FN(and)d FK(symV)m(als)i FN(in)o(to)d(registers.)20 b(If)224
2638 y(the)13 b(stac)o(k)g(elemen)o(t)e(is)h(a)g(sym)o(b)q(olic)e
(address)j(whic)o(h)f(is)g(not)g(in)f(one)i(of)e(the)i(required)g
(forms)224 2688 y(already)m(,)g(it)h(will)e(b)q(e)i(loaded)g(as)g
(follo)o(ws)e(|)p eop
%%Page: 154 160
154 159 bop 224 274 a FN(154)371 b FL(CHAPTER)14 b(5.)31
b(INTERPRETIVE)14 b(CODE)g(SELECTION)295 381 y FF(CASE)k(tag)h(OF)295
427 y(|)h(literal,)c(register)h(:)i(\(*)g(do)f(nothing)f(*\))295
472 y(|)j(symAdr)d(:)374 518 y(IF)i(\(bReg)e(<>)i(noReg\))e(OR)i
(\(iReg)f(<>)h(noReg\))e(THEN)413 564 y(MakeRegis)o(ter)o(\(le)o(v\))o
(;)354 609 y(\(*)i(ELSE)f(do)h(nothing)e(*\))374 655
y(END;)295 701 y(ELSE)h(MakeRegist)o(er\()o(lev)o(\);)295
746 y(END;)g(\(*)h(case)f(*\))224 845 y FN(As)e(with)e
FK(Der)n(ef)9 b FN(,)14 b(the)i(magic)d(is)i(all)e(in)i(the)g
FK(MakeR)n(e)n(gister)k FN(pro)q(cedure,)e(whic)o(h)e(no)o(w)f(has)224
894 y(to)g(cop)q(e)h(with)e(a)h(larger)g(n)o(um)o(b)q(er)f(of)g(p)q
(ossible)h(tags,)g(as)g(sho)o(wn)g(in)f(\014gure)i(5.10)p
224 1005 1468 2 v 223 1050 2 46 v 249 1037 a FF(PROCEDURE)h
(MakeRegiste)o(r\()o(lev)g(:)j(StackIndex)o(\);)p 1691
1050 V 223 1096 V 289 1082 a(\(*)f(post)g(:)i(shadow[le)o(v])c(is)j(a)g
(register)e(*\))p 1691 1096 V 223 1142 V 289 1128 a(VAR)h(new)g(:)i
(VRegister)o(;)p 1691 1142 V 223 1187 V 249 1174 a(BEGIN)p
1691 1187 V 223 1233 V 289 1219 a(IF)e(shadow[lev])o(.t)o(ag)e(<>)j
(register)e(THEN)p 1691 1233 V 223 1279 V 328 1265 a(WITH)h(shadow[le)o
(v])e(DO)p 1691 1279 V 223 1324 V 367 1311 a(CASE)i(tag)h(OF)p
1691 1324 V 223 1370 V 367 1356 a(|)g(symVal)f(:)h(\(*)g(just)f(load)g
(it)h(*\))p 1691 1370 V 223 1416 V 445 1402 a(EmitMtR\(Loa)o(dM)o(ap[)o
(ty)o(pe])o(,bR)o(eg)o(,iR)o(eg)o(,sc)o(ale)o(,o)o(fst)o(,i)o(dnt)o
(,ne)o(w\))o(;)p 1691 1416 V 223 1461 V 367 1448 a(|)g(symAdr)f(:)h
(\(*)g(load)f(effective)e(address)h(*\))p 1691 1461 V
223 1507 V 445 1493 a(EmitMtR\(lea)o(l,)o(bRe)o(g,)o(iRe)o(g,s)o(ca)o
(le,)o(of)o(st,)o(idn)o(t,)o(new)o(\);)p 1691 1507 V
223 1553 V 367 1539 a(|)i(literal)e(:)i(\(*)g(load)f(literal)f(*\))p
1691 1553 V 223 1598 V 445 1585 a(EmitItR\(li,)o(li)o(tW,)o(ne)o(w\);)p
1691 1598 V 223 1644 V 367 1630 a(|)i(ccResult)e(:)i(\(*)g(load)f
(condition)e(*\))p 1691 1644 V 223 1690 V 445 1676 a(Emit_tR\(Con)o(dM)
o(ap[)o(te)o(st])o(,ne)o(w\))o(;)p 1691 1690 V 223 1735
V 367 1722 a(END;)p 1691 1735 V 223 1781 V 367 1767 a(InitRegist)o(er)o
(Ele)o(m\()o(lev)o(,n)o(ew\))o(;)p 1691 1781 V 223 1827
V 328 1813 a(END;)i(\(*)h(with)f(*\))p 1691 1827 V 223
1872 V 289 1858 a(END;)g(\(*)g(if)h(*\))p 1691 1872 V
223 1918 V 249 1904 a(END)g(MakeRegis)o(ter)o(;)p 1691
1918 V 224 1920 1468 2 v 504 2036 a FN(Figure)14 b(5.10:)j(The)d
FK(CISC)20 b FN(v)o(ersion)14 b(of)f FK(MakeR)n(e)n(gister)287
2143 y FN(In)h(this)g(pro)q(cedure,)h(the)f(map)f FK(CondMap)635
2239 y(CondMap)j FN(:)11 b FK(Instruction)g Ft(!)g FK(OpCo)n(de)224
2335 y FN(maps)i(\(a)h(subrange)g(of)s(\))g FK(DCo)n(de)j
FN(instructions)e(to)f(the)g FK(OpCo)n(de)j FN(t)o(yp)q(e.)224
2457 y FO(The)f(push)e(op)q(erations)224 2538 y FN(The)c(pro)q(cedures)
i(to)d(push)h(v)n(alues)f(on)g(the)h(shado)o(w)f(stac)o(k)h(are)g
(relativ)o(ely)e(straigh)o(tforw)o(ard.)224 2588 y(Ho)o(w)o(ev)o(er,)j
(for)e(correctness)j(it)d(is)g(necessary)j(to)d(ensure)i(that)f(w)o(e)f
(do)g(not)h(push)g(a)f(v)n(alue)g(with)224 2638 y(a)i
FK(c)n(cR)n(esult)j FN(tag)c(b)q(elo)o(w)h(the)g(top-of-stac)o(k,)f(or)
h(the)g(condition)f(co)q(des)h(ma)o(y)e(b)q(e)i(o)o(v)o(erwritten.)224
2688 y(All)i(the)i FK(Psh{)f FN(pro)q(cedures)j(m)o(ust)12
b(c)o(hec)o(k)j(this.)p eop
%%Page: 155 161
155 160 bop 224 274 a FL(5.3.)31 b(MA)o(CHINES)15 b(WITH)e(COMPLEX)i
(ADDRESS)e(MODES)315 b FN(155)287 390 y(As)19 b(an)h(example,)f(the)h
FK(PshA)n(dr)j FN(pro)q(cedure)e(has)f(t)o(w)o(o)f(tasks.)35
b(It)19 b(m)o(ust)f(c)o(hec)o(k)j(the)224 440 y(curren)o(t)c
(top-of-stac)o(k,)c(and)i(load)f(it)g(if)g(it)g(is)h(a)f
FK(c)n(cR)n(esult)t FN(,)g(then)h(a)g(new)g(address)h(elemen)o(t)224
490 y(m)o(ust)d(b)q(e)i(constructed.)295 577 y FF(PROCEDURE)h
(PshAdr\(nam)g(:)j(HashBucketT)o(yp)o(e,)d(off)j(:)g(INTEGER\);)295
622 y(BEGIN)335 668 y(IF)f(shadow[tos)o(].t)o(ag)e(=)j(ccResult)e(THEN)
h(MakeRegist)o(er)o(\(to)o(s\))e(END;)335 714 y(INC\(tos\))o(;)335
759 y(InitAddr)o(ess)o(El)o(eme)o(nt\()o(to)o(s,n)o(oR)o(eg,)o(noR)o
(eg)o(,no)o(Sc)o(ale)o(,na)o(m,)o(off)o(\);)295 805 y(END)j(PshAdr;)224
968 y FO(The)d(add)f(instructi)o(on)224 1048 y FN(The)g(add)g
(instruction)g(is)f(a)h(mo)q(del)e(for)h(all)f(of)h(the)h(op)q
(erations)g(in)f(this)h(mac)o(hine)e(mo)q(del.)224 1098
y(The)18 b(left)e(hand)h(op)q(erand)g(of)g(the)g(instruction)g(m)o(ust)
f(b)q(e)i(loaded)e(in)o(to)g(a)h(register.)28 b(The)224
1148 y(righ)o(t)16 b(hand)h(op)q(erand)g(ma)o(y)d(b)q(e)j(a)g
(register,)h(a)e(literal,)g(or)g(a)g(sym)o(b)q(olic)f(v)n(alue.)25
b(This)16 b(set)224 1198 y(of)f(p)q(ermitted)h(tag)f(v)n(alues)g(is)g
(not)h(quite)f(the)h(same)f(as)g(for)g(an)h(assignmen)o(t,)e(so)i(that)
f(w)o(e)224 1247 y(need)k(a)d(di\013eren)o(t)i FK(Make...)28
b FN(pro)q(cedure.)i(Figure)17 b(5.11)f(has)h(the)h(mo)q(di\014ed)e
FK(A)n(dd)21 b FN(pro)q(ce-)224 1297 y(dure.)37 b(Compared)14
b(to)g(\014gure)i(5.5,)d(y)o(ou)i(should)f(note)h(the)h(signi\014can)o
(tly)e(more)g(complex)224 1347 y(conditions)g(under)h(whic)o(h)e(it)h
(is)g(pro)q(ductiv)o(e)g(to)g(sw)o(ap)g(the)g(top-of-stac)o(k)g(elemen)
o(ts.)287 1399 y(As)k(b)q(efore,)h(this)f(pro)q(cedure)i(is)e(a)g(mo)q
(del)e(for)i(all)e(of)i(the)g(comm)o(utativ)o(e)d(op)q(erators)224
1448 y(and,)f(without)f(the)i(elemen)o(t)e(sw)o(ap,)g(for)h(the)g
(non-comm)o(utativ)o(e)d(ones)k(as)f(w)o(ell.)224 1566
y FO(The)i(relational)d(op)q(erators)224 1646 y FN(As)g(describ)q(ed)h
(earlier,)e(for)f(this)h(mac)o(hine)f(mo)q(del)f(w)o(e)i(shall)g(emit)e
(a)i(compare)f(instruction)224 1696 y(immediately)l(,)k(and)h(sa)o(v)o
(e)h(a)g(mark)o(er)e(on)i(the)g(shado)o(w)g(stac)o(k)g(so)g(that)g(the)
g(in)o(tended)h(se-)224 1746 y(man)o(tics)12 b(of)h(the)h(test)g(are)g
(remem)o(b)q(ered.)k(F)m(or)12 b(the)i(compare)f(instruction)h(the)g(p)
q(ermitted)224 1795 y(address)e(mo)q(des)e(do)h(not)f(exactly)h
(corresp)q(ond)h(to)f(an)o(y)f(of)g(the)h FK(Make...)17
b FN(pro)q(cedures)c(whic)o(h)224 1845 y(w)o(e)i(ha)o(v)o(e)g(describ)q
(ed)h(so)f(far.)20 b(Since)c(the)f(com)o(bination)d(of)i(mo)q(des)g(is)
h(unique,)f(w)o(e)h(do)g(the)224 1895 y(con)o(v)o(ersions)h(inline)f
(as)g(sho)o(wn)g(in)g(\014gure)h(5.12.)35 b(It)16 b(ma)o(y)d(b)q(e)j
(noted)f(that)h(it)f(w)o(ould)f(also)224 1945 y(b)q(e)g(p)q(ossible)f
(to)f(sw)o(ap)h(the)g(op)q(erands)h(and)f(use)g(a)g(mo)q(di\014ed)e
(test)j(in)e(order)h(to)g(sa)o(v)o(e)g(a)f(load)224 1995
y(under)j(some)e(circumstances,)h(but)h(this)f(detail)f(has)h(not)g(b)q
(een)h(sho)o(wn)f(here.)287 2046 y(There)g(are)g(a)f(n)o(um)o(b)q(er)g
(of)g(other)h(p)q(ossibilities)e(whic)o(h)i(ha)o(v)o(e)f(b)q(een)i
(glossed)e(o)o(v)o(er)h(here,)224 2096 y(suc)o(h)j(as)e(the)i(p)q
(ossibilit)o(y)d(of)h(using)g(the)i FK(Intel-x86)k FN(c)o(hip's)16
b(short)g(compare)f(instructions)224 2146 y(\\)p FG(cmpb)p
FN(")d(or)h(\\)p FG(cmpw)p FN(")f(if)g(the)h(memory)e(op)q(erand)i(is)g
(shorter)i(than)e(32-bits,)f(and)h(the)g(literal)224
2196 y(is)h(also)f(represen)o(table)j(in)e(a)f(short)i(range.)224
2313 y FO(Using)g(the)f(shado)o(w)h(stac)o(k:)22 b(complex)14
b(address)h(expressions)224 2393 y FN(Consider)g(the)f(follo)o(wing)e
(assignmen)o(t)h(statemen)o(t,)g(whic)o(h)h(is)g(the)g(same)f(one)i
(used)f(as)h(an)224 2443 y(example)f(at)g(the)i(end)f(of)f(the)i
(section)f(5.1.3.)k(The)c(v)n(ariable)f FK(arr)n(ay)k
FN(is)c(assumed)h(to)f(b)q(e)i(a)224 2493 y FK(V)l(AR)g
FN(parameter,)d(whic)o(h)g(p)q(oin)o(ts)h(to)g(the)g(actual)g(arra)o(y)
m(.)295 2589 y FF(temp)k(:=)h(array[i,j])o(;)224 2688
y FN(The)c(resulting)f FK(DCo)n(de)j FN(sequence)f(is)e(|)p
eop
%%Page: 156 162
156 161 bop 224 274 a FN(156)371 b FL(CHAPTER)14 b(5.)31
b(INTERPRETIVE)14 b(CODE)g(SELECTION)p 270 392 1350 2
v 269 438 2 46 v 295 424 a FF(PROCEDURE)i(Add\(\);)p
1619 438 V 269 483 V 335 470 a(VAR)i(new)g(:)i(VRegister)o(;)p
1619 483 V 269 529 V 295 515 a(BEGIN)p 1619 529 V 269
575 V 335 561 a(NewVReg\()o(new)o(\);)p 1619 575 V 269
620 V 335 607 a(IF)e(\(shadow[to)o(s)f(-)i(1].tag)e(=)i(literal\))e(OR)
p 1619 620 V 269 666 V 393 652 a(\(\(shadow[t)o(os)f(-)k(1].tag)d(<>)i
(register\))d(AND)p 1619 666 V 269 712 V 413 698 a(\(shadow[t)o(os])o
(.ta)o(g)g(=)k(register\))o(\))c(THEN)p 1619 712 V 269
757 V 374 744 a(SwapTopEl)o(em)o(ent)o(s\(\))o(;)p 1619
757 V 269 803 V 335 789 a(END;)p 1619 803 V 269 849 V
335 835 a(MakeRegi)o(ste)o(r\()o(tos)g(-)j(1\);)p 1619
849 V 269 894 V 335 881 a(IF)f(shadow[tos)o(].t)o(ag)e(=)j(literal)e
(THEN)p 1619 894 V 269 940 V 374 926 a(EmitRItR\()o(ad)o(d,s)o(had)o
(ow)o([to)o(s)f(-)k(1].vReg,s)o(ha)o(dow)o([to)o(s])o(.li)o(tW)o(,ne)o
(w\))o(;)p 1619 940 V 269 986 V 335 972 a(ELSIF)d(shadow[tos)o(].t)o
(ag)f(=)j(register)e(THEN)p 1619 986 V 269 1031 V 374
1018 a(EmitRRtR\()o(ad)o(d,s)o(had)o(ow)o([to)o(s)f(-)k(1].vReg,s)o(ha)
o(dow)o([to)o(s])o(.vR)o(eg)o(,ne)o(w\))o(;)p 1619 1031
V 269 1077 V 335 1063 a(ELSIF)d(\(shadow[to)o(s].)o(ta)o(g)g(=)i
(symVal\))e(AND)p 1619 1077 V 269 1123 V 452 1109 a(\(shadow[to)o(s].)o
(ty)o(pe)f(=)j(word\))f(THEN)p 1619 1123 V 269 1168 V
374 1155 a(WITH)g(shadow[to)o(s])e(DO)p 1619 1168 V 269
1214 V 413 1200 a(EmitRMtR\()o(add)o(,sh)o(ad)o(ow[)o(to)o(s)h(-)i
(1].vReg,)p 1619 1214 V 269 1260 V 727 1246 a(bReg,iReg)o(,sc)o(al)o
(e,i)o(dn)o(t,o)o(fst)o(,n)o(ew\))o(;)p 1619 1260 V 269
1305 V 374 1292 a(END;)f(\(*)h(with)f(*\))p 1619 1305
V 269 1351 V 335 1337 a(ELSE)p 1619 1351 V 269 1397 V
374 1383 a(MakeRegis)o(te)o(r\(t)o(os\))o(;)p 1619 1397
V 269 1442 V 374 1429 a(EmitRRtR\()o(ad)o(d,s)o(had)o(ow)o([to)o(s)e(-)
k(1].vReg,s)o(ha)o(dow)o([to)o(s])o(.vR)o(eg)o(,ne)o(w\))o(;)p
1619 1442 V 269 1488 V 335 1474 a(END;)p 1619 1488 V
269 1534 V 335 1520 a(DEC\(tos\))o(;)p 1619 1534 V 269
1579 V 335 1566 a(shadow[t)o(os])o(.v)o(Reg)c(:=)j(new;)p
1619 1579 V 269 1625 V 295 1611 a(END)g(Add;)p 1619 1625
V 270 1627 1350 2 v 589 1743 a FN(Figure)14 b(5.11:)j(The)d
FK(CISC)20 b FN(v)o(ersion)14 b(of)f FK(A)n(dd)320 1863
y FF(pshFP)18 b(8)384 b FD(;)13 b(1)69 b FE(push)12 b(addr)n(ess)g(of)h
(p)n(ar)n(am)320 1909 y FF(derefW)402 b FD(;)13 b(2)69
b FE(get)13 b(value)f(of)h(the)g(p)n(ar)n(am)320 1955
y FF(pshFP)18 b(-4)364 b FD(;)13 b(3)69 b FE(addr)n(ess)12
b(of)h(lo)n(c)n(al)f(var)h(i)320 2000 y FF(derefW)402
b FD(;)13 b(4)69 b FE(get)13 b(value)f(of)h(i)320 2046
y FF(pshLit)k(64)345 b FD(;)13 b(5)69 b FE(c)n(ar)n(dinality)11
b(*)i(element)f(size)320 2092 y FF(mul)462 b FD(;)13
b(6)69 b FE(multiply)12 b(by)h(arr)n(ay)g(size)320 2137
y FF(addAdr)402 b FD(;)13 b(7)69 b FE(add)13 b(o\013set)f(to)h(addr)n
(ess)320 2183 y FF(pshFP)18 b(-8)364 b FD(;)13 b(8)69
b FE(addr)n(ess)12 b(of)h(lo)n(c)n(al)f(var)h(j)320 2229
y FF(derefW)402 b FD(;)13 b(9)69 b FE(get)13 b(value)f(of)h(j)320
2274 y FF(pshLit)k(4)365 b FD(;)13 b(10)50 b FE(element)12
b(size)320 2320 y FF(mul)462 b FD(;)13 b(11)50 b FE(multiply)12
b(by)h(elem)g(size)320 2366 y FF(addAdr)402 b FD(;)13
b(12)50 b FE(add)13 b(o\013set)f(to)h(addr)n(ess)320
2411 y FF(derefW)402 b FD(;)13 b(13)50 b FE(get)13 b(arr)n(ay)g
(element)320 2457 y FF(pshFP)18 b(-12)344 b FD(;)13 b(14)50
b FE(addr)n(ess)12 b(of)h(lo)n(c)n(al)f(var)h(temp)320
2503 y FF(assignW)382 b FD(;)13 b(15)50 b FE(do)13 b(the)g(assign)224
2588 y FN(F)m(or)20 b(this)g(example)f(the)i(instructions)f(ha)o(v)o(e)
g(b)q(een)h(n)o(um)o(b)q(ered)f(for)g(ease)h(of)e(reference.)224
2638 y(The)h(output)f(instructions)g(are)h(as)f(follo)o(ws,)f(and)g
(are)i(emitted)e(at)h FK(DCo)n(de)j FN(indices)d(as)224
2688 y(indicated)14 b(|)p eop
%%Page: 157 163
157 162 bop 224 274 a FL(5.3.)31 b(MA)o(CHINES)15 b(WITH)e(COMPLEX)i
(ADDRESS)e(MODES)315 b FN(157)p 224 396 1527 2 v 223
442 2 46 v 249 428 a FF(PROCEDURE)16 b(Relop\(dcode)g(:)j(DCodeType\))o
(;)p 1750 442 V 223 488 V 289 474 a(VAR)f(leftT)37 b(:)20
b(TagType;)c(\(*)j(tag)f(of)h(left)f(element)37 b(*\))p
1750 488 V 223 533 V 367 520 a(rightT)17 b(:)j(TagType;)c(\(*)j(tag)f
(of)h(right)f(element)f(*\))p 1750 533 V 223 579 V 249
565 a(BEGIN)p 1750 579 V 223 625 V 289 611 a(leftT)37
b(:=)19 b(stack[tos)d(-)j(1].tag;)p 1750 625 V 223 670
V 289 657 a(rightT)e(:=)i(stack[tos)o(].)o(tag)o(;)p
1750 670 V 223 716 V 289 702 a(IF)f(\(leftT)g(<>)h(register)o(\))e(AND)
p 1750 716 V 223 762 V 347 748 a(\(\(leftT)g(<>)i(symVal\))e(OR)i
(\(stack[to)o(s)e(-)i(1].type)e(<>)i(word\)\))e(THEN)p
1750 762 V 223 807 V 328 794 a(MakeRegis)o(ter)o(\(t)o(os)f(-)j(1\);)p
1750 807 V 223 853 V 328 839 a(leftT)e(:=)i(register;)p
1750 853 V 223 899 V 289 885 a(END;)p 1750 899 V 223
944 V 289 931 a(IF)f(\(rightT)f(<>)i(literal\))e(AND)p
1750 944 V 223 990 V 347 976 a(\(rightT)g(<>)i(register\))d(THEN)p
1750 990 V 223 1036 V 328 1022 a(MakeRegis)o(ter)o(\(t)o(os\))o(;)p
1750 1036 V 223 1081 V 328 1068 a(rightT)h(:=)i(register;)p
1750 1081 V 223 1127 V 289 1113 a(END;)p 1750 1127 V
223 1173 V 269 1159 a(\(*)g(assert:)e(rhs)h(is)h(reg)f(or)h(lit,)f(lhs)
h(is)g(reg)f(or)h(word-size)o(d)e(symVal)g(*\))p 1750
1173 V 223 1218 V 289 1205 a(WITH)h(stack[tos)e(-)j(1])g(DO)p
1750 1218 V 223 1264 V 328 1250 a(IF)g(leftT)e(=)j(symVal)d(THEN)p
1750 1264 V 223 1310 V 367 1296 a(IF)i(rightT)e(=)i(literal)e(THEN)p
1750 1310 V 223 1355 V 406 1342 a(EmitMIt_\(c)o(mpl)o(,b)o(Reg)o(,i)o
(Reg)o(,sc)o(al)o(e,i)o(dn)o(t,o)o(fst)o(,s)o(had)o(ow)o([to)o(s].)o
(li)o(tW\))o(;)p 1750 1355 V 223 1401 V 367 1387 a(ELSE)p
1750 1401 V 223 1447 V 406 1433 a(EmitMRt_\(c)o(mpl)o(,b)o(Reg)o(,i)o
(Reg)o(,sc)o(al)o(e,i)o(dn)o(t,o)o(fst)o(,s)o(had)o(ow)o([to)o(s].)o
(vR)o(eg\))o(;)p 1750 1447 V 223 1492 V 367 1478 a(END;)p
1750 1492 V 223 1538 V 328 1524 a(ELSIF)g(rightT)h(=)h(literal)e(THEN)p
1750 1538 V 223 1584 V 367 1570 a(EmitRIt_\(c)o(mp)o(l,v)o(Re)o(g,s)o
(ha)o(dow)o([to)o(s])o(.li)o(tW)o(\);)p 1750 1584 V 223
1629 V 328 1615 a(ELSE)p 1750 1629 V 223 1675 V 367 1661
a(EmitRR\(cmp)o(,v)o(Reg)o(,s)o(had)o(ow)o([to)o(s].)o(vR)o(eg\))o(;)p
1750 1675 V 223 1720 V 328 1707 a(END;)p 1750 1720 V
223 1766 V 289 1752 a(END;)h(\(*)g(with)h(*\))p 1750
1766 V 223 1812 V 289 1798 a(DEC\(tos\))o(;)p 1750 1812
V 223 1857 V 289 1844 a(InitCcRe)o(sul)o(tEl)o(em)o(ent)o(\(t)o(os)d(-)
j(1,dcode\);)p 1750 1857 V 223 1903 V 249 1889 a(END)g(Relop;)p
1750 1903 V 224 1905 1527 2 v 573 2021 a FN(Figure)14
b(5.12:)j(The)d FK(CISC)20 b FN(v)o(ersion)14 b(of)f
FK(R)n(elop)320 2142 y FD(;)g FE(ebp)f(is)h(the)g(fr)n(ame)g(p)n
(ointer)f(r)n(e)n(gister)320 2187 y FF(lw)19 b(-4\(ebp\),v1)263
b FD(;)13 b(\(6\))320 2233 y FF(mul)19 b(v1,64,v2)283
b FD(;)13 b(\(6\))g(or:)k FF(shl)h(v1,6,v2)320 2279 y(lw)h(8\(ebp\),v3)
283 b FD(;)13 b(\(7\))320 2324 y FF(lw)19 b(-8\(ebp\),v4)263
b FD(;)13 b(\(11\))320 2370 y FF(mul)19 b(v4,4,v5)303
b FD(;)13 b(\(11\))g(or:)k FF(shl)h(v4,2,v5)320 2415
y FD(;)13 b FE(addA)n(dr)e(has)i(over\015owe)n(d)f(the)h(symA)n(dr)f
(format,)h(must)g(emit)g(an)g(add)g(...)320 2461 y FF(add)19
b(v2,v3,v6)283 b FD(;)13 b(\(12\))320 2507 y FF(lw)19
b(\(v6,v5\),v7)263 b FD(;)13 b(\(15\))320 2552 y FF(sw)19
b(v7,-12\(ebp)o(\))244 b FD(;)13 b(\(15\))224 2638 y
FN(In)i(this)f(particular)g(case,)h(the)g(sym)o(b)q(olic)d
(dereferences)18 b(dela)o(y)13 b(the)i(emission)e(of)h(the)h(\014rst)
224 2688 y(instruction)g(un)o(til)e(six)g(whole)h FK(DCo)n(de)s
FN(s)h(ha)o(v)o(e)e(b)q(een)i(read.)p eop
%%Page: 158 164
158 163 bop 224 274 a FN(158)371 b FL(CHAPTER)14 b(5.)31
b(INTERPRETIVE)14 b(CODE)g(SELECTION)287 390 y FN(It)g(ma)o(y)f(b)q(e)i
(noted)f(that)h(w)o(e)f(ha)o(v)o(e)h(still)e(w)o(asted)i(one)g
(instruction)f(in)g(this)h(co)q(de.)20 b(The)224 440
y(m)o(ultiplication)9 b(of)j FM(v)555 446 y Fz(4)587
440 y FN(b)o(y)g(four)g(could)h(ha)o(v)o(e)f(b)q(een)i(folded)e(in)o
(to)g(the)h(address)h(mo)q(de)e(of)g(the)224 490 y(last)h(mo)q(de,)e(b)
o(y)i(using)f(the)h FK(b)n(ase)n(d,)h(indexe)n(d,)h(sc)n(ale)n(d)i
FN(address)d(mo)q(de.)i(But)d(ho)o(w)g(are)g(w)o(e)f(to)224
540 y(kno)o(w)g FK(not)k FN(to)c(p)q(erform)g(the)g(m)o(ultiplication)d
(b)o(y)j(four)f(at)h FK(DCo)n(de)k FN(index)c(11?)17
b(The)c(answ)o(er)224 590 y(should)f(b)o(y)f(no)o(w)g(b)q(e)i(famili)o
(ar.)i(W)m(e)c(m)o(ust)f(defer)j(the)f(emission)e(of)h(suc)o(h)i
(instructions)f(un)o(til)224 640 y(w)o(e)h(kno)o(w)e(the)i(con)o(text)f
(in)g(whic)o(h)g(the)g(v)n(alue)g(is)g(to)g(b)q(e)g(used.)18
b(W)m(e)12 b(do)g(this)g(b)o(y)g(in)o(tro)q(ducing)224
689 y(y)o(et)k(another)g(extension)h(of)e(the)h(shado)o(w)g(stac)o(k)g
(elemen)o(t)f(t)o(yp)q(e.)24 b(Supp)q(ose)16 b(that)g(w)o(e)g(call)224
739 y(these)i(new)e(tags)g FK(r)n(e)n(gX2)22 b FN(and)16
b FK(r)n(e)n(gX4)6 b FN(.)23 b(Whenev)o(er)17 b(suc)o(h)g(a)f(v)n(alue)
g(is)f(used,)j(if)d(it)g(is)h(used)224 789 y(for)d(an)o(y)f(purp)q(ose)
h(other)g(than)g(as)f(the)h(index)g(\014eld)f(in)g(a)g(sym)o(b)q(olic)f
(address,)j(the)f(deferred)224 839 y(m)o(ultiplication)f(m)o(ust)i(b)q
(e)i(p)q(erformed)f(after)g(all.)21 b(Ho)o(w)o(ev)o(er,)15
b(in)g(the)h(example)e(ab)q(o)o(v)o(e,)g(at)224 889 y
FK(DCo)n(de)j FN(index)d(11)e(w)o(e)i(emit)e(the)i FG(lw)f
FN(only)m(,)f(and)h(c)o(hange)h(the)g(top-of-stac)o(k)e(tag)h(to)h
FK(r)n(e)n(gX4)6 b FN(.)224 938 y(The)15 b(address)g(addition)d(still)h
(folds)h(the)g(o)o(v)o(er\015o)o(w)o(ed)g(format.)i(The)e(\014nal)f(co)
q(de)i(pro)q(duced)224 988 y(is)f(|)320 1054 y FF(lw)19
b(-4\(ebp\)v1)283 b FD(;)13 b(\(6\))320 1100 y FF(mul)19
b(v1,64,v2)283 b FD(;)13 b(\(6\))g(or:)k FF(shl)h(v1,6,v2)320
1146 y(lw)h(8\(ebp\),v3)283 b FD(;)13 b(\(7\))320 1191
y FF(lw)19 b(-8\(ebp\),v4)263 b FD(;)13 b(\(11\))320
1237 y(;)g FE(addA)n(dr)e(has)i(over\015owe)n(d)f(the)h(symA)n(dr)f
(format,)h(must)g(emit)g(an)g(add)g(...)320 1283 y FF(add)19
b(v2,v3,v6)283 b FD(;)13 b(\(12\))320 1328 y FF(lw)19
b(\(v6,v4,4\),)o(v7)224 b FD(;)13 b(\(15\))320 1374 y
FF(sw)19 b(v7,-12\(ebp)o(\))244 b FD(;)13 b(\(15\))224
1524 y FI(5.4)67 b(Exercises)254 1614 y FN(5.1)20 b FG(<<showing)g
(cases)h(where)g(jumping)f(code)h(is)g(worse>>)254 1693
y FN(5.2)f(Man)o(y)13 b(mac)o(hines)g(ha)o(v)o(e)h(\\)p
FG(set)p FK(CC)6 b FN(")12 b(instructions)i(to)f(con)o(v)o(ert)i(the)f
(results)h(of)e(com-)328 1743 y(parisons)19 b(in)o(to)f(Bo)q(olean)h(v)
n(alues.)33 b(In)19 b(general,)g(those)h(mac)o(hines)e(whic)o(h)h(do)f
(not)328 1792 y(ha)o(v)o(e)c(suc)o(h)h(instructions)f(m)o(ust)f(jump)g
(on)g(the)i(comparison)e(result,)h(and)g(use)g(co)q(de)328
1842 y(similar)i(to)j(\014gure)g(4.7)e(to)h(create)i(a)f(Bo)q(olean)f
(v)n(alue.)31 b(It)19 b(is)f(b)q(est)i(to)e(a)o(v)o(oid)f(this)328
1892 y(construction)e(whenev)o(er)g(p)q(ossible.)328
1956 y(Mac)o(hines)j(with)f(\\add)g(with)g(carry")h(or)f(\\subtract)h
(with)f(b)q(orro)o(w")h(instructions)328 2006 y(can)11
b(generate)h(a)f(Bo)q(olean)f(without)h(jumping)d(in)j(some)f(sp)q
(ecial)h(cases.)18 b(On)11 b FK(SP)m(AR)o(C)328 2056
y FN(these)16 b(instructions)f(are)g(called)f(\\)p FG(addx)p
FN(")e(and)i(\\)p FG(subx)p FN(".)k(The)d(carry)g(\015ag)f(is)g(loaded)
328 2106 y(in)o(to)f(register)i FM(r)579 2112 y FB(d)612
2106 y FN(b)o(y)f(adding)f(the)i(carry)f(to)g(t)o(w)o(o)f(zeros)i({)680
2185 y FG(addx)21 b(g0,0,)o FM(r)917 2191 y FB(d)1019
2185 y FN(;)14 b FK(r)n(esult)g(is)g(0)h(or)g(1)328 2265
y FN(The)g(negation)e(of)g(the)i(carry)f(\015ag)g(is)f(loaded)h(in)o
(to)f FM(r)1163 2271 y FB(d)1196 2265 y FN(b)o(y)g(|)669
2345 y FG(subx)21 b(g0,-1,)o FM(r)928 2351 y FB(d)1030
2345 y FN(;)14 b FK(r)n(esult)g(is)g(1)h(or)g(0)328 2438
y FN(The)e(unsigned)f(less-than)h(comparison)d(generates)k(a)e(carry)g
(\015ag)g(as)g(its)g(result,)g(and)328 2488 y(all)19
b(the)h(asymmetric)e(unsigned)j(comparisons)d(can)i(b)q(e)h(turned)g
(in)o(to)e(this)h(form)328 2538 y(b)o(y)c(some)e(com)o(binaton)g(of)h
(sw)o(apping)g(of)g(op)q(erands,)h(incremen)o(ting)f(one)h(op)q(erand)
328 2588 y(b)o(y)h(one,)g(or)f(loading)g(the)h(negation)f(of)g(the)h
(\015ag.)26 b(W)m(ork)16 b(out)h(ho)o(w)f(to)g(transform)328
2638 y(\()p FM(r)363 2644 y FB(l)390 2638 y Ft(\024)f
FM(r)456 2644 y FB(r)474 2638 y FN(\),)h(\()p FM(r)553
2644 y FB(l)580 2638 y FM(>)f(r)646 2644 y FB(r)664 2638
y FN(\),)h(and)f(\()p FM(r)825 2644 y FB(l)852 2638 y
Ft(\025)g FM(r)918 2644 y FB(r)936 2638 y FN(\))h(to)f(use)i(this)e
(tec)o(hnique,)i(where)g FM(r)1518 2644 y FB(l)1546 2638
y FN(and)e FM(r)1647 2644 y FB(r)328 2688 y FN(are)f(unsigned)h(op)q
(erands)f(in)g(registers.)p eop
%%Page: 159 165
159 164 bop 224 274 a FL(5.4.)31 b(EXER)o(CISES)1046
b FN(159)254 390 y(5.3)20 b(Symmetric)10 b(comparisons)h(\(equal)h(and)
g(unequal\))g(are)h(also)e(able)h(to)g(b)q(e)h(p)q(erformed)328
440 y(using)h(the)h(tec)o(hnique)h(of)d(the)i(previous)g(question.)20
b(In)14 b(this)h(case)g(w)o(e)g(need)g(to)f(rely)328
490 y(on)h(the)g(prop)q(ert)o(y)h(that)e(\()p FM(a)g
FG(xor)g FM(b)p FN(\))g(is)h(zero)g(if)f(and)h(only)f(if)g
FM(a)d FN(=)h FM(b)p FN(.)20 b(See)c(if)e(y)o(ou)g(can)328
540 y(w)o(ork)h(out)f(the)h(remaining)e(details,)h(so)h(as)g(to)f
(compute)g(\()p FM(r)1275 546 y FB(l)1301 540 y FN(=)f
FM(r)1365 546 y FB(r)1383 540 y FN(\),)h(and)h(\()p FM(r)1542
546 y FB(l)1567 540 y Ft(6)p FN(=)e FM(r)1631 546 y FB(r)1649
540 y FN(\))328 590 y(in)o(to)g(a)h(register)h(without)f(ha)o(ving)e
(to)i(use)h(branc)o(hing)e(co)q(de.)p eop
%%Page: 160 166
160 165 bop 224 274 a FN(160)371 b FL(CHAPTER)14 b(5.)31
b(INTERPRETIVE)14 b(CODE)g(SELECTION)p eop
%%Page: 161 167
161 166 bop 224 702 a FJ(Chapter)32 b(6)224 910 y FP(Bottom-up)37
b(T)-10 b(ree)39 b(Rewriting)584 1146 y
 11380244 20458127 0 0 11380244 20458127 startTexFig
 584 1146 a
%%BeginDocument: bursarch.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-25.0 317.0 translate 0.630 -0.630 scale
1.000 setlinewidth
	[6.000000] 0 setdash
% Polyline
n 313 429 m 313 409 l  173 409 l  173 429 l  clp gs col-1 s gr
	[] 0 setdash
/Times-Bold findfont 11.00 scalefont setfont
183 422 m 
gs 1 -1 scale (optional optimization step) col-1 show gr
	[6.000000] 0 setdash
% Polyline
n 313 349 m 313 329 l  173 329 l  173 349 l  clp gs col-1 s gr
	[] 0 setdash
/Times-Bold findfont 11.00 scalefont setfont
183 342 m 
gs 1 -1 scale (optional optimization step) col-1 show gr
	[6.000000] 0 setdash
% Polyline
n 313 189 m 313 169 l  173 169 l  173 189 l  clp gs col-1 s gr
	[] 0 setdash
/Times-Bold findfont 11.00 scalefont setfont
183 182 m 
gs 1 -1 scale (optional optimization step) col-1 show gr
% Polyline
n 239 79 m 239 39 l  79 39 l  79 79 l  clp gs col-1 s gr
% Polyline
n 239 159 m 239 119 l  79 119 l  79 159 l  clp gs col-1 s gr
% Polyline
n 239 399 m 239 359 l  79 359 l  79 399 l  clp gs col-1 s gr
% Polyline
n 239 479 m 239 439 l  79 439 l  79 479 l  clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 159 19 m 159 39 l gs col-1 s gr
n 161.000 31.000 m 159.000 39.000 l 157.000 31.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 79 m 159 119 l gs col-1 s gr
n 161.000 111.000 m 159.000 119.000 l 157.000 111.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 159 m 159 199 l gs col-1 s gr
n 161.000 191.000 m 159.000 199.000 l 157.000 191.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 319 m 159 359 l gs col-1 s gr
n 161.000 351.000 m 159.000 359.000 l 157.000 351.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 399 m 159 439 l gs col-1 s gr
n 161.000 431.000 m 159.000 439.000 l 157.000 431.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 479 m 159 499 l gs col-1 s gr
n 161.000 491.000 m 159.000 499.000 l 157.000 491.000 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
% Polyline
n 239 319 m 239 279 l  79 279 l  79 319 l  clp gs 0.95 setgray fill gr
gs col-1 s gr
% Polyline
n 239 239 m 239 199 l  79 199 l  79 239 l  clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 159 239 m 159 279 l gs col-1 s gr
n 161.000 271.000 m 159.000 279.000 l 157.000 271.000 l gs 2 setlinejoin col-1 s gr
/Times-Bold findfont 11.00 scalefont setfont
136 462 m 
gs 1 -1 scale (assembler) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
129 381 m 
gs 1 -1 scale (register binder) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
107 62 m 
gs 1 -1 scale (front-end tree builder) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
116 142 m 
gs 1 -1 scale (attribute evaluator) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
91 502 m 
gs 1 -1 scale (object file out) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
71 422 m 
gs 1 -1 scale (assembly language) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
39 342 m 
gs 1 -1 scale (virtual assembly language) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
62 181 m 
gs 1 -1 scale (attributed syntax tree) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
69 102 m 
gs 1 -1 scale (abstract syntax tree) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
97 21 m 
gs 1 -1 scale (source file in) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
109 310 m 
gs 1 -1 scale (rewriting code selector) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
122 295 m 
gs 1 -1 scale (bottom-up tree-) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
114 262 m 
gs 1 -1 scale (code tree) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
125 230 m 
gs 1 -1 scale (transformation) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
122 215 m 
gs 1 -1 scale (ast-to-code tree) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 224 2547 a FI(6.1)67 b(In)n(tro)r(duction)24 b(to)e(the)h(theory)224
2638 y FN(The)14 b(theory)g(of)f(b)q(ottom-up)f(tree)j(rewriting)e
(systems)h(is)f(imp)q(ortan)o(t)f(b)q(oth)i(for)f(elegan)o(tly)224
2688 y(solving)h(the)h FK(op)n(er)n(ator)g(identi\014c)n(ation)g(pr)n
(oblem)j FN(referred)e(to)e(in)g(section)h(2.5.1,)e(and)h(also)914
2793 y(161)p eop
%%Page: 162 168
162 167 bop 224 274 a FN(162)425 b FL(CHAPTER)14 b(6.)32
b(BOTTOM-UP)15 b(TREE)f(REWRITING)224 390 y FN(for)h(pro)o(viding)f
(the)i(theoretical)g(basis)f(for)g(the)g(most)f(p)q(o)o(w)o(erful)h
(metho)q(d)f(of)h(instruction)224 440 y(selection.)287
492 y(The)g(problem)f(is)h(mo)q(delled)f(b)o(y)h(a)g(situation)g(in)g
(whic)o(h)g(ev)o(ery)h(no)q(de)g(of)e(an)h(abstract)224
542 y(syn)o(tax)f(tree)g(has)f(to)g(b)q(e)h(lab)q(elled)f(with)g(a)f
FK(typ)n(eform)k FN(attribute.)j(These)14 b(t)o(yp)q(eforms)e(m)o(ust)
224 592 y(b)q(e)k(consisten)o(t)h(according)e(to)h(a)f(\014nite)h(set)g
(of)f(rules)h(whic)o(h)f(constrain)h(the)g(relationship)224
641 y(b)q(et)o(w)o(een)h(the)f(t)o(yp)q(eform)f(of)f(a)i(particular)f
(paren)o(t)h(no)q(de)g(and)f(the)h(t)o(yp)q(eforms)f(of)g(its)g(de-)224
691 y(scendan)o(ts.)21 b(F)m(urthermore,)13 b(w)o(e)i(do)f(not)g
(require)h(that)f(a)g(consisten)o(t)h(t)o(yp)q(eform-lab)q(elling)224
741 y(b)q(e)i(unique.)23 b(Instead)16 b(w)o(e)g(allo)q(cate)f(a)h
(non-negativ)o(e)f FK(c)n(ost)k FN(to)d(eac)o(h)g(rule)g(whic)o(h)f(is)
h(used,)224 791 y(and)e(seek)h(the)g(consisten)o(t)g(lab)q(elling)d
(with)h(the)i(lo)o(w)o(est)f(total)f(cost.)287 843 y(It)j(is)g(imp)q
(ortan)o(t)e(not)i(to)g(confuse)g(the)h(concept)g(of)f
FK(typ)n(eform)i FN(with)e(the)h(concept)g(of)224 892
y FK(datatyp)n(e)23 b FN(as)c(determined)g(b)o(y)g(static)g(seman)o
(tic)f(analysis.)32 b(The)20 b(set)f(of)g(v)n(alues)f(whic)o(h)224
942 y(datat)o(yp)q(es)13 b(tak)o(e)e(are)h(v)n(alues)g(suc)o(h)g(as)f
(\\p)q(oin)o(ter)h(to)f(record...")18 b(and)11 b(so)h(on.)17
b(The)12 b FK(typ)n(eform)224 992 y FN(of)k(a)g(no)q(de)g(sp)q
(eci\014es)i(the)f(lo)q(cation)e(and)h(represen)o(tation)i(of)d(a)h(v)n
(alue)f(at)h(run)o(time.)24 b(The)224 1042 y(set)15 b(of)e(v)n(alues)g
(whic)o(h)g(t)o(yp)q(eform)f(tak)o(es)i(includes)g(v)n(alues)f(suc)o(h)
h(as)g(\\register",)f(\\sym)o(b)q(olic)224 1092 y(address")h(and)e
(\\immedia)o(te)e(constan)o(t".)18 b(These)c(corresp)q(ond)g(to)e(the)i
(v)n(alues)e(of)g(the)h FK(T)m(ag-)224 1141 y(T)m(yp)n(e)20
b FN(t)o(yp)q(e-en)o(umerations)d(used)h(for)e FK(Symb)n(olicV)m
(alueDescriptor)21 b FN(records)d(throughout)224 1191
y(the)d(previous)f(c)o(hapter.)287 1243 y(Since)j(w)o(e)h(wish)f(to)g
(mo)q(del)f(tree)j(pattern-matc)o(hing)d(and)h(tree-rewriting)h
(transfor-)224 1293 y(mations)g(w)o(e)h(b)q(orro)o(w)g(a)g(formalism)c
(familiar)h(from)h(the)j(w)o(orld)e(of)h(phrase)h(grammars)224
1343 y(and)e(string)g(transformations.)29 b(W)m(e)17
b(de\014ne)i(a)f(set)h(of)e(no)q(de)i FK(typ)n(eforms)h
FN(whic)o(h)e(will)f(b)q(e)224 1392 y(the)e(non-terminal)e(sym)o(b)q
(ols)g(of)g(the)i(grammar.)h(The)f(op)q(erator)g(tags)f(of)g(the)h
(tree)g(no)q(des)224 1442 y(will)g(b)q(e)h(the)g(terminal)e(sym)o(b)q
(ols)g(of)h(the)i(gramma)o(r.)k(A)16 b(\014nite)g(set)g(of)f(pro)q
(ductions)i(eac)o(h)224 1492 y(ha)o(v)o(e)g(a)f(single)g(non-terminal)f
(sym)o(b)q(ol)g(on)h(the)h(left,)g(whic)o(h)f(sp)q(eci\014es)i(the)g
(result)f(t)o(yp)q(e-)224 1542 y(form)d(of)i(the)g(p)q(ermitted)g
(transformation.)22 b(The)16 b(righ)o(t-hand-side)f(of)h(eac)o(h)g(pro)
q(duction)224 1592 y(sp)q(eci\014es)i(the)f(tree)g(pattern)g(to)f(whic)
o(h)g(it)g(applies.)25 b(These)17 b(tree)g(patterns)h(ma)o(y)c(sp)q
(ecify)224 1641 y(the)h(no)q(de-)p FK(tag)j FN(to)13
b(whic)o(h)h(they)g(apply)f(\(a)h(terminal)e(sym)o(b)q(ol)g(of)h(the)i
(gramma)o(r\),)c(and)j(the)224 1691 y(t)o(yp)q(eforms)h(of)g(that)h(no)
q(de)g(and)g(its)g(decendan)o(ts)h(\(non-terminal)d(sym)o(b)q(ols\).)22
b(In)16 b(general)224 1741 y(suc)o(h)e(tree-grammars)d(are)i(am)o
(biguous,)d(with)j(man)o(y)d(self-consisten)o(t)k(t)o(yp)q(eform)e
(attribu-)224 1791 y(tions.)22 b(W)m(e)15 b(use)h(the)g(costs)g(asso)q
(ciated)g(with)f(eac)o(h)h(pro)q(duction)f(to)g(guide)g(the)h(c)o
(hoice)g(of)224 1841 y(an)e(attribution)f(whic)o(h)h(has)g(the)h(minim)
o(al)10 b(cost.)224 1967 y FH(6.1.1)56 b(A)19 b(simple)d(example)224
2047 y FN(As)e(a)e(simple)g(example,)f(supp)q(ose)j(that)f(w)o(e)g
(wish)g(to)g(\014nd)g(the)h(minim)o(al)9 b(cost)14 b(lab)q(elling)d(of)
224 2097 y(the)k(assignmen)o(t)e(statemen)o(t)g(|)721
2192 y FM(V)745 2198 y FB(int)803 2192 y FN(:=)f FM(V)883
2198 y FB(f)s(lt)937 2192 y FN(+)d FM(V)1002 2198 y FB(int)1059
2192 y FN(+)g FM(V)1124 2198 y FB(dbl)224 2287 y FN(for)j(the)h
FK(Intel-x86)18 b FN(instruction)12 b(set.)18 b(The)13
b(v)n(ariables)e(ha)o(v)o(e)h(the)g(t)o(yp)q(es)h(indicated)f(b)o(y)g
(their)224 2337 y(names,)f(so)g(that)g FK(Vint)j FN(is)d(an)g(in)o
(teger)g(op)q(erand,)g FK(V\015t)k FN(is)c(a)g(single)f(precision)i
(\\\015oat",)e(while)224 2387 y FK(Vdbl)18 b FN(is)c(a)g(double)f
(precision)i(v)n(alue.)287 2438 y(W)m(e)k(assume)g(that)g(the)h
(language)e(in)h(whic)o(h)h(the)g(statemen)o(t)f(is)g(written)h(pro)o
(vides)224 2488 y(automatic)15 b(co)q(ercions)j(from)e(in)o(teger)h(to)
g(\015oating)e(p)q(oin)o(t)i(t)o(yp)q(es,)h(and)e(that)h(an)g(implicit)
224 2538 y(do)o(wn)o(w)o(ard)e(co)q(ercion)h(across)g(an)f(assignmen)o
(t)f(statemen)o(t)h(is)g(also)g(p)q(ermitted.)22 b(The)16
b(left)224 2588 y(tree)k(in)e(\014gure)h(6.1)e(is)h(the)h
FK(AST)24 b FN(of)17 b(the)i(statemen)o(t.)32 b(On)18
b(the)h(righ)o(t)f(of)g(the)h(\014gure)f(is)224 2638
y(the)i(co)q(de-tree)g(whic)o(h)f(results)h(from)c(static)j(seman)o
(tic)f(analysis)g(of)g(the)h FK(AST)6 b FN(.)18 b(In)h(the)224
2688 y FK(Intel-x86)24 b FN(copro)q(cessor)c(arc)o(hitecture)f(all)e
(\015oating)f(p)q(oin)o(t)h(computations)g(are)h(done)g(in)p
eop
%%Page: 163 169
163 168 bop 224 274 a FL(6.1.)31 b(INTR)o(ODUCTION)14
b(TO)g(THE)g(THEOR)m(Y)570 b FN(163)376 349 y
 17958420 13945733 0 0 17958420 13945733 startTexFig
 376 349
a
%%BeginDocument: bursex1.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-36.0 256.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Ellipse
n 79 59 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 326 230 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 281 264 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 233 263 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 238 93 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 57 90 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 102 129 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 129 228 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 82 163 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 98 263 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 50 263 11 11 0 360 DrawEllipse gs col-1 s gr
% Polyline
n 246 49 m 239 49 239 62 7 arcto 4 {pop} repeat 239 69 267 69 7 arcto 4 {pop} repeat 274 69 274 56 7 arcto 4 {pop} repeat 274 49 246 49 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 271 84 m 264 84 264 97 7 arcto 4 {pop} repeat 264 104 292 104 7 arcto 4 {pop} repeat 299 104 299 91 7 arcto 4 {pop} repeat 299 84 271 84 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 271 119 m 264 119 264 132 7 arcto 4 {pop} repeat 264 139 292 139 7 arcto 4 {pop} repeat 299 139 299 126 7 arcto 4 {pop} repeat 299 119 271 119 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 246 154 m 239 154 239 167 7 arcto 4 {pop} repeat 239 174 267 174 7 arcto 4 {pop} repeat 274 174 274 161 7 arcto 4 {pop} repeat 274 154 246 154 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 296 154 m 289 154 289 167 7 arcto 4 {pop} repeat 289 174 317 174 7 arcto 4 {pop} repeat 324 174 324 161 7 arcto 4 {pop} repeat 324 154 296 154 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 315 188 m 308 188 308 201 7 arcto 4 {pop} repeat 308 208 336 208 7 arcto 4 {pop} repeat 343 208 343 195 7 arcto 4 {pop} repeat 343 188 315 188 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 270 188 m 263 188 263 201 7 arcto 4 {pop} repeat 263 208 291 208 7 arcto 4 {pop} repeat 298 208 298 195 7 arcto 4 {pop} repeat 298 188 270 188 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 222 188 m 215 188 215 201 7 arcto 4 {pop} repeat 215 208 243 208 7 arcto 4 {pop} repeat 250 208 250 195 7 arcto 4 {pop} repeat 250 188 222 188 7 arcto 4 {pop} repeat clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 262 69 m 281 84 l gs col-1 s gr
n 275.960 77.473 m 281.000 84.000 l 273.482 80.613 l gs 2 setlinejoin col-1 s gr
% Polyline
n 281 105 m 281 119 l gs col-1 s gr
n 283.000 111.000 m 281.000 119.000 l 279.000 111.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 287 140 m 306 154 l gs col-1 s gr
n 300.746 147.644 m 306.000 154.000 l 298.373 150.865 l gs 2 setlinejoin col-1 s gr
% Polyline
n 307 174 m 326 188 l gs col-1 s gr
n 320.746 181.644 m 326.000 188.000 l 318.373 184.865 l gs 2 setlinejoin col-1 s gr
% Polyline
n 326 209 m 326 220 l gs col-1 s gr
n 328.000 212.000 m 326.000 220.000 l 324.000 212.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 276 140 m 256 154 l gs col-1 s gr
n 263.701 151.051 m 256.000 154.000 l 261.407 147.774 l gs 2 setlinejoin col-1 s gr
% Polyline
n 262 175 m 280 188 l gs col-1 s gr
n 274.686 181.695 m 280.000 188.000 l 272.344 184.937 l gs 2 setlinejoin col-1 s gr
% Polyline
n 251 175 m 233 188 l gs col-1 s gr
n 240.656 184.937 m 233.000 188.000 l 238.314 181.695 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
% Polyline
n 222 223 m 215 223 215 236 7 arcto 4 {pop} repeat 215 243 243 243 7 arcto 4 {pop} repeat 250 243 250 230 7 arcto 4 {pop} repeat 250 223 222 223 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 270 223 m 263 223 263 236 7 arcto 4 {pop} repeat 263 243 291 243 7 arcto 4 {pop} repeat 298 243 298 230 7 arcto 4 {pop} repeat 298 223 270 223 7 arcto 4 {pop} repeat clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 252 69 m 238 82 l gs col-1 s gr
n 245.223 78.022 m 238.000 82.000 l 242.501 75.091 l gs 2 setlinejoin col-1 s gr
% Polyline
n 72 68 m 58 79 l gs col-1 s gr
n 65.526 75.630 m 58.000 79.000 l 63.055 72.485 l gs 2 setlinejoin col-1 s gr
% Polyline
n 85 69 m 101 118 l gs col-1 s gr
n 100.418 109.774 m 101.000 118.000 l 96.616 111.016 l gs 2 setlinejoin col-1 s gr
% Polyline
n 96 139 m 83 152 l gs col-1 s gr
n 90.071 147.757 m 83.000 152.000 l 87.243 144.929 l gs 2 setlinejoin col-1 s gr
% Polyline
n 107 140 m 129 217 l gs col-1 s gr
n 128.725 208.758 m 129.000 217.000 l 124.879 209.857 l gs 2 setlinejoin col-1 s gr
% Polyline
n 75 172 m 51 253 l gs col-1 s gr
n 55.190 245.898 m 51.000 253.000 l 51.355 244.761 l gs 2 setlinejoin col-1 s gr
% Polyline
n 89 173 m 98 253 l gs col-1 s gr
n 99.093 244.827 m 98.000 253.000 l 95.118 245.274 l gs 2 setlinejoin col-1 s gr
% Polyline
n 233 208 m 233 223 l gs col-1 s gr
n 235.000 215.000 m 233.000 223.000 l 231.000 215.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 281 209 m 281 224 l gs col-1 s gr
n 283.000 216.000 m 281.000 224.000 l 279.000 216.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 281 244 m 281 254 l gs col-1 s gr
n 283.000 246.000 m 281.000 254.000 l 279.000 246.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 232 243 m 232 252 l gs col-1 s gr
n 234.000 244.000 m 232.000 252.000 l 230.000 244.000 l gs 2 setlinejoin col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
246 62 m 
gs 1 -1 scale (asgnI) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
272 132 m 
gs 1 -1 scale (addT) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
273 98 m 
gs 1 -1 scale (tToI) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
296 168 m 
gs 1 -1 scale (dToT) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
246 167 m 
gs 1 -1 scale (addT) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
322 234 m 
gs 1 -1 scale (id) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
311 202 m 
gs 1 -1 scale (derefD) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
271 202 m 
gs 1 -1 scale (iToT) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
222 202 m 
gs 1 -1 scale (fToT) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
268 236 m 
gs 1 -1 scale (derefI) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
219 236 m 
gs 1 -1 scale (derefF) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
229 267 m 
gs 1 -1 scale (id) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
277 268 m 
gs 1 -1 scale (id) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
94 267 m 
gs 1 -1 scale (id) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
125 232 m 
gs 1 -1 scale (id) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
53 94 m 
gs 1 -1 scale (id) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
45 266 m 
gs 1 -1 scale (id) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
75 62 m 
gs 1 -1 scale (:=) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
99 132 m 
gs 1 -1 scale (+) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
79 166 m 
gs 1 -1 scale (+) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
234 97 m 
gs 1 -1 scale (id) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
228 113 m 
gs 1 -1 scale (Vint) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
48 111 m 
gs 1 -1 scale (Vint) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
89 283 m 
gs 1 -1 scale (Vint) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
272 284 m 
gs 1 -1 scale (Vint) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
316 250 m 
gs 1 -1 scale (Vdbl) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
118 248 m 
gs 1 -1 scale (Vdbl) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
224 284 m 
gs 1 -1 scale (Vflt) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
41 284 m 
gs 1 -1 scale (Vflt) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 458 1324 a FN(Figure)14 b(6.1:)j FK(AST)j FN(and)13
b(co)q(de-tree)j(of)e(example)e(expression)224 1456 y(an)i(extended)g
(precision)g FK(temp)n(or)n(ary)g(format)t FN(.)j(This)d(is)f(denoted)h
FM(T)19 b FN(in)13 b(the)h(names)f(of)g(the)224 1506
y(co)q(ercions)g(in)e(the)h(diagram.)j(In)c(essence)j(the)e(v)n
(ariable)e(addresses)k(m)o(ust)c(b)q(e)i(dereferenced)224
1556 y(and)g(the)h(resulting)f(v)n(alue)f(con)o(v)o(erted)i(in)o(to)f
(the)g(in)o(ternal)g(temp)q(orary)f(format.)16 b(When)c(the)224
1606 y(\015oating)h(p)q(oin)o(t)g(result)h(is)g(computed,)e(the)i(v)n
(alue)f(m)o(ust)g(b)q(e)h(con)o(v)o(erted)h(bac)o(k)e(do)o(wn)g(to)h
(an)224 1656 y(in)o(teger)h(v)n(alue,)e(using)g(the)i
FK(tT)m(oI)20 b FN(con)o(v)o(ersion.)287 1706 y(Eac)o(h)15
b(a)o(v)n(ailable)d(instruction)j(in)f(the)i(mac)o(hine)d(instruction)i
(set)h(matc)o(hes)e(a)g(pattern)224 1755 y(of)f(adjacen)o(t)g(no)q(des)
g(in)g(a)f(tree.)19 b(Tw)o(o)12 b(example)g(patterns)i(are)f(sho)o(wn)g
(in)f(\014gure)i(6.2)d(along)224 1805 y(with)16 b(the)g(fully)e(paren)o
(thesized)k(form)o(ulas)13 b(whic)o(h)j(de\014ne)g(them.)23
b(F)m(or)15 b(b)q(oth)h(the)g(ro)q(ot)g(of)324 1863 y
 19602964 8420065 0 0 19602964 8420065 startTexFig

324 1863 a
%%BeginDocument: pattern.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-144.0 173.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Ellipse
n 389 93 11 11 0 360 DrawEllipse gs 0.95 setgray fill gr
gs col-1 s gr
% Ellipse
n 429 160 11 11 0 360 DrawEllipse gs 0.95 setgray fill gr
gs col-1 s gr
% Ellipse
n 228 91 11 11 0 360 DrawEllipse gs 0.95 setgray fill gr
gs col-1 s gr
% Ellipse
n 198 91 11 11 0 360 DrawEllipse gs 0.95 setgray fill gr
gs col-1 s gr
% Polyline
n 398 51 m 391 51 391 64 7 arcto 4 {pop} repeat 391 71 419 71 7 arcto 4 {pop} repeat 426 71 426 58 7 arcto 4 {pop} repeat 426 51 398 51 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 419 84 m 412 84 412 97 7 arcto 4 {pop} repeat 412 104 440 104 7 arcto 4 {pop} repeat 447 104 447 91 7 arcto 4 {pop} repeat 447 84 419 84 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 419 119 m 412 119 412 132 7 arcto 4 {pop} repeat 412 139 440 139 7 arcto 4 {pop} repeat 447 139 447 126 7 arcto 4 {pop} repeat 447 119 419 119 7 arcto 4 {pop} repeat clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 415 72 m 430 84 l gs col-1 s gr
n 425.002 77.441 m 430.000 84.000 l 422.504 80.564 l gs 2 setlinejoin col-1 s gr
% Polyline
n 403 72 m 392 82 l gs col-1 s gr
n 399.265 78.098 m 392.000 82.000 l 396.574 75.139 l gs 2 setlinejoin col-1 s gr
% Polyline
n 429 105 m 429 119 l gs col-1 s gr
n 431.000 111.000 m 429.000 119.000 l 427.000 111.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 429 140 m 429 150 l gs col-1 s gr
n 431.000 142.000 m 429.000 150.000 l 427.000 142.000 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
% Polyline
n 202 49 m 195 49 195 62 7 arcto 4 {pop} repeat 195 69 223 69 7 arcto 4 {pop} repeat 230 69 230 56 7 arcto 4 {pop} repeat 230 49 202 49 7 arcto 4 {pop} repeat clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 217 70 m 226 80 l gs col-1 s gr
n 222.135 72.716 m 226.000 80.000 l 219.162 75.392 l gs 2 setlinejoin col-1 s gr
% Polyline
n 207 70 m 199 80 l gs col-1 s gr
n 205.559 75.002 m 199.000 80.000 l 202.436 72.504 l gs 2 setlinejoin col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
399 64 m 
gs 1 -1 scale (addT) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
420 97 m 
gs 1 -1 scale (iToT) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
417 132 m 
gs 1 -1 scale (derefI) col-1 show gr
/Courier-Bold findfont 10.00 scalefont setfont
429 63 m 
gs 1 -1 scale (Treg) col-1 show gr
/Courier-Bold findfont 10.00 scalefont setfont
444 162 m 
gs 1 -1 scale (Adrs) col-1 show gr
/Courier-Bold findfont 10.00 scalefont setfont
350 94 m 
gs 1 -1 scale (Treg) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
347 192 m 
gs 1 -1 scale (Treg=addT\(Treg,iToT\(derefI\(Adrs\)\)\)) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
202 63 m 
gs 1 -1 scale (addT) col-1 show gr
/Courier-Bold findfont 10.00 scalefont setfont
234 63 m 
gs 1 -1 scale (Treg) col-1 show gr
/Courier-Bold findfont 10.00 scalefont setfont
241 94 m 
gs 1 -1 scale (Treg) col-1 show gr
/Courier-Bold findfont 10.00 scalefont setfont
160 93 m 
gs 1 -1 scale (Treg) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
174 130 m 
gs 1 -1 scale (Treg=addT\(Treg,Treg\)) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 375 2488 a FN(Figure)e(6.2:)j(tree)e(patterns,)g(and)f(corresp)q
(onding)g(pre\014x)h(expressions)224 2588 y(eac)o(h)k(tree,)g(and)f
(the)g(lea)o(v)o(es)g(of)g(the)g(trees)h(w)o(e)f(annotate)g(the)h(no)q
(de)f(with)g(a)f FK(typ)n(eform)s FN(,)224 2638 y(whic)o(h)12
b(indicates)g(the)h(form)d(in)h(whic)o(h)h(the)g(expression)h(ro)q
(oted)f(at)g(that)g(no)q(de)g(m)o(ust)f(ha)o(v)o(e.)224
2688 y(In)k(the)h(examples,)e(the)h(t)o(w)o(o)g(forms)f(are)h
FK(T)m(r)n(e)n(g)t FN(,)e(the)j(in)o(ternal)f(\015oating)f(p)q(oin)o(t)
g(temp)q(orary)p eop
%%Page: 164 170
164 169 bop 224 274 a FN(164)425 b FL(CHAPTER)14 b(6.)32
b(BOTTOM-UP)15 b(TREE)f(REWRITING)224 390 y FN(format,)f(and)h
FK(A)n(drs)s FN(,)g(a)g(generalised)h(memory)d(address)k(form.)i(Of)d
(course,)g(the)g(lea)o(v)o(es)g(of)224 440 y(the)h(patterns,)g(sho)o
(wn)g(shaded)f(in)g(the)h(\014gure,)g(will)d(actually)h(b)q(e)i(the)g
(ro)q(ots)g(of)e(subtrees)224 490 y(in)g(the)g(sub)r(ject)i(trees.)287
542 y(On)22 b(the)i(left,)f(an)g(instruction,)h(denoted)g(\\)p
FG(fadd)p FN(")d(in)h(most)f(assem)o(blers)i(for)f(the)224
592 y FK(Intel-x86)j FN(arc)o(hitecture,)20 b(adds)f(together)g(t)o(w)o
(o)f(v)n(alues)g(in)g(the)h FK(T)m(r)n(e)n(g)h FN(form)d(to)h(pro)q
(duce)224 642 y(a)c(result)h(in)e(the)i FK(T)m(r)n(e)n(g)h
FN(form.)g(The)f(pro)q(duction)f(whic)o(h)g(sp)q(eci\014es)h(this)f
(pattern)h(is)f(|)705 738 y FG(Treg)21 b(=)h(addT\(Treg,Treg\))224
834 y FN(The)10 b(pattern)g(on)f(the)h(righ)o(t,)f(whic)o(h)h(in)e
(most)g(assem)o(blers)i(for)f FK(Intel-x86)15 b FN(has)9
b(the)h(mnemonic)224 884 y(\\)p FG(fiadd)p FN(",)j(tak)o(es)i(a)f
FK(T)m(r)n(e)n(g)k FN(on)c(the)h(left,)f(and)h(a)f(memory)e(address)k
(on)e(the)h(righ)o(t.)20 b(The)15 b(in-)224 934 y(struction)j
(dereferences)i(the)e(memory)c(address,)19 b(con)o(v)o(erts)f(the)g
(resulting)f(in)o(teger)g(in)o(to)224 983 y(the)h(in)o(ternal)e
(\015oating)f(p)q(oin)o(t)i(form,)e(and)h(adds)h(the)g(t)o(w)o(o)f(v)n
(alues)h(to)f(create)i(a)e(result)i(in)224 1033 y(the)d
FK(T)m(r)n(e)n(g)h FN(form.)h(The)d(de\014ning)g(pro)q(duction)g
(pattern)h(is)e(|)553 1129 y FG(Treg)21 b(=)g(addT\(Treg,iToT\(der)o
(efI\(A)o(drs\)\))o(\))224 1225 y FN(Notice)14 b(carefully)m(,)e(that)h
(these)h(patterns)g(do)f(not)g(sp)q(ecify)g(an)o(ything)f(ab)q(out)h
(the)h(lea)o(v)o(es)f(of)224 1275 y(the)k(patterns,)g(except)g(for)f
(the)g(form)e(in)i(whic)o(h)f(the)i(v)n(alue)e(m)o(ust)g(b)q(e.)24
b(In)16 b(other)h(w)o(ords,)224 1325 y(w)o(e)h(do)f(not)g(care)h(at)f
(all)f(ab)q(out)h(the)g FK(structur)n(e)j FN(of)c(the)i(subtrees)h
(whic)o(h)e(are)h(ro)q(oted)f(at)224 1375 y(the)d(lea)o(v)o(es)f(of)g
(the)g(pattern,)h(pro)o(vided)f(that)g(the)h(v)n(alue)e(ma)o(y)f(b)q(e)
j(placed)f(in)g(the)g(required)224 1424 y FK(typ)n(eform)s
FN(.)287 1477 y(The)j(a)o(v)n(ailable)d(copro)q(cessor)18
b(op)q(erations)e(are)g(sho)o(wn)f(in)h(table)f(6.3,)g(with)g(the)h
(costs)224 1526 y(sho)o(wn)h(in)g(the)g(\014gure.)592
1511 y Fz(1)639 1526 y FN(Notice)g(that)g(eac)o(h)h(of)e(the)i
(add-from-m)o(em)o(ory)c(tree)k(patterns)p 165 1591 1561
2 v 164 1636 2 46 v 252 1636 V 526 1623 a Fv(pro)q(duction)p
1008 1636 V 295 w(cost)p 1134 1636 V 232 w(commen)o(t)p
1724 1636 V 165 1638 1561 2 v 164 1684 2 46 v 209 1670
a FD(1)p 252 1684 V 50 w FF(Stmt)g(=)h(asgnI\(Adrs)o(,tT)o(oI)o(\(Tr)o
(eg\))o(\))p 1008 1684 V 203 w FD(79)p 1134 1684 V 69
w(con)o(v)o(ert)14 b(T)m(reg)e(to)h(in)o(t)h(and)g(store)p
1724 1684 V 164 1729 V 209 1716 a(2)p 252 1729 V 50 w
FF(Treg)k(=)h(iToT\(deref)o(I\(A)o(dr)o(s\)\))p 1008
1729 V 281 w FD(45)p 1134 1729 V 69 w(load)14 b(in)o(t)g(and)g(con)o(v)
o(ert)f(to)g(T)m(reg)p 1724 1729 V 164 1775 V 209 1761
a(3)p 252 1775 V 50 w FF(Treg)18 b(=)h(fToT\(deref)o(F\(A)o(dr)o(s\)\))
p 1008 1775 V 281 w FD(20)p 1134 1775 V 69 w(load)14
b(\015oat)g(and)f(con)o(v)o(ert)h(to)f(T)m(reg)p 1724
1775 V 164 1821 V 209 1807 a(4)p 252 1821 V 50 w FF(Treg)18
b(=)h(dToT\(deref)o(D\(A)o(dr)o(s\)\))p 1008 1821 V 281
w FD(25)p 1134 1821 V 69 w(load)14 b(double)h(and)f(con)o(v)o(ert)f(to)
g(T)m(reg)p 1724 1821 V 164 1866 V 209 1853 a(5)p 252
1866 V 50 w FF(Treg)18 b(=)h(addT\(Treg,)o(Tre)o(g\))p
1008 1866 V 340 w FD(23)p 1134 1866 V 69 w(add)14 b(t)o(w)o(o)e(T)m
(regs)h(together)p 1724 1866 V 164 1912 V 209 1898 a(6)p
252 1912 V 50 w FF(Treg)18 b(=)h(addT\(Treg,)o(iTo)o(T\()o(der)o(efI)o
(\(A)o(drs)o(\)\))o(\))p 1008 1912 V 66 w FD(57)p 1134
1912 V 69 w(load)14 b(in)o(t,)g(con)o(v)o(ert)f(and)h(add)p
1724 1912 V 164 1958 V 209 1944 a(7)p 252 1958 V 50 w
FF(Treg)k(=)h(addT\(iToT\()o(der)o(ef)o(I\(A)o(drs)o(\)\))o(,Tr)o(eg)o
(\))p 1008 1958 V 66 w FD(57)p 1134 1958 V 69 w(load)14
b(in)o(t,)g(con)o(v)o(ert)f(and)h(add)p 1724 1958 V 164
2003 V 209 1990 a(8)p 252 2003 V 50 w FF(Treg)k(=)h(addT\(Treg,)o(fTo)o
(T\()o(der)o(efF)o(\(A)o(drs)o(\)\))o(\))p 1008 2003
V 66 w FD(24)p 1134 2003 V 69 w(load)14 b(\015oat,)f(con)o(v)o(ert)h
(and)g(add)p 1724 2003 V 164 2049 V 209 2035 a(9)p 252
2049 V 50 w FF(Treg)k(=)h(addT\(fToT\()o(der)o(ef)o(F\(A)o(drs)o(\)\))o
(,Tr)o(eg)o(\))p 1008 2049 V 66 w FD(24)p 1134 2049 V
69 w(load)14 b(\015oat,)f(con)o(v)o(ert)h(and)g(add)p
1724 2049 V 164 2095 V 190 2081 a(10)p 252 2095 V 50
w FF(Treg)k(=)h(addT\(Treg,)o(dTo)o(T\()o(der)o(efD)o(\(A)o(drs)o(\)\))
o(\))p 1008 2095 V 66 w FD(29)p 1134 2095 V 69 w(load)14
b(double,)h(con)o(v)o(ert)e(and)h(add)p 1724 2095 V 164
2140 V 190 2126 a(11)p 252 2140 V 50 w FF(Treg)k(=)h(addT\(dToT\()o
(der)o(ef)o(D\(A)o(drs)o(\)\))o(,Tr)o(eg)o(\))p 1008
2140 V 66 w FD(29)p 1134 2140 V 69 w(load)14 b(double,)h(con)o(v)o(ert)
e(and)h(add)p 1724 2140 V 164 2186 V 190 2172 a(12)p
252 2186 V 50 w FF(Adrs)k(=)h(ident)p 1008 2186 V 547
w FD(0)p 1134 2186 V 79 w(a)13 b(v)n(ariable)i(name)f(is)f(an)h
(address)p 1724 2186 V 165 2188 1561 2 v 618 2262 a FN(Figure)g(6.3:)j
(pro)q(ductions)d(for)g(example)224 2366 y(o)q(ccurs)21
b(in)e(t)o(w)o(o)g(forms,)g(with)h(the)g(memory)d(op)q(erand)j(on)f
(the)h(left,)g(or)g(on)f(the)h(righ)o(t.)224 2416 y(This)d(is)f(b)q
(ecause)i(the)f(add)f(op)q(eration)h(is)f(comm)o(utativ)n(e.)23
b(The)17 b(pattern)g(on)g(the)g(left)f(in)224 2466 y(\014gure)h(6.2)d
(is)i(pro)q(duction)f(5,)h(while)f(the)h(pattern)g(on)g(the)g(righ)o(t)
f(is)g(pro)q(duction)h(6.)23 b(The)224 2516 y(\014nal)13
b(pro)q(duction)h(states)h(that)f(a)f(v)n(ariable)f(name)h(is)g(a)g
(legal)g(address,)h(and)g(that)f(the)h(use)224 2566 y(of)g(this)g(pro)q
(duction)g(has)g(no)f(run)o(time)g(cost.)p 224 2610 577
2 v 271 2636 a Fy(1)288 2648 y Fx(The)k(costs,)g(for)f(this)g(example,)
f(are)i(the)f(minim)o(um)e(n)o(um)o(b)q(er)g(of)j(cycles)e(tak)o(en)g
(to)i(execute)d(the)224 2688 y(instructions)9 b(on)i(an)g
Fu(Intel-386)17 b Fx(and)10 b Fu(387)17 b Fx(copro)q(cessor.)p
eop
%%Page: 165 171
165 170 bop 224 274 a FL(6.1.)31 b(INTR)o(ODUCTION)14
b(TO)g(THE)g(THEOR)m(Y)570 b FN(165)287 390 y(Ho)o(w)14
b(are)h(w)o(e)f(to)h(enco)q(de)h(the)f(tree)g(of)f(\014gure)h(6.1?)k(T)
m(ak)o(e)14 b(for)g(example)f(the)i(addition)224 440
y(whic)o(h)f(is)f(the)h(lo)o(w)o(er)f(of)g(the)h(t)o(w)o(o)f(in)g(the)h
(tree,)g(that)g(of)f(the)h(\015oat)f(and)g(in)o(teger)h(op)q(erands.)
224 490 y(There)k(are)g(three)g(p)q(ossible)f(w)o(a)o(ys)f(in)g(whic)o
(h)h(this)g(single)f(op)q(eration)h(ma)o(y)e(b)q(e)i(enco)q(ded.)224
540 y(W)m(e)h(migh)o(t)f(load)g(and)i(con)o(v)o(ert)g(eac)o(h)g(of)f
(the)h(op)q(erands,)h(using)e(pro)q(ductions)h(3)f(and)h(2)224
590 y(resp)q(ectiv)o(ely)m(,)14 b(and)f(then)g(add)g(using)g(pro)q
(duction)g(5.)18 b(Alternativ)o(ely)12 b(w)o(e)h(migh)o(t)e(load)h
(just)224 640 y(one)g(of)f(the)h(op)q(erands)h(and)e(con)o(v)o(ert)i
(and)e(add)g(the)i(other)f(in)f(a)g(single)g(instruction.)18
b(These)224 689 y(three)13 b(rewritings)f(of)e(the)i(subtree)h(are)f
(sho)o(wn)f(in)g(\014gure)h(6.4.)k(Lo)q(oking)10 b(at)h(the)h(total)e
(costs)295 752 y
 20523909 9209446 0 0 20523909 9209446 startTexFig
 295 752 a
%%BeginDocument: cover.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-25.0 171.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Ellipse
n 103 145 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 55 144 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 223 144 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 175 143 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 343 144 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 295 143 11 11 0 360 DrawEllipse gs col-1 s gr
0.500 setlinewidth
% Polyline
n 84 55 m 102 69 l gs col-1 s gr
n 96.913 62.510 m 102.000 69.000 l 94.457 65.667 l gs 2 setlinejoin col-1 s gr
% Polyline
n 74 55 m 55 69 l gs col-1 s gr
n 62.627 65.865 m 55.000 69.000 l 60.254 62.644 l gs 2 setlinejoin col-1 s gr
% Polyline
n 103 124 m 103 135 l gs col-1 s gr
n 105.000 127.000 m 103.000 135.000 l 101.000 127.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 54 124 m 54 133 l gs col-1 s gr
n 56.000 125.000 m 54.000 133.000 l 52.000 125.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 92 69 m 85 69 85 82 7 arcto 4 {pop} repeat 85 89 113 89 7 arcto 4 {pop} repeat 120 89 120 76 7 arcto 4 {pop} repeat 120 69 92 69 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 92 104 m 85 104 85 117 7 arcto 4 {pop} repeat 85 124 113 124 7 arcto 4 {pop} repeat 120 124 120 111 7 arcto 4 {pop} repeat 120 104 92 104 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 44 104 m 37 104 37 117 7 arcto 4 {pop} repeat 37 124 65 124 7 arcto 4 {pop} repeat 72 124 72 111 7 arcto 4 {pop} repeat 72 104 44 104 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 189 58 m 175 68 l gs col-1 s gr
n 182.672 64.978 m 175.000 68.000 l 180.347 61.723 l gs 2 setlinejoin col-1 s gr
% Polyline
n 223 123 m 223 134 l gs col-1 s gr
n 225.000 126.000 m 223.000 134.000 l 221.000 126.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 174 123 m 174 132 l gs col-1 s gr
n 176.000 124.000 m 174.000 132.000 l 172.000 124.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 188 34 m 181 34 181 47 7 arcto 4 {pop} repeat 181 54 209 54 7 arcto 4 {pop} repeat 216 54 216 41 7 arcto 4 {pop} repeat 216 34 188 34 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 212 68 m 205 68 205 81 7 arcto 4 {pop} repeat 205 88 233 88 7 arcto 4 {pop} repeat 240 88 240 75 7 arcto 4 {pop} repeat 240 68 212 68 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 212 103 m 205 103 205 116 7 arcto 4 {pop} repeat 205 123 233 123 7 arcto 4 {pop} repeat 240 123 240 110 7 arcto 4 {pop} repeat 240 103 212 103 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 164 103 m 157 103 157 116 7 arcto 4 {pop} repeat 157 123 185 123 7 arcto 4 {pop} repeat 192 123 192 110 7 arcto 4 {pop} repeat 192 103 164 103 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 330 58 m 342 68 l gs col-1 s gr
n 337.135 61.342 m 342.000 68.000 l 334.574 64.415 l gs 2 setlinejoin col-1 s gr
% Polyline
n 343 123 m 343 134 l gs col-1 s gr
n 345.000 126.000 m 343.000 134.000 l 341.000 126.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 294 123 m 294 132 l gs col-1 s gr
n 296.000 124.000 m 294.000 132.000 l 292.000 124.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 308 34 m 301 34 301 47 7 arcto 4 {pop} repeat 301 54 329 54 7 arcto 4 {pop} repeat 336 54 336 41 7 arcto 4 {pop} repeat 336 34 308 34 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 284 68 m 277 68 277 81 7 arcto 4 {pop} repeat 277 88 305 88 7 arcto 4 {pop} repeat 312 88 312 75 7 arcto 4 {pop} repeat 312 68 284 68 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 332 68 m 325 68 325 81 7 arcto 4 {pop} repeat 325 88 353 88 7 arcto 4 {pop} repeat 360 88 360 75 7 arcto 4 {pop} repeat 360 68 332 68 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 332 103 m 325 103 325 116 7 arcto 4 {pop} repeat 325 123 353 123 7 arcto 4 {pop} repeat 360 123 360 110 7 arcto 4 {pop} repeat 360 103 332 103 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 284 103 m 277 103 277 116 7 arcto 4 {pop} repeat 277 123 305 123 7 arcto 4 {pop} repeat 312 123 312 110 7 arcto 4 {pop} repeat 312 103 284 103 7 arcto 4 {pop} repeat clp gs col-1 s gr
1.000 setlinewidth
% Polyline
n 68 35 m 61 35 61 48 7 arcto 4 {pop} repeat 61 55 89 55 7 arcto 4 {pop} repeat 96 55 96 42 7 arcto 4 {pop} repeat 96 35 68 35 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 43 68 m 36 68 36 117 7 arcto 4 {pop} repeat 36 124 65 124 7 arcto 4 {pop} repeat 72 124 72 75 7 arcto 4 {pop} repeat 72 68 43 68 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 91 69 m 84 69 84 117 7 arcto 4 {pop} repeat 84 124 113 124 7 arcto 4 {pop} repeat 120 124 120 76 7 arcto 4 {pop} repeat 120 69 91 69 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 331 68 m 324 68 324 116 7 arcto 4 {pop} repeat 324 123 354 123 7 arcto 4 {pop} repeat 361 123 361 75 7 arcto 4 {pop} repeat 361 68 331 68 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 163 67 m 156 67 156 116 7 arcto 4 {pop} repeat 156 123 185 123 7 arcto 4 {pop} repeat 192 123 192 74 7 arcto 4 {pop} repeat 192 67 163 67 7 arcto 4 {pop} repeat clp gs col-1 s gr
0.500 setlinewidth
	[2.000000] 0 setdash
% Polyline
n 103 89 m 103 104 l gs col-1 s gr
	[] 0 setdash
	[2.000000] 0 setdash
% Polyline
n 55 89 m 55 104 l gs col-1 s gr
	[] 0 setdash
	[2.000000] 0 setdash
% Polyline
n 175 88 m 175 103 l gs col-1 s gr
	[] 0 setdash
	[2.000000] 0 setdash
% Polyline
n 204 54 m 222 68 l gs col-1 s gr
	[] 0 setdash
	[2.000000] 0 setdash
% Polyline
n 223 88 m 223 103 l gs col-1 s gr
	[] 0 setdash
	[2.000000] 0 setdash
% Polyline
n 314 54 m 295 68 l gs col-1 s gr
	[] 0 setdash
	[2.000000] 0 setdash
% Polyline
n 295 88 m 295 103 l gs col-1 s gr
	[] 0 setdash
	[2.000000] 0 setdash
% Polyline
n 343 88 m 343 103 l gs col-1 s gr
	[] 0 setdash
	[2.000000] 0 setdash
% Polyline
n 189 58 m 196 54 l gs col-1 s gr
	[] 0 setdash
	[2.000000] 0 setdash
% Polyline
n 325 54 m 330 58 l gs col-1 s gr
	[] 0 setdash
% Polyline
n 163 67 m 156 67 156 80 7 arcto 4 {pop} repeat 156 87 184 87 7 arcto 4 {pop} repeat 191 87 191 74 7 arcto 4 {pop} repeat 191 67 163 67 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 43 68 m 36 68 36 81 7 arcto 4 {pop} repeat 36 88 64 88 7 arcto 4 {pop} repeat 71 88 71 75 7 arcto 4 {pop} repeat 71 68 43 68 7 arcto 4 {pop} repeat clp gs col-1 s gr
1.000 setlinewidth
% Closed spline
n 190.000 34.000 m
	190.000 34.000 200.000 34.000 208.000 34.000 DrawSplineSection
	208.000 34.000 216.000 34.000 216.000 39.500 DrawSplineSection
	216.000 39.500 216.000 45.000 228.000 56.500 DrawSplineSection
	228.000 56.500 240.000 68.000 240.000 73.500 DrawSplineSection
	240.000 73.500 240.000 79.000 240.000 96.500 DrawSplineSection
	240.000 96.500 240.000 114.000 240.000 118.500 DrawSplineSection
	240.000 118.500 240.000 123.000 231.500 123.000 DrawSplineSection
	231.500 123.000 223.000 123.000 214.000 123.000 DrawSplineSection
	214.000 123.000 205.000 123.000 205.000 118.500 DrawSplineSection
	205.000 118.500 205.000 114.000 205.000 96.000 DrawSplineSection
	205.000 96.000 205.000 78.000 205.000 73.000 DrawSplineSection
	205.000 73.000 205.000 68.000 193.500 61.000 DrawSplineSection
	193.500 61.000 182.000 54.000 181.500 49.500 DrawSplineSection
	181.500 49.500 181.000 45.000 181.500 46.000 DrawSplineSection
	181.500 46.000 182.000 47.000 181.000 40.500 DrawSplineSection
	181.000 40.500 180.000 34.000 190.000 34.000 DrawSplineSection closepath gs col-1 s gr
% Closed spline
n 310.000 34.000 m
	310.000 34.000 319.000 34.000 327.500 34.000 DrawSplineSection
	327.500 34.000 336.000 34.000 336.000 39.500 DrawSplineSection
	336.000 39.500 336.000 45.000 336.500 49.500 DrawSplineSection
	336.500 49.500 337.000 54.000 325.000 61.000 DrawSplineSection
	325.000 61.000 313.000 68.000 313.000 73.500 DrawSplineSection
	313.000 73.500 313.000 79.000 313.000 95.500 DrawSplineSection
	313.000 95.500 313.000 112.000 313.000 117.500 DrawSplineSection
	313.000 117.500 313.000 123.000 304.000 123.000 DrawSplineSection
	304.000 123.000 295.000 123.000 286.000 123.000 DrawSplineSection
	286.000 123.000 277.000 123.000 277.000 118.000 DrawSplineSection
	277.000 118.000 277.000 113.000 277.000 95.500 DrawSplineSection
	277.000 95.500 277.000 78.000 277.000 73.000 DrawSplineSection
	277.000 73.000 277.000 68.000 288.500 60.500 DrawSplineSection
	288.500 60.500 300.000 53.000 300.500 48.500 DrawSplineSection
	300.500 48.500 301.000 44.000 301.000 39.000 DrawSplineSection
	301.000 39.000 301.000 34.000 310.000 34.000 DrawSplineSection closepath gs col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
68 48 m 
gs 1 -1 scale (addT) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
93 83 m 
gs 1 -1 scale (iToT) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
44 83 m 
gs 1 -1 scale (fToT) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
90 117 m 
gs 1 -1 scale (derefI) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
41 117 m 
gs 1 -1 scale (derefF) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
51 148 m 
gs 1 -1 scale (id) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
99 149 m 
gs 1 -1 scale (id) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
94 165 m 
gs 1 -1 scale (Vint) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
46 165 m 
gs 1 -1 scale (Vflt) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
188 47 m 
gs 1 -1 scale (addT) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
213 82 m 
gs 1 -1 scale (iToT) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
164 82 m 
gs 1 -1 scale (fToT) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
210 116 m 
gs 1 -1 scale (derefI) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
161 116 m 
gs 1 -1 scale (derefF) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
171 147 m 
gs 1 -1 scale (id) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
219 148 m 
gs 1 -1 scale (id) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
214 164 m 
gs 1 -1 scale (Vint) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
166 164 m 
gs 1 -1 scale (Vflt) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
308 47 m 
gs 1 -1 scale (addT) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
333 82 m 
gs 1 -1 scale (iToT) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
284 82 m 
gs 1 -1 scale (fToT) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
330 116 m 
gs 1 -1 scale (derefI) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
281 116 m 
gs 1 -1 scale (derefF) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
291 147 m 
gs 1 -1 scale (id) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
339 148 m 
gs 1 -1 scale (id) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
334 164 m 
gs 1 -1 scale (Vint) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
286 164 m 
gs 1 -1 scale (Vflt) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
50 189 m 
gs 1 -1 scale (total cost 88) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
170 190 m 
gs 1 -1 scale (total cost 77) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
292 189 m 
gs 1 -1 scale (total cost 69) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
27 65 m 
gs 1 -1 scale (prod 3) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
99 47 m 
gs 1 -1 scale (prod 5) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
105 65 m 
gs 1 -1 scale (prod 2) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
147 64 m 
gs 1 -1 scale (prod 3) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
224 47 m 
gs 1 -1 scale (prod 6) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
347 63 m 
gs 1 -1 scale (prod 2) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
271 47 m 
gs 1 -1 scale (prod 9) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 327 1427 a FN(Figure)k(6.4:)j(three)f(enco)q(dings)e(of)f(the)i(lo)o
(w)o(er)e(add)h(op)q(eration)g(in)f(\014gure)i(6.1)224
1532 y(of)g(the)h(tree-fragmen)o(ts)f(sho)o(wn)h(in)e(the)i(\014gure)g
(sho)o(ws)g(that)f(it)g(is)g(actually)g(b)q(est)h(to)f(load)224
1582 y(and)e(con)o(v)o(ert)h(the)g(in)o(teger)f(op)q(erand,)g(and)g
(then)h(con)o(v)o(ert)f(and)g(add)g(the)h(\015oat)e(op)q(erand)i(in)224
1631 y(a)g(single)g(instruction.)19 b(Note)c(in)f(this)g(\014gure)h
(that)f(the)h(least)f(costly)g(co)o(v)o(er)h(mak)o(es)e(use)i(of)224
1681 y(pro)q(duction)i(9,)f(whic)o(h)g(is)g(the)h(comm)o(utativ)o(e)d
(v)o(ersion)i(of)g(pro)q(duction)g(8,)g(but)h(with)f(the)224
1731 y(memory)c(op)q(erand)i(on)g(the)g(left,)g(rather)g(than)g(the)h
(righ)o(t.)287 1783 y(Applying)10 b(similar)g(reasoning)h(to)h(the)g
(rest)h(of)e(the)i(tree)g(sho)o(ws)f(that)g(the)g(whole)g(state-)224
1833 y(men)o(t)20 b(can)g(b)q(e)h(enco)q(ded)h(for)e(a)g(cost)h(of)f
(177)g(cycles,)1104 1818 y Fz(2)1145 1833 y FN(b)o(y)g(the)h(follo)o
(wing)d(instruction)224 1883 y(sequence.)320 1982 y FF(fild)g(Vint)167
b FD(;)13 b FE(pr)n(o)n(d)g(2)69 b FD(load)14 b(and)f(con)o(v)o(ert)h
(the)f(in)o(teger)h({)f(cost)g(45)320 2027 y FF(fadd)18
b(Vflt)167 b FD(;)13 b FE(pr)n(o)n(d)g(9)69 b FD(con)o(v)o(ert)13
b(and)h(add)f(the)h(\015oat)f({)g(cost)g(24)320 2073
y FF(fadd)18 b(Vdbl)167 b FD(;)13 b FE(pr)n(o)n(d)g(10)49
b FD(con)o(v)o(ert)13 b(and)h(add)f(the)h(double)g({)f(cost)g(29)320
2119 y FF(fistp)18 b(Vint)147 b FD(;)13 b FE(pr)n(o)n(d)g(1)69
b FD(con)o(v)o(ert)13 b(result)h(and)g(store)f(in)o(teger)h({)f(cost)g
(79)224 2294 y FH(6.1.2)56 b(Dynamic)16 b(programming)224
2376 y FN(In)21 b(the)g(preceding)h(discussion,)g(it)f(w)o(as)f
(implicitly)e(assumed)i(that)h(\014nding)f(the)h(b)q(est)224
2426 y(rewriting)12 b(of)g(the)g(\014rst)h(add)f(instruction)g(w)o
(ould)f(necessarily)i(lead)f(to)g(the)g(b)q(est)h(rewriting)224
2475 y(for)f(the)g(whole)g(tree.)18 b(In)12 b(e\013ect)h(w)o(e)f
(assumed)g(that)g(an)f(optimal)e(c)o(hoice)k(for)e(ev)o(ery)i(subtree)
224 2525 y(w)o(ould)g(lead)h(to)g(an)g(optimal)d(rewriting)j(for)f(the)
i(whole)e(tree.)p 224 2570 577 2 v 271 2597 a Fy(2)288
2609 y Fx(Actually)m(,)f(there)g(are)g(a)h(n)o(um)o(b)q(er)e(of)i
(other)f(instruction)o(s)f(whic)o(h)h(ha)o(v)o(e)g(b)q(een)g(ignored)f
(here.)19 b(These)224 2648 y(sa)o(v)o(e)10 b(and)f(restore)f(the)h
(rounding)f(mo)q(de)g(of)i(the)f(copro)q(cessor)e(to)j(pro)o(vide)e
(the)h(correct)f(seman)o(tics)g(for)h(the)224 2688 y(do)o(wn)o(w)o(ard)
i(co)q(ercion.)p eop
%%Page: 166 172
166 171 bop 224 274 a FN(166)425 b FL(CHAPTER)14 b(6.)32
b(BOTTOM-UP)15 b(TREE)f(REWRITING)287 390 y FN(The)g(assumption)e(that)
i(ev)o(ery)h(subtree)g(of)f(an)f(optimal)e(tree)k(is)f(separately)g
(optimal,)224 440 y(allo)o(ws)g(us)i(to)f(use)h(a)f(classic)h(divide)f
(and)g(conquer)h(optimization)d(tec)o(hnique)j(called)f
FK(dy-)224 490 y(namic)j(pr)n(o)n(gr)n(amming)p FN(.)24
b(It)17 b(w)o(orks)f(in)g(this)g(case)i(b)q(ecause)g(the)f(cost)g(of)e
(the)i(rewriting)f(is)224 540 y(a)g(simple)f(sum)g(of)h(the)g(costs)h
(of)f(the)h(subtrees)h(plus)e(the)h(cost)g(of)e(the)i(pro)q(duction,)f
(and)224 590 y(b)q(ecause)g(of)d(a)h(sort)g(of)f(con)o(text)i(free)f
(prop)q(ert)o(y)h(of)e(the)i(pro)q(duction)f(costs.)19
b(In)14 b(e\013ect,)h(the)224 640 y(cost)g(of)f(a)g(particular)f(pro)q
(duction)i(dep)q(ends)g(only)f(on)g(the)g(t)o(yp)q(eforms)g(of)f(the)i
(op)q(erands,)224 689 y(and)e(not)f(at)h(all)e(on)h(the)h(enco)q(ding)g
(of)f(the)h(subtrees)i(whic)o(h)d(deliv)o(ered)h(op)q(erands)h(of)e
(those)224 739 y(t)o(yp)q(eforms.)29 b(In)17 b(the)h(sp)q(eci\014c)h
(example)e(in)g(the)h(last)f(section,)i(the)f(cost)g(of)f(the)h(second)
224 789 y FG(fadd)e FN(do)q(es)h(not)g(dep)q(end)h(on)e(the)h(w)o(a)o
(y)f(in)g(whic)o(h)h(the)g(left)f(subtree)i(computes)f(its)f
FK(T)m(r)n(e)n(g)224 839 y FN(result.)31 b(Th)o(us)18
b(w)o(e)h(ma)o(y)c(c)o(ho)q(ose)k(the)g(fastest)f(w)o(a)o(y)g(of)f(pro)
q(ducing)h(an)g(op)q(erand)g(of)f(this)224 889 y(t)o(yp)q(eform,)c
(secure)k(in)d(the)h(kno)o(wledge)g(that)f(the)h(particular)g(c)o
(hoice)g(will)e(not)h(a\013ect)i(the)224 938 y(costs)f(of)f(decisions)g
(further)h(up)f(the)g(tree.)287 989 y(In)j(general,)g(w)o(e)g(do)g(not)
f(ha)o(v)o(e)h(a)g(single)f(p)q(ossible)h(t)o(yp)q(eform)f(for)g(an)h
(op)q(erand,)g(and)224 1039 y(w)o(e)h(m)o(ust)f(w)o(ork)g(out)h(the)g
(optimal)d(rewriting)i(of)h(a)f(giv)o(en)g(subtree)i(for)f(ev)o(ery)g
(p)q(ossible)224 1088 y(t)o(yp)q(eform)i(of)g(the)h(subtree's)h(ro)q
(ot)e(no)q(de.)38 b(The)21 b(details)g(of)e(the)i(w)o(a)o(y)f(in)g
(whic)o(h)h(suc)o(h)224 1138 y(trees)e(are)f(annotated)f(is)g(giv)o(en)
g(in)f(a)h(later)g(section,)i(ho)o(w)o(ev)o(er)e(the)h(underlying)f
(idea)f(is)224 1188 y(quite)e(simple.)j(W)m(e)c(mak)o(e)f(one)i(pass)g
(o)o(v)o(er)g(the)h(tree,)f(b)q(ottom-up,)e(computing)g
FK(al)r(l)18 b FN(of)13 b(the)224 1238 y(p)q(ossible)18
b(result)g(t)o(yp)q(eforms,)f(and)g(their)g(asso)q(ciated)h(minimal)13
b(costs.)29 b(A)18 b(second,)h(top-)224 1288 y(do)o(wn)13
b(pass)g(o)o(v)o(er)g(the)g(tree)h(propagates)f(a)f FK(r)n(e)n(quir)n
(e)n(d)h(typ)n(eform)j FN(attribute)d(do)o(wn)f(the)i(tree,)224
1337 y(and)g(determines)g(whic)o(h)g(pro)q(duction)g(is)g(to)g(b)q(e)g
(used.)224 1457 y FH(6.1.3)56 b(A)19 b(second)f(example)224
1534 y FN(A)d(second)h(motiv)n(ating)11 b(example)i(explores)i(ho)o(w)f
(to)h(optimally)c(compute)j(the)h(follo)o(wing)224 1584
y(expression)g(in)o(to)f(a)f(register)i(|)741 1677 y
FM(d)9 b FN(+)h(\()p FM(a)f FN(+)h FM(b)f FN(+)g FM(c)g
Ft(\002)h FN(4\))f Ft(\002)h FN(4)224 1769 y(Here,)i(all)d(v)n
(ariables)g(are)i(32-bit)e(\\long")g(in)o(tegers,)i(and)f(the)h(enco)q
(ding)f(costs)i(are)e(the)h(n)o(um-)224 1819 y(b)q(er)i(of)e(cycles)i
(to)f(p)q(erform)f(eac)o(h)h(instruction)g(in)g(the)g
FK(Intel-386)18 b FN(arc)o(hitecture.)h(T)m(able)11 b(6.5)224
1869 y(is)j(a)g(set)h(of)e(applicable)h(pro)q(ductions)g(and)g(their)h
(costs)1105 1854 y Fz(3)1124 1869 y FN(.)k(The)14 b FK(AST)20
b FN(for)13 b(the)i(expression)p 154 1929 1583 2 v 153
1975 2 46 v 348 1961 a Fv(pro)q(duction)p 752 1975 V
271 w(co)q(de)p 998 1975 V 104 w(cost)p 1124 1975 V 243
w(commen)o(t)p 1735 1975 V 154 1977 1583 2 v 153 2022
2 46 v 178 2009 a FF(Reg)k(=)g(add\(Reg,Re)o(g\))p 752
2022 V 242 w FD(addl)c(r,r,r)p 998 2022 V 122 w(2)p 1124
2022 V 79 w(add)f(t)o(w)o(o)e(registers)p 1735 2022 V
153 2068 V 178 2054 a FF(Reg)19 b(=)g(add\(Reg,de)o(re)o(f\(A)o(drs)o
(\)\))p 752 2068 V 85 w FD(addl)c(r,m,r)p 998 2068 V
105 w(6)p 1124 2068 V 79 w(add)f(memory)f(v)n(ar)g(to)g(register)p
1735 2068 V 153 2114 V 178 2100 a FF(Reg)19 b(=)g(deref\(Adrs)o(\))p
752 2114 V 262 w FD(mo)o(vl)14 b(m,r)p 998 2114 V 123
w(4)p 1124 2114 V 79 w(load)g(memory)g(v)n(ar)f(to)g(register)p
1735 2114 V 153 2159 V 178 2146 a FF(Reg)19 b(=)g(mul\(Reg,Li)o(t4)o
(\))p 752 2159 V 223 w FD(shll)c(r,2,r)p 998 2159 V 133
w(3)p 1124 2159 V 79 w(shift)f(register)g(left)f(b)o(y)g(t)o(w)o(o)p
1735 2159 V 153 2205 V 178 2191 a FF(Reg)19 b(=)g(mul\(Reg,Li)o(t4)o
(\))p 752 2205 V 223 w FD(leal)c(\(r,4\),r)p 998 2205
V 103 w(2)p 1124 2205 V 79 w(scaled)f(mo)q(de)g(can)f(m)o(ultiply)j(b)o
(y)d(four)p 1735 2205 V 153 2251 V 178 2237 a FF(Reg)19
b(=)g(add\(Reg,Re)o(g\))p 752 2251 V 242 w FD(leal)c(\(r,r\),r)p
998 2251 V 107 w(2)p 1124 2251 V 79 w(leal)f(can)g(also)g(add)f(t)o(w)o
(o)g(registers)p 1735 2251 V 153 2296 V 178 2282 a FF(Reg)19
b(=)g(add\(Reg,mu)o(l\()o(Reg)o(,Li)o(t4)o(\)\))p 752
2296 V 46 w FD(leal)c(\(r,r,4\),r)p 998 2296 V 77 w(2)p
1124 2296 V 79 w(...)h(or)d(a)g(reg)g(and)h(a)f(4)p Fw(\002)g
FD(scaled)h(reg)p 1735 2296 V 154 2298 1583 2 v 551 2372
a FN(Figure)g(6.5:)j(pro)q(ductions)e(for)e(second)i(example)224
2473 y(is)g(sho)o(wn)f(in)g(\014gure)h(6.6.)k(The)c(optimal)d(enco)q
(ding)j(of)f(this)g(expression,)h(based)h(on)e(these)224
2523 y(costs,)i(is)e(sho)o(wn)h(as)f(annotations)g(to)h(the)g(\014gure)
g(6.7.)k(Since)c(the)g(t)o(yp)q(eform)e(of)h(the)h(ro)q(ot)224
2573 y(no)q(de)g(m)o(ust)e(b)q(e)h(the)h(register)g(form)d
FK(R)n(e)n(g)t FN(,)h(the)i(minim)o(al)10 b(cost)15 b(is)e(22)h
(cycles.)p 224 2610 577 2 v 271 2636 a Fy(3)288 2648
y Fx(In)e(this)g(table)f(a)i(sp)q(ecial)e(t)o(yp)q(eform)f
Fu(Lit4)17 b Fx(has)12 b(b)q(een)g(in)o(tro)q(duced)d(to)j(denote)f(a)i
(literal)e(no)q(de)g(whic)o(h)224 2688 y(just)g(happ)q(ens)f(to)h(ha)o
(v)o(e)f(the)h(v)n(alue)f(four.)k(An)e(alternativ)o(e)c(approac)o(h)h
(is)j(explained)d(later.)p eop
%%Page: 167 173
167 172 bop 224 274 a FL(6.1.)31 b(INTR)o(ODUCTION)14
b(TO)g(THE)g(THEOR)m(Y)570 b FN(167)734 349 y
 6643957 11314462 0 0 6643957 11314462 startTexFig
 734 349
a
%%BeginDocument: bursex3.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-93.0 216.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Ellipse
n 159 59 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 179 99 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 159 139 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 199 139 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 139 179 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 179 179 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 114 219 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 144 219 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 174 219 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 204 219 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 139 99 11 11 0 360 DrawEllipse gs col-1 s gr
0.500 setlinewidth
% Polyline
n 165 69 m 176 89 l gs col-1 s gr
n 173.897 81.026 m 176.000 89.000 l 170.392 82.954 l gs 2 setlinejoin col-1 s gr
% Polyline
n 185 109 m 196 129 l gs col-1 s gr
n 193.897 121.026 m 196.000 129.000 l 190.392 122.954 l gs 2 setlinejoin col-1 s gr
% Polyline
n 174 109 m 163 128 l gs col-1 s gr
n 168.739 122.079 m 163.000 128.000 l 165.277 120.075 l gs 2 setlinejoin col-1 s gr
% Polyline
n 165 149 m 176 169 l gs col-1 s gr
n 173.897 161.026 m 176.000 169.000 l 170.392 162.954 l gs 2 setlinejoin col-1 s gr
% Polyline
n 154 149 m 143 168 l gs col-1 s gr
n 148.739 162.079 m 143.000 168.000 l 145.277 160.075 l gs 2 setlinejoin col-1 s gr
% Polyline
n 178 190 m 175 208 l gs col-1 s gr
n 178.288 200.438 m 175.000 208.000 l 174.342 199.780 l gs 2 setlinejoin col-1 s gr
% Polyline
n 186 189 m 202 209 l gs col-1 s gr
n 198.564 201.504 m 202.000 209.000 l 195.441 204.002 l gs 2 setlinejoin col-1 s gr
% Polyline
n 142 190 m 144 208 l gs col-1 s gr
n 145.104 199.828 m 144.000 208.000 l 141.129 200.270 l gs 2 setlinejoin col-1 s gr
% Polyline
n 133 189 m 120 210 l gs col-1 s gr
n 125.911 204.251 m 120.000 210.000 l 122.510 202.145 l gs 2 setlinejoin col-1 s gr
% Polyline
n 153 68 m 142 89 l gs col-1 s gr
n 147.484 82.841 m 142.000 89.000 l 143.940 80.985 l gs 2 setlinejoin col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
152 62 m 
gs 1 -1 scale (add) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
171 102 m 
gs 1 -1 scale (mul) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
152 142 m 
gs 1 -1 scale (add) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
132 183 m 
gs 1 -1 scale (add) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
171 182 m 
gs 1 -1 scale (mul) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
109 222 m 
gs 1 -1 scale (id) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
169 222 m 
gs 1 -1 scale (id) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
195 143 m 
gs 1 -1 scale (lit) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
200 223 m 
gs 1 -1 scale (lit) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
139 222 m 
gs 1 -1 scale (id) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
134 102 m 
gs 1 -1 scale (id) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
141 239 m 
gs 1 -1 scale (b) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
110 240 m 
gs 1 -1 scale (a) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
171 240 m 
gs 1 -1 scale (c) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
136 119 m 
gs 1 -1 scale (d) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
196 159 m 
gs 1 -1 scale (4) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
201 239 m 
gs 1 -1 scale (4) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 517 1157 a FN(Figure)14 b(6.6:)j(initial)12 b FK(AST)20
b FN(for)13 b(the)i(second)g(example)482 1275 y
 14603550 13090570 0 0 14603550 13090570 startTexFig
 482 1275
a
%%BeginDocument: bursex4.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-31.0 244.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Ellipse
n 159 139 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 179 179 11 11 0 360 DrawEllipse gs col-1 s gr
0.500 setlinewidth
% Ellipse
n 159 139 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 179 179 11 11 0 360 DrawEllipse gs col-1 s gr
0.000 setlinewidth
% Polyline
n 151 144 m 168 136 l  188 175 l  170 183 l  clp gs 1.00 setgray fill gr
0.500 setlinewidth
	[2.000000] 0 setdash
% Polyline
n 164 149 m 176 172 l gs 1.00 setgray fill gr
gs col-1 s gr
	[] 0 setdash
1.000 setlinewidth
% Polyline
n 169 135 m 189 175 l gs col-1 s gr
% Polyline
n 149 144 m 170 185 l gs col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
171 182 m 
gs 1 -1 scale (mul) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
152 141 m 
gs 1 -1 scale (add) col-1 show gr
% Ellipse
n 157 60 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 177 100 11 11 0 360 DrawEllipse gs col-1 s gr
0.500 setlinewidth
% Ellipse
n 157 60 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 177 100 11 11 0 360 DrawEllipse gs col-1 s gr
0.000 setlinewidth
% Polyline
n 149 65 m 166 57 l  186 96 l  168 104 l  clp gs 1.00 setgray fill gr
0.500 setlinewidth
	[2.000000] 0 setdash
% Polyline
n 162 70 m 174 93 l gs 1.00 setgray fill gr
gs col-1 s gr
	[] 0 setdash
1.000 setlinewidth
% Polyline
n 167 56 m 187 96 l gs col-1 s gr
% Polyline
n 147 65 m 168 106 l gs col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
169 103 m 
gs 1 -1 scale (mul) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
150 62 m 
gs 1 -1 scale (add) col-1 show gr
n 139.000 179.050 11.050 -174.547 -5.453 arc
gs col-1 s gr
% Ellipse
n 106 250 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 142 250 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 179 250 11 11 0 360 DrawEllipse gs col-1 s gr
0.500 setlinewidth
% Ellipse
n 139 179 11 11 0 360 DrawEllipse gs col-1 s gr
1.000 setlinewidth
% Ellipse
n 221 203 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 215 122 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 111 136 11 11 0 360 DrawEllipse gs col-1 s gr
0.500 setlinewidth
% Polyline
n 184 108 m 205 118 l gs col-1 s gr
n 198.637 112.755 m 205.000 118.000 l 196.917 116.366 l gs 2 setlinejoin col-1 s gr
% Polyline
n 172 110 m 163 128 l gs col-1 s gr
n 168.367 121.739 m 163.000 128.000 l 164.789 119.950 l gs 2 setlinejoin col-1 s gr
% Polyline
n 149 145 m 143 168 l gs col-1 s gr
n 146.955 160.764 m 143.000 168.000 l 143.084 159.754 l gs 2 setlinejoin col-1 s gr
% Polyline
n 178 190 m 179 208 l gs col-1 s gr
n 180.553 199.901 m 179.000 208.000 l 176.559 200.123 l gs 2 setlinejoin col-1 s gr
% Polyline
n 186 189 m 211 200 l gs col-1 s gr
n 204.483 194.947 m 211.000 200.000 l 202.872 198.609 l gs 2 setlinejoin col-1 s gr
% Polyline
n 148 68 m 133 89 l gs col-1 s gr
n 139.277 83.653 m 133.000 89.000 l 136.022 81.328 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
% Polyline
n 121 89 m 114 89 114 101 7 arcto 4 {pop} repeat 114 108 140 108 7 arcto 4 {pop} repeat 147 108 147 96 7 arcto 4 {pop} repeat 147 89 121 89 7 arcto 4 {pop} repeat clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 124 108 m 115 126 l gs col-1 s gr
n 120.367 119.739 m 115.000 126.000 l 116.789 117.950 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
% Polyline
n 169 209 m 162 209 162 221 7 arcto 4 {pop} repeat 162 228 188 228 7 arcto 4 {pop} repeat 195 228 195 216 7 arcto 4 {pop} repeat 195 209 169 209 7 arcto 4 {pop} repeat clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 179 228 m 179 239 l gs col-1 s gr
n 181.000 231.000 m 179.000 239.000 l 177.000 231.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 143 228 m 143 239 l gs col-1 s gr
n 145.000 231.000 m 143.000 239.000 l 141.000 231.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 106 228 m 106 240 l gs col-1 s gr
n 108.000 232.000 m 106.000 240.000 l 104.000 232.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 127 181 m 108 209 l gs col-1 s gr
n 114.147 203.503 m 108.000 209.000 l 110.837 201.257 l gs 2 setlinejoin col-1 s gr
	[2.000000] 0 setdash
% Polyline
n 142 190 m 143 209 l gs col-1 s gr
	[] 0 setdash
1.000 setlinewidth
% Polyline
n 97 209 m 90 209 90 221 7 arcto 4 {pop} repeat 90 228 116 228 7 arcto 4 {pop} repeat 123 228 123 216 7 arcto 4 {pop} repeat 123 209 97 209 7 arcto 4 {pop} repeat clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 133 209 m 126 209 126 221 7 arcto 4 {pop} repeat 126 228 152 228 7 arcto 4 {pop} repeat 159 228 159 216 7 arcto 4 {pop} repeat 159 209 133 209 7 arcto 4 {pop} repeat clp gs col-1 s gr
1.000 setlinewidth
% Open spline
n 150.000 179.000 m 154.500 195.000 l
	154.500 195.000 159.000 211.000 159.000 216.000 DrawSplineSection
	159.000 216.000 159.000 221.000 158.000 224.000 DrawSplineSection
	158.000 224.000 157.000 227.000 154.500 227.500 DrawSplineSection
	154.500 227.500 152.000 228.000 143.000 228.000 DrawSplineSection
	143.000 228.000 134.000 228.000 130.000 227.500 DrawSplineSection
	130.000 227.500 126.000 227.000 126.000 222.500 DrawSplineSection
	126.000 222.500 126.000 218.000 126.000 213.500 DrawSplineSection
	126.000 213.500 126.000 209.000 127.000 193.000 DrawSplineSection
	128.000 177.000 l gs col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
132 183 m 
gs 1 -1 scale (add) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
107 139 m 
gs 1 -1 scale (id) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
121 102 m 
gs 1 -1 scale (deref) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
174 253 m 
gs 1 -1 scale (id) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
138 254 m 
gs 1 -1 scale (id) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
102 254 m 
gs 1 -1 scale (id) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
168 222 m 
gs 1 -1 scale (deref) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
131 222 m 
gs 1 -1 scale (deref) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
95 222 m 
gs 1 -1 scale (deref) col-1 show gr
/Courier-Bold findfont 10.00 scalefont setfont
34 221 m 
gs 1 -1 scale (movl a,r1) col-1 show gr
/Courier-Bold findfont 10.00 scalefont setfont
54 180 m 
gs 1 -1 scale (addl r1,b,r2) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
216 206 m 
gs 1 -1 scale (lit) col-1 show gr
/Courier-Bold findfont 10.00 scalefont setfont
58 101 m 
gs 1 -1 scale (movl d,r5) col-1 show gr
/Courier-Bold findfont 10.00 scalefont setfont
176 62 m 
gs 1 -1 scale (leal \(r5,r4,4\),r6) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
211 125 m 
gs 1 -1 scale (lit) col-1 show gr
/Courier-Bold findfont 10.00 scalefont setfont
179 147 m 
gs 1 -1 scale (leal \(r2,r3,4\),r4) col-1 show gr
/Courier-Bold findfont 10.00 scalefont setfont
198 227 m 
gs 1 -1 scale (movl c,r3) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
104 270 m 
gs 1 -1 scale (a) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
139 271 m 
gs 1 -1 scale (b) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
108 156 m 
gs 1 -1 scale (d) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
177 271 m 
gs 1 -1 scale (c) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
234 207 m 
gs 1 -1 scale (4) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
229 126 m 
gs 1 -1 scale (4) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 358 2196 a FN(Figure)f(6.7:)j(least)d(cost)h(rewritten)g(co)q(de-tree)
h(for)d(the)i(second)g(example)287 2389 y(This)f(particular)g(example)g
(is)g(quite)h(di\016cult,)e(b)q(ecause)j(of)e(the)h(p)q(ossibilit)o(y)f
(of)g(using)224 2438 y(the)i FK(lo)n(ad)f(e\013e)n(ctive)h(addr)n(ess)g
(long)i FN(\()p FG(leal)p FN(\))c(instruction)h(in)f(uncon)o(v)o(en)o
(tional)g(w)o(a)o(ys.)19 b(This)224 2488 y(instruction)13
b(con)o(tributes)g(other)f(patterns)i(also,)d(suc)o(h)i(as)f(the)g
(addition)f(of)h(t)o(w)o(o)f(registers,)224 2538 y(with)h(or)g(without)
g(scale)h(factors,)f(and)g(an)g(imm)o(ediate)e(literal)h(op)q(erand.)18
b(Recognizing)12 b(all)224 2588 y(of)i(the)h(p)q(ossible)f(patterns)i
(due)f(to)f(this)g(instruction,)g(taking)g(in)o(to)f(accoun)o(t)i(all)e
(p)q(ossible)224 2638 y(ordering)f(of)f(op)q(erands)i(in)e(the)i(tree,)
g(adds)f(considerable)g(complexit)o(y)e(to)i(an)f(in)o(terpretiv)o(e)
224 2688 y(co)q(de)k(generator)g(of)e(the)i(kind)e(discussed)j(in)d
(the)i(previous)f(c)o(hapter.)p eop
%%Page: 168 174
168 173 bop 224 274 a FN(168)425 b FL(CHAPTER)14 b(6.)32
b(BOTTOM-UP)15 b(TREE)f(REWRITING)224 390 y FI(6.2)67
b(Lab)r(elling)24 b(and)f(reducing)224 482 y FN(The)12
b(optimal)d(rewriting)j(of)f(expression)i(trees)g(is)e(based)i(on)e(t)o
(w)o(o)g(passes)i(o)o(v)o(er)f(the)g(tree.)18 b(A)224
532 y(b)q(ottom-up)12 b(pass)i(lab)q(els)f(the)h(tree,)h(and)e(a)g
(top-do)o(wn)g(pass)h(then)g(c)o(ho)q(oses)g(the)g(rewriting)224
582 y(pro)q(ductions.)19 b(W)m(e)14 b(call)f(these)i(t)o(w)o(o)e
(passes)j FK(lab)n(el)r(ling)h FN(and)c FK(r)n(e)n(ducing)t
FN(.)224 701 y FH(6.2.1)56 b(Structure)18 b(of)g(the)h(attributes)224
779 y FN(Firstly)m(,)11 b(w)o(e)h(assume)e(that)i(there)g(is)f(some)g
(\014nite)g(set)h(of)f(pro)q(ductions,)h(whic)o(h)f(are)h(indexed)224
828 y(b)o(y)k(an)g(ordinal)f(t)o(yp)q(e)h FK(Pr)n(o)n(dIndex)p
FN(.)26 b(W)m(e)15 b(also)h(assume)f(that)h(there)i(is)e(some)f
(\014nite)h(set)h(of)224 878 y(t)o(yp)q(eforms)e FK(F)m(ormEnum)j
FN(whic)o(h)d(are)h(the)g(p)q(ossible)f(result-t)o(yp)q(eforms)g(of)f
(no)q(des.)23 b(These)224 928 y(will)12 b(usually)h(include)g(t)o(yp)q
(eforms)g(suc)o(h)h(as)g FK(R)n(e)n(gister,)f(Imme)n(diate)k
FN(and)c(v)n(arious)g(kinds)g(of)224 978 y(sym)o(b)q(olic)f(addresses.)
287 1028 y(Pro)q(ductions)j(are)f(sp)q(eci\014ed)i(b)o(y)e(the)g
(pattern)h(whic)o(h)f(they)h(matc)o(h,)d(the)j(result)g(t)o(yp)q(e-)224
1078 y(form)c(whic)o(h)i(they)g(pro)q(duce,)g(and)g(a)f(strictly)h
(non-negativ)o(e)f(cost)i(function.)j(Usually)12 b(the)224
1128 y(cost)i(function)e(will)f(b)q(e)i(constan)o(t,)g(but)g(allo)o
(wing)d(more)h(general)i(functions)g(is)f(sometimes)224
1178 y(useful.)35 b(The)20 b(patterns)h(are)e(sp)q(eci\014ed)i(b)o(y)f
(a)f(paren)o(thesized)i(pre\014x)f(notation.)34 b(Th)o(us)224
1227 y(\\)p FG(op)p FN(\()p FK(lF)m(rm,rF)m(rm)s FN(\)")14
b(sp)q(eci\014es)k(a)e(pattern)h(matc)o(hed)f(b)o(y)g(a)g(no)q(de)h(\\)
p FG(op)p FN(")e(with)h(c)o(hildren)h(of)224 1277 y(t)o(yp)q(eforms)d
FK(lF)m(rm)j FN(and)e FK(rF)m(rm)i FN(resp)q(ectiv)o(ely)m(.)22
b(Using)15 b(the)g(paren)o(thesized)i(pre\014x)f(form,)d(it)224
1327 y(is)k(p)q(ossible)f(to)g(de\014ne)h(patterns)h(in)e(whic)o(h)g
(the)h(t)o(yp)q(eforms)e(of)h(more)f(distan)o(t)h(o\013spring)224
1377 y(are)f(sp)q(eci\014ed.)k(The)c(examples)e(in)g(\014gure)h(6.2)f
(illustrate)h(the)g(p)q(ossibilities.)287 1427 y(In)g(terms)g(of)f(the)
i(usual)f(attribute)g(grammar)d(notation,)i(eac)o(h)i(pro)q(duction)f
(is)g(a)g(rule)224 1477 y(for)i(computing)f(a)g(single)h(elemen)o(t)g
(of)f(a)h(set-v)n(alued)g(syn)o(thesized)i(attribute.)25
b(P)o(atterns)224 1527 y(whic)o(h)15 b(do)g(not)f(matc)o(h)g(the)h(t)o
(yp)q(eforms)f(of)h(the)g(pattern-leaf)g(no)q(des)h(are)f(con)o(v)o(en)
o(tionally)224 1577 y(treated)h(as)d(though)h(they)h(returned)g(an)f
(un)o(b)q(ounded,)g(distinguished)g(cost)g(v)n(alue)f
FK(maxC)p FN(.)287 1627 y(It)h(is)f(usual)h(to)f(also)h(ha)o(v)o(e)f
(pro)q(ductions)i(whic)o(h)e(consist)i(of)e(a)g(single)h(t)o(yp)q
(eform)e(name)224 1677 y(on)i(eac)o(h)g(side)g(of)f(the)i(pro)q
(duction)f(sym)o(b)q(ol.)i(Suc)o(h)e(rules)g(are)g(called)g
FK(chain)h(pr)n(o)n(ductions)s FN(,)224 1727 y(and)f(corresp)q(ond)i
(to)d(op)q(erations)h(whic)o(h)g(are)h(able)e(to)h(co)q(erce)i(the)e(t)
o(yp)q(eform)f(of)g(no)q(des.)287 1777 y(W)m(e)g(shall)f(assume)h(that)
g(ev)o(ery)h(no)q(de)g(of)f(the)h(tree)g(is)g(annotated)f(with)g(a)g
FK(state)j FN(struc-)224 1827 y(ture,)f(whic)o(h)f(holds)g(an)g(arra)o
(y)g(of)g(pairs,)g(indexed)g(on)g(the)h(ordinal)e(t)o(yp)q(eform)g(t)o
(yp)q(e.)20 b(The)224 1877 y(abstract)15 b(syn)o(tax)f(is)g(as)g(follo)
o(ws.)295 1965 y FF(FormAnnota)o(tio)o(n)i(==>)j(costArray)36
b(:)19 b(ARRAY)f(TypeForm)e(OF)j(FormInfo;)295 2011 y(FormInfo)134
b(==>)19 b(ruleIndex)36 b(:)19 b(ProdIndex)o(,)668 2056
y(costValue)36 b(:)19 b(CARDINAL;)224 2192 y FN(During)14
b(the)h(b)q(ottom-up)d(lab)q(elling)h(tra)o(v)o(ersal,)g(the)i(arra)o
(ys)f(will)f(b)q(e)i(ev)n(aluated,)e(with)h(in-)224 2242
y(formation)h(corresp)q(onding)k(to)e(all)g(p)q(ossible)h(result)g(t)o
(yp)q(eforms,)f(and)h(their)g(asso)q(ciated)224 2292
y(minima)o(l)12 b(costs.)23 b(During)14 b(the)i(top-do)o(wn)e
(reduction)i(tra)o(v)o(ersal,)f(the)h(inherited)f FK(r)n(e)n(quir)n(e)n
(d)224 2342 y(typ)n(eform)j FN(attribute)e(will)d(select)k(just)e(one)g
(of)f(the)i(arra)o(y)f(elemen)o(ts)g(as)g(the)g(c)o(hosen)h(pro-)224
2391 y(duction)e(index)g(of)f(that)h(particular)g(visit.)224
2510 y FH(6.2.2)56 b(The)18 b(lab)r(elling)f(pass)224
2588 y FN(No)q(des)d(of)e(the)i(tree)g(are)f(lab)q(elled)f(in)h(b)q
(ottom-up)e(order,)i(during)g(a)g(depth-\014rst)h(recursiv)o(e)224
2638 y(tra)o(v)o(ersal.)23 b(Eac)o(h)15 b(no)q(de)h(is)f(visited)h
(exactly)f(once.)23 b(Th)o(us)16 b(when)g(eac)o(h)f(no)q(de)h(is)f(lab)
q(elled,)224 2688 y(an)o(y)f(descendan)o(t)h(no)q(des)g(will)d(ha)o(v)o
(e)i(already)g(b)q(een)h(lab)q(elled.)p eop
%%Page: 169 175
169 174 bop 224 274 a FL(6.2.)31 b(LABELLING)14 b(AND)g(REDUCING)684
b FN(169)287 390 y(W)m(e)19 b(shall)f(assume)h(that)g(the)h(arra)o(y's)
f(elemen)o(ts)g(are)h(initialized)e(with)g(the)i(empt)o(y)224
440 y(pro)q(duction,)d(and)e(the)i(maxim)n(um)11 b(p)q(ossible)17
b(cost.)24 b(A)o(t)16 b(eac)o(h)h(no)q(de)f(the)g(follo)o(wing)e(com-)
224 490 y(putation)g(is)g(p)q(erformed)f(|)295 574 y
FF(FOR)f FE(every)g(matching)g(p)n(attern)i FF(DO)335
620 y FE(c)n(ompute)d(the)i(p)n(attern)f(c)n(ost)g(C)5
b FF(;)335 665 y(IF)12 b FE(C)i(is)f(less)f(than)h(curr)n(ent)f(c)n
(ost)g(for)i(that)e(form)k FF(THEN)374 711 y FE(r)n(eplac)n(e)c(curr)n
(ent)g(element)g(with)h(new)h(\(index,c)n(os)o(t\))d(p)n(air)335
757 y FF(END;)295 802 y(END;)295 848 y FE(c)n(ompute)h(chain-closu)o(r)
n(e)f(of)i(r)n(esult)f(typ)n(eform)h(set)i FF(;)224 980
y FN(The)c(pattern)h(cost)f(is)f(found)g(b)o(y)g(summing)d(the)k(minim)
o(um)6 b(costs)11 b(of)f(the)h(result)g(t)o(yp)q(eforms)224
1030 y(whic)o(h)h(are)g(matc)o(hed)e(in)h(the)h(pattern)h(leaf)e(no)q
(des,)h(and)f(adding)g(the)h(cost)g(of)f(the)h(matc)o(hed)224
1080 y(pro)q(duction.)18 b(With)10 b(this)h(particular)f(algorithm,)f
(if)h(sev)o(eral)h(patterns)h(result)f(in)g(the)g(same)224
1130 y(cost,)j(the)h(\014rst)g(minim)o(al)o(-cost)d(pro)q(duction)i
(encoun)o(tered)i(will)c(b)q(e)j(stored.)287 1180 y(W)m(e)g(m)o(ust)g
(also)g(tak)o(e)h(in)o(to)g(accoun)o(t)g(the)h(p)q(ossibilit)o(y)d(of)i
(c)o(hain)f(rules)i(b)q(eing)f(applied)224 1229 y(to)c(the)h(result)g
(t)o(yp)q(eforms)e(of)g(matc)o(hing)g(patterns.)18 b(In)12
b(fact,)g(w)o(e)g(m)o(ust)f(tak)o(e)i(in)o(to)e(accoun)o(t)224
1279 y(all)k(t)o(yp)q(eforms)g(whic)o(h)g(are)h(reac)o(hable)h(b)o(y)e
(means)g(of)g(all)f(p)q(ossible)i(sequences)i(of)d(one)h(or)224
1329 y(more)f(c)o(hain)h(rules.)24 b(W)m(e)16 b(call)f(the)h(set)h(of)e
(t)o(yp)q(eforms)g(whic)o(h)h(can)g(b)q(e)g(reac)o(hed)h(b)o(y)f(c)o
(hain)224 1379 y(rules)i(the)h FK(chain-closur)n(e)h
FN(of)d(the)h(result)g(t)o(yp)q(eform)e(set.)30 b(The)18
b(\014nal)f(no)q(de)h(lab)q(elling)d(is)224 1429 y(computed)f(as)g
(follo)o(ws)e(|)295 1513 y FF(\(*)g FE(c)n(ompute)g(the)h(Chain-Closur)
n(e)g FF(*\))295 1558 y(FOR)f FE(every)g(form)i(R)g(in)f(r)n(esult)f
(set)k FF(DO)335 1604 y(FOR)11 b FE(every)i(T)h(in)f(chain-clos)o(ur)n
(e)e(of)i(R)h FF(DO)374 1650 y FE(c)n(ompute)e(the)g(c)n(ost)h(of)g(pr)
n(o)n(ducing)e(T)5 b FF(;)374 1695 y(IF)12 b FE(C)i(is)f(less)g(than)f
(curr)n(ent)g(c)n(ost)h(for)g(that)f(form)k FF(THEN)413
1741 y FE(r)n(eplac)n(e)c(curr)n(ent)g(element)g(with)i(new)f
(\(index,c)n(ost)o(\))e(p)n(air)374 1787 y FF(END;)335
1832 y(END;)295 1878 y(END;)287 2010 y FN(Let)h(us)f(revisit)h(the)g
(second)h(example)d(from)g(section)i(6.1.3.)j(W)m(e)c(m)o(ust)g(no)o(w)
g(b)q(e)h(a)f(little)224 2060 y(more)k(formal)f(ab)q(out)i(the)g(p)q
(ossible)g(result)h(t)o(yp)q(eforms)e(of)h(no)q(des,)h(taking)e(in)o
(to)g(accoun)o(t)224 2110 y(all)j(the)h(p)q(ossible)g(t)o(yp)q(eforms)e
(of)h(sym)o(b)q(olic)f(addresses.)34 b(In)19 b(particular,)g(w)o(e)g
(allo)o(w)e(the)224 2160 y(load-e\013ectiv)o(e-address)h(instruction)e
(to)f(load)g(an)o(y)h(general)g(address)h(expression)g(in)o(to)e(a)224
2209 y(register.)j(W)m(e)9 b(also)g(allo)o(w)e(for)i(the)h(folding)e
(of)h(literal)f(comp)q(onen)o(ts)h(of)g(address)i(expressions)224
2259 y(at)20 b(compile)f(time.)35 b(Figure)20 b(6.8)f(has)h(the)h
(detailed)f(pro)q(ductions)h(and)e(costs)j(for)d(this)224
2309 y(example.)e(The)c(scaled-register)h(form)c FK(SR)n(e)n(g)17
b FN(is)12 b(the)i(pro)q(duct)f(of)f(a)g(register)i(and)e(a)g(literal)
224 2359 y(v)n(alue,)k(pro)o(vided)f(that)h(the)h(literal)e(has)h(one)g
(of)f(the)i(allo)o(w)o(ed)d(v)n(alues,)i(2)f(or)h(4.)24
b(W)m(e)15 b(ma)o(y)224 2409 y(think)h(of)f(these)j(no)q(de)e(t)o(yp)q
(eforms)f(as)h(arising)f(from)f(the)j(use)f(of)g(pro)q(duction)g(13)f
(with)h(a)224 2458 y(\(conditional\))d(cost)i(expression)g(|)584
2548 y Ft(z)f FN(=)g FO(if)f FK(lit-val)d Ft(2)h(f)p
FN(2)p FM(;)c FN(4)p Ft(g)j FO(then)j FN(0)g FO(else)g
FK(maxC)224 2638 y FN(Sev)o(eral)j(of)e(the)i(pro)q(ductions)g(simply)d
(accum)o(ulate)i(parts)g(of)g(sym)o(b)q(olic)e(addresses,)k(and)224
2688 y(hence)f(cause)f(no)e(instruction)i(to)e(b)q(e)i(emitted,)d(and)i
(ha)o(v)o(e)g(zero)h(cost.)p eop
%%Page: 170 176
170 175 bop 224 274 a FN(170)425 b FL(CHAPTER)14 b(6.)32
b(BOTTOM-UP)15 b(TREE)f(REWRITING)p 449 351 993 2 v 448
396 2 46 v 536 396 V 711 383 a Fv(pro)q(duction)p 1096
396 V 238 w(co)q(de)p 1314 396 V 90 w(cost)p 1440 396
V 449 398 993 2 v 448 444 2 46 v 493 430 a FD(1)p 536
444 V 50 w FF(Reg)k(=)h(add\(Reg,Re)o(g\))p 1096 444
V 203 w FD(addl)c(r,r,r)p 1314 444 V 95 w(2)p 1440 444
V 448 489 V 493 476 a(2)p 536 489 V 50 w FF(Reg)j(=)h(add\(Reg,de)o
(ref)o(\(Ad)o(rs)o(\)\))p 1096 489 V 46 w FD(addl)c(r,m,r)p
1314 489 V 78 w(6)p 1440 489 V 448 535 V 493 521 a(3)p
536 535 V 50 w FF(Reg)j(=)h(deref\(Adrs)o(\))p 1096 535
V 223 w FD(mo)o(vl)14 b(m,r)p 1314 535 V 96 w(2)p 1440
535 V 448 581 V 493 567 a(4)p 536 581 V 50 w FF(Reg)k(=)h(Adrs)p
1096 581 V 362 w FD(lea)14 b(m,r)p 1314 581 V 130 w(2)p
1440 581 V 448 626 V 493 613 a(5)p 536 626 V 50 w FF(Adrs)k(=)h(Imm)p
1096 626 V 1314 626 V 610 w FD(0)p 1440 626 V 448 672
V 493 658 a(6)p 536 672 V 50 w FF(Adrs)f(=)h(Reg)p 1096
672 V 1314 672 V 610 w FD(0)p 1440 672 V 448 718 V 493
704 a(7)p 536 718 V 50 w FF(Adrs)f(=)h(SReg)p 1096 718
V 1314 718 V 590 w FD(0)p 1440 718 V 448 763 V 493 750
a(8)p 536 763 V 50 w FF(Adrs)f(=)h(add\(Reg,R)o(eg\))p
1096 763 V 1314 763 V 431 w FD(0)p 1440 763 V 448 809
V 493 795 a(9)p 536 809 V 50 w FF(Adrs)f(=)h(add\(Reg,S)o(Reg)o(\))p
1096 809 V 1314 809 V 412 w FD(0)p 1440 809 V 448 855
V 473 841 a(10)p 536 855 V 51 w FF(Adrs)f(=)h(add\(Adrs,)o(Imm)o(\))p
1096 855 V 1314 855 V 412 w FD(0)p 1440 855 V 448 900
V 473 887 a(11)p 536 900 V 51 w FF(Imm)f(=)h(literal)p
1096 900 V 1314 900 V 550 w FD(0)p 1440 900 V 448 946
V 473 932 a(12)p 536 946 V 51 w FF(Imm)f(=)h(ident)p
1096 946 V 1314 946 V 590 w FD(0)p 1440 946 V 448 992
V 473 978 a(13)p 536 992 V 51 w FF(SReg)f(=)h(mul\(Reg,l)o(ite)o(ral)o
(\))p 1096 992 V 1314 992 V 354 w Fw(z)p 1440 992 V 449
993 993 2 v 473 1068 a FN(Figure)14 b(6.8:)j(detailed)c(pro)q(ductions)
i(for)e(second)i(example)287 1207 y(Figure)e(6.9)f(has)h(the)g(co)q
(de-tree)i(for)d(the)i FK(AST)k FN(in)13 b(\014gure)g(6.6.)k(Eac)o(h)c
(no)q(de)g(is)g(lab)q(elled)224 1257 y(with)g(its)g(no)q(de)g(n)o(um)o
(b)q(er)f(at)h(the)h(upp)q(er)g(left.)j(Starting)c(at)g(no)q(de)g(8,)f
(the)i(lo)o(w)o(est)f FG(add)f FN(no)q(de)224 1307 y(in)j(the)g
(\014gure,)g(w)o(e)g(note)h(that)e(eac)o(h)i(of)e(the)h(subtrees)i(ma)o
(y)c(b)q(e)j(placed)f(in)f(the)h FK(R)n(e)n(g)k FN(form)224
1357 y(for)14 b(a)f(cost)h(of)f(4,)g(using)h(pro)q(duction)f(3.)18
b(No)q(de)c(8)g(ma)o(y)d(tak)o(e)j(the)g(register)h(form)d(at)h(a)h
(cost)224 1407 y(of)g(10,)f(using)g(pro)q(duction)h(2.)k(In)c(fact,)f
(there)j(are)e(other)g(c)o(hoices)h(with)f(the)g(same)f(cost.)472
1472 y
 14932459 13616824 0 0 14932459 13616824 startTexFig
 472 1472 a
%%BeginDocument: bursvar5.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-16.0 243.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Ellipse
n 111 136 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 106 250 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 142 250 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 179 250 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 221 203 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 215 122 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 159 139 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 179 99 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 179 179 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 139 179 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 159 59 11 11 0 360 DrawEllipse gs col-1 s gr
0.500 setlinewidth
% Polyline
n 185 109 m 205 118 l gs col-1 s gr
n 198.525 112.893 m 205.000 118.000 l 196.884 116.541 l gs 2 setlinejoin col-1 s gr
% Polyline
n 174 109 m 163 128 l gs col-1 s gr
n 168.739 122.079 m 163.000 128.000 l 165.277 120.075 l gs 2 setlinejoin col-1 s gr
% Polyline
n 153 149 m 143 168 l gs col-1 s gr
n 148.496 161.852 m 143.000 168.000 l 144.956 159.989 l gs 2 setlinejoin col-1 s gr
% Polyline
n 178 190 m 179 208 l gs col-1 s gr
n 180.553 199.901 m 179.000 208.000 l 176.559 200.123 l gs 2 setlinejoin col-1 s gr
% Polyline
n 186 189 m 211 200 l gs col-1 s gr
n 204.483 194.947 m 211.000 200.000 l 202.872 198.609 l gs 2 setlinejoin col-1 s gr
% Polyline
n 151 67 m 133 89 l gs col-1 s gr
n 139.614 84.075 m 133.000 89.000 l 136.518 81.542 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
% Polyline
n 121 89 m 114 89 114 101 7 arcto 4 {pop} repeat 114 108 140 108 7 arcto 4 {pop} repeat 147 108 147 96 7 arcto 4 {pop} repeat 147 89 121 89 7 arcto 4 {pop} repeat clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 124 108 m 115 126 l gs col-1 s gr
n 120.367 119.739 m 115.000 126.000 l 116.789 117.950 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
% Polyline
n 169 209 m 162 209 162 221 7 arcto 4 {pop} repeat 162 228 188 228 7 arcto 4 {pop} repeat 195 228 195 216 7 arcto 4 {pop} repeat 195 209 169 209 7 arcto 4 {pop} repeat clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 179 228 m 179 239 l gs col-1 s gr
n 181.000 231.000 m 179.000 239.000 l 177.000 231.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 143 228 m 143 239 l gs col-1 s gr
n 145.000 231.000 m 143.000 239.000 l 141.000 231.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 106 228 m 106 240 l gs col-1 s gr
n 108.000 232.000 m 106.000 240.000 l 104.000 232.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 131 187 m 108 209 l gs col-1 s gr
n 115.164 204.916 m 108.000 209.000 l 112.399 202.025 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
% Polyline
n 97 209 m 90 209 90 221 7 arcto 4 {pop} repeat 90 228 116 228 7 arcto 4 {pop} repeat 123 228 123 216 7 arcto 4 {pop} repeat 123 209 97 209 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 133 209 m 126 209 126 221 7 arcto 4 {pop} repeat 126 228 152 228 7 arcto 4 {pop} repeat 159 228 159 216 7 arcto 4 {pop} repeat 159 209 133 209 7 arcto 4 {pop} repeat clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 166 69 m 175 89 l gs col-1 s gr
n 173.541 80.884 m 175.000 89.000 l 169.893 82.525 l gs 2 setlinejoin col-1 s gr
% Polyline
n 165 149 m 175 169 l gs col-1 s gr
n 173.211 160.950 m 175.000 169.000 l 169.633 162.739 l gs 2 setlinejoin col-1 s gr
% Polyline
n 140 191 m 143 209 l gs col-1 s gr
n 143.658 200.780 m 143.000 209.000 l 139.712 201.438 l gs 2 setlinejoin col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
152 62 m 
gs 1 -1 scale (add) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
171 102 m 
gs 1 -1 scale (mul) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
152 142 m 
gs 1 -1 scale (add) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
171 182 m 
gs 1 -1 scale (mul) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
107 139 m 
gs 1 -1 scale (id) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
109 156 m 
gs 1 -1 scale (d) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
121 102 m 
gs 1 -1 scale (deref) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
176 270 m 
gs 1 -1 scale (c) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
174 253 m 
gs 1 -1 scale (id) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
140 270 m 
gs 1 -1 scale (b) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
138 254 m 
gs 1 -1 scale (id) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
102 254 m 
gs 1 -1 scale (id) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
103 269 m 
gs 1 -1 scale (a) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
168 222 m 
gs 1 -1 scale (deref) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
131 222 m 
gs 1 -1 scale (deref) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
95 222 m 
gs 1 -1 scale (deref) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
216 206 m 
gs 1 -1 scale (lit) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
211 125 m 
gs 1 -1 scale (lit) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
132 183 m 
gs 1 -1 scale (add) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
93 242 m 
gs 1 -1 scale (1) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
129 242 m 
gs 1 -1 scale (2) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
166 242 m 
gs 1 -1 scale (3) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
89 209 m 
gs 1 -1 scale (4) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
126 209 m 
gs 1 -1 scale (5) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
160 209 m 
gs 1 -1 scale (6) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
209 194 m 
gs 1 -1 scale (7) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
126 169 m 
gs 1 -1 scale (8) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
166 170 m 
gs 1 -1 scale (9) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
144 129 m 
gs 1 -1 scale (11) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
91 129 m 
gs 1 -1 scale (10) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
200 112 m 
gs 1 -1 scale (12) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
107 90 m 
gs 1 -1 scale (13) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
161 91 m 
gs 1 -1 scale (14) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
141 51 m 
gs 1 -1 scale (15) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
217 223 m 
gs 1 -1 scale (4) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
19 221 m 
gs 1 -1 scale (Reg=deref\(Adrs\):4) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
17 182 m 
gs 1 -1 scale (Reg=add\(Reg,deref\(Adrs\)\):10) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
235 206 m 
gs 1 -1 scale (Imm=lit:0) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
173 141 m 
gs 1 -1 scale (Adrs=add\(Reg,SReg\):14) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
173 149 m 
gs 1 -1 scale (Reg=Adrs:16) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
198 133 m 
gs 1 -1 scale (4) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
229 125 m 
gs 1 -1 scale (Imm=lit:0) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
43 101 m 
gs 1 -1 scale (Reg=deref\(Adrs\):4) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
173 54 m 
gs 1 -1 scale (Adrs=add\(Reg,SReg\):20) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
173 63 m 
gs 1 -1 scale (Reg=Adrs:22) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
193 176 m 
gs 1 -1 scale (Adrs=SReg:4) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
193 167 m 
gs 1 -1 scale (SReg=mul\(Reg,lit\):4) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
193 185 m 
gs 1 -1 scale (Reg=Adrs:6) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
193 103 m 
gs 1 -1 scale (Reg=Adrs:18) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
194 85 m 
gs 1 -1 scale (SReg=mul\(Reg,lit\):16) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
193 94 m 
gs 1 -1 scale (Adrs=SReg:16) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
56 253 m 
gs 1 -1 scale (Adrs=id:0) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
61 139 m 
gs 1 -1 scale (Adrs=id:0) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
192 253 m 
gs 1 -1 scale (Adrs=id:0) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 233 2426 a FN(Figure)h(6.9:)j FK(AST)j FN(for)13 b(the)i(second)g
(example,)d(lab)q(elled)h(with)h(\(pro)q(duction:cost\))g(pairs)287
2538 y(No)q(de)i(6)f(ma)o(y)f(tak)o(e)h(the)i(register)f(form)e(at)i(a)
f(cost)h(of)f(4,)h(and)f(the)h(literal)f(at)h(no)q(de)g(7)224
2588 y(is)c(4.)17 b(Hence)d(at)e(no)q(de)g(9)g(pro)q(duction)g(13)g
(matc)o(hes,)g(pro)q(ducing)g(the)g FK(SR)n(e)n(g)17
b FN(form)10 b(at)i(a)g(cost)224 2638 y(of)h(4.)18 b(W)m(e)12
b(ma)o(y)g(successiv)o(ely)j(apply)d(the)i(c)o(hain)f(rules)h(7)f(and)g
(4,)f(to)i(pro)q(duce)g(a)f FK(R)n(e)n(g)k FN(form)224
2688 y(at)d(no)q(de)g(9)g(at)g(a)f(cost)i(of)e(6.)p eop
%%Page: 171 177
171 176 bop 224 274 a FL(6.2.)31 b(LABELLING)14 b(AND)g(REDUCING)684
b FN(171)287 390 y(A)o(t)13 b(no)q(de)h(11)e(w)o(e)i(ma)o(y)d(add)i
(the)h(t)o(w)o(o)e FK(R)n(e)n(g)17 b FN(forms)12 b(at)h(no)q(des)h(8)f
(and)g(9,)f(for)h(a)g(total)g(cost)224 440 y(of)f(18)f(\(10)h(plus)f(6)
h(plus)g(t)o(w)o(o)f(for)h(the)h(pro)q(duction\),)f(but)g(w)o(e)g(ma)o
(y)e(matc)o(h)h(pro)q(duction)h(9)f(to)224 490 y(pro)q(duce)k(an)d
FK(A)n(drs)k FN(form)11 b(for)i(a)f(cost)i(of)e(14,)g(and)h(then)g(use)
h(the)g(c)o(hain)e(rule)h(pro)q(duction)h(4)224 540 y(to)g(obtain)f(a)h
FK(R)n(e)n(g)k FN(form)12 b(at)h(a)h(cost)h(of)e(just)h(16.)287
593 y(Con)o(tin)o(uing)e(similarly)m(,)e(w)o(e)k(\014nally)f(arriv)o(e)
h(at)f(the)i(lab)q(elling)d(sho)o(wn)i(in)f(\014gure)i(6.9.)224
728 y FH(6.2.3)56 b(The)18 b(reduction)g(pass)224 812
y FN(The)g(reduction)f(pass)h(o)o(v)o(er)f(the)g(lab)q(elled)g(tree)h
(is)f(also)f(a)h(recursiv)o(e)h(tra)o(v)o(ersal.)27 b(In)17
b(this)224 862 y(case,)e(the)f(recursion)g(carries)h(with)e(it)g(the)i
FK(r)n(e)n(quir)n(e)n(d)e(typ)n(eform)j FN(for)e(eac)o(h)g(visited)f
(no)q(de)h(as)224 911 y(an)g(inherited)g(attribute.)19
b(The)14 b(o)o(v)o(erall)f(strategy)i(is)e(as)h(follo)o(ws)f(|)295
1015 y FF(PROCEDURE)j(VisitNode\(t)o(hi)o(s)h(:)i(NodeDesc;)d(form)i(:)
h(FormEnum\);)335 1061 y(VAR)f(cFrm)g(:)h(FormEnum;)413
1106 y(pIdx)f(:)h(ProdIndex;)295 1152 y(BEGIN)335 1198
y FE(sele)n(ct)11 b(arr)n(ay)i(element)f(indexe)n(d)g(by)j
FF(form;)335 1243 y(pIdx)j(:=)g FE(pr)n(o)n(dIndex)11
b(of)j(matching)d(element;)335 1289 y FF(FOR)g FE(e)n(ach)h(p)n
(attern-le)n(af-n)o(o)n(de)e(in)j(pr)n(o)n(duction)g
FF(pIdx)18 b(DO)374 1335 y(cFrm)g(:=)h FE(p)n(attern-le)n(af)o(-fo)o
(rm)12 b(in)h(sele)n(cte)n(d)e(pr)n(o)n(duction)s FF(;)374
1380 y(VisitNode)o(\()p FE(p)m(atte)o(rn-l)o(e)n(af-)o(no)m(de)p
FF(,)o(cFr)o(m\))o(;)335 1426 y(END;)335 1472 y FE(do)h(semantic)g
(action)g(for)h(pr)n(o)n(duction)g FF(pIdx;)295 1517
y(END)19 b(VisitNode)o(;)236 1665 y FN(It)12 b(should)g(b)q(e)g(noted)g
(that)g(the)h(recursion)g(in)e(this)h(tra)o(v)o(ersal)g(is)f(not)h
FK(structur)n(al)g(r)n(e)n(cursion)224 1715 y FN(con)o(trolled)e(b)o(y)
g(the)g(structure)j(of)c(the)i(tree,)g(but)f(is)g(rather)h(a)f
FK(semantic)h(r)n(e)n(cursion)i FN(whic)o(h)c(is)224
1765 y(con)o(trolled)k(b)o(y)g(the)g(visit)f(order)i(demanded)e(in)h
(the)g(pro)q(duction.)18 b(In)13 b(particular,)f(a)h(c)o(hain)224
1815 y(pro)q(duction)h(will)d(cause)k(the)e(same)g(no)q(de)g(to)g(b)q
(e)h(revisited,)f(while)g(other)h(recursions)g(ma)o(y)224
1865 y(ev)o(en)h(skip)f(directly)g(to)g(distan)o(t)f(decendan)o(ts.)287
1918 y(Consider)e(emission)e(of)h(co)q(de)h(for)f(the)h(expression)h
FM(a)d Ft(\000)h FN(\()p FM(b)f Ft(\002)g FM(c)p FN(\))i(where)h
FM(a;)7 b(b;)g(c)i FN(are)i(\015oat-)224 1968 y(ing)j(p)q(oin)o(t)g
(double)h(v)n(ariables,)e(and)h(where,)i(as)e(usual,)g(w)o(e)h(assume)f
(that)g(the)i(three)f(v)n(ari-)224 2018 y(ables)g(are)g(in)g(memory)m
(.)i(The)f(applicable)d(pro)q(ductions)j(are)f(sho)o(wn)g(in)f
(\014gure)h(6.10,)e(and)p 376 2084 1139 2 v 375 2130
2 46 v 444 2130 V 717 2116 a Fv(pro)q(duction)p 1200
2130 V 320 w(co)q(de)p 1387 2130 V 75 w(cost)p 1513 2130
V 376 2132 1139 2 v 375 2177 2 46 v 401 2164 a FD(1)p
444 2177 V 50 w FF(Treg)18 b(=)h(dToT\(deref)o(D\()o(Adr)o(s\))o(\))p
1200 2177 V 263 w(fld)f(m)p 1387 2177 V 108 w FD(25)p
1513 2177 V 375 2223 V 401 2209 a(2)p 444 2223 V 50 w
FF(Treg)g(=)h(subT\(Treg,)o(Tr)o(eg\))p 1200 2223 V 321
w(fsub)p 1387 2223 V 126 w FD(26)p 1513 2223 V 375 2269
V 401 2255 a(3)p 444 2269 V 50 w FF(Treg)f(=)h(subT\(Treg,)o(dT)o(oT\()
o(de)o(ref)o(D\()o(Adr)o(s\)\))o(\))p 1200 2269 V 47
w(fsub)f(m)p 1387 2269 V 88 w FD(28)p 1513 2269 V 375
2314 V 401 2301 a(4)p 444 2314 V 50 w FF(Treg)g(=)h(subT\(dToT\()o(de)o
(ref)o(D\()o(Adr)o(s\))o(\),T)o(reg)o(\))p 1200 2314
V 47 w(fsubr)e(m)p 1387 2314 V 69 w FD(28)p 1513 2314
V 375 2360 V 401 2346 a(5)p 444 2360 V 50 w FF(Treg)h(=)h(mulT\(Treg,)o
(Tr)o(eg\))p 1200 2360 V 321 w(fmul)p 1387 2360 V 126
w FD(29)p 1513 2360 V 375 2406 V 401 2392 a(6)p 444 2406
V 50 w FF(Treg)f(=)h(mulT\(Treg,)o(dT)o(oT\()o(de)o(ref)o(D\()o(Adr)o
(s\)\))o(\))p 1200 2406 V 47 w(fmul)f(m)p 1387 2406 V
88 w FD(32)p 1513 2406 V 375 2451 V 401 2438 a(7)p 444
2451 V 50 w FF(Treg)g(=)h(mulT\(dToT\()o(de)o(ref)o(D\()o(Adr)o(s\))o
(\),T)o(reg)o(\))p 1200 2451 V 47 w(fmul)f(m)p 1387 2451
V 88 w FD(32)p 1513 2451 V 376 2453 1139 2 v 477 2527
a FN(Figure)c(6.10:)j(detailed)d(pro)q(ductions)g(for)g(third)g
(example)224 2634 y(the)h(lab)q(elled)e FK(AST)20 b FN(is)13
b(sho)o(wn)h(in)g(\014gure)g(6.11.)287 2688 y(W)m(e)f(exp)q(ect)j(to)d
(pro)q(duce)i(the)g(follo)o(wing)c FK(V)l(AL)j FN(co)q(de)g(from)e(the)
j(tra)o(v)o(ersal)f(|)p eop
%%Page: 172 178
172 177 bop 224 274 a FN(172)425 b FL(CHAPTER)14 b(6.)32
b(BOTTOM-UP)15 b(TREE)f(REWRITING)301 349 y
 20326563 10196172 0 0 20326563 10196172 startTexFig
 301 349 a
%%BeginDocument: bursex6.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-7.0 200.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Ellipse
n 162 202 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 213 202 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 113 168 11 11 0 360 DrawEllipse gs col-1 s gr
0.500 setlinewidth
% Polyline
n 154 68 m 136 89 l gs col-1 s gr
n 142.725 84.228 m 136.000 89.000 l 139.688 81.624 l gs 2 setlinejoin col-1 s gr
% Polyline
n 132 107 m 115 125 l gs col-1 s gr
n 121.947 120.557 m 115.000 125.000 l 119.039 117.811 l gs 2 setlinejoin col-1 s gr
% Polyline
n 166 68 m 184 89 l gs col-1 s gr
n 180.312 81.624 m 184.000 89.000 l 177.275 84.228 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
% Polyline
n 150 49 m 143 49 143 61 7 arcto 4 {pop} repeat 143 68 169 68 7 arcto 4 {pop} repeat 176 68 176 56 7 arcto 4 {pop} repeat 176 49 150 49 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 176 89 m 169 89 169 101 7 arcto 4 {pop} repeat 169 108 195 108 7 arcto 4 {pop} repeat 202 108 202 96 7 arcto 4 {pop} repeat 202 89 176 89 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 124 89 m 117 89 117 101 7 arcto 4 {pop} repeat 117 108 143 108 7 arcto 4 {pop} repeat 150 108 150 96 7 arcto 4 {pop} repeat 150 89 124 89 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 153 125 m 146 125 146 137 7 arcto 4 {pop} repeat 146 144 172 144 7 arcto 4 {pop} repeat 179 144 179 132 7 arcto 4 {pop} repeat 179 125 153 125 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 201 125 m 194 125 194 137 7 arcto 4 {pop} repeat 194 144 220 144 7 arcto 4 {pop} repeat 227 144 227 132 7 arcto 4 {pop} repeat 227 125 201 125 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 153 159 m 146 159 146 171 7 arcto 4 {pop} repeat 146 178 172 178 7 arcto 4 {pop} repeat 179 178 179 166 7 arcto 4 {pop} repeat 179 159 153 159 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 202 159 m 195 159 195 171 7 arcto 4 {pop} repeat 195 178 221 178 7 arcto 4 {pop} repeat 228 178 228 166 7 arcto 4 {pop} repeat 228 159 202 159 7 arcto 4 {pop} repeat clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 191 108 m 211 125 l gs col-1 s gr
n 206.200 118.295 m 211.000 125.000 l 203.609 121.343 l gs 2 setlinejoin col-1 s gr
% Polyline
n 181 108 m 162 125 l gs col-1 s gr
n 169.296 121.156 m 162.000 125.000 l 166.628 118.175 l gs 2 setlinejoin col-1 s gr
% Polyline
n 211 145 m 211 160 l gs col-1 s gr
n 213.000 152.000 m 211.000 160.000 l 209.000 152.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 213 179 m 213 191 l gs col-1 s gr
n 215.000 183.000 m 213.000 191.000 l 211.000 183.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 163 145 m 163 159 l gs col-1 s gr
n 165.000 151.000 m 163.000 159.000 l 161.000 151.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 163 179 m 163 191 l gs col-1 s gr
n 165.000 183.000 m 163.000 191.000 l 161.000 183.000 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
% Polyline
n 105 125 m 98 125 98 137 7 arcto 4 {pop} repeat 98 144 124 144 7 arcto 4 {pop} repeat 131 144 131 132 7 arcto 4 {pop} repeat 131 125 105 125 7 arcto 4 {pop} repeat clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 113 145 m 113 157 l gs col-1 s gr
n 115.000 149.000 m 113.000 157.000 l 111.000 149.000 l gs 2 setlinejoin col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
149 172 m 
gs 1 -1 scale (derefD) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
198 172 m 
gs 1 -1 scale (derefD) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
152 138 m 
gs 1 -1 scale (dToT) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
200 138 m 
gs 1 -1 scale (dToT) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
123 102 m 
gs 1 -1 scale (dToT) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
174 102 m 
gs 1 -1 scale (mulT) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
150 62 m 
gs 1 -1 scale (subT) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
100 138 m 
gs 1 -1 scale (derefD) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
109 172 m 
gs 1 -1 scale (id) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
111 188 m 
gs 1 -1 scale (a) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
160 222 m 
gs 1 -1 scale (b) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
211 221 m 
gs 1 -1 scale (c) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
227 205 m 
gs 1 -1 scale (Adrs=id:0) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
112 205 m 
gs 1 -1 scale (Adrs=id:0) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
63 171 m 
gs 1 -1 scale (Adrs=id:0) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
205 101 m 
gs 1 -1 scale (TReg=mulT\(Treg,dToT\(derefD\(Adrs\)\)\):57) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
230 138 m 
gs 1 -1 scale (Treg=dToT\(derefD\(Adrs\)\):25) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
7 102 m 
gs 1 -1 scale (Treg=dToT\(derefD\(Adrs\)\):25) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
179 61 m 
gs 1 -1 scale (Treg=subT\(dToT\(derefD\(Adrs\)\),Treg\):85) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
157 206 m 
gs 1 -1 scale (id) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
209 205 m 
gs 1 -1 scale (id) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 377 1086 a FN(Figure)g(6.11:)j(lab)q(elled)c FK(AST)19
b FN(sho)o(wing)13 b(rev)o(ersal)i(of)e(no)q(de)i(visit)e(order)320
1212 y FF(fld)19 b(b)423 b FD(;)13 b(push)h(op)q(erand)g
Fm(b)f FD(on)o(to)h(fp-stac)o(k)320 1258 y FF(fmul)k(c)404
b FD(;)13 b(m)o(ultiply)i Fm(c)e FD(to)g(top-of-stac)o(k)320
1304 y FF(fsubr)18 b(a)384 b FD(;)13 b(rev)o(erse)g(subtract)h(top)f
(from)g Fm(a)224 1398 y FN(This)18 b(co)q(de)g(mak)o(es)f(use)h(of)f
(pro)q(duction)h(4,)g(whic)o(h)f(has)h(the)g(memory)d(op)q(erand)j(on)g
(the)224 1448 y(left,)c(and)f(uses)i(the)g(rev)o(ersed)g(subtraction)g
(instruction)f FG(fsubr)p FN(.)j(Without)c(this)h(instruc-)224
1497 y(tion,)j(w)o(e)h(w)o(ould)e(ha)o(v)o(e)h(needed)i(to)e(load)f
(the)i(left)f(op)q(erand)h(and)f(use)h(pro)q(duction)g(2)e(at)224
1547 y(an)g(additional)f(cost)i(of)e(25)h(cycles.)26
b(There)18 b(is)e(no)g(need)h(for)f(a)g(rev)o(ersed)i(m)o(ultiplicatio)
o(n)224 1597 y(instruction,)j(since)g(m)o(ultipli)o(cation)16
b(is)k(comm)o(utativ)n(e.)33 b(If)19 b(w)o(e)h(wished)g(to)f(m)o
(ultiply)e(a)224 1647 y(memory)e(op)q(erand)j(on)f(the)g(left)g(b)o(y)g
(an)g(expression)i(result)f(in)e(a)h FK(T)m(r)n(e)n(g)j
FN(then)e(w)o(e)f(w)o(ould)224 1697 y(simply)11 b(use)j(pro)q(duction)e
(7.)18 b(This)12 b(emits)g(the)h(same)f FG(fmul)h FK(mem)j
FN(instruction)d(as)g(pro)q(duc-)224 1747 y(tion)i(6,)h(ev)o(en)g
(though)g(the)g(memory)d(address)k(attribute)f(used)g(in)g(the)g(seman)
o(tic)f(action)224 1796 y(comes)f(from)e(the)i(left)g(rather)h(than)f
(the)g(righ)o(t)g(subtree.)224 1942 y FI(6.3)67 b(Implemen)n(ting)24
b(b)r(ottom-up)f(rewriting)224 2035 y FN(In)12 b(this)f(section)h(w)o
(e)g(lo)q(ok)e(at)h(some)g(further)h(details)f(for)g(the)h(implemen)o
(tation)c(of)j(b)q(ottom-)224 2085 y(up)j(tree)i(rewriting.)h(W)m(e)d
(shall)f(assume)g(the)i(t)o(yp)q(e)f(de\014nitions)g(in)g(\014gure)g
(6.12.)287 2137 y(The)h(main)e(data)h(structure)j(of)e(the)g
FK(AST)20 b FN(comprises)15 b(a)f(tree)j(of)d(no)q(des)i(of)e
FK(No)n(deInfo)224 2186 y FN(t)o(yp)q(e,)g(accessed)i(from)11
b(a)i(statically)g(declared)h(ro)q(ot.)k(Eac)o(h)13 b(no)q(de)h(con)o
(tains)f(a)g(state)i(arra)o(y)224 2236 y(of)i(costs)h(and)f(rule)g
(indices,)h(indexed)g(b)o(y)f(the)g FK(F)m(ormEnum)k
FN(en)o(umeration.)26 b(When)18 b(the)224 2286 y(tree)i(is)f(built,)g
(the)g(costs)h(are)f(all)e(set)j(to)e(the)i(limit)c(v)n(alue)i
FK(maxC)6 b FN(.)18 b(The)h(rules)g(are)h(all)224 2336
y(initialized)d(to)g(the)i(zero)f(pro)q(duction)g(index)g(v)n(alue,)f
(whic)o(h)h(is)g(reserv)o(ed)h(to)f(denote)h(an)224 2386
y(in)o(v)n(alid)12 b(pro)q(duction.)287 2437 y(F)m(or)18
b(the)h(momen)o(t)d(w)o(e)j(shall)f(assume)h(that)f(there)j(is)d(a)h
(global)e(arra)o(y)h(of)g FK(Pr)n(o)n(dInfo)224 2487
y FN(records)e(whic)o(h)e(con)o(tain)f(information)e(on)j(eac)o(h)g
(pro)q(duction.)287 2538 y(Throughout)k(this)h(section)g(w)o(e)g(shall)
f(treat)i(the)f(case)h(of)e(the)h FK(SP)m(AR)o(C)25 b
FN(pro)q(cessor,)224 2588 y(the)14 b(addressing)g(mo)q(des)f(of)g(whic)
o(h)g(w)o(ere)h(discussed)h(in)e(section)h(5.2.2.)i(W)m(e)d(shall)f
(pro)q(cess)224 2638 y(the)18 b(full)e(grammar)e(of)j(the)h(address)g
(computations,)e(and)h(some)g(t)o(ypical)f(binary)h(op)q(er-)224
2688 y(ations.)24 b(In)16 b(particular,)f(w)o(e)i(shall)e(distinguish)g
(b)q(et)o(w)o(een)i(those)g(cases)g(where)g(addition,)p
eop
%%Page: 173 179
173 178 bop 224 274 a FL(6.3.)31 b(IMPLEMENTING)15 b(BOTTOM-UP)g
(REWRITING)390 b FN(173)p 270 392 1350 2 v 269 438 2
46 v 1619 438 V 269 483 V 315 470 a FF(TYPE)38 b(NodeDesc)e(=)19
b(POINTER)e(TO)i(NodeInfo;)p 1619 483 V 269 529 V 433
515 a(OperEnum)36 b(=)19 b(\(errTag,)p FE(o)o(the)o(r)11
b(enum)i(values...)p FF(\);)p 1619 529 V 269 575 V 433
561 a(FormEnum)36 b(=)19 b(\(errFrm,)p FE(o)o(the)o(r)11
b(enum)i(values...)p FF(\);)p 1619 575 V 269 620 V 1619
620 V 269 666 V 433 652 a(NodeInfo)36 b(=)19 b(RECORD)p
1619 666 V 269 712 V 707 698 a(lOp,)f(rOp)38 b(:)20 b(NodeDesc)o(;)p
1619 712 V 269 757 V 707 744 a(operator)d(:)i(OperEnum;)p
1619 757 V 269 803 V 707 789 a(state)77 b(:)19 b(StateType)o(;)p
1619 803 V 269 849 V 668 835 a(END;)p 1619 849 V 269
894 V 1619 894 V 269 940 V 433 926 a(StateTyp)o(e)e(=)i(RECORD)p
1619 940 V 269 986 V 707 972 a(costs)77 b(:)19 b(ARRAY)f(FormEnum)e(OF)
j(SHORTINT;)p 1619 986 V 269 1031 V 707 1018 a(rules)77
b(:)19 b(ARRAY)f(FormEnum)e(OF)j(ProdIndex)o(;)p 1619
1031 V 269 1077 V 707 1063 a FE(other)13 b(data)f(\014elds,)g(as)h(ne)n
(e)n(de)n(d)p 1619 1077 V 269 1123 V 668 1109 a FF(END;)p
1619 1123 V 269 1168 V 1619 1168 V 270 1170 1350 2 v
500 1286 a FN(Figure)h(6.12:)j(t)o(yp)q(e)e(de\014nitions)e(for)h
(implemen)o(tatio)o(n)224 1428 y(for)j(example,)g(m)o(ust)f(b)q(e)i
(tested)h(for)e(o)o(v)o(er\015o)o(w,)g(and)h(those)g(cases)g(in)f(whic)
o(h)g(it)g(ma)o(y)f(b)q(e)224 1478 y(folded)c(in)o(to)f(an)h(address)h
(computation.)j(The)d(table)e(in)h(\014gure)h(6.13)d(sho)o(ws)j(the)f
(subset)i(of)224 1528 y(pro)q(ductions)g(whic)o(h)g(w)o(e)f(consider.)
19 b(In)13 b(this)h(example,)d(instead)j(of)f(allo)o(wing)e
(conditional)p 238 1597 1414 2 v 237 1643 2 46 v 325
1643 V 550 1629 a Fv(pro)q(duction)p 983 1643 V 269 w(condition)p
1259 1643 V 135 w(co)q(de)p 1525 1643 V 114 w(cost)p
1651 1643 V 238 1644 1414 2 v 237 1690 2 46 v 282 1676
a FD(1)p 325 1690 V 50 w FF(Stmt)18 b(=)h(assign\(Adr)o(,Re)o(g\))p
983 1690 V 1259 1690 V 499 w(st)g(r,adr)p 1525 1690 V
135 w FD(1)p 1651 1690 V 237 1736 V 282 1722 a(2)p 325
1736 V 50 w FF(Stmt)f(=)h(assign\(add)o(\(Re)o(g,R)o(eg)o(\),R)o(eg)o
(\))p 983 1736 V 1259 1736 V 323 w(st)g(r,\(r,r\))p 1525
1736 V 95 w FD(1)p 1651 1736 V 237 1781 V 282 1768 a(3)p
325 1781 V 50 w FF(Reg)f(=)i(deref\(Adr)o(\))p 983 1781
V 1259 1781 V 617 w(ld)f(adr,r)p 1525 1781 V 135 w FD(1)p
1651 1781 V 237 1827 V 282 1813 a(4)p 325 1827 V 50 w
FF(Reg)f(=)i(deref\(add)o(\(R)o(eg,)o(Reg)o(\)\))p 983
1827 V 1259 1827 V 440 w(ld)f(\(r,r\),r)p 1525 1827 V
95 w FD(1)p 1651 1827 V 237 1873 V 282 1859 a(5)p 325
1873 V 50 w FF(Reg)f(=)i(add\(Reg,R)o(eg)o(\))p 983 1873
V 1259 1873 V 578 w(add)e(r,r,r)p 1525 1873 V 116 w FD(1)p
1651 1873 V 237 1918 V 282 1905 a(6)p 325 1918 V 50 w
FF(Reg)g(=)i(add\(Reg,I)o(mm)o(\))p 983 1918 V 302 w
FD(&\(lit)p Fm(<)p FD(13bits\))p 1259 1918 V 52 w FF(add)e(r,i,r)p
1525 1918 V 116 w FD(1)p 1651 1918 V 237 1964 V 282 1950
a(7)p 325 1964 V 50 w FF(Reg)g(=)i(addV\(Reg,)o(Re)o(g\))p
983 1964 V 1259 1964 V 558 w(addCC)e(r,r,r)p 1525 1964
V 76 w FD(1)p 1651 1964 V 237 2010 V 282 1996 a(8)p 325
2010 V 50 w FF(Reg)g(=)i(addV\(Reg,)o(Im)o(m\))p 983
2010 V 282 w FD(&\(lit)p Fm(<)p FD(13bits\))p 1259 2010
V 52 w FF(addCC)e(r,i,r)p 1525 2010 V 76 w FD(1)p 1651
2010 V 237 2055 V 282 2042 a(9)p 325 2055 V 50 w FF(Reg)g(=)i(Con)p
983 2055 V 1259 2055 V 756 w(set)e(c,r)p 1525 2055 V
156 w FD(1)p 1651 2055 V 237 2101 V 263 2087 a(10)p 325
2101 V 50 w FF(Con)g(=)i(static)p 983 2101 V 1259 2101
V 1525 2101 V 990 w FD(0)p 1651 2101 V 237 2147 V 263
2133 a(11)p 325 2147 V 50 w FF(Con)e(=)i(Imm)p 983 2147
V 1259 2147 V 1525 2147 V 1050 w FD(0)p 1651 2147 V 237
2192 V 263 2179 a(12)p 325 2192 V 50 w FF(Con)e(=)i(add\(Con,I)o(mm)o
(\))p 983 2192 V 1259 2192 V 1525 2192 V 872 w FD(0)p
1651 2192 V 237 2238 V 263 2224 a(13)p 325 2238 V 50
w FF(Imm)e(=)i(literal)p 983 2238 V 1259 2238 V 1525
2238 V 970 w FD(0)p 1651 2238 V 237 2284 V 263 2270 a(14)p
325 2284 V 50 w FF(Imm)e(=)i(add\(Imm,I)o(mm)o(\))p 983
2284 V 1259 2284 V 1525 2284 V 872 w FD(0)p 1651 2284
V 237 2329 V 263 2316 a(15)p 325 2329 V 50 w FF(Adr)e(=)i(Reg)p
983 2329 V 1259 2329 V 1525 2329 V 1050 w FD(0)p 1651
2329 V 237 2375 V 263 2361 a(16)p 325 2375 V 50 w FF(Adr)e(=)i(Con)p
983 2375 V 1259 2375 V 1525 2375 V 1050 w FD(0)p 1651
2375 V 237 2421 V 263 2407 a(17)p 325 2421 V 50 w FF(Adr)e(=)i
(add\(Con,R)o(eg)o(\))p 983 2421 V 1259 2421 V 1525 2421
V 872 w FD(0)p 1651 2421 V 237 2466 V 263 2453 a(18)p
325 2466 V 50 w FF(Adr)e(=)i(add\(Adr,I)o(mm)o(\))p 983
2466 V 1259 2466 V 1525 2466 V 872 w FD(0)p 1651 2466
V 237 2512 V 263 2498 a(19)p 325 2512 V 50 w FF(Adr)e(=)i(local)p
983 2512 V 1259 2512 V 1525 2512 V 1010 w FD(0)p 1651
2512 V 237 2558 V 263 2544 a(20)p 325 2558 V 50 w FF(Reg)e(=)i
(mul\(Reg,I)o(mm)o(\))p 983 2558 V 302 w FD(&\(lit=2)1138
2528 y Fh(n)1160 2544 y FD(\))p 1259 2558 V 110 w FF(shl)e(r,i,r)p
1525 2558 V 116 w FD(1)p 1651 2558 V 237 2603 V 263 2590
a(21)p 325 2603 V 50 w FF(Reg)g(=)i(mul\(Reg,R)o(eg)o(\))p
983 2603 V 1259 2603 V 578 w(mul)e(r,r,r)p 1525 2603
V 116 w FD(8)p 1651 2603 V 238 2605 1414 2 v 519 2679
a FN(Figure)c(6.13:)j(pro)q(ductions)d(for)g FK(SP)m(AR)o(C)20
b FN(pro)q(cessor)p eop
%%Page: 174 180
174 179 bop 224 274 a FN(174)425 b FL(CHAPTER)14 b(6.)32
b(BOTTOM-UP)15 b(TREE)f(REWRITING)224 390 y FN(cost)j(expressions,)g(w)
o(e)f(only)f(p)q(ermit)g(the)h(cost)h(of)e(eac)o(h)h(pro)q(duction)g
(to)f(b)q(e)i(a)e(constan)o(t,)224 440 y(but)e(allo)o(w)f(an)g
(optional)g(Bo)q(olean)g(predicate)i(to)f(b)q(e)g(applied)f(during)h
(pattern)h(matc)o(hing.)224 490 y(Pro)q(ductions)h(6)f(and)h(8)e(in)h
(the)h(\014gure)g(eac)o(h)g(ha)o(v)o(e)f(a)g(condition)f(whic)o(h)h
(limits)e(the)j(literal)224 540 y(to)j(\014t)g(in)o(to)f(a)h(13-bit)f
(signed)h(in)o(teger)h(\014eld.)30 b(Pro)q(duction)18
b(20)f(has)i(a)e(condition)g(whic)o(h)224 590 y(allo)o(ws)d(the)i
(replacemen)o(t)f(of)g(a)g(m)o(ultiplicatio)o(n)e(b)o(y)i(a)g(left)g
(shift)g(only)f(if)g(the)i(immediate)224 640 y(literal)d(is)h(a)g(p)q
(o)o(w)o(er)g(of)f(t)o(w)o(o.)287 698 y(The)d(pro)q(duction)h(patterns)
g(are)g(sp)q(eci\014ed)h(in)e(a)g(fully)f(paren)o(thesized)j(pre\014x)f
(notation.)224 748 y(The)21 b(table)f(sho)o(ws)g(only)g(the)g
FK(Wor)n(d)25 b FN(v)o(ersion)20 b(of)g(the)g(man)o(y)f(dereference)k
(and)d(assign)224 797 y(instructions)15 b(whic)o(h)f(apply)f(to)h
(di\013eren)o(t)h(datat)o(yp)q(es.)287 856 y(F)m(or)e(this)h(pro)q
(duction)g(set,)h(the)f(t)o(yp)q(eform)f(en)o(umeration)g(is)g(|)433
964 y FG(TYPE)21 b(TypeForm)f(=)h(\(errFrm,Stmt,Reg,Adr)o(s,Co)o(n,Imm)
o(\);)224 1072 y FN(where)13 b FK(Imm)i FN(is)d(an)f(immediate)e
(literal)i(v)n(alue,)g(and)h FK(Con)j FN(is)c(an)o(y)h(compile-tim)o(e)
d(constan)o(t,)224 1122 y(including)i(sym)o(b)q(olic)g(lo)q(cation)g
(names.)16 b(Pro)q(duction)d(10)e(is)h(a)g(n)o(ullary)f(pro)q(duction)h
(whic)o(h)224 1171 y(matc)o(hes)f(the)g(name)f(of)g(a)h(statically)f
(allo)q(cated)g(memory)f(lo)q(cation)h(as)h(a)f FK(Con)15
b FN(form,)9 b(while)224 1221 y(pro)q(duction)15 b(19)e(matc)o(hes)g
(the)i(address)g(of)e(a)h(lo)q(cal)f(v)n(ariable)g(as)h(an)f
FK(A)n(dr)18 b FN(form.)718 1296 y
 7170211 3552215 0 0 7170211 3552215 startTexFig
 718 1296 a
%%BeginDocument: chainp.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-80.0 126.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Polyline
n 95 119 m 88 119 88 132 7 arcto 4 {pop} repeat 88 139 132 139 7 arcto 4 {pop} repeat 139 139 139 126 7 arcto 4 {pop} repeat 139 119 95 119 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 166 119 m 159 119 159 132 7 arcto 4 {pop} repeat 159 139 203 139 7 arcto 4 {pop} repeat 210 139 210 126 7 arcto 4 {pop} repeat 210 119 166 119 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 96 79 m 89 79 89 92 7 arcto 4 {pop} repeat 89 99 133 99 7 arcto 4 {pop} repeat 140 99 140 86 7 arcto 4 {pop} repeat 140 79 96 79 7 arcto 4 {pop} repeat clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 115 119 m 115 100 l gs col-1 s gr
n 113.000 108.000 m 115.000 100.000 l 117.000 108.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 161 121 m 138 98 l gs col-1 s gr
n 142.243 105.071 m 138.000 98.000 l 145.071 102.243 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
% Polyline
n 166 79 m 159 79 159 92 7 arcto 4 {pop} repeat 159 99 203 99 7 arcto 4 {pop} repeat 210 99 210 86 7 arcto 4 {pop} repeat 210 79 166 79 7 arcto 4 {pop} repeat clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 184 99 m 184 119 l gs col-1 s gr
n 186.000 111.000 m 184.000 119.000 l 182.000 111.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 158 129 m 139 129 l gs col-1 s gr
n 147.000 131.000 m 139.000 129.000 l 147.000 127.000 l gs 2 setlinejoin col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
106 132 m 
gs 1 -1 scale (Reg) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
175 132 m 
gs 1 -1 scale (Con) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
176 92 m 
gs 1 -1 scale (Imm) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
107 92 m 
gs 1 -1 scale (Adr) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
187 111 m 
gs 1 -1 scale (0) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
150 109 m 
gs 1 -1 scale (0) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
109 115 m 
gs 1 -1 scale (0) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
148 127 m 
gs 1 -1 scale (1) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 442 1612 a FN(Figure)c(6.14:)i(c)o(hain)e(pro)q(ductions)g(for)g
(sparc)h(address)g(mo)q(des)287 1729 y(The)g(co)q(ercion)h(graph)e(for)
h(the)g(c)o(hain)g(pro)q(ductions)g(is)g(sho)o(wn)g(as)g(\014gure)g
(6.14.)20 b(Eac)o(h)224 1779 y(edge)g(in)f(the)h(graph)f(is)g(lab)q
(elled)g(with)g(the)h(cost)g(of)f(the)h(c)o(hain)f(pro)q(duction)g
(whic)o(h)g(is)224 1828 y(represen)o(ts.)38 b(F)m(rom)18
b(this)i(graph)f(w)o(e)h(ma)o(y)d(conclude)k(that)e(a)h(pro)q(duction)f
(to)h(load)f(an)224 1878 y(immediate)c(v)n(alue)j(in)o(to)f(a)h
(register)h(w)o(ould)e(b)q(e)h(redundan)o(t,)i(since)e(w)o(e)g(ma)o(y)e
(transform)224 1928 y(an)k FK(Imm)j FN(in)o(to)c(a)h
FK(Con)j FN(at)d(zero)h(cost,)g(and)f(then)h(load)e(the)h
FK(Con)k FN(in)o(to)19 b(a)g(register)j(b)o(y)224 1978
y(pro)q(duction)f(9.)37 b(On)20 b(the)h(other)g(hand,)g(pro)q(duction)g
(16)e(is)h(not)h(redundan)o(t,)h(since)f(it)224 2028
y(allo)o(ws)12 b(the)h(use)h(of)e(a)g FK(Con)k FN(v)n(alue)c(as)h(an)f
FK(A)n(dr)17 b FN(at)12 b(zero)i(cost.)k(T)m(aking)11
b(the)j(transitiv)o(e)e(path)224 2077 y(from)f FK(Con)16
b FN(to)c FK(A)n(dr)k FN(through)d(pro)q(ductions)g(9)f(and)g(15)g(w)o
(ould)f(add)i(one)f(to)g(the)h(total)f(cost.)287 2136
y(In)g(this)g(particular)g(case)h(the)f(c)o(hain-rule)g(graph)g(is)g
(acyclic.)17 b(In)12 b(principle)g(there)i(is)e(no)224
2185 y(problem)g(with)h(c)o(hain-rules)h(forming)d(cycles,)j(since)g(w)
o(e)g(only)e(con)o(tin)o(ue)i(along)e(the)i(c)o(hain)224
2235 y(so)g(long)f(as)h(the)h(corresp)q(onding)g(elemen)o(t)e(of)g
FK(state.c)n(osts)s FN([...])j(is)e(reduced)i(at)d(eac)o(h)i(step.)224
2396 y FH(6.3.1)56 b(Implem)o(en)n(ting)16 b(lab)r(elling)224
2488 y FN(W)m(e)11 b(suggest)g(a)g(st)o(yle)f(of)g(implemen)o(tation)d
(whic)o(h)k(is)g(\\ob)r(ject)g(orien)o(ted")g(in)f(its)g(reliance)i(on)
224 2538 y(metho)q(d)f(dispatc)o(h)g(based)h(on)f(the)g(op)q(erator)h
(and)f(pro)q(duction)g(en)o(umerations.)17 b(The)11 b(main)224
2588 y(lab)q(elling)g(recursion)j(is)f(launc)o(hed)g(b)o(y)f(a)h
(single)f(pro)q(cedure.)20 b(This)13 b(pro)q(cedure)h(dispatc)o(hes)224
2638 y(a)g(lab)q(elling)f(pro)q(cedure)j(selected)f(from)e(an)h(arra)o
(y)f(indexed)i(on)f(the)g(ro)q(ot-no)q(de)h(op)q(erator)224
2688 y(v)n(alue.)p eop
%%Page: 175 181
175 180 bop 224 274 a FL(6.3.)31 b(IMPLEMENTING)15 b(BOTTOM-UP)g
(REWRITING)390 b FN(175)295 381 y FF(PROCEDURE)16 b(LabelNode\(s)o(el)o
(f)h(:)i(NodeDesc\))o(;)295 427 y(BEGIN)335 472 y(labelPro)o(c[s)o(el)o
(f^.)o(ope)o(ra)o(tor)o(]\()o(sel)o(f\);)295 518 y(END)g(LabelNode)o(;)
224 635 y FN(The)c(w)o(ork)f(is)g(all)f(done)i(in)e(the)i
FK(lab)n(elPr)n(o)n(c)h FN(pro)q(cedures,)g(of)e(whic)o(h)g(there)h(is)
f(one)h(for)f(eac)o(h)224 685 y(op)q(erator.)k(These)13
b(pro)q(cedures)h(are)e(hard-co)q(ded)g(to)g(c)o(hec)o(k)g(just)g
(those)g(pro)q(duction)g(righ)o(t-)224 735 y(hand-sides)17
b(whic)o(h)f(apply)g(to)g(that)h(op)q(erator,)g(and)f(enco)q(de)h(the)g
(b)q(ottom-up)e(recursion)224 784 y(pattern)g(according)f(to)g(the)g
(arit)o(y)g(of)f(the)h(op)q(erator.)287 834 y(As)i(an)g(example,)f
(supp)q(ose)j(w)o(e)e(wish)g(to)g(matc)o(h)f(the)i(pro)q(ductions)g
(whic)o(h)f(apply)f(to)224 884 y(assignmen)o(t)g(no)q(des)h(in)e
(\014gure)i(6.13.)21 b(The)16 b FK(lab)n(elPr)n(o)n(c)h
FN(arra)o(y)e(will)e(b)q(e)j(initialized)e(so)h(that)224
934 y FK(lab)n(elPr)n(o)n(c)r FN([)p FK(assign)s FN(])f(selects)i(the)e
(pro)q(cedure)j FK(assignMatch)s FN(,)d(sho)o(wn)h(in)e(\014gure)i
(6.15.)32 b(The)p 241 1031 1409 2 v 240 1076 2 46 v 285
1063 a FF(PROCEDURE)16 b(assignMatch)o(\(s)o(elf)g(:)j(NodeDesc\);)p
1648 1076 V 240 1122 V 325 1108 a(VAR)f(rCost,)f(lCost)h(:)h(INTEGER;)p
1648 1122 V 240 1168 V 285 1154 a(BEGIN)p 1648 1168 V
240 1213 V 305 1199 a(\(*)12 b FE(\014rst)h(r)n(e)n(curse)f(down)h(the)
g(tr)n(e)n(e)i FF(*\))p 1648 1213 V 240 1259 V 325 1245
a(labelPro)o(c[s)o(elf)o(^.)o(lOp)o(^.)o(ope)o(rat)o(or)o(]\(s)o(el)o
(f^.)o(lOp)o(\);)p 1648 1259 V 240 1305 V 325 1291 a(labelPro)o(c[s)o
(elf)o(^.)o(rOp)o(^.)o(ope)o(rat)o(or)o(]\(s)o(el)o(f^.)o(rOp)o(\);)p
1648 1305 V 240 1350 V 305 1336 a(\(*)d FE(now)h(che)n(ck)f(for)i(p)n
(attern)d(matches)k FF(*\))p 1648 1350 V 240 1396 V 325
1382 a(IF)j(\(self^.lOp^)o(.r)o(ule)o(s[)o(Adr)o(])f(<>)h(0\))h(AND)p
1648 1396 V 240 1442 V 383 1428 a(\(self^.rOp^)o(.r)o(ule)o(s[)o(Reg)o
(])e(<>)h(0\))h(THEN)p 1648 1442 V 240 1487 V 344 1473
a(\(*)12 b FE(pr)n(o)n(d)h(1)5 b FD(:)16 b FF(Stmt)i(=)i(assign\(Ad)o
(r,)o(Reg)o(\))c(*\))p 1648 1487 V 240 1533 V 364 1519
a(rCost)h(:=)i(self^.rOp^)o(.co)o(sts)o([A)o(dr])o(;)d(lCost)i(:=)h
(self^.lOp^)o(.c)o(ost)o(s[)o(Reg)o(];)p 1648 1533 V
240 1578 V 364 1565 a(InsertStm)o(t\(s)o(el)o(f,1)o(,r)o(Cos)o(t)e(+)i
(lCost)e(+)j(1\);)p 1648 1578 V 240 1624 V 325 1610 a(END;)p
1648 1624 V 240 1670 V 325 1656 a(IF)e(\(self^.lOp^)o(.o)o(per)o(at)o
(or)e(=)k(add\))e(AND)p 1648 1670 V 240 1715 V 383 1702
a(\(self^.lOp^)o(.l)o(Op^)o(.r)o(ule)o(s[R)o(eg)o(])f(<>)h(0\))h(AND)p
1648 1715 V 240 1761 V 383 1747 a(\(self^.lOp^)o(.r)o(Op^)o(.r)o(ule)o
(s[R)o(eg)o(])e(<>)h(0\))h(AND)p 1648 1761 V 240 1807
V 383 1793 a(\(self^.rOp^)o(.r)o(ule)o(s[)o(Reg)o(])e(<>)h(0\))h(THEN)p
1648 1807 V 240 1852 V 344 1839 a(\(*)12 b FE(pr)n(o)n(d)h(2)5
b FD(:)16 b FF(Stmt)i(=)i(assign\(ad)o(d\()o(Reg)o(,R)o(eg\))o(,Re)o
(g\))c(*\))p 1648 1852 V 240 1898 V 364 1884 a(rCost)h(:=)i(self^.rOp^)
o(.co)o(sts)o([R)o(eg])o(;)p 1648 1898 V 240 1944 V 364
1930 a(lCost)e(:=)i(self^.lOp^)o(.lO)o(p^.)o(co)o(sts)o([R)o(eg])o(+se)
o(lf)o(^.l)o(Op)o(^.r)o(Op^)o(.c)o(ost)o(s[)o(Reg)o(];)p
1648 1944 V 240 1989 V 364 1976 a(InsertStm)o(t\(s)o(el)o(f,2)o(,r)o
(Cos)o(t)e(+)i(lCost)e(+)j(1\);)p 1648 1989 V 240 2035
V 325 2021 a(END;)p 1648 2035 V 240 2081 V 285 2067 a(END)f(assignMat)o
(ch;)p 1648 2081 V 241 2082 1409 2 v 517 2198 a FN(Figure)14
b(6.15:)j(matc)o(h)12 b(pro)q(cedure)k(for)e(assign)f(no)q(des)224
2289 y(pro)q(cedure)18 b(b)q(egins)e(b)o(y)f(recursing)i(on)e(its)g(t)o
(w)o(o)g(subtrees.)25 b(It)16 b(then)g(tries)g(to)g(matc)o(h)e(eac)o(h)
224 2339 y(of)g(the)i(t)o(w)o(o)e(patterns)i(whic)o(h)e(b)q(egin)h
(with)f(a)g FK(assign)s FN(.)21 b(Note)15 b(that)g(the)g(\014rst)g(of)f
(these)i(is)f(a)224 2389 y(simple)10 b(pattern,)j(while)e(the)h(second)
g(is)f(a)h(more)e(complex,)g(nested)j(pattern.)18 b(The)12
b FK(Insert)t FG(*)224 2438 y FN(pro)q(cedures)17 b(up)q(date)f(one)f
(elemen)o(t)f(of)g(the)h(state)h(arra)o(ys)e(of)h(the)g
FK(self)23 b FN(no)q(de,)15 b(as)f(detailed)224 2488
y(later.)287 2538 y(The)d(corresp)q(onding)g(pro)q(cedure)h(for)e(a)g
(unary)h(op)q(erator)g(is)f(illustrated)g(b)o(y)h(\014gure)g(6.16)224
2588 y(whic)o(h)j(is)g(the)g(pro)q(cedure)i FK(der)n(efMatch)s
FN(.)287 2638 y(In)g(these)i(pro)q(cedures)h(w)o(e)e(test)g(whether)h
(a)e(no)q(de)h(can)g(p)q(ossibly)f(ha)o(v)o(e)g(a)h(particular)224
2688 y(t)o(yp)q(eform)f FM(T)23 b FN(b)o(y)17 b(c)o(hec)o(king)h(if)e
(the)i(rule)f FK(no)n(de)s Ft(")p FK(.rules)s FN([)p
FM(T)6 b FN(])17 b(is)g(non-zero.)28 b(Here)18 b(w)o(e)g(mak)o(e)p
eop
%%Page: 176 182
176 181 bop 224 274 a FN(176)425 b FL(CHAPTER)14 b(6.)32
b(BOTTOM-UP)15 b(TREE)f(REWRITING)p 241 392 1409 2 v
240 438 2 46 v 285 424 a FF(PROCEDURE)i(derefMatch\()o(se)o(lf)g(:)k
(NodeDesc)o(\);)p 1648 438 V 240 483 V 325 470 a(VAR)e(lCost)g(:)h
(INTEGER;)p 1648 483 V 240 529 V 285 515 a(BEGIN)p 1648
529 V 240 575 V 305 561 a(\(*)12 b FE(\014rst)h(r)n(e)n(curse)f(down)h
(the)g(tr)n(e)n(e)i FF(*\))p 1648 575 V 240 620 V 325
607 a(labelPro)o(c[s)o(elf)o(^.)o(lOp)o(^.)o(ope)o(rat)o(or)o(]\(s)o
(el)o(f^.)o(lOp)o(\);)p 1648 620 V 240 666 V 305 652
a(\(*)d FE(now)h(che)n(ck)f(for)i(p)n(attern)d(matches)k
FF(*\))p 1648 666 V 240 712 V 325 698 a(IF)j(self^.lOp^.)o(ru)o(les)o
([A)o(dr])e(<>)j(0)g(THEN)p 1648 712 V 240 757 V 344
744 a(\(*)12 b FE(pr)n(o)n(d)h(3)5 b FD(:)16 b FF(Reg)j(=)g
(deref\(Adr\))d(*\))p 1648 757 V 240 803 V 364 789 a(lCost)h(:=)i
(self^.lOp^)o(.co)o(sts)o([A)o(dr])o(;)p 1648 803 V 240
849 V 364 835 a(InsertReg)o(\(se)o(lf)o(,3,)o(lC)o(ost)d(+)j(1\);)p
1648 849 V 240 894 V 325 881 a(END;)p 1648 894 V 240
940 V 325 926 a(IF)f(\(self^.lOp^)o(.o)o(per)o(at)o(or)e(=)k(add\))e
(AND)p 1648 940 V 240 986 V 383 972 a(\(self^.lOp^)o(.l)o(Op^)o(.r)o
(ule)o(s[R)o(eg)o(])f(<>)h(0\))h(AND)p 1648 986 V 240
1031 V 383 1018 a(\(self^.lOp^)o(.r)o(Op^)o(.r)o(ule)o(s[R)o(eg)o(])e
(<>)h(0\))h(THEN)p 1648 1031 V 240 1077 V 344 1063 a(\(*)12
b FE(pr)n(o)n(d)h(4)5 b FD(:)16 b FF(Reg)j(=)g(deref\(add\()o(Re)o(g,R)
o(eg)o(\)\))d(*\))p 1648 1077 V 240 1123 V 364 1109 a(lCost)h(:=)i
(self^.lOp^)o(.lO)o(p^.)o(co)o(sts)o([R)o(eg])o(+se)o(lf)o(^.l)o(Op)o
(^.r)o(Op^)o(.c)o(ost)o(s[)o(Reg)o(];)p 1648 1123 V 240
1168 V 364 1155 a(InsertReg)o(\(se)o(lf)o(,4,)o(lC)o(ost)d(+)j(1\);)p
1648 1168 V 240 1214 V 325 1200 a(END;)p 1648 1214 V
240 1260 V 285 1246 a(END)g(derefMatc)o(h;)p 1648 1260
V 241 1261 1409 2 v 527 1377 a FN(Figure)14 b(6.16:)j(matc)o(h)12
b(pro)q(cedure)k(for)e(deref)g(no)q(des)224 1512 y(use)20
b(of)e(the)h(fact)g(that)f(the)h(rules)h(are)f(n)o(um)o(b)q(ered)f
(from)f(one,)i(and)g(the)g(rules)g(arra)o(y)f(is)224
1562 y(initialized)13 b(to)h(all)e(zeros.)287 1613 y(The)g(pro)q
(cedures)h FK(Insert)t FG(*)e FN(up)q(date)i(the)f(cost)g(and)f(rule)h
(information,)d(and)i(in)o(v)o(ok)o(e)g(the)224 1663
y(c)o(hain-closure)17 b(op)q(eration.)25 b(In)16 b(the)h(case)g(of)f
FK(InsertR)n(e)n(g)t FN(,)f(\014gure)i(6.17,)e(there)j(is)e(a)g(single)
224 1712 y(c)o(hain-closure)f(transition.)p 329 1807
1231 2 v 328 1853 2 46 v 374 1839 a FF(PROCEDURE)h(InsertReg\()o(se)o
(lf)g(:)k(NodeDesc)o(;)p 1560 1853 V 328 1899 V 766 1885
a(prod)e(:)i(ProdInde)o(x;)p 1560 1899 V 328 1944 V 766
1931 a(cost)e(:)i(INTEGER\))o(;)p 1560 1944 V 328 1990
V 374 1976 a(BEGIN)p 1560 1990 V 328 2036 V 413 2022
a(IF)f(self^.cost)o(s[)o(Reg)o(])d(>)k(cost)e(THEN)p
1560 2036 V 328 2081 V 452 2068 a(self^.costs)o([R)o(eg])e(:=)j(cost;)p
1560 2081 V 328 2127 V 452 2113 a(self^.rules)o([R)o(eg])d(:=)j(prod;)p
1560 2127 V 328 2173 V 433 2159 a(\(*)g(Reg)f FE(has)13
b(a)g(single)f(chain)g(rule)g FF(*\))p 1560 2173 V 328
2218 V 452 2205 a(InsertAdr\(s)o(el)o(f,1)o(5,)o(cos)o(t\);)p
1560 2218 V 328 2264 V 413 2250 a(END;)p 1560 2264 V
328 2310 V 374 2296 a(END)18 b(InsertReg;)p 1560 2310
V 329 2311 1231 2 v 537 2427 a FN(Figure)c(6.17:)j(example)c(cost)h(up)
q(date)h(pro)q(cedure)287 2538 y(Notice)g(that)f(since)i(in)e(general)h
(there)h(will)d(b)q(e)j(m)o(ultiple)c(matc)o(hes)i(on)h(eac)o(h)g(no)q
(de,)g(it)224 2588 y(migh)o(t)c(b)q(e)j(w)o(orth)o(while)f(to)g(not)g
(in)o(v)o(ok)o(e)f(c)o(hain-closure)h(after)h(eac)o(h)f(insertion,)g
(but)g(rather)224 2638 y(do)f(it)g(once)g(after)g(all)f(costs)i(ha)o(v)
o(e)f(b)q(een)h(en)o(tered.)19 b(The)12 b(p)q(erformance)g(issues)h(in)
o(v)o(olv)o(ed)e(are)224 2688 y(unclear.)26 b(In)17 b(this)f(case)h(w)o
(e)g(suggest)g(an)f(insert)h(pro)q(cedure)h(for)e(eac)o(h)h(t)o(yp)q
(eform,)e(whic)o(h)p eop
%%Page: 177 183
177 182 bop 224 274 a FL(6.3.)31 b(IMPLEMENTING)15 b(BOTTOM-UP)g
(REWRITING)390 b FN(177)224 390 y(calls)18 b(the)h FK(Insert)t
FG(*)e FN(pro)q(cedure\(s\))k(whic)o(h)d(are)h(adjacen)o(t)f(on)g(the)g
(c)o(hain-closure)h(graph,)224 440 y(\014gure)13 b(6.14.)j(Notice)d
(particularly)e(that)h(these)i(c)o(hain)e(calls)f(should)h(b)q(e)h
(protected)h(b)o(y)e(the)224 490 y(cost)j(test,)g(since)g(costs)g(can)f
(only)f(decrease)j(monotonically)m(.)f(Th)o(us)f(if)g(an)f(insertion)h
(fails)224 540 y(to)k(lo)o(w)o(er)f(a)g(cost,)h(it)f(is)g(not)g(p)q
(ossible)h(for)f(the)h(c)o(hain-closure)g(insertions)g(to)f(lo)o(w)o
(er)g(the)224 590 y(costs)e(of)f(an)o(y)f(dep)q(enden)o(t)j(t)o(yp)q
(eform.)224 696 y FO(Automatic)e(pro)q(duction)f(of)j(lab)q(ellers)224
772 y FN(The)h(lab)q(elling)d(pro)q(cedures)19 b(whic)o(h)c(are)i
(required)g(for)f(the)g(lab)q(elling)e(tra)o(v)o(ersal)j(ma)o(y)d(b)q
(e)224 822 y(automatically)7 b(pro)q(duced)k(from)d(sp)q
(eci\014cation.)18 b(The)10 b FK(L)n(ab)n(elNo)n(de)j
FN(pro)q(cedure)f(is)e(the)g(same)224 872 y(for)k(all)f(lab)q(ellers,)h
(while)f(the)i FK(Insert)t FG(*)e FN(and)h FG(*)p FK(Match)j
FN(pro)q(cedures)g(ma)o(y)12 b(b)q(e)j(deriv)o(ed)f(from)224
922 y(the)h(pro)q(ductions.)287 972 y(The)h(relationship)f(b)q(et)o(w)o
(een)h(the)h(pro)q(ductions)f(and)f(the)h FG(*)p FK(Match)j
FN(pro)q(cedures)f(is)d(as)224 1021 y(direct)f(and)f(predictable)g(as)g
(it)f(is)h(b)q(et)o(w)o(een)h(a)f(con)o(text)g(free)h(pro)q(duction)f
(and)f(a)h(recursiv)o(e)224 1071 y(descen)o(t)19 b(recognizer.)27
b(W)m(e)16 b(simply)e(need)k(to)e(collect)h(up)f(all)g(those)h
(patterns)h(whic)o(h)e(are)224 1121 y(sp)q(eci\014ed)g(with)d(a)h
(particular)g(no)q(de-tag)f(as)h(ro)q(ot,)g(and)g(en)o(umerate)f(the)i
(patterns.)287 1171 y(F)m(or)e(example,)f(in)i(the)h(gramma)o(r)d
(fragmen)o(t)g(\014gure)j(6.13)d(there)k(are)e(six)g(pro)q(ductions)224
1221 y(whic)o(h)j(matc)o(h)e FK(add)21 b FN(no)q(des.)26
b(Of)16 b(these)i(six,)e(t)o(w)o(o)g(start)h(with)f(a)g
FK(r)n(e)n(g)k FN(t)o(yp)q(eform.)k(W)m(e)16 b(are)224
1271 y(led)g(directly)g(to)g(co)q(de)h(along)e(the)h(lines)g(of)f
(\014gure)i(6.18)30 b(In)16 b(the)h FK(addMatch)j FN(pro)q(cedure,)224
1320 y(note)14 b(esp)q(ecially)f(the)h(natural)e(w)o(a)o(y)g(in)h(whic)
o(h)g(the)g(optional)f(predicate)i(merges)f(with)g(the)224
1370 y(pattern)i(matc)o(hing)c(for)i(pro)q(duction)g(6.)18
b(It)13 b(is)h(assumed)e(that)i(a)f(function)g(is)g(used)h(to)f(test)
224 1420 y(the)18 b(range)e(of)h(the)g(literal)f(v)n(alue,)g(but)h(it)f
(migh)o(t)e(equally)i(w)o(ell)g(b)q(e)h(tested)h(b)o(y)f(an)f(inline)
224 1470 y(Bo)q(olean)e(expression.)287 1520 y(An)i(imp)q(ortan)o(t)e
(sp)q(ecial)i(case)h(of)e(matc)o(hing)f(applies)i(to)f(leaf)h(no)q
(des.)24 b(In)16 b(suc)o(h)h(cases)224 1569 y(there)c(are)f(no)g
(patterns,)g(and)g(w)o(e)f(ha)o(v)o(e)h(only)e(c)o(hain)i(rules)g(to)f
(implemen)o(t.)k(Pro)o(vided)c(that)224 1619 y(the)16
b(costs)f(of)f(c)o(hain)h(rules)g(are)g(constan)o(t,)g(and)f(do)h(not)f
(ha)o(v)o(e)h(predicates,)g(w)o(e)g(ma)o(y)e(opti-)224
1669 y(mize)h(the)h(matc)o(hing)e(of)i(leaf)f(no)q(des)h(b)o(y)g
(simply)d(cop)o(ying)i(precomputed)h(\014elds)h(in)o(to)e(the)224
1719 y FK(StateT)m(yp)n(e)h FN(record,)d(and)f(a)o(v)o(oid)e(calls)i
(to)g(the)g FK(Insert)t FG(*)g FN(pro)q(cedures)i(en)o(tirely)m(.)27
b(Figure)12 b(6.19)224 1769 y(has)i(a)g(simple)e(example.)287
1818 y(The)17 b FK(Insert)t FG(*)f FN(pro)q(cedures)i(all)e(ha)o(v)o(e)
g(essen)o(tially)g(the)h(same)f(b)q(o)q(dy)m(,)g(with)g(a)h(tail)e
(call)224 1868 y(to)i(the)h(appropriate)f(pro)q(cedure)i(for)d(ev)o
(ery)i(adjacen)o(t)f(t)o(yp)q(eform)f(in)g(the)i(c)o(hain-closure)224
1918 y(graph.)33 b(Th)o(us)19 b(once)g(w)o(e)g(ha)o(v)o(e)g(computed)f
(\014gure)i(6.14,)e(w)o(e)h(ma)o(y)e(imm)o(ediately)f(write)224
1968 y(\014gure)f(6.17.)224 2082 y FH(6.3.2)56 b(Implem)o(en)n(ting)16
b(reduction)224 2159 y FN(In)h(general,)g(a)f(reduction)h(tra)o(v)o
(ersal)g(o)o(v)o(er)f(a)g(lab)q(elled)g(tree,)i(en)o(tails)e(the)i(c)o
(ho)q(osing)e(of)g(a)224 2209 y(t)o(yp)q(eform)10 b(at)h(eac)o(h)g(no)q
(de)h(visit,)e(and)h(the)h(execution)f(of)g(some)f(sp)q(eci\014ed)i
(seman)o(tic)e(action.)224 2258 y(W)m(e)17 b(ma)o(y)e(visit)h(a)g(no)q
(de)i(rep)q(eatedly)g(in)e(the)h(case)h(of)e(c)o(hain)h(rules,)g(or)g
(lea)o(v)o(e)g(no)q(des)g(out)224 2308 y(in)i(the)h(case)g(of)f(non-lo)
q(cal)f(patterns.)35 b(Th)o(us)19 b(w)o(e)h(m)o(ust)e(let)h(the)h
(selected)h(pro)q(duction)224 2358 y(determine)13 b(the)h(visit)f
(order)h(of)e(the)i(tra)o(v)o(ersal,)f(and)g(the)h(seman)o(tic)e
(action)h(p)q(erformed)f(at)224 2408 y(eac)o(h)j(no)q(de.)287
2458 y(In)i(order)h(to)g(mak)o(e)e(clear)h(the)h(issues)h(in)o(v)o(olv)
o(ed,)e(w)o(e)g(shall)g(consider)h(the)g(case)h(of)e(a)224
2508 y(reduction)d(whic)o(h)g(emits)e FK(V)l(AL)h FN(in)o(to)f(a)h(co)q
(de)i(bu\013er,)f(using)f(the)h(same)e(set)i(of)f(pro)q(cedures)224
2557 y(used)i(in)f(the)g(previous)g(c)o(hapter.)287 2607
y(As)g(an)g(example,)e(consider)j(the)f(arra)o(y)g(access)h(|)792
2688 y FG(k)22 b(:=)f(arr[i,j];)p eop
%%Page: 178 184
178 183 bop 224 274 a FN(178)425 b FL(CHAPTER)14 b(6.)32
b(BOTTOM-UP)15 b(TREE)f(REWRITING)p 241 392 1409 2 v
240 438 2 46 v 285 424 a FF(PROCEDURE)i(addMatch\(se)o(lf)g(:)j
(NodeDesc\);)p 1648 438 V 240 483 V 325 470 a(VAR)f(lCost)g(:)h
(INTEGER;)p 1648 483 V 240 529 V 285 515 a(BEGIN)p 1648
529 V 240 575 V 305 561 a(\(*)12 b FE(\014rst)h(r)n(e)n(curse)f(down)h
(the)g(tr)n(e)n(e)i FF(*\))p 1648 575 V 240 620 V 325
607 a(labelPro)o(c[s)o(elf)o(^.)o(lOp)o(^.)o(ope)o(rat)o(or)o(]\(s)o
(el)o(f^.)o(lOp)o(\);)p 1648 620 V 240 666 V 325 652
a(labelPro)o(c[s)o(elf)o(^.)o(rOp)o(^.)o(ope)o(rat)o(or)o(]\(s)o(el)o
(f^.)o(rOp)o(\);)p 1648 666 V 240 712 V 305 698 a(\(*)d
FE(now)h(che)n(ck)f(for)i(p)n(attern)d(matches)k FF(*\))p
1648 712 V 240 757 V 325 744 a(IF)j(self^.lOp^.)o(ru)o(les)o([R)o(eg])e
(<>)j(0)g(THEN)f(\(*)12 b FE(pr)n(o)n(d)h(5)g(or)h(6)j
FF(*\))p 1648 757 V 240 803 V 364 789 a(lCost)g(:=)i(self^.lOp^)o(.co)o
(sts)o([R)o(eg])o(;)p 1648 803 V 240 849 V 364 835 a(IF)g(self^.rOp)o
(^.)o(rul)o(es)o([Re)o(g])d(<>)j(0)g(THEN)p 1648 849
V 240 894 V 383 881 a(\(*)12 b FE(pr)n(o)n(d)h(5)5 b
FD(:)17 b FF(Reg)h(=)h(add\(Reg,Re)o(g\))d(*\))p 1648
894 V 240 940 V 403 926 a(InsertReg\()o(se)o(lf,)o(5,)o(lCo)o(st)g(+)j
(self^.rOp^.)o(co)o(sts)o([R)o(eg])d(+)j(1\);)p 1648
940 V 240 986 V 364 972 a(END;)p 1648 986 V 240 1031
V 364 1018 a(IF)g(\(self^.rO)o(p^)o(.ru)o(le)o(s[I)o(mm])d(<>)j(0\))f
(AND)p 1648 1031 V 240 1077 V 442 1063 a(FitsIn13\(s)o(elf)o(^.)o(rOp)o
(^.l)o(it)o(Val)o(\))e(THEN)j(\(*)12 b FE(Note)g(the)g(pr)n(e)n(dic)n
(ate)g(her)n(e)i FF(*\))p 1648 1077 V 240 1123 V 383
1109 a(\(*)e FE(pr)n(o)n(d)h(6)5 b FD(:)17 b FF(Reg)h(=)h(add\(Reg,Im)o
(m\))d(*\))p 1648 1123 V 240 1168 V 403 1155 a(InsertReg\()o(se)o(lf,)o
(6,)o(lCo)o(st)g(+)j(self^.rOp^.)o(co)o(sts)o([I)o(mm])d(+)j(1\);)p
1648 1168 V 240 1214 V 364 1200 a(END;)p 1648 1214 V
240 1260 V 325 1246 a(END;)p 1648 1260 V 240 1305 V 325
1292 a(IF)f(self^.lOp^.)o(ru)o(les)o([C)o(on])e(<>)j(0)g(THEN)f(\(*)12
b FE(pr)n(o)n(d)h(12)g(or)g(17)k FF(*\))p 1648 1305 V
240 1351 V 364 1337 a(lCost)g(:=)i(self^.lOp^)o(.co)o(sts)o([C)o(on])o
(;)p 1648 1351 V 240 1397 V 364 1383 a(IF)g(self^.rOp)o(^.)o(rul)o(es)o
([Re)o(g])d(<>)j(0)g(THEN)p 1648 1397 V 240 1442 V 383
1429 a(\(*)12 b FE(pr)n(o)n(d)h(17)5 b FD(:)16 b FF(Adr)j(=)g
(add\(Con,R)o(eg\))d(*\))p 1648 1442 V 240 1488 V 403
1474 a(InsertAdr\()o(se)o(lf,)o(17)o(,lC)o(ost)g(+)j(self^.rOp^)o(.c)o
(ost)o(s[)o(Reg)o(]\);)p 1648 1488 V 240 1534 V 364 1520
a(END;)p 1648 1534 V 240 1579 V 364 1566 a(IF)g(\(self^.rO)o(p^)o(.ru)o
(le)o(s[I)o(mm])d(<>)j(0\))f(THEN)p 1648 1579 V 240 1625
V 383 1611 a(\(*)12 b FE(pr)n(o)n(d)h(12)5 b FD(:)16
b FF(Con)j(=)g(add\(Con,I)o(mm\))d(*\))p 1648 1625 V
240 1671 V 403 1657 a(InsertCon\()o(se)o(lf,)o(12)o(,lC)o(ost)g(+)j
(self^.rOp^)o(.c)o(ost)o(s[)o(Imm)o(])e(+)i(1\);)p 1648
1671 V 240 1716 V 364 1703 a(END;)p 1648 1716 V 240 1762
V 325 1748 a(END;)p 1648 1762 V 240 1808 V 325 1794 a(IF)f
(\(self^.lOp^)o(.r)o(ule)o(s[)o(Imm)o(])f(<>)h(0\))h(AND)p
1648 1808 V 240 1853 V 383 1840 a(\(self^.rOp^)o(.r)o(ule)o(s[)o(Imm)o
(])e(<>)h(0\))h(THEN)p 1648 1853 V 240 1899 V 344 1885
a(\(*)12 b FE(pr)n(o)n(d)h(14)5 b FD(:)16 b FF(Imm)i(=)i(add\(Imm,I)o
(mm)o(\))d(*\))p 1648 1899 V 240 1945 V 364 1931 a(InsertImm)o(\(se)o
(lf)o(,14)o(,s)o(elf)o(^.l)o(Op)o(^.c)o(os)o(ts[)o(Imm)o(])f(+)k
(self^.rOp)o(^.)o(cos)o(ts)o([Im)o(m])o(\);)p 1648 1945
V 240 1990 V 325 1977 a(END;)p 1648 1990 V 240 2036 V
325 2022 a(IF)e(\(self^.lOp^)o(.r)o(ule)o(s[)o(Adr)o(])f(<>)h(0\))h
(AND)p 1648 2036 V 240 2082 V 383 2068 a(\(self^.rOp^)o(.r)o(ule)o(s[)o
(Imm)o(])e(<>)h(0\))h(THEN)p 1648 2082 V 240 2127 V 344
2114 a(\(*)12 b FE(pr)n(o)n(d)h(18)5 b FD(:)16 b FF(Adr)i(=)i
(add\(Adr,I)o(mm)o(\))d(*\))p 1648 2127 V 240 2173 V
364 2159 a(InsertAdr)o(\(se)o(lf)o(,18)o(,s)o(elf)o(^.l)o(Op)o(^.c)o
(os)o(ts[)o(Adr)o(])f(+)k(self^.rOp)o(^.)o(cos)o(ts)o([Im)o(m])o(\);)p
1648 2173 V 240 2219 V 325 2205 a(END;)p 1648 2219 V
240 2264 V 285 2251 a(END)f(addMatch;)p 1648 2264 V 241
2266 1409 2 v 538 2382 a FN(Figure)14 b(6.18:)j(matc)o(h)12
b(pro)q(cedure)k(for)e(add)f(no)q(des)224 2538 y(where)21
b FK(arr)i FN(is)d(a)f FK(V)l(AR)i FN(parameter)f(arra)o(y)f(of)g(16)12
b Ft(\002)i FN(16)19 b(in)o(tegers.)36 b(The)20 b(in)o(teger)g(lo)q
(cal)224 2588 y(v)n(ariables)15 b FM(i;)7 b(j;)g(k)15
b FN(are)g(at)g(o\013sets)h({4,)e({8,)g(and)h({12)f(resp)q(ectiv)o(ely)
m(,)i(and)e(the)i(parameter)e(is)224 2638 y(at)e(o\013set)h(+68)e(in)g
(the)i(stac)o(k)f(frame.)k(The)c(expression)h(on)f(the)g(righ)o
(t-hand-side)f(has)h(b)q(een)224 2688 y(considered)k(in)d(detail)g(in)h
(the)g(previous)h(c)o(hapter.)p eop
%%Page: 179 185
179 184 bop 224 274 a FL(6.3.)31 b(IMPLEMENTING)15 b(BOTTOM-UP)g
(REWRITING)390 b FN(179)p 270 392 1350 2 v 269 438 2
46 v 315 424 a FF(PROCEDURE)16 b(literalMat)o(ch)o(\(se)o(lf)g(:)j
(NodeDesc\);)p 1619 438 V 269 483 V 315 470 a(BEGIN)p
1619 483 V 269 529 V 354 515 a(self^.lOp^)o(.c)o(ost)o(s)e(:=)h
(CostArray{m)o(ax)o(C,m)o(ax)o(C,)36 b(1,)i(0,)h(0,)f(0};)p
1619 529 V 269 575 V 354 561 a(self^.lOp^)o(.r)o(ule)o(s)17
b(:=)h(RuleArray{)55 b(0,)j(0,)39 b(9,)19 b(16,)f(11,)h(13};)p
1619 575 V 269 620 V 315 607 a(END)f(literalMat)o(ch;)192
b(\(*)19 b(errFrm,Stm)o(t,R)o(eg,)o(Ad)o(r,C)o(on)o(,Im)o(m)d(*\))p
1619 620 V 270 622 1350 2 v 497 738 a FN(Figure)e(6.19:)j(\\matc)o(h")
12 b(pro)q(cedure)k(for)e(literal)f(no)q(des)287 873
y(With)18 b(the)h(pro)q(ductions)h(in)e(the)i(\014gure)f(6.13,)g(the)g
(lab)q(elling)f(of)g(the)i(tree)g(for)e(this)224 923
y(example)9 b(giv)o(es)g(us)h(\014gure)g(6.20.)15 b(Alongside)9
b(eac)o(h)i(no)q(de)e(are)h(one)g(or)g(more)e(lab)q(els,)i(sho)o(wing)
203 983 y
 23418306 15984967 0 0 23418306 15984967 startTexFig
 203 983 a
%%BeginDocument: arrayex.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-54.0 261.0 translate 0.900 -0.900 scale
0.500 setlinewidth
% Polyline
n 256 79 m 256 100 l gs col-1 s gr
n 258.000 92.000 m 256.000 100.000 l 254.000 92.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 325 200 m 325 219 l gs col-1 s gr
n 327.000 211.000 m 325.000 219.000 l 323.000 211.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 152 239 m 152 259 l gs col-1 s gr
n 154.000 251.000 m 152.000 259.000 l 150.000 251.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 152 198 m 152 218 l gs col-1 s gr
n 154.000 210.000 m 152.000 218.000 l 150.000 210.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 210 199 m 210 219 l gs col-1 s gr
n 212.000 211.000 m 210.000 219.000 l 208.000 211.000 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
% Polyline
n 158 59 m 151 59 151 72 7 arcto 4 {pop} repeat 151 79 184 79 7 arcto 4 {pop} repeat 191 79 191 66 7 arcto 4 {pop} repeat 191 59 158 59 7 arcto 4 {pop} repeat clp gs 1.00 setgray fill gr
gs col-1 s gr
% Polyline
n 183 141 m 176 141 176 154 7 arcto 4 {pop} repeat 176 161 209 161 7 arcto 4 {pop} repeat 216 161 216 148 7 arcto 4 {pop} repeat 216 141 183 141 7 arcto 4 {pop} repeat clp gs 1.00 setgray fill gr
gs col-1 s gr
% Polyline
n 139 178 m 132 178 132 191 7 arcto 4 {pop} repeat 132 198 165 198 7 arcto 4 {pop} repeat 172 198 172 185 7 arcto 4 {pop} repeat 172 178 139 178 7 arcto 4 {pop} repeat clp gs 1.00 setgray fill gr
gs col-1 s gr
% Polyline
n 199 179 m 192 179 192 192 7 arcto 4 {pop} repeat 192 199 225 199 7 arcto 4 {pop} repeat 232 199 232 186 7 arcto 4 {pop} repeat 232 179 199 179 7 arcto 4 {pop} repeat clp gs 1.00 setgray fill gr
gs col-1 s gr
% Polyline
n 313 180 m 306 180 306 193 7 arcto 4 {pop} repeat 306 200 339 200 7 arcto 4 {pop} repeat 346 200 346 187 7 arcto 4 {pop} repeat 346 180 313 180 7 arcto 4 {pop} repeat clp gs 1.00 setgray fill gr
gs col-1 s gr
% Polyline
n 314 220 m 307 220 307 233 7 arcto 4 {pop} repeat 307 240 340 240 7 arcto 4 {pop} repeat 347 240 347 227 7 arcto 4 {pop} repeat 347 220 314 220 7 arcto 4 {pop} repeat clp gs 1.00 setgray fill gr
gs col-1 s gr
% Polyline
n 373 220 m 366 220 366 233 7 arcto 4 {pop} repeat 366 240 399 240 7 arcto 4 {pop} repeat 406 240 406 227 7 arcto 4 {pop} repeat 406 220 373 220 7 arcto 4 {pop} repeat clp gs 1.00 setgray fill gr
gs col-1 s gr
% Polyline
n 140 220 m 133 220 133 233 7 arcto 4 {pop} repeat 133 240 166 240 7 arcto 4 {pop} repeat 173 240 173 227 7 arcto 4 {pop} repeat 173 220 140 220 7 arcto 4 {pop} repeat clp gs 1.00 setgray fill gr
gs col-1 s gr
% Polyline
n 201 19 m 194 19 194 32 7 arcto 4 {pop} repeat 194 39 227 39 7 arcto 4 {pop} repeat 234 39 234 26 7 arcto 4 {pop} repeat 234 19 201 19 7 arcto 4 {pop} repeat clp gs 1.00 setgray fill gr
gs col-1 s gr
% Polyline
n 198 220 m 191 220 191 233 7 arcto 4 {pop} repeat 191 240 224 240 7 arcto 4 {pop} repeat 231 240 231 227 7 arcto 4 {pop} repeat 231 220 198 220 7 arcto 4 {pop} repeat clp gs 1.00 setgray fill gr
gs col-1 s gr
% Polyline
n 255 220 m 248 220 248 233 7 arcto 4 {pop} repeat 248 240 281 240 7 arcto 4 {pop} repeat 288 240 288 227 7 arcto 4 {pop} repeat 288 220 255 220 7 arcto 4 {pop} repeat clp gs 1.00 setgray fill gr
gs col-1 s gr
% Polyline
n 244 59 m 237 59 237 72 7 arcto 4 {pop} repeat 237 79 270 79 7 arcto 4 {pop} repeat 277 79 277 66 7 arcto 4 {pop} repeat 277 59 244 59 7 arcto 4 {pop} repeat clp gs 1.00 setgray fill gr
gs col-1 s gr
% Polyline
n 245 100 m 238 100 238 113 7 arcto 4 {pop} repeat 238 120 271 120 7 arcto 4 {pop} repeat 278 120 278 107 7 arcto 4 {pop} repeat 278 100 245 100 7 arcto 4 {pop} repeat clp gs 1.00 setgray fill gr
gs col-1 s gr
% Polyline
n 199 259 m 192 259 192 272 7 arcto 4 {pop} repeat 192 279 225 279 7 arcto 4 {pop} repeat 232 279 232 266 7 arcto 4 {pop} repeat 232 259 199 259 7 arcto 4 {pop} repeat clp gs 1.00 setgray fill gr
gs col-1 s gr
% Polyline
n 139 259 m 132 259 132 272 7 arcto 4 {pop} repeat 132 279 165 279 7 arcto 4 {pop} repeat 172 279 172 266 7 arcto 4 {pop} repeat 172 259 139 259 7 arcto 4 {pop} repeat clp gs 1.00 setgray fill gr
gs col-1 s gr
% Polyline
n 313 259 m 306 259 306 272 7 arcto 4 {pop} repeat 306 279 339 279 7 arcto 4 {pop} repeat 346 279 346 266 7 arcto 4 {pop} repeat 346 259 313 259 7 arcto 4 {pop} repeat clp gs 1.00 setgray fill gr
gs col-1 s gr
0.500 setlinewidth
% Polyline
n 325 240 m 325 259 l gs col-1 s gr
n 327.000 251.000 m 325.000 259.000 l 323.000 251.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 210 241 m 210 260 l gs col-1 s gr
n 212.000 252.000 m 210.000 260.000 l 208.000 252.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 341.000 200.000 m 346.000 204.500 l
	346.000 204.500 351.000 209.000 361.000 209.000 DrawSplineSection
	361.000 209.000 371.000 209.000 374.000 214.000 DrawSplineSection
	377.000 219.000 l gs col-1 s gr
n 374.599 211.111 m 377.000 219.000 l 371.169 213.169 l gs 2 setlinejoin col-1 s gr
% Open spline
n 204.000 39.000 m 201.000 43.000 l
	201.000 43.000 198.000 47.000 188.000 47.000 DrawSplineSection
	188.000 47.000 178.000 47.000 174.500 53.000 DrawSplineSection
	171.000 59.000 l gs col-1 s gr
n 176.759 53.098 m 171.000 59.000 l 173.303 51.082 l gs 2 setlinejoin col-1 s gr
% Open spline
n 224.000 39.000 m 227.000 43.000 l
	227.000 43.000 230.000 47.000 240.000 47.000 DrawSplineSection
	240.000 47.000 250.000 47.000 253.500 53.000 DrawSplineSection
	257.000 59.000 l gs col-1 s gr
n 254.697 51.082 m 257.000 59.000 l 251.241 53.098 l gs 2 setlinejoin col-1 s gr
% Open spline
n 247.000 120.000 m 242.500 124.500 l
	242.500 124.500 238.000 129.000 218.500 129.000 DrawSplineSection
	218.500 129.000 199.000 129.000 196.500 134.500 DrawSplineSection
	194.000 140.000 l gs col-1 s gr
n 199.131 133.545 m 194.000 140.000 l 195.490 131.889 l gs 2 setlinejoin col-1 s gr
% Open spline
n 266.000 120.000 m 268.500 127.500 l
	268.500 127.500 271.000 135.000 297.000 151.000 DrawSplineSection
	297.000 151.000 323.000 167.000 324.000 173.500 DrawSplineSection
	325.000 180.000 l gs col-1 s gr
n 325.760 171.789 m 325.000 180.000 l 321.807 172.397 l gs 2 setlinejoin col-1 s gr
% Open spline
n 191.000 161.000 m 187.000 165.500 l
	187.000 165.500 183.000 170.000 171.000 169.500 DrawSplineSection
	171.000 169.500 159.000 169.000 155.500 174.000 DrawSplineSection
	152.000 179.000 l gs col-1 s gr
n 158.226 173.593 m 152.000 179.000 l 154.949 171.299 l gs 2 setlinejoin col-1 s gr
% Open spline
n 223.000 200.000 m 228.000 204.500 l
	228.000 204.500 233.000 209.000 243.000 209.000 DrawSplineSection
	243.000 209.000 253.000 209.000 256.000 214.000 DrawSplineSection
	259.000 219.000 l gs col-1 s gr
n 256.599 211.111 m 259.000 219.000 l 253.169 213.169 l gs 2 setlinejoin col-1 s gr
% Open spline
n 199.000 161.000 m 199.000 165.500 l
	199.000 165.500 199.000 170.000 202.000 170.000 DrawSplineSection
	202.000 170.000 205.000 170.000 207.000 175.000 DrawSplineSection
	209.000 180.000 l gs col-1 s gr
n 207.886 171.829 m 209.000 180.000 l 204.172 173.315 l gs 2 setlinejoin col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
319 193 m 
gs 1 -1 scale (mul) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
191 153 m 
gs 1 -1 scale (add) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
142 232 m 
gs 1 -1 scale (deref) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
202 32 m 
gs 1 -1 scale (assign) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
162 72 m 
gs 1 -1 scale (local) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
204 192 m 
gs 1 -1 scale (mul) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
142 191 m 
gs 1 -1 scale (deref) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
374 233 m 
gs 1 -1 scale (literal) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
316 234 m 
gs 1 -1 scale (deref) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
259 233 m 
gs 1 -1 scale (literal) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
201 232 m 
gs 1 -1 scale (deref) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
382 250 m 
gs 1 -1 scale (4) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
262 250 m 
gs 1 -1 scale (64) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
158 89 m 
gs 1 -1 scale (fp-12) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
246 72 m 
gs 1 -1 scale (deref) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
251 113 m 
gs 1 -1 scale (add) col-1 show gr
/Courier findfont 9.00 scalefont setfont
68 272 m 
gs 1 -1 scale (Adr=local:0) col-1 show gr
/Courier findfont 9.00 scalefont setfont
59 174 m 
gs 1 -1 scale (Reg=deref\(Adr\):2) col-1 show gr
/Courier findfont 9.00 scalefont setfont
59 183 m 
gs 1 -1 scale (Adr=Reg:2) col-1 show gr
/Courier findfont 9.00 scalefont setfont
60 217 m 
gs 1 -1 scale (Reg=deref\(Adr\):1) col-1 show gr
/Courier findfont 9.00 scalefont setfont
59 227 m 
gs 1 -1 scale (Adr=Reg:1) col-1 show gr
/Courier findfont 9.00 scalefont setfont
410 226 m 
gs 1 -1 scale (Reg=Imm:1) col-1 show gr
/Courier findfont 9.00 scalefont setfont
388 217 m 
gs 1 -1 scale (Imm=literal:0) col-1 show gr
/Courier findfont 9.00 scalefont setfont
410 235 m 
gs 1 -1 scale (Con=Imm:0) col-1 show gr
/Courier findfont 9.00 scalefont setfont
87 72 m 
gs 1 -1 scale (Adr=local:0) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
143 272 m 
gs 1 -1 scale (local) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
202 272 m 
gs 1 -1 scale (local) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
202 289 m 
gs 1 -1 scale (fp-4) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
139 289 m 
gs 1 -1 scale (fp+68) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
316 272 m 
gs 1 -1 scale (local) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
316 289 m 
gs 1 -1 scale (fp-8) col-1 show gr
/Courier findfont 9.00 scalefont setfont
92 146 m 
gs 1 -1 scale (Adr=Reg:5) col-1 show gr
/Courier findfont 9.00 scalefont setfont
92 137 m 
gs 1 -1 scale (Reg=add\(Reg,Reg\):5) col-1 show gr
/Courier findfont 9.00 scalefont setfont
220 177 m 
gs 1 -1 scale (Reg=mul\(Reg,Imm\):2) col-1 show gr
/Courier findfont 9.00 scalefont setfont
244 186 m 
gs 1 -1 scale (Adr=Reg:2) col-1 show gr
/Courier findfont 9.00 scalefont setfont
282 110 m 
gs 1 -1 scale (Reg=add\(Reg,Reg\):8) col-1 show gr
/Courier findfont 9.00 scalefont setfont
282 119 m 
gs 1 -1 scale (Adr=Reg:8) col-1 show gr
/Courier findfont 9.00 scalefont setfont
281 66 m 
gs 1 -1 scale (Reg=deref\(add\(Reg,Reg\)\):8) col-1 show gr
/Courier findfont 9.00 scalefont setfont
282 75 m 
gs 1 -1 scale (Adr=Reg:8) col-1 show gr
/Courier findfont 9.00 scalefont setfont
237 32 m 
gs 1 -1 scale (Stmt=assign\(Adr,Reg\):9) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 348 2087 a FN(Figure)k(6.20:)i(co)q(de-tree)g(for)e(arra)o(y)f(access)
j(example,)c(lab)q(elled)i(for)f(sparc)224 2188 y(the)g(applicable)e
(pro)q(ductions,)i(with)f(the)g(minima)o(l)d(cost)k(after)f(the)h
(colon.)k(T)m(o)11 b(sa)o(v)o(e)h(space)224 2238 y(on)j(the)g(diagram,)
d(the)j(no)q(des)g(ha)o(v)o(e)f(b)q(een)i(arranged)e(so)h(that)g(the)g
(pro)q(duction)f(and)h(cost)224 2288 y(lab)q(els)k(apply)f(to)h(all)e
(the)j(no)q(des)f(with)g(the)g(same)f(op)q(erator)h(at)g(the)g(same)f
(lev)o(el.)33 b(F)m(or)224 2338 y(example,)12 b(the)j(three)g(pro)q
(duction)f(and)f(cost)i(lab)q(els)e(at)h(the)g(b)q(ottom)e(left)i
(apply)f(to)g(all)g(of)224 2388 y(the)i(lo)q(cal-name)d(no)q(des)i
FK(fp)e Ft(\006)g FK(o\013set)p FN(.)287 2438 y(In)i(order)g(to)g
(implemen)o(t)d(the)k(reduction)f(tra)o(v)o(ersal,)g(w)o(e)g(require)h
(a)e(recursiv)o(e)j(frame-)224 2488 y(w)o(ork)g(whic)o(h)f(is)g(able)h
(to)f(implemen)o(t)e(the)j(dep)q(enden)o(t)h(no)q(de)f(visit-sequence)h
(demanded)224 2538 y(b)o(y)11 b(the)g(particular)f(pro)q(duction)g
(whic)o(h)h(is)f(selected)i(b)o(y)e(the)i FK(r)n(e)n(quir)n(e)n(d)e
(typ)n(eform)j FN(attribute.)224 2588 y(The)f(\014gure)g(6.21)e
(suggested)i(a)f(kind)g(of)f(in)o(terpreted)j(implemen)o(tation,)8
b(where)k(the)g(recur-)224 2638 y(sion)i(is)h(determined)f(b)o(y)g(pro)
q(duction)h(information)c(a)o(v)n(ailable)i(in)h(a)g(table.)19
b(Ho)o(w)o(ev)o(er,)c(an)224 2688 y(attractiv)o(e)e(alternativ)o(e)g
(is)f(to)h(enco)q(de)h(the)f(visit)f(order)i(for)e(eac)o(h)h(pro)q
(duction)g(in)o(to)f(a)h(sep-)p eop
%%Page: 180 186
180 185 bop 224 274 a FN(180)425 b FL(CHAPTER)14 b(6.)32
b(BOTTOM-UP)15 b(TREE)f(REWRITING)224 390 y FN(arate)i(pro)q(cedure,)h
(and)e(to)g(dispatc)o(h)h(these)g(pro)q(cedures)i(from)13
b(an)i(indexed)h(table.)22 b(The)224 440 y(recursion)17
b(could)e(b)q(e)i(launc)o(hed)e(b)o(y)h(the)g(pro)q(cedure)h(sho)o(wn)f
(in)f(\014gure)h(6.21.)37 b(As)16 b(usual,)p 270 547
1350 2 v 269 593 2 46 v 295 579 a FF(PROCEDURE)g(Reduce\(this)g(:)j
(NodeDesc;)d(form)i(:)h(FormEnum\);)p 1619 593 V 269
639 V 335 625 a(VAR)f(prodOrd)f(:)i(ProdIndex;)p 1619
639 V 269 684 V 295 671 a(BEGIN)p 1619 684 V 269 730
V 335 716 a(prodOrd)d(:=)j(this^.rule)o(s[f)o(or)o(m];)p
1619 730 V 269 776 V 335 762 a(\(*)f FE(now)c(disp)n(atch)d(pr)n(o)n(c)
n(e)n(dur)n(e)i FF(recHelp[pr)o(odO)o(rd)o(])k(*\))p
1619 776 V 269 821 V 335 808 a(recHelp[)o(pro)o(dO)o(rd])o(\(th)o(is)o
(\);)p 1619 821 V 269 867 V 295 853 a(END)i(Reduce;)p
1619 867 V 270 869 1350 2 v 461 985 a FN(Figure)14 b(6.21:)j(implemen)o
(tatio)o(n)11 b(of)j(reduction)g(framew)o(ork)224 1090
y(the)i(w)o(ork)f(is)g(all)f(done)i(in)e(the)i(dispatc)o(hed)g
FK(r)n(e)n(cursion)g(help)n(er)j FN(pro)q(cedures.)24
b(These)16 b(pro-)224 1140 y(cedures)g(enco)q(de)e(the)g(required)g
(visit)e(order,)h(and)g(the)h(user-sp)q(eci\014ed)i(seman)o(tic)c
(actions.)224 1190 y(A)k(t)o(ypical)g(pro)q(cedure,)i(for)d(pro)q
(duction)h(1)g(is)g(sho)o(wn)g(in)f(\014gure)i(6.22.)39
b(This)16 b(reduction)p 270 1297 V 269 1343 2 46 v 295
1329 a FF(PROCEDURE)g(Reduce1\(thi)o(s)g(:)k(NodeDesc\))o(;)p
1619 1343 V 269 1388 V 335 1375 a(VAR)e(leaf1,)f(leaf2)h(:)h(NodeDesc;)
p 1619 1388 V 269 1434 V 295 1420 a(BEGIN)f(\(*)32 b
FE(Pr)n(o)n(d)13 b(1)k FF(Stmt)h(=)i(assign\(A)o(dr,)o(Reg)o(\))c(*\))p
1619 1434 V 269 1480 V 335 1466 a(leaf1)h(:=)i(this^.lOp;)p
1619 1480 V 269 1525 V 335 1512 a(recHelp[)o(lea)o(f1)o(^.r)o(ule)o(s[)
o(Adr)o(]])o(\(le)o(af1)o(\);)p 1619 1525 V 269 1571
V 335 1557 a(leaf2)e(:=)i(this^.rOp;)p 1619 1571 V 269
1617 V 335 1603 a(recHelp[)o(lea)o(f2)o(.ru)o(les)o([R)o(eg])o(]\()o
(lea)o(f2\))o(;)p 1619 1617 V 269 1662 V 335 1649 a(EmitRtoA)o(dr\()o
(sw)o(,le)o(af2)o(^.)o(dst)o(Re)o(g,)p FE(a)o(dr)11 b(fr)n(om)i(left)g
(tr)n(e)n(e)s FF(\);)p 1619 1662 V 269 1708 V 295 1694
a(END)19 b(Reduce1;)p 1619 1708 V 270 1710 1350 2 v 518
1826 a FN(Figure)14 b(6.22:)i(reduction)f(help)q(er)g(for)e(pro)q
(duction)i(1)224 1931 y(help)q(er)g(pro)q(cedure)g(is)e(called)g
(whenev)o(er)i(pro)q(duction)f(1)f(has)h(b)q(een)g(selected.)20
b(In)13 b(order)h(to)224 1981 y(\014nd)e(out)g(whic)o(h)g(help)q(er)h
(pro)q(cedures)h(to)e(call)f(recursiv)o(ely)m(,)i(the)f(state)h(of)e
(the)i(no)q(des)f(whic)o(h)224 2031 y(are)j(the)f(lea)o(v)o(es)g(of)f
(the)i(pattern)g(in)e(pro)q(duction)h(1)g(are)g(examined.)287
2084 y(Pro)q(duction)i(1)h(demands)e(that)i(its)f(left)g(no)q(de)h(b)q
(e)g(in)f(the)h FK(A)n(dr)e FN(form.)24 b(The)17 b(elemen)o(t)224
2134 y FK(rules)s FN([)p FK(A)n(dr)t FN(])10 b(of)h(the)h(left)f(c)o
(hild)f(holds)h(the)h(index)f(of)f(the)i(pro)q(duction)g(whic)o(h)f
(giv)o(es)g(the)g(lo)o(w-)224 2183 y(est)k(cost)e FK(A)n(dr)k
FN(form)12 b(for)h(the)h(left)e(subtree.)20 b(This)13
b(v)n(alue)g(th)o(us)g(determines)h(the)g(reduction)224
2233 y(help)q(er)h(pro)q(cedure)h(to)e(recursiv)o(ely)h(call)e(on)g
(the)i(left)e(c)o(hild.)287 2286 y(Similarl)o(y)m(,)e(pro)q(duction)k
(1)g(demands)f(that)h(its)g(left)f(no)q(de)i(b)q(e)f(in)f(the)i
FK(R)n(e)n(g)f FN(form.)k(The)224 2336 y(elemen)o(t)f
FK(rules)s FN([)p FK(R)n(e)n(g)t FN(])e(of)h(the)i(righ)o(t)e(c)o(hild)
g(holds)h(the)g(index)g(of)f(the)h(pro)q(duction)g(whic)o(h)224
2386 y(giv)o(es)13 b(the)h(lo)o(w)o(est)f(cost)h FK(R)n(e)n(g)j
FN(form)11 b(for)i(the)h(righ)o(t)e(subtree.)20 b(This)13
b(v)n(alue)f(th)o(us)i(determines)224 2435 y(the)h(reduction)g(help)q
(er)f(pro)q(cedure)i(to)e(recursiv)o(ely)h(call)e(on)g(the)i(righ)o(t)e
(c)o(hild.)287 2488 y(After)18 b(the)h(recursion)h(returns,)g(an)e
(appropriate)g(store)h(w)o(ord)f FK(V)l(AL)g FN(instruction)g(is)224
2538 y(emitted)12 b(in)o(to)g(the)h(co)q(de)g(bu\013er.)19
b(Notice)12 b(that)h(the)g(parameters)f(to)g(the)h(call)f(whic)o(h)g
(emits)224 2588 y(the)19 b FK(V)l(AL)e FN(dep)q(end)j(on)d(syn)o
(thesized)j(attributes)f(suc)o(h)g(as)f(the)g(register)h(ordinal)e(of)h
(the)224 2638 y(righ)o(t-hand)12 b(expression.)19 b(Because)14
b(the)f(seman)o(tic)e(action)h(is)g(placed)g FK(after)k
FN(the)d(recursion)224 2688 y(returns,)i(the)g(pro)q(cedure)h(can)e
(access)h(these)h(v)n(alues)d(in)h(the)g(decendan)o(t)h(no)q(des.)p
eop
%%Page: 181 187
181 186 bop 224 274 a FL(6.3.)31 b(IMPLEMENTING)15 b(BOTTOM-UP)g
(REWRITING)390 b FN(181)287 390 y(A)15 b(more)e(complex)h(case)i
(arises)f(with)g(pro)q(duction)g(2,)f(whic)o(h)h(has)g(a)g(nested)h
(pattern.)224 440 y(The)g(reduction)g(help)q(er)g(for)f(this)h(pro)q
(duction)f(is)g(sho)o(wn)g(in)g(\014gure)h(6.23.)36 b(In)15
b(this)h(case,)p 270 549 1350 2 v 269 594 2 46 v 295
580 a FF(PROCEDURE)g(Reduce2\(thi)o(s)g(:)k(NodeDesc\))o(;)p
1619 594 V 269 640 V 335 626 a(VAR)e(leaf1,)f(leaf2,)h(leaf3)f(:)i
(NodeDesc;)p 1619 640 V 269 686 V 295 672 a(BEGIN)f(\(*)32
b FE(Pr)n(o)n(d)13 b(2)k FF(Stmt)h(=)i(assign\(a)o(dd\()o(Reg)o(,R)o
(eg\))o(,R)o(eg\))c(*\))p 1619 686 V 269 731 V 335 717
a(leaf1)h(:=)i(this^.lOp^)o(.l)o(Op;)p 1619 731 V 269
777 V 335 763 a(recHelp[)o(lea)o(f1)o(^.r)o(ule)o(s[)o(Reg)o(]])o(\(le)
o(af1)o(\);)p 1619 777 V 269 822 V 335 809 a(leaf2)e(:=)i(this^.lOp^)o
(.r)o(Op;)p 1619 822 V 269 868 V 335 854 a(recHelp[)o(lea)o(f2)o(^.r)o
(ule)o(s[)o(Reg)o(]])o(\(le)o(af2)o(\);)p 1619 868 V
269 914 V 335 900 a(leaf3)e(:=)i(this^.rOp;)p 1619 914
V 269 959 V 335 946 a(recHelp[)o(lea)o(f3)o(^.r)o(ule)o(s[)o(Reg)o(]])o
(\(le)o(af3)o(\);)p 1619 959 V 269 1005 V 335 991 a(EmitRtoA)o(2r\()o
(sw)o(,le)o(af3)o(^.)o(dst)o(Re)o(g,)p 1619 1005 V 269
1051 V 609 1037 a(leaf1^.dst)o(Re)o(g,)d(leaf2^.dst)o(Reg)o(\);)p
1619 1051 V 269 1096 V 295 1083 a(END)j(Reduce2;)p 1619
1096 V 270 1098 1350 2 v 518 1214 a FN(Figure)14 b(6.23:)i(reduction)f
(help)q(er)g(for)e(pro)q(duction)i(2)224 1321 y(the)g(matc)o(hed)f
(pattern)h(has)g FK(thr)n(e)n(e)i FN(leaf)d(no)q(des,)g(so)h(that)f(w)o
(e)h(recurse)i(three)e(times.)k(First)224 1371 y(the)13
b FK(left-left)g FN(grandc)o(hild)e(no)q(de,)h(then)g(the)g
FK(left-right)i FN(grandc)o(hild)d(no)q(de,)h(then)g(\014nally)f(the)
224 1421 y FK(right)19 b FN(c)o(hild.)k(As)17 b(in)e(the)h(simpler)f
(case,)i(the)f(reduction)g(help)q(er)h(is)f(c)o(hosen)g(b)o(y)g
(indexing)224 1470 y(in)o(to)11 b(an)g(arra)o(y)g(of)g(pro)q(cedure)i
(v)n(ariables,)e(using)g(the)h(pro)q(duction)g(index)f(held)h(in)f(the)
h(rules)224 1520 y(arra)o(y)i(of)f(the)i(pattern-leaf)f(no)q(des.)287
1574 y(In)j(this)h(case,)g(the)g(seman)o(tic)f(action)g(dep)q(osits)h
(a)g FK(V)l(AL)e(stor)n(e)i(wor)n(d)j FN(\\)p FG(sw)p
FN(")c(instruc-)224 1623 y(tion)e(in)h(the)g(bu\013er)g(with)g(an)f
(address)i(sp)q(eci\014ed)g(in)e(the)h FG(A2r)f FN(\()p
FK(addr)n(ess)i(with)f(two)g(index)224 1673 y(r)n(e)n(gisters)s
FN(\))d(form.)287 1727 y(Some)j(pro)q(ductions)j(do)e(not)h(cause)h
(the)f(emission)f(of)g(an)o(y)g(instructions.)31 b(Instead,)224
1776 y(suc)o(h)13 b(instructions)g(compute)f(syn)o(thesized)i
(attributes)f(whic)o(h)f(ma)o(y)f(b)q(e)i(used)g(b)o(y)f(pro)q(duc-)224
1826 y(tions)i(further)h(up)f(the)g(tree.)19 b(Man)o(y)14
b(pro)q(ductions)g(emit)e(instructions,)j(but)f(also)f(need)h(to)224
1876 y(compute)i(some)e(attributes)j(for)e(other)i(pro)q(ductions.)24
b(F)m(or)15 b(example,)f(in)i(order)g(to)g(emit)224 1926
y FK(V)l(AL)p FN(,)11 b(ev)o(ery)i(pro)q(duction)f(whic)o(h)g(has)g(a)f
(left-hand)h(side)g(in)g(the)g FK(R)n(e)n(g)k FN(form)10
b(will)g(allo)q(cate)i(a)224 1976 y(virtual)g(register)h(as)f(a)g
(destination)g(register,)h(and)g(will)d(en)o(ter)k(this)e(attribute)h
(in)e(a)h FK(dstR)n(e)n(g)224 2025 y FN(\014eld.)287
2079 y(As)h(a)g(\014nal)f(reminder)h(of)f(the)i(e\013ect)g(of)e(c)o
(hain-rules,)h(consider)h(the)g(reduction)f(help)q(er)224
2129 y(pro)q(cedure)19 b(for)d(the)h(c)o(hain-rule)g(pro)q(duction)f
(15,)h(sho)o(wn)f(in)g(\014gure)h(6.24.)42 b(The)17 b(ob)r(ject)224
2178 y(of)e(this)g(reduction)h(is)f(to)f(create)j(an)e(address)h(v)n
(alue)e(out)h(of)g(a)f(register)j(form.)i(Th)o(us)d(the)224
2228 y(pro)q(cedure)k(revisits)f(the)f(same)f(no)q(de)i(to)e(in)o(v)o
(ok)o(e)g(the)i(reduction)f(whic)o(h)g(pro)q(duces)i(the)224
2278 y(register)15 b(v)n(alue.)i(This)c(reduction)h(will)d(allo)q(cate)
i(a)g(destination)g(register,)h(and)f(emit)e(co)q(de)224
2328 y(to)17 b(compute)f(the)i(v)n(alue)e(in)o(to)g(the)i(register.)28
b(The)17 b(seman)o(tic)f(action)h(of)f(pro)q(duction)h(15)224
2378 y(tak)o(es)f(the)f(destination)f(register)i(from)d(the)i
(recursion,)h(and)f(creates)h(an)e(address)i(in)f(the)224
2428 y(\(name,)e(index-register,)h(o\013set\))h(form.)224
2554 y FO(Automatic)f(pro)q(duction)f(of)j(reducers)224
2638 y FN(The)c(actions)f(whic)o(h)g(are)g(p)q(erformed)g(during)g(the)
g(reduction)h(tra)o(v)o(ersal)f(of)g(a)g(lab)q(elled)f(tree)224
2688 y(are)j(dep)q(enden)o(t)g(on)f(the)h(purp)q(ose)g(of)e(the)i
(rewriting.)k(In)12 b(the)g(case)h(considered)h(in)d(the)i(last)p
eop
%%Page: 182 188
182 187 bop 224 274 a FN(182)425 b FL(CHAPTER)14 b(6.)32
b(BOTTOM-UP)15 b(TREE)f(REWRITING)p 270 392 1350 2 v
269 438 2 46 v 295 424 a FF(PROCEDURE)i(Reduce15\(th)o(is)g(:)j
(NodeDesc\);)p 1619 438 V 269 483 V 335 470 a(VAR)f(leaf1)g(:)h
(NodeDesc;)p 1619 483 V 269 529 V 295 515 a(BEGIN)f(\(*)32
b FE(Pr)n(o)n(d)13 b(15)k FF(Adr)h(=)i(Reg)e(*\))p 1619
529 V 269 575 V 335 561 a(leaf1)f(:=)i(this;)p 1619 575
V 269 620 V 335 607 a(recHelp[)o(lea)o(f1)o(^.r)o(ule)o(s[)o(Reg)o(]])o
(\(le)o(af1)o(\);)d(\(*)c FE(r)n(evisit)g(same)h(no)n(de!)20
b FF(*\))p 1619 620 V 269 666 V 335 652 a(this^.ad)o(rNa)o(m)c(:=)j
(noName;)p 1619 666 V 269 712 V 335 698 a(this^.ad)o(rRe)o(g)d(:=)j
(this^.dstR)o(eg;)p 1619 712 V 269 757 V 335 744 a(this^.ad)o(rOf)o(f)d
(:=)j(0;)p 1619 757 V 269 803 V 295 789 a(END)g(Reduce15;)p
1619 803 V 270 805 1350 2 v 507 921 a FN(Figure)14 b(6.24:)j(reduction)
e(help)q(er)f(for)g(pro)q(duction)g(15)224 1055 y(section)e(this)g(w)o
(as)f(the)h(emission)e(of)h(calls)f(to)i(pro)q(cedures)h(whic)o(h)e
(place)h FK(V)l(AL)f FN(instructions)224 1104 y(in)j(a)f(bu\013er.)287
1155 y(The)20 b(recursion)h(pattern)g(of)e(the)i(help)q(er)f(pro)q
(cedures)j(ma)o(y)18 b(b)q(e)i(deriv)o(ed)h(from)d(the)224
1205 y(form)f(of)g(the)i(pro)q(duction)f(righ)o(t-hand-sides,)g(so)g
(at)g(least)h(part)f(of)f(the)i(co)q(de)f(of)g(these)224
1254 y(pro)q(cedures)h(ma)o(y)14 b(b)q(e)j(automatically)c(pro)q
(duced.)26 b(An)o(y)16 b(seman)o(tic)f(actions)h(required)h(as)224
1304 y(part)f(of)f(the)h(recursion)g(m)o(ust)f(either)h(b)q(e)g(sp)q
(eci\014ed)h(as)e(an)h(extension)g(to)f(the)h(grammar,)224
1354 y(or)e(editted)h(b)o(y)f(hand)f(in)o(to)h(the)g(automatically)d
(pro)q(duced)k(templates.)287 1404 y(The)h(general)f(rule)h(for)g(the)g
(creation)g(of)f(the)h(recursion)g(help)q(er)h(is)e(straigh)o(tforw)o
(ard.)224 1454 y(F)m(or)c(the)h(selected)h(pro)q(duction,)e(the)h(dep)q
(enden)o(t)h(no)q(des)f(whic)o(h)f(m)o(ust)f(b)q(e)i(visited,)f(and)g
(the)224 1504 y(t)o(yp)q(eform)g(parameter)h(whic)o(h)g(they)h(inherit)
f(is)h(en)o(tirely)f(determined)g(b)o(y)g(the)h(pro)q(duction)224
1554 y(righ)o(t-hand-side.)287 1604 y(Unary)e(pro)q(ductions)g(visit)f
(the)i(left)e(c)o(hild)g(\\)p FG(this^.lOp)p FN(",)f(while)h(binary)h
(pro)q(ductions)224 1654 y(\014rst)17 b(visit)e(the)i(left)e(c)o(hild)h
(\\)p FG(this^.lOp)p FN(")d(then)j(the)h(righ)o(t)e(c)o(hild)h(\\)p
FG(this^.rOp)p FN(".)21 b(Chain)224 1704 y(pro)q(ductions)15
b(revisit)f(the)g(same)f(no)q(de)i(\\)p FG(this)p FN(".)287
1754 y(T)m(aking)f(in)o(to)g(accoun)o(t)i(the)g(p)q(ossibilit)o(y)e(of)
h(non-lo)q(cal)f(patterns)j(is)e(also)g(straigh)o(tfor-)224
1804 y(w)o(ard.)j(F)m(or)c(example,)e(the)i(pro)q(duction)h(|)677
1897 y FK(R)n(e)n(g)g FN(=)d FG(add\()p FK(R)n(e)n(g)t
FN(,)p FG(deref\()p FK(A)n(dr)t FG(\)\))224 1989 y FN(has)e(the)h
(visit)e(order)i(|)e(\\)p FG(this^.lOp)p FN(")f(with)h(the)i(pro)q
(duction)f(selected)h(b)o(y)f(the)h FK(R)n(e)n(g)i FN(index)224
2039 y(in)g(the)g(rules)g(arra)o(y)m(,)f(follo)o(w)o(ed)f(b)o(y)i(a)f
(visit)g(to)h(\\)p FG(this^.rOp^.lOp)p FN(")c(with)k(the)g(pro)q
(duction)224 2089 y(selected)j(b)o(y)e(the)g FK(A)n(dr)k
FN(index)c(in)f(the)i(rules)f(arra)o(y)m(.)287 2139 y(It)e(is)g(usual)g
(that)h(the)g(seman)o(tic)e(actions)i(of)e(the)i(reductions)h(dep)q
(end)g(on)e(syn)o(thesized)224 2189 y(attributes)18 b(from)d(further)j
(do)o(wn)e(the)h(tree.)28 b(Th)o(us)17 b(it)g(is)f(normal)f(to)h
(recurse)j(do)o(wn)e(the)224 2239 y(tree)k(passing)e(the)h(inherited)g
(t)o(yp)q(eform)e(attribute)i FK(b)n(efor)n(e)h FN(p)q(erforming)d(the)
i(seman)o(tic)224 2288 y(action)h(on)f(the)h(no)q(de)h(itself.)38
b(It)20 b(is)h(p)q(ossible)g(to)f(c)o(ho)q(ose)i(a)e(syn)o(tax)h(for)f
(the)h(reducer)224 2338 y(sp)q(eci\014cation)14 b(whic)o(h)f(allo)o(ws)
e(b)q(oth)i FK(pr)n(e-r)n(e)n(cursion)g(actions)k FN(and)c
FK(p)n(ost-r)n(e)n(cursion)g(actions)224 2388 y FN(to)h(b)q(e)h(sp)q
(eci\014ed.)287 2438 y(There)f(are)g(circumstances)g(for)f(whic)o(h)g
(the)h(order)g(of)f(emission)f(of)h(co)q(de)h(for)f(the)h(sub-)224
2488 y(trees)19 b(of)e(a)g(no)q(de)h(needs)g(to)g(b)q(e)g(con)o
(trolled)f(b)o(y)g(attributes)h(other)g(than)f(the)h(t)o(yp)q(eform.)
224 2538 y(F)m(or)13 b(example,)e(the)i(order)g(of)f(co)q(de)i
(emission)d(whic)o(h)h(uses)i(the)f(least)g(n)o(um)o(b)q(er)f(of)g(ph)o
(ysical)224 2588 y(registers)k(relies)e(on)f(the)h(computation)e(of)h
(the)i FK(Sethi)g(numb)n(er)j FN(attributes,)c(as)g(explained)224
2638 y(in)c(section)g(7.1.5.)15 b(These)c(n)o(um)o(b)q(ers)e(are)h(syn)
o(thesized)h(attributes,)g(and)e(cannot)h(b)q(e)g(exactly)224
2688 y(calculated)16 b(un)o(til)e(after)i(the)f(reduction)h(tra)o(v)o
(ersal)g(has)f(b)q(een)h(p)q(erformed.)22 b(In)15 b(this)h(case,)p
eop
%%Page: 183 189
183 188 bop 224 274 a FL(6.4.)31 b(PUTTING)14 b(IT)g(ALL)g(TOGETHER)671
b FN(183)224 390 y(it)17 b(is)f(probably)g(easiest)i(to)e(use)i(the)f
(seman)o(tic)f(actions)h(of)f(the)h(reduction)g(to)g(compute)224
440 y(the)e(Sethi)f(n)o(um)o(b)q(ers,)f(and)h(p)q(erform)f(a)g
(separate)j(pass)e(to)g(emit)e(the)j(co)q(de.)224 586
y FI(6.4)67 b(Putting)23 b(it)h(all)f(together)224 680
y FN(Bottom)17 b(up)i(tree)g(rewriters)h(can)f(w)o(ork)f(b)o(y)g
(directly)g(tra)o(v)o(ersing)h(a)f(co)q(de-tree)i(created)224
730 y(from)11 b(an)h(abstract)i(syn)o(tax)e(tree,)i(or)e(they)h(ma)o(y)
e(tra)o(v)o(erse)j(a)e(tree)i(whic)o(h)e(is)g(reconstructed)224
780 y(from)h(an)g(in)o(termediate)g(form)f(suc)o(h)j(as)f
FK(DCo)n(de)s FN(.)287 831 y(In)k(terms)f(of)h(e\016ciency)m(,)g(it)g
(is)g(p)q(ossibly)f(preferable)i(to)f(tra)o(v)o(erse)h(a)f(tree)h(pro)q
(duced)224 881 y(b)o(y)c(a)f(compiler)f(fron)o(tend,)h(and)h(tak)o(e)f
(the)h(opp)q(ortunit)o(y)f(to)h(do)f(without)g(a)g(con)o(v)o(en)o
(tional)224 931 y(in)o(termediate)20 b(represen)o(tation.)38
b(This)20 b(is)g(the)h(structure)h(whic)o(h)e(is)g(hin)o(ted)g(at)g(in)
g(the)224 981 y(mo)q(di\014ed)13 b(arc)o(hitecture)j(on)d(page)h(161.)
224 1106 y FH(6.4.1)56 b(T)-5 b(ra)n(v)n(ersing)19 b(co)r(de-trees)224
1185 y FN(If)g(a)f(tree)i(rewriter)g(tra)o(v)o(erses)h(the)e(tree)h
(pro)q(duced)g(b)o(y)f(the)g(compiler)f(fron)o(tend,)i(then)224
1235 y(the)e(fron)o(tend)f(m)o(ust)f(transform)f(the)i
FK(AST)23 b FN(in)o(to)16 b(a)g FK(c)n(o)n(de-tr)n(e)n(e)j
FN(either)f(as)f(part)g(of)f(static)224 1285 y(seman)o(tic)d
(attribution,)g(or)h(follo)o(wing)d(attribution.)287
1336 y(Consider)k(the)g(three)h(trees)g(in)e(\014gure)h(6.25.)k(In)c
(this)g(\014gure)g(the)g(leftmost)e(tree)j(is)f(an)278
1398 y
 21050163 10196172 0 0 21050163 10196172 startTexFig
 278 1398 a
%%BeginDocument: trees.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-65.0 164.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Ellipse
n 339 39 14 14 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 359 79 14 14 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 359 119 14 14 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 339 159 14 14 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 379 159 14 14 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 290 92 14 14 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 106 36 14 14 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 86 76 14 14 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 126 76 14 14 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 196 36 14 14 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 176 76 14 14 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 216 76 14 14 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 216 116 14 14 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 196 156 14 14 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 236 156 14 14 0 360 DrawEllipse gs col-1 s gr
0.500 setlinewidth
% Polyline
n 280 49 m 273 49 273 58 7 arcto 4 {pop} repeat 273 65 298 65 7 arcto 4 {pop} repeat 305 65 305 56 7 arcto 4 {pop} repeat 305 49 280 49 7 arcto 4 {pop} repeat clp gs col-1 s gr
	1 setlinecap [1 3.000000] 3.000000 setdash
% Polyline
n 334 52 m 300 82 l gs col-1 s gr
	[] 0 setdash 0 setlinecap
	1 setlinecap [1 3.000000] 3.000000 setdash
% Polyline
n 345 52 m 355 66 l gs col-1 s gr
	[] 0 setdash 0 setlinecap
	1 setlinecap [1 3.000000] 3.000000 setdash
% Polyline
n 359 93 m 359 106 l gs col-1 s gr
	[] 0 setdash 0 setlinecap
	1 setlinecap [1 3.000000] 3.000000 setdash
% Polyline
n 355 132 m 347 147 l gs col-1 s gr
	[] 0 setdash 0 setlinecap
	1 setlinecap [1 3.000000] 3.000000 setdash
% Polyline
n 366 133 m 373 146 l gs col-1 s gr
	[] 0 setdash 0 setlinecap
% Polyline
n 340 54 m 340 146 l gs col-1 s gr
n 342.000 138.000 m 340.000 146.000 l 338.000 138.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 99 49 m 91 64 l gs col-1 s gr
n 96.529 57.882 m 91.000 64.000 l 93.000 56.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 112 49 m 120 63 l gs col-1 s gr
n 117.767 55.062 m 120.000 63.000 l 114.294 57.046 l gs 2 setlinejoin col-1 s gr
% Polyline
n 189 49 m 181 64 l gs col-1 s gr
n 186.529 57.882 m 181.000 64.000 l 183.000 56.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 203 49 m 210 63 l gs col-1 s gr
n 208.211 54.950 m 210.000 63.000 l 204.633 56.739 l gs 2 setlinejoin col-1 s gr
% Polyline
n 216 90 m 216 102 l gs col-1 s gr
n 218.000 94.000 m 216.000 102.000 l 214.000 94.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 209 129 m 202 144 l gs col-1 s gr
n 207.195 137.596 m 202.000 144.000 l 203.571 135.905 l gs 2 setlinejoin col-1 s gr
% Polyline
n 224 129 m 231 143 l gs col-1 s gr
n 229.211 134.950 m 231.000 143.000 l 225.633 136.739 l gs 2 setlinejoin col-1 s gr
% Open spline
n 333.000 52.000 m 330.000 54.500 l
	330.000 54.500 327.000 57.000 324.000 57.500 DrawSplineSection
	324.000 57.500 321.000 58.000 317.500 53.500 DrawSplineSection
	317.500 53.500 314.000 49.000 313.000 43.500 DrawSplineSection
	313.000 43.500 312.000 38.000 308.500 35.000 DrawSplineSection
	308.500 35.000 305.000 32.000 299.500 32.000 DrawSplineSection
	299.500 32.000 294.000 32.000 292.000 34.000 DrawSplineSection
	292.000 34.000 290.000 36.000 290.000 42.500 DrawSplineSection
	290.000 49.000 l gs col-1 s gr
n 292.000 41.000 m 290.000 49.000 l 288.000 41.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 290.000 66.000 m 290.000 72.500 l
	290.000 79.000 l gs col-1 s gr
n 292.000 71.000 m 290.000 79.000 l 288.000 71.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 348.000 51.000 m 351.500 54.000 l
	351.500 54.000 355.000 57.000 362.000 57.000 DrawSplineSection
	362.000 57.000 369.000 57.000 374.000 61.500 DrawSplineSection
	374.000 61.500 379.000 66.000 379.000 105.500 DrawSplineSection
	379.000 145.000 l gs col-1 s gr
n 381.000 137.000 m 379.000 145.000 l 377.000 137.000 l gs 2 setlinejoin col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
333 42 m 
gs 1 -1 scale (sub) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
349 82 m 
gs 1 -1 scale (deref) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
352 122 m 
gs 1 -1 scale (add) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
333 162 m 
gs 1 -1 scale (reg) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
374 162 m 
gs 1 -1 scale (lit) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
286 95 m 
gs 1 -1 scale (lit) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
334 182 m 
gs 1 -1 scale (fp) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
375 182 m 
gs 1 -1 scale (-8) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
280 60 m 
gs 1 -1 scale (load) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
284 116 m 
gs 1 -1 scale (10) col-1 show gr
/Courier-Bold findfont 10.00 scalefont setfont
239 46 m 
gs 1 -1 scale (li 10,r1) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
82 80 m 
gs 1 -1 scale (id) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
122 80 m 
gs 1 -1 scale (id) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
83 100 m 
gs 1 -1 scale (a) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
124 101 m 
gs 1 -1 scale (b) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
103 38 m 
gs 1 -1 scale (-) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
206 79 m 
gs 1 -1 scale (deref) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
191 180 m 
gs 1 -1 scale (fp) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
232 180 m 
gs 1 -1 scale (-8) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
170 79 m 
gs 1 -1 scale (lit) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
231 158 m 
gs 1 -1 scale (lit) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
189 158 m 
gs 1 -1 scale (reg) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
209 119 m 
gs 1 -1 scale (add) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
190 39 m 
gs 1 -1 scale (sub) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
170 100 m 
gs 1 -1 scale (10) col-1 show gr
/Courier-Bold findfont 10.00 scalefont setfont
331 22 m 
gs 1 -1 scale (sub r1,\(fp-8\),r2) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 398 2135 a FN(Figure)f(6.25:)j(abstract)d(syn)o(tax)g(tree,)h(co)q
(de-tree,)g(instruction)g(tree)224 2238 y(abstract)f(syn)o(tax)f(tree)h
(arising)e(from)g(a)g(source)j(language)d(expression)i(suc)o(h)f(as)g
(\\)p FG(\(a-b\))p FN(".)224 2287 y(In)h(the)g(middle,)d(is)j(the)g
(result)g(of)f(static)h(analysis.)j(The)d(names)f(ha)o(v)o(e)h(b)q(een)
g(b)q(ound,)f(and)224 2337 y(it)g(has)f(b)q(een)i(disco)o(v)o(ered)f
(that)g(the)g(name)e FM(a)i FN(denotes)h(a)e(constan)o(t)h(of)f(v)n
(alue)g(10,)g(while)g(the)224 2387 y(name)i FM(b)g FN(denotes)i(a)e(lo)
q(cal)g(v)n(ariable)f(at)h(an)h(o\013set)g({8)f(from)f(the)i(frame-p)q
(oin)o(ter)e FM(f)t(p)p FN(.)21 b(The)224 2437 y(middle)12
b(tree)i(is)g(the)f(co)q(de-tree)j(whic)o(h)d(expresses)j(the)e(actual)
f(computation)e(required)j(to)224 2487 y(ev)n(aluate)g(the)g
(expression.)287 2538 y(The)21 b(tree)h(at)e(the)h(righ)o(t)f(sho)o(ws)
h(a)g(co)o(v)o(ering)f(whic)o(h)h(implem)o(en)o(ts)e(the)i(expression)
224 2588 y(ev)n(aluation)16 b(for)h(a)f FK(CISC)6 b FN(-st)o(yle)17
b(mac)o(hine)f(whic)o(h)h(can)g(tak)o(e)g(one)h(of)e(its)h(op)q(erands)
h(from)224 2638 y(memory)m(,)c(and)i(has)h(an)f(indexed)h(address)g(mo)
q(de.)25 b(Note)16 b(that)h(in)f(the)h(rewriting)f(of)g(the)224
2688 y(tree)c(an)f(extra)g(no)q(de)g(hase)g(b)q(een)h(in)o(tro)q(duced)
f(to)g(signify)e(the)j(loading)d(of)h(the)h(literal)f(in)o(to)g(a)p
eop
%%Page: 184 190
184 189 bop 224 274 a FN(184)425 b FL(CHAPTER)14 b(6.)32
b(BOTTOM-UP)15 b(TREE)f(REWRITING)224 390 y FN(register,)h(using)e(the)
h FK(lo)n(ad)h(imme)n(diate)s FN(,)e(\\)p FG(li)p FN(")g(instruction.)
18 b(All)13 b(four)g(no)q(des)h(in)g(the)g(righ)o(t)224
440 y(subtree)21 b(ha)o(v)o(e)e(b)q(een)g(subsumed)g(in)o(to)f(the)i
(address)g(mo)q(des)e(of)g(the)i(other)f(instruction)224
490 y(whic)o(h)c(subtracts)i(the)e(v)n(alue)g(in)f(memory)m(,)e(at)j
(lo)q(cation)f(\()p FK(fp{8)6 b FN(\),)15 b(from)e(the)j(v)n(alue)e(in)
h(the)224 540 y(register)g FG(r1)p FN(.)j(The)c(result)h(is)f(placed)g
(in)f(the)i(register)g FG(r2)p FN(.)1142 525 y Fz(4)287
590 y FN(The)e(c)o(hief)g(argumen)o(t)e(in)i(fa)o(v)o(or)f(of)g(a)g
(concrete)j(in)o(termediate)d(form)f(is)i(that)g(the)g(form)224
640 y(partitions)j(the)h(design)g(of)f(fron)o(tend)h(and)f(bac)o(k)o
(end,)h(so)f(that)h(the)g(\014rst)g(ma)o(y)e(b)q(e)i(target)224
689 y(indep)q(enden)o(t,)d(while)f(the)h(latter)f(ma)o(y)e(b)q(e)i
(language)f(indep)q(enden)o(t.)20 b(In)13 b(the)g(case)h(of)e(co)q(de)
224 739 y(selection)k(b)o(y)e(b)q(ottom-up)f(tree-rewriting)j(of)e(a)g
(co)q(de-tree,)i(the)g(tree)f(itself)g(is)f(the)h(in)o(ter-)224
789 y(mediate)d(form.)k(If)c(the)h(same)f(tree)i(rewriter)g(sp)q
(eci\014cation)g(is)e(to)h(b)q(e)g(reused)h(for)f(m)o(ultiple)224
839 y(languages,)i(then)h(sp)q(ecial)g(care)g(m)o(ust)f(b)q(e)h(tak)o
(en)f(to)h(ensure)h(that)e(the)h(co)q(de-trees)i(mak)o(e)224
889 y(explicit)f(all)f(of)h(the)h(details)f(of)g(the)h(language)e
(seman)o(tics.)28 b(As)18 b(an)f(example,)f(consider)224
938 y(the)f FK(MOD)i FN(op)q(eration)d(in)f(the)h(t)o(w)o(o)f(related)h
(languages)f FK(Mo)n(dula-2)20 b FN(and)14 b FK(Mo)n(dula-3)6
b FN(.)18 b(The)224 988 y(seman)o(tics)d(of)f(the)i(op)q(eration)f(in)g
(the)g(t)o(w)o(o)g(languages)f(are)i FK(almost)j FN(iden)o(tical.)h
(Unfortu-)224 1038 y(nately)m(,)11 b(in)g(the)h(earlier)g(language)e
(an)h(exception)i(m)o(ust)d(b)q(e)i(raised)g(if)f(the)h(righ)o(t)f(op)q
(erand)g(is)224 1088 y(less)j(than)f(zero.)19 b(In)12
b(the)i(later)f(language,)f(the)h(result)h(is)f(de\014ned)h(for)e(all)g
(non-zero)i(v)n(alues)224 1138 y(of)g(the)g(divisor.)k(In)13
b FK(DCo)n(de)18 b FN(the)c(expression)h(\\)p FG(a)22
b(MOD)f(b)p FN(")13 b(has)h(the)h(translations)e(|)388
1217 y FK(Mo)n(dula-2)592 b(Mo)n(dula-3)388 1317 y FG(pshAdr)21
b(_a)562 b(pshAdr)21 b(_a)388 1366 y(derefW)627 b(derefW)388
1416 y(pshAdr)21 b(_b)562 b(pshAdr)21 b(_b)388 1466 y(derefW)627
b(derefW)388 1516 y(dup1)671 b(mod)21 b(intOver)388 1566
y(test)g(_modTrap,1,214748364)o(7)388 1616 y(mod)h(intOver)287
1696 y FN(In)11 b(the)h(case)g(of)f(a)g(common)d(in)o(termediate)j
(form,)e(the)j(t)o(w)o(o)f(separate)i(tree-w)o(alk)o(ers)f(are)224
1746 y(part)i(of)g(separate)h(fron)o(tends,)f(and)g(eac)o(h)g
(understands)i(the)e(seman)o(tics)f(of)h(the)g(language)224
1795 y(for)c(whic)o(h)h(it)f(emits)f FK(DCo)n(de)s FN(.)18
b(Ho)o(w)o(ev)o(er,)11 b(if)e(the)i FK(same)j FN(tree-rewriter)f(is)d
(to)g(b)q(e)h(used)h(for)e(the)224 1845 y(t)o(w)o(o)k(languages,)e
(then)i(the)h(necessit)o(y)g(for)e(the)h(test-and-trap)h(m)o(ust)d
(already)i(b)q(e)g(explicit)224 1895 y(in)g(the)g(co)q(de-tree.)287
1945 y(Note)d(that)f(if)g(a)g(rewriter)i(is)e(only)g(to)g(b)q(e)h(used)
h(on)e(a)g(single)h(language,)e(then)j(kno)o(wledge)224
1995 y(as)20 b(to)f(whether)i FK(MOD)i FN(needs)e(a)e(test)h(or)g(not)f
(can)g(b)q(e)h(easily)f(incorp)q(orated)h(in)o(to)f(the)224
2044 y(seman)o(tic)c(actions)g(of)g(the)h(rewriter.)24
b(Suc)o(h)16 b(a)f(c)o(hoice)h(w)o(ould)e(certainly)i(mak)o(e)d(the)j
FK(AST)224 2094 y FN(to)e(co)q(de-tree)i(transformation)11
b(m)o(uc)o(h)i(simpler.)j(Ho)o(w)o(ev)o(er,)e(in)f(suc)o(h)i(a)e(case)i
(the)f(rewriter)224 2144 y(w)o(ould)19 b(not)f(b)q(e)i(correct)h(for)d
(other)i(languages,)f(and)g(the)g(sp)q(eci\014cation)h(could)f(not)g(b)
q(e)224 2194 y(reused.)224 2310 y FH(6.4.2)56 b(T)-5
b(ra)n(v)n(ersing)19 b(reconstructed)e(trees)224 2387
y FN(Although)12 b(it)f(ma)o(yb)q(e)g(somewhat)g(less)h(e\016cien)o(t)h
(to)f(do)f(so,)h(it)g(is)f(en)o(tirely)h(p)q(ossible)h(to)e(con-)224
2436 y(struct)17 b(co)q(de-trees)h(from)13 b(a)i(stac)o(k-based)h(in)o
(termediate)f(form.)20 b(The)c(in)o(terface)g(b)q(et)o(w)o(een)224
2486 y(the)h FK(AST)k FN(tree-w)o(alk)o(er)c(and)f(the)h
FK(c)n(o)n(de-tr)n(e)n(e)h FN(constructor)g(migh)o(t)c(b)q(e)i(either)h
(textual,)f(or)224 2536 y(pro)q(cedural,)f(as)f(sho)o(wn)f(in)h
(\014gure)g(4.1)f(on)h(page)g(92.)p 224 2570 577 2 v
271 2597 a Fy(4)288 2609 y Fx(Of)i(course,)f(the)g(rewritten)f(tree)h
(on)g(the)g(righ)o(t)f(is)i(usually)e(not)g(ph)o(ysically)f(created.)26
b(The)16 b(solid)224 2648 y(edges)10 b(in)h(this)f(tree)g(denote)f(the)
h(virtual)g(tree)g(whic)o(h)g(corresp)q(onds)e(to)j(the)f(visit)g
(order)f(in)i(the)f(reduction)224 2688 y(tra)o(v)o(ersal.)p
eop
%%Page: 185 191
185 190 bop 224 274 a FL(6.5.)31 b(SUMMAR)m(Y)1062 b
FN(185)287 390 y(Co)q(de)20 b(trees)j(are)d(created)i(b)q(ottom-up)d
(from)g(abstract)j(stac)o(k)e(mac)o(hine)g(co)q(de.)38
b(A)224 440 y(shado)o(w)11 b(stac)o(k)h(holds)f(p)q(oin)o(ters)g(to)g
(a)g(forest)h(of)f(subtrees,)i(whic)o(h)e(are)g(connected)i(together)
224 490 y(and)h(pushed)g(bac)o(k)f(on)o(to)g(the)h(shado)o(w)f(stac)o
(k.)19 b(F)m(or)13 b(example,)f(when)h(a)h(binary)e(op)q(eration)224
540 y(is)i(recognised,)g(a)g(new)g(binary)f(tree)i(no)q(de)f(is)f(allo)
q(cated,)g(and)g(the)i(t)o(w)o(o)e(subtrees)j(p)q(opp)q(ed)224
590 y(from)c(the)h(top-of-stac)o(k)f(are)i(attac)o(hed)f(as)g(righ)o(t)
g(and)f(left)h(subtrees)i(of)d(the)i(new)f(no)q(de.)18
b(A)224 640 y(p)q(oin)o(ter)d(to)e(the)i(new)f(no)q(de)g(is)g(pushed)h
(as)f(the)g(new)h(top-of-stac)o(k.)287 689 y(Because)g(the)e(trees)i
(are)f(constructed)h(b)q(ottom)d(up,)g(it)h(is)g(p)q(ossible)g(to)g
(lab)q(el)g(the)h(trees)224 739 y(as)i(they)h(are)f(constructed.)26
b(Suc)o(h)17 b(an)e FK(incr)n(emental)i(lab)n(el)r(ling)h
FN(remo)o(v)o(es)e(the)g(need)h(for)f(a)224 789 y(separate)g(lab)q
(elling)c(tra)o(v)o(ersal.)19 b(Seen)c(in)e(this)i(ligh)o(t,)d(the)j
(transitory)f(app)q(earance)h(of)f(the)224 839 y(abstract)e(stac)o(k)g
(mac)o(hine)e(co)q(de)i(ma)o(y)d(b)q(e)j(though)o(t)f(of)f(as)h(no)g
(more)f(than)h(a)g(systematic)g(aid)224 889 y(to)i(transforming)f(from)
f FK(AST)18 b FN(to)13 b FK(c)n(o)n(de-tr)n(e)n(e)s FN(.)k(F)m(rom)12
b(suc)o(h)i(a)e(p)q(oin)o(t)h(of)f(view,)h(the)h(remo)o(v)n(al)224
938 y(of)g(the)g(separate)h(lab)q(elling)d(tra)o(v)o(ersal)i(of)g(the)g
(tree)h(is)f(a)g(w)o(elcome)f(b)q(on)o(us.)224 1074 y
FI(6.5)67 b(Summary)224 1165 y FN(Bottom)20 b(up)h(tree)i(rewriting)d
(is)h(the)h(most)e(fa)o(v)o(oured)g(metho)q(d)h(of)f(co)q(de)i
(selection)f(at)224 1215 y(presen)o(t.)31 b(The)18 b(rewriters)i(are)e
(almost)e(alw)o(a)o(ys)g(automatically)f(pro)q(duced)k(from)c(sp)q
(eci-)224 1265 y(\014cations.)29 b(Using)17 b(this)g(tec)o(hnology)m(,)
g(co)q(de)h(selectors)h(ma)o(y)d(b)q(e)i(easily)e(main)o(tained)f(and)
224 1315 y(are)g(easily)e(mo)q(di\014ed.)287 1365 y(Bottom-up)i
(rewriting)h(co)q(de)h(selectors)h(whic)o(h)e(p)q(erform)f(their)i
(dynamic)d(program-)224 1414 y(ming)k(at)i(compile)f(time)g(tend)h(to)g
(run)h(somewhat)e(slo)o(w)o(er)h(than)g(a)g(w)o(ell)g(hand-co)q(ded)224
1464 y(shado)o(w)14 b(stac)o(k)h(automaton.)h(Ho)o(w)o(ev)o(er,)e(a)g
(tree)h(rewriter)g(based)g(on)f(dynamic)e(program-)224
1514 y(ming)h(at)h(compiler-compile)e(time)h(w)o(ould)h(almost)f
(certainly)h(b)q(e)h(faster)h(than)e(an)o(y)g(hand)224
1564 y(written)19 b(selector.)31 b(Nev)o(ertheless,)21
b(the)e(time)d(di\013erences)21 b(in)o(v)o(olv)o(ed)16
b(are)j(not)f(a)f(signi\014-)224 1614 y(can)o(t)c(prop)q(ortion)e(of)h
(the)g(total)g(compile)e(time,)h(particularly)g(for)h(those)g
(compilers)f(whic)o(h)224 1664 y(p)q(erform)i(signi\014can)o(t)h(lev)o
(els)g(of)f(co)q(de)i(optimization.)287 1713 y(The)20
b(relationship)f(b)q(et)o(w)o(een)j(b)q(ottom)c(up)i(tree)h(rewriting)f
(and)g(in)o(terpretiv)o(e)g(co)q(de)224 1763 y(selection)d(should)f(no)
o(w)f(b)q(e)i(clear.)24 b(The)16 b(non-terminal)e(sym)o(b)q(ols)h(of)g
(the)h(tree)h(grammar)224 1813 y(corresp)q(ond)h(directly)d(to)h(the)g
(v)n(arious)f(sym)o(b)q(olic)f(v)n(alue)g(v)n(arian)o(ts)h(in)g(the)i
(shado)o(w)e(stac)o(k)224 1863 y(formalism)o(.)h(The)f(cases)h(where)f
(dynamic)d(programming)f(brings)j(a)g(b)q(ene\014t)i(are)e(exactly)224
1913 y(those)i(cases)h(where)f(it)e(is)h(necessary)i(to)e(hold)g(a)f(v)
n(alue)h(as)g(a)g(sym)o(b)q(olic)e(quan)o(tit)o(y)h(on)h(the)224
1962 y(shado)o(w)f(stac)o(k,)g(un)o(til)f(more)g(information)e(is)j
(kno)o(wn)f(ab)q(out)h(the)g(uses)h(of)f(the)g(v)n(alue.)287
2012 y(F)m(or)g(extremely)g(simple)f(instruction)i(sets)h(arc)o
(hitectures,)g(selection)g(of)e(instructions)224 2062
y(is)f(corresp)q(ondingly)g(simple.)j(In)c(suc)o(h)i(cases)g(tree)g
(rewriting)e(seems)h(to)f(bring)h(no)f(p)q(erfor-)224
2112 y(mance)g(b)q(ene\014t,)h(although)f(it)f(ma)o(y)g(b)q(e)i(a)e(go)
q(o)q(d)h(c)o(hoice)h(for)f(other)h(reasons.)18 b(Ho)o(w)o(ev)o(er,)13
b(for)224 2162 y(arc)o(hitectures)20 b(with)c(complex)g(addressing)h
(mo)q(des,)g(or)g(for)g(complex)e(instruction)i(sets,)224
2211 y(tree)e(rewriting)e(can)h(bring)e(measurable)h(b)q(ene\014ts.)19
b(Ov)o(er)14 b(time,)e(as)h(c)o(hip)h(designers)g(get)g(a)224
2261 y(larger)h(ration)f(of)g(silicon,)g(instruction)h(set)h(arc)o
(hitectures)g(seem)f(to)g(b)q(e)g(b)q(ecoming)e(more)224
2311 y(complex,)f(ev)o(en)i(for)e(load/store)h(arc)o(hitectures.)20
b(Th)o(us,)13 b(is)g(seems)g(certain)h(that)f(the)h(b)q(en-)224
2361 y(e\014ts)f(of)e(tree)j(rewriting)d(o)o(v)o(er)h(in)o(terpretiv)o
(e)h(co)q(de)g(selection)f(will)e(b)q(ecome)i(more)f(apparen)o(t)224
2411 y(in)j(future.)224 2547 y FI(6.6)67 b(Finding)24
b(out)f(more)224 2638 y FN(A)10 b(n)o(um)o(b)q(er)g(of)f(b)q(ottom-up)g
(rewriting)h(to)q(ols)f(are)i(freely)f(a)o(v)n(ailable,)e(with)i(sligh)
o(tly)e(di\013eren)o(t)224 2688 y(b)q(eha)o(viour)14
b(and)g(sp)q(eci\014cation)g(requiremen)o(ts.)p eop
%%Page: 186 192
186 191 bop 224 274 a FN(186)425 b FL(CHAPTER)14 b(6.)32
b(BOTTOM-UP)15 b(TREE)f(REWRITING)287 390 y FN(\\)p FG(Iburg)p
FN("[)p FO(?)p FN(])h(is)d(a)g(to)q(ol)g(whic)o(h)g(pro)q(duces)i(b)q
(ottom)d(up)i(tree)h(rewriters)g(whic)o(h)e(p)q(erform)224
440 y(dynamic)g(programming)e(at)j(compile)e(time.)17
b(The)c(generated)i(tree-rewriter)h(is)d(co)q(ded)h(in)224
490 y FM(C)s FN(.)k FG(Iburg)13 b FN(uses)i(a)e FG(yacc)p
FN(-lik)o(e)g(sp)q(eci\014cation)h(st)o(yle,)g(and)f(allo)o(ws)g(pro)q
(duction)h(costs)h(to)f(b)q(e)224 540 y(arbitrary)e(expressions.)19
b(F)m(or)11 b(this)g(to)q(ol,)g(seman)o(tic)g(constrain)o(ts)h(are)g
(enforced)g(b)o(y)f(the)h(use)224 590 y(of)i(conditional)e
(cost-functions)i(whic)o(h)g(return)h FK(max-c)n(ost)j
FN(for)13 b(disallo)o(w)o(ed)f(cases.)20 b(F)m(raser)224
640 y(and)15 b(Hanson's)f(b)q(o)q(ok)g([)p FO(?)p FN(])k(on)c(the)h
(compiler)e FG(lcc)g FN(has)i(detailed)f(examples)f(of)h(the)h(use)g
(of)224 689 y(a)f(rewriter)h(based)g(on)e FG(iburg)p
FN(.)287 740 y(\\)p FG(Mburg)p FN("[)p FO(?)p FN(])28
b(is)17 b(a)h(to)q(ol)g(whic)o(h)f(pro)q(duces)j(b)q(ottom)d(up)h(tree)
h(rewriters)h(whic)o(h,)e(lik)o(e)224 789 y(those)i(created)h(b)o(y)d
FG(iburg)p FN(,)h(p)q(erform)f(dynamic)g(programmi)o(ng)e(at)j(compile)
e(time.)32 b(In)224 839 y(this)14 b(case,)h(the)f(generated)h(rewriter)
g(is)f(written)g(in)f FK(Mo)n(dula-2)6 b FN(.)18 b(The)d(sp)q
(eci\014cation)f(st)o(yle)224 889 y(is)i(similar)e(to)i
FG(coco/r)p FN(,)f(rather)i(than)g FG(yacc)p FN(.)24
b(Pro)q(ductions)17 b(are)f(sp)q(eci\014ed)i(in)e(the)h(usual)224
939 y(nested)f(pre\014x)e(form,)e(and)h(eac)o(h)i(pro)q(duction)f(ma)o
(y)e(optionally)f(b)q(e)k(guarded)f(b)o(y)f(an)h(arbi-)224
989 y(trary)j(predicate,)g(as)f(describ)q(ed)i(in)d(section)i(6.3.)24
b(Eac)o(h)16 b(pro)q(duction)g(ma)o(y)e(also)i(sp)q(ecify)224
1038 y(a)h(seman)o(tic)e(action,)h(whic)o(h)h(is)f(automatically)d
(placed)k(after)f(the)h(recursion)h(in)e(the)h(re-)224
1088 y(duction)g(help)q(er)h(pro)q(cedures.)29 b(F)m(or)16
b(rewritings)h(whic)o(h)f(can)h(b)q(e)h(p)q(erformed)e(in)g(a)h(single)
224 1138 y(reduction)e(pass,)g FG(mburg)e FN(can)i(pro)q(duce)g(a)f
(complete)g(rewriter)i(with)e(no)g(hand-co)q(ding)f(at)224
1188 y(all.)27 b FK(Mbur)n(g)21 b FN(also)c(supp)q(orts)h(the)g
(incremen)o(tal)f(lab)q(elling)e(referred)k(to)e(in)g(the)h(previous)
224 1238 y(section.)287 1288 y(\\)p FG(Burg)p FN("[)p
FO(?)p FN(])40 b(is)22 b(a)g(to)q(ol)f(whic)o(h)h(p)q(erforms)g
(dynamic)e(programming)f(at)j(compiler-)224 1338 y(compile)15
b(time,)h(and)g(generates)i(a)f(a)f(table-driv)o(en,)g(\014nite-state)i
(lab)q(elling)d(automaton.)224 1388 y(The)f(sp)q(eci\014cation)g(st)o
(yle)g(is)f(iden)o(tical)f(to)h FG(iburg)p FN(,)f(except)j(that)e
(costs)i(ma)o(y)c(only)h(b)q(e)i(con-)224 1437 y(stan)o(ts.)28
b(In)17 b(practice)h(some)f(transformation)e(of)h(t)o(ypical)g
FG(iburg)g FN(grammars)e(is)j(usually)224 1487 y(required.)h
FG(Burg)11 b FN(rewriters)i(are)e(faster)h(than)f(those)h(pro)q(duced)h
(b)o(y)e(an)o(y)f(other)i(of)f(the)h(to)q(ols)224 1537
y(men)o(tioned)h(here,)i(t)o(ypically)d(b)o(y)i(a)g(factor)f(of)h(ab)q
(out)f(5.)287 1587 y(P)o(erforming)19 b(the)i(dynamic)e(programmi)o(ng)
f(at)i(compiler-compile)e(time,)i(requires)224 1637 y(the)13
b(summarization)c(of)i(an)h(in\014nite)f(n)o(um)o(b)q(er)g(of)h(p)q
(ossible)g(cost-states)h(in)o(to)f(a)f(\014nite)h(\(and)224
1687 y(hop)q(efully)d(small\))e(n)o(um)o(b)q(er)i(of)g(equiv)n(alence)h
(classes.)17 b(These)11 b(equiv)n(alence)f(classes)g(b)q(ecome)224
1737 y(the)15 b(states)h(of)e(the)h(lab)q(elling)d(automaton.)18
b(In)c(theory)m(,)g(there)i(are)e(some)g(tree-grammars)224
1786 y(for)k(whic)o(h)g(the)h(pro)q(cess)h(do)q(es)f(not)f(con)o(v)o
(erge,)h(but)f(these)i(do)e(not)g(app)q(ear)g(to)g(arise)h(in)224
1836 y(practice.)25 b(The)16 b(most)e(comprehensiv)o(e)i(accoun)o(t)g
(of)f FG(burg)p FN(,)f(and)i(its)f(underlying)h(theory)m(,)224
1886 y(is)e(giv)o(en)g(b)o(y)f(b)o(y)h(Pro)q(ebsting[)p
FO(?)p FN(].)224 2026 y FI(6.7)67 b(Exercises)254 2117
y FN(6.1)20 b(IBM's)10 b(P)o(o)o(w)o(er)g(arc)o(hitecture,)h(and)f(the)
g(latest)g(MIPS)g(instruction)f(set)i(b)q(oth)e(pro)o(vide)328
2167 y(\015oating)g(p)q(oin)o(t)g(instructions)h(whic)o(h)f(tak)o(e)g
(three)i(\015oating)e(p)q(oin)o(t)g(registers)h(as)g(input,)328
2217 y(denoted)16 b FM(f)506 2223 y Fz(1)524 2217 y FM(;)7
b(f)563 2223 y Fz(2)582 2217 y FM(;)g(f)621 2223 y Fz(3)654
2217 y FN(here,)15 b(and)f(compute)g(one)h(of)e(the)i(follo)o(wing)d
(expressions)k(in)o(to)328 2267 y(a)e(fourth)g(register)h
FM(f)657 2273 y Fz(4)689 2267 y FN(|)778 2359 y FM(f)798
2365 y Fz(4)859 2359 y FN(=)41 b(\()p FM(f)968 2365 y
Fz(1)997 2359 y Ft(\002)9 b FM(f)1058 2365 y Fz(2)1086
2359 y FN(+)h FM(f)1148 2365 y Fz(3)1167 2359 y FN(\))778
2421 y FM(f)798 2427 y Fz(4)859 2421 y FN(=)41 b(\()p
FM(f)968 2427 y Fz(1)997 2421 y Ft(\002)9 b FM(f)1058
2427 y Fz(2)1086 2421 y Ft(\000)h FM(f)1148 2427 y Fz(3)1167
2421 y FN(\))778 2483 y FM(f)798 2489 y Fz(4)859 2483
y FN(=)41 b Ft(\000)p FN(\()p FM(f)1000 2489 y Fz(1)1029
2483 y Ft(\002)10 b FM(f)1091 2489 y Fz(2)1119 2483 y
FN(+)f FM(f)1180 2489 y Fz(3)1199 2483 y FN(\))778 2546
y FM(f)798 2552 y Fz(4)859 2546 y FN(=)41 b Ft(\000)p
FN(\()p FM(f)1000 2552 y Fz(1)1029 2546 y Ft(\002)10
b FM(f)1091 2552 y Fz(2)1119 2546 y Ft(\000)f FM(f)1180
2552 y Fz(3)1199 2546 y FN(\))328 2638 y(Using)h(the)h(usual)g
(pre\014x)g(notation,)f(write)g(do)o(wn)g(pro)q(ductions)h(whic)o(h)g
(matc)o(h)e(these)328 2688 y(patterns)15 b(in)f(a)f(co)q(de-tree.)p
eop
%%Page: 187 193
187 192 bop 224 274 a FL(6.7.)31 b(EXER)o(CISES)1046
b FN(187)254 390 y(6.2)20 b(In)13 b(the)h(follo)o(wing)c(\\)p
FK(DR)n(e)n(g,)15 b(IR)n(e)n(g,)f(A)n(drs)s FN(")e(are)i(non-terminals)
d(of)i(a)g(tree)h(grammar,)328 440 y(denoting)19 b(v)n(alues)f(in)h
(\015oating)e(p)q(oin)o(t)i(double)f(registers,)j(in)o(teger)e
(registers,)i(and)328 490 y(sym)o(b)q(olic)c(addresses,)k(resp)q(ectiv)
o(ely)m(.)32 b(Using)18 b(this)g(notation,)g(a)g(standard)h(w)o(ord-)
328 540 y(assignmen)o(t)13 b(pro)q(duction)h(is)g(|)729
631 y FK(Stmt)h FN(=)d FG(assignW\()p FK(A)n(drs,)g(IR)n(e)n(g)t
FG(\))328 739 y FN(Consider)j(con)o(v)o(ersions)h(b)q(et)o(w)o(een)g
(in)o(teger)f(and)g(\015oating)e(p)q(oin)o(t)h(double)h(v)n(alues)g(on)
328 789 y(those)h(mac)o(hines)e(whic)o(h)g(do)h(not)g(ha)o(v)o(e)f
(direct)i(data)e(paths)i(b)q(et)o(w)o(een)g(the)f(\015oating)328
839 y(p)q(oin)o(t)e(registers)h(and)f(the)g(in)o(teger)h(registers.)19
b(In)13 b(suc)o(h)h(a)e(case,)i(a)e(pro)q(duction)i(suc)o(h)328
889 y(as)g(|)812 938 y FK(IR)n(e)n(g)i FN(=)11 b FG(dToI\()p
FK(DR)n(e)n(g)t FG(\))328 1013 y FN(requires)h(the)g(\015oating)e(p)q
(oin)o(t)h(v)n(alue)f(to)h(b)q(e)h(transformed)e(in)o(to)g(an)h(in)o
(teger,)h(still)e(in)h(a)328 1063 y(copro)q(cessor)i(register,)f(then)f
(written)g(to)g(memory)m(,)d(and)i(then)i(reloaded)f(in)o(to)e(an)i
(in-)328 1113 y(teger)i(register.)19 b(In)12 b(the)h(case)g(that)f(the)
h(in)o(teger)g(register)g(is)f(immediately)d(assigned)328
1163 y(to)18 b(some)g(memory)d(lo)q(cation,)j(this)h(is)f(v)o(ery)g
(ine\016cien)o(t.)32 b(A)18 b(similar)e(ine\016ciency)328
1212 y(applies)e(to)g(the)g(con)o(v)o(ersion)g(|)812
1304 y FK(DR)n(e)n(g)i FN(=)c FG(iToD\()p FK(IR)n(e)n(g)t
FG(\))328 1395 y FN(when)j(the)f(in)o(teger)g(v)n(alue)g(is)f(already)h
(a)o(v)n(ailable)e(in)h(memory)m(.)328 1461 y(Bypass)k(these)g
(ine\016ciencies,)g(either)f(b)o(y)g(adding)f(new)h(con)o(v)o(ersion)g
(pro)q(ductions,)328 1511 y(or)e(new)g(assign)g(pro)q(ductions,)g(or)g
(b)q(oth.)254 1594 y(6.3)20 b(It)14 b(is)g(tempting)f(to)g(suggest)i
(that)f(another)h(round)f(of)f(constan)o(t)i(folding)d(migh)o(t)g(b)q
(e)328 1644 y(built)h(in)h(to)g(a)f(b)q(ottom)g(up)h(tree)h(rewriter.)k
(F)m(or)13 b(example,)g(the)h(pro)q(duction)g(|)772 1735
y FK(Imm)g FN(=)e FG(add\()p FK(Imm,)i(Imm)s FG(\))328
1827 y FN(migh)o(t)g(b)q(e)i(used)g(with)f(a)h(reduction)g(action)f
(whic)o(h)h(sets)h(the)f(literal)e(v)n(alue)h(to)h(the)328
1877 y(sum)d(of)g(the)i(t)o(w)o(o)e(leaf)h(v)n(alues.)j(Ho)o(w)o(ev)o
(er,)d(this)g(is)g(incorrect)h(if)e(other)i(pro)q(ductions)328
1926 y(rely)g(on)f(testing)g(the)h(v)n(alue)f(of)g(literals)f(either)j
(using)e(conditional)e(expressions)k(or)328 1976 y(pattern)f
(predicates.)k(Wh)o(y)14 b(is)f(this?)254 2059 y(6.4)20
b(Sometimes)10 b(it)h(is)g(in)o(tuitiv)o(ely)f(clear)i(that)g(a)f
(particular)g(terminal)f(sym)o(b)q(ol)g(in)h(a)g(tree)328
2109 y(grammar)e(can)j(only)g(result)h(in)e(a)h(single)g(non-terminal)e
FK(typ)n(e-form)p FN(.)17 b(In)12 b(suc)o(h)g(cases,)328
2159 y(it)j(w)o(ould)f(app)q(ear)h(that)h(the)f(subtree)i(ro)q(oted)e
(at)g(suc)o(h)h(a)f(no)q(de)g(could)g(usefully)g(b)q(e)328
2209 y(reduced)j(imm)o(ediately)m(.)i(Determine)15 b(su\016cien)o(t)h
(conditions)f(on)g(the)i(pro)q(ductions)328 2258 y(of)c(a)g(tree)i
(grammar,)10 b(to)k(ensure)h(that)e(suc)o(h)i(an)e(immediate)e
(reduction)j(can)g(safely)328 2308 y(b)q(e)h(p)q(erformed.)p
eop
%%Page: 188 194
188 193 bop 224 274 a FN(188)425 b FL(CHAPTER)14 b(6.)32
b(BOTTOM-UP)15 b(TREE)f(REWRITING)p eop
%%Page: 189 195
189 194 bop 224 756 a FJ(Chapter)32 b(7)224 1018 y FP(In)m(tro)s
(duction)39 b(to)224 1143 y(Optimization)639 1488 y
 9669918 18945146 0 0 9669918 18945146 startTexFig
 639
1488 a
%%BeginDocument: optarch.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-37.0 294.0 translate 0.585 -0.585 scale
1.000 setlinewidth
	[6.000000] 0 setdash
% Polyline
n 313 429 m 313 409 l  173 409 l  173 429 l  clp gs col-1 s gr
	[] 0 setdash
/Times-Bold findfont 11.00 scalefont setfont
183 422 m 
gs 1 -1 scale (optional optimization step) col-1 show gr
	[6.000000] 0 setdash
% Polyline
n 313 268 m 313 248 l  173 248 l  173 268 l  clp gs col-1 s gr
	[] 0 setdash
/Times-Bold findfont 11.00 scalefont setfont
183 261 m 
gs 1 -1 scale (optional optimization step) col-1 show gr
	[6.000000] 0 setdash
% Polyline
n 313 189 m 313 169 l  173 169 l  173 189 l  clp gs col-1 s gr
	[] 0 setdash
/Times-Bold findfont 11.00 scalefont setfont
183 182 m 
gs 1 -1 scale (optional optimization step) col-1 show gr
% Polyline
n 239 79 m 239 39 l  79 39 l  79 79 l  clp gs col-1 s gr
% Polyline
n 239 159 m 239 119 l  79 119 l  79 159 l  clp gs col-1 s gr
% Polyline
n 239 239 m 239 199 l  79 199 l  79 239 l  clp gs col-1 s gr
% Polyline
n 239 319 m 239 279 l  79 279 l  79 319 l  clp gs col-1 s gr
% Polyline
n 239 399 m 239 359 l  79 359 l  79 399 l  clp gs col-1 s gr
% Polyline
n 239 479 m 239 439 l  79 439 l  79 479 l  clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 159 19 m 159 39 l gs col-1 s gr
n 161.000 31.000 m 159.000 39.000 l 157.000 31.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 79 m 159 119 l gs col-1 s gr
n 161.000 111.000 m 159.000 119.000 l 157.000 111.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 159 m 159 199 l gs col-1 s gr
n 161.000 191.000 m 159.000 199.000 l 157.000 191.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 239 m 159 279 l gs col-1 s gr
n 161.000 271.000 m 159.000 279.000 l 157.000 271.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 399 m 159 439 l gs col-1 s gr
n 161.000 431.000 m 159.000 439.000 l 157.000 431.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 479 m 159 499 l gs col-1 s gr
n 161.000 491.000 m 159.000 499.000 l 157.000 491.000 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
% Polyline
n 230 349 m 90 349 l  90 329 l  230 329 l  clp gs 0.95 setgray fill gr
gs col-1 s gr
0.500 setlinewidth
	[4.000000] 0 setdash
% Polyline
n 160 320 m 160 330 l gs col-1 s gr
	[] 0 setdash
n 162.000 322.000 m 160.000 330.000 l 158.000 322.000 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Polyline
n 160 350 m 160 359 l gs col-1 s gr
	[] 0 setdash
n 162.000 351.000 m 160.000 359.000 l 158.000 351.000 l gs 2 setlinejoin col-1 s gr
/Times-Bold findfont 11.00 scalefont setfont
136 462 m 
gs 1 -1 scale (assembler) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
129 381 m 
gs 1 -1 scale (register binder) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
100 302 m 
gs 1 -1 scale (interpretive code selector) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
134 222 m 
gs 1 -1 scale (tree walker) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
107 62 m 
gs 1 -1 scale (front-end tree builder) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
116 142 m 
gs 1 -1 scale (attribute evaluator) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
91 502 m 
gs 1 -1 scale (object file out) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
71 422 m 
gs 1 -1 scale (assembly language) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
81 262 m 
gs 1 -1 scale (abstract stack IR) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
62 181 m 
gs 1 -1 scale (attributed syntax tree) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
69 102 m 
gs 1 -1 scale (abstract syntax tree) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
97 21 m 
gs 1 -1 scale (source file in) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
100 342 m 
gs 1 -1 scale (optional optimization step) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 914 2793 a FN(189)p eop
%%Page: 190 196
190 195 bop 224 274 a FN(190)342 b FL(CHAPTER)14 b(7.)31
b(INTR)o(ODUCTION)14 b(TO)g(OPTIMIZA)m(TION)224 390 y
FI(7.1)67 b(In)n(tro)r(duction)224 489 y FN(In)14 b(this)h(in)o(tro)q
(ductory)f(section)h(a)e(brief)h(o)o(v)o(erview)g(of)g(lo)q(cal)f
(optimization)e(is)j(giv)o(en.)k(The)224 539 y(implemen)o(tation)e(of)i
(three)j(tec)o(hniques:)29 b(lo)q(cal)18 b(common)f(sub)q(expression)j
(elmination,)224 589 y(lo)q(cal)e(v)n(alue)f(trac)o(king,)i(and)e(p)q
(eephole)i(optimization,)d(are)j(treated)g(in)f(detail)g(in)f(later)224
639 y(sections)j(of)d(this)h(c)o(hapter.)31 b(A)18 b(further)h(lo)q
(cal)e(optimization,)f(instruction)j(sc)o(heduling,)224
688 y(has)14 b(the)h(whole)f(of)f(a)g(later)h(c)o(hapter)h(dev)o(oted)g
(to)e(it.)287 742 y(In)h(section)g(1.7)f(the)h(notions)g(of)f(safet)o
(y)h(and)g(pro\014tabilit)o(y)e(w)o(ere)j(brie\015y)f(in)o(tro)q
(duced.)224 792 y(The)h(w)o(orking)e(de\014nitions)h(whic)o(h)f(w)o(e)h
(shall)g(use)g(are)h(|)328 888 y FO(De\014nition)o(:)20
b FN(An)15 b(optimization)e(is)j(said)f(to)h(b)q(e)g
FO(safe)f FN(if)g(for)g(ev)o(ery)i(correct)328 937 y(program)d(the)i
(optimized)e(co)q(de)j(has)e(equiv)n(alen)o(t)g(input-output)h(b)q(eha)
o(viour)328 987 y(as)c(the)h(same)f(program)e(compiled)h(without)h(the)
h(optimization.)h(In)e(particu-)328 1037 y(lar,)f(the)g(t)o(w)o(o)g
(compiled)e(program)h(v)o(ersions)h(m)o(ust)f(fail)g(for)h(exactly)g
(the)g(same)328 1087 y(input)j(data)f(sets.)328 1162
y FO(De\014nition)o(:)20 b FN(An)15 b(optimization)e(is)j(said)f(to)h
(b)q(e)g FO(pro\014table)d FN(if)i(the)h(trans-)328 1211
y(formed)c(program)g(is)h(an)g(impro)o(v)o(emen)o(t)e(o)o(v)o(er)i(the)
h(original)e(with)h(resp)q(ect)j(to)328 1261 y(the)f(ob)r(jectiv)o(e)f
(of)f(the)i(optimization.)224 1391 y FO(Basic)h(blo)q(c)o(ks)f(and)g
(extended)f(basic)h(blo)q(c)o(ks)224 1475 y FN(A)h FO(basic)g(blo)q(c)o
(k)f FN(is)g(a)g(segmen)o(t)g(of)g(co)q(de)h(whic)o(h)f(has)g(a)g
(single)g(en)o(try)h(and)f(a)g(single)g(exit)224 1525
y(p)q(oin)o(t.)29 b(The)18 b(con)o(trol)f(\015o)o(w)g(in)g(a)h(basic)f
(blo)q(c)o(k)g(th)o(us)h(consists)h(of)e(sequen)o(tial)h(execution)224
1575 y(with)h(no)g(branc)o(hing.)34 b(A)19 b(basic)g(blo)q(c)o(k)g(has)
g(the)h(fundamen)o(tal)d(prop)q(ert)o(y)j(that)f(if)g(an)o(y)224
1625 y(giv)o(en)e(instruction)g(of)g(the)h(blo)q(c)o(k)e(is)h
(executed,)j(then)d(all)f(previous)i(instructions)f(m)o(ust)224
1675 y(already)d(ha)o(v)o(e)g(b)q(een)h(executed,)g(and)f(all)e(follo)o
(wing)g(instructions)i(will)f(b)q(e)h(executed.)287 1729
y(In)h FK(V)l(AL)p FN(,)f(basic)i(blo)q(c)o(ks)f(b)q(egin)h(at)f(the)h
(en)o(try)g(p)q(oin)o(t)e(to)i(pro)q(cedures,)h(at)e(lab)q(els,)g(and)
224 1778 y(immediately)8 b(follo)o(wing)g(branc)o(h)k(instructions.)17
b(Basic)12 b(blo)q(c)o(ks)f(end)g(at)g(branc)o(hes,)h(so)f(that)224
1828 y(the)20 b(last)e(instruction)h(of)g(a)f(blo)q(c)o(k)g(is)h(often)
g(a)f(conditional)g(or)g(unconditional)g(branc)o(h)224
1878 y(\(including)d(return)h(instructions\).)23 b(They)15
b(also)g(end)g(immediately)d(b)q(efore)k(a)f(lab)q(el.)21
b(F)m(or)224 1928 y(these)16 b(purp)q(oses,)f(it)e(is)h(usual)g(to)f
(treat)i(pro)q(cedure)h(calls)d(as)h(complex)f(instructions)i(with)224
1978 y(p)q(ossible)g(side-e\013ects,)g(rather)g(than)f(as)g(jumps)e(or)
i(branc)o(hes.)287 2032 y FO(Lo)q(cal)f FN(optimizations)e(are)j(those)
h(whic)o(h)f(are)g(p)q(erformed)f(on)h(the)g(basis)g(of)f(informa-)224
2082 y(tion)i(whic)o(h)f(is)h(accum)o(ulated)f(for)g(a)g(single)h
(basic)f(blo)q(c)o(k)h(at)f(a)h(time.)k(This)c(in)o(tro)q(duction)224
2131 y(outlines)c(the)h(ideas)e(b)q(ehind)i(the)f(t)o(w)o(o)f(imp)q
(ortan)o(t)f(lo)q(cal)h(optimizations:)15 b(common)8
b(sub)q(ex-)224 2181 y(pression)k(eliminatio)o(n,)c(and)i(v)n(alue)g
(trac)o(king.)17 b(Both)10 b(of)g(these)i(optimizations)c(ha)o(v)o(e)i
(global)224 2231 y(coun)o(terparts)16 b(whic)o(h)e(are)g(treated)h(in)e
(a)h(later)g(c)o(hapter.)287 2285 y(As)f(it)f(turns)i(out,)f(for)f(the)
h(t)o(w)o(o)g(lo)q(cal)f(optimizations)e(whic)o(h)j(w)o(e)g(shall)f(b)q
(e)h(discussing,)224 2335 y(the)j(restriction)g(to)f(a)g(basic)g(blo)q
(c)o(k)f(as)h(de\014ned)i(ab)q(o)o(v)o(e)d(ma)o(y)f(b)q(e)j(relaxed.)22
b(W)m(e)14 b(de\014ne)j(an)224 2385 y FO(extended)12
b(basic)i(blo)q(c)o(k)d FN(as)h(a)g(segmen)o(t)g(of)g(co)q(de)h(whic)o
(h)f(has)h(a)f(single)g(en)o(try)h(p)q(oin)o(t)e(and)224
2434 y(one)i(or)g(more)f(exit)h(p)q(oin)o(ts.)k(An)c(extended)i(basic)e
(blo)q(c)o(k)f(has)h(the)h(fundamen)o(tal)c(prop)q(ert)o(y)224
2484 y(that)19 b(if)e(an)o(y)h(giv)o(en)g(instruction)g(is)g(executed)i
(then)f(all)e(previous)i(instructions)g(in)f(the)224
2534 y(blo)q(c)o(k)c(m)o(ust)f(ha)o(v)o(e)h(already)f(b)q(een)i
(executed.)287 2588 y(In)c FK(V)l(AL)p FN(,)g(extended)i(basic)f(blo)q
(c)o(ks)g(b)q(egin)f(at)h(the)g(en)o(try)g(p)q(oin)o(t)g(to)f(pro)q
(cedures,)j(and)d(at)224 2638 y(lab)q(els.)17 b(Extended)11
b(basic)f(blo)q(c)o(ks)g(end)g(at)g(return)h(instructions,)g
(unconditional)e(branc)o(hes,)224 2688 y(and)14 b(immediately)d(b)q
(efore)j(lab)q(els.)p eop
%%Page: 191 197
191 196 bop 224 274 a FL(7.1.)31 b(INTR)o(ODUCTION)943
b FN(191)224 390 y FH(7.1.1)56 b(Strength)18 b(reduction)g(and)h
(constan)n(t)g(folding)224 468 y FN(There)f(are)g(a)e(n)o(um)o(b)q(er)g
(of)g(optimizations)f(whic)o(h)h(in)o(v)o(olv)o(e)g(mo)q(di\014cation)e
(of)j(a)f(lo)q(cal)g(in-)224 518 y(struction)f(sequence)g(so)e(as)h(to)
f(replace)h(the)g(sequence)i(with)d(a)g(less)h(exp)q(ensiv)o(e)h
(sequence.)224 568 y(Suc)o(h)g(a)e(replacemen)o(t)h(is)g(called)g
FK(str)n(ength)g(r)n(e)n(duction)s FN(.)287 618 y(An)9
b(example)g(of)g(strength)h(reduction)h(whic)o(h)e(w)o(e)h(ha)o(v)o(e)f
(already)h(noted,)g(is)f(the)i(replace-)224 668 y(men)o(t)16
b(of)h(m)o(ultipli)o(cation)d(b)o(y)j(shifting,)f(in)g(cases)i(where)g
(the)g(m)o(ultiplicand)c(is)j(a)f(literal)224 718 y(p)q(o)o(w)o(er)h
(of)f(t)o(w)o(o,)h(and)f(o)o(v)o(er\015o)o(w)h(trapping)f(is)h(not)f
(required.)27 b(On)17 b(almost)e(all)h(mac)o(hines,)224
768 y(suc)o(h)j(a)e(shift)h(w)o(ould)f(b)q(e)h(faster)g(than)g(a)f(m)o
(ultiplication.)26 b(Indeed)19 b(on)f(most)e(mac)o(hines)224
818 y(the)i(cost)g(of)f(a)g(m)o(ultiplicati)o(on)d(is)k(equiv)n(alen)o
(t)e(to)h(p)q(erhaps)h(b)q(et)o(w)o(een)h(5)e(and)g(50)g(simple)224
867 y(instructions.)28 b(If)16 b(the)h(factor)g(is)f(to)o(w)o(ards)h
(the)g(high)f(end)i(of)e(this)h(range,)g(as)g(o)q(ccurs)h(for)224
917 y(mac)o(hines)13 b(without)h(a)f(hardw)o(are)h(m)o(ultiplication)c
(instruction,)k(then)g(m)o(ultiplication)d(b)o(y)224
967 y(man)o(y)16 b(constan)o(ts)j(ma)o(y)c(b)q(e)j(strength)h(reduced.)
31 b(F)m(or)17 b(t)o(ypical)g FK(RISC)24 b FN(instruction)17
b(sets,)224 1017 y(m)o(ultiplication)e(b)o(y)j(an)o(y)f(n)o(um)o(b)q
(er)g(in)h(the)g(range)g([)p Ft(\000)p FN(7)p FM(::)p
FN(7])e(can)i(b)q(e)h(p)q(erformed)f(in)f(three)224 1067
y(instructions)e(or)f(less.)287 1117 y(It)e(is)f(p)q(ossible)i(to)e
(deal)h(with)g(larger)f(constan)o(ts)i(b)o(y)f(means)f(of)g(a)h
(recursiv)o(e)h(algorithm.)224 1167 y(The)i(t)o(ypical)e(suc)o(h)h
(algorithm)e(w)o(ould)h(lo)q(ok)g(similar)e(to)j(the)g(sc)o(hema)g(in)f
(\014gure)i(7.1.)p 270 1311 1350 2 v 269 1357 2 46 v
334 1343 a FF(PROCEDURE)h(InlineMul)o(\(ad)o(d)g(:)39
b(BOOLEAN;)17 b(mult)h(:)39 b(INTEGER\);)p 1619 1357
V 269 1403 V 372 1389 a(VAR)19 b(M,L)f(:)h(INTEGER;)p
1619 1403 V 269 1448 V 334 1435 a(BEGIN)e(\(*)i(pre)g(:)38
b(mult)19 b(is)f(positive,)f(left-op)f(name)j(is)f(mCnd)g(*\))p
1619 1448 V 269 1494 V 372 1480 a(IF)12 b FE(mult)h Fw(2)e
FD([0)p Fm(::)p FD(7])25 b FF(THEN)p 1619 1494 V 269
1540 V 410 1526 a FE(emit)14 b(c)n(ase)e(c)n(o)n(de)g(to)h(add/sub)g
FF(mCnd*mult)c FE(to)k(total)p 1619 1540 V 269 1585 V
372 1572 a FF(ELSE)p 1619 1585 V 269 1632 2 47 v 410
1618 a FE(\014nd)g(smal)r(lest)f(M,)i(lar)n(gest)e(L)i(such)e(that)j
FD(2)1041 1602 y Fh(M)1085 1618 y Fw(\025)24 b FE(mult)13
b Fm(>)e FD(2)1287 1602 y Fh(L)p 1619 1632 V 269 1678
2 46 v 410 1664 a FF(IF)h FE(most)i(signi\014c)n(an)o(t)d(non-zer)n(o)g
(bits)i(of)g(mult)g(ar)n(e)i FF(111)k(THEN)p 1619 1678
V 269 1723 V 449 1710 a FE(emit)13 b(c)n(o)n(de)f(to)h(add/sub)g
FF(SHIFT\(mCn)o(d,M)o(\))d FE(to)j(total)p 1619 1723
V 269 1769 V 449 1755 a FF(InlineMul)o(\(NO)o(T)j(add,)j(M**2)f(-)h
(mult\);)p 1619 1769 V 269 1815 V 410 1801 a(ELSE)g(\(*)f(do)h(just)f
(one)h(bit)f(*\))p 1619 1815 V 269 1860 V 449 1847 a
FE(emit)13 b(c)n(o)n(de)f(to)h(add/sub)g FF(SHIFT\(mCn)o(d,L)o(\))d
FE(to)j(total)p 1619 1860 V 269 1906 V 449 1892 a FF(InlineMul)o(\(ad)o
(d,)j(mult)i(-)h(L**2\);)p 1619 1906 V 269 1952 V 410
1938 a(END;)p 1619 1952 V 269 1997 V 372 1984 a(END;)p
1619 1997 V 269 2043 V 334 2029 a(END)f(InlineMul;)p
1619 2043 V 270 2045 1350 2 v 455 2161 a FN(Figure)c(7.1:)j(Recursiv)o
(e)e(strength)g(reduction)f(for)g(m)o(ultiply)287 2270
y(This)g(is)h(a)f(v)n(arian)o(t)g(of)g(\\m)o(ultipli)o(cation)e(with)i
(shifting)g(o)o(v)o(er)g(ones".)21 b(The)15 b(algorithm)224
2320 y(has)g(b)q(een)h(simpli\014ed)573 2305 y Fz(1)605
2320 y FN(for)e(purp)q(oses)j(of)d(clarit)o(y)m(,)f(and)i(assumes)g
(that)g(the)g(initial)e(m)o(ulti-)224 2370 y(plier)h(is)g(p)q(ositiv)o
(e.)k(In)13 b(e\013ect)j(the)e(initial)e(call)i(is)453
2420 y FG(InlineMul\(mult>=)k(0,)k(ABS\(mult\)\))287
2471 y FN(As)13 b(an)f(example)f(of)h(the)h(use)g(of)f(the)h(algorithm)
c(in)j(\014gure)h(7.1,)e(if)h(the)h(m)o(ultiplicand)c(is)224
2520 y(in)14 b(some)g(register)i FM(v)547 2526 y FB(m)578
2520 y FN(,)f(the)g(result)g(is)f(accum)o(ulated)g(in)g(register)i
FM(v)1295 2526 y FB(t)1309 2520 y FN(,)e(and)h(the)g(m)o(ultiplier)224
2570 y(is)f(47)f(\(that)i(is,)e(101111)f(binary\),)h(then)i(the)f
(steps)i(are)e(as)g(follo)o(ws)e(|)p 224 2610 577 2 v
271 2636 a Fy(1)288 2648 y Fx(Indeed)d(a)h(more)g(complex)e(algorithm)g
(due)i(to)g(Bernstein[)p Fi(?)p Fx(],)f(pro)q(duces)f(lo)o(w)o(er)j
(cost)f(ev)n(aluation)o(s)e(for)224 2688 y(man)o(y)i(m)o(ultiples.)p
eop
%%Page: 192 198
192 197 bop 224 274 a FN(192)342 b FL(CHAPTER)14 b(7.)31
b(INTR)o(ODUCTION)14 b(TO)g(OPTIMIZA)m(TION)1067 384
y FK(R)o(untime)224 b(Emitte)n(d)207 434 y(Compile-time)14
b(c)n(omputation)381 b(op)n(er)n(ations)194 b(instructions)p
182 450 1525 2 v 207 485 a(InlineMul)t FN(\(add=true,m)o(ult=47\),)p
FM(M)16 b FN(=)11 b(6)p FM(;)c(L)k FN(=)h(5)50 b FM(v)1087
491 y FB(t)1113 485 y Ft( )11 b FM(v)1186 491 y FB(m)1227
485 y Ft(\002)e FN(32)135 b FG(shl)13 b FM(v)1544 491
y FB(m)1576 485 y FM(;)7 b FN(5)p FM(;)g(v)1655 491 y
FB(t)207 535 y FK(InlineMul)t FN(\(add=true,m)o(ult=15\),)p
FM(M)16 b FN(=)11 b(4)p FM(;)c(L)k FN(=)h(3)50 b FM(v)1087
541 y FB(t)1113 535 y Ft( )11 b FM(v)1186 541 y FB(t)1210
535 y FN(+)f FM(v)1272 541 y FB(m)1312 535 y Ft(\002)g
FN(16)49 b FG(shl)13 b FM(v)1544 541 y FB(m)1576 535
y FM(;)7 b FN(4)p FM(;)g(v)1655 541 y Fz(1)1445 585 y
FG(add)13 b FM(v)1544 591 y FB(t)1559 585 y FM(;)7 b(v)1598
591 y Fz(1)1616 585 y FM(;)g(v)1655 591 y FB(t)207 635
y FK(InlineMul)t FN(\(add=false,m)o(ult=1\))319 b FM(v)1087
641 y FB(t)1113 635 y Ft( )11 b FM(v)1186 641 y FB(t)1210
635 y Ft(\000)f FM(v)1272 641 y FB(m)1445 635 y FG(sub)j
FM(v)1544 641 y FB(t)1559 635 y FM(;)7 b(v)1598 641 y
FB(m)1629 635 y FM(;)g(v)1668 641 y FB(t)p 182 651 V
224 685 a FN(The)14 b(m)o(ultipli)o(cation)c(b)o(y)i(47)g(has)h(b)q
(een)h(strength)g(reduced)g(to)f(four)f(in)o(teger)h(instructions.)224
735 y(F)m(or)e(most)e(mac)o(hine)h(arc)o(hitectures)j(this)e(w)o(ould)f
(b)q(e)h(a)g(useful)g(impro)o(v)o(em)o(en)o(t.)k(It)c(is)f(normal)224
785 y(to)15 b(apply)f(some)f(instruction)i(sequence)i(length)e(limit)c
(in)k(suc)o(h)g(an)f(algorithm)e(to)j(ensure)224 835
y(pro\014tabilit)o(y)g(of)h(the)g(transformation.)23
b(In)16 b(the)h(example)e(ab)q(o)o(v)o(e)g(the)i(length)f(w)o(as)g
(four.)224 884 y(F)m(or)k(mac)o(hines)f(without)h(hardw)o(are)h(m)o
(ultiply)c(instructions)k(recursion)g(depths)g(m)o(uc)o(h)224
934 y(greater)15 b(than)f(this)g(w)o(ould)f(still)g(b)q(e)i
(pro\014table.)287 985 y(There)10 b(are)g(other)g(cases)h(of)d
(strength)j(reduction)f(whic)o(h)f(apply)g(to)g(lo)q(ops.)16
b(Supp)q(ose,)11 b(for)224 1035 y(example,)f(that)g(eac)o(h)h(time)e
(around)h(a)g(lo)q(op)f(an)h(expression)i(&)p FM(a)d
FN(+)g FM(c)h FN(+)f FM(i)h Ft(\002)f FN(8)h(is)g(computed,)224
1085 y(where)17 b(&)p FM(a)f FN(is)g(some)f(\014xed)i(address,)g
FM(i)f FN(is)g(the)g(lo)q(op)f(coun)o(ter,)i(and)f FM(c)g
FN(is)f(some)g(constan)o(t.)224 1134 y(A)o(t)d(the)h(end)f(of)f(eac)o
(h)h(iteration,)g(it)f(is)h(assumed)f(that)h(the)h(lo)q(op)e(coun)o
(ter)h FM(i)g FN(is)g(incremen)o(ted)224 1184 y(b)o(y)17
b(one.)28 b(This)17 b(co)q(de)h(migh)o(t)d(arise)i(in)g(the)g(case)h
(of)f(non-zero)g(based)h(indexing)e(in)o(to)h(an)224
1234 y(arra)o(y)d(of)f(double)h(precision)g(\015oating)f(p)q(oin)o(t)h
(v)n(alues.)287 1285 y(An)e(expression)h(lik)o(e)e(the)h(one)h(in)e
(the)i(example)d(is)i(said)f(to)h(b)q(e)h(an)e FK(induction)j(variable)
s FN(.)224 1335 y(There)i(is)f(a)f(simple)f(relationship)h(b)q(et)o(w)o
(een)i(the)f(v)n(alue)f(of)g(the)h(expression)h(b)q(et)o(w)o(een)g(one)
224 1385 y(iteration)c(of)f(the)h(lo)q(op)f(and)h(the)g(next.)18
b(W)m(e)11 b(can)h(exploit)f(this)h(fact)g(and)g(a)o(v)o(oid)e
(computing)224 1434 y(the)20 b(expression)h(eac)o(h)e(time)f(w)o(e)i
(tra)o(v)o(erse)g(the)g(lo)q(op.)33 b(Instead,)21 b(w)o(e)e(in)o(tro)q
(duce)h(a)f(new)224 1484 y(v)n(ariable)c(and)h(assign)g(the)g(initial)e
(v)n(alue)h(of)h(the)g(expression)h(to)f(this)g(v)n(alue)f(in)h(the)g
(lo)q(op)224 1534 y(header.)j(A)o(t)11 b(the)h(end)f(of)g(eac)o(h)g
(iteration,)g(the)h(v)n(ariable)e(is)h(incremen)o(ted,)h(in)e(this)i
(example)224 1584 y(b)o(y)k(8.)23 b(W)m(e)15 b(refer)h(to)g(this)f
(transformation)f(as)i(strength)h(reduction,)f(b)q(ecause)h(the)f(more)
224 1634 y(exp)q(ensiv)o(e)21 b(op)q(eration)e(of)f(computing)g(the)h
(index)h(expression)g(has)f(b)q(een)h(replaced)h(b)o(y)224
1683 y(the)c(c)o(heap)q(er)g(op)q(eration)f(of)f(incremen)o(ting)g(the)
i(induction)f(v)n(ariable.)23 b(If)15 b(the)i(induction)224
1733 y(v)n(ariable)d(is)h(used)h(sev)o(eral)g(times)e(within)g(the)i
(lo)q(op,)e(then)h(the)h(gain)e(is)h(corresp)q(ondingly)224
1783 y(greater.)287 1834 y(Finding)k(induction)h(v)n(ariables)f(in)h
(lo)q(ops)g(requires)h(global)e(analysis,)i(so)f(w)o(e)g(defer)224
1884 y(further)15 b(consideration)f(of)f(this)h(topic)g(un)o(til)f
(later)h(in)g(the)g(b)q(o)q(ok.)287 1934 y(Constan)o(t)k(folding)e(is)i
(the)h(pro)q(cess)h(of)d(replacing)h(run)o(time)f(computations)g(b)o(y)
h(v)n(al-)224 1984 y(ues)h(whic)o(h)f(are)g(computed)f(at)h(compile)e
(time.)28 b(In)18 b(general,)g(computations)f(in)o(v)o(olving)224
2034 y(constan)o(ts)g(can)f(b)q(e)h(ev)n(aluated)e(without)h(executing)
g(the)g(program.)23 b(Suc)o(h)16 b(constan)o(t)g(ex-)224
2084 y(pressions)21 b(o)q(ccur)g(in)e(n)o(umerous)g(con)o(texts,)i(and)
e(it)h(is)f(usual)g(for)g(ev)o(ery)i(phase)f(of)f(the)224
2134 y(compilation)10 b(to)i(try)h(to)f(recognise)i(constan)o(t)f
(expressions,)h(and)e(replace)i(eac)o(h)f(computa-)224
2183 y(tion)h(b)o(y)f(its)h(v)n(alue.)287 2234 y(In)h(source)h
(programs)d(sym)o(b)q(olic)g(expressions)k(are)e(often)g(used)h(to)f
(mak)o(e)e(the)j(nature)224 2284 y(of)e(a)f(constan)o(t)i(clear)f(|)453
2335 y FG(CONST)20 b(twoPi)h(=)h(pi)f(*)h(2.0;)287 2386
y FN(or)14 b(to)f(parameterize)h(a)g(piece)h(of)e(co)q(de)i(|)453
2437 y FG(FOR)21 b(index)g(:=)g(0)h(TO)f(maxIndex)f(DIV)h
(bytesInBitset)e(DO)287 2487 y FN(It)14 b(go)q(es)i(without)e(sa)o
(ying)g(that)g(suc)o(h)i(expressions)g(will)d(b)q(e)j(ev)n(aluated)e(b)
o(y)g(the)i(fron)o(t-)224 2537 y(end,)e(and)g(replaced)h(b)o(y)f(their)
g(result)h(in)e(the)h(generated)i(in)o(termediate)d(co)q(de.)287
2588 y(Ho)o(w)o(ev)o(er,)i(constan)o(t)h(expressions)g(o)q(ccur)h(at)e
(later)g(stages)h(as)f(w)o(ell,)f(sometimes)f(as)j(a)224
2638 y(result)d(of)e(other)i(optimizations.)i(Consider)d(accessing)i
(an)d(elemen)o(t)h(of)f(an)h(arra)o(y)f(at)h(some)224
2688 y(constan)o(t)k(o\013set.)k(The)c(address)f(computation)e(will)g
(in)o(v)o(olv)o(e)h(m)o(ultiplyi)o(ng)e(the)j(constan)o(t)p
eop
%%Page: 193 199
193 198 bop 224 274 a FL(7.1.)31 b(INTR)o(ODUCTION)943
b FN(193)224 390 y(index)19 b(b)o(y)f(some)g(elemen)o(t)f(size,)j(and)e
(p)q(ossibly)h(adding)e(some)h(o\013set.)32 b(Clearly)18
b(this)g(is)224 440 y(a)g(constan)o(t)g(expression)g(whic)o(h)g(w)o(as)
f(not)g(visible)g(to)g(the)h(fron)o(t-end,)g(and)g(so)f(m)o(ust)g(b)q
(e)224 490 y(folded)d(b)o(y)f(the)i(co)q(de)g(generator.)287
545 y(Finally)m(,)i(it)i(turns)g(out)g(that)g(one)g(of)f(the)h
(optimizations)e(whic)o(h)h(w)o(e)h(discuss)h(later)224
595 y(often)14 b(tells)f(us)g(that)g(the)h(v)n(alue)e(of)h(some)f
(particular)h(v)n(ariable)f(is)h(actually)f(a)h(constan)o(t)g(at)224
644 y(some)i(p)q(oin)o(t)f(in)h(the)h(program.)k(This)c
FK(c)n(onstant)g(pr)n(op)n(agation)j FN(will)14 b(in)o(tro)q(duce)i(y)o
(et)f(more)224 694 y(opp)q(ortunities)20 b(for)f(constan)o(t)h
(folding.)34 b(Th)o(us)20 b(it)f(is)g(necessary)j(to)d(p)q(erform)g
(constan)o(t)224 744 y(folding)13 b(again)f FK(after)18
b FN(v)n(alue)13 b(trac)o(king)h(and)f(man)o(y)f(other)j
(optimizations.)224 886 y FH(7.1.2)56 b(Keeping)17 b(information)g(in)h
(registers)224 972 y FN(The)f(reten)o(tion)g(of)e(data)h(in)f
(registers)j(for)e(m)o(ultiple)d(uses)18 b(is)d(v)o(ery)i(imp)q(ortan)o
(t,)d(so)i(as)g(to)224 1021 y(a)o(v)o(oid)11 b(unnecessary)j(data)e
(loads)g(from)e(memory)m(.)15 b(In)d(the)h(case)g(of)e
FK(RISC)19 b FN(mac)o(hines,)11 b(ev)o(en)224 1071 y(as)16
b(simple)e(an)h(expression)i(as)e(a)h(loaded)f(literal)f(v)n(alue,)h
(or)g(the)h(address)h(of)e(some)g(en)o(tire)224 1121
y(v)n(ariable)e(ma)o(y)f(b)q(e)j(a)e(v)n(aluable)g(common)e
(sub-expression.)287 1176 y(A)j(simple)f(example)g(hin)o(ts)i(at)f(wh)o
(y)g(this)h(migh)o(t)d(b)q(e)j(the)g(case.)21 b(Consider)15
b(the)g(simple)224 1226 y(task)i(of)f(reloading)f(a)h(statically)f
(allo)q(cated)h(datum)f(in)o(to)h(a)g(register)h(in)f(a)g
FK(RISC)23 b FN(arc)o(hi-)224 1275 y(tecture)16 b(mac)o(hine.)h(The)d
(sym)o(b)q(olic)e(assem)o(bly)h(language)g(migh)o(t)f(lo)q(ok)h(as)h
(follo)o(ws)e(|)372 1385 y FF(lw)g FE(varName,)p Fm(r)605
1389 y Fh(dst)372 1431 y FE(use)h Fm(r)457 1435 y Fh(dst)515
1431 y FE(as)g(op)n(er)n(and)224 1584 y FN(where)j FK(varName)h
FN(is)e(a)f(sym)o(b)q(olic)e(name)i(for)g(a)g(v)n(ariable.)k(The)d(lo)q
(cation)f(of)f(the)i(v)n(ariable)224 1634 y(will)h(b)q(e)i(kno)o(wn)e
(at)h(link-edit)f(time.)26 b(A)o(t)17 b(that)g(time)f(the)h(reference)j
(to)d(the)g(lo)q(cation)f(is)224 1684 y(\\\014xed)j(up")f(in)g(the)i
(ob)r(ject)f(\014le)f(b)o(y)h(means)e(of)h(a)g(link)o(er)g(relo)q
(cation.)32 b(In)19 b(general)f(this)224 1734 y(\014x-up)c(will)f(b)q
(e)h(a)g(32-bit)f(literal.)287 1788 y(Unfortunately)m(,)c(most)f(of)h
(these)i(mac)o(hines)d(only)h(allo)o(w)f(short)i(literals)f(in)g(their)
h(op)q(co)q(de)224 1838 y(formats,)g(and)i(th)o(us)g(require)g(t)o(w)o
(o)f(instructions)i(to)e(load)f(a)i(datum)e(from)g(suc)o(h)i(a)f(sym)o
(b)q(olic)224 1888 y(address)16 b(|)320 1990 y FF(lui)49
b(hibits'va)o(rNa)o(me)o(,)p Fm(v)745 1994 y Fh(n)1069
1990 y FF(;)13 b FE(lo)n(ad)f(upp)n(er)g(half)320 2035
y FF(lx)69 b(lobits'va)o(rNa)o(me)o(\()p Fm(v)745 2039
y Fh(n)763 2035 y FF(\),)p Fm(r)820 2039 y Fh(dst)1069
2035 y FF(;)13 b FE(lo)n(ad)f(at)h(o\013set)1069 2081
y FF(;)g FE(lo)n(ad)f(delay)g(her)n(e?)320 2127 y(use)h
Fm(r)405 2131 y Fh(dst)463 2127 y FE(as)g(op)n(er)n(and)224
2234 y FN(where)h(\\)p FG(lui)p FN(")d(is)h(a)g FK(lo)n(ad)h(imme)n
(diate)g(upp)n(er)k FN(instruction,)12 b(and)g(where)i
FK(hibits')i FN(and)c FK(lobits')224 2284 y FN(are)17
b(attribute)f(functions)g(whic)o(h)g(extract)h(the)g(relev)n(an)o(t)f
(bits)g(from)e(the)j(32-bit)e(address)224 2334 y(at)f(link)f(time.)287
2389 y(As)18 b(detailed)f(in)h(the)g(later)g(section)g(on)g
(instruction)g(sc)o(heduling,)g(there)h(is)e(a)h(dela)o(y)224
2438 y(after)c(the)h(issuing)e(of)h(a)f(load)g(instruction,)h(b)q
(efore)g(the)h(op)q(erand)f(b)q(ecomes)g(a)o(v)n(ailable)e(for)224
2488 y(use)j(b)o(y)f(later)h(instructions.)k(F)m(or)14
b(man)o(y)e FK(RISC)21 b FN(mac)o(hines)13 b(this)i(dela)o(y)e(is)h(a)g
(single)g(cycle.)224 2538 y(In)f(some)f(cases)i(the)f(compiler)f(is)g
(able)h(to)f(\014nd)h(a)g(useful)f(instruction)h(to)g(sc)o(hedule)h(in)
e(this)224 2588 y(dela)o(y)h(slot,)g(but)h(this)f(is)g(not)h(alw)o(a)o
(ys)e(p)q(ossible.)18 b(In)13 b(this)h(t)o(ypical)e(case)j(k)o(eeping)e
(the)h(v)n(alue)224 2638 y(in)j(a)f(register,)i(rather)g(than)f
(redundan)o(tly)f(reloading)g(it,)h(will)e(sa)o(v)o(e)i(as)g(m)o(uc)o
(h)e(as)i(three)224 2688 y(mac)o(hine)c(cycles.)p eop
%%Page: 194 200
194 199 bop 224 274 a FN(194)342 b FL(CHAPTER)14 b(7.)31
b(INTR)o(ODUCTION)14 b(TO)g(OPTIMIZA)m(TION)224 390 y
FH(7.1.3)56 b(Common)16 b(sub-expression)i(eliminati)o(on)224
468 y FN(Common)8 b(sub-expression)13 b(elimination)8
b(\(CSE\))k(is)f(the)h(optimization)d(whic)o(h)i(\014nds)h(parts)224
518 y(of)k(computations)f(whic)o(h)h(are)g(rep)q(eated,)i(and)e
(retains)h(the)f(v)n(alue)g(from)e(the)j(\014rst)g(com-)224
568 y(putation)f(for)g(subsequen)o(t)i(reuse.)27 b(There)18
b(are)f(t)o(w)o(o)f(v)n(arian)o(ts)f(on)h(this)h(transformation.)224
618 y(Lo)q(cal-CSE)11 b(elimination)d(attempts)i(to)h(\014nd)g(reuses)i
(of)d(the)i(same)e(sub-expression)i(within)224 668 y(the)i(same)f
(\(extended\))i(basic)e(blo)q(c)o(k,)g(while)f(global-CSE)g
(elimination)e(attempts)j(to)g(\014nd)224 718 y(reuses)j(of)d
(sub-expressions)j(within)d(the)i(same)e(pro)q(cedure.)287
768 y(In)g(either)i(case,)f(there)h(are)f(t)o(w)o(o)f(issues)i(to)f(b)q
(e)g(considered.)19 b(Is)14 b(a)g(previous)g(computa-)224
818 y(tion)i(of)f(the)i(same)e(expression)i FK(available)s
FN(,)f(and)g(is)f(the)i(previous)f(v)n(alue)g(still)f
FK(valid)t FN(.)24 b(By)224 868 y(b)q(eing)16 b(a)o(v)n(ailable,)c(w)o
(e)k(mean)e(that)h(some)f(other)i(o)q(ccurrence)i(of)d(the)h(same)e
(computation)224 917 y(lies)g(along)e FK(every)k FN(con)o(trol)d(path)h
(whic)o(h)f(leads)g(to)g(the)h(new)g(o)q(ccurrence.)20
b(This)14 b(is)f(easy)g(to)224 967 y(ensure)k(for)e(lo)q(cal)g(CSEs.)23
b(Recall)14 b(the)i(de\014ning)f(prop)q(ert)o(y)i(of)d(an)h(extended)i
(basis)f(blo)q(c)o(k)224 1017 y(is)f(that)g(all)e(preceding)j
(instructions)f(in)f(a)h(blo)q(c)o(k)f(are)h(executed)i(b)q(efore)e
(con)o(trol)g(reac)o(hes)224 1067 y(an)o(y)f(particular)f(instruction.)
287 1117 y(V)m(alidit)o(y)f(is)j(the)h(prop)q(ert)o(y)f(that)g(guaran)o
(tees)h(that)f(if)f(the)h(computation)e(w)o(ere)j(to)f(b)q(e)224
1167 y(rep)q(eated)i(then)f(the)g(same)f(v)n(alue)f(w)o(ould)h(b)q(e)h
(pro)q(duced.)23 b(Supp)q(ose)16 b(that)g(w)o(e)f(ha)o(v)o(e)g(some)224
1217 y(computation,)f(sa)o(y)g(\()p FM(a)d FN(+)f FM(b)p
FN(\).)21 b(If)15 b(w)o(e)g(ha)o(v)o(e)g(some)g(later)g(o)q(ccurrence)j
(of)c(\()p FM(a)c FN(+)g FM(b)p FN(\))15 b(the)h(CSE)224
1267 y(is)f(v)n(alid)e(only)i(if)f(w)o(e)h(can)g(b)q(e)g(absolutely)g
(certain)g(that)g(neither)h(the)f(v)n(alue)g(of)f FM(a)h
FN(nor)g(the)224 1317 y(v)n(alue)g(of)g FM(b)g FN(could)h(ha)o(v)o(e)f
(b)q(een)i(mo)q(di\014ed)d(b)o(y)h(the)h(in)o(terv)o(ening)f
(instructions.)24 b(This)15 b(ma)o(y)224 1367 y(b)q(e)f(quite)g
(di\016cult)e(to)i(certify)f(if,)f(for)h(example,)f(either)i
FM(a)f FN(or)h FM(b)f FN(is)g(a)g(global)f(v)n(ariable,)f(and)224
1416 y(there)16 b(is)d(a)h(pro)q(cedure)i(call)d(b)q(et)o(w)o(een)i
(the)g(t)o(w)o(o)e(computations.)224 1536 y FH(7.1.4)56
b(V)-5 b(alue)18 b(trac)n(king)224 1614 y FN(V)m(alue)d(trac)o(king)f
(is)h(another)g(optimization)d(whic)o(h)j(is)f(often)h(done)g(together)
h(with)e(CSE-)224 1664 y(elimination.)h(As)f(for)f(CSE-elimination,)d
(there)15 b(are)e(b)q(oth)h(lo)q(cal)e(and)h(global)f(v)o(ersions)i(of)
224 1714 y(this)g(optmization.)287 1765 y(V)m(alue)19
b(trac)o(king)g(retains)h(expressions)h(whic)o(h)f(ha)o(v)o(e)f(b)q
(een)i(assigned)f(to)g(v)n(ariables,)224 1814 y(and)15
b(substitutes)i(the)e(retained)h(v)n(alues)f(for)f(references)k(to)d
(the)g(destination)g(v)n(ariable)f(in)224 1864 y(subsequen)o(t)i(co)q
(de.)287 1915 y(Note)e(the)g(imp)q(ortan)o(t)f(di\013erence)i(b)q(et)o
(w)o(een)h(these)f(t)o(w)o(o)e(cases)j(|)320 2004 y Fw(\001)6
b(\001)g(\001)g FD(\()p Fm(a)j FD(+)g Fm(b)p FD(\))d
Fw(\001)g(\001)g(\001)425 b FF(v)19 b(:=)31 b FE(expr)n(ession)320
2050 y(intervening)11 b(statements...)223 b(intervening)10
b(statements...)320 2095 y Fw(\001)c(\001)g(\001)g FD(\()p
Fm(a)j FD(+)g Fm(b)p FD(\))d Fw(\001)g(\001)g(\001)425
b(\001)6 b(\001)g(\001)g FF(v)g Fw(\001)g(\001)g(\001)224
2189 y FN(in)k(the)h(left)g(hand)f(\(CSE\))h(case,)h(the)f(sub)q
(expression)h(\()p FM(a)r FN(+)r FM(b)p FN(\))f(is)g(rep)q(eated,)h
(and)e(if)g(the)h(v)n(alue)224 2239 y(is)i(still)e(v)n(alid)g(the)i
(result)g(of)f(the)h(\014rst)g(computation)e(ma)o(y)f(b)q(e)j(reused.)
19 b(In)13 b(the)f(righ)o(t)g(hand)224 2288 y(\(v)n(alue)j(trac)o
(king\))f(case,)i(the)f FK(expr)n(ession)j FN(is)d(not)g(rep)q(eated,)h
(but)f(the)g(v)n(ariable)f(to)g(whic)o(h)224 2338 y(the)20
b(expression)f(w)o(as)g(assigned)g(app)q(ears)g(later.)32
b(In)19 b(this)f(second)i(case)f(w)o(e)g(retain)g(the)224
2388 y(v)n(alue)c(of)g(the)h(assigned)g(expression,)h(so)f(that)f(it)g
(ma)o(y)f(b)q(e)i(substituted)h(for)e(o)q(ccurrences)224
2438 y(of)f(the)g(v)n(ariable.)287 2488 y(With)f(b)q(oth)h(v)n(alue)f
(trac)o(king)h(and)f(common)e(sub-expression)16 b(eliminatio)o(n)11
b(the)k(ques-)224 2538 y(tion)i(of)f FK(liveness)k FN(of)c(the)i(sa)o
(v)o(ed)f(v)n(alues)g(is)f(an)h(issue.)28 b(Note)17 b(that)g(an)o(y)f
(assignmen)o(t)g(\(or)224 2588 y(ev)o(en)e(threat)g(of)f(p)q(ossible)h
(assignmen)o(t\))e(to)h FM(a)g FN(or)h FM(b)f FN(in)g(the)h(in)o(terv)o
(ening)f(instructions)h(will)224 2638 y(kill)d(the)i(common)d
(sub-expression)j(in)f(the)h(example)e(ab)q(o)o(v)o(e.)17
b(By)c(constrast,)g(assignmen)o(t)224 2688 y(to)h(one)g(of)e(the)j(op)q
(erands)f(of)f(the)h(expression)h(in)e(the)h(v)n(alue)f(trac)o(king)g
(example)f(do)q(es)i(not)p eop
%%Page: 195 201
195 200 bop 224 274 a FL(7.1.)31 b(INTR)o(ODUCTION)943
b FN(195)224 390 y(kill)16 b(the)i(v)n(alue.)27 b(Only)17
b(assignmen)o(t)g(\(or)g(threatening\))h(of)f(the)h(destination)f(v)n
(ariable)f FM(v)224 440 y FN(kills)d(the)i(sa)o(v)o(ed)f(v)n(alue)f(in)
g(the)i(v)n(alue)e(trac)o(king)h(example.)224 564 y FH(7.1.5)56
b(Lo)n(w)n(ering)19 b(register)e(pressure)224 643 y FN(An)12
b(imp)q(ortan)o(t)e(asp)q(ect)j(of)e(man)o(y)f(optimizations)f(is)j
(that)f(redundan)o(t)i(computation,)c(and)224 693 y(redundan)o(t)15
b(references)i(to)d(memory)e(are)j(remo)o(v)o(ed.)j(In)c(order)h(to)f
(do)g(this,)g(the)h(lifetimes)224 743 y(of)i(v)n(arious)f(v)n(alues)h
(held)g(in)g(mac)o(hine)f(registers)i(is)f(lengthened.)29
b(All)16 b(suc)o(h)i(algorithms)224 793 y FK(r)n(aise)12
b(r)n(e)n(gister)f(pr)n(essur)n(e)s FN(,)f(b)o(y)h(requiring)f(a)h
(greater)h(supply)f(of)f(registers)i(at)f(critical)f(p)q(oin)o(ts)224
842 y(in)i(the)h(program.)j(In)d(man)o(y)d(cases,)k(the)f(adv)n(an)o
(tage)f(whic)o(h)g(can)h(b)q(e)g(obtained)f(b)o(y)g(the)h(use)224
892 y(of)h(optimization)e(is)i(limited)f(b)o(y)h(the)h(supply)f(of)g
(registers)i(whic)o(h)f(are)f(a)o(v)n(ailable)f(to)h(hold)224
942 y(useful)g(v)n(alues.)k(Th)o(us)c(it)g(is)g(imp)q(ortan)o(t)e(to)h
(prev)o(en)o(t)i(unnecessary)h(register)f(usage.)287
993 y(As)h(will)e(b)q(e)j(noted)f(in)g(a)f(later)h(c)o(hapter,)h
(optimal)c(register)k(allo)q(cation)d(is)i(a)g(compu-)224
1043 y(tationally)h(infeasible)h(problem.)31 b(Nev)o(ertheless,)21
b(there)f(are)f(a)f(n)o(um)o(b)q(er)g(of)g(imp)q(ortan)o(t)224
1093 y(tec)o(hniques)e(whic)o(h)f(lo)o(w)o(er)f(register)h(pressure,)i
(at)d(mo)q(derate)g(computational)e(cost.)21 b(The)224
1143 y(\014rst)15 b(of)e(these)j(is)d(the)i(Sethi-Ullman)c(algorithm.)
224 1258 y FO(The)16 b(Sethi-Ull)o(man)c(algorithm)224
1337 y FN(The)19 b(Sethi-Ullman)d(algorithm)g(demonstrates)j(an)f
(optimal)e(ordering)i(for)g(expression)224 1387 y(tree)g(ev)n
(aluation,)e(so)g(as)h(to)f(use)i(the)f(minim)o(al)c(n)o(um)o(b)q(er)j
(of)g(registers.)28 b(It)17 b(is)f(imp)q(ortan)o(t)224
1437 y(in)h(its)f(o)o(wn)h(righ)o(t,)f(but)h(ev)o(en)h(more)e(so)h(for)
f(the)h FO(most)i(complicated)d(\014rst)f FN(principle)224
1486 y(whic)o(h)f(it)g(epitomizes.)287 1538 y(During)21
b(expression)i(ev)n(aluation)e(sub)q(expressions)j(are)f(ev)n(aluated)f
(in)o(to)f(registers,)224 1588 y(whic)o(h)c(are)h(then)g(used)g(in)f
(the)h(computation)d(of)i(other)g(sub)q(expressions.)31
b(The)17 b(imp)q(or-)224 1637 y(tan)o(t)d(metric)f(whic)o(h)h(w)o(e)g
(wish)f(to)h(minim)o(ize)d(is)j(the)g(\\p)q(eak")g(n)o(um)o(b)q(er)f
(of)g(registers)i(whic)o(h)224 1687 y(are)i(used)f(during)g(the)g(ev)n
(aluation)e(of)i(a)f(particular)h(expression.)24 b(As)17
b(w)o(e)f(shall)f(see,)i(the)224 1737 y(problem)c(has)h(an)g(elegan)o
(t)f(recursiv)o(e)j(solution.)287 1788 y(Let)11 b(us)g(presume,)g(as)f
(a)g(\014rst)i(example,)d(that)i(a)f(particular)g(mac)o(hine)g(has)g(a)
h(load/store)224 1838 y(arc)o(hitecture.)34 b(Th)o(us)18
b(v)n(alues)h(m)o(ust)e(b)q(e)i(loaded)f(in)o(to)g(registers)h(b)q
(efore)h(b)q(eing)e(used)h(as)224 1888 y(op)q(erands)e(in)f(an)o(y)f
(computational)f(instructions.)24 b(The)17 b(p)q(eak)f(n)o(um)o(b)q(er)
f(of)g(registers)j(re-)224 1938 y(quired)d(to)e(compute)h(the)g(v)n
(alue)f(of)h(a)f(tree)i(consisting)f(of)f(a)h(single)g(leaf)f(is)h
(one.)287 1989 y(No)o(w)h(let)h(us)h(consider)f(the)h(general)f(case.)
25 b(A)16 b(binary)g(op)q(erand)g(has)g(t)o(w)o(o)g(sub-trees,)224
2039 y(and)h(w)o(e)g(shall)f(presume)h(without)f(loss)h(of)f(generalit)
o(y)h(that)f(the)i(p)q(eak)f(n)o(um)o(b)q(er)f(of)g(reg-)224
2088 y(isters)i(required)g(to)f(compute)f(the)i(left)e(and)h(righ)o(t)f
(subtrees)j(is)e FM(n)g FN(and)g FM(m)g FN(resp)q(ectiv)o(ely)224
2138 y(\(\014gure)e(7.2\).)287 2189 y(Let)k(us)f(supp)q(ose)i(that)e(w)
o(e)h(compute)f(the)h(left)f(sub)q(expression)i(\014rst.)33
b(During)17 b(this)224 2239 y(ev)n(aluation)i(w)o(e)g(use)i(a)e(maxim)n
(um)d(of)j FM(n)g FN(registers.)37 b(When)19 b(w)o(e)h(ha)o(v)o(e)g
(completed)f(the)224 2289 y(ev)n(aluation,)11 b(the)h(result)h(is)f
(held)g(in)f(a)h(single)f(register,)i(and)f(o)q(ccupies)h(that)f
(register)h(while)224 2339 y(the)f(righ)o(t)e(sub)q(expression)i(is)f
(ev)n(aluated.)16 b(Computation)9 b(of)h(the)h(righ)o(t)f(sub)q
(expression,)j(b)o(y)224 2389 y(assumption,)f(requires)i(an)f
(additional)e FM(m)i FN(registers.)19 b(It)13 b(follo)o(ws)e(that)i
(the)h(p)q(eak)f(n)o(um)o(b)q(er)224 2438 y(of)e(registers)i(required)f
(for)f(this)g(ev)n(aluation)f(is)h FK(max)5 b FN(\()p
FM(n;)i(m)i FN(+)h(1\))h(where)h(the)g FK(max)17 b FN(function)224
2488 y(returns)c(the)f(larger)g(of)f(its)g(t)o(w)o(o)g(argumen)o(ts.)16
b(By)c(symmetry)m(,)d(if)i(the)h(other)g(p)q(ossible)g(order)224
2538 y(of)i(ev)n(aluation)f(is)i(c)o(hosen)g(the)g(p)q(eak)g(n)o(um)o
(b)q(er)f(of)g(registers)i(required)f(is)g FK(max)5 b
FN(\()p FM(n)10 b FN(+)f(1)p FM(;)e(m)p FN(\).)224 2588
y(Th)o(us,)14 b(w)o(e)f(conclude)i(the)f(follo)o(wing:)h(if)e(the)h(n)o
(um)o(b)q(er)e(of)h(registers)i(required)g(for)e(the)h(t)o(w)o(o)224
2638 y(sub)q(expressions)i(is)e(the)g(same,)e(sa)o(y)i
FM(n)p FN(,)f(then)h(the)h(n)o(um)o(b)q(er)e(of)g(registers)i(required)
f(for)g(the)224 2688 y(complete)h(expression)i(is)e FM(n)10
b FN(+)g(1.)22 b(On)16 b(the)g(other)g(hand)f(if)g FM(n)g
FN(and)g FM(m)h FN(are)f(di\013eren)o(t,)h(and)p eop
%%Page: 196 202
196 201 bop 224 274 a FN(196)342 b FL(CHAPTER)14 b(7.)31
b(INTR)o(ODUCTION)14 b(TO)g(OPTIMIZA)m(TION)609 349 y
 10590863 7104430 0 0 10590863 7104430 startTexFig

609 349 a
%%BeginDocument: binExp.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-102.0 147.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Ellipse
n 150 111 11 11 0 360 DrawEllipse gs col-1 s gr
% Polyline
n 145 120 m 129 151 l  170 151 l  155 120 l gs 0.95 setgray fill gr
gs col-1 s gr
% Ellipse
n 250 111 11 11 0 360 DrawEllipse gs col-1 s gr
% Polyline
n 245 120 m 229 151 l  270 151 l  255 120 l gs 0.95 setgray fill gr
gs col-1 s gr
% Ellipse
n 198 61 18 18 0 360 DrawEllipse gs col-1 s gr
0.500 setlinewidth
% Open spline
n 208.000 77.000 m 213.500 84.500 l
	213.500 84.500 219.000 92.000 234.500 86.000 DrawSplineSection
	234.500 86.000 250.000 80.000 250.000 90.000 DrawSplineSection
	250.000 100.000 l gs col-1 s gr
n 252.000 92.000 m 250.000 100.000 l 248.000 92.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 192.000 77.000 m 186.500 84.500 l
	186.500 84.500 181.000 92.000 165.500 86.000 DrawSplineSection
	165.500 86.000 150.000 80.000 150.000 90.000 DrawSplineSection
	150.000 100.000 l gs col-1 s gr
n 152.000 92.000 m 150.000 100.000 l 148.000 92.000 l gs 2 setlinejoin col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
187 64 m 
gs 1 -1 scale (binop) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
113 163 m 
gs 1 -1 scale (left subexpression) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
213 163 m 
gs 1 -1 scale (right subexpression) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
246 131 m 
gs 1 -1 scale (m) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
241 144 m 
gs 1 -1 scale (regs) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
141 144 m 
gs 1 -1 scale (regs) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
147 132 m 
gs 1 -1 scale (n) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 616 890 a FN(Figure)f(7.2:)18 b(A)13 b(binary)h(expression)h(tree)224
1029 y(the)h(more)e(demanding)f(of)h(the)i(t)o(w)o(o)e(expressions)i
(is)f(ev)n(aluated)g(\014rst,)g(then)h(the)f(n)o(um)o(b)q(er)224
1078 y(required)g(for)f(the)g(complete)g(expression)h(is)e(just)h
FK(max)5 b FN(\()p FM(n;)i(m)p FN(\))q(.)p 270 1230 1350
2 v 269 1276 2 46 v 335 1262 a FF(1)38 b(PROCEDURE)16
b(Number\(node)g(:)j(ExprDesc;)d(VAR)j(num)f(:)h(CARDINAL\);)p
1619 1276 V 269 1321 V 335 1307 a(2)78 b(VAR)18 b(lNum,rNum)e(:)j
(CARDINAL;)p 1619 1321 V 269 1367 V 335 1353 a(3)38 b(BEGIN)p
1619 1367 V 269 1412 V 335 1399 a(4)78 b(IF)18 b(exp^.tag)f(IN)i
(binops)e(THEN)p 1619 1412 V 269 1458 V 335 1444 a(5)117
b(Number\(ex)o(p^.)o(le)o(ftO)o(p,)o(lNu)o(m\);)p 1619
1458 V 269 1504 V 335 1490 a(6)g(Number\(ex)o(p^.)o(ri)o(ght)o(Op)o
(,rN)o(um\))o(;)p 1619 1504 V 269 1549 V 335 1536 a(7)g(IF)g(lNum)18
b(>)h(rNum)f(THEN)g(num)h(:=)f(lNum;)p 1619 1549 V 269
1595 V 335 1581 a(8)117 b(ELSIF)57 b(rNum)18 b(>)h(lNum)f(THEN)g(num)h
(:=)f(rNum;)p 1619 1595 V 269 1641 V 335 1627 a(9)117
b(ELSE)18 b(\(*)h(lNum)f(=)h(rNum)f(*\))58 b(num)19 b(:=)f(lNum)h(+)g
(1;)p 1619 1641 V 269 1686 V 315 1673 a(10)117 b(END;)p
1619 1686 V 269 1732 V 315 1718 a(11)78 b(ELSIF)17 b(exp^.tag)g(IN)i
(unarys)e(THEN)p 1619 1732 V 269 1778 V 315 1764 a(12)117
b(Number\(ex)o(p^.)o(ch)o(ild)o(Op)o(,nu)o(m\);)p 1619
1778 V 269 1823 V 315 1810 a(13)78 b(ELSIF)17 b(exp^.tag)g(=)i(literal)
e(THEN)p 1619 1823 V 269 1869 V 315 1855 a(14)117 b(num)18
b(:=)h(0;)p 1619 1869 V 269 1915 V 315 1901 a(15)78 b(ELSE)18
b(\(*)g(assert:)f(tag)i(=)g(designator)d(*\))p 1619 1915
V 269 1960 V 315 1947 a(16)117 b(NumberDes)o(ign)o(at)o(or\()o(ex)o
(p,n)o(um\))o(;)p 1619 1960 V 269 2006 V 315 1992 a(17)78
b(END;)p 1619 2006 V 269 2052 V 315 2038 a(18)g(exp^.set)o(hiN)o(um)16
b(:=)j(num;)p 1619 2052 V 269 2097 V 315 2084 a(19)38
b(END)19 b(Number;)p 1619 2097 V 270 2099 1350 2 v 327
2217 a FN(Figure)14 b(7.3:)j(Calculating)c(Sethi)h(n)o(um)o(b)q(ers)f
(for)h(a)f(load/store)h(arc)o(hitecture)287 2336 y(W)m(e)g(ma)o(y)g(th)
o(us)h(ev)n(aluate)g(the)h(minim)o(al)11 b(n)o(um)o(b)q(er)k(of)f
(registers)j(required)f(for)e(ev)n(alua-)224 2386 y(tion)i(of)g(a)g
(particular)g(expression)i(tree)f(during)f(a)g(recursiv)o(e)i(tra)o(v)o
(ersal.)25 b(The)17 b(tra)o(v)o(ersal)224 2436 y(annotates)e(eac)o(h)f
(expression)g(with)g(the)g(minim)o(al)c(n)o(um)o(b)q(er)j(of)g
(registers)i(required)g(for)e(its)224 2485 y(ev)n(aluation.)26
b(This)17 b(is)g(called)f(the)i FK(Sethi)f(numb)n(er)22
b FN(of)16 b(the)i(no)q(de.)27 b(Figure)17 b(7.3)f(giv)o(es)h(the)224
2535 y(co)q(de)d(of)e(a)g(n)o(um)o(b)q(ering)g(pro)q(cedure.)19
b(The)13 b(calculation)f(of)g(the)i(n)o(um)o(b)q(ers)e(for)g
(designators,)224 2585 y(whic)o(h)h(ma)o(y)e(in)o(v)o(olv)o(e)h
(recursiv)o(e)i(n)o(um)o(b)q(ering)e(of)g(index)h(expressions,)h(is)f
(abstracted)h(a)o(w)o(a)o(y)224 2635 y(and)g(left)g(as)g(an)f
(exercise.)287 2688 y(Mac)o(hine)h(arc)o(hitectures)i(where)f(one)f(of)
g(the)g(op)q(erands)h(of)e(a)h(binary)f(op)q(eration)h(ma)o(y)p
eop
%%Page: 197 203
197 202 bop 224 274 a FL(7.1.)31 b(INTR)o(ODUCTION)943
b FN(197)224 390 y(b)q(e)14 b(tak)o(en)g(from)e(memory)f(need)j(a)f
(sligh)o(tly)f(mo)q(di\014ed)g(algorithm)f(to)i(compute)g(the)h(Sethi)
224 440 y(n)o(um)o(b)q(ers)h(of)g(leaf)f(no)q(des.)22
b(In)16 b(the)f(giv)o(en)g(co)q(de,)h(these)g(details)f(w)o(ould)f(b)q
(e)i(hidden)f(in)g(the)224 490 y FK(Numb)n(erDesignator)k
FN(call.)g(It)c(ma)o(y)d(also)i(b)q(e)h(noted)g(that)g(w)o(e)f(are)h
(assuming,)e(at)h(line)g(14,)224 540 y(that)i(literals)f(do)g(not)g
(need)i(to)e(b)q(e)h(loaded)f(in)o(to)f(registers.)24
b(F)m(or)15 b(most)g FK(RISC)21 b FN(mac)o(hines)224
590 y(this)14 b(is)g(only)f(correct)j(for)d(certain)i(uses,)f(and)g
(for)g(su\016cien)o(tly)f(small)f(literals.)287 643 y(The)k(co)q(de)g
(emission)f(tra)o(v)o(ersal)g(of)g(a)h(n)o(um)o(b)q(ered)f(tree)i(is)f
(a)f(mo)q(d\014ed)g(v)o(ersion)h(of)f(\014g-)224 693
y(ure)g(4.2,)d(and)i(is)g(outlined)f(in)h(\014gure)g(7.4.)p
270 846 1350 2 v 269 892 2 46 v 295 878 a FF(PROCEDURE)i(PushValue\(e)o
(xp)g(:)j(ExprDesc\);)p 1619 892 V 269 937 V 295 924
a(BEGIN)p 1619 937 V 269 983 V 335 969 a(IF)f(exp^.tag)f(IN)i(binops)e
(THEN)p 1619 983 V 269 1029 V 374 1015 a(IF)i(exp^.rig)o(htO)o(p^.)o
(se)o(thi)o(Nu)o(m)e(>)i(exp^.left)o(Op^)o(.se)o(th)o(iNu)o(m)d(THEN)p
1619 1029 V 269 1074 V 413 1061 a(PushValue)o(\(ex)o(p^.)o(ri)o(ght)o
(Op)o(\);)p 1619 1074 V 269 1120 V 413 1106 a(PushValue)o(\(ex)o(p^.)o
(le)o(ftO)o(p\))o(;)p 1619 1120 V 269 1166 V 413 1152
a(EmitInstr)o(uct)o(ion)o(\(s)o(wap)o(2\))o(;)p 1619
1166 V 269 1211 V 374 1198 a(ELSE)p 1619 1211 V 269 1257
V 413 1243 a(PushValue)o(\(ex)o(p^.)o(le)o(ftO)o(p\))o(;)p
1619 1257 V 269 1303 V 413 1289 a(PushValue)o(\(ex)o(p^.)o(ri)o(ght)o
(Op)o(\);)p 1619 1303 V 269 1348 V 374 1335 a(END;)p
1619 1348 V 269 1394 V 374 1380 a(EmitInstr)o(uc)o(tio)o(n\(t)o(ag)o
(ToO)o(pC)o(ode)o(Map)o([e)o(xp^)o(.t)o(ag])o(\);)p 1619
1394 V 269 1440 V 335 1426 a(ELSIF)h(exp^.tag)g(IN)i(unarys)e(THEN)p
1619 1440 V 269 1485 V 374 1472 a(...)p 1619 1485 V 269
1531 V 1619 1531 V 270 1533 1350 2 v 420 1649 a FN(Figure)d(7.4:)j(tra)
o(v)o(ersal)d(pro)q(cedure)i(for)d(n)o(um)o(b)q(ered)h(expressions)224
1848 y FH(7.1.6)56 b(Instruction)18 b(sc)n(heduling)224
1931 y FN(Mo)q(dern)e(computer)e(arc)o(hitectures)j(rely)d(on)h
(instruction)g(lev)o(el)f(parallelism)e(to)i(pro)q(duce)224
1981 y(additional)e(sp)q(eed.)19 b(This)13 b(o)o(v)o(erlapping)f(of)g
(instruction)h(execution)h(arises)g(from)d(t)o(w)o(o)i(sep-)224
2030 y(arate)f(mec)o(hanisms.)j(Firstly)m(,)10 b(the)h(use)h(of)e
(instruction)i(execution)f(pip)q(elines)g(is)g(univ)o(ersal,)224
2080 y(with)g(pip)q(eline)g(depths)i(of)d(four)h(or)g(\014v)o(e)h(b)q
(eing)f(common)d(in)j(en)o(try)h(lev)o(el)e(implemen)o(tations)224
2130 y(of)h FK(RISC)18 b FN(arc)o(hitectures.)i(The)11
b(use)i(of)e(an)g(execution)h(pip)q(eline)f(allo)o(ws)g(the)h(time)e(b)
q(et)o(w)o(een)224 2180 y(the)i(issue)g(of)f(adjacen)o(t)h
(instructions)g(to)f(b)q(e)h(m)o(uc)o(h)e(less)i(than)g(the)g(time)e
(tak)o(en)h(to)g(actually)224 2230 y(complete)k(eac)o(h)g(instruction.)
22 b(Secondly)m(,)14 b(mo)q(dern)g(sup)q(erscalar)1261
2215 y Fz(2)1296 2230 y FN(micropro)q(cessors)i(rely)224
2280 y(on)f(the)g(existence)h(of)e(m)o(ultiple)e(execution)k(units)e
(to)h(allo)o(w)e FK(multiple)i(instruction)g(issue)p
FN(.)224 2329 y(Issue)k(widths)f(of)e(t)o(w)o(o)h(and)h(three)g(are)g
(no)o(w)f(common,)e(and)j(greater)g(issue)g(widths)g(are)224
2379 y(lik)o(ely)13 b(within)g(a)h(few)g(y)o(ears.)287
2432 y(The)f(existence)j(of)c(instruction)i(pip)q(elines)f(requires)i
(some)d(reordering)i(of)f(the)h(logical)224 2482 y(instruction)j
(stream,)e(if)h(adv)n(an)o(tage)f(of)g(the)i(p)q(oten)o(tial)e(for)h
(execution)h(o)o(v)o(erlap)e(is)h(to)g(b)q(e)p 224 2531
577 2 v 271 2558 a Fy(2)288 2569 y Fx(Mac)o(hines)8 b(whic)o(h)i(are)f
(theoretically)d(capable)i(of)i(executing)d(more)i(than)g(one)g
(instruction)e(p)q(er)i(clo)q(c)o(k)224 2609 y(cycle)k(from)g(a)h
(single)f(instruction)e(and)i(data)g(stream)f(are)i(called)e
Fu(sup)n(ersc)n(alar)19 b Fx(mac)o(hines.)i(This)14 b(is)g(to)224
2648 y(distinguish)9 b(suc)o(h)i(mac)o(hines)e(from)i
Fu(ve)n(ctor)17 b Fx(mac)o(hines)9 b(whic)o(h)i(obtain)f(instruction)f
(lev)o(el)h(parallelism)f(b)o(y)224 2688 y(op)q(erating)g(on)i
(parallel)f(\\v)o(ector")f(data.)p eop
%%Page: 198 204
198 203 bop 224 274 a FN(198)342 b FL(CHAPTER)14 b(7.)31
b(INTR)o(ODUCTION)14 b(TO)g(OPTIMIZA)m(TION)224 390 y
FN(realized.)25 b(The)16 b(problems)f(whic)o(h)g(ha)o(v)o(e)h(to)g(b)q
(e)g(solv)o(ed)g(are)g(the)h(dep)q(endencies)h(b)q(et)o(w)o(een)224
440 y(instructions,)d(and)e(resource)j(con\015icts.)287
491 y(If)h(one)h(instruction)g(is)g(issued,)h(and)e(the)i(next)f
(instruction)g(has)g(to)f(w)o(ait)g(b)q(efore)i(it)224
540 y(can)e(b)q(e)h(issued,)g(then)f(w)o(e)g(sa)o(y)g(that)g(w)o(e)g
(ha)o(v)o(e)g(an)f FK(instruction)h(isssue)h(stal)r(l)t
FN(,)f(or)g(a)f FK(bub-)224 590 y(ble)h FN(in)f(the)i(pip)q(eline.)27
b(Suc)o(h)17 b(a)g(bubble)g(causes)h(a)f(direct)g(loss)g(of)g(p)q
(erformance,since)g(it)224 640 y(represen)o(ts)f(a)d(mac)o(hine)f
(cycle)i(during)f(whic)o(h)g(no)g(new)g(w)o(ork)g(is)g(started.)19
b(The)13 b(aim)e(of)i(in-)224 690 y(struction)g(sc)o(heduling)g(is)f
(to)g(reorder)h(instructions)g(so)f(that)h(the)f(mac)o(hine)f(cycle)i
(w)o(astage)224 740 y(is)h(minim)o(ized,)d(but)j(the)h(seman)o(tics)e
(of)h(the)g(program)e(are)j(unaltered.)287 790 y(The)h(need)g(for)g
(suc)o(h)g(instruction)g(sc)o(heduling)g(arose)g(\014rst)g(in)f(the)i
(con)o(text)f(of)f FK(RISC)224 840 y FN(mac)o(hines,)i(but)g(is)g(no)o
(w)g(univ)o(ersal.)27 b(Ev)o(en)18 b(apparen)o(tly)f
FK(CISC)23 b FN(mac)o(hines)16 b(suc)o(h)i(as)f(the)224
890 y FK(Intel-486)27 b FN(ha)o(v)o(e)20 b(in)o(ternal)f(mec)o(hanisms)
g(whic)o(h)h(are)g(pip)q(elined.)37 b(In)20 b(the)h(case)g(of)f(the)224
939 y(In)o(tel)15 b(mac)o(hine)d(this)j(exhibits)f(itself)g(in)f(suc)o
(h)i(phenomena)f(as)g(a)g(one)g(cycle)h(dela)o(y)f(in)g(the)224
989 y(execution)i(if)f(the)g(result)h(of)f(an)g(instruction)g(is)g
(used)h(on)f(the)h(v)o(ery)f(next)h(instruction)f(as)224
1039 y(an)f(index)g(or)g(base)g(address)h(register.)224
1150 y FO(Instruction)e(dep)q(endencies)224 1227 y FN(There)f(are)e
(three)h(kinds)f(of)g(logical)e(dep)q(endencies)13 b(whic)o(h)d(t)o(w)o
(o)f(instructions)i(ma)o(y)d(exhibit.)224 1277 y(These)16
b(are)e FK(r)n(e)n(ad-after-write,)e(write-after-writ)o(e)i
FN(and)g FK(write-after-r)n(e)n(ad)i FN(dep)q(endencies.)287
1328 y(Supp)q(ose)f(a)f FK(V)l(AL)g FN(sequence)j(adds)d(t)o(w)o(o)g
(registers)i(and)e(compares)g(the)h(result)h(with)e(a)224
1377 y(literal.)k(The)c(instructions)g(migh)o(t)e(b)q(e)j(|)320
1466 y FF(add)68 b Fm(v)467 1470 y Fy(1)484 1466 y FD(,)p
Fm(v)514 1470 y Fy(2)531 1466 y FD(,)p Fm(v)561 1470
y Fh(dst)320 1511 y FF(cmp)g Fm(v)467 1515 y Fh(dst)512
1511 y FD(,7)224 1602 y FN(The)15 b(problem)e(is)i(that)f(the)h
(compare)f(instruction)h(cannot)f(start)h(its)g(comparison,)d(un)o(til)
224 1651 y(the)17 b(result)g(is)f(a)o(v)n(ailable)e(from)g(the)j
(previous)g(instruction.)25 b(This)16 b(is)g(a)g FK(r)n(e)n
(ad-after-write)224 1701 y FN(dep)q(endency)m(,)d(since)e(the)g(result)
g(m)o(ust)e(apparen)o(tly)h(b)q(e)h(written)g(to)f(the)h(register)g
(\014le)g(b)q(efore)224 1751 y(the)i(next)g(instruction)g(can)g(read)g
(it)f(out)g(and)g(use)i(it.)j(In)12 b(fact,)g(due)h(to)g(a)f(clev)o(er)
h(hardw)o(are)224 1801 y(design)h(tric)o(k)f(called)g
FK(r)n(esult)g(forwar)n(ding)t FN(,)f(suc)o(h)i(dela)o(ys)f(are)h
(almost)d(eliminated)g(in)i(man)o(y)224 1851 y(mac)o(hines.)37
b(Ho)o(w)o(ev)o(er,)23 b(the)e FK(r)n(e)n(ad-after-write)g
FN(dela)o(y)f(after)h(a)f(load)g(from)e(memory)g(is)224
1900 y(t)o(ypically)13 b(one)h(or)g(t)o(w)o(o)f(cycles.)287
1951 y(If)d(t)o(w)o(o)g(instructions)h(b)q(oth)g(write)g(to)f(the)h
(same)f(register,)i(then)f(the)g(instructions)g(m)o(ust)224
2001 y(b)q(e)18 b(issued)f(in)f(suc)o(h)i(an)e(order)h(that)g(their)g
(results)h(are)f(written)g(to)g(the)g(register)h(in)e(the)224
2050 y(correct)h(order.)23 b(Otherwise,)17 b(the)f(\014nal)e(register)j
(con)o(ten)o(t)f(w)o(ould)e(b)q(e)i(incorrect.)23 b(This)15
b(is)224 2100 y(an)h(example)f(of)h(a)g FK(write-after-writ)o(e)h
FN(dep)q(endency)m(,)h(it)e(is)g(a)g(constrain)o(t)g(on)g(the)h(w)o(a)o
(y)f(in)224 2150 y(whic)o(h)e(instructions)h(ma)o(y)d(b)q(e)i
(reordered.)287 2200 y(If)d(one)h(instruction)g(reads)h(from)d(a)i
(register,)g(and)g(another)g(instruction)h(writes)f(to)g(the)224
2250 y(same)j(register,)i(then)f(the)g(second)g(instruction)g(cannot)g
(b)q(e)g(issued)g(if)f(the)h(result)g(w)o(ould)224 2300
y(b)q(e)j(written)f(to)f(the)i(register)f(b)q(efore)h(the)f(\014rst)g
(instruction)g(has)g(\014nished)g(reading)g(the)224 2350
y(v)n(alue.)g(This)13 b(is)f(an)h(example)f(of)h(a)f
FK(write-after-r)n(e)n(ad)j FN(dep)q(endency)m(,)g(it)d(is)h(a)g
(constrain)o(t)h(on)224 2400 y(the)h(w)o(a)o(y)e(in)h(whic)o(h)f
(instructions)i(ma)o(y)d(b)q(e)i(reordered.)224 2510
y FO(Dela)o(y)o(ed)g(branc)o(hing)224 2588 y FN(Man)o(y)c
FK(RISC)16 b FN(mac)o(hines)8 b(ha)o(v)o(e)i(instruction)g(pip)q
(elines)f(in)h(whic)o(h)f(the)h(execution)h(of)e(branc)o(h)224
2638 y(instructions)i(tak)o(es)f(so)g(long)g(that)g(the)g(execution)h
(of)e(the)i(folo)o(wing)d(instruction)i(is)g(already)224
2688 y(irrev)o(o)q(cably)16 b(started.)24 b(Suc)o(h)16
b(a)f(follo)o(wing)e(instruction)j(is)f(said)g(to)h(b)q(e)g(in)f(the)h
FK(delay)h(slot)p eop
%%Page: 199 205
199 204 bop 224 274 a FL(7.1.)31 b(INTR)o(ODUCTION)943
b FN(199)224 390 y(of)17 b(the)h(branc)o(h.)29 b(It)17
b(is)g(alw)o(a)o(ys)f(safe)i(to)f(place)g(a)g(n)o(ul)g(op)q(eration)g
(\\)p FG(nop)p FN(")f(instruction)i(in)224 440 y(the)f(branc)o(h)f
(dela)o(y)f(slot,)h(but)g(it)g(is)f(p)q(ossible)h(to)g(use)h
(instruction)f(sc)o(heduling)g(to)f(try)h(to)224 490
y(eliminate)c(this)i(w)o(aste)h(of)e(a)g(cycle.)287 542
y(If)g(an)h(instruction)g(can)h(b)q(e)f(found)g(whic)o(h)g(is)g(alw)o
(a)o(ys)f(useful,)g(and)h(ma)o(y)e(b)q(e)j(mo)o(v)o(ed)d(to)224
592 y(the)e(dela)o(y)f(slot)g(without)g(con\015ict,)i(then)f(the)g(w)o
(aste)g(of)e(the)i(dela)o(y)f(slot)g(ma)o(y)f(b)q(e)i(eliminated.)224
642 y(Some)f(mac)o(hines)g(pro)o(vide)g(a)h(facilit)o(y)e(called)h
FK(annul)r(le)n(d)j(instructions)g FN(or)e FK(br)n(anch)h(squashing)224
692 y FN(in)j(whic)o(h)f(a)h(conditional)e(branc)o(h)j(ma)o(y)c(b)q(e)k
(tagged)f(so)f(that)h(the)h(result)f(of)g(the)g(follo)o(wing)224
742 y(instruction)e(is)e(discarded)i(if)e(the)h(branc)o(h)h(do)q(es)f
(not)g(pro)q(ceed)i(in)d(the)h(predicted)i(direction.)224
791 y(Suc)o(h)18 b(a)e(facilit)o(y)f(means)h(that)h(a)f(dela)o(y)h
(slot)f(can)h(alw)o(a)o(ys)f(b)q(e)h(made)f(\\probabalistically)224
841 y(useful")e(b)o(y)g(mo)o(ving)d(the)k(\014rst)f(instruction)h(of)e
(the)h(predicted)i(successor)g(blo)q(c)o(k)e(in)o(to)f(the)224
891 y(dela)o(y)i(slot,)g(ev)o(en)h(if)e(there)j(is)e(no)g(instruction)g
(from)f(the)i(curren)o(t)g(blo)q(c)o(k)f(whic)o(h)g(ma)o(y)f(b)q(e)224
941 y(safely)g(mo)o(v)o(ed)e(to)i(the)g(dela)o(y)g(slot.)224
1062 y FO(Lo)q(cal)i(sc)o(hedulin)o(g)224 1143 y FN(Con)o(temp)q(orary)
21 b(instruction)i(sc)o(heduling)f(is)f(usually)h(p)q(erformed)f(on)h
(a)g(single)f(basic)224 1193 y(blo)q(c)o(k.)33 b(Ho)o(w)o(ev)o(er,)20
b(some)d(in)o(teresting)j(exp)q(erimen)o(tal)e(w)o(ork)g(is)h(b)q(eing)
f(done)h(on)g(global)224 1242 y(sc)o(heduling.)g(Suc)o(h)14
b(approac)o(hes)h(will)d(b)q(ecome)i(univ)o(ersal)f(as)h(issue)h
(widths)f(increase.)287 1295 y(A)h(later)f(section)i(deals)f(with)f
(the)i(implem)o(en)o(tation)c(details)i(of)h(a)f(simple)f(sc)o
(heduler,)224 1344 y(but)20 b(it)f(is)h(imp)q(ortan)o(t)e(to)h(\014rst)
h(discuss)h(a)e(fundamen)o(tal)f(problem.)34 b(The)20
b(question)f(is)224 1394 y(whether)f(sc)o(heduling)e(is)g(b)q(est)h
(carried)g(out)f(on)g(the)h FK(V)l(AL)p FN(,)e(b)q(efore)i(register)g
(binding,)e(or)224 1444 y(after)g(register)g(binding)d(when)j(the)f
(actual)g(registers)h(are)g(kno)o(wn.)287 1496 y(Neither)i(answ)o(er)g
(to)f(this)h(question)f(is)g(en)o(tirely)h(satisfactory)m(.)25
b(Sc)o(heduling)16 b(of)g FK(V)l(AL)224 1546 y FN(main)o(tains)8
b(maxim)n(um)e(\015exibilit)o(y)m(,)j(but)h(has)g(at)g(least)h(t)o(w)o
(o)e(problems.)16 b(Firstly)m(,)10 b(in)g(general,)224
1596 y(sc)o(heduling)17 b(increases)g(the)g(demand)e(for)h(registers,)h
(and)f(hence)i(the)e(register)i(pressure.)224 1646 y(If)d(the)h
(increased)g(pressure)i(leads)d(to)g(a)g(register)h(b)q(eing)f
(spilled,)f(the)i(time)e(p)q(enalt)o(y)h(will)224 1696
y(almost)j(certainly)i(b)q(e)h(greater)g(than)e(the)i(time)d(from)h
(the)h(original)e(pip)q(eline)i(bubble.)224 1745 y(Consider)13
b(the)f(ordering)g(of)f(the)h(computation)e(of)i(\()p
FM(a)d FN(+)g FM(b)g FN(+)h FM(c)p FN(\))i(in)f(a)h(load/store)f(mac)o
(hine,)224 1795 y(where)21 b FM(v)370 1801 y FB(n)412
1795 y FN(are)f(virtual)f(registers.)37 b(Supp)q(ose)20
b(the)g(mac)o(hine)f(has)g(a)h(single)f(cycle)h(load)224
1845 y(dela)o(y)m(,)13 b(so)h(that)g(the)h(result)g(of)e(a)h(load)f(is)
h(not)g(a)o(v)n(ailable)e(un)o(til)h(the)i(instruction)f(after)h(the)
224 1895 y(follo)o(wing)d(one.)429 1993 y Fv(Sethi-Ullman)g(order)258
b(Best)16 b(sc)o(heduled)d(order)p 295 2008 1371 2 v
429 2040 a FF(lw)69 b Fm(a)p FD(,)p Fm(v)588 2044 y Fy(1)1060
2040 y FF(lw)g Fm(a)p FD(,)p Fm(v)1219 2044 y Fy(1)429
2086 y FF(lw)g Fm(b)p FD(,)p Fm(v)584 2090 y Fy(2)1060
2086 y FF(lw)g Fm(b)p FD(,)p Fm(v)1215 2090 y Fy(2)320
2131 y FE(wait)13 b(for)h Fm(v)484 2135 y Fy(2)514 2131
y FE(to)f(b)n(e)h(available)306 b FF(lw)69 b Fm(c)p FD(,)p
Fm(v)1216 2135 y Fy(4)429 2177 y FF(add)49 b Fm(v)557
2181 y Fy(1)574 2177 y FD(,)p Fm(v)604 2181 y Fy(2)620
2177 y FD(,)p Fm(v)650 2181 y Fy(3)1060 2177 y FF(add)g
Fm(v)1188 2181 y Fy(1)1205 2177 y FD(,)p Fm(v)1235 2181
y Fy(2)1251 2177 y FD(,)p Fm(v)1281 2181 y Fy(3)429 2223
y FF(lw)69 b Fm(c)p FD(,)p Fm(v)585 2227 y Fy(4)1060
2223 y FF(add)49 b Fm(v)1188 2227 y Fy(3)1205 2223 y
FD(,)p Fm(v)1235 2227 y Fy(4)1251 2223 y FD(,)p Fm(v)1281
2227 y Fy(5)320 2268 y FE(wait)13 b(for)h Fm(v)484 2272
y Fy(4)514 2268 y FE(to)f(b)n(e)h(available)429 2314
y FF(add)49 b Fm(v)557 2318 y Fy(3)574 2314 y FD(,)p
Fm(v)604 2318 y Fy(4)620 2314 y FD(,)p Fm(v)650 2318
y Fy(5)p 295 2329 V 287 2466 a FN(The)18 b(optimal,)d(Sethi-Ullman)g
(ordering)j(is)f(sho)o(wn)h(on)f(the)i(left.)29 b(It)17
b(requires)i(only)224 2515 y(t)o(w)o(o)e(registers,)467
2500 y Fz(3)504 2515 y FN(but)g(has)g(t)o(w)o(o)f(w)o(asted)h(cycles.)
28 b(The)17 b(order)g(on)g(the)g(righ)o(t)g(requires)h(an)224
2565 y(additional)12 b(register)j(but)g(has)f(no)f(w)o(asted)i(cycles.)
p 224 2610 577 2 v 271 2636 a Fy(3)288 2648 y Fx(F)m(or)e(example,)e
Fr(v)520 2653 y Fy(2)538 2648 y Fr(;)5 b(v)570 2653 y
Fy(3)602 2648 y Fx(and)12 b Fr(v)689 2653 y Fy(5)720
2648 y Fx(could)g(all)h(share)f(the)h(same)f(register,)g(and)g
Fr(v)1339 2653 y Fy(1)1370 2648 y Fx(and)h Fr(v)1458
2653 y Fy(4)1489 2648 y Fx(could)f(share)224 2688 y(the)f(other.)p
eop
%%Page: 200 206
200 205 bop 224 274 a FN(200)342 b FL(CHAPTER)14 b(7.)31
b(INTR)o(ODUCTION)14 b(TO)g(OPTIMIZA)m(TION)287 390 y
FN(The)g(second)i(problem)c(with)i(sc)o(heduling)g(on)g(the)h
FK(V)l(AL)f FN(is)g(register)h(to)f(register)h(cop)o(y)224
440 y(instructions)g(ma)o(y)d(b)q(e)i(carefully)f(sc)o(heduled,)i(and)e
(then)i(eliminated)d(b)o(y)h(the)h(register)h(al-)224
490 y(lo)q(cator)e(if)f(it)h(manages)f(to)h(allo)q(cate)f(the)i(same)e
(register)i(to)f(b)q(oth)g(virtual)g(registers.)19 b(The)224
540 y(problem)13 b(with)g(sc)o(heduling)h(after)g(register)h(allo)q
(cation)d(is)i(that)g(during)f(register)i(binding)224
590 y(false)g(dep)q(endencies)i(are)f(in)o(tro)q(duced.)22
b(Tw)o(o)14 b(virtual)g(registers)i(ma)o(y)d(b)q(e)j(logically)c(inde-)
224 640 y(p)q(enden)o(t,)17 b(and)e(the)h(instructions)f(whic)o(h)h
(create)g(them)f(migh)o(t)e(b)q(e)j(able)e(to)i(b)q(e)f(executed)224
689 y(in)e(either)g(order.)19 b(Ho)o(w)o(ev)o(er,)13
b(if)e(the)j(register)g(allo)q(cator)d(places)j(b)q(oth)f(virtual)e
(registers)k(in)224 739 y(the)i(same)e(ph)o(ysical)g(register,)i(then)g
(a)f FK(write-after-wr)o(ite)g FN(dep)q(endency)i(will)c(ha)o(v)o(e)i
(b)q(een)224 789 y(created.)k(Consider)13 b(the)g(expression)h(ev)n
(aluation)d(on)i(the)g(left)f(in)h(the)g(previous)g(example.)224
839 y(A)i(register)h(allo)q(cator)d(migh)o(t)g(place)h
FM(v)837 845 y Fz(4)871 839 y FN(in)g(the)h(same)e(ph)o(ysical)h
(register)i(as)f(either)g FM(v)1595 845 y Fz(2)1628 839
y FN(or)224 889 y FM(v)244 895 y Fz(1)263 889 y FN(.)j(Once)c(that)g
(has)f(b)q(een)i(done,)e(it)g(will)f(b)q(e)i(imp)q(ossible)e(to)h(mo)o
(v)o(e)e(the)j(load)f(of)g FM(v)1530 895 y Fz(4)1562
889 y FN(ab)q(o)o(v)o(e)224 938 y(the)i(\014rst)g(add,)e(so)h(as)g(to)f
(\014ll)g(the)i(load)e(dela)o(y)g(slot)h(of)f(the)i(load)e(of)g
FM(v)q FN(2.)287 988 y(Situations)i(suc)o(h)i(as)f(this,)h(in)e(whic)o
(h)h(either)h(order)g(of)f(p)q(erforming)e(t)o(w)o(o)i(op)q(erations)
224 1038 y(has)e(disadv)n(an)o(tages,)e(are)i(said)f(constitute)h(a)f
FO(phase)h(order)g(problem)p FN(.)h(There)f(are)g(t)o(w)o(o)224
1088 y(strategies)e(to)e(lessen)i(the)f(problem.)k(One)d(is)e(to)g(use)
h(a)f(register)i(allo)q(cation)d(metho)q(d)g(whic)o(h)224
1138 y(is)k(a)o(w)o(are)g(of)f(sc)o(heduling.)18 b(The)13
b(other)h(p)q(ossiblit)o(y)e(is)h(to)g(sc)o(hedule)h(on)e(the)i
FK(V)l(AL)p FN(,)e(but)h(do)g(a)224 1187 y(sc)o(heduling)h(correction)h
(after)g(register)g(allo)q(cation.)287 1237 y(The)f(implemen)o(tatio)o
(n)d(of)j(instruction)g(sc)o(heduling)g(is)g(considered)h(in)e(Chapter)
i(11.)224 1351 y FH(7.1.7)56 b(P)n(eephole)18 b(optimization)224
1427 y FN(One)c(of)f(the)h(noticable)f(asp)q(ects)i(of)e(co)q(de)h(pro)
q(duced)g(b)o(y)g(the)f(metho)q(ds)g(describ)q(ed)i(in)e(this)224
1477 y(b)q(o)q(ok)i(is)f(that)h(co)q(de)h(selection)f(is)f(purely)h
FK(lo)n(c)n(al)p FN(.)20 b(This)15 b(is)f(an)h(inevitable)f
(consequence)j(of)224 1527 y(the)e(fact)g(that)f(co)q(de)h(is)g(pro)q
(duced)g(algorithmicall)o(y)d(during)i(a)g(tra)o(v)o(ersal)g(of)g(some)
f FK(AST)6 b FN(.)224 1577 y(Th)o(us)12 b(w)o(e)f(ma)o(y)f(pro)q(duce)i
(quite)g(go)q(o)q(d)f(co)q(de)h(for)f(eac)o(h)g(statemen)o(t,)h(but)f
(ha)o(v)o(e)g(p)q(o)q(or)h(co)q(de)g(in)224 1626 y(the)f(transitions)f
(b)q(et)o(w)o(een)h(statemen)o(ts.)17 b(P)o(eephole)11
b(optimization)c(attempts)j(to)f(recognise)224 1676 y(certain)17
b(short)f(patterns)h(in)f(the)g(co)q(de,)h(and)f(replace)g(these)i(b)o
(y)d(equiv)n(alen)o(t,)h(but)g(b)q(etter)224 1726 y(sequences.)287
1776 y(The)h(name)e(is)h(c)o(hosen)h(b)q(ecause)h(often)f(these)h
(metho)q(ds)e(lo)q(ok)f(at)h(a)h(sequence)h(of)e(in-)224
1826 y(structions)21 b(of)d(some)g(\014xed)i(\014nite)f(length.)34
b(T)m(o)19 b(tak)o(e)g(a)g(particular,)g(simple)f(example,)224
1876 y(consider)i(the)f(co)q(de)g(whic)o(h)f(is)h(pro)q(duced)h(when)e
(a)h(v)n(alue)e(is)i(made)e(in)o(to)h(a)g(temp)q(orary)224
1925 y(in)e FK(DCo)n(de)s FN(.)24 b(The)16 b(instruction)g
FG(mkTmp)e FN(mak)o(es)h(a)g(cop)o(y)h(of)f(the)h(v)n(alue)f(on)h(the)g
(top)g(of)f(the)224 1975 y(abstract)h(stac)o(k,)f(lea)o(ving)e(the)j
(original)d(v)n(alue)h(unc)o(hanged.)21 b(Supp)q(ose)15
b(ho)o(w)o(ev)o(er)g(that)g(w)o(e)224 2025 y(do)h(not)f(need)h(the)g
(cop)o(y)g(whic)o(h)f(is)g(left)h(on)f(the)h(stac)o(k.)23
b(In)16 b(this)f(case)h(w)o(e)g(simply)d(emit)i(a)224
2075 y FG(pop1)d FN(to)g(clean)g(up)g(the)h(stac)o(k.)18
b(On)12 b(most)f(mac)o(hines,)g(for)h(most)f(op)q(erands,)i(this)f(is)g
(purely)224 2125 y(a)g(housek)o(eeping)g(adjustmen)o(t)f(at)g(compile)f
(time.)16 b(But)c(for)g(a)f(v)n(alue)g(in)g(the)h(\015oating)f(p)q(oin)
o(t)224 2174 y(copro)q(cessor)18 b(stac)o(k,)e(eac)o(h)h(of)e(these)i
(instructions)g(corresp)q(onds)g(to)f(a)f(real)h(run)o(time)f(op-)224
2224 y(eration.)j(The)d(follo)o(wing)c(sho)o(ws)j(the)h
FK(DCo)n(de)s FN(,)f FK(V)l(AL)f FN(and)h(resulting)g(assem)o(bly)e
(language)224 2274 y(in)i(the)g(case)h(that)f(the)h(top-of-stac)o(k)e
(is)h(a)f(\015oating)g(p)q(oin)o(t)h(copro)q(cessor)i(stac)o(k)e(v)n
(alue.)274 2380 y FE(DCo)n(de)95 b(V)l(AL)266 b(Final)12
b(Assembly)g(L)n(anguage)f(Instructions)p 249 2396 1319
2 v 274 2428 a FF(mkTmp)18 b(24)49 b(fdup)186 b(ld)18
b(st\(0\))166 b(;)12 b FE(duplic)n(ate)f(tos)481 2473
y FF(fstpt)18 b(fp-24)48 b(fstpt)17 b(-24\(ebp\))47 b(;)12
b FE(save)h(to)g(temp)274 2519 y FF(pop1)127 b(fpop)186
b(ffree)17 b(st\(0\))107 b(;)12 b FE(set)h(fr)n(e)n(e)g(and)747
2565 y FF(fincstp)184 b(;)12 b FE(p)n(op)h(fp)g(stack)p
249 2580 V 287 2638 a FN(The)20 b(co)q(de)g(whic)o(h)g(translates)g
(eac)o(h)g FK(DCo)n(de)k FN(is)19 b(accurate,)j(but)e(y)o(et)g(the)g
(resulting)224 2688 y(assem)o(bly)13 b(language)g(is)h(truly)g
(dreadful.)19 b(If)13 b(the)i(three)g(instruction)g(pattern)g(w)o(ere)g
(to)f(b)q(e)p eop
%%Page: 201 207
201 206 bop 224 274 a FL(7.2.)31 b(IMPLEMENTING)15 b(CSE)f(AND)g(V)-5
b(ALUE)14 b(TRA)o(CKING)335 b FN(201)224 390 y(recognized)16
b(in)d(the)i FK(V)l(AL)p FN(,)e(then)i(w)o(e)g(could)f(replace)h(the)f
(three)i(instructions)f(b)o(y)f(a)g(single)224 440 y(instruction.)274
564 y FE(DCo)n(de)95 b(V)l(AL)266 b(Final)12 b(Assembly)g(L)n(anguage)f
(Instructions)p 249 579 1319 2 v 274 611 a FF(mkTmp)18
b(24)49 b(fdup)481 657 y(fstpt)18 b(fp-24)274 703 y(pop1)127
b(fpop)186 b(fstpt)17 b(-24\(ebp\))47 b(;)12 b FE(save)h(and)f(p)n(op)h
(fp)g(stack)p 249 718 V 287 793 a FN(In)h(general)g(the)h(n)o(um)o(b)q
(er)f(of)f(patterns)j(whic)o(h)e(can)h(b)q(e)f(translated)h(is)f(quite)
h(large,)e(so)224 843 y(that)k(it)e(useful)h(to)g(implemen)o(t)e(p)q
(eephole)j(optimizers)e(whic)o(h)h(are)g(automata)e(automat-)224
892 y(ically)i(generated)j(from)d(sp)q(eci\014cations.)29
b(The)18 b(implem)o(en)o(tation)c(of)j(suc)o(h)h(automata)d(is)224
942 y(considered)h(in)d(some)g(detail)g(later.)224 1080
y FI(7.2)67 b(Implemen)n(ting)24 b(CSE)e(and)h(v)l(alue)h(trac)n(king)
224 1179 y FH(7.2.1)56 b(Con)n(v)n(erting)18 b(trees)g(to)g(dags)224
1256 y FN(The)12 b(essence)i(of)c(common)e(sub)q(expression)13
b(elimination)8 b(is)j(to)g(recognize)h(when)g(a)f(compu-)224
1306 y(tation)f(of)h(some)e(sub)q(expression)k(is)d(redundan)o(t)i(b)q
(ecause)g(the)g(result)f(is)g(already)f(a)o(v)n(ailable.)224
1356 y(All)g(uses)i(of)d(the)i(redundan)o(t)g(sub)q(expression)i(then)e
(b)q(ecome)f(references)j(to)e(the)g(previously)224 1406
y(computed)16 b(v)n(alue.)23 b(The)16 b(metho)q(d)f(th)o(us)h
(transforms)f(a)h(forest)g(of)f(trees)j(in)o(to)d(a)g(forest)i(of)224
1455 y(directed)f(acyclic)e(graphs)g(\()p FK(D)o(A)o(Gs)s
FN(\).)287 1505 y(It)f(is)g(p)q(ossible)g(to)g(place)g(CSE)g
(elimination)d(in)j(sev)o(eral)g(di\013eren)o(t)h(places)g(in)e(the)i
(com-)224 1555 y(pilation)19 b(pro)q(cess.)38 b(The)20
b(tree)i(to)e FK(D)o(A)o(G)j FN(transformation)18 b(migh)o(t,)h(quite)h
(literally)m(,)g(b)q(e)224 1605 y(p)q(erformed)d(on)g(the)h(abstract)h
(syn)o(tax)e(tree)h(represen)o(tation)h(of)e(the)h(program,)e(and)h
(in-)224 1655 y(deed)e(this)f(is)f(sometimes)f(done.)18
b(Equally)m(,)12 b(it)h(is)h(p)q(ossible)g(to)f(p)q(erform)g(the)h
(optimization)224 1704 y(as)19 b(an)g FK(IR)i FN(to)e
FK(IR)h FN(transformation.)32 b(Unfortunately)m(,)19
b(the)g(decision)h(as)f(to)f(whether)j(a)224 1754 y(particular)e
(common)d(sub)q(expression)21 b(is)d(w)o(orth)h(sa)o(ving)f(is)h
(rather)h(dep)q(enden)o(t)g(on)f(the)224 1804 y(mac)o(hine)e(arc)o
(hitecture)605 1789 y Fz(4)625 1804 y FN(,)h(whic)o(h)f(argues)i(for)e
(p)q(erforming)f(the)i(elimination)c(as)k(late)f(as)224
1854 y(p)q(ossible)g(in)f(the)g(co)q(de-generator.)27
b(F)m(urthermore,)16 b(the)h(algorithms)d(are)i(probably)g(eas-)224
1904 y(iest)h(to)f(understand)i(when)f(applied)f(to)g(a)g
FK(tuple)j FN(represen)o(tation,)f(suc)o(h)f(as)g(our)f(t)o(ypical)224
1954 y FK(V)l(AL)e FN(forms.)287 2003 y(The)j(transformation)d(is)i
(done)h(relativ)o(ely)f(easily)f(one)i(basic)g(blo)q(c)o(k)f(at)g(a)g
(time,)f(but)224 2053 y(the)21 b(same)d(elimination)f(ma)o(y)g(b)q(e)j
(done)g(globally)m(.)32 b(The)20 b(remo)o(v)n(al)d(of)i(global)f
(common)224 2103 y(sub)q(expressions)i(is)e(treated)h(in)f(a)f(later)h
(section,)h(in)f(a)f(manner)g(compatible)f(with)i(the)224
2153 y(treatmen)o(t)c(of)f(this)h(section.)287 2203 y(W)m(e)f(fo)q(cus)
h(therefore)i(on)d(elimination)e(of)j(redundan)o(t)g(instructions)h(in)
e(the)i FK(V)l(AL)p FN(.)224 2319 y FH(7.2.2)56 b(V)-5
b(alue)18 b(n)n(um)n(b)r(ering)224 2396 y FN(The)e(v)n(alue)f(n)o(um)o
(b)q(ering)e(metho)q(d)i(of)f(Co)q(c)o(k)o(e)i(and)f(Sc)o(h)o(w)o(artz)
h(pro)o(vides)f(a)g(basis)g(for)g(lo)q(cal)224 2446 y(CSE-elimination)
10 b(in)i(a)g(tuple-based)i(con)o(text.)k(W)m(e)12 b(consider)i(a)e(v)n
(arian)o(t)g(of)f(this)i(metho)q(d)224 2496 y(whic)o(h)h(extends)h
(naturally)e(to)h(the)h(global)d(case)j(considered)g(later.)p
224 2531 577 2 v 271 2558 a Fy(4)288 2569 y Fx(F)m(or)f(example,)e(arc)
o(hitectur)o(es)f(with)j(complex)e(address)g(mo)q(des)h(can)g(fold)g
(quite)g(complex)e(address)224 2609 y(expressions)j(in)o(to)h(the)g
(memory)f(address)h(of)h(a)g(single)e(instruction.)27
b(In)15 b(suc)o(h)g(a)h(case,)h(the)e(common)224 2648
y(address)g(sub)q(expression)e(ma)o(y)i(not)h(b)q(e)f(v)o(ery)h(v)n
(aluable.)27 b(F)m(or)16 b(a)g Fu(RISC)21 b Fx(mac)o(hine,)15
b(reusing)f(the)i(same)224 2688 y(address)10 b(sub)q(expression)e(migh)
o(t)i(sa)o(v)o(e)h(sev)o(eral)f(instructions.)p eop
%%Page: 202 208
202 207 bop 224 274 a FN(202)342 b FL(CHAPTER)14 b(7.)31
b(INTR)o(ODUCTION)14 b(TO)g(OPTIMIZA)m(TION)287 390 y
FN(F)m(or)g(eac)o(h)h(extended)h(basic)f(blo)q(c)o(k,)f(w)o(e)h(allo)q
(cate)f(a)g FK(value)i(numb)n(er)j FN(to)14 b(eac)o(h)i(logically)224
440 y(distinct)d(v)n(alue)f(men)o(tioned)g(in)g(the)h(blo)q(c)o(k.)k
(Whenev)o(er)d(an)e(en)o(tit)o(y)h(is)f(up)q(dated)h(explicitly)m(,)224
490 y(or)18 b(its)g(v)n(alue)f(is)h(threatened)i(b)o(y)d(some)h
(side-e\013ect,)i(w)o(e)e(shall)f(assume)h(that)f(the)i(v)n(alue)224
540 y(has)h(b)q(een)g(c)o(hanged,)h(and)e(allo)q(cate)g(a)g(new)g(v)n
(alue)g(n)o(um)o(b)q(er.)33 b(This)20 b(is)f(a)g(conserv)n(ativ)o(e)224
590 y(assumption,)11 b(and)i(ensures)h(that)f(if)f(t)o(w)o(o)g(data)g
(ha)o(v)o(e)h(the)g(same)e(v)n(alue)h(n)o(um)o(b)q(er)g(that)h(they)224
640 y(will)g(certainly)h(hold)f(the)h(same)f(v)n(alue)h(at)f(run)o
(time.)287 689 y(In)19 b(order)h(to)f(determine)g(if)f(the)h(op)q
(eration)g(represen)o(ted)j(b)o(y)d(a)g(particular)g(binary)224
739 y(instruction)g(is)e(redundan)o(t)i(w)o(e)f(do)g(not)f(ask)h
(whether)h(w)o(e)g(ha)o(v)o(e)e(p)q(erformed)h(the)g(same)224
789 y(op)q(eration)11 b(on)f(the)h(same)f(t)o(w)o(o)g
FK(data)p FN(.)18 b(Rather)10 b(w)o(e)h(m)o(ust)f(ask)g(whether)i(w)o
(e)f(ha)o(v)o(e)g(p)q(erformed)224 839 y(the)k(same)e(op)q(eration)h
(on)f(the)i(same)e(t)o(w)o(o)g FK(values)p FN(.)287 889
y(Tw)o(o)20 b(t)o(yp)q(es)i(of)e(data)g(with)h(v)n(alues)f(o)q(ccur)i
(in)f(our)g FK(V)l(AL)p FN(.)e(These)j(are)g(the)f(virtual)224
938 y(registers,)f(and)e(v)n(alues)f(fetc)o(hed)i(from)d(memory)m(.)27
b(If)17 b(w)o(e)h(ha)o(v)o(e)g(generated)h(the)g FK(V)l(AL)e
FN(in)224 988 y(suc)o(h)22 b(a)e(w)o(a)o(y)f(that)i(eac)o(h)g(virtual)e
(register)j(is)e(de\014ned)i(in)e(a)g(single)g(place)g(only)m(,)h(then)
224 1038 y(the)d(data)f(structures)j(whic)o(h)d(w)o(e)g(shall)f(need)i
(b)q(ecome)f(extremely)g(simple.)26 b(The)18 b(extra)224
1088 y(computations)9 b(whic)o(h)g(are)h(required)h(if)e(registers)i
(are)f FK(mutable)j FN(are)d(considered)h(later.)17 b(F)m(or)224
1138 y(the)e(momen)o(t)d(w)o(e)i(shall)g(also)f(mak)o(e)g(the)i
(simpli\014ying)c(assumption)i(that)h(all)f(of)h(memory)224
1187 y(is)h(a)f(single,)g(structured)j(v)n(ariable,)c(and)i(that)f
(loads)g(from)f(memory)f(simply)h(fetc)o(h)i(some)224
1237 y(comp)q(onen)o(t)i(of)g(this)g(single)g(v)n(ariable.)27
b(This)17 b(is)g(an)g(extremely)g(safe)h(and)f(conserv)n(ativ)o(e)224
1287 y(assumption,)f(since)h(it)g(means)e(that)i(initially)d(w)o(e)j
(shall)f(conclude)h(that)g(whenev)o(er)h FK(any)224 1337
y FN(write)f(to)f(memory)e(is)j(p)q(erformed)f(that)g(the)h(whole)f(of)
g(the)h(memory)d(\\v)n(ariable")h(has)i(a)224 1387 y(new)e(v)n(alue)e
(n)o(um)o(b)q(er.)287 1437 y(V)m(alue)18 b(n)o(um)o(b)q(ering)g(ma)o(y)
g(b)q(e)i(though)o(t)f(of)g(as)g(a)g FK(symb)n(olic)g(exe)n(cution)i
FN(of)d(the)i(basic)224 1486 y(blo)q(c)o(k.)26 b(W)m(e)16
b(step)i(through)f(the)g(instructions)g(of)f(the)h(extended)h(blo)q(c)o
(k)e(in)h(the)g(forw)o(ard)224 1536 y(direction,)g(mo)q(difying)12
b(instructions)17 b(and)f(up)q(dating)f(a)h FK(value)h(numb)n(er)f
(table)j FN(as)d(w)o(e)g(go.)224 1586 y(There)g(are)f(t)o(w)o(o)f(asso)
q(ciated)h(data)g(structures.)22 b(The)15 b FK(virtual)g(r)n(e)n
(gister)f(e)n(quivalenc)n(e)i(table)224 1636 y FN(maps)j(v)n(alue)g(n)o
(um)o(b)q(ers)g(to)h(the)g(unique)g(virtual)f(register)h(whic)o(h)g
(\014rst)g(computed)g(the)224 1686 y(same)14 b(v)n(alue)g(in)g(the)i
(curren)o(t)g(blo)q(c)o(k.)k(The)15 b FK(tuple)g(lo)n(okup)h(table)i
FN(determines)d(whether)h(an)224 1735 y(equiv)n(alen)o(t)e(instruction)
g(has)g(o)q(ccurred)i(b)q(efore)e(in)g(the)g(blo)q(c)o(k.)287
1785 y(Let)j FM(N)22 b FN(b)q(e)c(the)g(domain)d(of)i(v)n(alue)f(n)o
(um)o(b)q(ers.)28 b(There)18 b(is)f(a)g(distinguished)g(v)n(alue)g(of)
224 1835 y(the)g(domain)c Fv(nil)p FN(,)h(denoting)h(the)h(unde\014ned)
h(v)n(alue.)23 b(Let)16 b FM(V)25 b FN(b)q(e)16 b(the)h(domain)c(of)i
(virtual)224 1885 y(registers.)k(There)11 b(is)e(a)h(distinguished)g(v)
n(alue)f(of)g(the)h(domain,)e(also)i(denoted)g Fv(nil)p
FN(,)f(denoting)224 1935 y(no)14 b(register.)19 b(The)c(o)o(v)o
(erloading)d(of)h(the)i Fv(nil)d FN(sym)o(b)q(ol)g(should)h(cause)i(no)
f(di\016cult)o(y)m(.)287 1985 y(Let)f(the)h(set)h(of)d(data)h(in)g(the)
h(blo)q(c)o(k)f(b)q(e)h(denoted)g FM(E)r FN(.)k(The)c(set)g
FM(E)g FN(=)e FM(V)18 b Ft([)9 b(f)p FM(m)p Ft(g)p FN(,)k(where)224
2034 y FM(m)e FN(is)f(the)i(memory)7 b(v)n(ariable,)j(and)g
FM(V)20 b FN(is)10 b(the)h(set)h(of)d(virtual)h(registers.)18
b(The)11 b(v)n(alue)f(n)o(um)o(b)q(er)224 2084 y(table)k
FK(numT)m(ab)s FN(,)g(is)f(a)h(mapping)e(from)g(data)h(to)h(v)n(alue)f
(n)o(um)o(b)q(ers.)787 2160 y FK(numT)m(ab)f FN(:)f FM(E)i
Ft(!)e FM(N)224 2236 y FN(Let)i FM(P)j FN(b)q(e)d(the)f(set)g(of)f(op)q
(erators.)19 b(Instructions,)12 b(in)g(general,)f(ha)o(v)o(e)h(an)f(op)
q(erator)h FK(op)17 b Ft(2)11 b FM(P)6 b FN(,)224 2286
y(one)20 b(or)f(more)f(input)h(data)f(\(op)q(erands\))i
FM(e)919 2292 y FB(i)945 2286 y Ft(2)11 b FM(E)r FN(,)20
b(and)f(a)g(result)h(en)o(tit)o(y)f FM(r)i Ft(2)e FM(E)r
FN(.)34 b(Tw)o(o)224 2336 y(instructions)16 b(are)f(equiv)n(alen)o(t)g
(if)f(they)h(ha)o(v)o(e)g(the)h(same)e(op)q(erator,)h(and)g(input)f(op)
q(erands)224 2386 y(with)g(the)g(same)f(v)n(alue)h(n)o(um)o(b)q(ers.)j
(If)d(this)g(is)g(the)g(case,)g(they)h(compute)e(the)i(same)e(v)n
(alue.)287 2436 y(The)f(lo)q(okup)f(table)g FK(hshT)m(ab)p
FN(,)h(determines)g(if)f(a)g(particular)h(instruction)g(is)f(redundan)o
(t.)224 2485 y(The)k(table)f(is)f(a)h(mapping)e(from)g(tuples)i(to)g(v)
n(alue)f(n)o(um)o(b)q(ers.)739 2562 y FK(hshT)m(ab)f
FN(:)f FM(P)j Ft(\002)c FM(N)1021 2544 y Fz(+)1060 2562
y Ft(!)h FM(N)224 2638 y FN(In)18 b(the)g(ev)o(en)o(t)f(that)h(a)f
(tuple)g(is)g(previously)g(unkno)o(wn,)h(the)g FK(hshT)m(ab)i
FN(function)d(returns)224 2688 y Fv(nil)p FN(,)11 b(and)h(w)o(e)h(kno)o
(w)f(that)g(the)h(instruction)g(is)f(useful.)18 b(The)13
b(result)g(v)n(alue)f(is)g(issued)h(with)g(a)p eop
%%Page: 203 209
203 208 bop 224 274 a FL(7.2.)31 b(IMPLEMENTING)15 b(CSE)f(AND)g(V)-5
b(ALUE)14 b(TRA)o(CKING)335 b FN(203)224 390 y(new)14
b(v)n(alue)f(n)o(um)o(b)q(er)g FM(n)p FN(,)g(the)h(instruction)g(is)f
(en)o(tered)i(in)e FK(hshT)m(ab)s FN(,)g(and)h(the)g(pair)f(\()p
FM(r)f Ft(7!)f FM(n)p FN(\))224 440 y(is)j(en)o(tered)i(in)d
FK(numT)m(ab)k FN(o)o(v)o(erwriting)c(an)o(y)h(previous)g(mapping)d(of)
j FM(r)q FN(.)287 490 y(On)f(the)g(other)h(hand,)e(if)g(the)i(tuple)f
(is)f(already)h(presen)o(t)h(in)f(the)g(table,)g(w)o(e)g(kno)o(w)f
(that)224 540 y(the)h(same)d(v)n(alue)h FM(m)h FN(has)g(b)q(een)g
(computed)f(b)q(efore.)18 b(In)12 b(this)g(case)g(the)g(instruction)g
(ma)o(y)e(b)q(e)224 590 y(deleted,)15 b(and)e(the)i(pair)e(\()p
FM(r)g Ft(7!)e FM(m)p FN(\))j(is)g(en)o(tered)h(in)e
FK(numT)m(ab)s FN(.)18 b(This)c(indicates)g(that)g(future)224
640 y(uses)i(of)d FM(r)h FN(will)f(b)q(e)h(uses)i(of)d(the)h(v)n(alue)g
(n)o(um)o(b)q(er)f FM(m)p FN(.)287 689 y(W)m(e)g(shall)g(assume)g(that)
h(memory)d(has)j(an)f(initial)f(v)n(alue)h(n)o(um)o(b)q(er)g(0)g(on)h
(en)o(try)g(to)g(the)224 739 y(blo)q(c)o(k,)f(but)i(all)d(virtual)h
(registers)j(ha)o(v)o(e)d(v)n(alue)h(n)o(um)o(b)q(er)f
Fv(nil)p FN(.)287 789 y(A)o(t)h(the)g(abstract)h(lev)o(el,)e(the)h
(algorithm)e(ma)o(y)g(b)q(e)i(represen)o(ted)j(as)d(follo)o(ws)e(|)372
868 y FF(FOR)g FE(every)g(instruction)f(I)i(in)g(the)g(blo)n(ck)e
FF(DO)423 914 y Fm(m)g FD(:=)h FE(hshT)m(ab)g FD(\()p
FE(op)p FD(,)p FE(numT)m(ab)p FD(\()p Fm(e)886 918 y
Fy(1)901 914 y FD(\))p Fm(;)6 b Fw(\001)g(\001)g(\001)o
FD(\);)410 959 y FF(IF)12 b Fm(m)f FD(=)i Fv(nil)e FF(THEN)449
1005 y FE(al)r(lo)n(c)n(ate)g(a)i(new)h(value)e(numb)n(er)h(n,)449
1051 y(and)f(insert)g FD(\(\()p FE(op)p FD(,)p FE(numT)m(ab)p
FD(\()p Fm(e)882 1055 y Fy(1)897 1051 y FD(\))p Fm(;)6
b Fw(\001)g(\001)g(\001)p FD(\))k Fw(7!)h Fm(n)p FD(\))i
FE(in)g(hshT)m(ab)p FD(;)410 1096 y FF(ELSE)449 1142
y FE(delete)f(I,)h(and)f(insert)g FD(\()p Fm(r)g Fw(7!)f
Fm(m)p FD(\))h FE(in)h(numT)m(ab)410 1188 y FF(END;)410
1233 y FE(ac)n(c)n(ount)f(for)h(side)f(e\013e)n(cts)g(in)h(numT)m(ab)p
FD(;)372 1279 y FF(END;)287 1406 y FN(The)f(\014nal)g(line,)g(accoun)o
(ting)g(for)f(side-e\013ects,)k(is)d(simple)f(in)g(this)i(case,)g(but)f
(is)g(imp)q(or-)224 1456 y(tan)o(t)g(since)h(it)f(giv)o(es)g(the)h
(clue)f(as)h(to)f(ho)o(w)f(the)i(metho)q(d)e(is)h(extended)i(to)e(less)
h(conserv)n(ativ)o(e)224 1506 y(assumptions)g(ab)q(out)h(memory)m(.)g
(In)g(e\013ect,)h(after)f(ev)o(ery)g(write)g(to)f(memory)f(the)i
(memory)224 1556 y(en)o(tit)o(y)f(is)h(allo)q(cated)e(a)h(new)h(v)n
(alue)e(n)o(um)o(b)q(er.)17 b(Similarly)m(,)10 b(ev)o(ery)j(pro)q
(cedure)j(and)d(function)224 1605 y(call)18 b(allo)q(cates)f(a)h(new)h
(v)n(alue)e(n)o(um)o(b)q(er)g(to)h(memory)m(.)27 b(If)18
b(the)h(domain)c FM(E)20 b FN(includes)f(an)o(y)224 1655
y(ph)o(ysical)d(\(as)g(opp)q(osed)g(to)g(virtual\))f(registers,)i(then)
g(the)f(e\013ect)i(of)d(instructions)h(whic)o(h)224 1705
y(mo)q(dify)f(ph)o(ysical)h(registers)j(m)o(ust)d(b)q(e)h(tak)o(en)g
(in)o(to)g(accoun)o(t)g(similarly)m(.)24 b(F)m(or)16
b(most)g(ma-)224 1755 y(c)o(hines)11 b(this)e(includes)h(caller-sa)o(v)
o(es)g(registers)h(p)q(oten)o(tially)d(mo)q(di\014ed)g(b)o(y)h(call)g
(instructions,)224 1805 y(and)14 b(ph)o(ysical)f(registers)j(mo)q
(di\014ed)c(b)o(y)i(divide)f(instructions,)i(and)e(so)h(on.)287
1854 y(Finally)8 b(the)i(instructions)g(whic)o(h)g(remain)e(are)j
(rewritten.)17 b(The)11 b(de\014ning)e(o)q(ccurrences)224
1904 y(of)k(virtual)f(registers)j(whic)o(h)e(held)g(redundan)o(t)h(v)n
(alues)f(ha)o(v)o(e)g(b)q(een)h(remo)o(v)o(ed,)e(so)h(w)o(e)g(m)o(ust)
224 1954 y(map)f(used)i(o)q(ccurrences)i(of)c(these)i(missing)e
(registers)i(to)f(uses)h(of)e(the)i(equiv)n(alen)o(t)e(virtual)224
2004 y(register.)22 b(Since)15 b(w)o(e)f(ha)o(v)o(e)h(assumed)f(that)g
(virtual)g(registers)i(ha)o(v)o(e)e(a)h(unique)f(de\014nition,)224
2054 y(w)o(e)k(ma)o(y)c(c)o(ho)q(ose)k(the)g(register)g(n)o(um)o(b)q
(er)e(of)g(the)i(\014rst)f(de\014nition)g(of)f(eac)o(h)h(v)n(alue)g(as)
g(the)224 2103 y(v)n(alue)d(n)o(um)o(b)q(er.)k(In)c(this)h(w)o(a)o(y)e
(the)i(v)n(alue)e(n)o(um)o(b)q(er)h(table)g(b)q(ecomes)g(a)g(map)f
(from)f(virtual)224 2153 y(registers)k(to)e(equiv)n(alen)o(t)f(virtual)
g(registers.)287 2203 y(W)m(e)e(shall)f(w)o(ork)h(through)h(an)f
(example,)f(the)i(inner)f(blo)q(c)o(k)g(of)g(a)g(bubble)h(sort)f
(program.)224 2253 y(The)k(source)g(co)q(de)g(is)e(|)354
2324 y FF(IF)19 b(a[i])f(<)h(a[i+1])f(THEN)394 2369 y(t)h(:=)g(a[i+1];)
394 2415 y(a[i+1])e(:=)i(a[i];)394 2461 y(a[i])f(:=)g(t;)354
2506 y(END;)224 2588 y FN(The)d FK(V)l(AL)p FN(,)e(and)g(the)i
(\014lled)e(in)h(v)n(alue)f(n)o(um)o(b)q(er)g(table)h(is)g(sho)o(wn)g
(in)f(\014gure)h(7.5.)287 2638 y(In)f(this)g(\014gure,)h(the)g(table)f
FK(numT)m(ab)j FN(is)d(sho)o(wn)h(to)f(the)h(righ)o(t)f(of)f(eac)o(h)i
(instruction.)k(A)224 2688 y(n)o(um)o(b)q(er)13 b(in)f(the)i
(particular)f(p)q(osition)f(in)h(the)g(table)g(indicates)h(that)f(the)g
(instruction)h(is)f(a)p eop
%%Page: 204 210
204 209 bop 224 274 a FN(204)342 b FL(CHAPTER)14 b(7.)31
b(INTR)o(ODUCTION)14 b(TO)g(OPTIMIZA)m(TION)p 228 351
1434 2 v 227 384 2 34 v 355 374 a Fq(co)q(de)p 555 384
V 460 w(en)o(tit)o(y)d(name)499 b(req)p 1661 384 V 227
417 V 555 417 V 581 407 a Fz(mem)50 b FB(v)717 411 y
Fe(1)783 407 y FB(v)800 411 y Fe(2)865 407 y FB(v)882
411 y Fe(3)948 407 y FB(v)965 411 y Fe(4)1031 407 y FB(v)1048
411 y Fe(5)1113 407 y FB(v)1130 411 y Fe(6)1196 407 y
FB(v)1213 411 y Fe(7)1279 407 y FB(v)1296 411 y Fe(8)1361
407 y FB(v)1378 411 y Fe(9)j(10)1527 407 y FB(v)1544
411 y Fe(11)p 1661 417 V 228 419 1434 2 v 227 452 2 34
v 253 442 a Fo(;)16 b(line)h(1)p 555 452 V 231 w Fz(0)p
1584 452 V 1661 452 V 227 485 V 253 475 a Fo(lw)66 b
FB(i;)5 b(v)393 479 y Fe(1)p 555 485 V 607 475 a Fz(x)84
b(1)p 1584 485 V 1610 455 a FA(p)p 1661 485 V 227 518
V 253 508 a Fo(lw)66 b FB(a)p Fz(\()p FB(v)397 512 y
Fe(1)413 508 y Fz(\))p FB(;)5 b(v)458 512 y Fe(2)p 555
518 V 607 508 a Fz(x)84 b(x)66 b(2)p 1584 518 V 1610
488 a FA(p)p 1661 518 V 227 552 V 253 542 a Fo(lw)g FB(i;)5
b(v)393 546 y Fe(3)p 555 552 V 607 542 a Fz(x)250 b(1)p
1584 552 V 1661 552 V 227 585 V 253 575 a Fo(lw)66 b
FB(a)8 b Fz(+)g(1\()p FB(v)455 579 y Fe(3)470 575 y Fz(\))p
FB(;)d(v)515 579 y Fe(4)p 555 585 V 607 575 a Fz(x)249
b(x)66 b(4)p 1584 585 V 1610 554 a FA(p)p 1661 585 V
227 618 V 253 608 a Fo(bgt)51 b FB(v)366 612 y Fe(2)382
608 y FB(;)5 b(v)414 612 y Fe(4)430 608 y Fz(,lab)p 555
618 V 308 w(x)148 b(x)p 1584 618 V 1610 588 a FA(p)p
1661 618 V 227 651 V 253 641 a Fo(;)16 b(line)h(2)p 555
651 V 1584 651 V 1661 651 V 227 684 V 253 674 a(lw)66
b FB(i;)5 b(v)393 678 y Fe(5)p 555 684 V 607 674 a Fz(x)415
b(1)65 b(x)p 1584 684 V 1661 684 V 227 718 V 253 708
a Fo(lw)h FB(a)8 b Fz(+)g(1\()p FB(v)455 712 y Fe(5)470
708 y Fz(\))p FB(;)d(v)515 712 y Fe(6)p 555 718 V 607
708 a Fz(x)414 b(x)66 b(4)p 1584 718 V 1661 718 V 227
751 V 253 741 a Fo(sw)g FB(v)366 745 y Fe(6)382 741 y
Fz(,t)p 555 751 V 195 w(12)488 b(x)p 1584 751 V 1610
720 a FA(p)p 1661 751 V 227 784 V 253 774 a Fo(;)16 b(line)h(3)p
555 784 V 1584 784 V 1661 784 V 227 817 V 253 807 a(lw)66
b FB(i;)5 b(v)393 811 y Fe(7)p 555 817 V 607 807 a Fz(x)580
b(7)p 1584 817 V 1610 787 a FA(p)p 1661 817 V 227 850
V 253 840 a Fo(lw)66 b FB(a)p Fz(\()p FB(v)397 844 y
Fe(7)413 840 y Fz(\))p FB(;)5 b(v)458 844 y Fe(8)p 555
850 V 607 840 a Fz(x)580 b(x)66 b(8)p 1584 850 V 1610
820 a FA(p)p 1661 850 V 227 884 V 253 874 a Fo(lw)g FB(i;)5
b(v)393 878 y Fe(9)p 555 884 V 607 874 a Fz(x)745 b(7)p
1584 884 V 1661 884 V 227 917 V 253 907 a Fo(sw)66 b
FB(v)366 911 y Fe(8)382 907 y FB(;)5 b(a)j Fz(+)g(1\()p
FB(v)503 911 y Fe(9)518 907 y Fz(\))p 555 917 V 68 w(13)653
b(x)66 b(x)p 1584 917 V 1610 886 a FA(p)p 1661 917 V
227 950 V 253 940 a Fo(;)16 b(line)h(4)p 555 950 V 1584
950 V 1661 950 V 227 983 V 253 973 a(lw)66 b Fz(t,)p
FB(v)388 977 y Fe(10)p 555 983 V 1444 973 a Fz(10)p 1584
983 V 1610 953 a FA(p)p 1661 983 V 227 1016 V 253 1007
a Fo(lw)g FB(i;)5 b(v)393 1011 y Fe(11)p 555 1016 V 1527
1007 a Fz(11)p 1584 1016 V 1610 986 a FA(p)p 1661 1016
V 227 1050 V 253 1040 a Fo(sw)66 b FB(v)366 1044 y Fe(10)396
1040 y FB(;)5 b(a)p Fz(\()p FB(v)459 1044 y Fe(11)489
1040 y Fz(\))p 555 1050 V 97 w(14)819 b(x)66 b(x)p 1584
1050 V 1610 1019 a FA(p)p 1661 1050 V 228 1051 1434 2
v 445 1128 a FN(Figure)14 b(7.5:)j FK(V)l(AL)c FN(and)h(v)n(alue)f
(table)h(for)g(bubble)g(blo)q(c)o(k)f(\(#1\))224 1265
y FK(de\014ning)i(o)n(c)n(curr)n(enc)n(e)g FN(for)c(that)h(v)n(alue)g
(n)o(um)o(b)q(er.)k(The)d(n)o(um)o(b)q(ers)f(remain)e(v)n(alid)h(un)o
(til)g(they)224 1315 y(are)16 b(o)o(v)o(erwritten)g(b)o(y)f(another)g
(de\014nition)g(for)g(the)h(same)e(en)o(tit)o(y)m(.)22
b(F)m(or)14 b(example,)g(second)224 1364 y(and)f(fourth)g(instructions)
h(b)q(oth)g(de\014ne)g(the)g(same)e(v)n(alue)g(n)o(um)o(b)q(er)h(b)o(y)
g(loading)e(the)j(same)224 1414 y(v)n(ariable)f FM(i)p
FN(.)18 b(The)d(second)g(of)e(these)i(loads)f(is)f(clearly)h(redundan)o
(t.)287 1465 y(An)d(`x')g(in)g(a)h(particular)f(column)f(of)h(the)h(v)n
(alue)f(table)h(indicates)g(that)g(the)g(instruction)224
1515 y(has)19 b(a)g FK(use)n(d)h(o)n(c)n(curr)n(enc)n(e)i
FN(of)c(the)i(curren)o(t)g(v)n(alue)e(for)h(the)h(en)o(tit)o(y)e(of)h
(that)g(column.)31 b(A)224 1565 y(\\tic)o(k")350 1535
y Ft(p)403 1565 y FN(in)17 b(the)h(\014nal)f(column)f(indicates)i(that)
g(the)g(instruction)g(is)g(useful)f(and)h(th)o(us)224
1614 y(is)e FO(req)p FN(uired.)26 b(In)16 b(this)g(case)h(exactly)g(11)
e(of)h(the)h(original)d(15)i(instructions)h(turn)f(out)g(to)224
1664 y(b)q(e)j(useful.)30 b(Three)19 b(of)e(the)h(four)g(instructions)h
(whic)o(h)e(are)h(eliminated)e(are)j(redundan)o(t)224
1714 y(reloads)14 b(of)g(the)g(v)n(ariable)f FM(i)p FN(.)287
1765 y(In)g(this)g(example,)f(the)i(e\013ect)h(of)d(the)i(simplifying)c
(assumptions)i(on)h(memory)e(are)j(all)224 1815 y(to)q(o)f(apparen)o
(t.)19 b(After)13 b(the)h(\014rst)g(assignmen)o(t)f(to)g
FK(t)k FN(the)c(previous)h(v)n(alues)f(for)g(b)q(oth)g
FM(a)g FN(and)224 1864 y FM(i)f FN(are)g(killed,)e(and)i(m)o(ust)e(b)q
(e)i(reloaded)g(for)f(their)h(next)g(use.)18 b(If)11
b(w)o(e)h(are)f(able)h(to)f(distinguish)224 1914 y(b)q(et)o(w)o(een)16
b(these)f(three)g(global)d(v)n(ariables)i FK(a,)g(i,)h(t)t
FN(,)e(then)h(w)o(e)g(obtain)g(the)g(\014gure)h(7.6.)287
1965 y(After)e(remapping)e(the)i(remaining)e(instructions,)i(in)f(this)
h(more)e(careful)i(case)h(w)o(e)f(ob-)224 2015 y(tain)e(the)h(follo)o
(wing)c(result,)k(with)f(only)f(8)h(of)f(the)i(original)d(14)i
(instructions)h(remaining)d(|)274 2143 y FD(;)k FE(line)f(1)351
2188 y FF(lw)38 b(_i,v1)267 b FD(;)50 b FE(old)13 b(i1)351
2234 y FF(lw)38 b(_a\(v1\),v2)187 b FD(;)50 b FE(old)13
b(i2)351 2280 y FF(lw)38 b(_a+1\(v1\),v4)147 b FD(;)50
b FE(old)13 b(i4)351 2325 y FF(bgt)18 b(v2,v4,xLab)167
b FD(;)50 b FE(old)13 b(i5)274 2371 y FD(;)g FE(line)f(2)351
2416 y FF(sw)38 b(v4,_t)267 b FD(;)50 b FE(old)13 b(i8)274
2462 y FD(;)g FE(line)f(3)351 2508 y FF(sw)38 b(v3,_a+1\(v1\))147
b FD(;)50 b FE(old)13 b(i12)274 2553 y FD(;)g FE(line)f(4)351
2599 y FF(lw)38 b(_t,v10)247 b FD(;)50 b FE(old)13 b(i14)351
2645 y FF(sw)38 b(v10,_a\(v1\))167 b FD(;)50 b FE(old)13
b(i15)274 2690 y FF(xLab:)p eop
%%Page: 205 211
205 210 bop 224 274 a FL(7.2.)31 b(IMPLEMENTING)15 b(CSE)f(AND)g(V)-5
b(ALUE)14 b(TRA)o(CKING)335 b FN(205)p 164 351 1562 2
v 163 384 2 34 v 291 374 a Fq(co)q(de)p 491 384 V 524
w(en)o(tit)o(y)12 b(name)552 b(req.)p 1725 384 V 163
417 V 491 417 V 525 407 a Fz(a)70 b(i)i(t)60 b FB(v)783
411 y Fe(1)849 407 y FB(v)866 411 y Fe(2)931 407 y FB(v)948
411 y Fe(3)1014 407 y FB(v)1031 411 y Fe(4)1096 407 y
FB(v)1113 411 y Fe(5)1179 407 y FB(v)1196 411 y Fe(6)1262
407 y FB(v)1279 411 y Fe(7)1344 407 y FB(v)1361 411 y
Fe(8)1427 407 y FB(v)1444 411 y Fe(9)1509 407 y FB(v)1526
411 y Fe(10)1606 407 y FB(v)1623 411 y Fe(11)p 1725 417
V 164 419 1562 2 v 163 452 2 34 v 189 442 a Fo(;)16 b(line)h(1)p
491 452 V 213 w Fz(0)58 b(12)49 b(13)p 1648 452 V 1725
452 V 163 485 V 189 475 a Fo(lw)66 b FB(i;)5 b(v)329
479 y Fe(1)p 491 485 V 608 475 a Fz(x)149 b(1)p 1648
485 V 1673 455 a FA(p)p 1725 485 V 163 518 V 189 508
a Fo(lw)66 b FB(a)p Fz(\()p FB(v)333 512 y Fe(1)349 508
y Fz(\))p FB(;)5 b(v)394 512 y Fe(2)p 491 518 V 525 508
a Fz(x)232 b(x)66 b(2)p 1648 518 V 1673 488 a FA(p)p
1725 518 V 163 552 V 189 542 a Fo(lw)g FB(i;)5 b(v)329
546 y Fe(3)p 491 552 V 608 542 a Fz(x)314 b(1)p 1648
552 V 1725 552 V 163 585 V 189 575 a Fo(lw)66 b FB(a)8
b Fz(+)g(1\()p FB(v)391 579 y Fe(3)406 575 y Fz(\))p
FB(;)e(v)452 579 y Fe(4)p 491 585 V 525 575 a Fz(x)397
b(x)66 b(4)p 1648 585 V 1673 554 a FA(p)p 1725 585 V
163 618 V 189 608 a Fo(bgt)51 b FB(v)302 612 y Fe(2)318
608 y FB(;)5 b(v)350 612 y Fe(4)366 608 y Fz(,lab)p 491
618 V 437 w(x)148 b(x)p 1648 618 V 1673 588 a FA(p)p
1725 618 V 163 651 V 189 641 a Fo(;)16 b(line)h(2)p 491
651 V 1648 651 V 1725 651 V 163 684 V 189 674 a(lw)66
b FB(i;)5 b(v)329 678 y Fe(5)p 491 684 V 608 674 a Fz(x)480
b(1)65 b(x)p 1648 684 V 1725 684 V 163 718 V 189 708
a Fo(lw)h FB(a)8 b Fz(+)g(1\()p FB(v)391 712 y Fe(5)406
708 y Fz(\))p FB(;)e(v)452 712 y Fe(6)p 491 718 V 525
708 a Fz(x)562 b(x)66 b(4)p 1648 718 V 1725 718 V 163
751 V 189 741 a Fo(sw)g FB(v)302 745 y Fe(6)318 741 y
Fz(,t)p 491 751 V 343 w(14)470 b(x)p 1648 751 V 1673
720 a FA(p)p 1725 751 V 163 784 V 189 774 a Fo(;)16 b(line)h(3)p
491 784 V 1648 784 V 1725 784 V 163 817 V 189 807 a(lw)66
b FB(i;)5 b(v)329 811 y Fe(7)p 491 817 V 608 807 a Fz(x)645
b(1)p 1648 817 V 1725 817 V 163 850 V 189 840 a Fo(lw)66
b FB(a)p Fz(\()p FB(v)333 844 y Fe(7)349 840 y Fz(\))p
FB(;)5 b(v)394 844 y Fe(8)p 491 850 V 525 840 a Fz(x)727
b(x)66 b(2)p 1648 850 V 1725 850 V 163 884 V 189 874
a Fo(lw)g FB(i;)5 b(v)329 878 y Fe(9)p 491 884 V 608
874 a Fz(x)810 b(1)p 1648 884 V 1725 884 V 163 917 V
189 907 a Fo(sw)66 b FB(v)302 911 y Fe(8)318 907 y FB(;)5
b(a)j Fz(+)g(1\()p FB(v)439 911 y Fe(9)454 907 y Fz(\))p
491 917 V 50 w(15)801 b(x)66 b(x)p 1648 917 V 1673 886
a FA(p)p 1725 917 V 163 950 V 189 940 a Fo(;)16 b(line)h(4)p
491 950 V 1648 950 V 1725 950 V 163 983 V 189 973 a(lw)66
b Fz(t,)p FB(v)324 977 y Fe(10)p 491 983 V 691 973 a
Fz(x)808 b(10)p 1648 983 V 1673 953 a FA(p)p 1725 983
V 163 1016 V 189 1007 a Fo(lw)66 b FB(i;)5 b(v)329 1011
y Fe(11)p 491 1016 V 608 1007 a Fz(x)982 b(1)p 1648 1016
V 1725 1016 V 163 1050 V 189 1040 a Fo(sw)66 b FB(v)302
1044 y Fe(10)332 1040 y FB(;)6 b(a)p Fz(\()p FB(v)396
1044 y Fe(11)426 1040 y Fz(\))p 491 1050 V 78 w(16)973
b(x)65 b(x)p 1648 1050 V 1673 1019 a FA(p)p 1725 1050
V 164 1051 1562 2 v 445 1128 a FN(Figure)14 b(7.6:)j
FK(V)l(AL)c FN(and)h(v)n(alue)f(table)h(for)g(bubble)g(blo)q(c)o(k)f
(\(#2\))287 1265 y(It)d(ma)o(y)f(b)q(e)i(noticed)f(that)h(ev)o(en)g
(this)f(v)o(ersion)h(still)e(has)i(a)f(redundancy)m(.)17
b(The)11 b(reloading)224 1315 y(of)g(the)g(temp)q(orary)g(v)n(alue)f
FM(t)h FN(at)g(old)f(instruction)h(i14)f(is)h(surely)h(unneeded,)h
(since)e(the)h(v)n(alue)224 1364 y(is)e(still)f(in)g(register)i
FM(v)547 1370 y Fz(4)566 1364 y FN(.)16 b(T)m(o)9 b(b)q(e)h(able)g(to)f
(recognize)i(this)f(fact)g(requires)h(the)f(implemen)o(tatio)o(n)224
1414 y(of)k(v)n(alue)f(trac)o(king,)g(as)h(w)o(ell)f(as)h(common)d(sub)
q(expression)16 b(elimination.)287 1465 y(V)m(alue)c(trac)o(king)h(ma)o
(y)f(b)q(e)i(added)g(almost)d(trivially)m(,)g(while)h(retaining)h(the)h
(same)f(data)224 1515 y(structures.)33 b(Whenev)o(er)19
b(a)f(store)h(instruction)f(is)g(sym)o(b)q(olically)d(executed,)20
b(w)o(e)e(simply)224 1564 y(add)d(a)g(dumm)o(y)d(tuple)j(to)g(the)g
FK(hshT)m(ab)j FN(map.)i(The)15 b(dumm)o(y)d(tuple)j(is)g(a)f(load)g
(op)q(eration)224 1614 y(on)k(the)g(same)e(selected)j(elemen)o(t)e(of)g
(memory)e(to)i(the)h(source)h(virtual)d(register.)30
b(Then)224 1664 y(whenev)o(er)16 b(a)e(load)g(from)f(that)h(lo)q
(cation)g(is)g(met,)f(it)h(will)f(b)q(e)i(found)f(to)g(b)q(e)h
(redundan)o(t)h(b)o(y)224 1714 y(the)c(normal)d(mec)o(hanism.)15
b(In)d(the)f(example)f(ab)q(o)o(v)o(e,)h(the)h(dumm)o(y)d(tuple)i(w)o
(ould)f(b)q(e)i(a)f(load)224 1764 y(of)h FM(t)h FN(to)f(lo)q(cation)g
FM(v)524 1770 y Fz(4)543 1764 y FN(.)17 b(Th)o(us)c(instruction)g(i14)f
(w)o(ould)f(b)q(ecome)i(redundan)o(t,)g(and)f(the)h(store)224
1814 y(at)h(instruction)g(i15)f(w)o(ould)g(b)q(e)i(of)e
FM(v)797 1820 y Fz(4)816 1814 y FN(.)224 1926 y FO(Mutable)i(register)e
(v)m(alues)224 2004 y FN(Some)j(mo)q(di\014cation)e(needs)19
b(to)d(b)q(e)i(made)d(to)i(the)g(sc)o(heme)g(of)f(the)h(previous)g
(section,)h(if)224 2054 y(register)g(v)n(alues)f(are)g(allo)o(w)o(ed)f
(to)h(ha)o(v)o(e)f(m)o(utable)g(v)n(alues.)26 b(It)17
b(w)o(as)g(a)g(guiding)e(principle)224 2104 y(of)h FK(V)l(AL)p
FN(-creation)h(that)g(an)o(y)f(virtual)g(register)h(had)g(a)f(single)h
(de\014nition)f(only)m(.)1510 2089 y Fz(5)1554 2104 y
FN(Muta-)224 2154 y(ble)h(register)g(v)n(alues)f(o)q(ccur)i(for)d(t)o
(w)o(o)h(reasons.)27 b(Firstly)m(,)15 b(ph)o(ysical)h(registers)i(ma)o
(y)c(o)q(ccur)224 2203 y(explicitly)i(in)f(co)q(de,)i(as)g(parameters,)
f(return)h(v)n(alues,)g(or)f(as)g(op)q(erands)h(of)f(instructions)224
2253 y(whic)o(h)d(tak)o(e)f(\014xed)h(registers.)19 b(Also,)12
b(if)g(particular)g(v)n(ariables)g(are)h(allo)q(cated)f(to)g
(registers,)224 2303 y(then)j(these)g(registers)h(ma)o(y)c(ha)o(v)o(e)h
(m)o(ultiple)f(de\014nition)h(p)q(oin)o(ts.)287 2354
y(Ha)o(ving)f(m)o(utable)g(registers)j(in)o(v)n(alidates)d(one)h(of)g
(the)h(k)o(ey)g(assumptions)e(of)h(the)h(algo-)224 2403
y(rithm)d(giv)o(en)g(earlier.)18 b(F)m(or)11 b(example,)f(consider)j
(the)f(follo)o(wing)e FK(V)l(AL)h FN(fragmen)o(t,)f(in)h(whic)o(h)224
2453 y FM(p)245 2459 y Fz(1)278 2453 y FN(is)i(a)h(register)h(v)n
(ariable.)p 224 2491 577 2 v 271 2518 a Fy(5)288 2530
y Fx(Note,)f(b)o(y)g(the)f(w)o(a)o(y)m(,)i(that)e(w)o(e)h(do)g(not)f
(actually)f(demand)g(that)h(a)h(virtual)f(register)f(ha)o(v)o(e)h(a)h
(single)224 2569 y(v)n(alue.)k(Rather)12 b(w)o(e)h(demand)d(that)i(a)h
(virtual)e(register)g(has)h(a)h(single)e(p)q(oin)o(t)h(at)g(whic)o(h)g
(it)h(is)g(de\014ned.)k(A)224 2609 y(virtual)c(register)g(whic)o(h)h
(has)f(its)i(single)e(de\014nition)e(inside)i(a)i(lo)q(op)e(will)i(b)q
(e)f(assigned)e(a)i(new)h(v)n(alue)e(at)224 2648 y(run)o(time)8
b(eac)o(h)g(time)g(the)h(lo)q(op)f(is)h(tra)o(v)o(ersed.)k(Nev)o
(ertheless,)7 b(the)i(register)e(has)i(a)g(single)f(de\014nition)f(p)q
(oin)o(t,)224 2688 y(and)k(has)g(a)g(single)g(v)n(alue)f(n)o(um)o(b)q
(er)f(in)i(this)g(analysis.)p eop
%%Page: 206 212
206 211 bop 224 274 a FN(206)342 b FL(CHAPTER)14 b(7.)31
b(INTR)o(ODUCTION)14 b(TO)g(OPTIMIZA)m(TION)274 427 y
FD(;)f FE(line)f(1)351 472 y FF(div)18 b(v1,v2,p1)207
b FD(;)50 b FE(r)n(esult)12 b(in)h(r)n(e)n(gvar)351 518
y FF(...)351 564 y(lw)19 b(_i,p1)286 b FD(;)50 b FE(new)13
b(value)f(for)i(p1)351 609 y FF(...)351 655 y(div)k(v1,v2,v3)207
b FD(;)50 b FE(r)n(e)n(dundant)11 b(???)351 701 y FF(...)351
746 y FE(v3)i(is)g(use)n(d)f(her)n(e)h(...)224 844 y
FN(W)m(e)g(assume)g(that)g FM(v)547 850 y Fz(1)579 844
y FN(and)g FM(v)679 850 y Fz(2)711 844 y FN(are)g(con)o(v)o(en)o
(tional)g(virtual)f(registers,)i(with)f(a)g(single)g(p)q(oin)o(t)224
894 y(of)d(de\014nition,)g(and)g(hence)i(are)e(not)g(mo)q(di\014ed)f(b)
q(et)o(w)o(een)i(the)g(\014rst)g(and)f(last)g(instructions)h(of)224
943 y(this)i(fragmen)o(t.)j(Our)d(data)f(structures)j(will)c(correctly)
j(tell)e(us)g(that)h(the)g(second)h(division)224 993
y(will)h(result)h(in)g(a)g(previously)f(computed)h(v)n(alue.)23
b(Ho)o(w)o(ev)o(er)16 b(w)o(e)g(cannot)h(simply)c(replace)224
1043 y(later)h(uses)h(of)f FM(v)477 1049 y Fz(3)509 1043
y FN(b)o(y)g FM(p)588 1049 y Fz(1)606 1043 y FN(,)g(since)h
FM(p)755 1049 y Fz(1)787 1043 y FN(no)f(longer)f(has)h(the)h(same)e(v)n
(alue)g(n)o(um)o(b)q(er.)287 1095 y(In)18 b(resp)q(onse)h(w)o(e)g(migh)
o(t)c(simply)h(accept)j(that)f(the)h(instruction)f(is)g(not)g(redundan)
o(t)224 1145 y(and)f(recompute)h(the)g(v)n(alue.)27 b(This)17
b(w)o(ould)f(b)q(e)i(rather)g(unfortunate,)g(since)g(the)g(divide)224
1195 y(instruction)e(is)f(exp)q(ensiv)o(e.)24 b(Alternativ)o(ely)m(,)14
b(with)i(some)e(care)i(w)o(e)g(can)g(impro)o(v)o(e)d(on)i(this)224
1245 y(situation.)j(Supp)q(ose)c(w)o(e)f(adopt)h(the)g(strict)g(con)o
(v)o(en)o(tion)f(that)g(no)g(computation)f(directly)224
1294 y(dep)q(osits)19 b(a)e(result)h(in)f(a)g(m)o(utable)f(register.)29
b(Instead)18 b(w)o(e)g(alw)o(a)o(ys)e(compute)h(the)h(v)n(alue)224
1344 y(in)o(to)12 b(a)f(single)h(assignmen)o(t)f(register,)i(then)g
(cop)o(y)f FK(that)k FN(register)d(to)f(the)g(m)o(utable)f(register.)
224 1394 y(Our)k(example)d(then)j(b)q(ecomes)f(|)274
1529 y FD(;)f FE(line)f(1)351 1575 y FF(div)38 b(v1,v2,v4)187
b FD(;)50 b FE(move)13 b(r)n(esult)f(to)h(r)n(e)n(gvar)351
1620 y FF(move)18 b(v4,p1)247 b FD(;)50 b FE(but)13 b(indir)n(e)n(ctly)
e(!)351 1666 y FF(...)351 1712 y(lw)19 b(_i,v5)286 b
FD(;)50 b FE(new)13 b(value)f(for)i(p1)351 1757 y FF(move)k(v5,p1)247
b FD(;)50 b FE(but)13 b(indir)n(e)n(ctly)e(!)351 1803
y FF(...)351 1849 y(div)18 b(v1,v2,v3)207 b FD(;)50 b
FE(r)n(e)n(dundant)11 b(???)351 1894 y FF(...)351 1940
y FE(v3)i(is)g(use)n(d)f(her)n(e)h(...)224 2038 y FN(Our)j(algorithm)c
(will)h(no)o(w)h(tell)h(us)g(that)f(the)i(second)g(division)d(is)i
(redundan)o(t,)g(and)f(later)224 2087 y(uses)i(of)d FM(v)380
2093 y Fz(3)413 2087 y FN(can)h(safely)g(b)q(e)h(replaced)g(b)o(y)f
FM(v)904 2093 y Fz(4)923 2087 y FN(.)k(The)d(register)g(allo)q(cator)e
(will)g(correctly)i(de-)224 2137 y(termine)d(that)g FM(v)483
2143 y Fz(4)514 2137 y FN(and)f FM(p)613 2143 y Fz(1)644
2137 y FN(m)o(ust)g(b)q(e)h(allo)q(cated)g(di\013eren)o(t)h(registers,)
g(since)g FM(p)1431 2143 y Fz(1)1462 2137 y FN(is)f(rede\014ned)224
2187 y(while)g FM(v)351 2193 y Fz(4)381 2187 y FN(is)g(still)e(liv)o
(e.)17 b(Ho)o(w)o(ev)o(er)12 b(the)g(second)h(cop)o(y)f(will)e(b)q(e)i
(eliminated)e(b)o(y)i(allo)q(cating)e FM(v)1647 2193
y Fz(5)224 2237 y FN(and)15 b FM(p)327 2243 y Fz(1)360
2237 y FN(to)f(the)h(same)f(register.)21 b(The)15 b(\014nal)f(result)i
(is)e(that)h(w)o(e)g(ha)o(v)o(e)f(eliminated)f(the)i(re-)224
2287 y(dundan)o(t)f(division)f(and)g(replaced)i(it)e(b)o(y)h(a)f(v)n
(alue-preserving)i(register-to-register)g(cop)o(y)m(.)224
2337 y(W)m(e)i(ma)o(y)d(ev)o(en)j(ha)o(v)o(e)g(lo)o(w)o(ered)f(the)h
(register)h(pressure)h(lo)q(cally)c(b)o(y)h(shortening)h(the)g(liv)o(e)
224 2386 y(ranges)e(of)e FM(v)421 2392 y Fz(1)454 2386
y FN(and)g FM(v)554 2392 y Fz(2)573 2386 y FN(.)287 2438
y(If)d(w)o(e)h(can)g(guaran)o(tee)g(that)g(the)g FK(V)l(AL)f
FN(has)h(this)f(prop)q(ert)o(y)m(,)i(w)o(e)e(can)h(lea)o(v)o(e)g(the)g
(previous)224 2488 y(algorithm)k(almost)g(unc)o(hanged.)28
b(W)m(e)16 b(m)o(ust)g(tak)o(e)h(accoun)o(t)h(of)e(the)i(fact)f(that)g
(m)o(utable)224 2538 y(registers,)g(lik)o(e)d(memory)m(,)e(ha)o(v)o(e)i
(an)h(initial)e(v)n(alue)h(on)h(en)o(try)g(to)g(the)h(blo)q(c)o(k.)21
b(F)m(urther,)15 b(w)o(e)224 2588 y(m)o(ust)10 b(nev)o(er)i(eliminate)d
(a)i(cop)o(y)g(to)f(a)h(m)o(utable)e(register,)k(since)e(the)h(v)n
(alue)e(ma)o(y)f(b)q(e)j(needed)224 2638 y(outside)i(of)e(the)i(curren)
o(t)g(blo)q(c)o(k.)k(Instead)c(w)o(e)f(lea)o(v)o(e)g(the)g(register)h
(allo)q(cator)e(to)h(eliminate)224 2688 y(the)i(redundan)o(t)f(copies)h
(later.)p eop
%%Page: 207 213
207 212 bop 224 274 a FL(7.3.)31 b(IMPLEMENTING)15 b(PEEPHOLE)g
(OPTIMIZA)m(TION)363 b FN(207)224 390 y FO(Implemen)o(tin)o(g)13
b(the)i(data)g(structures)224 467 y FN(The)g(data)e(structures)k(whic)o
(h)d(w)o(e)g(require)g(in)g(order)h(to)e(p)q(erform)g(lo)q(cal)g
(common)f(sub)q(ex-)224 517 y(pression)20 b(elimination)c(and)j(v)n
(alue)f(trac)o(king)h(are)h(the)f(v)n(alue)g(n)o(um)o(b)q(er)f(table)h
FK(numT)m(ab)s FN(,)224 567 y(and)13 b(the)g(tuple)g(mapping)d(table)j
FK(hshT)m(ab)s FN(.)k(W)m(e)c(do)f(not)h(need)g(a)g(table)f(for)h
(mapping)d(v)n(alue)224 617 y(n)o(um)o(b)q(ers)k(to)g(equiv)n(alen)o(t)
g(virtual)f(registers,)j(pro)o(vided)e(w)o(e)g(n)o(um)o(b)q(er)g(the)h
(\014rst)g(de\014nition)224 666 y(of)f(eac)o(h)g(register)h(v)n(alue)e
(so)h(that)g(it)g(is)g(equal)f(to)h(the)g(virtual)f(register)i(index.)
287 716 y(The)9 b(v)n(alue)g(n)o(um)o(b)q(er)g(table)g(ma)o(y)e(b)q(e)j
(con)o(v)o(enien)o(tly)f(implemen)o(ted)e(as)i(a)g(one-dimensional)224
766 y(arra)o(y)m(,)17 b(using)f(some)g(unique)g(denotation)h(of)f(the)h
(en)o(tit)o(y)f(as)h(index.)26 b(The)17 b(tuple)g(lo)q(okup)224
816 y(table)d(is)g(more)f(di\016cult)g(ho)o(w)o(ev)o(er,)h(since)g(it)g
(maps)e(to)i(the)h(v)n(alue)e(n)o(um)o(b)q(er)g(from)f(a)i(tuple,)224
866 y(the)19 b(arit)o(y)e(of)h(whic)o(h)f(v)n(aries)h(for)g
(instructions)h(with)e(di\013eren)o(t)i(format.)29 b(F)m(or)17
b(example,)224 915 y(a)f(unary)g(op)q(eration)f(has)h(an)g(op)q(erator)
g(plus)g(one)g(input)f(op)q(erand,)i(while)e(a)g(binary)h(op-)224
965 y(eration)j(has)f(an)g(op)q(erator)h(plus)g(t)o(w)o(o)e(input)i(op)
q(erands.)32 b(It)18 b(is)h(normal)d(to)i(implemen)o(t)224
1015 y(this)h(table)f(as)h(a)f FK(hash)i(function)i FN(as)c(the)h(name)
e(already)i(hin)o(ted.)31 b(F)m(or)18 b(eac)o(h)h(di\013eren)o(t)224
1065 y(instruction)c(format)e(w)o(e)i(m)o(ust)e(ha)o(v)o(e)i(a)f(hash)g
(function)h(whic)o(h)f(maps)f(the)j(used)f(\014elds)g(of)224
1115 y(the)g(instruction)f(format)e(in)o(to)h(a)h(hash)g(table)g
(index.)287 1164 y(This)j(structure)j(ma)o(y)c(b)q(e)i(elegan)o(tly)f
(implemen)o(ted)e(using)j(an)f(arra)o(y)g(of)g(pro)q(cedure)224
1214 y(v)n(ariables,)c(indexed)h(on)g(instruction)g(format-t)o(yp)q(e.)
224 1351 y FI(7.3)67 b(Implemen)n(ting)24 b(p)r(eephole)f(optimization)
464 1442 y FG(<still)e(to)g(come>)224 1580 y FI(7.4)67
b(Finding)24 b(out)f(more)224 1670 y FG(<<)f(various)e(pointers)g(to)i
(the)f(literature)f(>>)224 1808 y FI(7.5)67 b(Exercises)254
1899 y FN(7.1)254 1981 y(7.2)254 2064 y(7.3)20 b(The)c(IBM)h
FK(Power)i FN(arc)o(hitecture)f(has)e(a)f(\\stic)o(ky")h(o)o(v)o
(er\015o)o(w)f(\015ag)g(whic)o(h)h(once)g(set)328 2114
y(remains)9 b(set)j(un)o(til)d(it)h(is)g(tested,)i(or)e(some)f
(instruction)i(is)f(executed)i(whic)o(h)e(destro)o(ys)328
2164 y(the)15 b(con)o(ten)o(ts)g(of)e(the)i(\015ag)f(register.)19
b(F)m(or)14 b(our)g(purp)q(oses,)h(there)h(are)e(four)g(kinds)g(of)328
2213 y(instructions.)k(There)12 b(are)f(those)g(that)g(lea)o(v)o(e)f
(the)i(con)o(ten)o(ts)g(of)e(the)h(\015ag)f(unc)o(hanged.)328
2263 y(There)17 b(are)f(those)g(that)g(conditionally)e
FK(set)19 b FN(the)d(\015ag.)23 b(There)17 b(are)f(those)g(that)g
FK(kil)r(l)328 2313 y FN(the)c(\015ag,)f(destro)o(ying)g(its)g(con)o
(ten)o(ts.)19 b(Finally)9 b(there)k(are)e(those)h(that)f
FK(cle)n(ar)k FN(the)d(\015ag.)328 2363 y(A)o(t)i(the)h(individual)d
(instruction)i(lev)o(el)f(the)i(follo)o(wing)c FK(FSA)j
FN(applies)g(|)597 2375 y
 10985553 4933632 0 0 10985553 4933632 startTexFig
 597 2375 a
%%BeginDocument: xerfsa.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-67.0 194.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Ellipse
n 104 178 15 15 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 173 179 15 15 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 245 179 15 15 0 360 DrawEllipse gs col-1 s gr
0.500 setlinewidth
% Polyline
n 74 179 m 88 179 l gs col-1 s gr
n 80.000 177.000 m 88.000 179.000 l 80.000 181.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 120 179 m 158 179 l gs col-1 s gr
n 150.000 177.000 m 158.000 179.000 l 150.000 181.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 189 180 m 230 180 l gs col-1 s gr
n 222.000 178.000 m 230.000 180.000 l 222.000 182.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 246.000 195.000 m 246.000 205.000 l
	246.000 205.000 246.000 215.000 175.500 215.000 DrawSplineSection
	175.500 215.000 105.000 215.000 105.000 204.000 DrawSplineSection
	105.000 193.000 l gs col-1 s gr
n 103.000 201.000 m 105.000 193.000 l 107.000 201.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 165.000 192.000 m 160.000 198.000 l
	160.000 198.000 155.000 204.000 138.500 204.000 DrawSplineSection
	138.500 204.000 122.000 204.000 116.500 197.500 DrawSplineSection
	111.000 191.000 l gs col-1 s gr
n 114.641 198.399 m 111.000 191.000 l 117.694 195.815 l gs 2 setlinejoin col-1 s gr
% Open spline
n 237.000 192.000 m 232.000 197.500 l
	232.000 197.500 227.000 203.000 207.000 202.500 DrawSplineSection
	207.000 202.500 187.000 202.000 184.000 197.500 DrawSplineSection
	181.000 193.000 l gs col-1 s gr
n 183.774 200.766 m 181.000 193.000 l 187.102 198.547 l gs 2 setlinejoin col-1 s gr
% Open spline
n 99.000 164.000 m 96.000 155.000 l
	96.000 155.000 93.000 146.000 104.000 146.000 DrawSplineSection
	104.000 146.000 115.000 146.000 112.000 154.500 DrawSplineSection
	109.000 163.000 l gs col-1 s gr
n 113.549 156.122 m 109.000 163.000 l 109.777 154.790 l gs 2 setlinejoin col-1 s gr
% Open spline
n 240.000 165.000 m 237.000 156.000 l
	237.000 156.000 234.000 147.000 245.000 147.000 DrawSplineSection
	245.000 147.000 256.000 147.000 253.000 155.500 DrawSplineSection
	250.000 164.000 l gs col-1 s gr
n 254.549 157.122 m 250.000 164.000 l 250.777 155.790 l gs 2 setlinejoin col-1 s gr
% Open spline
n 168.000 165.000 m 165.000 156.000 l
	165.000 156.000 162.000 147.000 173.000 147.000 DrawSplineSection
	173.000 147.000 184.000 147.000 181.000 155.500 DrawSplineSection
	178.000 164.000 l gs col-1 s gr
n 182.549 157.122 m 178.000 164.000 l 178.777 155.790 l gs 2 setlinejoin col-1 s gr
/Times-Italic findfont 10.00 scalefont setfont
238 182 m 
gs 1 -1 scale (live) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
129 177 m 
gs 1 -1 scale (clear) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
203 178 m 
gs 1 -1 scale (set) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
201 200 m 
gs 1 -1 scale (clear) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
132 201 m 
gs 1 -1 scale (kill) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
167 213 m 
gs 1 -1 scale (kill) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
95 144 m 
gs 1 -1 scale (other) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
95 182 m 
gs 1 -1 scale (dead) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
165 144 m 
gs 1 -1 scale (clear) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
239 144 m 
gs 1 -1 scale (set) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
164 182 m 
gs 1 -1 scale (clear) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 eop
%%Page: 208 214
208 213 bop 224 274 a FN(208)342 b FL(CHAPTER)14 b(7.)31
b(INTR)o(ODUCTION)14 b(TO)g(OPTIMIZA)m(TION)328 390 y
FN(Within)j(a)h(basic)g(blo)q(c)o(k,)g(w)o(e)g(ma)o(y)e(try)i(to)g
(economize)g(the)g(n)o(um)o(b)q(er)f(of)h(o)o(v)o(er\015o)o(w)328
440 y(tests)g(b)o(y)e(only)f(testing)h(when)h(it)e(is)h(necessary)i(to)
e(do)g(so.)25 b(W)m(ork)15 b(out)h(ho)o(w)g(to)g(do)328
490 y(this,)h(using)f(the)h(con)o(v)o(en)o(tion)f(that)g(at)g(the)h
(start)g(of)e(eac)o(h)i(basic)g(blo)q(c)o(k)f(the)g(state)328
540 y(is)f FK(de)n(ad)p FN(.)21 b(Assume)15 b(the)g(existence)i(of)d
(an)g(instruction)h(\\)p FG(clear)p FN(")f(whic)o(h)g(clears)i(the)328
590 y(\015ag,)e(and)g(another)h(\\)p FG(test)p FN(")e(whic)o(h)h(traps)
h(if)f(the)h(\015ag)f(is)g(set,)h(and)g(clears)g(the)g(\015ag)328
640 y(as)f(a)g(side-e\013ect.)p eop
%%Page: 209 215
209 214 bop 224 702 a FJ(Chapter)32 b(8)224 909 y FP(Data\015o)m(w)40
b(Analysis)224 1150 y FI(8.1)67 b(Creating)22 b(the)h(con)n(trol)g
(\015o)n(w)f(graph)224 1241 y FN(By)16 b(data\015o)o(w)e(analysis)h(w)o
(e)g(mean)f(all)g(of)h(the)g(computations)f(whic)o(h)h(are)h(p)q
(erformed)f(on)224 1291 y(the)20 b FO(con)o(trol)g(\015o)o(w)h(graph)d
FN(\()p FK(CF)o(G)t FN(\))h(of)g(a)g(pro)q(cedure)i(or)e(function.)34
b(A)19 b(con)o(trol)g(\015o)o(w)224 1341 y(graph)d(represen)o(ts)i(the)
e(con)o(trol)f(\015o)o(w)g(in)f(a)h(pro)q(cedure,)j(it)d(is)g(a)g
(directed)i(graph,)e(and)g(in)224 1390 y(general)g(is)g(cyclic.)21
b(Eac)o(h)16 b FO(no)q(de)e FN(of)g(a)g FK(CF)o(G)19
b FN(denotes)d(a)e(single)h(basic)g(blo)q(c)o(k,)f(as)h(de\014ned)224
1440 y(in)i(the)i(previous)e(c)o(hapter.)30 b(There)19
b(is)e(an)g(directed)i FO(edge)e FN(in)g(the)h FK(CF)o(G)j
FN(b)q(et)o(w)o(een)e(t)o(w)o(o)224 1490 y(no)q(des,)h(if)e(the)h
(second)h(represen)o(ts)h(a)e(basic)f(blo)q(c)o(k)g(whic)o(h)h(is)f(a)h
(p)q(ossible)f(con)o(trol)h(\015o)o(w)224 1540 y(successor)e(of)d(the)h
(basic)g(blo)q(c)o(k)f(whic)o(h)g(the)h(\014rst)h(represen)o(ts.)22
b(There)16 b(is)e(a)g(distinguished)224 1590 y FK(start)k
FN(no)q(de)d(at)f(whic)o(h)g(all)f(con)o(trol)h(\015o)o(ws)g(en)o(ter)i
(the)f(graph,)e(and)h(w)o(e)h(shall)e(also)h(arrange)224
1640 y(that)e(all)f(con)o(trol)h(\015o)o(ws)f(whic)o(h)h(lea)o(v)o(e)g
(the)g(graph)g(pass)g(through)g(a)g(single)f FK(end)17
b FN(no)q(de.)h(The)224 1689 y(existence)e(of)d(these)j(t)o(w)o(o)d
(distinguished)h(no)q(des)h(sa)o(ys)f(nothing)f(at)h(all)e(ab)q(out)i
(whether)h(or)224 1739 y(not)f(the)h(actual)e(co)q(de)i(has)f(one)g(or)
g(man)o(y)e(en)o(try)i(and)g(exit)g(p)q(oin)o(ts.)224
1853 y FH(8.1.1)56 b(De\014nitions)224 1930 y FN(F)m(ormally)12
b(then,)k(a)f FK(CF)o(G)j FN(is)d(a)g(quad)g(\()p FM(N)r(;)7
b(E)r(;)g(s;)g(e)p FN(\),)15 b(where)h FM(N)k FN(is)15
b(the)h(set)g(of)f(no)q(des,)g FM(E)i FN(is)224 1980
y(the)d(set)h(of)d(edges,)j(and)e FM(s)f Ft(2)f FM(N)18
b FN(and)13 b FM(e)f Ft(2)f FM(N)19 b FN(are)13 b(the)h(start)g(and)g
(end)g(no)q(des)g(resp)q(ectiv)o(ely)m(.)224 2030 y(The)i(edges)g(are)f
(pairs)g(of)f(no)q(des)i(whic)o(h)f(are)g(adjacen)o(t)h(in)e(the)i
(graph,)e(so)h(w)o(e)h(ma)o(y)d(treat)224 2080 y FM(E)19
b FN(as)d(a)g(relation)g(on)g(pairs)g(of)g(no)q(des.)26
b(W)m(e)16 b(sa)o(y)g(\()p FM(a;)7 b(b)p FN(\))k Ft(2)g
FM(E)18 b FN(if)e(and)g(only)f(if)h(there)h(is)g(an)224
2129 y(edge)d(\(directly\))f(connecting)g(no)q(de)g FM(a)f
FN(to)g(no)q(de)h FM(b)p FN(.)18 b(W)m(e)12 b(also)g(denote)h(this)g
(relation)e FM(a)h Ft(!)f FM(b)p FN(,)224 2179 y(meaning)h(that)i
(there)i(is)d(an)h(edge)h(\(directly\))f(from)e(no)q(de)i
FM(a)g FN(to)g(no)q(de)g FM(b)p FN(.)287 2229 y(W)m(e)f(de\014ne)i(t)o
(w)o(o)e(sets)j(for)d(eac)o(h)i(no)q(de)f(in)f FM(N)5
b FN(.)677 2309 y Ft(8)p FM(a)11 b Ft(2)g FM(N)r(;)c
FK(pr)n(e)n(d)t FN(\()p FM(a)p FN(\))12 b(=)g Ft(f)p
FM(b)f FN(:)g FM(b)g Ft(!)h FM(a)p Ft(g)677 2390 y(8)p
FM(a)g Ft(2)f FM(N)r(;)c FK(suc)n(c)s FN(\()p FM(a)p
FN(\))k(=)h Ft(f)p FM(b)f FN(:)g FM(a)h Ft(!)f FM(b)p
Ft(g)224 2458 y FN(These)21 b(t)o(w)o(o)e(sets)i(are)f(the)g(con)o
(trol)f(\015o)o(w)g FK(pr)n(e)n(de)n(c)n(essors)j FN(and)d
FK(suc)n(c)n(essors)k FN(of)c(the)h(giv)o(en)224 2508
y(no)q(de.)34 b(No)q(de)19 b FM(s)g FN(\(probably)g(alone\))f(has)h(an)
g(empt)o(y)e FK(pr)n(e)n(d)23 b FN(set,)e(while)d(no)q(de)h
FM(e)h FN(has)f(an)224 2557 y(empt)o(y)13 b FK(suc)n(c)i
FN(set.)k(The)14 b(cardinalit)o(y)e(of)g(the)i(t)o(w)o(o)f(sets)h(are)g
(the)g FK(in-de)n(gr)n(e)n(e)h FN(and)e FK(out-de)n(gr)n(e)n(e)224
2607 y FN(of)h(a)f(particular)h(no)q(de.)656 2688 y Ft(8)p
FM(a)d Ft(2)g FM(N)r(;)c FK(in-de)n(gr)n(e)n(e)s FN(\()p
FM(a)p FN(\))12 b(=)g Ft(j)p FK(pr)n(e)n(d)s FN(\()p
FM(a)p FN(\))p Ft(j)914 2793 y FN(209)p eop
%%Page: 210 216
210 215 bop 224 274 a FN(210)626 b FL(CHAPTER)14 b(8.)32
b(D)o(A)m(T)m(AFLO)o(W)12 b(ANAL)m(YSIS)646 390 y Ft(8)p
FM(a)f Ft(2)g FM(N)r(;)c FK(out-de)n(gr)n(e)n(e)s FN(\()p
FM(a)p FN(\))12 b(=)g Ft(j)p FK(suc)n(c)r FN(\()p FM(a)p
FN(\))p Ft(j)287 470 y FN(F)m(or)18 b(an)o(y)g(t)o(w)o(o)g(no)q(des)h
FM(a;)7 b(b)18 b FN(w)o(e)h(sa)o(y)f(that)h FM(b)f FN(is)g
FK(r)n(e)n(achable)k FN(from)16 b FM(a)j FN(if)f(there)h(is)g(a)f(di-)
224 520 y(rected)d(path)e(from)e FM(a)i FN(to)g FM(b)p
FN(.)k(Reac)o(habilit)o(y)11 b(is)i(the)h(transitiv)o(e)e(closure)i(of)
e(the)i Ft(!)e FN(relation.)224 570 y(F)m(ormally)m(,)e(w)o(e)k(write)
555 664 y FM(a)d Ft(!)630 647 y Fz(+)669 664 y FM(b)g
Ft(\021)h FM(a)f Ft(!)g FM(b)e Ft(_)g(9)p FM(c)j Ft(2)f
FM(N)17 b FN(:)11 b FM(a)g Ft(!)g FM(c)e Ft(^)g FM(c)j
Ft(!)1279 647 y Fz(+)1317 664 y FM(b)568 761 y(a)f Ft(!)643
744 y FA(\003)673 761 y FM(b)h Ft(\021)g FM(a)f FN(=)h
FM(b)d Ft(_)g(9)p FM(c)i Ft(2)h FM(N)k FN(:)11 b FM(a)g
Ft(!)g FM(c)f Ft(^)f FM(c)i Ft(!)1274 744 y FA(\003)1304
761 y FM(b)224 840 y FN(The)k(last)e(is)h(the)h(re\015exiv)o(e,)f
(transitiv)o(e)g(closure)g(of)g(the)g Ft(!)g FN(relation.)287
891 y(A)j(stronger)h(notion)e(than)h(b)q(eing)g(a)g(predecessor)j(of)c
(a)h(particular)g(no)q(de)g(is)g(that)g(of)224 941 y
FK(dominators)s FN(.)35 b(The)20 b(dominators)e(of)g(a)h(particular)h
(no)q(de)f(are)h(all)e(those)i(no)q(des)g(whic)o(h)224
990 y(o)q(ccur)c(on)e FK(every)j FN(path)d(from)f FM(s)h
FN(to)g(the)h(c)o(hosen)g(no)q(de.)k(This)14 b(is)h(an)e(imp)q(ortan)o
(t)g(set,)h(since)224 1040 y(w)o(e)f(kno)o(w)f(that)g(the)h(co)q(de)h
(in)e(an)o(y)g(suc)o(h)h(basic)f(blo)q(c)o(k)g(m)o(ust)g(ha)o(v)o(e)g
(b)q(een)i(executed)g(at)e(least)224 1090 y(once)j(b)q(efore)g(con)o
(trol)e(reac)o(hes)j(our)e(no)q(de)g(of)f(in)o(terest.)287
1141 y(Suc)o(h)j(de\014nitions,)f(stated)i(in)e(terms)g(of)g(the)h
FK(non-existenc)n(e)k FN(of)15 b(paths)g(with)h(certain)224
1191 y(prop)q(erties,)h(are)e(problematical.)k(In)c(this)g(case)h(w)o
(e)f(ha)o(v)o(e)g(demanded)g(that)g(there)h(b)q(e)g(no)224
1241 y(path)g(from)d FK(start)19 b FN(to)c(the)h(no)q(de)g
FM(n)f FN(whic)o(h)g(do)q(es)h(not)f(pass)h(through)f(ev)o(ery)h
FM(k)d Ft(2)e FK(dom)t FN(\()p FM(n)p FN(\).)224 1291
y(W)m(e)j(need)h(to)e(\014nd)i(an)e(inductiv)o(e)h(de\014nition)g(whic)
o(h)f(is)h(equiv)n(alen)o(t.)287 1342 y(As)e(an)h(insigh)o(t,)e
(consider)i(the)g(relation)f(b)q(et)o(w)o(een)i(the)f(dominators)d(of)i
(no)q(des)h FM(b)f FN(and)g FM(a)224 1391 y FN(if)i FM(b)d
Ft(!)g FM(a)p FN(.)18 b(If)c FM(b)g FN(is)g(the)g(only)f(predecessor)k
(of)d FM(a)p FN(,)f(then)i FM(b)f FN(is)f(a)h(dominator)e(of)h
FM(a)p FN(,)h(and)g(ev)o(ery)224 1441 y(no)q(de)e(whic)o(h)e(dominates)
g FM(b)h FN(also)f(dominates)f FM(a)p FN(.)17 b(Supp)q(ose)12
b(no)o(w)e(that)h FM(b)g FN(and)g FM(c)f FN(are)i(the)f(only)224
1491 y(t)o(w)o(o)i(predecessors)k(of)c(no)q(de)g FM(a)p
FN(.)18 b(The)c(paths)f(whic)o(h)h(reac)o(h)g FM(a)f
FN(through)g FM(b)g FN(ha)o(v)o(e)h(passed,)g(b)o(y)224
1541 y(assumption,)f(through)h(all)e(dominators)h(of)g
FM(b)h FN(along)e(the)j(path,)e(and)h(similarly)d(all)i(paths)224
1591 y(through)h FM(c)g FN(ha)o(v)o(e)g(passed)g(through)g(all)f(the)h
(dominators)e(of)h FM(c)p FN(.)18 b(Clearly)m(,)13 b(the)h(dominators)
224 1640 y(of)g FM(a)g FN(m)o(ust)f(b)q(e)h(the)h(in)o(tersection)g(of)
e(the)i(dominators)d(of)h FM(a)h FN(and)g FM(b)p FN(.)k(Generalizing)13
b(to)h(an)o(y)224 1690 y(n)o(um)o(b)q(er)g(of)f(predecessors,)k(w)o(e)d
(obtain)f(the)h(recursiv)o(e)i(de\014nition)d(|)582 1790
y Ft(8)p FM(a)f Ft(2)f FM(N)r(;)c FK(dom)t FN(\()p FM(a)p
FN(\))12 b(=)978 1751 y Fd(\\)921 1849 y FB(b)p FA(2)p
FK(pr)n(e)n(d)t Fz(\()p FB(a)p Fz(\))1081 1790 y FN(\()p
FK(dom)t FN(\()p FM(b)p FN(\))d Ft([)g FM(b)p FN(\))224
1938 y(This)14 b(is)f(an)h(in)o(teresting)g(equation,)f(b)q(eing)g(a)h
(set)g(of)f(sim)o(ultaneous,)f(recursiv)o(e)j(equations)224
1988 y(on)k(set-v)n(alued)g(quan)o(tities.)33 b(Sev)o(eral)19
b(questions)g(immediately)d(arise:)28 b(ho)o(w)19 b(is)f(one)h(to)224
2037 y(solv)o(e)e(suc)o(h)h(a)f(set)h(of)f(equations;)h
FO(is)e FN(there)j(alw)o(a)o(ys)d(a)h(solution;)g(is)g(there)i
FO(more)g(than)224 2087 y(one)14 b FN(solution?)287 2138
y(As)e(it)g(turns)h(out,)f(almost)e(all)h(the)i(equations)f(in)g(this)g
(c)o(hapter)h(are)g(of)f(this)g(kind.)17 b(The)224 2188
y(answ)o(er)c(to)f(the)h(questions)g(are:)18 b(there)13
b(are)g(at)f(least)h(t)o(w)o(o)e(w)o(a)o(ys)h(to)h(compute)e(the)i
(solution)224 2238 y(to)k(suc)o(h)g(equations,)f(there)i(alw)o(a)o(ys)d
(is)h(a)g(solution,)g(and)g(y)o(es,)h(unfortunately)f(there)i(are)224
2288 y(man)o(y)12 b(solutions.)18 b(In)13 b(the)h(next)g(section)h(w)o
(e)e(consider)i(one)f(of)e(the)j(metho)q(ds)e(of)g(solution,)224
2338 y(but)i(\014rst)f(let)g(us)g(explore)h(wh)o(y)e(there)j(is)d(more)
g(than)h(one)g(solution.)287 2389 y(Firstly)m(,)9 b(note)h(that)f(if)g
(w)o(e)h(substitute)g Ft(8)p FM(b;)d FK(dom)s FN(\()p
FM(b)p FN(\))12 b(=)g FM(N)i FN(in)o(to)9 b(the)h(equations,)g(where)g
FM(N)224 2438 y FN(is)h(the)h(set)g(of)e(all)g(no)q(des,)i(then)g(they)
f(are)h(trivially)d(satis\014ed.)18 b(Ho)o(w)o(ev)o(er,)11
b(this)g(implies)e(that)224 2488 y(ev)o(ery)k(no)q(de)f(dominates)f(ev)
o(ery)i(other)f(no)q(de,)g(whic)o(h)g(do)q(es)h(not)f(satisfy)f(our)h
(sp)q(eci\014cation,)224 2538 y(ev)o(en)i(if)e(it)g(do)q(es)i(satisfy)e
(the)i(equations.)k(In)12 b(this)h(particular)g(case,)g(what)g(w)o(e)g
(need)h(is)f(the)224 2588 y FK(le)n(ast)18 b FN(solution)c(in)g(the)h
(sense)h(of)e(ha)o(ving)f(the)i(sets)h(with)e(the)h(smallest)e(p)q
(ossible)i(n)o(um)o(b)q(er)224 2638 y(of)20 b(elemen)o(ts)g(whic)o(h)g
(satisfy)f(the)i(equations.)36 b(This)20 b(is)g(the)h
FK(le)n(ast)f(\014xe)n(d)h(p)n(oint)j FN(of)c(the)224
2688 y(equations,)14 b(in)f(terms)h(of)f(the)i(theory)f(of)f
(functions.)p eop
%%Page: 211 217
211 216 bop 224 274 a FL(8.1.)31 b(CREA)m(TING)13 b(THE)h(CONTR)o(OL)g
(FLO)o(W)g(GRAPH)420 b FN(211)287 390 y(Since)13 b(these)h(equations)f
(are)g(written)g(with)g(the)g(v)n(alues)f(at)h(eac)o(h)g(no)q(de)g(dep)
q(ending)h(on)224 440 y(information)e(from)i(the)h(predecessor)j(no)q
(des,)e(w)o(e)f(call)f(this)h(a)g FO(forw)o(ard)h(\015o)o(w)e
FN(problem.)224 490 y(W)m(e)i(shall)f(meet)g(other)h(data\015o)o(w)f
(problems)g(later,)h(in)f(whic)o(h)g(the)i(v)n(alues)e(at)h(no)q(des)g
(de-)224 540 y(p)q(end)i(on)e(information)d(from)i(the)i(successor)i
(no)q(des.)26 b(W)m(e)16 b(shall)g(call)g(this)g(second)i(kind)224
590 y FO(bac)o(kw)o(ard)e(\015o)o(w)d FN(problems.)224
705 y FO(Iterativ)o(e)h(solutions)f(to)i(set)g(equations)224
785 y FN(One)c(metho)q(d)f(of)g(solution)f(for)h(equations)h(of)e(the)i
(kind)f(giv)o(en)g(ab)q(o)o(v)o(e,)g(is)g(iteration.)17
b(In)10 b(this)224 835 y(metho)q(d,)h(w)o(e)g(mak)o(e)f(an)h(initial)f
(\\guess")i(at)f(the)h(solution)e(and)h(iterate)h(b)o(y)f(substitution)
h(of)224 884 y(the)j(appro)o(ximation)d(on)i(the)h(righ)o(t)f(hand)h
(side)g(of)e(the)j(equations)e(in)g(order)h(to)g(con)o(v)o(erge)224
934 y(to)o(w)o(ard)c(a)g(solution.)16 b(Since)11 b(w)o(e)h(w)o(an)o(t)e
(a)h FK(le)n(ast)j FN(solution)c(w)o(e)h(ma)o(y)f(safely)g(start)i
(with)e(empt)o(y)224 984 y(sets)16 b(as)e(a)f(\014rst)i(appro)o
(ximation.)754 969 y Fz(1)287 1035 y FN(Since)c(w)o(e)g(deal)g(with)g
(\014nite)g(sets,)i(and)e(can)g(only)f FK(add)16 b FN(extra)11
b(elemen)o(ts)g(to)g(the)h(appro)o(x-)224 1085 y(imations)f(at)i(eac)o
(h)g(iteration,)f(it)h(is)g(plausible)f(to)h(argue)g(that)g(the)g(pro)q
(cess)i(will)d(con)o(v)o(erge)224 1135 y(in)f(a)f(\014nite)i(n)o(um)o
(b)q(er)e(of)g(steps.)18 b(In)11 b(fact,)g(for)g(certain)h
FK(CF)o(G)t FN(s)e(w)o(e)h(can)h(see)g(that)f(the)g(solution)224
1185 y(can)k(b)q(e)f(found)f(in)h(just)g(one)g(iteration.)287
1236 y(Supp)q(ose)g(that)f(when)g(w)o(e)h(wish)f(to)g(calculate)g
FK(dom)t FN(\()p FM(a)p FN(\))g(w)o(e)g(already)g(ha)o(v)o(e)g(the)h
(correct)224 1286 y FK(dom)21 b FN(set)e(of)d(ev)o(ery)i(predecessor)j
(of)16 b FM(a)p FN(.)29 b(In)17 b(that)g(case)i(w)o(e)e(can)h(simply)d
(substitute)k(the)224 1336 y(correct)g(v)n(alues)d(on)g(the)h(righ)o
(t,)g(and)f(ha)o(v)o(e)g(the)i(answ)o(er)f(in)f(one)h(step.)27
b(So)16 b(the)h(question)224 1386 y(then)g(is,)e(can)h(w)o(e)g(\014nd)g
(a)f(w)o(a)o(y)g(of)g(visiting)g(the)h(no)q(des)g(so)g(that)g(when)g(w)
o(e)g(reac)o(h)g(a)g(no)q(de)224 1435 y(w)o(e)f(ha)o(v)o(e)e(already)h
(reac)o(hed)h(all)e(of)g(its)h(predecessors?)287 1487
y(F)m(or)g(acyclic)g(graphs,)h(there)g(is)g(an)f(order)h(of)f(tra)o(v)o
(ersal)g(of)g(the)h FK(CF)o(G)j FN(whic)o(h)d(has)f(this)224
1536 y(prop)q(ert)o(y)m(.)20 b(It)14 b(is)g(called)g
FO(rev)o(erse)h(p)q(ost-order)p FN(.)h(As)f(it)f(turns)h(out)f(this)g
(is)g(a)g(go)q(o)q(d)g(order)224 1586 y(of)i(tra)o(v)o(ersal,)h(for)f
(all)f(forw)o(ard)g(\015o)o(w)h(problems,)g(and)g(not)g(just)h(for)e
(the)i(case)h(of)d(acyclic)224 1636 y(graphs.)224 1752
y FO(Rev)o(erse)g(p)q(ost-order)f(tra)o(v)o(ersal)224
1831 y FN(The)i(prop)q(ert)o(y)g(that)f(w)o(e)g(require)h(of)f(rev)o
(erse)i(p)q(ost-order)f(tra)o(v)o(ersal,)f(is)g(that)g(ev)o(ery)h(pre-)
224 1881 y(decessor)g(of)e(a)f(no)q(de)i(is)e(pro)q(cessed)k(b)q(efore)
d(the)h(no)q(de)f(is)g(pro)q(cessed.)287 1932 y(There)j(are)g(t)o(w)o
(o)f(kind)g(of)f(recursiv)o(e)j(tra)o(v)o(ersal)e(familiar)d(to)k(ev)o
(ery)g(computer)f(scien-)224 1982 y(tist.)24 b(These)16
b(are)g(pre-order,)h(whic)o(h)f(has)f(the)h(prop)q(ert)o(y)h(that)e(a)h
(no)q(de)g(is)f(visited)h(b)q(efore)224 2032 y(an)o(y)h(successor)i(is)
d(visited,)h(and)f(depth-\014rst)j(p)q(ost-order)e(in)f(whic)o(h)h(ev)o
(ery)g(successor)i(is)224 2082 y(recursiv)o(ely)c(pro)q(cessed)h(b)q
(efore)f(the)g(no)q(de)f(is)g(pro)q(cessed.)287 2133
y(This)h(depth)h(\014rst)g(p)q(ost-order)g(is)f(exactly)h(the)g(opp)q
(osite)f(of)g(what)g(is)g(needed,)i(so)e(w)o(e)224 2183
y(ma)o(y)8 b(use)j(a)f(depth-\014rst)h(p)q(ost-order)g(tra)o(v)o(ersal)
f(to)f(n)o(um)o(b)q(er)h(the)g(no)q(des,)h(or)f(more)f(generally)224
2233 y(to)16 b(place)f(the)h(no)q(des)g(in)f(a)g(list.)22
b(Figure)16 b(8.2)e(is)h(an)h(algorithm)c(whic)o(h)k(places)g(the)f(no)
q(des)224 2282 y(of)f(a)g(graph)g(on)g(a)g(list)f(in)h(rev)o(erse)i(p)q
(ost-order.)k(The)15 b(pro)q(cedure)h(is)e(called)g(initially)e(with)
224 2332 y(the)j(list)e(empt)o(y)m(,)f(and)i(with)f(the)i(actual)f
(parameter)f(b)q(eing)h(the)g(start)h(no)q(de)f FM(s)p
FN(.)224 2448 y FO(Immediate)g(dominators)f(and)i(the)g(dominator)e
(tree)224 2527 y FN(Of)18 b(all)e(the)h(no)q(des)h(in)f(the)h
(dominator)d(set)j(of)f(a)g(particular)g(no)q(de)h(there)g(is)f(an)g
(unique)224 2577 y(no)q(de)i(whic)o(h)f(is)g FK(ne)n(ar)n(est)k
FN(to)d(the)g(no)q(de.)31 b(W)m(e)18 b(call)g(this)g(nearest)i
(dominator)c(no)q(de)j(the)p 224 2610 577 2 v 271 2636
a Fy(1)288 2648 y Fx(Ok,)13 b(let)e(us)h(pla)o(y)g(safe.)17
b(Go)12 b(and)f(c)o(hec)o(k)g(that)g(all)h(sets)g(empt)o(y)e(is)j(not)e
(a)h(trivial)f(solution)g(to)g(the)h(set)224 2688 y(of)g(equations!)p
eop
%%Page: 212 218
212 217 bop 224 274 a FN(212)626 b FL(CHAPTER)14 b(8.)32
b(D)o(A)m(T)m(AFLO)o(W)12 b(ANAL)m(YSIS)449 349 y
 15656058 10656645 0 0 15656058 10656645 startTexFig
 449
349 a
%%BeginDocument: cfgxmpl.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-98.0 225.0 translate 0.900 -0.900 scale
0.500 setlinewidth
% Ellipse
n 139 119 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 139 199 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 119 159 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 159 159 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 140 79 9 9 0 360 DrawEllipse gs 0.95 setgray fill gr
gs col-1 s gr
% Ellipse
n 140 240 9 9 0 360 DrawEllipse gs 0.95 setgray fill gr
gs col-1 s gr
% Polyline
n 140 88 m 140 108 l gs col-1 s gr
n 142.000 100.000 m 140.000 108.000 l 138.000 100.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 140 210 m 140 232 l gs col-1 s gr
n 142.000 224.000 m 140.000 232.000 l 138.000 224.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 134 129 m 123 149 l gs col-1 s gr
n 128.608 142.954 m 123.000 149.000 l 125.103 141.026 l gs 2 setlinejoin col-1 s gr
% Polyline
n 145 129 m 155 150 l gs col-1 s gr
n 153.366 141.917 m 155.000 150.000 l 149.755 143.637 l gs 2 setlinejoin col-1 s gr
% Polyline
n 154 169 m 144 189 l gs col-1 s gr
n 149.367 182.739 m 144.000 189.000 l 145.789 180.950 l gs 2 setlinejoin col-1 s gr
% Polyline
n 123 169 m 135 190 l gs col-1 s gr
n 132.767 182.062 m 135.000 190.000 l 129.294 184.046 l gs 2 setlinejoin col-1 s gr
/Times-Roman findfont 11.00 scalefont setfont
239 199 m 
gs 1 -1 scale (reverse post-order:  s,1,3,2,4,e) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
239 159 m 
gs 1 -1 scale (post-order:  e,4,2,3,1,s) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
239 119 m 
gs 1 -1 scale (pre-order: s,1,2,4,e,3) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
138 83 m 
gs 1 -1 scale (s) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
139 242 m 
gs 1 -1 scale (e) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
137 123 m 
gs 1 -1 scale (1) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
117 163 m 
gs 1 -1 scale (2) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
157 163 m 
gs 1 -1 scale (3) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
137 204 m 
gs 1 -1 scale (4) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 316 1115 a FN(Figure)i(8.1:)j(Example)12 b FK(CF)o(G)t
FN(,)h(sho)o(wing)g(pre-)i(p)q(ost-)f(and)g(rev)o(erse-p)q(ost-order)p
270 1218 1350 2 v 269 1264 2 46 v 372 1250 a FF(VAR)19
b(revList)d(:)39 b(BlockSeque)o(nce)o(;)p 1619 1264 V
269 1309 V 1619 1309 V 269 1355 V 372 1341 a(PROCEDURE)16
b(ReversePos)o(tOr)o(de)o(r\(n)o(od)o(e)h(:)39 b(BBlock\);)p
1619 1355 V 269 1401 V 423 1387 a(VAR)19 b(successor)d(:)39
b(BBlock;)p 1619 1401 V 269 1446 V 372 1433 a(BEGIN)p
1619 1446 V 269 1492 V 423 1478 a FE(mark)14 b(this)e(no)n(de)g(as)h
(visite)n(d;)p 1619 1492 V 269 1538 V 423 1524 a FF(FOR)f
FE(every)g(unvisite)n(d)f(suc)n(c)n(essor)g(of)i(no)n(de)h
FF(DO)p 1619 1538 V 269 1583 V 462 1570 a(ReversePo)o(st)o(Ord)o(er)o
(\(su)o(cce)o(ss)o(or\))o(;)p 1619 1583 V 269 1629 V
423 1615 a(END;)p 1619 1629 V 269 1675 V 423 1661 a FE(link)f(this)f
(no)n(de)g(to)i(left)e(hand)g(of)h(r)n(evList;)p 1619
1675 V 269 1720 V 372 1707 a FF(END)19 b(ReverseP)o(ost)o(Ord)o(er)o(;)
p 1619 1720 V 270 1722 1350 2 v 482 1838 a FN(Figure)14
b(8.2:)j(Building)c(a)h(rev)o(erse)i(p)q(ost-order)f(no)q(de)f(list)224
1972 y FO(immediate)i(dominator)d FN(of)i(the)i(particular)f(no)q(de.)
24 b(All)15 b(the)i(other)f(elemen)o(ts)g(in)g(the)224
2022 y(dominator)11 b(set)i(of)f(the)g(original)f(no)q(de)i(will)d(b)q
(e)j(in)f(the)h(dominator)d(set)k(of)d(the)i(immediate)224
2072 y(dominator.)j(The)f(imm)o(ediate)d(dominator)f(of)j(a)f(no)q(de)i
FM(a)e FN(is)h(denoted)h FK(idom)s FN(\()p FM(a)p FN(\).)287
2122 y(W)m(e)g(ma)o(y)f(arrange)j(for)e(the)i(no)q(des)g(of)e(an)o(y)h
(graph)g(to)g(b)q(e)h(arranged)f(in)f(a)h(tree,)i(with)224
2172 y(the)e(start)f(no)q(de)h(as)f(the)g(ro)q(ot,)g(suc)o(h)h(that)f
(the)g(paren)o(t)h(of)e(eac)o(h)h(no)q(de)h(in)e(the)i(tree)g(is)f(the)
224 2222 y(immediate)8 b(dominator)h(of)h(that)h(no)q(de.)17
b(This)11 b(structure)i(is)d(called)h(the)g FO(dominator)e(tree)224
2272 y FN(of)14 b(the)g(graph.)287 2323 y(As)g(it)g(turns)h(out,)f(w)o
(e)g(need)i(the)e(dominator)e(tree)k(more)d(often)h(than)h(the)f
(dominator)224 2372 y(sets,)h(and)e(w)o(e)h(ma)o(y)d(construct)k(the)f
(tree)h(directly)e(without)h(\014rst)g(forming)d(the)j(sets.)19
b(The)224 2422 y(algorithm)14 b(dep)q(ends)j(on)f(ha)o(ving)f(the)h(no)
q(des)h(in)e(a)h(list)f(\(as)h(one)h(migh)o(t)c(ha)o(v)o(e)j(exp)q
(ected\))224 2472 y(in)i(rev)o(erse)j(p)q(ost)d(order.)32
b(Figure)19 b(8.3)e(is)h(a)g(t)o(ypical)g(w)o(orklist)f(algorithm.)1438
2457 y Fz(2)1504 2472 y FN(The)i(\014rst)224 2522 y FK(while)h
FN(lo)q(op)d(in)g(the)h(algorithm)c(places)k(eac)o(h)g(new)g(no)q(de)g
(in)f(the)h(graph)f(in)g(the)h(correct)224 2572 y(p)q(ostion)13
b FK(with)h(r)n(esp)n(e)n(ct)g(to)g(those)g(pr)n(e)n(de)n(c)n(essors)g
(which)g(have)h(alr)n(e)n(ady)f(b)n(e)n(en)h(plac)n(e)n(d)t
FN(.)j(If)13 b(the)p 224 2610 577 2 v 271 2636 a Fy(2)288
2648 y Fx(The)8 b(algorithm)e(in)i(\014gure)f(8.3)h(has)g(complexit)o
(y)d Fr(O)q Fx(\()p Fr(N)k Fx(log)d Fr(N)t Fx(\).)13
b(There)8 b(is)h(a)f(more)f(in)o(v)o(olv)o(ed)f(algorithm)224
2688 y(whic)o(h)11 b(is)h(of)f(almost)f(linear)g(complexit)o(y)m(.)p
eop
%%Page: 213 219
213 218 bop 224 274 a FL(8.1.)31 b(CREA)m(TING)13 b(THE)h(CONTR)o(OL)g
(FLO)o(W)g(GRAPH)420 b FN(213)p 270 392 1350 2 v 269
438 2 46 v 372 424 a FF(PROCEDURE)16 b(BuildDomin)o(ato)o(rT)o(ree)o
(\(\))o(;)p 1619 438 V 269 483 V 423 470 a(VAR)j(fixList)e(:)38
b(BlockSequen)o(ce)o(;)p 1619 483 V 269 529 V 423 515
a(VAR)19 b(element)e(:)38 b(BBlock)p 1619 529 V 269 575
V 372 561 a(BEGIN)p 1619 575 V 269 620 V 423 607 a(fixList)17
b(:=)i(empty;)p 1619 620 V 269 666 V 423 652 a FE(r)n(emove)13
b(\014rst)g(r)n(evList)f(no)n(de)h(and)f(make)h(r)n(o)n(ot)g(of)g(tr)n
(e)n(e;)p 1619 666 V 269 712 V 423 698 a FF(WHILE)e FE(r)n(evList)i(is)
g(not)f(empty)j FF(DO)p 1619 712 V 269 757 V 462 744
a FE(r)n(emove)d(leftmost)h(element)f(fr)n(om)h(r)n(evList;)p
1619 757 V 269 803 V 462 789 a FF(IF)f FE(not)g(al)r(l)h(pr)n(e)n(de)n
(c)n(essors)e(in)i(tr)n(e)n(e)i FF(THEN)p 1619 803 V
269 849 V 500 835 a FE(plac)n(e)d(element)g(in)h(\014xList;)p
1619 849 V 269 894 V 462 881 a FF(END;)p 1619 894 V 269
940 V 462 926 a FE(add)f(element)g(to)h(tr)n(e)n(e)g(as)g(child)g(of)g
(lowest)f(c)n(ommon)h(anc)n(estor)p 1619 940 V 269 986
V 615 972 a(of)g(those)f(pr)n(e)n(de)n(c)n(essors)f(which)i(ar)n(e)g
(in)g(the)g(tr)n(e)n(e)g(alr)n(e)n(ady;)p 1619 986 V
269 1031 V 462 1018 a FF(END;)p 1619 1031 V 269 1077
V 423 1063 a(END;)p 1619 1077 V 269 1123 V 423 1109 a(\(*)f
FE(now)i(we)g(must)f(do)g(c)n(orr)n(e)n(ctions)g FF(*\))p
1619 1123 V 269 1168 V 423 1155 a(WHILE)e FE(\014xList)h(is)i(not)e
(empty)j FF(DO)p 1619 1168 V 269 1214 V 462 1200 a FE(r)n(emove)d
(leftmost)h(element)f(fr)n(om)h(\014xList;)p 1619 1214
V 269 1260 V 462 1246 a(r)n(e)n(c)n(ompute)e(p)n(osition)h(of)h
(element;)p 1619 1260 V 269 1305 V 462 1292 a FF(IF)f
FE(no)n(de)g(was)h(move)n(d)j FF(THEN)p 1619 1305 V 269
1351 V 500 1337 a FE(add)d(al)r(l)f(childr)n(en)g(of)h(element)f(to)h
(\014xList;)p 1619 1351 V 269 1397 V 462 1383 a FF(END;)p
1619 1397 V 269 1442 V 423 1429 a(END;)p 1619 1442 V
269 1488 V 372 1474 a(END)19 b(BuildDom)o(ina)o(tor)o(Tr)o(ee;)p
1619 1488 V 270 1490 1350 2 v 482 1606 a FN(Figure)14
b(8.3:)j(Building)c(a)h(rev)o(erse)i(p)q(ost-order)f(no)q(de)f(list)224
1739 y FK(CF)o(G)20 b FN(is)c(acyclic,)g(then)h(the)g(rev)o(erse)h(p)q
(ost)e(order)h(pro)q(cessing)g(will)e(ensure)j(that)e(all)f(the)224
1789 y(predecessors)j(are)c(placed,)g(and)f(the)i(result)f(will)f(b)q
(e)h(immediately)d(correct.)287 1840 y(When)f(no)q(des)h(are)f(pro)q
(cessed)j(for)d(whic)o(h)g(not)g(all)f(the)h(predecessors)k(ha)o(v)o(e)
c(b)q(een)h(placed)224 1889 y(in)16 b(the)g(graph,)g(the)h(p)q
(ossibilit)o(y)d(arises)j(that)f(the)g(initial)e(placemen)o(t)i(will)e
(b)q(e)i(incorrect.)224 1939 y(These)e(p)q(ossibly)e(incorrect)i(no)q
(des)f(are)f(inserted)i(in)e(a)g(\014x-up)g(list,)f(so)i(that)f(a)g
(later)h(c)o(hec)o(k-)224 1989 y(and-correct)i(step)f(ma)o(y)d(b)q(e)i
(p)q(erformed.)k(The)d(\014x-up)e(list)h(is)g(the)g(initial)e(w)o
(orklist)h(for)h(the)224 2039 y(correction)i(lo)q(op.)287
2089 y(The)h(correction)g(lo)q(op)f(at)g(the)h(end)g(of)f(this)h
(algorithm)d(recomputes)j(the)g(p)q(ostion)f(of)224 2139
y(no)q(des)k(on)e(the)h(\014x-up)g(list.)29 b(No)q(des)18
b(ma)o(y)e(need)i(to)g(b)q(e)g(mo)o(v)o(ed)e(higher)i(up)f(the)h(tree)h
(as)224 2189 y(a)g(result)h(of)e(the)i(recomputation.)32
b(When)19 b(a)g(no)q(de)g(is)g(mo)o(v)o(ed,)f(the)h(no)q(des)h(whic)o
(h)f(are)224 2239 y(dominated)d(b)o(y)g(the)i(mo)o(v)o(ed)d(no)q(de)j
(are)f(placed)g(on)g(the)g(\014x-up)g(w)o(orklist,)g(so)g(that)g(they)
224 2288 y(ma)o(y)h(also)h(ha)o(v)o(e)g(their)h(p)q(ostions)f(c)o(hec)o
(k)o(ed.)36 b(Ho)o(w)o(ev)o(er,)21 b(the)f(only)e(cases)j(where)f(no)q
(des)224 2338 y(are)f(mo)o(v)o(ed)e(b)o(y)h(the)h(correction)g(arise)g
(from)d(so-called)i FK(irr)n(e)n(ducible)i(CF)o(G)t FN(s.)31
b(In)18 b(short,)224 2388 y(suc)o(h)i(graphs)g(arise)f(as)h(a)f(result)
h(of)f(lo)q(ops)f(whic)o(h)i(ha)o(v)o(e)f(m)o(ultiple)e(en)o(try)i(p)q
(oin)o(ts,)h(and)224 2438 y(cannot)13 b(o)q(ccur)h(in)f(the)g(case)h
(of)f(the)g(graphs)g(whic)o(h)g(arise)g(from)e(languages)i(without)f
FG(goto)224 2488 y FN(statemen)o(ts.)287 2538 y(Figure)17
b(8.4)f(sho)o(ws)i(the)g(dominator)d(graph)i(for)g(the)h(same)e
FK(CF)o(G)21 b FN(as)d(sho)o(wn)f(in)g(\014g-)224 2588
y(ure)d(8.1.)i(Note)d(that)g(in)f(this)h(example,)e(when)i(w)o(e)g
(come)f(to)g(insert)h(no)q(de)g(1)g(in)f(the)h(graph,)224
2638 y(of)g(the)g(t)o(w)o(o)f(predecessor)k(no)q(des,)d(only)f(only)g
(one)h(of)g(the)g(predecessors)j(\(no)q(de)d FM(s)p FN(,)g(but)g(not)
224 2688 y(no)q(de)i(4\))e(is)h(in)g(the)g(tree.)19 b(Therefore)d(no)q
(de)e(1)g(m)o(ust)e(b)q(e)j(placed)f(on)g(the)g(\014xup)g(w)o(orklist.)
p eop
%%Page: 214 220
214 219 bop 224 274 a FN(214)626 b FL(CHAPTER)14 b(8.)32
b(D)o(A)m(T)m(AFLO)o(W)12 b(ANAL)m(YSIS)768 349 y
 5591449 8485847 0 0 5591449 8485847 startTexFig
 768
349 a
%%BeginDocument: domexmpl.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-83.0 172.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Ellipse
n 139 99 12 12 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 139 139 12 12 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 174 139 12 12 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 104 139 12 12 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 139 59 12 12 0 360 DrawEllipse gs 0.95 setgray fill gr
gs col-1 s gr
% Ellipse
n 174 179 12 12 0 360 DrawEllipse gs 0.95 setgray fill gr
gs col-1 s gr
0.500 setlinewidth
% Polyline
n 140 88 m 140 71 l gs col-1 s gr
n 138.000 79.000 m 140.000 71.000 l 142.000 79.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 139 128 m 140 111 l gs col-1 s gr
n 137.534 118.869 m 140.000 111.000 l 141.527 119.104 l gs 2 setlinejoin col-1 s gr
% Polyline
n 110 129 m 131 108 l gs col-1 s gr
n 123.929 112.243 m 131.000 108.000 l 126.757 115.071 l gs 2 setlinejoin col-1 s gr
% Polyline
n 168 129 m 148 108 l gs col-1 s gr
n 152.069 115.172 m 148.000 108.000 l 154.966 112.414 l gs 2 setlinejoin col-1 s gr
% Polyline
n 175 168 m 175 151 l gs col-1 s gr
n 173.000 159.000 m 175.000 151.000 l 177.000 159.000 l gs 2 setlinejoin col-1 s gr
/Times-Bold findfont 10.00 scalefont setfont
102 143 m 
gs 1 -1 scale (2) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
137 144 m 
gs 1 -1 scale (3) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
172 143 m 
gs 1 -1 scale (4) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
173 182 m 
gs 1 -1 scale (e) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
138 62 m 
gs 1 -1 scale (s) col-1 show gr
/Times-Bold findfont 10.00 scalefont setfont
137 103 m 
gs 1 -1 scale (1) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 450 978 a FN(Figure)i(8.4:)j(Dominator)11 b(tree)k(for)f
FK(CF)o(G)j FN(in)c(previous)i(\014gure)287 1108 y(When)e(all)f(no)q
(des)j(ha)o(v)o(e)e(b)q(een)h(placed)g(in)f(the)h(tree,)g(w)o(e)g(c)o
(hec)o(k)g(the)g(p)q(osition)f(of)f(no)q(des)224 1157
y(on)f(the)g(w)o(orklist.)17 b(In)10 b(this)h(case,)h(no)q(de)f(1)g(is)
f(on)h(the)g(list,)g(and)f(the)i(closest)f(shared)h(ancestor)224
1207 y(of)h(the)h(predecessor)i(no)q(des,)d FM(s)h FN(and)f(4,)f(is)h
(no)q(de)h FM(s)p FN(.)k(Th)o(us)13 b(the)h(no)q(de)g(do)q(es)g(not)f
(need)h(to)f(b)q(e)224 1257 y(mo)o(v)o(ed,)f(and)i(w)o(e)g(are)g(done.)
287 1307 y(With)f(the)i(cyclic)f(graphs)g(whic)o(h)g(arise)g(from)f
(structured)j(lo)q(ops)d(w)o(e)i(will)d(alw)o(a)o(ys)h(get)224
1357 y(this)18 b(same)e(pattern.)29 b(The)18 b FK(he)n(ader)k
FN(no)q(de)c(will)d(b)q(e)j(inserted)h(in)o(to)d(the)i(tree)h(b)q
(efore)f(an)o(y)224 1406 y(other)c(no)q(des)g(of)e(the)i(lo)q(op.)j
(Since)c(one)g(predecessor)j(of)c(the)i(lo)q(op)e(header)i(is)f(the)g
FK(latching)224 1456 y(no)n(de)19 b FN(that)c(has)g(the)h
FK(b)n(ack-e)n(dge)f FN(of)g(the)g(lo)q(op,)f(not)h(all)f(predecessors)
k(are)e(presen)o(t)g(in)f(the)224 1506 y(tree.)30 b(Ho)o(w)o(ev)o(er,)
18 b(since)g(the)g(lo)q(op)e(header)i(no)q(de)g(of)f(a)g(structured)i
(lo)q(op)e(dominates)f(all)224 1556 y(no)q(des)d(in)d(the)i(lo)q(op,)f
(including)f(the)i(latc)o(hing)f(no)q(de,)h(the)f FK(idom)k
FN(no)q(de)d(computed)f(without)224 1606 y(taking)i(in)o(to)h(accoun)o
(t)g(the)g(bac)o(k-edge)h(is)f(alw)o(a)o(ys)e(correct.)287
1656 y(If)g(a)h(lo)q(op)g(has)g(t)o(w)o(o)f(or)h(more)g(en)o(try)g(p)q
(oin)o(ts,)g(then)h(no)f(\\header)g(no)q(de")h(dominates)e(all)224
1705 y(the)j(no)q(des)g(of)f(the)g(lo)q(op,)f(and)h(the)h
(recomputation)e(of)h FK(idom)j FN(for)d(the)h(header)g(no)q(de)f(ma)o
(y)224 1755 y(mo)o(v)o(e)h(the)i(no)q(de)g(to)f(a)g(new)h(p)q(osition)f
(in)f(the)i(tree.)27 b(In)16 b(an)o(y)g(case,)i(if)d(a)h(co)q(de)h
(generator)224 1805 y(is)d(to)f(b)q(e)i(language)d(indep)q(enden)o(t)j
(then)g(it)e(m)o(ust)g(b)q(e)h(able)f(to)h(cop)q(e)g(with)f(the)i
(irreducible)224 1855 y(con)o(trol)f(\015o)o(w)g(graphs)g(whic)o(h)f
(arise)i(from)d(ill-advised)g(use)j(of)e(the)i FG(goto)e
FN(statemen)o(t.)1579 1840 y Fz(3)287 1905 y FN(There)e(is)f(another)h
(reason)f(to)g(ha)o(v)o(e)g(the)h(capabilit)o(y)e(to)h(deal)g(with)g
(irreducible)h(graphs.)224 1954 y(F)m(or)h(some)f(purp)q(oses)j(w)o(e)e
(ma)o(y)e(wish)i(to)f(compute)h(the)g FO(immediate)f(p)q
(ost-dominators)224 2004 y FN(of)k(a)h FK(CF)o(G)t FN(.)e(A)i(p)q
(ost-dominator)e(of)h(a)g(giv)o(en)g(no)q(de)h(is)g(a)f(no)q(de)h(with)
g(the)g(prop)q(ert)o(y)g(that)224 2054 y(all)g(paths)g(through)h(the)g
(giv)o(en)f(no)q(de)h(pass)g(through)f(the)h(p)q(ost-dominator)e(to)h
(reac)o(h)h FM(e)p FN(.)224 2104 y(This)j(is)g(exactly)g(the)h(immedia)
o(te)d(dominators)g(of)h(the)i FK(CF)o(G)i FN(with)d(the)h(direction)f
(of)224 2154 y(\015o)o(w)d(rev)o(ersed.)27 b(Since)17
b(reducibilit)o(y)f(is)h(not)f(in)o(v)n(arian)o(t)f(under)i(\015o)o(w)f
(direction)h(rev)o(ersal,)224 2204 y(w)o(e)g(ma)o(y)e(exp)q(ect)k(ev)o
(en)e(the)g(graphs)g(from)e(structured)k(languages)e(to)f(ha)o(v)o(e)h
(irreducible)224 2253 y(rev)o(erse-\015o)o(w)c FK(CF)o(G)t
FN(s.)k(Indeed,)c(ev)o(ery)f(lo)q(op)f(with)g(a)g(m)o(ultiple)f(exit)h
(in)g(the)h FK(CF)o(G)j FN(will)10 b(ha)o(v)o(e)224 2303
y(m)o(ultiple)i(en)o(tries)j(in)e(the)h(rev)o(erse-\015o)o(w)h
FK(CF)o(G)i FN(and)d(hence)h(mak)o(e)d(the)j(graph)e(irreducible.)224
2410 y FO(Finding)g(lo)q(ops)224 2487 y FN(F)m(or)k(a)g(n)o(um)o(b)q
(er)f(of)h(applications)f(w)o(e)h(w)o(ould)g(lik)o(e)f(to)h(\014nd)g
(all)f(those)i(blo)q(c)o(ks)f(of)g(a)g FK(CF)o(G)224
2537 y FN(whic)o(h)g(b)q(elong)f(in)h(a)f(particular)g(lo)q(op)g(in)h
(a)f(program.)25 b(This)16 b(seems)h(lik)o(e)f(a)g(reasonably)p
224 2570 577 2 v 271 2597 a Fy(3)288 2609 y Fx(It)e(should)g(b)q(e)g
(noted)f(that)h(the)g(restriction)e(on)j(lo)q(op)e(structure)g
(required)f(for)j(reducibilit)o(y)c(is)k(on)224 2648
y(the)d(n)o(um)o(b)q(er)e(of)h Fu(entry)j(p)n(oints)h
Fx(to)d(the)f(lo)q(op,)g(and)g(do)q(es)g(not)g(prev)o(en)o(t)f(lo)q(op)
h(header)f(no)q(des)h(from)f(ha)o(ving)224 2688 y(m)o(ultiple)g(non-lo)
q(op)f(predecessors)o(.)p eop
%%Page: 215 221
215 220 bop 224 274 a FL(8.1.)31 b(CREA)m(TING)13 b(THE)h(CONTR)o(OL)g
(FLO)o(W)g(GRAPH)420 b FN(215)224 390 y(trivial)13 b(task,)g(but)i
(turns)f(out)g(to)g(b)q(e)g(surprisingly)g(complicated.)287
440 y(W)m(e)k(shall)g(assume,)i(in)e(this)h(section)h(that)f(the)h
FK(CF)o(G)i FN(is)d(reducible,)i(so)e(that)g(eac)o(h)224
490 y(lo)q(op)14 b(has)h(an)f(unique)h(header)g(no)q(de.)21
b(These)16 b(header)f(no)q(des)h(ma)o(y)c(b)q(e)j(found)f(during)h(the)
224 540 y(construction)j(of)f(the)g(rev)o(erse)i(p)q(ost-order)f(list,)
f(since)h(they)f(are)h(the)f(no)q(des)h(whic)o(h)f(are)224
590 y(the)c(target)f(of)f FO(bac)o(k-edges)p FN(.)16
b(A)c(bac)o(k-edge)h(is)e(detected)j(b)o(y)e(the)g(fact)g(that)g(it)f
(leads)h(bac)o(k)224 640 y(to)i(a)g(no)q(de)g(whic)o(h)g(is)g(already)f
(visited,)g(but)i(not)e(y)o(et)i(listed.)287 689 y(Supp)q(ose)j(that)f
FM(h)g FN(is)g(kno)o(wn)f(to)h(b)q(e)h(a)f(header)h(no)q(de.)28
b(As)17 b(a)g(\014rst)h(guess,)g(w)o(e)f(migh)o(t)224
739 y(assume)d(the)g(no)q(des)h(in)e(the)i(lo)q(op)e(headed)i(b)o(y)e
FM(h)h FN(are)g(all)f(those)i(no)q(des)f(in)g(the)g(set)h(|)355
828 y Ft(f)p FM(i)d Ft(2)f FM(N)16 b FN(:)11 b FM(h)h
Ft(!)591 811 y FA(\003)621 828 y FM(i)d Ft(^)g FM(i)j
Ft(!)749 811 y FA(\003)779 828 y FM(h)p Ft(g)166 b FG(\(*)21
b(beware,)g(incorrect!)41 b(*\))224 917 y FN(That)16
b(is,)e(the)i(set)g(of)f(all)f(those)i(no)q(des)g(whic)o(h)f(ma)o(y)e
(b)q(e)j(reac)o(hed)h(from)c(the)j(lo)q(op)e(header)224
966 y(no)q(de,)g(and)g(whic)o(h)g(ha)o(v)o(e)f(a)h(path)g(whic)o(h)g
(reac)o(hes)h(bac)o(k)f(to)g(the)g(lo)q(op)f(header)i(no)q(de.)287
1016 y(The)f(problem)f(with)h(this)h(set)g(is)f(that)g(it)g(includes)h
(to)q(o)f(man)o(y)e(no)q(des.)20 b(F)m(or)14 b(example,)224
1066 y(in)j(the)g(\014gure)g(8.5)f FK(al)r(l)k FN(the)d(n)o(um)o(b)q
(ered)g(no)q(des)g(can)g(b)q(e)h(reac)o(hed)f(from)e(no)q(de)i(2,)g
(and)g(all)224 1116 y(can)g(reac)o(h)g(no)q(de)g(2.)551
1101 y Fz(4)595 1116 y FN(A)f(metho)q(d)g(of)f(separating)i(the)g(no)q
(des)g(of)f(a)g(graph)g(in)o(to)g(subsets)512 1173 y
 13682606 2960179 0 0 13682606 2960179 startTexFig

512 1173 a
%%BeginDocument: nested.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-53.0 81.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Ellipse
n 119 79 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 159 79 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 199 79 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 239 79 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 79 79 11 11 0 360 DrawEllipse gs 0.95 setgray fill gr
gs col-1 s gr
% Ellipse
n 279 79 11 11 0 360 DrawEllipse gs 0.95 setgray fill gr
gs col-1 s gr
0.500 setlinewidth
% Polyline
n 58 78 m 68 78 l gs col-1 s gr
n 60.000 76.000 m 68.000 78.000 l 60.000 80.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 90 80 m 107 80 l gs col-1 s gr
n 99.000 78.000 m 107.000 80.000 l 99.000 82.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 130 80 m 147 80 l gs col-1 s gr
n 139.000 78.000 m 147.000 80.000 l 139.000 82.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 171 80 m 188 80 l gs col-1 s gr
n 180.000 78.000 m 188.000 80.000 l 180.000 82.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 210 79 m 228 80 l gs col-1 s gr
n 220.123 77.559 m 228.000 80.000 l 219.901 81.553 l gs 2 setlinejoin col-1 s gr
% Polyline
n 251 80 m 268 80 l gs col-1 s gr
n 260.000 78.000 m 268.000 80.000 l 260.000 82.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 200.000 69.000 m 200.000 61.500 l
	200.000 61.500 200.000 54.000 179.500 54.000 DrawSplineSection
	179.500 54.000 159.000 54.000 159.000 61.500 DrawSplineSection
	159.000 69.000 l gs col-1 s gr
n 161.000 61.000 m 159.000 69.000 l 157.000 61.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 240.000 69.000 m 240.000 54.000 l
	240.000 54.000 240.000 39.000 180.000 39.000 DrawSplineSection
	180.000 39.000 120.000 39.000 120.000 53.500 DrawSplineSection
	120.000 68.000 l gs col-1 s gr
n 122.000 60.000 m 120.000 68.000 l 118.000 60.000 l gs 2 setlinejoin col-1 s gr
/Times-BoldItalic findfont 10.00 scalefont setfont
118 83 m 
gs 1 -1 scale (1) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
237 83 m 
gs 1 -1 scale (4) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
197 83 m 
gs 1 -1 scale (3) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
158 83 m 
gs 1 -1 scale (2) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
276 82 m 
gs 1 -1 scale (e) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
78 81 m 
gs 1 -1 scale (s) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 645 1451 a FN(Figure)e(8.5:)j(Nested)f(lo)q(ops)d(in)h
FK(CF)o(G)224 1550 y FN(whic)o(h)j(include)f(at)g(most)g(one)g(lo)q(op)
g(is)g FK(interval)h(analysis)s FN(.)26 b(F)m(or)16 b(tec)o(hnical)h
(reasons,)g(w)o(e)224 1600 y(b)q(egin)11 b(b)o(y)g(adding)f(a)g(dumm)o
(y)e(edge)k(directly)f(from)e FM(s)i FN(to)g FM(e)p FN(.)17
b(In)o(terv)n(al)11 b(sets)h(are)f(constructed)224 1650
y(iterativ)o(ely)j(as)g(follo)o(ws)e(|)372 1778 y FE(b)n(e)n(gin)g
(with)h(an)g(interval)f(c)n(onsisting)e(of)j(the)g(start)g(no)n(de;)372
1824 y FF(WHILE)e FE(no)n(des)h(of)h(the)g(curr)n(ent)f(interval)g
(have)g(unvisite)n(d)e(suc)n(c)n(essors)j FF(DO)423 1870
y FE(cho)n(ose)f(an)h(unvisite)n(d)d(suc)n(c)n(essor;)423
1915 y FF(IF)i FE(suc)n(c)n(essor)f(has)i(another)f(pr)n(e)n(de)n(c)n
(essor)f(not)h(in)h(the)g(interval)i FF(THEN)462 1961
y FE(start)d(a)i(new)f(interval)f(at)h(suc)n(c)n(essor;)423
2007 y FF(ELSE)462 2052 y FE(add)f(suc)n(c)n(essor)f(to)i(the)g
(interval;)423 2098 y FF(END;)372 2144 y(END;)224 2275
y FN(If)h(w)o(e)h(apply)e(this)h(pro)q(cess)j(to)d(the)g
FK(CF)o(G)k FN(in)c(\014gure)h(8.5)e(w)o(e)h(obtain)g(the)h(follo)o
(wing)c(in)o(ter-)224 2325 y(v)n(als)i(|)f Ft(f)p FM(s;)7
b(e)p Ft(g)p FM(;)g Ft(f)p FN(1)p Ft(g)p FM(;)g Ft(f)p
FN(2)p FM(;)g FN(3)p FM(;)f FN(4)p Ft(g)p FN(.)15 b(Note)e(that)g(the)h
(in)o(terv)n(al)e(starting)h(at)g(the)h(header)g(no)q(de)g(2)224
2374 y(con)o(tains)g(only)f(the)i(inner)f(lo)q(op.)287
2424 y(W)m(e)g(no)o(w)g(\\collapse")f(all)g(of)h(the)h(no)q(des)g(in)f
(eac)o(h)h(in)o(terv)n(al)e(in)o(to)h(a)g(single,)f(comp)q(ound)224
2474 y(no)q(de,)g(whic)o(h)f(has)g(all)f(of)g(the)i(in-edges)f(and)g
(out-edges)h(of)e(its)h(comp)q(onen)o(t)f(no)q(des.)19
b(In)12 b(the)224 2524 y(example,)e(w)o(e)i(shall)e(create)i(a)f(new)h
(no)q(de)f(from)f(the)h(third)g(in)o(terv)n(al)g Ft(f)p
FN(2)p FM(;)c FN(3)p FM(;)g FN(4)p Ft(g)p FN(,)h(and)j(call)g(the)224
2574 y(new)17 b(no)q(de)f(\\\(2)p FM(;)7 b FN(3)p FM(;)g
FN(4\)".)23 b(The)16 b(reduced)i FK(CF)o(G)i FN(will)14
b(ha)o(v)o(e)i(new)h(new)f(in)o(terv)n(als,)g(whic)o(h)g(in)p
224 2610 577 2 v 271 2636 a Fy(4)288 2648 y Fx(Indeed)c(all)i(n)o(um)o
(b)q(ered)e(no)q(des)h(can)g(b)q(e)h(reac)o(hed)e(from)h(ev)o(ery)g
(other)g(n)o(um)o(b)q(ered)f(no)q(de.)22 b(All)15 b(these)224
2688 y(no)q(des)c(form)f(a)h(single)g Fi(strongly)j(connected)e(comp)q
(onen)o(t)p Fx(.)p eop
%%Page: 216 222
216 221 bop 224 274 a FN(216)626 b FL(CHAPTER)14 b(8.)32
b(D)o(A)m(T)m(AFLO)o(W)12 b(ANAL)m(YSIS)224 390 y FN(this)k(case)g
(will)e(b)q(e)i(|)f Ft(f)p FM(s;)7 b(e)p Ft(g)p FM(;)g
Ft(f)p FN(1)p FM(;)g FN(\(2)p FM(;)g FN(3)p FM(;)g FN(4\))p
Ft(g)o FN(.)20 b(The)c(second)g(in)o(terv)n(al)f(no)o(w)g(con)o(tains)g
(b)q(oth)224 440 y(lo)q(ops,)j(and)g(after)g(a)g(further)h(reduction)f
(step)h(w)o(e)f(are)g(left)g(with)g(a)f(single)h(in)o(terv)n(al)f(|)224
490 y Ft(f)p FM(s;)7 b(e;)g FN(\(1)p FM(;)g FN(\(2)p
FM(;)g FN(3)p FM(;)g FN(4\)\))p Ft(g)p FN(.)287 565 y(The)16
b(p)q(ossibilit)o(y)f(of)g(carrying)h(out)g(this)h(pro)q(cess)g(un)o
(til)f(the)g(whole)g(graph)g(collapses)224 615 y(in)o(to)e(a)f(single)h
(in)o(terv)n(al)f(is)g(the)i(origin)e(of)g(the)h(concept)i(of)d
(\\reducibilit)o(y".)287 690 y(In)o(terv)n(al)f(theory)h(is)g(imp)q
(ortan)o(t)d(as)j(the)g(basis)g(of)f(the)h(second,)h(non-iterativ)o(e)e
(metho)q(d)224 740 y(of)g(solving)g(data\015o)o(w)g(equations,)g(but)h
(w)o(e)g(shall)f(not)h(pursue)h(that)e(use)i(here.)19
b(Instead)13 b(w)o(e)224 790 y(note)h(that)f(if)f(w)o(e)h(w)o(ork)g
(from)e(the)j(most)e(nested)i(lo)q(op)e(out)h(w)o(e)g(ma)o(y)e(use)j
(in)o(terv)n(als)f(ro)q(oted)224 840 y(at)h(lo)q(op)f(header)i(no)q
(des)g(to)f(\014nd)g(exactly)g(those)g(no)q(des)h(in)e(the)i(lo)q(op.)
287 915 y(Ha)o(ving)i(found)i(an)f(in)o(terv)n(al)g(con)o(taining)f(an)
i(innermost)f(lo)q(op,)g(w)o(e)h(discard)g(no)q(des)224
964 y(for)14 b(whic)o(h)g FK(al)r(l)j FN(successors)g(are)d(outside)g
(the)h(in)o(terv)n(al.)i(Note)d(that)g(discarding)g(one)g(no)q(de)224
1014 y(ma)o(y)g(lead)h(to)g(the)h(later)f(discarding)g(of)g(another)g
(no)q(de)h(in)f(the)h(in)o(terv)n(al.)21 b(When)15 b(w)o(e)h(are)224
1064 y(through,)e(the)g(remaining)e(no)q(des)i(will)e(all)h(ha)o(v)o(e)
g(at)h(least)g(one)g(edge)g(whic)o(h)g(leads)f(\(either)224
1114 y(through)j(a)f(forw)o(ard)g(or)g(a)g(bac)o(kw)o(ard-edge\))h(to)f
(another)g(no)q(de)h(in)f(the)h(in)o(terv)n(al.)21 b(These)224
1164 y(are)d(exactly)f(the)g(no)q(des)h(within)e(the)i(lo)q(op.)26
b(It)17 b(is)g(left)f(to)h(the)h(exercises)h(to)d(sho)o(w)h(that)224
1214 y(this)12 b(metho)q(d)f(w)o(orks)g(ev)o(en)i(for)e(strange)h(lo)q
(ops)f(with)h(m)o(ultiple)d(bac)o(k-edges,)j(pro)o(vided)g(the)224
1263 y(lo)q(op)i(has)g(an)f(unique)h(header)h(no)q(de.)355
1372 y
 18616238 11840716 0 0 18616238 11840716 startTexFig
 355 1372 a
%%BeginDocument: loopnest.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-23.0 198.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Rotated Ellipse
gs
50 79 translate
-90.012 rotate
n 0 0 11 11 0 360 DrawEllipse gs 0.95 setgray fill gr
gs col-1 s gr
gr
% Rotated Ellipse
gs
90 79 translate
-90.012 rotate
n 0 0 11 11 0 360 DrawEllipse gs col-1 s gr
gr
% Rotated Ellipse
gs
70 39 translate
-90.012 rotate
n 0 0 11 11 0 360 DrawEllipse gs col-1 s gr
gr
% Rotated Ellipse
gs
130 79 translate
-90.012 rotate
n 0 0 11 11 0 360 DrawEllipse gs col-1 s gr
gr
% Rotated Ellipse
gs
110 39 translate
-90.012 rotate
n 0 0 11 11 0 360 DrawEllipse gs col-1 s gr
gr
% Rotated Ellipse
gs
170 79 translate
-90.012 rotate
n 0 0 11 11 0 360 DrawEllipse gs col-1 s gr
gr
% Rotated Ellipse
gs
210 79 translate
-90.012 rotate
n 0 0 11 11 0 360 DrawEllipse gs col-1 s gr
gr
% Rotated Ellipse
gs
250 79 translate
-90.012 rotate
n 0 0 11 11 0 360 DrawEllipse gs col-1 s gr
gr
% Rotated Ellipse
gs
190 39 translate
-90.012 rotate
n 0 0 11 11 0 360 DrawEllipse gs col-1 s gr
gr
% Rotated Ellipse
gs
290 79 translate
-90.012 rotate
n 0 0 11 11 0 360 DrawEllipse gs col-1 s gr
gr
% Rotated Ellipse
gs
329 79 translate
-90.012 rotate
n 0 0 11 11 0 360 DrawEllipse gs 0.95 setgray fill gr
gs col-1 s gr
gr
0.500 setlinewidth
% Polyline
n 62 79 m 80 79 l gs col-1 s gr
n 72.000 77.000 m 80.000 79.000 l 72.000 81.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 101 79 m 120 79 l gs col-1 s gr
n 112.000 77.000 m 120.000 79.000 l 112.000 81.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 141 79 m 159 79 l gs col-1 s gr
n 151.000 77.000 m 159.000 79.000 l 151.000 81.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 182 79 m 199 78 l gs col-1 s gr
n 190.896 76.473 m 199.000 78.000 l 191.131 80.466 l gs 2 setlinejoin col-1 s gr
% Polyline
n 222 79 m 239 79 l gs col-1 s gr
n 231.000 77.000 m 239.000 79.000 l 231.000 81.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 262 79 m 279 79 l gs col-1 s gr
n 271.000 77.000 m 279.000 79.000 l 271.000 81.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 302 79 m 319 79 l gs col-1 s gr
n 311.000 77.000 m 319.000 79.000 l 311.000 81.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 25 79 m 37 79 l gs col-1 s gr
n 29.000 77.000 m 37.000 79.000 l 29.000 81.000 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
% Polyline
n 152 199 m 145 199 145 213 7 arcto 4 {pop} repeat 145 220 183 220 7 arcto 4 {pop} repeat 190 220 190 206 7 arcto 4 {pop} repeat 190 199 152 199 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 216 199 m 209 199 209 213 7 arcto 4 {pop} repeat 209 220 247 220 7 arcto 4 {pop} repeat 254 220 254 206 7 arcto 4 {pop} repeat 254 199 216 199 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 165 159 m 158 159 158 172 7 arcto 4 {pop} repeat 158 179 234 179 7 arcto 4 {pop} repeat 241 179 241 166 7 arcto 4 {pop} repeat 241 159 165 159 7 arcto 4 {pop} repeat clp gs col-1 s gr
% Polyline
n 156 118 m 149 118 149 132 7 arcto 4 {pop} repeat 149 139 242 139 7 arcto 4 {pop} repeat 249 139 249 125 7 arcto 4 {pop} repeat 249 118 156 118 7 arcto 4 {pop} repeat clp gs 0.95 setgray fill gr
gs col-1 s gr
0.500 setlinewidth
% Polyline
n 199 140 m 199 159 l gs col-1 s gr
n 201.000 151.000 m 199.000 159.000 l 197.000 151.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 206 179 m 230 199 l gs col-1 s gr
n 225.135 192.342 m 230.000 199.000 l 222.574 195.415 l gs 2 setlinejoin col-1 s gr
% Polyline
n 192 179 m 170 199 l gs col-1 s gr
n 177.265 195.098 m 170.000 199.000 l 174.574 192.139 l gs 2 setlinejoin col-1 s gr
% Open spline
n 71.000 49.000 m 71.000 55.500 l
	71.000 55.500 71.000 62.000 76.500 66.500 DrawSplineSection
	82.000 71.000 l gs col-1 s gr
n 77.075 64.386 m 82.000 71.000 l 74.542 67.482 l gs 2 setlinejoin col-1 s gr
% Open spline
n 190.000 50.000 m 190.000 56.500 l
	190.000 56.500 190.000 63.000 195.500 67.500 DrawSplineSection
	201.000 72.000 l gs col-1 s gr
n 196.075 65.386 m 201.000 72.000 l 193.542 68.482 l gs 2 setlinejoin col-1 s gr
% Open spline
n 291.000 69.000 m 291.000 44.000 l
	291.000 44.000 291.000 19.000 190.500 19.000 DrawSplineSection
	190.500 19.000 90.000 19.000 83.500 24.500 DrawSplineSection
	77.000 30.000 l gs col-1 s gr
n 84.399 26.359 m 77.000 30.000 l 81.815 23.306 l gs 2 setlinejoin col-1 s gr
% Open spline
n 170.000 68.000 m 170.000 54.000 l
	170.000 54.000 170.000 40.000 146.000 40.000 DrawSplineSection
	122.000 40.000 l gs col-1 s gr
n 130.000 42.000 m 122.000 40.000 l 130.000 38.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 250.000 68.000 m 250.000 54.000 l
	250.000 54.000 250.000 40.000 226.000 40.000 DrawSplineSection
	202.000 40.000 l gs col-1 s gr
n 210.000 42.000 m 202.000 40.000 l 210.000 38.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 111.000 50.000 m 111.000 56.500 l
	111.000 56.500 111.000 63.000 116.500 67.500 DrawSplineSection
	122.000 72.000 l gs col-1 s gr
n 117.075 65.386 m 122.000 72.000 l 114.542 68.482 l gs 2 setlinejoin col-1 s gr
/Times-BoldItalic findfont 10.00 scalefont setfont
49 82 m 
gs 1 -1 scale (s) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
326 82 m 
gs 1 -1 scale (e) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
128 82 m 
gs 1 -1 scale (2) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
88 83 m 
gs 1 -1 scale (1) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
168 83 m 
gs 1 -1 scale (3) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
107 43 m 
gs 1 -1 scale (4) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
207 82 m 
gs 1 -1 scale (5) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
249 82 m 
gs 1 -1 scale (6) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
188 43 m 
gs 1 -1 scale (7) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
288 82 m 
gs 1 -1 scale (8) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
68 43 m 
gs 1 -1 scale (9) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
154 213 m 
gs 1 -1 scale ({2,3,4}) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
218 213 m 
gs 1 -1 scale ({5,6,7}) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
163 172 m 
gs 1 -1 scale ({1,2,3,4,5,6,7,8,9}) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
156 132 m 
gs 1 -1 scale ({s,1,2,3,4,5,6,7,8,9,e}) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 406 2213 a FN(Figure)f(8.6:)j(Con)o(trol)c(\015o)o(w)h(graph)g(and)f
(corresp)q(onding)i(lo)q(op)e(tree)287 2389 y(If)k(a)g(graph)g(is)h
(reducible,)g(then)h(lo)q(ops)e(m)o(ust)f(b)q(e)i(prop)q(erly)g
(nested.)31 b(If)17 b(this)g(is)h(the)224 2438 y(case,)h(w)o(e)f(ma)o
(y)d(construct)k(a)e FK(lo)n(op)h(tr)n(e)n(e)s FN(.)28
b(In)17 b(this)h(structure,)i(eac)o(h)e(no)q(de)f(is)h(the)g(set)g(of)
224 2488 y(no)q(des)f(b)q(elonging)e(to)g(a)h(particular)f(lo)q(op,)g
(except)i(for)f(the)g(ro)q(ot)g(no)q(de,)g(whic)o(h)f(con)o(tains)224
2538 y(all)c(no)q(des)i(in)e(the)h(graph.)17 b(The)c(paren)o(t)f(of)f
(an)o(y)g(particular)h(lo)q(op)f(no)q(de)h(is)g(the)g(no)q(de)g(whic)o
(h)224 2588 y(con)o(tains)h(all)f(non-lo)q(op)h(predecessors)j(of)c
(the)i(lo)q(op.)j(Figure)d(8.6)e(is)h(an)g(example.)j(In)d(this)224
2638 y(case,)19 b(the)f(no)q(des)g(ha)o(v)o(e)f(b)q(een)h(n)o(um)o(b)q
(ered)f(in)g(rev)o(erse)i(p)q(ost)f(order,)g(so)f(that)h(the)f(lo)o(w)o
(est)224 2688 y(n)o(um)o(b)q(ered)d(no)q(de)g(in)g(eac)o(h)g(set)h(is)f
(necessarily)h(the)f(header)h(no)q(de.)p eop
%%Page: 217 223
217 222 bop 224 274 a FL(8.2.)31 b(F)o(OR)-5 b(W)g(ARD)14
b(AND)g(BA)o(CKW)-5 b(ARD)13 b(FLO)o(W)551 b FN(217)224
390 y FH(8.1.2)56 b(Building)17 b(the)h Fn(CF)o(G)224
468 y FN(W)m(e)i(shall)f(supp)q(ose)i(that)f(the)h(data)f(structure)i
(whic)o(h)e(represen)o(ts)i(the)f FK(CF)o(G)i FN(is)d(con-)224
518 y(structed)15 b(either)e(during)g(the)g(\014lling)e(of)h(the)h
FK(V)l(AL)f FN(bu\013er,)i(or)e(thereafter.)20 b(Of)12
b(course)i(it)e(is)224 568 y(p)q(ossible)g(to)e(build)g(the)i(graph)f
(at)f(other)i(phases)g(of)e(the)i(compilation)c(pro)q(cess.)19
b(F)m(or)10 b(struc-)224 618 y(tured)k(languages,)d(the)i(abstract)g
(syn)o(tax)g(tree)g(of)f(the)h(pro)q(cedure)h(itself)e(has)g
(information)224 668 y(whic)o(h)i(is)g(equiv)n(alen)o(t)f(to)h(the)g
FK(CF)o(G)t FN(.)287 718 y(Nev)o(ertheless,)g(since)e(most)e(of)h(the)h
(manipulations)c(for)j(whic)o(h)h(the)g(graph)f(is)g(required)224
768 y(are)17 b(p)q(erformed)f(on)f(the)i FK(V)l(AL)p
FN(,)e(w)o(e)h(shall)f(p)q(erserv)o(ere)k(with)d(our)g(supp)q(osition.)
24 b(W)m(e)16 b(no)o(w)224 818 y(ha)o(v)o(e)h(a)g(reasonably)g
(complete)g(view)f(of)h(the)h(abstract)g(syn)o(tax)f(of)f
FK(CF)o(G)t FN(s.)27 b(Eac)o(h)18 b(no)q(de)224 868 y(represen)o(ts)13
b(a)c(basic)h(blo)q(c)o(k,)f(and)h(requires)g(information)d(su\016cien)
o(t)j(to)g(allo)o(w)e(predecessors,)224 917 y(successors,)14
b(dominator)7 b(tree)12 b(paren)o(t)e(and)g(p)q(erhaps)h(p)q
(ost-dominator)d(tree)k(paren)o(t)e(blo)q(c)o(ks)224
967 y(to)j(b)q(e)g(found.)k(As)c(w)o(ell,)f(w)o(e)g(will)f(need)j(some)
d(information)f(indicating)h(the)i(exten)o(t)h(of)e(the)224
1017 y(basic)i(blo)q(c)o(k)g(in)f(the)i FK(V)l(AL)e FN(bu\013er.)287
1068 y(In)f(practice)i(the)f FK(CF)o(G)j FN(represen)o(tation)f(will)c
(ha)o(v)o(e)h(\014elds)h(other)g(than)g(the)g(structural)224
1117 y(information)k(listed)j(here.)36 b(This)19 b(additional)f
(information)f(corresp)q(onds)k(to)f(the)g FK(p)n(er-)224
1167 y(blo)n(ck)i FN(information)13 b(whic)o(h)k(is)f(needed)j(for)d
(the)h(analyses)g(whic)o(h)g(w)o(e)f(wish)h(to)g(p)q(erform.)224
1217 y(As)d(an)e(indicativ)o(e)g(example,)g(the)h(information)d
(required)k(in)e(order)i(to)f(p)q(erform)f(the)h(b)q(est)224
1267 y(metho)q(ds)j(of)f(register)i(allo)q(cation)d(is,)i(for)g(eac)o
(h)g(blo)q(c)o(k,)g(three)h(sets)g(of)e(virtual)g(registers,)224
1317 y(these)h(are)e(the)h FK(liveIn,)f(liveOut)j FN(and)d(the)g
FK(de\014ne)n(d)20 b FN(sets.)287 1367 y(The)10 b(essen)o(tial)h
(subsidiary)f(data)g(structure,)i(used)f(in)f(the)h(construction)g(of)e
(the)i(graph,)224 1417 y(is)18 b(a)f(lo)q(okup)f(table)h(for)g(lab)q
(el)g(names.)27 b(W)m(e)17 b(ma)o(y)e(load)i(up)g(the)h(table)f(during)
g(creation)224 1467 y(of)f(the)h FK(V)l(AL)p FN(,)e(and)h(mak)o(e)f(an)
h(extra)h(pass)g(o)o(v)o(er)f(the)h(bu\013er)g(\014lling)e(in)h(the)h
(edges)g(of)f(the)224 1517 y(graph.)24 b(Alternativ)o(ely)m(,)15
b(w)o(e)h(ma)o(y)e(build)h(the)h(graph)g(on)f(the)i(\015y)e(as)h(the)h
(bu\013er)g(is)e(\014lled,)224 1567 y(doing)f(a)g(mo)q(derate)g(amoun)o
(t)f(of)g(bac)o(k-patc)o(hing)h(as)h(the)g(destination)f(lab)q(els)g
(of)g(forw)o(ard)224 1616 y(jumps)h(are)i(disco)o(v)o(ered.)26
b(In)17 b(either)g(case)g(it)f(is)g(adv)n(an)o(tageous)g(to)g(kno)o(w)g
(whic)o(h)g(branc)o(h)224 1666 y(targets)g(are)g(trap)f(co)q(de)h(en)o
(try)f(p)q(oin)o(ts,)g(since)h(w)o(e)f(w)o(ould)f(lik)o(e)h(to)f
(ignore)h(suc)o(h)h(branc)o(hes)224 1716 y(in)e(the)g(structure)i(of)e
(the)g(graph.)224 1857 y FI(8.2)67 b(F)-6 b(orw)n(ard)23
b(and)g(bac)n(kw)n(ard)g(\015o)n(w)224 1949 y FN(Data\015o)o(w)14
b(equations)h(o)q(ccur)h(in)e(four)h(di\013eren)o(t)g(\015a)o(v)o(ors.)
21 b(They)15 b(are)g(all)e(sets)k(of)d(sim)o(ulta-)224
1999 y(neous,)j(equations)f(on)f(set-v)n(alued)h(v)n(ariables,)f(whic)o
(h)h(include)g(a)f(union)h(or)f(in)o(tersection)224 2049
y(op)q(eration)j(whic)o(h)f(iterates)i(o)o(v)o(er)e(either)i(the)f
(predecessor)i(or)e(successor)i(no)q(des)e(of)f(the)224
2099 y(giv)o(en)d(no)q(de.)287 2149 y(Th)o(us)e(w)o(e)h(ha)o(v)o(e)f
(forw)o(ard)g(or)g(rev)o(erse)i(information)9 b(\015o)o(w)j(on)g(the)h
FK(CF)o(G)t FN(,)e(dep)q(ending)i(as)224 2199 y(information)e(\015o)o
(ws)i(in)o(to)g(the)h(righ)o(t)f(hand)g(side)h(of)f(the)h(equations)f
(from)f(predecessors)k(or)224 2249 y(successors)k(resp)q(ectiv)o(ely)m
(.)28 b(Similarly)l(,)14 b(information)g(merges)j(in)o(to)f(the)h(no)q
(de)g(along)f FK(al)r(l-)224 2299 y(p)n(aths)k FN(in)15
b(the)h(case)h(of)d(iterated)j(in)o(tersections,)g(and)e
FK(any-p)n(ath)20 b FN(in)15 b(the)h(case)h(of)e(iterated)224
2349 y(unions.)34 b(The)20 b(equation)f(for)g(the)h(dominators)d(of)i
(a)g(no)q(de,)i(rep)q(eated)g(here)f(from)e(the)224 2398
y(previous)d(section)616 2456 y Ft(8)p FM(a)d Ft(2)f
FM(N)r(;)c FK(dom)846 2462 y FB(a)877 2456 y FN(=)978
2417 y Fd(\\)921 2515 y FB(b)p FA(2)p FK(pr)n(e)n(d)t
Fz(\()p FB(a)p Fz(\))1081 2456 y FN(\()p FK(dom)1177
2462 y FB(b)1203 2456 y Ft([)i FM(b)p FN(\))224 2587
y(is)14 b(therefore)h(classi\014ed)g(as)f(a)f FK(forwar)n(d)h(\015ow,)h
(al)r(l)f(p)n(aths)k FN(problem.)287 2638 y(An)12 b(example)g(of)g(a)g
(bac)o(kw)o(ard)h(\015o)o(w,)f(an)o(y)g(path)h(problem)e(is)h(giv)o(en)
g(in)h(the)g(c)o(hapter)h(on)224 2688 y(register)g(allo)q(cation,)d
(where)j(it)f(is)f(used)i(to)f(compute)f(the)h(set)h(of)e(virtual)g
(registers)i(whic)o(h)p eop
%%Page: 218 224
218 223 bop 224 274 a FN(218)626 b FL(CHAPTER)14 b(8.)32
b(D)o(A)m(T)m(AFLO)o(W)12 b(ANAL)m(YSIS)224 390 y FN(are)j(liv)o(e)e
(at)h(the)g(en)o(try)h(and)e(exit)h(of)f(eac)o(h)i(basic)f(blo)q(c)o
(k.)224 506 y FH(8.2.1)56 b(Do)n(wnsafe)13 b(expressions,)f(a)h(bac)n
(kw)n(ard-\015o)n(w)i(all)c(paths)i(prob-)396 564 y(lem)224
641 y FN(Here)g(w)o(e)e(shall)f(consider)i(the)g(problem)d(of)i
(computing)e(the)j(set)g(of)e(expressions)j(whic)o(h)e(are)224
690 y(computed)16 b(along)f FK(every)20 b FN(path)c(whic)o(h)g(leads)g
(from)e(some)i(particular)f(no)q(de)i(to)f(the)h FK(end)224
740 y FN(no)q(de.)23 b(W)m(e)15 b(sa)o(y)g(that)g(suc)o(h)h(an)f
(expression)i(is)e FK(down-safe)h FN(at)f(that)g(no)q(de.)23
b(The)15 b(name)f(is)224 790 y(c)o(hosen)h(b)q(ecause)g(w)o(e)f(ma)o(y)
e(b)q(e)i(sure)h(that)f(if)f(the)h(ev)n(aluation)e(of)h(an)h
(expression)g(is)g(mo)o(v)o(ed)224 840 y(to)e(a)g FK(down-safe)j
FN(lo)q(cation,)10 b(then)j(w)o(e)f(shall)f(nev)o(er)i(compute)e(an)g
(expression)i(whic)o(h)f(w)o(ould)224 890 y(not)k(ha)o(v)o(e)g(b)q(een)
h(computed)e(an)o(yw)o(a)o(y)m(,)f(p)q(erhaps)j(further)g(do)o(wn)e
(the)i(con)o(trol)e(\015o)o(w.)23 b(This)224 939 y(is)14
b(a)g(bac)o(kw)o(ard)g(\015o)o(w,)f(all)f(paths)i(data\015o)o(w)g
(problem.)287 989 y(An)f(expression)i(is)e FK(kil)r(le)n(d)g
FN(in)g(a)h(particular)f(blo)q(c)o(k)g(if)g(an)o(y)g(op)q(erand)h(of)f
(the)h(expression)224 1039 y(has)k(a)f(v)n(alue)f(assigned)i(to)f(it)g
(in)g(that)g(blo)q(c)o(k.)28 b(An)17 b(expression)h(is)g
FK(lo)n(c)n(al)r(ly)f(anticip)n(atible)224 1089 y FN(\()p
FK(lo)n(cA)o(nt)p FN(\))c(in)f(a)g(blo)q(c)o(k)h(if)e(it)h(is)h
(computed)f(in)g(that)h(blo)q(c)o(k)f(b)q(efore)h(it)f(is)h
FK(kil)r(le)n(d)o FN(.)1434 1074 y Fz(5)1470 1089 y FN(An)g(expres-)224
1139 y(sion)j(is)g(do)o(wn-safe)h(at)f(the)h(exit)f(of)f(a)h(blo)q(c)o
(k)g(if)g(it)g(is)g(do)o(wn-safe)g(at)g(the)h(en)o(try)g(of)e
FK(every)224 1188 y FN(successor)f(blo)q(c)o(k.)j(Finally)m(,)10
b(an)h(expression)h(is)g(do)o(wn-safe)f(at)g(the)h(en)o(try)g(of)f(a)g
(blo)q(c)o(k)g(either)224 1238 y(if)k(it)f(is)h(lo)q(cally)f(an)o
(ticipatible)g(in)g(the)i(blo)q(c)o(k,)f(or)g(it)g(is)f(do)o(wn-safe)h
(at)g(the)h(output)f(of)g(the)224 1288 y(blo)q(c)o(k,)c(and)h(is)f(not)
g(killed)f(inside)i(the)g(blo)q(c)o(k.)17 b(F)m(ormalizing)8
b(these)k(observ)n(ations,)g(w)o(e)f(ha)o(v)o(e)224 1338
y(the)k(follo)o(wing)c(equations)j(|)466 1424 y FK(downSafeIn)675
1434 y FB(e)734 1424 y FN(=)42 b(\010)470 1486 y FK(downSafeIn)679
1496 y FB(i)734 1486 y FN(=)g FK(lo)n(cA)o(nt)924 1492
y FB(i)958 1486 y Ft([)21 b FN(\()p FK(downSafeOut)1261
1496 y FB(i)1284 1486 y Ft(\000)9 b FK(kil)r(le)n(d)1418
1492 y FB(i)1432 1486 y FN(\))441 1557 y FK(downSafeOut)679
1567 y FB(i)734 1557 y FN(=)862 1517 y Fd(\\)808 1608
y FB(j)r FA(2)p FK(suc)n(c)s Fz(\()p FB(i)p Fz(\))968
1557 y FK(downSafeIn)1177 1567 y FB(j)224 1723 y FN(W)m(e)k(ma)o(y)f
(substitute)i(the)g(last)g(equation)f(in)f(the)i(previous)g(one)g(to)f
(giv)o(e)g(the)h(equation)f(in)224 1772 y(its)h(directly)g(recursiv)o
(e)i(form)c(|)363 1865 y Ft(8)p FM(i)g Ft(2)f FM(N)r(;)c
FK(downSafeIn)714 1875 y FB(i)740 1865 y FN(=)k FK(lo)n(cA)o(nt)899
1871 y FB(i)934 1865 y Ft([)1036 1825 y Fd(\\)982 1916
y FB(j)r FA(2)p FK(suc)n(c)s Fz(\()p FB(i)p Fz(\))1142
1865 y FK(downSafeIn)1351 1875 y FB(j)1378 1865 y Ft(\000)f
FK(kil)r(le)n(d)1513 1871 y FB(i)224 1997 y FN(together)17
b(with)f(the)g(b)q(oundary)g(condition)f(that)h(the)h(do)o(wn-safe)f
(set)g(for)g(the)g(end)h(no)q(de)224 2047 y(is)d(the)h(empt)o(y)d(set.)
287 2097 y(Note)f(that)h(the)f(univ)o(ersal)g(set)i(is)e(a)g(trivial)e
(solution)i(of)f(these)j(equations)e(so,)h(as)f(in)g(the)224
2146 y(previous)k(case,)f(the)g(solution)f(whic)o(h)h(w)o(e)g(require)h
(is)f(a)f FK(le)n(ast)18 b FN(solution.)f(In)d(this)g(example)224
2196 y(ho)o(w)o(ev)o(er,)19 b(the)f FK(downSafeIn)g FN(v)n(ariables)f
(are)h(sets)h(of)e(expressions,)i(rather)g(than)e(sets)i(of)224
2246 y(blo)q(c)o(ks)14 b(as)g(in)g(the)g(case)h(of)e(the)i(dominators.)
224 2361 y FH(8.2.2)56 b(Solving)17 b(the)i(data\015o)n(w)h(equations)
224 2438 y FN(The)h(iterativ)o(e)g(metho)q(d)e(of)h(solution)g(to)g
(data\015o)o(w)g(equations)g(w)o(orks)h(b)o(y)f(computing)224
2488 y(successiv)o(e)g(appro)o(ximations)14 b(to)j(the)h(required)g
(solution,)f(starting)g(with)g(some)g(appro-)224 2538
y(priatedly)d(initialized)e(sets.)p 224 2570 577 2 v
271 2597 a Fy(5)288 2609 y Fx(This)h(is)g(what)g(w)o(e)h(migh)o(t)d
(call)i(an)g Fu(upwar)n(d)r(ly)i(exp)n(ose)n(d)h(de\014nition)h
Fx(of)c(the)f(expression.)18 b(The)13 b(name)224 2648
y(comes)e(from)f(the)h(observ)n(ation)e(that)i(an)o(y)g(suc)o(h)g
(expression)e(could)h(just)i(as)f(safely)g(b)q(e)g(computed)e(at)i(the)
224 2688 y(en)o(try)g(to)g(the)f(blo)q(c)o(k,)g(rather)g(than)h(at)g
(the)g(p)q(osition)e(at)i(whic)o(h)g(the)g(computatio)o(n)e(is)i
(originally)e(placed.)p eop
%%Page: 219 225
219 224 bop 224 274 a FL(8.2.)31 b(F)o(OR)-5 b(W)g(ARD)14
b(AND)g(BA)o(CKW)-5 b(ARD)13 b(FLO)o(W)551 b FN(219)287
390 y(It)20 b(is)h(usual)g(to)f(represen)o(t)j(the)e(sets)h(b)o(y)f
(bit-v)o(ectors,)i(so)d(as)h(to)g(gain)f(the)h(sp)q(eed-)224
440 y(up)f(of)g(p)q(erforming)e(the)j(unions)f(and)g(in)o(tersections)h
(b)o(y)f(w)o(ord-wide)g(logical)e FK(OR)j FN(and)224
490 y FK(AND)h FN(instructions.)28 b(In)17 b(Mo)q(dula)g(w)o(e)g(w)o
(ould)g(probably)f(use)i(a)f(data)g(structure)i(whic)o(h)224
540 y(is)c(a)g(dynamically)d(allo)q(cated)i(arra)o(y)h(of)f
FK(BITSET)20 b FN(t)o(yp)q(e.)i(W)m(e)14 b(usually)g(need)i(to)f(allo)q
(cate)224 590 y(the)i(sets)g(dynamically)m(,)c(b)q(ecause)18
b(the)e(cardinalit)o(y)f(of)h(the)g(base)h(t)o(yp)q(e)f(is)g(not)g(kno)
o(wn)g(in)224 640 y(adv)n(ance.)287 691 y(If)c(w)o(e)h(tak)o(e)g(the)h
(bac)o(kw)o(ard)e(\015o)o(w,)h(all)e(paths)i(example)f(from)f(the)j
(previous)f(section)g(to)224 740 y(illustrate)g(the)h(tec)o(hnique,)f
(w)o(e)h(will)d(assume)i(that)g(the)g(eac)o(h)h(basic)f(blo)q(c)o(k)g
(descriptor)h(has)224 790 y(t)o(w)o(o)g(v)n(ariable)e(sized)j(sets)g
(declared,)f(the)g FK(downSafeIn)h FN(and)e FK(downSafeOut)i
FN(sets.)k(During)224 840 y(earlier)e(pro)q(cessing,)g(the)g
FK(lo)n(cA)o(nt)f FN(set)h(is)f(created)i(in)o(to)e(the)h
FK(downSafeIn)g FN(set,)g(the)g FK(kil)r(le)n(d)224 890
y FN(set)e(is)f(computed,)f(and)h(the)g FK(downSafeOut)h
FN(sets)g(are)f(all)f(initialized)f(to)i(empt)o(y)m(.)287
941 y(In)g(order)i(to)e(compute)g(the)h(sets)h(w)o(e)f(tra)o(v)o(erse)h
(the)f(graph,)g(computing)e(a)h(new)h(v)n(alue)224 991
y(for)e(the)h FK(downSafeOut)f FN(set)h(from)e(the)h
FK(downSafeIn)h FN(sets)h(of)d(the)i(successor)i(no)q(des.)i(F)m(rom)
224 1041 y(the)e FK(downSafeOut)f FN(set,)g(w)o(e)g(compute)f(a)g(new)h
(appro)o(ximation)d(to)i(the)h FK(downSafeIn)h FN(set.)224
1090 y(Clearly)g(w)o(e)g(wish)g(to)g(visit)f(the)h(no)q(des)h(in)f(suc)
o(h)g(an)g(order)h(that)f(as)g(far)f(as)i(p)q(ossible)f(the)224
1140 y(successor)f(no)q(des)f(are)f(pro)q(cessed)i(b)q(efore)e(the)g
(the)g(preceding)h(no)q(de.)k(Th)o(us)12 b(w)o(e)h(c)o(ho)q(ose)g(to)
224 1190 y(visit)h(the)g(no)q(des)h(in)e FK(p)n(ost-or)n(der)t
FN(.)346 1328 y FF(VAR)19 b(done)f(:)39 b(BOOLEAN;)423
1374 y(node)18 b(:)39 b(BBlock;)423 1419 y(succ)18 b(:)39
b(BBlock;)295 1465 y(BEGIN)346 1511 y(REPEAT)385 1556
y(done)18 b(:=)h(TRUE;)385 1602 y(FOR)12 b FE(every)g(no)n(de)g(in)h(p)
n(ost-or)n(der)i FF(DO)423 1648 y(FOR)d FE(every)g(suc)n(c)n(essor)f
(of)j(no)n(de)g FF(DO)462 1693 y(node.down)o(Sa)o(feO)o(ut)i(:=)615
1739 y(Intersecti)o(on\()o(no)o(de.)o(dow)o(nS)o(afe)o(Ou)o(t,s)o(ucc)o
(.d)o(own)o(Sa)o(feI)o(n\))o(;)423 1785 y(END;)423 1830
y(node.downS)o(afe)o(Ou)o(t)h(:=)i(SetMinus)o(\(no)o(de.)o(do)o(wnS)o
(af)o(eOu)o(t,)o(nod)o(e.k)o(il)o(led)o(\);)423 1876
y(IF)g(NOT)g(Subset\(n)o(ode)o(.do)o(wn)o(Saf)o(eI)o(n,n)o(ode)o(.d)o
(own)o(Sa)o(feO)o(ut)o(\))e(THEN)462 1922 y(done)h(:=)h(FALSE;)462
1967 y(downSafeI)o(n)d(:=)j(SetUnion\(n)o(ode)o(.d)o(own)o(Saf)o(eI)o
(n,n)o(od)o(e.d)o(own)o(Sa)o(feO)o(ut)o(\);)423 2013
y(END;)385 2059 y(END;)346 2104 y(UNTIL)f(done;)295 2150
y(END;)224 2289 y FN(This)f(is)g(a)g(simple)e(algorithm)g(whic)o(h)h
(rep)q(eatedly)j(tra)o(v)o(erses)f(the)g FK(CF)o(G)i
FN(in)d(p)q(ost-order,)224 2339 y(un)o(til)12 b(a)g(complete)g(tra)o(v)
o(ersal)g(is)h(p)q(erformed)f(without)g(an)o(y)g(set)h(b)q(eing)g(c)o
(hanged.)k(The)c(fact)224 2389 y(that)g(a)f(set)h(will)d(c)o(hange)j
(as)f(a)g(result)h(of)f(the)h(set)g(union)e(op)q(eration)h(is)h
(precomputed)f(from)224 2438 y(the)h(fact)e(that)h(the)g(righ)o(t)g
(hand)f(set)i(is)e(not)h(a)f(subset)j(of)d(the)h(left)f(hand)h(set.)18
b(This)12 b(a)o(v)o(oids)f(a)224 2488 y(costly)g(dynamic)e(set)j(cop)o
(y)m(.)k(The)11 b(algorithm)d(relies)k(on)e(the)h(existence)i(of)d(a)g
(mo)q(dule)f(whic)o(h)224 2538 y(can)17 b(p)q(erform)f(the)i(set)g(op)q
(erations)f(on)f(the)i(dynamically)13 b(sized)18 b(sets.)28
b(Suc)o(h)17 b(a)g(mo)q(dule)224 2588 y(is)f(cen)o(tral)f(to)g(all)f
(suc)o(h)i(data\015o)o(w)f(solv)o(ers.)23 b(In)15 b(fact,)g(a)g(sligh)o
(tly)f(b)q(etter)j(algorithm)12 b(than)224 2638 y(the)k(one)f(sho)o(wn)
f(here)i(can)f(b)q(e)g(devised,)g(based)h(on)e(using)g(a)h(w)o(orklist)
f(to)g(propagate)h(the)224 2688 y(information)c(from)i(the)h(c)o
(hanged)g(no)q(des.)p eop
%%Page: 220 226
220 225 bop 224 274 a FN(220)626 b FL(CHAPTER)14 b(8.)32
b(D)o(A)m(T)m(AFLO)o(W)12 b(ANAL)m(YSIS)224 390 y FH(8.2.3)56
b(Av)m(ailable)15 b(expressions,)g(a)h(forw)n(ard)i(\015o)n(w)f(all)f
(paths)g(prob-)396 449 y(lem)224 525 y FN(In)d(the)g(classical)f(metho)
q(d)f(for)h(\014nding)g(global)f(common)f(sub)q(expressions,)k(an)e
(imp)q(ortan)o(t)224 575 y(subproblem)i(is)g(that)h(of)f(\014nding)g
FK(available)h(expr)n(essions)p FN(.)20 b(An)15 b(expression)h(is)e
(said)g(to)h(b)q(e)224 625 y(a)o(v)n(ailable)h(at)i(a)f(particular)h
(no)q(de)g(if)f(it)h(is)f(computed)h(along)e FK(every)22
b FN(path)17 b(whic)o(h)h(leads)224 675 y(to)h(that)g(no)q(de.)33
b(This)19 b(is)g(another)g(example)f(of)g(a)h(forw)o(ard)f(\015o)o(w,)h
(all)f(paths)h(data\015o)o(w)224 724 y(problem.)287 774
y(As)14 b(b)q(efore,)g(an)g(expression)h(is)f FK(kil)r(le)n(d)f
FN(in)g(a)h(blo)q(c)o(k)f(if)h(an)o(y)f(op)q(erand)h(of)g(the)g
(expression)224 824 y(has)e(a)f(v)n(alue)g(assigned)h(to)f(it)g(in)g
(the)h(blo)q(c)o(k.)17 b(An)12 b(expression)h(is)e FK(lo)n(c)n(al)r(ly)
h(defer)n(able)i FN(\()p FK(lo)n(cDef)p FN(\))224 874
y(in)i(a)f(blo)q(c)o(k)h(if)f(it)h(is)f(computed)h(in)f(that)h(blo)q(c)
o(k)g(and)f(is)h(not)g(subsequen)o(tly)h FK(kil)r(le)n(d)e
FN(in)h(the)224 924 y(same)e(blo)q(c)o(k.)437 909 y Fz(6)475
924 y FN(An)g(expression)i(is)e(a)o(v)n(ailable)e(at)i(the)h(en)o(try)g
(to)g(a)f(blo)q(c)o(k)g(if)f(it)h(is)h(a)o(v)n(ailable)224
974 y(at)f(the)h(exit)f(of)g FK(every)j FN(predecessor)h(blo)q(c)o(k.)g
(Finally)m(,)12 b(an)i(expression)h(is)f(a)o(v)n(ailable)e(at)i(the)224
1023 y(exit)i(of)g(a)g(blo)q(c)o(k)f(either)i(if)f(it)f(is)h(lo)q
(cally)f(deferable)i(in)e(the)i(blo)q(c)o(k,)f(or)g(it)g(is)g(a)o(v)n
(ailable)d(at)224 1073 y(the)20 b(en)o(try)f(to)g(the)g(blo)q(c)o(k,)h
(and)e(is)h(not)g(killed)f(inside)g(the)i(blo)q(c)o(k.)32
b(F)m(ormalizing)16 b(these)224 1123 y(observ)n(ations,)e(w)o(e)g(ha)o
(v)o(e)g(the)g(follo)o(wing)d(equations)j(|)497 1211
y FK(availableIn)691 1217 y FB(s)750 1211 y FN(=)42 b(\010)472
1273 y FK(availableOut)695 1279 y FB(i)750 1273 y FN(=)g
FK(lo)n(cDef)936 1283 y FB(i)971 1273 y Ft([)20 b FN(\()p
FK(availableIn)1230 1279 y FB(i)1253 1273 y Ft(\000)9
b FK(kil)r(le)n(d)1387 1279 y FB(i)1401 1273 y FN(\))501
1344 y FK(availableIn)695 1350 y FB(i)750 1344 y FN(=)878
1304 y Fd(\\)824 1402 y FB(j)r FA(2)p FK(pr)n(e)n(d)t
Fz(\()p FB(i)p Fz(\))986 1344 y FK(availableOut)1208
1350 y FB(j)224 1519 y FN(W)m(e)k(ma)o(y)f(substitute)i(the)g(last)g
(equation)f(in)f(the)i(previous)g(one)g(to)f(giv)o(e)g(the)h(equation)f
(in)224 1569 y(its)h(directly)g(recursiv)o(e)i(form)c(|)351
1663 y Ft(8)p FM(i)f Ft(2)h FM(N)r(;)7 b FK(availableOut)715
1669 y FB(i)741 1663 y FN(=)12 b FK(lo)n(cDef)897 1673
y FB(i)931 1663 y Ft([)1034 1624 y Fd(\\)980 1722 y FB(j)r
FA(2)p FK(pr)n(e)n(d)s Fz(\()p FB(i)p Fz(\))1141 1663
y FK(availableOut)1364 1669 y FB(j)1391 1663 y Ft(\000)d
FK(kil)r(le)n(d)1525 1669 y FB(i)224 1805 y FN(together)17
b(with)f(the)g(b)q(oundary)g(condition)f(that)h(the)h(a)o(v)n(ailable)d
(set)i(for)g(the)g(start)h(no)q(de)224 1855 y(is)d(the)h(empt)o(y)d
(set.)287 1905 y(These)k(equations)f(ma)o(y)e(b)q(e)j(solv)o(ed)e(in)h
(w)o(a)o(ys)g(whic)o(h)g(are)g(analogous)f(to)h(the)g(metho)q(d)224
1954 y(used)g(in)f(the)g(previous)g(section.)224 2062
y FO(Global)g(CSEs,)i(the)f(classical)f(metho)q(d)224
2138 y FN(W)m(e)k(ma)o(y)f(use)i(the)g FK(availableIn)f
FN(sets)i(to)e(\014nd)g(global)f(common)e(sub)q(expressions.)34
b(The)224 2188 y(metho)q(d)15 b(is)g(only)f(sk)o(etc)o(hed)j(here,)f
(as)f(an)g(alternativ)o(e)g(metho)q(d)f(is)h(giv)o(en)g(in)g(some)f
(detail)224 2238 y(in)g(the)g(follo)o(wing)e(c)o(hapter.)287
2288 y(The)k(computation)e(of)h(an)h(expression)h(in)e(a)g(blo)q(c)o(k)
h(is)f(redundan)o(t,)i(and)f(ma)o(y)d(b)q(e)k(re-)224
2338 y(placed)12 b(b)o(y)g(a)f(use)i(of)e(a)g(previously)g(computed)h
(v)n(alue)f(pro)o(vided)g(t)o(w)o(o)g(conditions)h(are)g(met.)224
2387 y(Firstly)m(,)21 b(the)f(expression)h(m)o(ust)e(ha)o(v)o(e)h(b)q
(een)h(computed)e(earlier)i(in)e(the)i(con)o(trol)e(\015o)o(w,)224
2437 y(and)14 b(secondly)m(,)f(the)h(recomputation)e(of)h(the)h
(expression)h(m)o(ust)d(yield)h(the)h(same)e(v)n(alue)h(as)224
2487 y(the)19 b(previous)f(computation.)28 b(In)18 b(section)h(7.1.3)d
(w)o(e)i(referred)i(to)e(these)h(prop)q(erties)g(as)224
2537 y FK(availability)e FN(and)d FK(validity)t FN(.)p
224 2570 577 2 v 271 2597 a Fy(6)288 2609 y Fx(This)c(is)h(what)f(w)o
(e)g(migh)o(t)f(call)g(an)h Fu(downwar)n(d)r(ly)j(exp)n(ose)n(d)g
(de\014nition)h Fx(of)c(the)f(expression.)k(The)d(name)224
2648 y(comes)h(from)f(the)h(observ)n(ation)e(that)i(an)o(y)g(suc)o(h)g
(expression)e(could)h(just)i(as)f(safely)g(b)q(e)g(computed)e(at)i(the)
224 2688 y(exit)g(to)g(the)g(blo)q(c)o(k,)f(rather)g(than)g(at)h(the)g
(p)q(osition)e(at)j(whic)o(h)e(the)h(computation)d(is)k(originally)c
(placed.)p eop
%%Page: 221 227
221 226 bop 224 274 a FL(8.3.)31 b(FINDING)14 b(OUT)g(MORE)848
b FN(221)287 390 y(In)15 b(the)h(previous)g(case,)g(within)f(a)g
(single)g(basic)h(blo)q(c)o(k,)f(the)h(problem)e(w)o(as)i(straigh)o(t-)
224 440 y(forw)o(ard.)j(In)14 b(the)h(global)d(case,)j(for)f(some)f
(expression)i FM(e)g FN(in)e(blo)q(c)o(k)h FM(i)p FN(,)g(w)o(e)h(need)g
(to)f(ensure)224 490 y(that)i(the)h FM(e)f FN(is)g FK(available)j
FN(at)d(the)g(input)g(of)f(blo)q(c)o(k)h FM(i)p FN(,)g(that)g(is,)g
FM(e)f Ft(2)g FK(availableIn)1504 496 y FB(i)1518 490
y FN(,)h(and)f(to)224 540 y(ensure)h(that)e FM(e)g FN(is)g(not)g
(killed)e(in)i(blo)q(c)o(k)f FM(i)i FN(prior)e(its)h(new)g
(de\014nition.)287 590 y(In)19 b(terms)g(of)g(the)h(attributes)g
(de\014ned)h(in)e(the)h(previous)g(sections,)h(an)e(expression)224
640 y(ev)n(aluation)13 b FM(e)h FN(is)g(redundan)o(t)g(in)g(blo)q(c)o
(k)f FM(i)i FN(if)e(the)h(follo)o(wing)d(holds)j(|)671
731 y FM(e)e Ft(2)f FK(availableIn)936 737 y FB(i)970
731 y Ft(^)21 b FM(e)12 b Ft(2)f FK(lo)n(cA)o(nt)1205
737 y FB(i)287 823 y FN(In)i(the)i(next)f(c)o(hapter)h(w)o(e)f(shall)f
(see)i(a)f(more)e(con)o(v)o(enien)o(t)j(metho)q(d)d(of)i(\014nding)f
(global)224 873 y(common)k(sub)q(expressions.)37 b(Ho)o(w)o(ev)o(er,)21
b(this)e(later)h(metho)q(d)f(is)g(actually)g(sligh)o(tly)f(less)224
923 y(p)q(o)o(w)o(erful)c(than)g(the)g(de\014nition)g(giv)o(en)f(here.)
224 1061 y FI(8.3)67 b(Finding)24 b(out)f(more)224 1152
y FN(There)14 b(are)e(an)g(extremely)g(large)g(n)o(um)o(b)q(er)g(of)f
(di\013eren)o(t)i(optimizations)d(whic)o(h)i(ha)o(v)o(e)g(b)q(een)224
1202 y(expressed)k(using)e(the)g(data\015o)o(w)f(formalism)c(treated)15
b(here.)k(Man)o(y)13 b(of)g(these)i(are)f(treated)224
1252 y(in)g(Aho)g(and)f(Ullman[)p FO(?)p FN(],)d(and)k(Aho,)f(Sethi)h
(and)g(Ullman[)p FO(?)o FN(].)287 1302 y(An)h(example)g(of)g(a)g
(data\015o)o(w)g(problem)f(whic)o(h)i(do)q(es)g(not)f(fall)g(in)o(to)f
(the)j(pattern)f(de-)224 1352 y(scrib)q(ed)h(here)f(is)f
FK(p)n(artial)f(r)n(e)n(dundancy)k(elimination)s FN(.)j(The)15
b(equations)g(in)o(v)o(olv)o(ed)e(in)i(solv-)224 1401
y(ing)j(this)f(problem)g(are)h FK(bidir)n(e)n(ctional)t
FN(,)g(that)g(is)g(they)g(in)o(v)o(olv)o(e)e(b)q(oth)i(predecessors)j
(and)224 1451 y(successors.)33 b(The)18 b(problem)e(w)o(as)i(\014rst)g
(form)o(ulated)e(b)o(y)i(Morel)f(and)h(Ren)o(v)o(oise[)p
FO(?)p FN(].)28 b(Re-)224 1501 y(cen)o(tly)15 b(Kno)q(op,)f(Ste\013en)h
(and)f(Ruthing[)p FO(?)p FN(])k(ha)o(v)o(e)c(published)g(an)g
(alternativ)o(e)g(treatmen)o(t,)224 1551 y(whic)o(h)h(a)o(v)o(oids)e
(the)i(bidirectional)f(data\015o)o(w,)f(but)i(requires)g(computation)e
(of)h(four)g(sepa-)224 1601 y(rate)h(data\015o)o(w)e(attributes.)287
1651 y(The)i(in)o(terv)n(al)g(metho)q(d)f(of)h(solving)f(data\015o)o(w)
h(equations,)g(whic)o(h)g(is)h(the)g(alternativ)o(e)224
1701 y(to)c(the)g(iterativ)o(e)g(metho)q(d)e(giv)o(en)h(here,)i(is)f
(due)g(to)f(F)m(rancis)h(Allen[)p FO(?)p FN(].)j(An)d(asymptotically)
224 1750 y(more)18 b(e\016cien)o(t)g(w)o(a)o(y)g(of)f(constructing)i
(the)g(dominator)d(tree)k(is)e(giv)o(en)g(in)f(T)m(argan)g(and)224
1800 y(Lengauer[)p FO(?)p FN(].)224 1938 y FI(8.4)67
b(Exercises)254 2030 y FN(8.1)20 b(Execute)11 b(the)g(algorithm)c(in)i
(\014gure)h(8.3)e(b)o(y)i(hand,)g(so)f(as)h(to)f(pro)q(duce)i(the)f
(dominator)328 2079 y(tree)15 b(of)f(the)g FK(CF)o(G)j
FN(in)d(\014gure)g(8.5.)254 2163 y(8.2)20 b(Here)15 b(is)f(an)g
(example)e FK(CF)o(G)t FN(.)h(This)h(graph)g(is)f(irreducible.)662
2200 y
 8946319 5854576 0 0 8946319 5854576 startTexFig
 662 2200 a
%%BeginDocument: irred1.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-107.0 226.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Ellipse
n 200 163 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 179 200 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 218 200 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 178 240 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 220 240 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 148 163 11 11 0 360 DrawEllipse gs 0.95 setgray fill gr
gs col-1 s gr
% Ellipse
n 259 240 11 11 0 360 DrawEllipse gs 0.95 setgray fill gr
gs col-1 s gr
0.500 setlinewidth
% Polyline
n 118 162 m 136 162 l gs col-1 s gr
n 128.000 160.000 m 136.000 162.000 l 128.000 164.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 160 163 m 190 163 l gs col-1 s gr
n 182.000 161.000 m 190.000 163.000 l 182.000 165.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 196 173 m 184 191 l gs col-1 s gr
n 190.102 185.453 m 184.000 191.000 l 186.774 183.234 l gs 2 setlinejoin col-1 s gr
% Polyline
n 206 174 m 214 190 l gs col-1 s gr
n 212.211 181.950 m 214.000 190.000 l 208.633 183.739 l gs 2 setlinejoin col-1 s gr
% Polyline
n 219 211 m 220 230 l gs col-1 s gr
n 221.577 221.906 m 220.000 230.000 l 217.582 222.116 l gs 2 setlinejoin col-1 s gr
% Polyline
n 178 211 m 178 229 l gs col-1 s gr
n 180.000 221.000 m 178.000 229.000 l 176.000 221.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 232 240 m 248 240 l gs col-1 s gr
n 240.000 238.000 m 248.000 240.000 l 240.000 242.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 187.000 236.000 m 193.000 232.500 l
	193.000 232.500 199.000 229.000 205.000 232.000 DrawSplineSection
	211.000 235.000 l gs col-1 s gr
n 204.739 229.633 m 211.000 235.000 l 202.950 233.211 l gs 2 setlinejoin col-1 s gr
% Open spline
n 211.000 245.000 m 205.000 249.000 l
	205.000 249.000 199.000 253.000 193.500 249.500 DrawSplineSection
	188.000 246.000 l gs col-1 s gr
n 193.676 251.982 m 188.000 246.000 l 195.823 248.608 l gs 2 setlinejoin col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
198 167 m 
gs 1 -1 scale (1) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
176 203 m 
gs 1 -1 scale (2) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
216 204 m 
gs 1 -1 scale (3) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
176 244 m 
gs 1 -1 scale (4) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
218 244 m 
gs 1 -1 scale (5) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
257 243 m 
gs 1 -1 scale (e) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
146 166 m 
gs 1 -1 scale (s) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 328 2638 a FN(Execute)e(the)g(algorithm)c(in)i(\014gure)h(8.3)e(b)o(y)
i(hand,)g(so)f(as)h(to)f(pro)q(duce)i(the)f(dominator)328
2688 y(tree)15 b(of)f(the)g FK(CF)o(G)t FN(.)p eop
%%Page: 222 228
222 227 bop 224 274 a FN(222)626 b FL(CHAPTER)14 b(8.)32
b(D)o(A)m(T)m(AFLO)o(W)12 b(ANAL)m(YSIS)254 390 y FN(8.3)20
b(Consder)15 b(the)f(follo)o(wing)e(iterativ)o(e)i(binary)f(tree)i(pro)
q(cedure)h(|)430 537 y FF(PROCEDURE)g(Search\(val)g(:)39
b(INTEGER;)16 b(root)i(:)39 b(Tree\))18 b(:)39 b(BOOLEAN;)430
583 y(BEGIN)481 629 y(WHILE)18 b(root)g(<>)h(NIL)f(DO)519
674 y(IF)78 b(val)19 b(=)g(root^.key)d(THEN)i(RETURN)f(TRUE;)519
720 y(ELSIF)h(val)h(>)g(root^.key)d(THEN)i(root)g(:=)h(root^.lOp)o(;)
519 766 y(ELSE)g(\(*)f FE(val)13 b Fm(<)h FE(key)h FF(*\))k(root)f(:=)h
(root^.rO)o(p;)519 811 y(END;)g(\(*)f FE(if-stmt)d FF(*\))481
857 y(END;)j(\(*)32 b FE(while)15 b FF(*\))481 903 y(RETURN)i(FALSE;)
430 948 y(END)h(Search;)328 1060 y FN(A)c(p)q(ossible)g
FK(CF)o(G)k FN(for)13 b(this)h(pro)q(cedure)i(is)e(|)443
1097 y
 15853404 10722426 0 0 15853404 10722426 startTexFig
 443 1097 a
%%BeginDocument: search.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-53.0 225.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Ellipse
n 79 79 11 11 0 360 DrawEllipse gs 0.95 setgray fill gr
gs col-1 s gr
% Ellipse
n 139 79 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 139 119 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 139 159 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 291 238 11 11 0 360 DrawEllipse gs 0.95 setgray fill gr
gs col-1 s gr
% Ellipse
n 291 179 11 11 0 360 DrawEllipse gs col-1 s gr
0.500 setlinewidth
% Polyline
n 58 78 m 68 78 l gs col-1 s gr
n 60.000 76.000 m 68.000 78.000 l 60.000 80.000 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
% Polyline
n 256 130 m 256 110 l  179 110 l  179 130 l  clp gs col-1 s gr
% Polyline
n 256 171 m 256 151 l  179 151 l  179 171 l  clp gs col-1 s gr
% Polyline
n 256 210 m 256 190 l  179 190 l  179 210 l  clp gs col-1 s gr
% Polyline
n 257 248 m 257 228 l  180 228 l  180 248 l  clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 91 79 m 127 79 l gs col-1 s gr
n 119.000 77.000 m 127.000 79.000 l 119.000 81.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 139 91 m 139 109 l gs col-1 s gr
n 141.000 101.000 m 139.000 109.000 l 137.000 101.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 139 130 m 139 149 l gs col-1 s gr
n 141.000 141.000 m 139.000 149.000 l 137.000 141.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 150 120 m 178 120 l gs col-1 s gr
n 170.000 118.000 m 178.000 120.000 l 170.000 122.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 150 160 m 178 160 l gs col-1 s gr
n 170.000 158.000 m 178.000 160.000 l 170.000 162.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 257 238 m 281 238 l gs col-1 s gr
n 273.000 236.000 m 281.000 238.000 l 273.000 240.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 131.000 87.000 m 124.500 93.500 l
	124.500 93.500 118.000 100.000 118.500 159.500 DrawSplineSection
	118.500 159.500 119.000 219.000 129.000 229.000 DrawSplineSection
	129.000 229.000 139.000 239.000 159.000 239.000 DrawSplineSection
	179.000 239.000 l gs col-1 s gr
n 171.000 237.000 m 179.000 239.000 l 171.000 241.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 139.000 171.000 m 139.000 185.500 l
	139.000 185.500 139.000 200.000 159.000 200.000 DrawSplineSection
	179.000 200.000 l gs col-1 s gr
n 171.000 198.000 m 179.000 200.000 l 171.000 202.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 256.000 161.000 m 264.000 161.000 l
	264.000 161.000 272.000 161.000 278.000 166.500 DrawSplineSection
	284.000 172.000 l gs col-1 s gr
n 279.454 165.120 m 284.000 172.000 l 276.751 168.069 l gs 2 setlinejoin col-1 s gr
% Open spline
n 257.000 200.000 m 265.500 200.000 l
	265.500 200.000 274.000 200.000 279.000 193.500 DrawSplineSection
	284.000 187.000 l gs col-1 s gr
n 277.537 192.122 m 284.000 187.000 l 280.708 194.560 l gs 2 setlinejoin col-1 s gr
% Open spline
n 300.000 173.000 m 308.000 168.500 l
	308.000 168.500 316.000 164.000 316.000 121.500 DrawSplineSection
	316.000 121.500 316.000 79.000 233.000 79.000 DrawSplineSection
	150.000 79.000 l gs col-1 s gr
n 158.000 81.000 m 150.000 79.000 l 158.000 77.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 256.000 121.000 m 281.000 121.000 l
	281.000 121.000 306.000 121.000 316.000 130.500 DrawSplineSection
	316.000 130.500 326.000 140.000 325.500 170.500 DrawSplineSection
	325.500 170.500 325.000 201.000 311.500 215.500 DrawSplineSection
	298.000 230.000 l gs col-1 s gr
n 304.915 225.508 m 298.000 230.000 l 301.988 222.782 l gs 2 setlinejoin col-1 s gr
/Times-BoldItalic findfont 10.00 scalefont setfont
78 81 m 
gs 1 -1 scale (s) col-1 show gr
/Times-BoldItalic findfont 10.00 scalefont setfont
289 242 m 
gs 1 -1 scale (e) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
183 164 m 
gs 1 -1 scale (root := root^.lOp) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
183 203 m 
gs 1 -1 scale (root := root^.rOp) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
192 124 m 
gs 1 -1 scale (ret := TRUE) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
191 240 m 
gs 1 -1 scale (ret := FALSE) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
137 83 m 
gs 1 -1 scale (1) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
137 123 m 
gs 1 -1 scale (2) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
137 163 m 
gs 1 -1 scale (4) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
171 156 m 
gs 1 -1 scale (5) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
171 196 m 
gs 1 -1 scale (6) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
289 183 m 
gs 1 -1 scale (7) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
171 234 m 
gs 1 -1 scale (8) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
171 116 m 
gs 1 -1 scale (3) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 328 1845 a FN(Find)g(the)g(dominator)e(tree)j(and)f(lo)q(op)f(tree)i
(for)f(this)g FK(CF)o(G)t FN(.)254 1934 y(8.4)20 b(An)11
b(in)o(teresting)h(v)n(ariation)d(on)i(the)h(problem)d(of)i(computing)e
(a)o(v)n(ailable)g(expressions)328 1984 y(is)k(that)h(of)e(computing)g
FK(live)k FN(expressions.)j(An)13 b(expression)i(is)e(liv)o(e)f(at)h
(the)h(en)o(try)g(of)328 2033 y(some)c(particular)h FK(CF)o(G)k
FN(blo)q(c)o(k,)c(if)f(it)h(is)g(used)h(in)e(that)i(blo)q(c)o(k)e(b)q
(efore)i(it)f(is)g(killed.)16 b(An)328 2083 y(expression)e(is)e(also)g
(liv)o(e)g(at)h(en)o(try)g(to)f(some)g(particular)g(blo)q(c)o(k)h(if)e
(the)j(expression)f(is)328 2133 y(not)h(killed)f(in)g(that)h(blo)q(c)o
(k,)f(and)h(it)g(is)f(liv)o(e)g(at)h(the)h(en)o(try)f(of)f
FK(any)19 b FN(successor)d(blo)q(c)o(k.)328 2202 y(Deriv)o(e)e(the)h
(data\015o)o(w)e(equations)h(for)f(liv)o(e)g(expressions.)254
2291 y(8.5)20 b(Another)14 b(attribute)f(of)f(expressions)j(is)d(the)h
(prop)q(ert)o(y)h(of)e(b)q(eing)h FK(busy)p FN(.)18 b(An)13
b(expres-)328 2340 y(sion)19 b(is)f(busy)549 2325 y Fz(7)587
2340 y FN(if)f(it)i(is)f(liv)o(e)g(in)g(at)h(the)g(en)o(try)g(of)f
FK(every)23 b FN(successor)e(blo)q(c)o(k.)32 b(The)328
2390 y(in)o(tuition)18 b(b)q(ehind)j(computing)d(busy)i(expressions)h
(is)e(seen)i(b)o(y)f(noting)f(that)h(an)328 2440 y(expression)e(whic)o
(h)f(is)g(not)g(busy)h(is)f(not)g(used)h(along)e(ev)o(ery)i(path.)27
b(Therefore)19 b(it)328 2490 y(migh)o(t)11 b(b)q(e)j(b)q(etter)g(to)f
(push)g(the)h(computation)d(do)o(wn)i(the)g FK(CF)o(G)k
FN(so)c(that)g(it)f(is)h(only)328 2540 y(computed)h(when)g(it)f(is)h
(certain)h(that)f(it)f(is)h(needed.)328 2609 y(Deriv)o(e)g(the)h
(data\015o)o(w)e(equations)h(for)f(busy)i(expressions.)p
224 2649 577 2 v 271 2676 a Fy(7)288 2688 y Fx(Also)c(called)f(\\v)o
(ery)h(busy")f(in)h(some)f(accoun)o(ts.)p eop
%%Page: 223 229
223 228 bop 224 274 a FL(8.4.)31 b(EXER)o(CISES)1046
b FN(223)254 390 y(8.6)20 b(The)d(lo)q(cal)e(optimization)e(of)i(o)o(v)
o(er\015o)o(w)h(tests)h(on)f(the)h(IBM)f FK(Power)k FN(arc)o
(hitecture,)328 440 y(suggested)h(on)e(page)h(207,)f(has)h(a)f(disadv)n
(an)o(tage)g(in)g(that)g(it)h(ma)o(y)d(redundan)o(tly)328
490 y(clear)h(the)g(\015ag)f(at)h(the)g(start)g(of)f(some)f(basic)i
(blo)q(c)o(ks.)29 b(Dealing)16 b(with)h(the)h(prop-)328
540 y(agation)g(of)h(the)i(state)f(v)n(alues)f(b)q(et)o(w)o(een)i(blo)q
(c)o(ks)f(in)f(a)g(general)h(w)o(a)o(y)f(leads)g(to)h(a)328
590 y(non-standard,)13 b(bi-directional)f(data\015o)o(w)g(problem.)k
(Ho)o(w)o(ev)o(er,)d(w)o(e)g(obtain)g(a)f(con-)328 640
y(v)o(en)o(tional)i(forw)o(ard-\015o)o(w)g(problem)g(if)h(w)o(e)g
(adopt)g(the)h(con)o(v)o(en)o(tion)e(that)i(the)f(state)328
689 y(at)f(blo)q(c)o(k)f(en)o(try)i(is)f(only)f(p)q(ermitted)g(to)h(b)q
(e)h FK(de)n(ad)j FN(or)c FK(cle)n(ar)t FN(.)328 756
y(Deriv)o(e)c(the)h(equations)f(for)f(this)h(con)o(v)o(en)o(tion.)16
b([Note:)g(in)10 b(this)g(case)h(the)f(propagated)328
806 y(v)n(alue)15 b(is)g(a)g(single)g(Bo)q(olean,)h(rather)g(than)f(a)g
FK(bit-ve)n(ctor)k FN(of)c(Bo)q(oleans.)23 b(Th)o(us)16
b(the)328 855 y(equations)f(will)d(ha)o(v)o(e)j(Bo)q(olean)f
Ft(_)g FN(and)g Ft(^)g FN(op)q(erators,)h(rather)g(than)f(the)h(usual)f
(set)328 905 y(op)q(erations)g Ft([)g FN(and)g Ft(\\)p
FN(.])p eop
%%Page: 224 230
224 229 bop 224 274 a FN(224)626 b FL(CHAPTER)14 b(8.)32
b(D)o(A)m(T)m(AFLO)o(W)12 b(ANAL)m(YSIS)p eop
%%Page: 225 231
225 230 bop 224 703 a FJ(Chapter)32 b(9)224 912 y FP(Static)39
b(single)g(assignmen)m(t)224 1036 y(form)224 1253 y FN(Static)21
b(single)f(assignmen)o(t)g(form)f(\()p FK(SSA)p FN(\))i(is)g(a)f(mo)q
(dern)g(w)o(a)o(y)g(to)g(solv)o(e)h(man)o(y)e(of)h(the)224
1303 y(classical)15 b(problems)f(of)g(global)f(data\015o)o(w)h
(analysis.)20 b(It)15 b(forms)e(an)i(elegan)o(t)f(basis)h(for)g(the)224
1353 y(implemen)o(tation)c(of)i(man)o(y)f(of)h(the)i(classical)e
(optimizations)f(of)h(the)i(past.)287 1404 y(The)c(cen)o(tral)h(idea)f
(of)g FK(SSA)g FN(analysis)g(is)g(to)g(create)i(a)e(mo)q(di\014ed)f(in)
o(termediate)g(form)g(for)224 1454 y(programs,)g(so)h(that)h(eac)o(h)f
(v)n(alue)f(in)h(eac)o(h)h(pro)q(cedure)h(has)e(exactly)g(one)g(p)q
(osition)g(at)f(whic)o(h)224 1503 y(it)j(is)g(de\014ned.)19
b(These)c(single)d(de\014nitions)i(are)f(the)h(global)e(analog)f(of)i
(the)h FK(value)g(numb)n(ers)224 1553 y FN(whic)o(h)d(guided)f(the)h
(computation)e(of)g(lo)q(cal)h(common)d(sub)q(expressions)13
b(in)d(c)o(hapter)h(7.)17 b(The)224 1603 y(k)o(ey)g(prop)q(ert)o(y)g
(of)f FK(SSA)h FN(form,)e(whic)o(h)h(mak)o(es)g(the)h(transformation)e
(so)h(p)q(o)o(w)o(erful,)g(\015o)o(ws)224 1653 y(from)e(the)j(fact)e
(that)h(ev)o(ery)g(\(renamed\))g(v)n(ariable)e(of)h(the)i(transformed)e
(program)f(has)i(a)224 1703 y(single)f(de\014nition)g(p)q(oin)o(t.)21
b(Th)o(us)16 b(if)e(t)o(w)o(o)h(expressions)h(p)q(erform)f(the)g(same)g
(op)q(eration)g(on)224 1753 y(v)n(ariables)f(of)f(the)i(same)f(names,)f
(then)h(the)h(v)n(alue)f(computed)g(will)e(b)q(e)j(the)g(same.)j
(Recall)224 1802 y(that)d(in)f(trying)g(to)h(determine)g(if)e(a)i
(computation)e(w)o(as)h(redundan)o(t)h(w)o(e)g(had)g(to)f(ask)h(t)o(w)o
(o)224 1852 y(questions)e(|)e(has)i(this)f(computation)e(b)q(een)j
(already)f(done,)g(and)g(|)f(if)g(the)i(computation)224
1902 y(w)o(as)j(rep)q(eated)i(w)o(ould)d(the)h(same)f(v)n(alue)h(b)q(e)
g(pro)q(duced.)25 b FK(SSA)17 b FN(form)d(mak)o(es)h(the)h(second)224
1952 y(question)c(redundan)o(t,)h(since)f(the)h(v)n(alues)e(of)g(v)n
(ariables)g(are)h(nev)o(er)h(mo)q(di\014ed.)j(In)c(this)f(case)224
2002 y(v)n(alue-equiv)n(alence)j(reduces)i(to)d(a)h(simple)e(test)j(of)
f(lexical)f(iden)o(tit)o(y)m(.)287 2053 y(The)k(transformation)f(of)h
(a)g(pro)q(cedure)i(in)o(to)e FK(SSA)h FN(form)d(in)o(v)o(olv)o(es)i
(some)f(relativ)o(ely)224 2102 y(complex)e(computations.)19
b(Ho)o(w)o(ev)o(er,)14 b(once)i(the)f(transformation)e(has)h(b)q(een)i
(p)q(erformed,)224 2152 y(man)o(y)f(di\013eren)o(t)i(optimizations)c
(can)k(b)q(e)f(p)q(erformed)g(on)g(the)g(mo)q(di\014ed)f(form.)23
b(Finally)m(,)224 2202 y(the)17 b(pro)q(cedure)h(m)o(ust)e(b)q(e)g
(transformed)g(bac)o(k)g(in)o(to)g(standard)h(form,)d(so)i(that)h
(ordinary)224 2252 y(co)q(de)e(emission)e(can)h(tak)o(e)g(place.)224
2395 y FI(9.1)67 b(T)-6 b(ransforming)23 b(in)n(to)g(SSA)g(form)224
2488 y FN(Supp)q(ose)14 b(that)g(w)o(e)f(ha)o(v)o(e)g(a)g(pro)q(cedure)
h(in)f(whic)o(h)g(some)f(v)n(ariable,)g FM(a)h FN(sa)o(y)m(,)f(has)h
(more)f(than)224 2538 y(one)j(de\014nition.)k(Figure)14
b(9.1)f(is)i(a)f(fragmen)o(t)e(of)i(suc)o(h)h(a)f(program.)k(W)m(e)c(w)
o(an)o(t)g(to)g(mo)q(dify)224 2588 y(this)19 b(program)f(so)g(that)h
(eac)o(h)h(v)n(ariable)d(has)i(only)g(a)f(single)h(p)q(oin)o(t)f(of)g
(de\014nition.)33 b(W)m(e)224 2638 y(do)16 b(this)g(b)o(y)f(renaming)f
(v)n(ariables)h(so)h(that)f(eac)o(h)i(de\014nition)e(of)g(the)h(v)n
(ariable)f FM(a)g FN(is)h(giv)o(en)224 2688 y(a)h(di\013eren)o(t)h
(name.)26 b(W)m(e)17 b(migh)o(t)e(call)h(these)j(new,)e(separated)i(v)n
(ariables)d FM(a)1439 2694 y Fz(1)1458 2688 y FN(,)h
FM(a)1509 2694 y Fz(2)1544 2688 y FN(and)g(so)914 2793
y(225)p eop
%%Page: 226 232
226 231 bop 224 274 a FN(226)331 b FL(CHAPTER)14 b(9.)31
b(ST)m(A)m(TIC)14 b(SINGLE)f(ASSIGNMENT)i(F)o(ORM)645
349 y
 9472573 6775521 0 0 9472573 6775521 startTexFig
 645 349 a
%%BeginDocument: ssa0.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-54.0 143.0 translate 0.900 -0.900 scale
/Times-Roman findfont 10.00 scalefont setfont
67 85 m 
gs 1 -1 scale (a := ) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
87 84 m 
gs 1 -1 scale (exp1) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
167 84 m 
gs 1 -1 scale (a := ) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
188 83 m 
gs 1 -1 scale (exp2) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
139 151 m 
gs 1 -1 scale (a) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
119 151 m 
gs 1 -1 scale (use ) col-1 show gr
1.000 setlinewidth
% Polyline
n 121 98 m 121 59 l  60 59 l  60 98 l  clp gs col-1 s gr
% Polyline
n 220 98 m 220 59 l  159 59 l  159 98 l  clp gs col-1 s gr
% Polyline
n 170 158 m 170 119 l  109 119 l  109 158 l  clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 90 44 m 90 59 l gs col-1 s gr
n 92.000 51.000 m 90.000 59.000 l 88.000 51.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 188 45 m 188 59 l gs col-1 s gr
n 190.000 51.000 m 188.000 59.000 l 186.000 51.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 89.000 99.000 m 89.000 109.500 l
	89.000 109.500 89.000 120.000 109.000 111.500 DrawSplineSection
	109.000 111.500 129.000 103.000 131.000 111.000 DrawSplineSection
	133.000 119.000 l gs col-1 s gr
n 133.000 110.754 m 133.000 119.000 l 129.119 111.724 l gs 2 setlinejoin col-1 s gr
% Open spline
n 189.000 99.000 m 189.000 109.500 l
	189.000 109.500 189.000 120.000 169.500 111.500 DrawSplineSection
	169.500 111.500 150.000 103.000 147.500 110.500 DrawSplineSection
	145.000 118.000 l gs col-1 s gr
n 149.427 111.043 m 145.000 118.000 l 145.632 109.778 l gs 2 setlinejoin col-1 s gr
$F2psEnd
%%EndDocument

 endTexFig
 445 869 a FN(Figure)f(9.1:)j(F)m(ragmen)o(t)12 b(of)h(program)g(in)g
(con)o(v)o(en)o(tional)g(form)224 1009 y(on.)18 b(W)m(e)13
b(will)f(replace)j(de\014ning)e(o)q(ccurrences)k(of)c
FM(a)g FN(b)o(y)h(a)f(new)h(v)n(ariable)e(with)h(an)h(unique,)224
1059 y(indexed)19 b(name.)28 b(Used)19 b(o)q(ccurrences)h(of)e
FM(a)f FN(will)f(b)q(e)j(mo)q(di\014ed)d(to)i(refer)g(to)g(the)g
(unique)224 1109 y(v)n(alue)c(whic)o(h)f(reac)o(hes)j(that)e
(particular)f(use.)287 1162 y(Ho)o(w)o(ev)o(er,)j(\014gure)g(9.1)e
(demonstrates)i(an)g(imm)o(ediate)d(problem)i(with)g(this)g(concept.)
224 1212 y(Where)f(the)g(con)o(trol)e(\015o)o(w)h(merges)g(there)h(is)f
(a)f(use)i(of)e FM(a)h FN(whic)o(h)g(t)o(w)o(o)f(separate)i
(de\014nitions)224 1262 y(reac)o(h.)19 b(Th)o(us)12 b(w)o(e)h(cannot)g
(decide)g(whic)o(h)f(of)g(the)h(t)o(w)o(o)f(indexed)h(v)n(ariables)e
(to)i(en)o(ter)g(as)g(the)224 1312 y(indexed)i(name)d(of)i(the)g(use)h
(in)e(the)i(merge)e(blo)q(c)o(k.)287 1365 y(The)k(solution)e(to)i(this)
f(con)o(undrum,)g(and)g(the)i(k)o(ey)e(to)h(the)g(whole)f
FK(SSA)h FN(tec)o(hnique,)224 1415 y(is)g(to)f(in)o(tro)q(duce)i(a)e
(syn)o(thetic)h(assignmen)o(t)f(at)g(the)i(en)o(try)f(of)f(eac)o(h)h
(suc)o(h)g(blo)q(c)o(k.)26 b(These)224 1465 y(\010)18
b(functions)437 1450 y Fz(1)473 1465 y FN(assign)f(to)g(a)g(new,)i
(unique)e(v)o(ersion)h(of)e(the)i(underlying)f(v)n(ariable.)28
b(The)224 1515 y(arit)o(y)15 b(of)g(the)h(function)f(is)g(exactly)h
(the)g(in-degree)g(of)f(the)h(blo)q(c)o(k)f(in)g(the)h
FK(CF)o(G)t FN(,)e(and)i(the)224 1565 y(argumen)o(ts)f(of)f(the)i
(function)f(are)h(the)g(instances)g(of)e(the)i(v)n(alue)f(whic)o(h)g
(reac)o(h)h(the)g(blo)q(c)o(k)224 1614 y(along)i(eac)o(h)h(of)f(the)i
(incoming)c(paths.)33 b(Figure)19 b(9.2)f(sho)o(ws)h(the)g(transformed)
f(v)o(ersion)224 1664 y(of)f(the)g(same)f(program)f(fragmen)o(t.)26
b(The)17 b(seman)o(tics)f(of)h(the)g(\010)g(function)g(are)g(that)g
(the)645 1729 y
 9472573 6841303 0 0 9472573 6841303 startTexFig
 645 1729 a
%%BeginDocument: ssa1.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-54.0 144.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Polyline
n 121 98 m 121 59 l  60 59 l  60 98 l  clp gs col-1 s gr
% Polyline
n 220 98 m 220 59 l  159 59 l  159 98 l  clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 90 44 m 90 59 l gs col-1 s gr
n 92.000 51.000 m 90.000 59.000 l 88.000 51.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 188 45 m 188 59 l gs col-1 s gr
n 190.000 51.000 m 188.000 59.000 l 186.000 51.000 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
% Polyline
n 173 159 m 173 119 l  104 119 l  104 159 l  clp gs col-1 s gr
0.500 setlinewidth
% Open spline
n 189.000 99.000 m 189.000 109.500 l
	189.000 109.500 189.000 120.000 169.500 111.500 DrawSplineSection
	169.500 111.500 150.000 103.000 147.500 110.500 DrawSplineSection
	145.000 118.000 l gs col-1 s gr
n 149.427 111.043 m 145.000 118.000 l 145.632 109.778 l gs 2 setlinejoin col-1 s gr
% Open spline
n 89.000 98.000 m 89.000 108.500 l
	89.000 108.500 89.000 119.000 109.000 110.500 DrawSplineSection
	109.000 110.500 129.000 102.000 131.000 110.000 DrawSplineSection
	133.000 118.000 l gs col-1 s gr
n 133.000 109.754 m 133.000 118.000 l 129.119 110.724 l gs 2 setlinejoin col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
112 131 m 
gs 1 -1 scale (a) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
121 131 m 
gs 1 -1 scale (:=) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
164 83 m 
gs 1 -1 scale (a) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
64 84 m 
gs 1 -1 scale (a) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
140 131 m 
gs 1 -1 scale (\(a , a ) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
165 131 m 
gs 1 -1 scale (\)) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
68 88 m 
gs 1 -1 scale (1) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
73 84 m 
gs 1 -1 scale (:=) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
84 84 m 
gs 1 -1 scale (exp1) col-1 show gr
/Times-Roman findfont 8.00 scalefont setfont
168 86 m 
gs 1 -1 scale (2) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
174 83 m 
gs 1 -1 scale (:=) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
185 83 m 
gs 1 -1 scale (exp2) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
119 151 m 
gs 1 -1 scale (use ) col-1 show gr
/Times-Roman findfont 8.00 scalefont setfont
117 135 m 
gs 1 -1 scale (3) col-1 show gr
/Times-Roman findfont 8.00 scalefont setfont
147 135 m 
gs 1 -1 scale (1) col-1 show gr
/Times-Roman findfont 8.00 scalefont setfont
161 135 m 
gs 1 -1 scale (2) col-1 show gr
/Times-Roman findfont 8.00 scalefont setfont
144 154 m 
gs 1 -1 scale (3) col-1 show gr
/Symbol findfont 10.00 scalefont setfont
132 132 m 
gs 1 -1 scale (F) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
139 151 m 
gs 1 -1 scale (a) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 344 2254 a FN(Figure)d(9.2:)j(F)m(ragmen)o(t)12 b(of)h(program)g(in)g
(SSA)h(form)e(sho)o(wing)h(\010)h(function)224 2361 y(v)n(alue)e
(assigned)g(to)f(the)i(v)n(ariable)d(\()p FM(a)801 2367
y Fz(3)832 2361 y FN(in)h(our)h(example\))f(dep)q(ends)i(on)f(the)g
(path)g(b)o(y)f(whic)o(h)224 2411 y(con)o(trol)i(en)o(ters)i(the)f
(merging)d(no)q(de.)18 b(If)13 b(con)o(trol)g(en)o(ters)i(through)e
(the)h FM(n)p FN(-th)f(predecessor,)224 2461 y(then)k(the)g
FM(n)p FN(-th)f(argumen)o(t)f(is)h(assigned)g(to)g(the)h(v)n(ariable.)
23 b(In)16 b(our)g(example,)f(if)h(con)o(trol)224 2510
y(en)o(ters)h(from)12 b(the)k(left)e(hand)g(predecessor)k(then)d
FM(a)1033 2516 y Fz(1)1066 2510 y FN(is)g(assigned)f(to)h
FM(a)1347 2516 y Fz(3)1365 2510 y FN(,)g(while)f(if)g(con)o(trol)224
2560 y(en)o(ters)i(from)c(the)i(righ)o(t,)f(then)i FM(a)744
2566 y Fz(2)776 2560 y FN(is)f(assigned)g(to)g FM(a)1055
2566 y Fz(3)1074 2560 y FN(.)p 224 2610 577 2 v 271 2636
a Fy(1)288 2648 y Fx(V)m(ariously)g(sp)q(elled)h(in)g(full)h(as)f
(\\phi")g(or)h(\\\014",)g(and)f(confusingly)e(enough)h(pronounce)o(d)f
(\\fee")i(in)224 2688 y(American)10 b(English,)g(and)h(\\fy")f(in)h
(British)g(English.)p eop
%%Page: 227 233
227 232 bop 224 274 a FL(9.1.)31 b(TRANSF)o(ORMING)14
b(INTO)g(SSA)g(F)o(ORM)576 b FN(227)247 349 y
 22036889 17761075 0 0 22036889 17761075 startTexFig
 247 349
a
%%BeginDocument: frontier.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-54.0 288.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Ellipse
n 339 219 13 13 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 379 219 13 13 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 419 219 13 13 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 419 159 13 13 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 379 159 13 13 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 339 159 13 13 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 379 99 13 13 0 360 DrawEllipse gs col-1 s gr
% Polyline
n 119 259 m 119 219 l  59 219 l  59 259 l  clp gs col-1 s gr
% Polyline
n 239 199 m 239 159 l  179 159 l  179 199 l  clp gs col-1 s gr
% Polyline
n 159 199 m 159 159 l  99 159 l  99 199 l  clp gs col-1 s gr
% Polyline
n 199 139 m 199 99 l  139 99 l  139 139 l  clp gs col-1 s gr
% Polyline
n 199 259 m 199 219 l  139 219 l  139 259 l  clp gs col-1 s gr
% Polyline
n 159 319 m 159 279 l  99 279 l  99 319 l  clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 379 112 m 379 146 l gs col-1 s gr
n 381.000 138.000 m 379.000 146.000 l 377.000 138.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 380 172 m 380 206 l gs col-1 s gr
n 382.000 198.000 m 380.000 206.000 l 378.000 198.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 373 111 m 347 149 l gs col-1 s gr
n 353.168 143.527 m 347.000 149.000 l 349.867 141.268 l gs 2 setlinejoin col-1 s gr
% Polyline
n 373 170 m 347 208 l gs col-1 s gr
n 353.168 202.527 m 347.000 208.000 l 349.867 200.268 l gs 2 setlinejoin col-1 s gr
% Polyline
n 386 110 m 412 148 l gs col-1 s gr
n 409.133 140.268 m 412.000 148.000 l 405.832 142.527 l gs 2 setlinejoin col-1 s gr
% Polyline
n 387 169 m 411 208 l gs col-1 s gr
n 408.511 200.139 m 411.000 208.000 l 405.104 202.235 l gs 2 setlinejoin col-1 s gr
	1 setlinecap [1 3.000000] 3.000000 setdash
% Polyline
n 185 108 m 219 108 l gs col-1 s gr
	[] 0 setdash 0 setlinecap
	1 setlinecap [1 3.000000] 3.000000 setdash
% Polyline
n 177 124 m 218 124 l gs col-1 s gr
	[] 0 setdash 0 setlinecap
1.000 setlinewidth
% Polyline
n 159 80 m 159 40 l  99 40 l  99 80 l  clp gs col-1 s gr
0.500 setlinewidth
% Open spline
n 130.000 80.000 m 134.500 84.500 l
	134.500 84.500 139.000 89.000 154.500 86.500 DrawSplineSection
	154.500 86.500 170.000 84.000 170.000 91.500 DrawSplineSection
	170.000 99.000 l gs col-1 s gr
n 172.000 91.000 m 170.000 99.000 l 168.000 91.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 210.000 200.000 m 207.000 203.000 l
	207.000 203.000 204.000 206.000 188.500 204.000 DrawSplineSection
	188.500 204.000 173.000 202.000 173.000 210.000 DrawSplineSection
	173.000 218.000 l gs col-1 s gr
n 175.000 210.000 m 173.000 218.000 l 171.000 210.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 171.000 138.000 m 166.000 142.500 l
	166.000 142.500 161.000 147.000 145.500 145.000 DrawSplineSection
	145.500 145.000 130.000 143.000 130.000 151.000 DrawSplineSection
	130.000 159.000 l gs col-1 s gr
n 132.000 151.000 m 130.000 159.000 l 128.000 151.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 173.000 138.000 m 177.000 142.500 l
	177.000 142.500 181.000 147.000 196.500 145.000 DrawSplineSection
	196.500 145.000 212.000 143.000 212.000 151.000 DrawSplineSection
	212.000 159.000 l gs col-1 s gr
n 214.000 151.000 m 212.000 159.000 l 210.000 151.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 93.000 260.000 m 94.500 263.000 l
	94.500 263.000 96.000 266.000 111.500 264.000 DrawSplineSection
	111.500 264.000 127.000 262.000 127.000 270.000 DrawSplineSection
	127.000 278.000 l gs col-1 s gr
n 129.000 270.000 m 127.000 278.000 l 125.000 270.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 169.000 260.000 m 166.000 263.000 l
	166.000 263.000 163.000 266.000 147.500 264.000 DrawSplineSection
	147.500 264.000 132.000 262.000 132.000 270.000 DrawSplineSection
	132.000 278.000 l gs col-1 s gr
n 134.000 270.000 m 132.000 278.000 l 130.000 270.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 128.000 80.000 m 125.000 83.500 l
	125.000 83.500 122.000 87.000 100.500 93.500 DrawSplineSection
	100.500 93.500 79.000 100.000 79.000 139.000 DrawSplineSection
	79.000 139.000 79.000 178.000 83.500 191.500 DrawSplineSection
	83.500 191.500 88.000 205.000 88.000 212.000 DrawSplineSection
	88.000 219.000 l gs col-1 s gr
n 90.000 211.000 m 88.000 219.000 l 86.000 211.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 131.000 199.000 m 127.500 202.500 l
	127.500 202.500 124.000 206.000 108.500 204.000 DrawSplineSection
	108.500 204.000 93.000 202.000 93.500 210.500 DrawSplineSection
	94.000 219.000 l gs col-1 s gr
n 95.527 210.896 m 94.000 219.000 l 91.534 211.131 l gs 2 setlinejoin col-1 s gr
% Open spline
n 134.000 199.000 m 136.500 203.000 l
	136.500 203.000 139.000 207.000 153.500 204.500 DrawSplineSection
	153.500 204.500 168.000 202.000 168.000 210.000 DrawSplineSection
	168.000 218.000 l gs col-1 s gr
n 170.000 210.000 m 168.000 218.000 l 166.000 210.000 l gs 2 setlinejoin col-1 s gr
/Times-Italic findfont 10.00 scalefont setfont
114 50 m 
gs 1 -1 scale (block 1) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
154 111 m 
gs 1 -1 scale (block 2) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
115 172 m 
gs 1 -1 scale (block 3) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
195 171 m 
gs 1 -1 scale (block 4) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
75 232 m 
gs 1 -1 scale (block 5) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
156 231 m 
gs 1 -1 scale (block 6) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
116 291 m 
gs 1 -1 scale (block 7) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
124 67 m 
gs 1 -1 scale ({ }) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
161 127 m 
gs 1 -1 scale ({5}) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
117 187 m 
gs 1 -1 scale ({5,6}) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
202 186 m 
gs 1 -1 scale ({6}) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
82 247 m 
gs 1 -1 scale ({7}) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
164 247 m 
gs 1 -1 scale ({7}) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
123 307 m 
gs 1 -1 scale ({ }) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
377 102 m 
gs 1 -1 scale (1) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
377 162 m 
gs 1 -1 scale (2) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
337 223 m 
gs 1 -1 scale (3) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
377 223 m 
gs 1 -1 scale (4) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
417 223 m 
gs 1 -1 scale (6) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
337 163 m 
gs 1 -1 scale (5) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
417 163 m 
gs 1 -1 scale (7) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
327 79 m 
gs 1 -1 scale (Dominator tree fragment) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
101 31 m 
gs 1 -1 scale (CFG fragment) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
221 127 m 
gs 1 -1 scale (dominance frontier) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
222 111 m 
gs 1 -1 scale (block number) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 224 1565 a FN(Figure)21 b(9.3:)31 b FK(CF)o(G)24 b FN(fragmen)o(t)19
b(with)i(dominance)e(fron)o(tier)i(sets,)i(and)d(corresp)q(onding)224
1615 y(dominator)12 b(tree)j(fragmen)o(t)224 1752 y FH(9.1.1)56
b(Placing)18 b(the)g Fc(\010)h FH(functions)224 1834
y FN(The)13 b(k)o(ey)f(computational)e(problem)h(to)h(b)q(e)h(solv)o
(ed)f(in)g(transforming)e(to)i FK(SSA)h FN(form)e(is)h(the)224
1883 y(placemen)o(t)k(of)g(the)h(\010)g(functions.)25
b(If)17 b(a)f(function)g(is)g(placed)h(for)f(ev)o(ery)h(v)n(ariable)f
(in)g(the)224 1933 y(pro)q(cedure)e(whic)o(h)d(has)g(more)g(than)g(one)
h(de\014nition,)e(at)i(ev)o(ery)g(p)q(oin)o(t)f(of)f(merging)g(con)o
(trol,)224 1983 y(then)19 b(the)g(expansion)g(in)e(the)i(size)g(of)f
(the)h(program)e(can)h(b)q(e)h(undesirably)g(great.)31
b(An)224 2033 y(algorithm)10 b(for)j(e\016cien)o(tly)f(computing)f(the)
j(p)q(ositions)e(of)g(a)h(minim)o(al)c(set)14 b(of)e(\010)g(functions)
224 2083 y(is)i(kno)o(wn,)f(based)i(on)e(the)i(concept)g(of)e
(dominance)g(fron)o(tiers.)287 2135 y(The)f(dominance)f(fron)o(tier)h
(of)g(a)g(particular)f(no)q(de)i(in)f(a)f(graph,)h(is)g(the)h(set)g(of)
f(all)f(those)224 2185 y(no)q(des)16 b(whic)o(h)e(ha)o(v)o(e)h(a)f
(predecessor)j(whic)o(h)e(is)f(dominated)f(b)o(y)h(the)h(giv)o(en)f(no)
q(de,)h(but)g(are)224 2234 y(not)f(themselv)o(ed)g(dominated)f(b)o(y)g
(the)i(giv)o(en)f(no)q(de.)k(Consider)d(\014gure)f(9.3,)f(whic)o(h)h
(sho)o(ws)224 2284 y(a)g FK(CF)o(G)j FN(fragmen)o(t)c(and)g(the)i
(corresp)q(onding)g(fragmen)o(t)d(of)h(the)i(dominator)d(tree.)287
2336 y(In)i(the)i(\014gure,)f(the)g(dominance)f(fron)o(tier)h(sets)h
(are)f(sho)o(wn)g(in)f(braces)i(in)e(eac)o(h)i(blo)q(c)o(k)224
2386 y(of)j(the)g FK(CF)o(G)t FN(.)f(As)i(an)e(example,)h(blo)q(c)o(k)f
(3)h(is)g(dominated)e(b)o(y)i(blo)q(c)o(k)f(2,)i(but)f(do)q(es)g(not)
224 2436 y(dominate)c(blo)q(c)o(k)h(5.)25 b(Therefore)17
b(from)e(our)h(de\014nition,)g(blo)q(c)o(k)g(5)g(is)g(on)g(the)h
(dominance)224 2486 y(fron)o(tier)g(of)f(blo)q(c)o(k)h(2.)27
b(Similarl)o(y)14 b(blo)q(c)o(k)j(3)f(dominates)g(itself,)h(but)g(do)q
(es)g(not)g(dominate)224 2536 y(either)e(blo)q(c)o(ks)f(5)f(or)h(6.)k
(Th)o(us)c(b)q(oth)g(blo)q(c)o(ks)f(are)i(in)e(the)h(dominance)f(fron)o
(tier)g(of)h(blo)q(c)o(k)f(3.)287 2588 y(Once)21 b(the)f
FK(CF)o(G)k FN(and)c(dominance)e(tree)k(ha)o(v)o(e)d(b)q(een)i
(computed,)g(the)g(dominance)224 2638 y(fron)o(tiers)d(ma)o(y)d(b)q(e)j
(found)f(b)o(y)g(an)g(e\016cien)o(t)h(algorithm)c(referenced)20
b(at)d(the)h(end)g(of)e(this)224 2688 y(c)o(hapter.)p
eop
%%Page: 228 234
228 233 bop 224 274 a FN(228)331 b FL(CHAPTER)14 b(9.)31
b(ST)m(A)m(TIC)14 b(SINGLE)f(ASSIGNMENT)i(F)o(ORM)287
390 y FN(The)g(dominance)e(fron)o(tiers)h(tell)g(us)h(exactly)g(where)g
(to)f(put)h(the)g(\010)f(functions)h(in)f(the)224 440
y FK(CF)o(G)t FN(.)e(F)m(or)h(ev)o(ery)h(v)n(ariable)e(whic)o(h)g(has)i
(more)e(than)h(one)g(de\014nition,)f(a)h(\010)g(function)f(m)o(ust)224
490 y(b)q(e)19 b(placed)e(at)h(the)g(en)o(try)g(of)f(ev)o(ery)h(blo)q
(c)o(k)f(whic)o(h)h(is)f(in)g(the)h(dominance)e(fron)o(tier)i(of)f(a)
224 540 y(blo)q(c)o(k)d(with)g(a)f(de\014nition)h(for)f(that)h(v)n
(ariable.)287 591 y(It)e(is)g(assumed)f(that)h(during)g(the)g(creation)
h(of)e(the)i(original)d(in)o(termediate)h(form)f(a)i(list)224
641 y(is)17 b(created)g(whic)o(h)g(giv)o(es)f(for)g(eac)o(h)h(v)n
(ariable)e(a)h(list)g(of)g(the)g FK(CF)o(G)k FN(no)q(des)d(in)f(whic)o
(h)g(it)g(is)224 691 y(de\014ned,)g(either)g(directly)m(,)e(or)h(b)o(y)
g(p)q(ossible)g(side-e\013ects.)23 b(This)15 b(information)d(selects)17
b(the)224 741 y(dominance)c(fron)o(tier)h(sets)h(whic)o(h)f(place)g
(\010)g(functions)g(for)f(eac)o(h)i(v)n(ariable.)224
865 y FH(9.1.2)56 b(Renaming)16 b(de\014nitions)224 944
y FN(Once)h(the)g(p)q(ositions)e(of)h(the)g(\010)g(functions)g(are)g
(kno)o(wn,)f(w)o(e)h(are)h(able)e(to)h(rename)f(all)g(of)224
994 y(the)g(de\014ning)f(o)q(ccurrences)j(of)c(v)n(ariables,)g
(according)h(to)f(the)i FK(SSA)f FN(prop)q(ert)o(y)m(.)287
1045 y(W)m(e)19 b(tra)o(v)o(erse)h(eac)o(h)g(blo)q(c)o(k,)g(marking)d
(eac)o(h)j(explicit)e(de\014nition)h(of)g(eac)o(h)h(v)n(ariable,)224
1095 y(including)15 b(the)g(\010)g(function)g(de\014nitions,)g(with)g
(an)g(unique)g(index.)22 b(W)m(e)14 b(do)h(not)g(need)h(at)224
1145 y(this)h(stage)g(to)g(allo)q(cate)f(unique)h(indices)g(to)g(the)g
(implicit)e(de\014nitions)h(whic)o(h)h(threaten)224 1195
y(v)n(ariables)d(b)o(y)f(means)g(of)h(side)g(e\013ects.)224
1319 y FH(9.1.3)56 b(Renaming)16 b(applied)j(o)r(ccurrences)224
1398 y FN(The)c(index)e(v)n(alues)h(for)f(the)h(used)h(o)q(ccurrences)i
(of)c(v)n(ariables)g(in)g(the)i(form)d(m)o(ust)g(no)o(w)i(b)q(e)224
1448 y(\014lled)j(in.)26 b(This)17 b(is)g(done)g(b)o(y)f(sym)o(b)q
(olically)e(executing)k(the)f(co)q(de)h(of)e(eac)o(h)h(blo)q(c)o(k,)g
(after)224 1498 y(initializing)f(the)i(indices)h(for)f(eac)o(h)g(v)n
(ariable)f(at)h(the)h(start)f(of)g(the)g(blo)q(c)o(k.)30
b(As)19 b(w)o(ell)e(as)224 1548 y(renaming)g(the)i(applied)f(o)q
(ccurrences,)23 b(w)o(e)18 b(wish)h(to)f(compute)g(the)h(\014nal)f(v)n
(alue)g(of)g(the)224 1597 y(index)c(at)g(the)g(end)h(of)e(eac)o(h)i
(blo)q(c)o(k,)e(for)g(eac)o(h)i(indexed)f(v)n(ariable.)287
1649 y(If)c(w)o(e)h(pro)q(cess)i(the)f(blo)q(c)o(ks)f(top)f(do)o(wn)h
(in)f(the)i(dominator)d(tree,)j(then)f(w)o(e)h(can)f(tak)o(e)g(the)224
1699 y(initial,)k(incoming)f(indices)i(to)g(b)q(e)h(equal)f(to)g(the)g
(outgoing)f(indices)i(for)f(the)g(dominator)224 1748
y(tree)h(paren)o(t)f(blo)q(c)o(k.)23 b(In)15 b(the)h(case)h(of)e(a)g
(con)o(trol)g(\015o)o(w)g(merge,)g(this)g(index)h(v)n(alue)f(will)f(b)q
(e)224 1798 y(incorrect)e(for)f(an)o(y)f(v)n(ariable)g(whic)o(h)h(has)f
(b)q(een)i(mo)q(di\014ed)e(along)f(an)o(y)i(of)f(the)h(paths)g(leading)
224 1848 y(from)k(the)j(dominating)13 b(no)q(de)k(to)g(the)g(merge)f
(no)q(de.)27 b(Ho)o(w)o(ev)o(er)17 b(in)f(this)h(case)h(the)f(v)n(alue)
224 1898 y(is)e(not)g(used,)h(since)f(it)g(is)f(precisely)i(these)h
(circumstances)e(where)h(the)g(\010)f(functions)g(will)224
1948 y(rede\014ne)h(the)f(index)e(at)h(the)h(top)e(of)h(the)g(blo)q(c)o
(k.)287 1999 y(After)e(the)h(outgoing)d(v)n(ariable)h(indices)h(ha)o(v)
o(e)g(b)q(een)h(computed)e(for)g(all)g(blo)q(c)o(ks,)h(w)o(e)g(are)224
2049 y(able)17 b(to)f(return)h(and)f(rename)g(the)h(v)n(ariables)f
(whic)o(h)g(are)h(the)g(incoming)d(argumen)o(ts)h(to)224
2099 y(the)g(\010)f(functions.)k(After)c(this)g(step,)h(the)f
FK(SSA)h FN(form)d(is)h(complete.)224 2244 y FI(9.2)67
b(Dealing)22 b(with)h(memory)g(v)l(ariables)224 2337
y FN(Static)18 b(single)e(assignmen)o(t)g(form)g(deals)h(with)g
FK(entir)n(e)g(variables)p FN(.)27 b(That)17 b(is)g(to)g(sa)o(y)g(that)
224 2387 y(individual,)11 b(named)h(v)n(ariables)g(are)i(treated)g(as)f
(single)g(ob)r(jects,)h(ev)o(en)g(though)f(they)g(ma)o(y)224
2437 y(ha)o(v)o(e)h(some)f(structure.)287 2488 y(Whenev)o(er)j(a)f
(memory)e(v)n(ariable)h(is)h(written)h(to,)f(the)h(whole)f(v)n(ariable)
f(is)h(treated)h(as)224 2538 y(ha)o(ving)c(a)h(new)g(v)n(alue)f(n)o(um)
o(b)q(er.)17 b(Accesses)f(to)d(comp)q(onen)o(ts)f(of)h(structured)i(v)n
(ariables)d(are)224 2588 y(though)o(t)i(of)f(as)g(applying)g(suitable)g
(selection)h(functions)g(to)f(the)i(en)o(tire)f(v)n(ariables.)j(Th)o
(us)224 2638 y(the)e(algorithms)c(describ)q(ed)16 b(here)f(m)o(ust)d(b)
q(e)j(able)e(to)h(determine)f(whic)o(h)h(logical)e(program)224
2688 y(v)n(ariable)h(a)h(particular)f(load)g(or)h(store)h(applies)f
(to.)p eop
%%Page: 229 235
229 234 bop 224 274 a FL(9.2.)31 b(DEALING)14 b(WITH)f(MEMOR)m(Y)h(V)-5
b(ARIABLES)491 b FN(229)287 390 y(In)12 b(the)i(absence)g(of)e(some)g
(kind)g(of)g(annotation)g(from)f(the)i(fron)o(tend,)g(extremely)f(con-)
224 440 y(serv)n(ativ)o(e)i(assumptions)e(m)o(ust)g(b)q(e)i(made.)i(F)m
(urthermore,)d(when)h(dealing)e(with)h(memory)m(,)224
490 y(some)h(accoun)o(t)h(m)o(ust)e(b)q(e)i(tak)o(en)g(of)f(p)q
(ossible)g(aliassing)f(of)h(lo)q(cations.)19 b(Consider)c(the)g(as-)224
540 y(signmen)o(t)f(of)h(a)g(v)n(alue)g(to)g(some)f(lo)q(cation)h(in)f
(memory)m(,)f(where)j(the)g(lo)q(cation)e(is)h(p)q(oin)o(ted)224
590 y(to)g(b)o(y)g(some)e(computed)i(address)h(v)n(alue.)k(All)14
b(of)g(the)h(program)e(v)n(ariables)h(to)h(whic)o(h)g(the)224
640 y(address)h(migh)o(t)11 b(p)q(ossibly)j(p)q(oin)o(t)f(m)o(ust)g(b)q
(e)i(allo)q(cated)e(a)h(new)g(v)n(alue)f(n)o(um)o(b)q(er.)287
689 y(There)i(will)e(alw)o(a)o(ys)g(b)q(e)i(cases)h(for)e(whic)o(h)g
(the)h(fron)o(tend)g(is)f(unable)g(to)h(exactly)f(sp)q(ec-)224
739 y(ify)j(whic)o(h)h(v)n(ariables)g(migh)o(t)d(b)q(e)k(the)g(target)f
(of)f(the)i(assignmen)o(t.)29 b(Similarly)l(,)16 b(calls)h(to)224
789 y(unkno)o(wn)12 b(pro)q(cedures)j(m)o(ust)c(b)q(e)i(assumed)f(to)g
(mo)q(dify)e(the)j(v)n(alues)f(of)g(all)f(statically)g(allo-)224
839 y(cated)i(v)n(ariables,)f(and)g(p)q(erhaps)h(ev)o(en)g(lo)q(cal)e
(v)n(ariables)h(whic)o(h)g(ha)o(v)o(e)g(had)g(their)g(addresses)224
889 y(tak)o(en)i(and)g(stored.)287 938 y(T)m(o)g(some)h(exten)o(t)h
(the)g FK(may)g(alias)j FN(information)12 b(dep)q(ends)17
b(on)e(the)h(seman)o(tics)f(of)g(the)224 988 y(source)21
b(language.)34 b(Certainly)19 b(languages)g(whic)o(h)h(allo)o(w)d
(unrestricted)22 b(taking)d(of)g(ad-)224 1038 y(dresses)h(require)f
(more)e(conserv)n(ativ)o(e)h(assumptions)f(than)h(those)g(whic)o(h)g
(prev)o(en)o(t)h(suc)o(h)224 1088 y(practices.)25 b(Nev)o(ertheless,)17
b(for)f(all)e(languages)h(certain)h(general)g(approac)o(hes)g(seem)f(p)
q(os-)224 1138 y(sible.)287 1187 y(The)f(k)o(ey)f(notion)g(is)h(to)f
(separate)i(ev)o(ery)f(logical)e(v)n(ariable)h(in)o(to)g(an)g(iden)o
(tit)o(y)g(whic)o(h)g(is)224 1237 y(unique)j(to)g(that)g(v)n(ariable,)f
(and)g(an)h FK(alias)g(e)n(quivalenc)n(e)h(class)s FN(.)24
b(The)17 b(complexit)o(y)c(of)j(the)224 1287 y(computations)d
(required,)h(dep)q(end)h(on)f(the)h(gran)o(ularit)o(y)d(of)h(the)i(c)o
(hosen)g(classes.)224 1403 y FH(A)k(simple)e(equiv)m(alence)f(class)i
(set)224 1480 y FN(W)m(e)10 b(shall)g(assume)f(that)h(ev)o(ery)h
(memory)d(access)k(b)q(elongs)e(to)g(one)h(of)e(the)i(alias)e(equiv)n
(alence)224 1529 y(classes:)34 b FK(static,)22 b(lo)n(c)n(al)i
FN(and)d FK(unknown)p FN(.)40 b(Static)21 b(v)n(ariables)f(are)h(all)f
(those)h(whic)o(h)g(are)224 1579 y(statically)13 b(allo)q(cated,)f
(while)h(lo)q(cal)f(v)n(ariables)g(and)h(parameters)g(are)h(allo)q
(cated)f(p)q(ositions)224 1629 y(in)f(the)h(stac)o(k)f(frame.)17
b(The)12 b FK(unknown)17 b FN(denotation)11 b(is)h(used)i(for)d(all)g
(memory)f(accesses)15 b(the)224 1679 y(target)i(of)f(whic)o(h)g(is)g
(unkno)o(wn)g(at)g(compile)e(time.)24 b(There)17 b(ma)o(y)d(b)q(e)j
(man)o(y)d(v)n(ariables)i(of)224 1729 y(the)e(\014rst)f(three)h(equiv)n
(alence)f(classes,)h(but)f(there)h(is)f(only)f(one)h(v)n(ariable)e(of)h
(the)i(unkno)o(wn)224 1779 y(class,)g FK(others)s FN(.)287
1828 y(W)m(e)e(ma)o(y)e(no)o(w)i(form)o(ulate)e(rules)j(whic)o(h)g(go)o
(v)o(ern)f(whic)o(h)g(v)n(ariables)g(require)h(new)g(v)n(alue)224
1878 y(n)o(um)o(b)q(ers)h(when)h(an)f(assignmen)o(t)g(is)g(made)f(to)h
(a)g(v)n(ariable)g(of)g(a)g(particular)g(class.)20 b(As)15
b(an)224 1928 y(example)f(consider)h(an)g(assignmen)o(t)f(to)g(a)h
(static)g(v)n(ariable)e FK(fo)n(o)s FN(.)20 b(W)m(e)15
b(ma)o(y)d(conclude,)k(for)224 1978 y(most)d(languages,)f(that)h(an)g
(assignmen)o(t)g(to)g FK(fo)n(o)j FN(will)c(not)h(cause)h(a)f(new)h(v)n
(alue)f(to)g(app)q(ear)224 2028 y(in)g(another)g(static)g(v)n(ariable)e
FK(b)n(ar)t FN(.)18 b(What)12 b(ho)o(w)o(ev)o(er)h(are)g(w)o(e)g(to)g
(mak)o(e)e(of)h(t)o(w)o(o)g(consecutiv)o(e)224 2077 y(accesses)j(to)e
(the)g(same)e(unkno)o(wn)h(v)n(ariable)g(whic)o(h)g(are)h(separated)h
(b)o(y)e(an)g(assignmen)o(t)f(to)224 2127 y(the)k(v)n(ariable)e
FK(fo)n(o)s FN(?)k(Consider)e(|)315 2211 y FF(lw)k(\(v99\),v10)o(0)75
b(;)13 b FE(lo)n(ad)f(value)g(p)n(ointe)n(d)f(to)i(by)g(vR)n(e)n(g)j
FD(99)315 2257 y FF(sw)j(v101,foo)114 b(;)13 b FE(stor)n(e)f(wor)n(d)i
(to)f(variable)h FF(foo)315 2302 y(lw)19 b(\(v99\),v10)o(2)75
b(;)13 b FE(the)f(same)h(value)f(as)h(vR)n(e)n(g)j FD(100?)224
2389 y FN(Unless)f(w)o(e)f(can)f(b)q(e)i(sure)f(that)g
FG(v99)f FN(could)g(not)h(p)q(ossibly)f(p)q(oin)o(t)g(to)h
FK(fo)n(o)s FN(,)e(w)o(e)i(m)o(ust)f(ensure)224 2438
y(that)h(the)h(store)g(giv)o(es)e(the)i FK(others)i FN(v)n(ariable)c(a)
g(new)i(v)n(alue)e(n)o(um)o(b)q(er.)287 2488 y(W)m(e)f(th)o(us)g(ha)o
(v)o(e)g(a)g(rule:)18 b(stores)13 b(to)g(static)f(lo)q(cations)g(do)g
(not)g(a\013ect)h(other)g(static)g(lo)q(ca-)224 2538
y(tions,)f(but)h(do)f(assign)g(a)g(new)h(v)n(alue)e(to)i(v)n(ariables)e
(of)h(the)h(unkno)o(wn)f(class.)18 b(Similarly)l(,)9
b(w)o(e)224 2588 y(conclude)14 b(that)f(pro)q(cedure)i(calls)d(assign)h
(new)g(v)n(alues)g(to)f(all)g(static,)h(lo)q(cal)f(and)h(unkno)o(wn)224
2638 y(v)n(ariables.)k(Con)o(tin)o(uing)11 b(with)h(suc)o(h)h
(reasoning,)f(w)o(e)h(are)g(lead)f(to)g(the)h(table)f(in)g(\014gure)h
(9.4.)224 2688 y(It)h(is)g(left)f(as)h(an)g(exercise)h(to)f(determine)g
(what)f(the)i(mo)q(di\014ed)d(table)i(w)o(ould)f(b)q(e,)h(in)f(cases)p
eop
%%Page: 230 236
230 235 bop 224 274 a FN(230)331 b FL(CHAPTER)14 b(9.)31
b(ST)m(A)m(TIC)14 b(SINGLE)f(ASSIGNMENT)i(F)o(ORM)p 264
392 1361 2 v 263 442 2 50 v 289 427 a FO(Action)p 630
442 V 225 w(E\013ect)p 1624 442 V 264 444 1361 2 v 263
493 2 50 v 289 478 a FN(store)g(to)f(static)p 630 493
V 114 w(that)g(static,)g(and)g(unkno)o(wn)f(class)i(is)f(mo)q(di\014ed)
p 1624 493 V 263 543 V 289 528 a(store)h(to)f(lo)q(cal)p
630 543 V 128 w(that)g(lo)q(cal,)f(and)h(unkno)o(wn)f(class)i(is)e(mo)q
(di\014ed)p 1624 543 V 263 593 V 289 578 a(store)i(to)f(unkno)o(wn)p
630 593 V 49 w(all)f(classes)i(are)g(mo)q(di\014ed)p
1624 593 V 263 643 V 289 628 a(pro)q(cedure)h(call)p
630 643 V 110 w(all)d(classes)i(are)g(mo)q(di\014ed)p
1624 643 V 264 645 1361 2 v 379 761 a(Figure)f(9.4:)j(Alias)c(rules)h
(for)g(simple)e(alias)h(equiv)n(alence)h(class)h(mo)q(del)224
899 y(where)21 b(it)d(is)h(kno)o(wn)g(whic)o(h)g(lo)q(cal)f(v)n
(ariables)h(and)g(parameters)g(ha)o(v)o(e)g(their)g(addresses)224
949 y(tak)o(en.)f(Similarly)l(,)10 b(kno)o(wing)h(whic)o(h)i
(statically)f(allo)q(cated)g(v)n(ariables)g(are)h(exp)q(orted)h(from)
224 998 y(the)f(mo)q(dule)d(b)q(eing)i(compiled)e(ma)o(y)g(limit)f(the)
j(n)o(um)o(b)q(er)f(of)h(v)n(ariables)f(whic)o(h)g(are)i(though)o(t)224
1048 y(to)h(b)q(e)h(threatened)g(b)o(y)f(out-of-mo)q(dule)d(pro)q
(cedure)16 b(calls.)224 1201 y FI(9.3)67 b(T)-6 b(ransforming)23
b(bac)n(k)g(to)f(ordinary)i(co)r(de)224 1297 y FN(In)14
b(order)g(to)g(transform)e(bac)o(k)i(in)o(to)f(ordinary)g(co)q(de)i(w)o
(e)f(m)o(ust)e(remo)o(v)o(e)h(the)h(\010)g(functions,)224
1347 y(whic)o(h)i(do)g(not)g(corresp)q(ond)i(to)e(normal)e
(instructions)i(in)g(the)h(instructions)f(sets)i(of)d(our)224
1397 y(target)k(mac)o(hines.)29 b(What)18 b(m)o(ust)f(b)q(e)h(done)g
(is)g(to)g(break)g(the)h(functions)f(in)o(to)f(separate)224
1446 y(v)n(alue-to-v)n(alue)10 b(copies)h(whic)o(h)g(are)g(propagated)g
(bac)o(k)f(to)h(eac)o(h)g(of)f(the)i(predecessor)h(no)q(des)224
1496 y(of)f(the)i(merge)e(no)q(de.)18 b(W)m(e)12 b(m)o(ust)g(then)h
(allo)q(cate)f(memory)e(or)j(register)g(lo)q(cations)g(for)f(eac)o(h)
224 1546 y(of)i(the)g(v)n(ariables.)287 1599 y(It)g(ma)o(y)f(b)q(e)i
(noted)g(that)g(w)o(e)g(cannot)g(simply)d(assume)j(that)f(ev)o(ery)i
(instance)f(of)f(\(sa)o(y\))224 1648 y(v)n(ariable)g
FM(a)g FN(ma)o(y)e(b)q(e)j(simply)e(allo)q(cated)g(the)i(lo)q(cation)f
(of)f(the)i(original)e(v)n(ariable)g FM(a)p FN(.)19 b(This)224
1698 y(is)f(b)q(ecause)i(the)e(optimizations)d(p)q(erformed)j(on)g(the)
g FK(SSA)g FN(ma)o(y)e(ha)o(v)o(e)i(o)o(v)o(erlapp)q(ed)g(the)224
1748 y(lifetimes)f(of)g(what)h(w)o(ere)g(originally)e(distinct)i(v)o
(ersions)g(of)g(the)g(same)f(v)n(ariable.)29 b(Th)o(us)224
1798 y(w)o(e)17 b(m)o(ust)e(p)q(erform)g(a)g(prop)q(er)i(\\graph)f
(coloring")f(allo)q(cation)f(of)h(lo)q(cations)h(or)g(registers)224
1848 y(for)f(the)h(v)n(ariable)e(instances.)23 b(The)16
b(tec)o(hniques)g(for)f(doing)f(this)i(are)f(the)h(same)e(as)i(those)
224 1898 y(used)f(for)f(mo)q(dern)f(tec)o(hniques)i(of)e(register)i
(allo)q(cation,)d(and)h(are)i(describ)q(ed)g(in)f(detail)f(in)224
1947 y(c)o(hapter)i(10.)224 2100 y FI(9.4)67 b(Simple)24
b(optimizations)g(based)e(on)g(SSA)224 2204 y FH(9.4.1)56
b(Constan)n(t)19 b(propagation)224 2286 y FN(If)c(a)f(v)n(ariable)g(in)
g FK(SSA)i FN(form)d(is)h(de\014ned)i(b)o(y)f(a)f(constan)o(t)i
(expression,)f(then)h(the)f(v)n(alue)f(is)224 2336 y(constan)o(t)k(ev)o
(erywhere,)i(and)d(all)e(uses)k(of)d(the)i(v)n(alue)f(can)g(b)q(e)h
(replaced)g(b)o(y)f(uses)h(of)f(the)224 2386 y(constan)o(t.)i(This)13
b(ma)o(y)e(lead)j(to)f(simply)e(b)q(etter)k(co)q(de,)f(or)f(p)q(erhaps)
i(to)e(the)h(recognition)f(of)224 2436 y(the)j(p)q(ossibilit)o(y)e(for)
h(constan)o(t)h(expression)h(folding.)j(This)15 b(in)g(turn)h(ma)o(y)d
(lead)i(either)h(to)224 2485 y(further)h(constan)o(t)g(propagation,)e
(or)g(ev)o(en)i(to)f(dead)g(co)q(de)h(elimination)c(if)i(the)h(result)h
(of)224 2535 y(conditional)c(branc)o(hes)i(can)f(b)q(e)h(computed)e(at)
h(compile)e(time.)287 2588 y(The)i(data)f(necessary)j(to)d(supp)q(ort)i
(simple)d(constan)o(t)i(propagation)f(in)o(v)o(olv)o(es)f(the)j(ad-)224
2638 y(dition)i(of)g(a)h(t)o(w)o(o)f(new)h(\014elds)g(to)g(the)g(p)q
(er-v)n(alue)g(data)g(structure.)31 b(These)19 b(\014elds)f(are)h(a)224
2688 y(Bo)q(olean)14 b FK(isConst)k FN(and)13 b(the)i(constan)o(t)f(v)n
(alue)f(itself.)p eop
%%Page: 231 237
231 236 bop 224 274 a FL(9.4.)31 b(SIMPLE)15 b(OPTIMIZA)m(TIONS)g
(BASED)f(ON)g(SSA)441 b FN(231)287 390 y(W)m(e)15 b(p)q(erform)g(a)g
(sym)o(b)q(olic)f(execution)i(of)f(the)i(co)q(de)f(starting)g(from)e
(the)i(start)g(no)q(de,)224 440 y(and)c(w)o(orking)f(our)h(w)o(a)o(y)g
(do)o(wn)g(to)f(the)i(end)g(no)q(de.)18 b(Blo)q(c)o(ks)12
b(need)h(to)f(b)q(e)h(pro)q(cessed)h(in)e(top-)224 490
y(do)o(wn)f(order)i(in)e(the)h(dominator)d(tree)k(\(or)e(equiv)n(alen)o
(tly)m(,)f(in)h(rev)o(erse)i(p)q(ost-order\),)g(so)e(that)224
540 y(if)i(a)h(v)n(alue)e(has)i(b)q(een)h(assigned)f(a)f(constan)o(t)h
(v)n(alue)f(further)i(up)f(the)g(con)o(trol)f(\015o)o(w)g(then)i(it)224
590 y(will)g(b)q(e)i(guaran)o(teed)f(to)g(b)q(e)h(already)e(noted)i(as)
f(suc)o(h)h(in)e(the)i(v)n(alue)e(table.)24 b(During)16
b(the)224 640 y(sym)o(b)q(olic)e(execution,)h(w)o(e)h(consider)g(eac)o
(h)f(op)q(eration.)22 b(If)14 b(it)h(is)g(a)g(computation)e(en)o
(tirely)224 689 y(on)h(constan)o(ts)h(w)o(e)f(can)g(compute)f(the)h(v)n
(alue)f(at)h(compile)e(time,)g(and)i(en)o(ter)h(the)f(result)h(in)224
739 y(the)j(v)n(alue)f(table.)28 b(If)17 b(a)g(computation)e(in)o(v)o
(olv)o(es)i(a)g(constan)o(t,)h(and)f(it)g(is)g(adv)n(an)o(tageous)224
789 y(to)f(do)g(so,)g(w)o(e)g(c)o(hange)g(the)h(instruction)f(to)g(use)
h(the)f(literal)f(constan)o(t)i(rather)g(than)f(the)224
839 y(virtual)d(register.)287 890 y(In)18 b(general)h(w)o(e)g(do)g(not)
f(remo)o(v)o(e)g(instructions)h(whic)o(h)g(load)e(constan)o(t)j(v)n
(alues)e(in)o(to)224 939 y(virtual)c(registers,)h(since)h(there)f(ma)o
(y)e(b)q(e)i(later)f(instructions)h(for)f(whic)o(h)g(w)o(e)h(decide)g
(that)224 989 y(the)d(direct)g(use)g(of)e(the)i(literal)e(is)h(not)g
(justi\014ed,)g(or)g(is)g(not)g(p)q(ossible.)17 b(This)11
b(migh)o(t)e(happ)q(en,)224 1039 y(for)19 b(example,)f(if)f(a)i(mac)o
(hine)e(has)h(an)h(instruction)g(set)g(whic)o(h)g(do)q(es)g(not)f(allo)
o(w)f(literal)224 1089 y(op)q(erands)f(for)e(some)g(instructions.)20
b(It)15 b(do)q(es)g(no)g(harm)e(to)h(lea)o(v)o(e)g(the)i(instruction)e
(whic)o(h)224 1139 y(loads)h(a)h(literal)e(in)o(to)h(a)g(virtual)g
(register,)i(since)f(if)f(all)f(uses)j(of)e(the)h(register)h(manage)c
(to)224 1188 y(use)i(the)f(literal)e(instead,)i(then)g(the)g(load)f
(instruction)h(b)q(ecomes)f(dead)h(co)q(de)g(and)g(will)e(b)q(e)224
1238 y(detected)k(and)e(remo)o(v)o(ed)f(during)h(liv)o(e)f(register)i
(analysis.)224 1360 y FH(9.4.2)56 b(Dead)18 b(co)r(de)g(elimination)224
1438 y FN(Since)e(the)g FK(SSA)g FN(form)e(has)i(pro)o(vided)f
(accurate)i(information)12 b(relating)j(de\014nitions)g(and)224
1488 y(uses,)c(w)o(e)f(ma)o(y)d(accurately)j(determine)g(those)g
(de\014nitions)f(whic)o(h)g(are)h(un)o(used)g(and)f(remo)o(v)o(e)224
1538 y(them.)22 b(The)16 b(remo)o(v)n(al)e(of)h(un)o(used)h
(de\014nitions)f(of)g(virtual)g(registers)i(is)e(one)h(of)f(the)h
(side-)224 1588 y(issues)f(in)f(register)h(allo)q(cation.)287
1638 y(The)i(standard)f(algorithm)e(for)i(placing)g(\010)g(functions)h
(can)g(sometimes)d(place)j(these)224 1688 y(in)e(merge)f(blo)q(c)o(ks)g
(where)i(the)f(left-hand-side)g(v)n(ariable)e(is)i(not)f(used.)22
b(If)14 b(suc)o(h)h(functions)224 1738 y(are)i(not)f(remo)o(v)o(ed,)g
(they)h(will)e(place)h(an)g(extra)h(constrain)o(t)f(on)h(the)f
(register)i(allo)q(cation)224 1788 y(pro)q(cess.)h(Consider)10
b(\014gure)g(9.2)f(bac)o(k)h(on)f(page)h(226.)16 b(After)10
b(this)g(fragmen)o(t)e(is)i(transformed)224 1838 y(bac)o(k)j(in)o(to)g
(standard)g(form,)e(the)j(register)g(allo)q(cator)e(will)f(try)i(to)g
(place)g FM(a)1395 1844 y Fz(1)1427 1838 y FN(and)g FM(a)1529
1844 y Fz(2)1560 1838 y FN(in)g(the)224 1888 y(same)f(register.)18
b(This)12 b(constrain)o(t)h(mak)o(es)e(register)i(allo)q(cation)e(more)
g(di\016cult,)g(but)i(sa)o(v)o(es)224 1937 y(a)h(register)h(to)f
(register)h(cop)o(y)f(on)f(at)h(least)g(one)g(of)g(the)g(merging)e(con)
o(trol)i(paths.)k(If)c(there)224 1987 y(is)i(no)f(use)i(for)e
FM(a)488 1993 y Fz(3)506 1987 y FN(,)h(then)g(w)o(e)g(should)f(lik)o(e)
g(to)g(remo)o(v)o(e)g(the)h(\010)f(function)h(either)g(b)q(efore)g(or)
224 2037 y(during)g(register)g(allo)q(cation.)21 b(Once)c(the)f
(function)f(is)g(remo)o(v)o(ed,)g(the)h(register)g(allo)q(cator)224
2087 y(has)e(the)h(freedom)e(to)h(place)g FM(a)707 2093
y Fz(1)739 2087 y FN(and)g FM(a)842 2093 y Fz(2)874 2087
y FN(in)g(di\013eren)o(t)h(registers.)287 2138 y(As)e(a)g(result)h(of)f
(constan)o(t)h(propagation,)e(it)h(is)g(sometimes)e(p)q(ossible)j(to)f
(compute)g(the)224 2187 y(direction)k(of)e(conditional)g(branc)o(hes)i
(at)f(compile)f(time.)23 b(In)16 b(suc)o(h)h(cases,)g(whole)f(blo)q(c)o
(ks)224 2237 y(of)j(co)q(de)h(ma)o(y)e(b)q(e)i(found)e(to)i(b)q(e)f
(dead.)35 b(If)19 b(this)g(is)g(the)h(case,)i(there)e(ma)o(y)e(b)q(e)h
(further)224 2287 y(consequen)o(tial)c(c)o(hanges,)f(including)f
(further)h(constan)o(t)h(propagation.)287 2338 y(In)j(fact,)g(the)h(p)q
(ossibilit)o(y)e(of)g(remo)o(ving)f(whole)i(blo)q(c)o(ks)g(of)g(co)q
(de)h(suggests)g(that)f(w)o(e)224 2388 y(migh)o(t)d(b)q(ene\014cially)i
(adopt)f(a)h(more)f(exact)h(approac)o(h)g(to)g(constan)o(t)g
(propagation.)26 b(F)m(or)224 2437 y(the)14 b(naiv)o(e)e(algorithm)d
(suggested)14 b(ab)q(o)o(v)o(e,)e(a)h(single)f(pass)h(o)o(v)o(er)f(the)
i(co)q(de)f(marks)e(all)h(those)224 2487 y(v)n(alues)h(whic)o(h)h(are)f
(kno)o(wn)g(to)g(b)q(e)h(constan)o(ts.)19 b(A)13 b(v)n(alue)g(is)g(kno)
o(wn)g(to)g(b)q(e)h(a)e(constan)o(t)i(if)f(it)224 2537
y(has)h(a)g(constan)o(t)g(expression)i(assigned)e(to)f(it.)287
2588 y(A)g(b)q(etter)j(algorithm)11 b(w)o(ould)i(allo)o(w)f(the)i(p)q
(ossibilit)o(y)f(that)g(an)h(expression)h(computed)224
2638 y(b)o(y)i(a)g(\010)h(function)f(migh)o(t)e(still)h(b)q(e)i(a)f
(constan)o(t,)h(either)g(b)q(ecause)h(the)f(v)n(alue)f(computed)224
2688 y(along)12 b(ev)o(ery)h(incoming)d(path)j(is)f(the)h(same,)f(or)g
(b)q(ecause)i(all)e(paths)g(except)i(one)f(are)g(dead)p
eop
%%Page: 232 238
232 237 bop 224 274 a FN(232)331 b FL(CHAPTER)14 b(9.)31
b(ST)m(A)m(TIC)14 b(SINGLE)f(ASSIGNMENT)i(F)o(ORM)224
390 y FN(co)q(de.)23 b(Instead)16 b(of)e(a)h(Bo)q(olean)g(attribute)h
FK(isConst)p FN(,)e(w)o(e)i(de\014ne)g(a)f(mathematical)c(lattice)224
440 y(with)18 b(three)g(p)q(ossible)g(v)n(alue)f(mark)o(ers)g
Ft(>)p FM(;)7 b FK(c)n(onst)o FN(,)17 b(and)h Ft(?)p
FN(.)28 b(The)17 b(v)n(alue)g Ft(>)p FN(,)g(pronounced)224
490 y(\\top",)c(means)f FK(unknown)p FN(,)i(and)f Ft(?)p
FN(,)g(pronounced)h(\\b)q(ottom",)d(means)h FK(not-c)n(onstant)p
FN(.)19 b(Ini-)224 540 y(tially)m(,)10 b(ev)o(ery)j(v)n(alue's)f
(attribute)g(is)g(set)h(to)f Ft(>)p FN(,)g(and)g(the)g(attribute)h(v)n
(alues)f(get)g(lo)o(w)o(ered)h(b)o(y)224 590 y(a)h(classic)g(w)o
(orklist)f(algorithm.)287 640 y(The)h(seman)o(tics)f(of)g(ordinary)g
(expressions)i(for)f(v)n(alues)f(from)f(this)i(v)n(alue)f(domain)e(are)
224 689 y(de\014ned)i(b)o(y)e(the)h(follo)o(wing)c(\\m)o(ultiplicatio)o
(n)h(table",)i(where)h FK(op)i FN(is)d(an)o(y)g(in\014x)g(op)q(erator)h
(|)p 683 742 524 2 v 682 791 2 50 v 708 776 a FM(a)f
FK(op)k FM(b)p 840 791 V 79 w Ft(>)80 b FK(c)n(onst)50
b Ft(?)p 1206 791 V 683 793 524 2 v 682 843 2 50 v 746
828 a(>)p 840 843 V 116 w(>)80 b FK(c)n(onst)50 b Ft(?)p
1206 843 V 682 893 V 716 878 a FK(c)n(onst)p 840 893
V 57 w(c)n(onst)h(c)n(onst)f Ft(?)p 1206 893 V 682 942
V 746 927 a(?)p 840 942 V 116 w(?)110 b(?)79 b(?)p 1206
942 V 683 944 524 2 v 224 1018 a FN(F)m(or)12 b(example,)f(when)h(a)g
Ft(>)f FN(v)n(alue)h(is)f(added)i(to)f(a)f FK(c)n(onst)17
b FN(v)n(alue)11 b(the)i(result)f(is)g(\(for)g(the)h(time)224
1067 y(b)q(eing\))f(still)f FK(c)n(onst)t FN(.)17 b(As)12
b(the)g(w)o(orklist)f(algorithm)e(iterates,)k(if)e(either)h(of)f(the)h
(input)g(v)n(alues)224 1117 y(gets)j(lo)o(w)o(ered,)f(a)f(new)h(result)
h(is)f(obtained.)287 1167 y(The)j(seman)o(tics)f(of)f(the)i(\010)g
(functions)f(applied)g(to)g(this)h(v)n(alue)f(domain)e(are)j(sligh)o
(tly)224 1217 y(di\013eren)o(t,)f(since)g(these)h(functions)e(do)g(not)
f(com)o(bine)g(their)i(op)q(erands)g(in)e(the)i(same)e(w)o(a)o(y)224
1267 y(as)i(the)f(arithmetic)f(functions.)22 b(The)15
b(table)g(corresp)q(onding)h(to)f(a)g(binary)g(\010)g(function)f(is)224
1317 y(de\014ned)h(as)f(follo)o(ws)f(|)p 664 1361 561
2 v 663 1410 2 50 v 689 1395 a(\010\()p FM(a;)7 b(b)p
FN(\))p 834 1410 V 80 w Ft(>)91 b FK(c)n(onst)62 b Ft(?)p
1224 1410 V 664 1412 561 2 v 663 1462 2 50 v 733 1447
a(>)p 834 1462 V 124 w(>)91 b FK(c)n(onst)62 b Ft(?)p
1224 1462 V 663 1512 V 703 1497 a FK(c)n(onst)p 834 1512
V 65 w(c)n(onst)50 b Fz(see)11 b(note)49 b Ft(?)p 1224
1512 V 663 1562 V 733 1547 a(?)p 834 1562 V 124 w(?)121
b(?)91 b(?)p 1224 1562 V 664 1563 561 2 v 287 1634 a
FN(The)13 b(sp)q(ecial)g(case)h(arises)g(if)e(b)q(oth)i(incoming)c(v)n
(alues)j(are)h(constan)o(t.)k(In)13 b(that)g(case)h(w)o(e)224
1684 y(ha)o(v)o(e)g(the)h(result)f(|)511 1787 y(\010\()p
FK(c)n(onst)t FM(;)7 b FK(c)n(onst)t FN(\))12 b(=)839
1728 y Fd(\032)891 1762 y FK(c)n(onst)42 b FN(if)13 b(consts)i(are)f
(equal)891 1811 y Ft(?)101 b FN(otherwise)287 1898 y(These)21
b(are)g(optimistic)e(de\014nitions.)37 b(W)m(e)21 b(do)f(not)g(accept)i
(that)e(a)h(v)n(alue)e(is)i(non-)224 1947 y(constan)o(t)c(un)o(til)e(w)
o(e)h(actually)f(kno)o(w)g(that)h(t)o(w)o(o)f(di\013eren)o(t)i(v)n
(alues)e(merge)h(at)f(that)h(p)q(oin)o(t,)224 1997 y(or)e(one)g(of)g
(the)g(incoming)e(argumen)o(ts)h(is)h(de\014nitely)g(non-constan)o(t.)
287 2047 y FG(<How)21 b(much)g(detail)f(do)i(we)f(want)g(to)g(give)g
(of)h(the)f(worklist)f(algorithm?>)224 2163 y FH(9.4.3)56
b(Global)18 b(common)e(sub)r(expression)h(elimination)224
2239 y FN(The)12 b(tec)o(hniques)f(for)g(global)e(common)f(sub)q
(expression)k(elimination,)c(b)q(ecome)i(essen)o(tially)224
2289 y(iden)o(tical)k(to)f(those)i(used)g(for)e(lo)q(cal)g
FK(CSE)19 b FN(elimination,)11 b(giv)o(en)i(the)i FK(SSA)f
FN(prop)q(ert)o(y)m(.)287 2339 y(In)f(particular,)g(w)o(e)h(ma)o(y)e
(con)o(v)o(ert)i FK(V)l(AL)f FN(in)o(to)g FK(SSA)q FN(,)g(and)g(then)i
(p)q(erform)d(global)g(elim-)224 2389 y(ination)19 b(using)h(the)g
(same)f(tec)o(hniques)i(as)f(used)h(in)e(the)h(lo)q(cal)f(case.)37
b(Ev)o(en)20 b(the)h(data)224 2438 y(structures)15 b(are)e(essen)o
(tially)g(the)g(same)e(as)i(those)g(used)g(in)f(the)h(lo)q(cal)f(case.)
19 b(A)12 b(v)n(alue)g(n)o(um-)224 2488 y(b)q(er)k(table)e(is)g
(required,)i(and)e(a)g(hash)h(table)f(to)g(lo)q(okup)g(the)h(tuples)g
(of)f(the)h(instructions,)224 2538 y(so)f(as)g(to)g(determine)g(if)f
(the)h(computation)f(has)h(b)q(een)h(p)q(erformed)e(b)q(efore.)287
2588 y(W)m(e)i(p)q(erform)g(a)g(sym)o(b)q(olic)f(execution)i(of)f(the)i
(co)q(de)f(starting)g(from)e(the)i(start)g(no)q(de,)224
2638 y(and)i(w)o(orking)f(our)g(w)o(a)o(y)g(do)o(wn)h(to)f(the)i(end)f
(no)q(de.)30 b(Blo)q(c)o(ks)18 b(need)h(to)e(b)q(e)i(pro)q(cessed)h(in)
224 2688 y(top-do)o(wn)e(order)i(in)e(the)h(dominator)d(tree)k(\(or)f
(equiv)n(alen)o(tly)e(in)h(rev)o(erse)j(p)q(ost-order\),)p
eop
%%Page: 233 239
233 238 bop 224 274 a FL(9.4.)31 b(SIMPLE)15 b(OPTIMIZA)m(TIONS)g
(BASED)f(ON)g(SSA)441 b FN(233)p 435 390 241 4 v 435
546 4 157 v 672 546 V 435 549 241 4 v 279 702 V 279 859
4 157 v 516 859 V 279 862 241 4 v 591 702 V 591 859 4
157 v 828 859 V 591 862 241 4 v 1059 390 V 1059 546 4
157 v 1296 546 V 1059 549 241 4 v 1371 390 V 1371 546
4 157 v 1608 546 V 1371 549 241 4 v 1215 702 V 1215 859
4 157 v 1452 859 V 1215 862 241 4 v 495 588 a FC(\001)474
630 y(\001)454 671 y(\001)438 702 y(\001)-21 b(\013)594
588 y(A)615 630 y(A)635 671 y(A)651 702 y(A)g(U)1218
588 y(A)1239 630 y(A)1259 671 y(A)1275 702 y(A)g(U)1431
588 y(\001)1410 630 y(\001)1390 671 y(\001)1374 702 y(\001)g(\013)477
449 y FN(blo)q(c)o(k)13 b(1)321 761 y(blo)q(c)o(k)g(2)182
b(blo)q(c)o(k)13 b(3)1101 449 y(blo)q(c)o(k)g(4)182 b(blo)q(c)o(k)13
b(5)1257 761 y(blo)q(c)o(k)g(6)457 507 y Ft(\001)7 b(\001)g(\001)f
FN(\()p FM(a)551 513 y Fz(1)579 507 y FN(+)j FM(b)638
513 y Fz(2)657 507 y FN(\))609 819 y Ft(\001)e(\001)g(\001)f
FN(\()p FM(a)703 825 y Fz(1)731 819 y FN(+)j FM(b)790
825 y Fz(2)809 819 y FN(\))1081 507 y Ft(\001)e(\001)g(\001)f
FN(\()p FM(a)1175 513 y Fz(3)1203 507 y FN(+)j FM(b)1262
513 y Fz(4)1281 507 y FN(\))96 b Ft(\001)7 b(\001)g(\001)f
FN(\()p FM(a)1487 513 y Fz(3)1515 507 y FN(+)j FM(b)1574
513 y Fz(4)1593 507 y FN(\))1237 819 y Ft(\001)e(\001)g(\001)f
FN(\()p FM(a)1331 825 y Fz(3)1359 819 y FN(+)j FM(b)1418
825 y Fz(4)1437 819 y FN(\))473 991 y(Figure)14 b(9.5:)j(Global)12
b(common)g(sub)q(expression)j(examples)224 1211 y(so)j(that)g(if)f(a)h
(v)n(alue)f(has)h(b)q(een)h(computed)e(further)i(up)f(the)g(con)o(trol)
f(\015o)o(w)h(then)g(it)g(will)224 1261 y(b)q(e)g(guaran)o(teed)f(to)f
(b)q(e)i(already)e(in)g(the)i(table.)26 b(Note)17 b(a)g(small)d
(di\013erence)k(ho)o(w)o(ev)o(er,)g(in)224 1311 y(that)13
b(if)g(an)f(instruction)i(is)f(found)f(to)h(b)q(e)h(presen)o(t)g
(already)f(in)g(the)g(table)g(then)h(w)o(e)f(cannot)224
1361 y(immediately)8 b(conclude)j(that)g(the)h(computation)d(is)i
(redundan)o(t.)18 b(It)11 b(will)e(b)q(e)j(redundan)o(t)f(if)224
1411 y(the)h(previous)g(computation)e(w)o(as)h(p)q(erformed)g(in)g(a)g
(blo)q(c)o(k)g(whic)o(h)g(dominates)f(the)i(curren)o(t)224
1460 y(blo)q(c)o(k.)21 b(Ho)o(w)o(ev)o(er,)15 b(it)f(is)h(p)q(ossible)g
(that)g(in)f(the)i(order)f(that)g(the)g(blo)q(c)o(ks)g(are)g(pro)q
(cessed)j(a)224 1510 y(computation)10 b(will)g(b)q(e)h(rep)q(eated)i
(in)e(t)o(w)o(o)g(no)q(des)h(neither)g(of)e(whic)o(h)h(dominates)f(the)
i(other.)224 1560 y(In)i(suc)o(h)h(a)f(case)g(neither)h(computation)d
(is)i(redundan)o(t.)287 1654 y(Consider)f(the)h(left)g(hand)f(side)h
FK(CF)o(G)i FN(fragmen)o(t)c(in)h(\014gure)h(9.5.)j(In)c(this)h
(example)e(the)224 1703 y(v)n(alue)g(of)g FM(a)398 1709
y Fz(1)423 1703 y FN(+)6 b FM(b)479 1709 y Fz(2)511 1703
y FN(computed)12 b(in)g(blo)q(c)o(k)g(1)g(need)h(not)g(b)q(e)g
(recomputed)g(in)f(blo)q(c)o(k)g(3.)17 b(W)m(e)12 b(see)224
1753 y(that)j(this)f(is)g(the)g(case,)h(since)g(the)f(expression)i
(uses)f(the)g(same)e(renamed)g FK(SSA)i FN(v)n(ariables)224
1803 y(\()p FM(a)262 1809 y Fz(1)295 1803 y FN(and)f
FM(b)394 1809 y Fz(2)412 1803 y FN(\),)g(and)f(blo)q(c)o(k)h(1)f
(dominates)g(blo)q(c)o(k)h(3.)287 1897 y(No)o(w)k(consider)i(the)f
(righ)o(t)g(hand)f(side)h(of)g(\014gure)g(9.5,)g(and)f(supp)q(ose)i
(that)f(blo)q(c)o(k)g(4)224 1946 y(has)e(b)q(een)h(pro)q(cessed)h
(\014rst)e(in)f(the)h(rev)o(erse)i(p)q(ost-order)e(tra)o(v)o(ersal.)26
b(In)17 b(this)f(case)i(when)224 1996 y(w)o(e)d(\014nd)g(the)g
(expression)h FM(a)665 2002 y Fz(3)693 1996 y FN(+)10
b FM(b)753 2002 y Fz(4)787 1996 y FN(in)k(blo)q(c)o(k)g(5)g(w)o(e)h
(will)e(\014nd)i(the)g(tuple)g(already)g(en)o(tered)224
2046 y(in)o(to)h(the)h(v)n(alue)f(table.)26 b(Ho)o(w)o(ev)o(er,)17
b(w)o(e)g(will)e(\014nd)i(that)g(the)g(de\014nition)f(of)g(the)h
(previous)224 2096 y(computation)10 b(is)h(in)f(blo)q(c)o(k)h(4,)g
(whic)o(h)g(do)q(es)h(not)f(dominate)e(the)j(curren)o(t)g(blo)q(c)o(k.)
17 b(Therefore)224 2146 y(w)o(e)e(conclude)f(that)g(the)h(computation)d
(in)h(blo)q(c)o(k)h(5)f(is)h(not)g(redundan)o(t.)287
2239 y(Finally)m(,)e(w)o(e)j(note)h(that)f FK(SSA)g FN(metho)q(d)f(of)h
(computing)e(global)g(common)f(sub)q(expres-)224 2289
y(sions)21 b(is)g(w)o(eak)o(er)g(than)g(the)g(classical)f(metho)q(d)g
(describ)q(ed)j(in)d(section)i(8.2.3.)36 b(If)21 b(the)224
2339 y(expression)e FM(a)450 2345 y Fz(3)480 2339 y FN(+)11
b FM(b)541 2345 y Fz(4)577 2339 y FN(w)o(as)17 b(computed)g(in)f(blo)q
(c)o(k)h(6)g(in)g(\014gure)g(9.5)f(then)i(our)f FK(SSA)q
FN(-based)224 2389 y(algorithm)c(w)o(ould)h(conclude)i(that)f(the)h
(computation)d(in)i(blo)q(c)o(k)f(6)h(w)o(as)g(not)g(redundan)o(t.)224
2438 y(This)h(is)g(b)q(ecause)i(w)o(e)e(w)o(ould)f(\014nd)h(that)g
(although)g(the)g(computation)e(had)i(b)q(een)h(previ-)224
2488 y(ously)f(en)o(tered)h(in)o(to)e(the)h(v)n(alue)f(table,)h(it)f
(had)h(not)f(b)q(een)i(computed)e(in)h(a)f(blo)q(c)o(k)g(whic)o(h)224
2538 y(dominates)e(the)h(curren)o(t)h(blo)q(c)o(k.)j(In)13
b(the)h(metho)q(d)f(of)g(section)h(8.2.3,)e(w)o(e)i(w)o(ould)f(ha)o(v)o
(e)g(de-)224 2588 y(termined)g(that)h FM(a)8 b FN(+)h
FM(b)k FN(w)o(as)g FK(available)k FN(at)c(the)h(en)o(try)g(to)g(blo)q
(c)o(k)f(6,)f(that)i(the)g(computation)224 2638 y(in)h(blo)q(c)o(k)g(6)
g(w)o(as)g FK(lo)n(c)n(al)r(ly)g(anticip)n(atible)s FN(,)g(and)g(hence)
i(that)e(the)h(computation)d(in)i(blo)q(c)o(k)g(6)224
2688 y(w)o(as)f(redundan)o(t.)p eop
%%Page: 234 240
234 239 bop 224 274 a FN(234)331 b FL(CHAPTER)14 b(9.)31
b(ST)m(A)m(TIC)14 b(SINGLE)f(ASSIGNMENT)i(F)o(ORM)224
390 y FI(9.5)67 b(Lo)r(op-in)n(v)l(arian)n(t)25 b(co)r(de)d(motion)224
492 y FN(Throughout)11 b(this)h(section)f(and)g(the)h(next)g(w)o(e)f
(refer)h(to)f(the)h(example)e(of)g(the)i(nested)h(lo)q(ops)224
542 y(whic)o(h)k(arise)h(in)f(matrix)e(m)o(ultiplicati)o(on.)25
b(Figure)17 b(9.6)f(is)h(the)h(con)o(v)o(en)o(tional)e(co)q(ding)h(of)
224 592 y(the)e(algorithm,)10 b(whic)o(h)k(m)o(ultipli)o(es)e(an)h(\()p
FM(l)d Ft(\002)f FM(m)p FN(\))14 b(matrix)e FM(a)h FN(b)o(y)h(the)g(\()
p FM(m)9 b Ft(\002)g FM(n)p FN(\))k(matrix)f FM(b)h FN(to)224
642 y(pro)q(duce)k(a)f(\()p FM(l)c Ft(\002)f FM(n)p FN(\))k(pro)q(duct)
i(matrix)d FM(c)p FN(.)40 b(W)m(e)15 b(shall)g(assume)g(that)h(the)h(b)
q(ounds)f FM(l)q(;)7 b(m;)g(n)p 329 756 1231 2 v 328
802 2 46 v 431 788 a FF(FOR)19 b(i)g(:=)g(0)g(TO)g(l)g(DO)p
1560 802 V 328 848 V 482 834 a(FOR)g(j)g(:=)g(0)g(TO)g(n)g(DO)p
1560 848 V 328 893 V 521 880 a(t)g(:=)g(0.0;)p 1560 893
V 328 939 V 521 925 a(FOR)f(k)h(:=)g(0)g(TO)g(m)h(DO)p
1560 939 V 328 985 V 559 971 a(t)f(:=)g(t)g(+)h(a[i.k])d(*)i(b[k,j];)p
1560 985 V 328 1030 V 521 1017 a(END;)p 1560 1030 V 328
1076 V 521 1062 a(c[i,j])e(:=)i(t;)p 1560 1076 V 328
1122 V 482 1108 a(END;)p 1560 1122 V 328 1167 V 431 1154
a(END;)p 1560 1167 V 329 1169 1231 2 v 541 1285 a FN(Figure)14
b(9.6:)j(Matrix)c(m)o(ultiplication)e(algorithm)224 1394
y(are)k(not)f(kno)o(wn)f(at)h(compile)e(time.)287 1450
y(When)i(this)g(algorithm)d(is)i(con)o(v)o(erted)i(in)o(to)e
FK(SSA)q FN(-form,)e(the)k(innermost)e(lo)q(op,)f(whic)o(h)224
1499 y(con)o(tains)21 b(t)o(w)o(o)f(basic)g(blo)q(c)o(ks,)i(migh)o(t)c
(app)q(ear)j(as)f(in)g(\014gure)h(9.7.)36 b(Note)21 b(that)f(in)g(this)
224 1549 y(\014gure,)14 b(in)g(the)g(in)o(terests)i(of)d(simplicit)o(y)
m(,)d(the)15 b(address)g(expressions)g(ha)o(v)o(e)f(not)g(b)q(een)h
(fully)224 1599 y(expanded)h(in)o(to)e FK(V)l(AL)p FN(.)f(In)i(this)f
(\014gure,)h FM(v)887 1605 y FB(xN)952 1599 y FN(denotes)h(the)f
(virtual)f(register)h(holding)f(the)p 296 1712 1298 2
v 295 1761 2 50 v 321 1746 a FG(lab1:)696 b FN(;)14 b
FK(lo)n(op)h(lab)n(el)p 1593 1761 V 295 1811 V 480 1796
a FM(v)500 1802 y FB(k)q Fz(2)549 1796 y FN(:=)c FM(v)624
1802 y FB(k)q Fz(1)670 1796 y FN(+)f(1)394 b(;)14 b FK(incr)n(ement)g
(lo)n(op)h(c)n(ounter)p 1593 1811 V 295 1861 V 321 1846
a FG(lab2:)696 b FN(;)14 b FK(lo)n(op)h(entry)g(lab)n(el)p
1593 1861 V 295 1911 V 480 1896 a FM(v)500 1902 y FB(k)q
Fz(1)549 1896 y FN(:=)c(\010\()p FM(v)670 1902 y FB(k)q
Fz(0)707 1896 y FM(;)c(v)746 1902 y FB(k)q Fz(2)783 1896
y FN(\))328 b(;)14 b(\010)g FK(function)h(on)j FN(k)p
1593 1911 V 295 1961 V 480 1946 a FM(v)500 1952 y FB(t)p
Fz(1)543 1946 y FN(:=)11 b(\010\()p FM(v)664 1952 y FB(t)p
Fz(0)695 1946 y FM(;)c(v)734 1952 y FB(t)p Fz(2)765 1946
y FN(\))346 b(;)14 b(\010)g FK(function)h(on)j FN(t)p
1593 1961 V 295 2010 V 480 1995 a FM(v)500 2001 y Fz(1)530
1995 y FN(:=)12 b(&)p FM(a)d FN(+)g FM(v)710 2001 y FB(i)734
1995 y Ft(\002)g FM(v)795 2001 y FB(m)836 1995 y Ft(\002)h
FN(8)f(+)g FM(v)969 2001 y FB(k)q Fz(1)1015 1995 y Ft(\002)h
FN(8)49 b(;)14 b FK(addr)n(ess)h(of)22 b FN(a[i,k])p
1593 2010 V 295 2060 V 480 2045 a FM(v)500 2051 y Fz(2)530
2045 y FN(:=)12 b(&)p FM(b)d FN(+)g FM(v)706 2051 y FB(k)q
Fz(1)753 2045 y Ft(\002)g FM(v)814 2051 y FB(n)846 2045
y Ft(\002)h FN(8)f(+)g FM(v)979 2051 y FB(j)1006 2045
y Ft(\002)g FN(8)59 b(;)14 b FK(addr)n(ess)h(of)22 b
FN(b[k,j])p 1593 2060 V 295 2110 V 480 2095 a FM(v)500
2101 y Fz(3)530 2095 y FN(:=)12 b FM(v)606 2101 y Fz(1)636
2095 y Ft(")657 2101 y FB(D)1127 2095 y FN(;)i FK(value)h(of)23
b FN(a[i,k])p 1593 2110 V 295 2160 V 480 2145 a FM(v)500
2151 y Fz(4)530 2145 y FN(:=)12 b FM(v)606 2151 y Fz(2)636
2145 y Ft(")657 2151 y FB(D)1127 2145 y FN(;)i FK(value)h(of)23
b FN(b[k,j])p 1593 2160 V 295 2210 V 480 2195 a FM(v)500
2201 y FB(t)p Fz(2)543 2195 y FN(:=)11 b FM(v)618 2201
y FB(t)p Fz(1)659 2195 y FN(+)691 2201 y FB(D)730 2195
y FM(v)750 2201 y Fz(3)778 2195 y Ft(\002)810 2201 y
FB(D)850 2195 y FM(v)870 2201 y Fz(4)1127 2195 y FN(;)j
FK(up)n(date)h(the)g(total)j FN(t)p 1593 2210 V 295 2259
V 480 2245 a FG(cmp)13 b FM(v)579 2251 y FB(k)q Fz(1)616
2245 y FM(;)7 b(v)655 2251 y FB(m)1127 2245 y FN(;)14
b FK(test)g(for)h(lo)n(op)g(end)p 1593 2259 V 295 2309
V 480 2294 a FG(bne)21 b(lab1)472 b FN(;)14 b FK(br)n(anch)h(if)f(not)i
(e)n(qual)p 1593 2309 V 296 2311 1298 2 v 454 2427 a
FN(Figure)e(9.7:)j FK(SSA)p FN(-form)12 b(of)h(inner)i(lo)q(op)e(of)g
(matrix)f(m)o(ultiply)224 2538 y FK(SSA)k FN(v)n(ariable)d
FM(x)497 2544 y FB(N)528 2538 y FN(.)21 b(The)15 b(n)o(um)o(b)q(ered)g
(virtual)e(registers)k(are)e(unique)g(temp)q(oraries.)20
b(The)224 2588 y(initial)12 b(v)n(alues)i(of)f FM(k)i
FN(and)f FM(t)f FN(en)o(tering)i(the)f(lo)q(op)f(at)h(lab)q(el)f
FG(lab2)g FN(are)i(denoted)f FM(v)1482 2594 y FB(k)q
Fz(0)1533 2588 y FN(and)g FM(v)1634 2594 y FB(t)p Fz(0)224
2638 y FN(resp)q(ectiv)o(ely)m(.)19 b(The)14 b(op)q(erators)g(with)f
(subscript)h(D)f(are)h(double)f(precision)h(\015oating)e(p)q(oin)o(t)
224 2688 y(op)q(erations.)19 b(As)14 b(usual,)f(&)p FM(a)h
FN(denotes)h(the)g(base)f(address)i(of)d(v)n(ariable)g
FM(a)p FN(,)g(and)h(so)g(on.)p eop
%%Page: 235 241
235 240 bop 224 274 a FL(9.5.)31 b(LOOP-INV)-5 b(ARIANT)15
b(CODE)f(MOTION)580 b FN(235)224 390 y FH(9.5.1)56 b(Finding)18
b(lo)r(op-in)n(v)m(arian)n(t)g(expressions)224 467 y
FN(One)c(of)e(the)i(ma)r(jor)d(opp)q(ortunities)i(for)g(optimization)d
(in)j(lo)q(ops)f(arises)i(when)f(an)g(expres-)224 517
y(sion)19 b(within)f(a)h(lo)q(op)f(is)h(ev)n(aluated,)h(but)f(yields)f
(the)i(same)e(v)n(alue)g(on)h(eac)o(h)h(tra)o(v)o(ersal.)224
567 y(This)12 b(is)g(an)f(in)o(teresting)i(example)d(of)h
(optimization,)e(since)k(it)e(raises)i(issues)f(of)g(safet)o(y)f(and)
224 617 y(pro\014tabilit)o(y)m(.)287 666 y(Expressions)h(whic)o(h)g
(yield)e(the)i(same)f(v)n(alue)g(on)g(eac)o(h)h(tra)o(v)o(ersal)f(of)g
(a)g(lo)q(op)g(are)g(said)g(to)224 716 y(b)q(e)k FO(lo)q(op-in)o(v)m
(arian)n(t)p FN(.)g(Suc)o(h)f(expressions)i(arise)e(v)o(ery)h(frequen)o
(tly)m(,)e(and)h(do)f(not)h(indicate)224 766 y(careless)20
b(co)q(ding)d(on)h(the)g(part)g(of)f(the)i(programmer.)27
b(As)18 b(an)g(example,)f(consider)i(the)224 816 y(co)q(de)g(for)e
(accessing)h(the)g(\()p FM(i;)7 b(j)r FN(\))18 b(elemen)o(t)f(of)g(an)g
(arra)o(y)h FM(a)p FN(.)28 b(The)18 b(address)h(expression)f(is)224
866 y(\(&)p FM(a)10 b FN(+)g FM(i)f Ft(\002)h FM(c)429
872 y Fz(1)456 866 y FN(+)g FM(j)i Ft(\002)d FM(c)586
872 y Fz(2)605 866 y FN(\),)j(where)i(&)p FM(a)g FN(is)e(the)i(arra)o
(y)e(base)i(address,)g(and)f(where)h FM(c)1518 872 y
Fz(1)1549 866 y FN(and)f FM(c)1647 872 y Fz(2)224 915
y FN(are)f(the)g(constan)o(t)f(ro)o(w)g(size)h(and)f(elemen)o(t)f(size)
i(resp)q(ectiv)o(ely)m(.)18 b(In)11 b(an)g(inner)h(lo)q(op)e(in)g(whic)
o(h)224 965 y(only)16 b(one)g(arra)o(y)g(index)g(v)n(aries,)h(a)f
(substan)o(tial)f(sub)q(expression)k(of)c(the)i(computation)d(is)224
1015 y(lo)q(op-in)o(v)n(arian)o(t.)287 1065 y(Recognising)h(lo)q(op-in)
o(v)n(arian)o(t)f(sub)q(expressions)k(in)e FK(SSA)h FN(form)e(is)h(v)o
(ery)g(simple.)24 b(As-)224 1115 y(suming)12 b(for)h(the)h(mom)o(en)o
(t)d(that)i(w)o(e)h(ha)o(v)o(e)f(iden)o(ti\014ed)g(the)h(lo)q(op)e
(header)i(no)q(de,)g(and)f(kno)o(w)224 1164 y(whic)o(h)h(instructions)h
(are)g(inside)f(the)g(lo)q(op)f(and)h(whic)o(h)g(outside,)g(w)o(e)g(ha)
o(v)o(e)g(the)h(follo)o(wing)224 1214 y(recursiv)o(e)h(de\014nitions)e
(|)328 1295 y FO(De\014nition)o(:)23 b FN(An)17 b FK(SSA)h(variable)i
FN(used)f(within)d(a)h(lo)q(op)g(is)g(lo)q(op-in)o(v)n(arian)o(t)328
1345 y(if)g(its)g(\(single\))h(de\014nition)f(is)h(outside)g(the)g(lo)q
(op,)f(or)g(if)g(it)g(is)h(de\014ned)g(b)o(y)g(a)328
1395 y(lo)q(op-in)o(v)n(arian)o(t)12 b(expression.)328
1461 y FO(De\014nition)o(:)32 b FN(An)22 b FK(expr)n(ession)j
FN(within)d(a)f(lo)q(op)g(is)h(lo)q(op-in)o(v)n(arian)o(t)e(if)h(all)
328 1511 y(op)q(erands)13 b(of)f(the)h(expression)h(are)f(lo)q(op-in)o
(v)n(arian)o(t)d(v)n(ariables)h(or)i(sub)q(expres-)328
1560 y(sions.)224 1641 y(These)19 b(de\014nitions)e(allo)o(w)e(lo)q
(op-in)o(v)n(arian)o(t)g(expressions)k(to)e(b)q(e)h(recognized)g(b)o(y)
f(the)h(fol-)224 1691 y(lo)o(wing)d(strategy)m(.)24 b(W)m(e)15
b(describ)q(e)j(the)f(pro)q(cess)g(for)f(the)g(case)h(of)e(a)h(single)f
(lo)q(op,)h(but)g(the)224 1741 y(extension)i(to)e(nested)i(lo)q(ops)e
(is)h(straigh)o(tforw)o(ard.)25 b(W)m(e)16 b(extend)i(the)f(attribute)g
(used)g(to)224 1791 y(mark)d(v)n(alues)i(for)f(constan)o(t)h
(propagation,)f(in)g(section)h(9.4.1,)e(so)i(that)f(it)h(no)o(w)f(has)h
(four)224 1841 y(v)n(alues:)j Ft(>)p FN(,)p FK(c)n(onst,)14
b(invariant)t FN(,)g(and)g Ft(?)p FN(.)19 b(If)13 b(w)o(e)i(assume)f
(that)g(constan)o(t)h(propagation)e(has)224 1891 y(b)q(een)k(already)f
(carried)g(out,)g(some)f(v)n(alues)g(are)h(already)g(mark)o(ed)e(as)i
(constan)o(t,)g(and)g(w)o(e)224 1940 y(initially)c(mark)g(all)h(others)
i(as)f(in)o(v)n(arian)o(t.)287 1990 y(The)e(basic)f(blo)q(c)o(ks)h(of)f
(the)h(lo)q(op)f(are)h(no)o(w)f(visited)g(in)h(rev)o(erse)h(p)q
(ost-order,)g(and)e(within)224 2040 y(eac)o(h)k(blo)q(c)o(k)f(eac)o(h)h
(v)n(alue-de\014nition)f(is)g(examined.)k(If)c(the)h(v)n(alue)f(arises)
h(from)e(a)h(\010)g(func-)224 2090 y(tion,)f(it)h(is)f(not)h(lo)q
(op-in)o(v)n(arian)o(t)d(and)j(is)f(lo)o(w)o(ered)h(to)g
Ft(?)p FN(.)j(If)d(the)g(v)n(alue)f(is)h(computed)f(from)224
2140 y(op)q(erands)i(at)e(least)g(one)h(of)e(whic)o(h)i(is)f
Ft(?)p FN(,)f(then)i(the)g(v)n(alue)e(is)i(also)e(mark)o(ed)g
Ft(?)p FN(.)17 b(After)d(this)224 2189 y(tra)o(v)o(ersal)f(all)f(the)h
(non-in)o(v)n(arian)o(t)e(v)n(alues)i(will)e(ha)o(v)o(e)i(b)q(een)h(so)
e(mark)o(ed.)17 b(Note)c(that)g(a)g(sin-)224 2239 y(gle)i(rev)o(erse)j
(p)q(ost-order)e(pass)g(o)o(v)o(er)f(the)h(blo)q(c)o(ks)g(is)f
(su\016cien)o(t,)h(since)g(w)o(e)f(conserv)n(ativ)o(ely)224
2289 y(assume)f(that)g(the)g(\010)g(functions)g(alw)o(a)o(ys)f(merge)g
(di\013eren)o(t)i(v)n(alues.)287 2339 y(The)10 b(treatmen)o(t)g(of)g
(memory)d(accesses)13 b(in)d(this)g(algorithm)d(is)j(instructiv)o(e.)18
b(If)9 b(a)h(partic-)224 2389 y(ular)h(memory)d(v)n(ariable)i(is)g
(de\014ned)i(within)e(a)h(lo)q(op,)f(then)i(the)f(algorithm)d(in)j
(section)g(9.1.1)224 2438 y(will)i(place)g(a)h(\010)f(function)g(for)h
(that)f(v)n(ariable)g(in)g(the)h(lo)q(op)f(header)h(no)q(de.)19
b(Th)o(us)14 b(an)o(y)f(v)n(al-)224 2488 y(ues)h(loaded)e(from)f(the)j
(v)n(ariable)d(will)g(b)q(e)j(mark)o(ed)d Ft(?)p FN(.)17
b(Consider)c(ho)o(w)o(ev)o(er)g(the)h(case)f(of)g(an)224
2538 y(arra)o(y)g(whic)o(h)h(do)q(es)g(not)f(ha)o(v)o(e)g(a)g
(de\014nition)g(inside)g(the)h(lo)q(op.)j(In)c(that)g(case)i(the)e(v)n
(ariable)224 2588 y(will)e(not)h(ha)o(v)o(e)h(a)f(\010)g(function,)g
(and)g(hence)h(the)g(v)n(alue)f(of)g(the)h(arra)o(y)m(,)e(treated)i(as)
g(an)f FK(entir)n(e)224 2638 y(variable)s FN(,)k(will)e(b)q(e)j(lo)q
(op-in)o(v)n(arian)o(t.)k(Ho)o(w)o(ev)o(er,)c(an)o(y)e(indexed)h
(access)i(to)e(the)g(arra)o(y)g(will)224 2688 y(only)e(b)q(e)g(in)o(v)n
(arian)o(t)e(if)h(the)i FK(index)k FN(is)14 b(in)o(v)n(arian)o(t.)i(In)
e(essence)j(the)d(load)f(instruction)h(|)p eop
%%Page: 236 242
236 241 bop 224 274 a FN(236)331 b FL(CHAPTER)14 b(9.)31
b(ST)m(A)m(TIC)14 b(SINGLE)f(ASSIGNMENT)i(F)o(ORM)315
390 y FF(lw)38 b(arr\(v99\),v)o(100)55 b(;)13 b FE(lo)n(ad)f(wor)n(d)i
(at)f(the)f(index)g(given)g(by)h(vR)n(e)n(g)i FD(99)224
480 y FN(is)f(only)f(lo)q(op-in)o(v)n(arian)o(t)f(if)h(the)h(arra)o(y)g
FO(and)f FN(the)h(index)g(are)g(b)q(oth)g(in)o(v)n(arian)o(t.)287
530 y(Lo)q(oking)f(at)i(the)h(data)e(accesses)k(of)c(the)i(matrix)d(m)o
(ultiplicatio)o(n)f(of)j(\014gure)g(9.7,)f(it)g(is)224
580 y(seen)g(that)f(the)g(v)n(ariables)e FM(a)i FN(and)f
FM(b)g FN(are)h(b)q(oth)f(lo)q(op-in)o(v)n(arian)o(t.)j(In)e(the)g
(inner)g(lo)q(op,)e(ma)r(jor)224 630 y(parts)k(of)e(the)i(address)g
(expressions)g(are)g(lo)q(op-in)o(v)n(arian)o(t.)g(In)f(the)g
(expression)h(|)699 720 y(&)p FM(a)9 b FN(+)h FM(v)824
726 y FB(i)847 720 y Ft(\002)f FM(v)908 726 y FB(m)949
720 y Ft(\002)h FN(8)f(+)g FM(v)1082 726 y FB(k)q Fz(1)1129
720 y Ft(\002)g FN(8)224 810 y(\(&)p FM(a)c FN(+)g FM(v)356
816 y FB(i)377 810 y Ft(\002)g FM(v)434 816 y FB(m)472
810 y Ft(\002)g FN(8\))13 b(is)f(lo)q(op)f(in)o(v)n(arian)o(t.)16
b(If)c(this)g(v)n(alue)f(is)h(loaded)f(in)o(to)h(a)f(virtual)h
(register,)224 860 y(sa)o(y)i FM(v)316 866 y Fz(5)335
860 y FN(,)f(outside)h(the)h(lo)q(op,)e(then)h(the)h(address)g(ev)n
(aluation)d(b)q(ecomes)i(|)783 949 y FM(v)803 955 y Fz(1)833
949 y FN(:=)e FM(v)909 955 y Fz(5)937 949 y FN(+)d FM(v)998
955 y FB(k)q Fz(1)1044 949 y Ft(\002)h FN(8)287 1039
y(Similarl)o(y)m(,)g(the)15 b(second)g(address)g(expression)g(|)704
1129 y(&)p FM(b)9 b FN(+)g FM(v)824 1135 y FB(k)q Fz(1)871
1129 y Ft(\002)g FM(v)932 1135 y FB(n)964 1129 y Ft(\002)h
FN(8)f(+)g FM(v)1097 1135 y FB(j)1124 1129 y Ft(\002)g
FN(8)224 1219 y(&)p FM(b)i FN(is)g(lo)q(op)f(in)o(v)n(arian)o(t,)g(as)h
(is)f FM(v)702 1225 y FB(n)736 1219 y FN(and)h(\()p FM(v)850
1225 y FB(j)871 1219 y Ft(\002)s FN(8\).)17 b(If)11 b(the)g(\014rst)h
(and)e(last)h(of)f(these)j(expressions)224 1269 y(are)i(loaded)e(in)o
(to)g FM(v)529 1275 y Fz(6)562 1269 y FN(and)h FM(v)663
1275 y Fz(7)695 1269 y FN(resp)q(ectiv)o(ely)m(,)h(then)f(the)h
(address)g(ev)n(aluation)d(b)q(ecomes)i(|)692 1359 y
FM(v)712 1365 y Fz(2)742 1359 y FN(:=)d FM(v)817 1365
y Fz(6)845 1359 y FN(+)f FM(v)907 1365 y FB(k)q Fz(1)953
1359 y Ft(\002)g FM(v)1015 1365 y FB(n)1046 1359 y Ft(\002)g
FN(8)f(+)g FM(v)1179 1365 y Fz(7)224 1449 y FN(In)20
b(this)g(particular)g(case,)h(if)e(w)o(e)h(had)g(b)q(een)h(able)e(to)h
(detect)h(a)f(p)q(oten)o(tial)f(use)i(of)e(the)224 1499
y(comm)o(utativ)o(e)14 b(and)i(asso)q(ciativ)o(e)h(la)o(ws,)f(w)o(e)h
(w)o(ould)f(ha)o(v)o(e)g(b)q(een)i(able)e(to)h(add)f
FM(v)1508 1505 y Fz(6)1543 1499 y FN(and)h FM(v)1647
1505 y Fz(7)224 1549 y FN(outside)h(the)f(lo)q(op,)g(and)g(also)f
(scale)i FM(v)845 1555 y FB(n)884 1549 y FN(b)o(y)f(8,)g(reducing)h
(the)f(computation)f(inside)h(the)224 1598 y(lo)q(op)d(still)e
(further.)224 1714 y FH(9.5.2)56 b(Mo)n(ving)18 b(lo)r(op-in)n(v)m
(arian)n(t)g(co)r(de)224 1791 y FN(Ideally)11 b(w)o(e)g(w)o(ould)g(lik)
o(e)f(to)h(simply)e(mo)o(v)o(e)h(lo)q(op-in)o(v)n(arian)o(t)e
(expressions)13 b(outside)f(the)g(lo)q(op,)224 1841 y(and)k(compute)f
(them)f(once)i(only)m(,)e(but)i(some)f(caution)g(is)g(required.)24
b(As)16 b(a)f(general)h(rule,)224 1891 y(whenev)o(er)j(co)q(de)f(is)f
(mo)o(v)o(ed)e(within)h(a)h FK(CF)o(G)k FN(if)16 b(m)o(ust)g(b)q(e)i
(mo)o(v)o(ed)d(to)i(a)g(p)q(osition)f(where)224 1940
y(it)g(dominates)f(the)h(original)e(co)q(de)j(lo)q(cation.)23
b(This)16 b(requiremen)o(t)g(ensures)i(that)e(uses)h(of)224
1990 y(the)i(mo)o(v)o(ed)e(v)n(alues)h(will)e(\014nd)j(the)f(v)n(alues)
g(a)o(v)n(ailable.)29 b(Ho)o(w)o(ev)o(er,)19 b(for)f(safet)o(y)g(w)o(e)
g(m)o(ust)224 2040 y(also)12 b(ensure)i(that)e(w)o(e)g(do)g(not)g
(compute)g(v)n(alues)g(whic)o(h)g(migh)o(t)e(otherwise)j(not)f(ha)o(v)o
(e)g(b)q(een)224 2090 y(computed.)23 b(Consider)16 b(a)f(lo)q(op)g
(with)g(an)h FK(IF)21 b FN(statemen)o(t)15 b(nested)i(within)e(it.)23
b(Figure)15 b(9.9)224 2140 y(on)f(page)g(238)f(has)h(suc)o(h)h(a)e(lo)q
(op.)287 2189 y(If)e(one)h(branc)o(h)g(of)g(the)g(lo)q(op)f(has)h(a)f
(lo)q(op-in)o(v)n(arian)o(t)f(expression)j(within)e(it,)g(then)h(mo)o
(v-)224 2239 y(ing)19 b(the)h(expression)g(outside)g(the)g(lo)q(op)e
(will)g(ensure)j(that)e(the)h(expression)g(is)f(alw)o(a)o(ys)224
2289 y(computed,)f(ev)o(en)g(in)f(cases)i(where)g(the)f(original)e(co)q
(de)i(ma)o(y)e(ha)o(v)o(e)h(not)h(done)g(so.)29 b(The)224
2339 y(prop)q(ert)o(y)18 b(whic)o(h)f(is)g(required)g(to)g(ensure)i
(that)d(no)h(computation)e(is)i(p)q(erformed)f(whic)o(h)224
2389 y(w)o(ould)h(not)h(otherwise)h(ha)o(v)o(e)e(b)q(een)i(done)f(is)g
(precisely)h(the)f FK(downSafeIn)h FN(prop)q(ery)g(dis-)224
2438 y(cussed)c(in)e(section)g FO(??)p FN(.)k(If)c(an)g(expression)h
(is)f(lo)q(op-in)o(v)n(arian)o(t)d(and)j(is)g FK(downSafeIn)h
FN(at)f(the)224 2488 y(lo)q(op)h(header)g(no)q(de,)g(then)h(it)e(ma)o
(y)f(safely)i(b)q(e)g(mo)o(v)o(ed)f(outside)h(the)g(lo)q(op.)287
2538 y(A)d(\014nal)f(question)h(arises)h(as)f(to)g(where)h(to)f(mo)o(v)
o(e)e(suc)o(h)j(lo)q(op-in)o(v)n(arian)o(t)c(computations.)224
2588 y(In)16 b FK(REPEA)m(T)21 b FN(lo)q(ops)14 b(the)i(situation)f(is)
g(simple,)e(since)k(placing)d(the)i(in)o(v)n(arian)o(t)d(co)q(de)j(im-)
224 2638 y(mediately)d(ab)q(o)o(v)o(e)i(the)g(lo)q(op)f(header)h(is)g
(safe.)20 b(In)15 b FK(WHILE)20 b FN(lo)q(ops)14 b(the)i(problem)d(is)h
(more)224 2688 y(di\016cult.)22 b(Consider)16 b(the)g(t)o(w)o(o)f
(alternativ)o(e)g(enco)q(dings)h(of)f(the)h FK(WHILE)21
b FN(lo)q(op)14 b(sho)o(wn)i(in)p eop
%%Page: 237 243
237 242 bop 224 274 a FL(9.5.)31 b(LOOP-INV)-5 b(ARIANT)15
b(CODE)f(MOTION)580 b FN(237)224 390 y(\014gure)17 b(4.11c)e(and)h
(4.11d)f(on)h(page)g(123.)23 b(In)16 b(the)h(\014rst)g(case)g(the)f(p)q
(osition)g(immedia)o(tely)224 440 y(ab)q(o)o(v)o(e)d(the)h(lo)q(op)e
(is)h(unsafe,)g(since)h(the)g(co)q(de)g(is)f(unprotected)i(b)o(y)e(the)
g(lo)q(op)f(pre-test)j(con-)224 490 y(dition,)h(and)h(w)o(ould)f(b)q(e)
h(executed)i(ev)o(en)e(in)g(cases)h(where)g(the)f(lo)q(op)f(should)h
(ha)o(v)o(e)f(b)q(een)224 540 y(skipp)q(ed)e(o)o(v)o(er.)k(The)c
(second)h(enco)q(ding)e(is)h(safe,)f(since)h(there)h(is)e(a)g(p)q
(osition)g(b)q(et)o(w)o(een)i(the)224 590 y(\014rst)j(conditional)e
(test)i(and)f(the)h(lo)q(op)e(header)i(in)f(whic)o(h)g(the)g(in)o(v)n
(arian)o(t)f(co)q(de)i(ma)o(y)d(b)q(e)224 640 y(placed.)224
748 y FO(Restructurin)o(g)e(the)i(CF)o(G)224 825 y FN(The)f(implemen)o
(tation)c(of)j(lo)q(op-in)o(v)n(arian)o(t)e(co)q(de)j(motion)e(is)h
(made)f(m)o(uc)o(h)g(simpler)h(b)o(y)g(re-)224 875 y(structuring)g(the)
f(con)o(trol)f(\015o)o(w)g(graph)g(so)h(that)f(it)h(has)f(certain)h
(standard)g(c)o(haracteristics.)224 925 y(In)i(particular)g(ev)o(ery)h
(lo)q(op)e(in)g(the)i(transformed)e(form)f(has)i(three)h(distinguished)
f(no)q(des,)224 974 y(whic)o(h)f(w)o(e)g(shall)e(call)h(the)h
FK(pr)n(e-he)n(ader)p FN(,)f(the)i FK(he)n(ader)p FN(,)e(and)g(the)i
FK(latching)f(no)n(de)p FN(.)19 b(Figure)12 b(9.8)224
1024 y(sho)o(ws)18 b(a)g(lo)q(op)f(in)g(the)h(canonical)f(form.)28
b(If)17 b(the)h FK(CF)o(G)j FN(is)d(reducible)g(then)h(ev)o(ery)f(lo)q
(op)645 1082 y
 9472573 10525081 0 0 9472573 10525081 startTexFig
 645 1082 a
%%BeginDocument: loopform.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-54.0 168.0 translate 0.900 -0.900 scale
1.000 setlinewidth
	[6.000000] 0 setdash
% Ellipse
n 91 141 21 21 0 360 DrawEllipse gs 0.95 setgray fill gr
gs col-1 s gr
	[] 0 setdash
% Polyline
n 125 99 m 125 79 l  59 79 l  59 99 l  clp gs col-1 s gr
% Polyline
n 219 99 m 219 79 l  153 79 l  153 99 l  clp gs col-1 s gr
% Polyline
n 125 50 m 125 30 l  59 30 l  59 50 l  clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 91 100 m 91 120 l gs col-1 s gr
n 93.000 112.000 m 91.000 120.000 l 89.000 112.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 93 162 m 93 186 l gs col-1 s gr
n 95.000 178.000 m 93.000 186.000 l 91.000 178.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 90 49 m 90 78 l gs col-1 s gr
n 92.000 70.000 m 90.000 78.000 l 88.000 70.000 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Polyline
n 89 162 m 89 186 l gs col-1 s gr
	[] 0 setdash
n 91.000 178.000 m 89.000 186.000 l 87.000 178.000 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Polyline
n 87 100 m 87 120 l gs col-1 s gr
	[] 0 setdash
n 89.000 112.000 m 87.000 120.000 l 85.000 112.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 87 8 m 87 29 l gs col-1 s gr
n 89.000 21.000 m 87.000 29.000 l 85.000 21.000 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Polyline
n 93 8 m 92 29 l gs col-1 s gr
	[] 0 setdash
n 94.378 21.104 m 92.000 29.000 l 90.383 20.914 l gs 2 setlinejoin col-1 s gr
% Open spline
n 185.000 79.000 m 185.000 69.000 l
	185.000 69.000 185.000 59.000 142.000 59.000 DrawSplineSection
	142.000 59.000 99.000 59.000 99.000 68.500 DrawSplineSection
	99.000 78.000 l gs col-1 s gr
n 101.000 70.000 m 99.000 78.000 l 97.000 70.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 112.000 143.000 m 150.000 142.000 l
	150.000 142.000 188.000 141.000 188.000 120.000 DrawSplineSection
	188.000 99.000 l gs col-1 s gr
n 186.000 107.000 m 188.000 99.000 l 190.000 107.000 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Open spline
n 114.000 140.000 m 149.000 139.500 l
	149.000 139.500 184.000 139.000 184.000 119.000 DrawSplineSection
	184.000 99.000 l gs col-1 s gr
	[] 0 setdash
n 182.000 107.000 m 184.000 99.000 l 186.000 107.000 l gs 2 setlinejoin col-1 s gr
/Times-Italic findfont 10.00 scalefont setfont
76 92 m 
gs 1 -1 scale (header) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
158 92 m 
gs 1 -1 scale (latching node) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
70 43 m 
gs 1 -1 scale (pre-header) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 577 1840 a FN(Figure)c(9.8:)j(A)d(lo)q(op)f(in)g(the)i(canonical)e
(form)224 1940 y(has)i(an)f(unique)g(header)i(no)q(de.)k(The)14
b(purp)q(ose)i(of)e(the)h(latc)o(hing)e(no)q(de)i(is)f(to)g(ensure)i
(that)224 1990 y(the)f(header)g(no)q(de)f(has)g(a)f(single)h(bac)o(k)o
(edge)g(inciden)o(t)g(on)f(it.)18 b(If)c(there)h(are)f(m)o(ultiple)d
(bac)o(k)224 2040 y(edges)19 b(in)f(the)h(original)d
FK(CF)o(G)t FN(,)h(arising)g(\(sa)o(y\))h(from)e(use)j(of)e(the)i
FG(continue)d FN(statemen)o(t)224 2090 y(in)g(language)f
FM(C)s FN(,)h(then)h(an)f(empt)o(y)f(no)q(de)i(is)f(in)o(tro)q(duced)h
(as)f(the)h(target)g(of)e(the)i(original)224 2139 y(bac)o(k)o(edges,)d
(and)e(a)h(single)f(edge)h(leads)g(from)e(this)h(new)h(no)q(de)h(to)e
(the)h(header)h(no)q(de.)k(Note)224 2189 y(that)c(the)h(header)g(no)q
(de)f(is)g(the)g(only)f(successor)k(of)c(the)i(latc)o(hing)d(no)q(de.)
287 2239 y(The)i(purp)q(ose)g(of)f(the)h(pre-header)h(is)f(to)f(ensure)
i(that)f(all)e(con)o(trol)h(\015o)o(w)g(reac)o(hing)h(the)224
2289 y(header)20 b(no)q(de)g(from)d(outside)j(the)f(lo)q(op)g(passes)h
(through)f(a)g(single)g(no)q(de.)34 b(This)19 b(no)q(de)224
2339 y(dominates)d(the)i(header,)g(and)f(is)f(p)q(ostdominated)g(b)o(y)
h(the)g(header)h(no)q(de.)28 b(In)17 b(the)g(case)224
2389 y(of)f(pretested)i(lo)q(ops,)e(this)g(ma)o(y)f(require)i(some)e
(signi\014can)o(t)g(restructuring)j(of)e(the)h(lo)q(op,)224
2438 y(as)d(describ)q(ed)h(in)e(section)h(4.5.3)d(and)i(\014gure)h
(4.11.)j(Lo)q(op-in)o(v)n(arian)o(t)11 b(co)q(de)j(will)e(b)q(e)i(mo)o
(v)o(ed)224 2488 y(to)g(this)h(no)q(de.)k(Note)14 b(that)g(the)h
(header)g(no)q(de)g(is)f(the)h(only)e(successor)j(of)e(the)h
(pre-header)224 2538 y(no)q(de.)287 2588 y(Once)e(the)f(lo)q(op)f(has)g
(b)q(een)i(restructured)i(in)o(to)c(this)g(form,)f(w)o(e)i(ma)o(y)e
(use)i(it)g(to)f(p)q(erform)224 2638 y(a)16 b(n)o(um)o(b)q(er)f(of)h
(tests)h(on)f(the)g FK(CF)o(G)t FN(,)f(so)h(as)g(to)g(categorize)h(the)
f(blo)q(c)o(ks)g(of)g(the)g(lo)q(op.)24 b(W)m(e)224 2688
y(use)15 b(the)g(follo)o(wing)c(de\014nitions)j(|)p eop
%%Page: 238 244
238 243 bop 224 274 a FN(238)331 b FL(CHAPTER)14 b(9.)31
b(ST)m(A)m(TIC)14 b(SINGLE)f(ASSIGNMENT)i(F)o(ORM)287
390 y Ft(\017)20 b FN(a)15 b(blo)q(c)o(k)g(is)h FK(semi-safe)i
FN(if)c(it)h(is)h(executed)h(on)e(ev)o(ery)h(tra)o(v)o(ersal)g(of)f
(the)h(lo)q(op)e(whic)o(h)328 440 y(reac)o(hes)i(the)e(latc)o(hing)f
(no)q(de)287 530 y Ft(\017)20 b FN(a)9 b(blo)q(c)o(k)g(is)h
FK(down-safe)i FN(if)d(it)g(is)g(executed)j(on)d(ev)o(ery)h(tra)o(v)o
(ersal)f(of)g(the)h(lo)q(op,)f(including)328 580 y(the)15
b(last)224 668 y(In)g(\014gure)g(9.9)e(the)i(semi-safe)e(blo)q(c)o(ks)i
(do)f(not)g(include)h(either)g(the)g(thenpart)g(or)f(elsepart)455
729 y
 15458713 15195586 0 0 15458713 15195586 startTexFig
 455 729 a
%%BeginDocument: safeloop.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-26.0 252.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Ellipse
n 39 269 11 11 0 360 DrawEllipse gs 0.95 setgray fill gr
gs col-1 s gr
% Ellipse
n 79 34 11 11 0 360 DrawEllipse gs 0.95 setgray fill gr
gs col-1 s gr
% Polyline
n 99 79 m 99 59 l  59 59 l  59 79 l  clp gs col-1 s gr
% Polyline
n 99 119 m 99 99 l  59 99 l  59 119 l  clp gs col-1 s gr
% Polyline
n 74 159 m 74 139 l  34 139 l  34 159 l  clp gs col-1 s gr
% Polyline
n 124 159 m 124 139 l  84 139 l  84 159 l  clp gs col-1 s gr
% Polyline
n 99 199 m 99 179 l  59 179 l  59 199 l  clp gs col-1 s gr
% Polyline
n 99 239 m 99 219 l  59 219 l  59 239 l  clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 79 45 m 79 59 l gs col-1 s gr
n 81.000 51.000 m 79.000 59.000 l 77.000 51.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 79 79 m 79 99 l gs col-1 s gr
n 81.000 91.000 m 79.000 99.000 l 77.000 91.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 76 119 m 58 139 l gs col-1 s gr
n 64.838 134.392 m 58.000 139.000 l 61.865 131.716 l gs 2 setlinejoin col-1 s gr
% Polyline
n 84 119 m 100 139 l gs col-1 s gr
n 96.564 131.504 m 100.000 139.000 l 93.441 134.002 l gs 2 setlinejoin col-1 s gr
% Polyline
n 101 159 m 83 179 l gs col-1 s gr
n 89.838 174.392 m 83.000 179.000 l 86.865 171.716 l gs 2 setlinejoin col-1 s gr
% Polyline
n 59 159 m 77 179 l gs col-1 s gr
n 73.135 171.716 m 77.000 179.000 l 70.162 174.392 l gs 2 setlinejoin col-1 s gr
% Polyline
n 79 199 m 79 219 l gs col-1 s gr
n 81.000 211.000 m 79.000 219.000 l 77.000 211.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 74.000 199.000 m 57.000 207.500 l
	57.000 207.500 40.000 216.000 40.000 237.000 DrawSplineSection
	40.000 258.000 l gs col-1 s gr
n 42.000 250.000 m 40.000 258.000 l 38.000 250.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 79.000 240.000 m 79.000 250.000 l
	79.000 250.000 79.000 260.000 109.500 260.000 DrawSplineSection
	109.500 260.000 140.000 260.000 140.000 172.000 DrawSplineSection
	140.000 172.000 140.000 84.000 113.500 84.000 DrawSplineSection
	113.500 84.000 87.000 84.000 87.000 91.000 DrawSplineSection
	87.000 98.000 l gs col-1 s gr
n 89.000 90.000 m 87.000 98.000 l 85.000 90.000 l gs 2 setlinejoin col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
65 111 m 
gs 1 -1 scale (h) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
42 151 m 
gs 1 -1 scale (t) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
65 232 m 
gs 1 -1 scale (l) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
64 192 m 
gs 1 -1 scale (m) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
180 100 m 
gs 1 -1 scale (header block) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
180 113 m 
gs 1 -1 scale (pre-header) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
180 126 m 
gs 1 -1 scale (latching node) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
180 139 m 
gs 1 -1 scale (semi-safe blocks) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
180 152 m 
gs 1 -1 scale (down-safe blocks) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
258 99 m 
gs 1 -1 scale (h) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
259 111 m 
gs 1 -1 scale (p) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
259 125 m 
gs 1 -1 scale (l) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
257 139 m 
gs 1 -1 scale ({h,m,l}) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
257 152 m 
gs 1 -1 scale ({h,m}) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
90 151 m 
gs 1 -1 scale (e) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
65 71 m 
gs 1 -1 scale (p) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
38 272 m 
gs 1 -1 scale (x) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
77 38 m 
gs 1 -1 scale (s) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 524 1783 a FN(Figure)g(9.9:)j(Example)12 b(lo)q(op,)h(with)g(safe)h
(blo)q(c)o(k-sets)224 1886 y(blo)q(c)o(ks)f(of)f(the)h(if-statemen)o(t)
e(in)h(the)h(lo)q(op.)k(The)c(latc)o(hing)f(no)q(de)h(is)f(not)g(in)g
(the)i(do)o(wn-safe)224 1935 y(set,)j(since)f(on)f(the)h(last)f(tra)o
(v)o(ersal)h(of)f(the)h(lo)q(op)e(this)i(will)e(not)h(b)q(e)h
(executed.)25 b(Indeed,)16 b(if)224 1985 y(the)e(lo)q(op)f(is)g(tra)o
(v)o(ersed)h(only)e(once,)i(then)g(the)g(co)q(de)g(of)e(the)i(latc)o
(hing)e(no)q(de)i(will)e(nev)o(er)i(b)q(e)224 2035 y(executed)i(at)e
(all.)287 2087 y(T)m(aking)d(a)i(lo)q(op)f(in)h(canonical)f(form,)f(w)o
(e)i(ma)o(y)e(immediately)f(see)k(that)f(all)f(the)h(blo)q(c)o(ks)224
2136 y(in)h(the)h(lo)q(op)f(whic)o(h)g(dominate)f(the)i(latc)o(hing)e
(no)q(de)i(are)g(semi-safe,)e(since)i(these)h(are)f(the)224
2186 y(blo)q(c)o(ks)e(that)g FK(must)j FN(b)q(e)d(executed)i(b)q(efore)
e(the)g(latc)o(hing)f(no)q(de)h(is)f(reac)o(hed.)19 b(The)13
b(blo)q(c)o(ks)g(of)224 2236 y(the)f(lo)q(op)e(whic)o(h)g(p)q
(ost-dominate)g(the)h(header)h(are)f(exactly)g(those)g(that)g
FK(wil)r(l)j FN(b)q(e)d(executed,)224 2286 y(once)k(the)f(lo)q(op)g(is)
f(en)o(tered.)287 2337 y(In)e(general,)h(w)o(e)g(ma)o(y)d(\014nd)j(the)
g(semi-safe)e(blo)q(c)o(ks)i(b)o(y)f(tra)o(v)o(ersing)h(the)g
(dominator)d(tree)224 2387 y(starting)15 b(from)f(the)h(latc)o(hing)g
(no)q(de,)g(and)g(ending)g(with)g(the)g(header)h(no)q(de.)22
b(It)15 b(is)g(left)g(as)224 2437 y(an)f(exercise)i(to)e(sho)o(w)g
(that)g(a)g(lo)q(op)f(is)h(reducible)h(if)e(and)h(only)g(if)f(the)i
(header)g(dominates)224 2487 y(the)g(latc)o(hing)e(no)q(de.)287
2538 y(Do)o(wn-safe)18 b(blo)q(c)o(ks)h(ma)o(y)e(b)q(e)i(found)f(b)o(y)
h(listing)e(all)h(the)h(ancestors)i(of)d(the)h(header)224
2588 y(no)q(de)e(in)e(the)i(p)q(ost-dominator)d(tree,)k(excluding)e(no)
q(des)g(not)g(in)g(the)h(lo)q(op.)23 b(There)18 b(do)q(es)224
2638 y(not)c(seem)g(to)g(b)q(e)h(an)o(y)e(simpler)g(w)o(a)o(y)g(than)h
(\014nding)g(eac)o(h)g(ancestor)h(in)f(turn,)g(and)g(testing)224
2688 y(to)j(see)h(if)e(it)h(is)f(within)g(the)i(lo)q(op.)26
b(The)17 b(asymmetry)e(in)h(b)q(eha)o(viour)h(of)f(the)h(dominator)p
eop
%%Page: 239 245
239 244 bop 224 274 a FL(9.5.)31 b(LOOP-INV)-5 b(ARIANT)15
b(CODE)f(MOTION)580 b FN(239)343 349 y
 19010928 10722426 0 0 19010928 10722426 startTexFig
 343 349 a
%%BeginDocument: dompostdom.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-26.0 189.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Ellipse
n 79 79 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 79 119 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 79 159 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 119 159 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 279 79 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 279 119 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 239 119 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 319 119 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 299 159 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 339 159 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 39 159 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 79 39 11 11 0 360 DrawEllipse gs 0.95 setgray fill gr
gs col-1 s gr
% Ellipse
n 279 39 11 11 0 360 DrawEllipse gs 0.95 setgray fill gr
gs col-1 s gr
% Ellipse
n 339 199 11 11 0 360 DrawEllipse gs 0.95 setgray fill gr
gs col-1 s gr
% Ellipse
n 139 199 11 11 0 360 DrawEllipse gs 0.95 setgray fill gr
gs col-1 s gr
% Ellipse
n 99 199 11 11 0 360 DrawEllipse gs col-1 s gr
0.500 setlinewidth
% Polyline
n 79 50 m 79 69 l gs col-1 s gr
n 81.000 61.000 m 79.000 69.000 l 77.000 61.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 79 91 m 79 108 l gs col-1 s gr
n 81.000 100.000 m 79.000 108.000 l 77.000 100.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 79 130 m 79 148 l gs col-1 s gr
n 81.000 140.000 m 79.000 148.000 l 77.000 140.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 89 127 m 113 151 l gs col-1 s gr
n 108.757 143.929 m 113.000 151.000 l 105.929 146.757 l gs 2 setlinejoin col-1 s gr
% Polyline
n 70 126 m 46 150 l gs col-1 s gr
n 53.071 145.757 m 46.000 150.000 l 50.243 142.929 l gs 2 setlinejoin col-1 s gr
% Polyline
n 115 169 m 104 189 l gs col-1 s gr
n 109.608 182.954 m 104.000 189.000 l 106.103 181.026 l gs 2 setlinejoin col-1 s gr
% Polyline
n 126 169 m 136 190 l gs col-1 s gr
n 134.366 181.917 m 136.000 190.000 l 130.755 183.637 l gs 2 setlinejoin col-1 s gr
% Polyline
n 280 51 m 280 69 l gs col-1 s gr
n 282.000 61.000 m 280.000 69.000 l 278.000 61.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 279 91 m 279 108 l gs col-1 s gr
n 281.000 100.000 m 279.000 108.000 l 277.000 100.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 289 87 m 312 111 l gs col-1 s gr
n 307.909 103.840 m 312.000 111.000 l 305.021 106.608 l gs 2 setlinejoin col-1 s gr
% Polyline
n 325 129 m 335 149 l gs col-1 s gr
n 333.211 140.950 m 335.000 149.000 l 329.633 142.739 l gs 2 setlinejoin col-1 s gr
% Polyline
n 313 129 m 304 149 l gs col-1 s gr
n 309.107 142.525 m 304.000 149.000 l 305.459 140.884 l gs 2 setlinejoin col-1 s gr
% Polyline
n 339 171 m 339 188 l gs col-1 s gr
n 341.000 180.000 m 339.000 188.000 l 337.000 180.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 270 86 m 246 110 l gs col-1 s gr
n 253.071 105.757 m 246.000 110.000 l 250.243 102.929 l gs 2 setlinejoin col-1 s gr
/Times-Italic findfont 10.00 scalefont setfont
85 63 m 
gs 1 -1 scale (dominator tree) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
192 62 m 
gs 1 -1 scale (post-dominator tree) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
78 42 m 
gs 1 -1 scale (s) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
78 81 m 
gs 1 -1 scale (p) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
77 122 m 
gs 1 -1 scale (h) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
38 162 m 
gs 1 -1 scale (t) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
77 161 m 
gs 1 -1 scale (e) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
116 163 m 
gs 1 -1 scale (m) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
97 203 m 
gs 1 -1 scale (l) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
136 202 m 
gs 1 -1 scale (x) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
338 162 m 
gs 1 -1 scale (p) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
298 164 m 
gs 1 -1 scale (l) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
317 123 m 
gs 1 -1 scale (h) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
238 122 m 
gs 1 -1 scale (t) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
277 122 m 
gs 1 -1 scale (e) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
276 83 m 
gs 1 -1 scale (m) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
278 42 m 
gs 1 -1 scale (x) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
337 202 m 
gs 1 -1 scale (s) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 365 1119 a FN(Figure)14 b(9.10:)j(Dominator)11 b(and)j(p)q
(ost-dominator)e(trees,)j(for)e(\014gure)i(9.9)224 1253
y(and)k(p)q(ostdominator)e(trees)j(arises)f(b)q(ecause)h(the)f(con)o
(trol)f(\015o)o(w)h(graph)f(with)g(all)f(edges)224 1303
y(rev)o(ersed)k(ma)o(y)c(not)h(necessarily)i(b)q(e)f(reducible.)33
b(Indeed)20 b(in)e(cases)i(where)f(lo)q(ops)f(ha)o(v)o(e)224
1353 y(m)o(ultiple)12 b(exits)i(this)g(is)g(v)o(ery)g(common.)287
1403 y(The)c(dominator)e(and)i(p)q(ost-dominator)f(trees)i(for)f(the)h
(graph)f(in)g(\014gure)h(9.9)e(are)h(sho)o(wn)224 1453
y(in)16 b(\014gure)g(9.10.)22 b(Note)16 b(that)f(the)h(do)o(wn-safe)g
(blo)q(c)o(ks)f(lie)g(from)f FM(h)i FN(up)f(to)h FM(m)g
FN(in)f(the)h(p)q(ost-)224 1503 y(dominator)e(tree,)j(while)e(the)i
(semi-safe)e(blo)q(c)o(ks)g(lie)h(from)e FM(l)j FN(up)e(to)h
FM(h)g FN(in)f(the)h(dominator)224 1552 y(tree.)224 1663
y FO(Mo)o(ving)f(in)o(v)m(arian)o(t)e(expressions)224
1740 y FN(Once)19 b(the)e(do)o(wn-safe)g(blo)q(c)o(ks)g(of)f(a)h(lo)q
(op)f(ha)o(v)o(e)h(b)q(een)h(iden)o(ti\014ed,)f(it)g(b)q(ecomes)g(p)q
(ossible)224 1790 y(to)d(\014nd)f(the)h(lo)q(op-in)o(v)n(arian)o(t)d
(expressions)k(whic)o(h)e(are)h(computed)f(in)f(those)j(blo)q(c)o(ks.)i
(This)224 1840 y(ma)o(y)c(b)q(e)j(done)f(using)f(the)i(algorithm)c
(describ)q(ed)k(earlier,)f(but)g(restricted)i(to)d(the)i(do)o(wn-)224
1890 y(safe)f(blo)q(c)o(ks,)e(visited)h(as)g(usual)f(in)h(rev)o(erse)i
(p)q(ost-order.)287 1940 y(Note)11 b(that)g(an)o(y)f(v)n(alues)h
(computed)f(within)g(the)h(lo)q(op)f(whic)o(h)h(are)g(in)g(do)o
(wn-safe)f(blo)q(c)o(ks)224 1990 y(are)j(alw)o(a)o(ys)d(safe)i(to)g(mo)
o(v)o(e)e(to)i(the)g(pre-header,)i(since)e(the)h(pre-header,)g(b)o(y)f
(construction,)224 2040 y(is)i(p)q(ost-dominated)f(b)o(y)g(ev)o(ery)i
(do)o(wn-safe)f(blo)q(c)o(k)f(in)h(the)g(lo)q(op.)287
2090 y(V)m(alues)e(computed)g(in)g(other)i(blo)q(c)o(ks)e(of)g(the)h
(lo)q(op)f(are)h(more)f(problematical,)e(b)q(oth)j(in)224
2140 y(terms)h(of)e(safet)o(y)i(and)f(pro\014tabilit)o(y)m(.)j(Safet)o
(y)d(is)g(a)g(consideration)h(b)q(ecause)h(mo)o(ving)c(com-)224
2189 y(putations)17 b(from)f(non-do)o(wn-safe)h(blo)q(c)o(ks)g(migh)o
(t)e(cause)j(run)o(time)e(errors)j(whic)o(h)e(w)o(ould)224
2239 y(not)f(o)q(ccur)g(in)f(the)h(unoptimized)e(program.)21
b(Therefore)c(it)e(is)g(necessary)j(to)d(c)o(hec)o(k)h(that)224
2289 y(an)o(y)e(expressions)h(whic)o(h)f(are)g FK(sp)n(e)n(culatively)g
(move)n(d)19 b FN(in)13 b(this)h(w)o(a)o(y)f(are)h(not)g(able)g(to)f
(cause)224 2339 y(run)o(time)18 b(errors.)32 b(Pro\014tabilit)o(y)17
b(is)i(lik)o(ewise)e(a)h(consideration,)i(since)f(the)g(sp)q(eculativ)o
(e)224 2389 y(mo)o(ving)c(of)h(ev)o(en)i(safe)f(expressions)i(ma)o(y)c
(lead)i(to)f(the)i(computation)d(of)i(v)n(alues)f(whic)o(h)224
2438 y(are)e(nev)o(er)f(used.)19 b(Consider)13 b(an)f(exp)q(ensiv)o(e)i
(computation)d(in)h(\014gure)h(9.9,)f(in)g(the)h(elsepart)224
2488 y(blo)q(c)o(k)h(lab)q(elled)f(\\e")h(in)g(the)g(\014gure.)19
b(In)14 b(the)h(absence)g(of)f(an)o(y)f(other)i(evidence)g(it)f(ma)o(y)
e(b)q(e)224 2538 y(though)o(t)k(that)f(the)h(else)g(path)g(w)o(ould)e
(b)q(e)i(follo)o(w)o(ed)e(half)g(of)h(the)h(time.)21
b(If)15 b(this)h(estimate)224 2588 y(is)e(grossly)g(in)g(error,)g(then)
h(the)g(optimization)c(ma)o(y)h(actually)h(mak)o(e)g(the)h(co)q(de)h
(run)f(more)224 2638 y(slo)o(wly)m(.)23 b(Some)15 b(kind)g(of)h
(compromise)d(is)j(clearly)g(needed,)h(and)f(a)g(reasonable)g(c)o
(hoice)g(is)224 2688 y(to)c(sp)q(eculativ)o(ely)g(mo)o(v)o(e)e
(non-trapping)h(computations)g(out)h(of)f(semi-safe)g(blo)q(c)o(ks,)g
(but)h(to)p eop
%%Page: 240 246
240 245 bop 224 274 a FN(240)331 b FL(CHAPTER)14 b(9.)31
b(ST)m(A)m(TIC)14 b(SINGLE)f(ASSIGNMENT)i(F)o(ORM)224
390 y FN(lea)o(v)o(e)d(other)h(computations)e(where)i(they)f(are.)18
b(Since)13 b(it)e(is)h(normal)e(to)i(p)q(erform)f(a)h(second)224
440 y(pass)18 b(of)f(global)f(common)f(sub)q(expression)k(elimination)c
(after)i(an)o(y)g(co)q(de)i(motion,)c(it)i(is)224 490
y(p)q(ossible)c(that)f(co)q(de)h(in)f(non-safe)g(blo)q(c)o(ks)g(ma)o(y)
e(b)q(e)j(able)f(to)g(use)h(the)g(v)n(alues)e(in)h(the)h(mo)o(v)o(ed)
224 540 y(co)q(de)i(in)f(an)o(y)f(case.)224 647 y FO(Some)i(practical)f
(considerations)224 724 y FN(There)19 b(are)e(a)g(n)o(um)o(b)q(er)f(of)
g(practical)h(issues)h(whic)o(h)f(need)h(to)f(b)q(e)h(considered)g
(whenev)o(er)224 774 y(co)q(de)13 b(motion)c(algorithms,)g(including)i
(lo)q(op-in)o(v)n(arian)o(t)e(co)q(de)j(motion,)d(are)j(implemen)o
(ted.)224 823 y(One)j(of)f(these)h(is)f(the)h(e\013ect)g(of)f(suc)o(h)h
(co)q(de)g(motion)d(on)h(the)i(n)o(um)o(b)q(er)e(of)h(registers)h(whic)
o(h)224 873 y(will)e(b)q(e)h(used)h(b)o(y)f(the)g(program.)287
923 y(Consider)f(the)h(case)f(of)g(an)f(access)j(to)e(a)f(scalar,)h
(statically)f(allo)q(cated)h(v)n(ariable)e(inside)224
973 y(a)j(lo)q(op.)j(W)m(e)d(shall)f(assume)g(that)h(the)h(v)n(ariable)
d(is)i(not)g(lo)q(op)f(in)o(v)n(arian)o(t.)315 1056 y
FF(lw)38 b(statVar,v1)o(00)56 b(;)12 b FE(lo)n(ad)g(wor)n(d)17
b FF(statVar)10 b FE(into)i(vR)n(e)n(g)j FD(100)224 1143
y FN(Although)c(man)o(y)e FK(RISC)17 b FN(mac)o(hine)9
b(assem)o(blers)i(supp)q(ort)h(syn)o(tax)f(as)g(in)f(this)h(example,)f
(for)224 1193 y(all)k(suc)o(h)h(mac)o(hines)f(the)h(load)f(will)f
(actually)h(tak)o(e)h(at)g(least)f(t)o(w)o(o)h(mac)o(hine)e
(instructions.)224 1243 y(This)k(is)f(so,)g(b)q(ecause)i(address)g(v)n
(alues)e(are)h(to)q(o)f(large)g(to)g(\014t)g(in)o(to)g(the)h(immedia)o
(te)d(\014eld)224 1292 y(of)i(the)i(instruction)e(format.)25
b(No)o(w,)16 b(note)h(that)g(although)e(the)i FK(value)j
FN(to)d(b)q(e)g(fetc)o(hed)g(is)224 1342 y(not)e(in)o(v)n(arian)o(t,)d
(the)j FK(addr)n(ess)j FN(of)13 b(the)i(v)n(alue)f(certainly)g(is.)19
b(Th)o(us)c(w)o(e)f(migh)o(t)e(aggressiv)o(ely)224 1392
y(preload)h(the)g(address)g(of)f(the)h(v)n(ariable)f(outside)g(of)g
(the)h(lo)q(op,)f(lea)o(ving)f(ourselv)o(es)i(a)g(single)224
1442 y(instruction)i(load)e(inside)g(the)i(lo)q(op.)688
1523 y FF(;)d FE(outside)f(the)i(lo)n(op)315 1569 y FF(la)58
b(statVar,v)o(101)36 b(;)12 b FE(lo)n(ad)g(addr)n(ess)g(of)20
b FF(statVar)315 1615 y(...)688 1660 y(;)12 b FE(inside)g(the)g(lo)n
(op)315 1706 y FF(lw)38 b(\(v101\),v10)o(0)76 b(;)12
b FE(lo)n(ad)g(wor)n(d)17 b FF(statVar)10 b FE(into)i(vR)n(e)n(g)j
FD(100)224 1790 y FN(Similar)d(reasoning)h(applies)h(in)f(the)i(case)g
(of)e(non-in)o(v)n(arian)o(t)f(indexing)h(in)o(to)g(arra)o(ys.)287
1840 y(The)j(problem)f(is)h(that)g(a)g(large)g(lo)q(op)f(migh)o(t)f
(easily)i(load)f(more)g(registers)j(with)e(ad-)224 1890
y(dresses)h(than)d(it)f(is)h(p)q(ossible)g(to)g(con)o(tain)g(in)f(the)i
(register)g(\014le)f(of)g(the)g(mac)o(hine.)j(If)d(these)224
1939 y(address)k(v)n(alues)e(are)h(spilled,)e(then)i(the)g(co)q(de)g
(will)e(almost)f(certainly)j(run)f(slo)o(w)o(er)g(than)224
1989 y(without)e(the)g(\\optimization".)287 2039 y(A)h(practical)g
(solution)f(is)h(to)g(aggressiv)o(ely)g(mo)o(v)o(e)e(suc)o(h)j(address)
g(expressions)h(out)e(of)224 2089 y(lo)q(ops,)g(but)h(to)f(mark)f(the)i
(v)n(alues)f(so)g(that)h(they)g(ma)o(y)d(b)q(e)j(giv)o(en)f(priorit)o
(y)f(for)h(spilling)f(if)224 2139 y(mac)o(hine)e(registers)i(b)q(ecome)
f(scarce.)19 b(F)m(urthermore,)12 b(if)g(suc)o(h)h(constan)o(t)h(v)n
(alues)e(fail)f(to)i(b)q(e)224 2188 y(allo)q(cated)i(to)g(mac)o(hine)f
(registers,)i(then)g(the)f(v)n(alues)g(should)g(not)g(b)q(e)h(sa)o(v)o
(ed)f(to)g(memory)224 2238 y(and)21 b(restored.)40 b(Instead)22
b(the)f(kno)o(wn)f(v)n(alues)h(should)f(b)q(e)i FK(r)n(einc)n(arnate)n
(d)j FN(as)20 b(required)224 2288 y(within)d(the)h(lo)q(op.)28
b(In)18 b(e\013ect,)h(eac)o(h)f(virtual)f(register)i(holding)d(a)h
(constan)o(t)h(expression)224 2338 y(should)f(b)q(e)g(mark)o(ed,)f(and)
g(the)h(ev)n(aluation)f(required)h(to)g(regenerate)h(the)g(v)n(alue)e
(should)224 2388 y(b)q(e)f(remem)o(b)q(ered)503 2373
y Fz(2)521 2388 y FN(.)287 2438 y(Similarl)o(y)m(,)8
b(practical)j(considerations)h(usually)f(forbid)f(the)i(mo)o(ving)d(of)
i(memory)d(store)224 2487 y(instructions)21 b(from)d(their)i(original)d
(blo)q(c)o(ks.)35 b(Mo)o(ving)19 b(v)n(alues)g(in)g(registers)j(causes)
f(no)224 2537 y(problem,)16 b(since)i(if)d(sev)o(eral)j(instances)f(of)
g(the)g(same)f(program)f(v)n(ariable)g(o)o(v)o(erlap,)i(then)p
224 2570 577 2 v 271 2597 a Fy(2)288 2609 y Fx(Note)g(w)o(ell)g(that)f
(this)h(tec)o(hnique)d(only)i(w)o(orks)h(in)g(the)g(presence)e(of)i
Fu(SSA)p Fx(.)33 b(It)17 b(is)g(of)g(no)f(use)h(to)224
2648 y(remem)o(b)q(er)11 b(that)i(a)h(particular)d(register)h(w)o(as)i
(assigned)d(the)i(v)n(alue)g(0,)h(if)f(somewhere)f(else)h(in)h(the)f
(co)q(de)224 2688 y(the)e(same)g(register)e(w)o(as)j(assigned)e(the)g
(v)n(alue)h(1.)p eop
%%Page: 241 247
241 246 bop 224 274 a FL(9.6.)31 b(INDUCTION)14 b(V)-5
b(ARIABLES)781 b FN(241)224 390 y(the)11 b(graph)e(coloring)g(in)o(v)o
(olv)o(ed)f(in)h(con)o(v)o(erting)g(bac)o(k)h(in)o(to)f(standard)h(co)q
(de)g(will)e(ensure)j(that)224 440 y(eac)o(h)17 b(instance)g(is)f(allo)
q(cated)f(to)h(a)g(di\013eren)o(t)h(mac)o(hine)d(register.)26
b(Ho)o(w)o(ev)o(er,)17 b(if)e(memory)224 490 y(v)n(alues)f(are)h(mo)o
(v)o(ed,)d(then)i(w)o(e)h(m)o(ust)e(b)q(e)i(prepared)g(to)f(reassign)g
(lo)q(cations)g(in)g(memory)d(if)224 540 y(it)j(happ)q(ens)h(that)f
(instances)h(ha)o(v)o(e)e(o)o(v)o(erlapping)g(lifetimes.)224
683 y FI(9.6)67 b(Induction)24 b(v)l(ariables)224 776
y FN(There)15 b(is)e(a)f(di\013eren)o(t)j(kind)d(of)h(lo)q(op)f
(optimization)e(whic)o(h)j(is)g(often)g(v)o(ery)h(v)n(aluable.)i(This)
224 826 y(arises)j(when)g(v)n(ariables)e(inside)h(a)g(lo)q(op)f(ha)o(v)
o(e)h(v)n(alues)f(whic)o(h)h(increase)h(or)f(decrease)j(b)o(y)224
876 y(the)c(same)d(amoun)o(t)g(on)i(eac)o(h)g(tra)o(v)o(ersal)g(of)f
(the)h(lo)q(op.)22 b(T)m(aking)15 b(the)h(example)e(of)h(matrix)224
926 y(m)o(ultiplication)c(again,)j(\014gure)h(9.11)e(sho)o(ws)i(the)g
FK(SSA)g FN(co)q(de)h(after)f(the)g(remo)o(v)n(al)d(of)i(lo)q(op-)224
976 y(in)o(v)n(arian)o(t)f(sub)q(expressions.)p 342 1079
1207 2 v 341 1129 2 50 v 367 1114 a FG(lab1:)605 b FN(;)13
b FK(lo)n(op)i(lab)n(el)p 1547 1129 V 341 1179 V 525
1164 a FM(v)545 1170 y FB(k)q Fz(2)594 1164 y FN(:=)c
FM(v)669 1170 y FB(k)q Fz(1)716 1164 y FN(+)e(1)304 b(;)13
b FK(incr)n(ement)i(lo)n(op)g(c)n(ounter)p 1547 1179
V 341 1229 V 367 1214 a FG(lab2:)605 b FN(;)13 b FK(lo)n(op)i(entry)g
(lab)n(el)p 1547 1229 V 341 1278 V 525 1263 a FM(v)545
1269 y FB(k)q Fz(1)594 1263 y FN(:=)c(\010\()p FM(v)715
1269 y FB(k)q Fz(0)753 1263 y FM(;)c(v)792 1269 y FB(k)q
Fz(2)828 1263 y FN(\))238 b(;)13 b(\010)h FK(function)h(on)j
FN(k)p 1547 1278 V 341 1328 V 525 1313 a FM(v)545 1319
y FB(t)p Fz(1)588 1313 y FN(:=)12 b(\010\()p FM(v)710
1319 y FB(t)p Fz(0)741 1313 y FM(;)7 b(v)780 1319 y FB(t)p
Fz(2)811 1313 y FN(\))255 b(;)13 b(\010)h FK(function)h(on)j
FN(t)p 1547 1328 V 341 1378 V 525 1363 a FM(v)545 1369
y Fz(1)576 1363 y FN(:=)11 b FM(v)651 1369 y Fz(5)679
1363 y FN(+)f FM(v)741 1369 y FB(k)q Fz(1)787 1363 y
Ft(\002)f FN(8)233 b(;)13 b FK(addr)n(ess)i(of)23 b FN(a[i,k])p
1547 1378 V 341 1428 V 525 1413 a FM(v)545 1419 y Fz(2)576
1413 y FN(:=)11 b FM(v)651 1419 y Fz(6)679 1413 y FN(+)f
FM(v)741 1419 y FB(k)q Fz(1)787 1413 y Ft(\002)f FM(v)848
1419 y FB(n)880 1413 y Ft(\002)h FN(8)f(+)g FM(v)1013
1419 y Fz(7)1082 1413 y FN(;)k FK(addr)n(ess)i(of)23
b FN(b[k,j])p 1547 1428 V 341 1478 V 525 1463 a FM(v)545
1469 y Fz(3)576 1463 y FN(:=)11 b FM(v)651 1469 y Fz(1)681
1463 y Ft(")702 1469 y FB(D)1082 1463 y FN(;)i FK(value)i(of)23
b FN(a[i,k])p 1547 1478 V 341 1527 V 525 1512 a FM(v)545
1518 y Fz(4)576 1512 y FN(:=)11 b FM(v)651 1518 y Fz(2)681
1512 y Ft(")702 1518 y FB(D)1082 1512 y FN(;)i FK(value)i(of)23
b FN(b[k,j])p 1547 1527 V 341 1577 V 525 1562 a FM(v)545
1568 y FB(t)p Fz(2)588 1562 y FN(:=)12 b FM(v)664 1568
y FB(t)p Fz(1)704 1562 y FN(+)736 1568 y FB(D)776 1562
y FM(v)796 1568 y Fz(3)824 1562 y Ft(\002)856 1568 y
FB(D)895 1562 y FM(v)915 1568 y Fz(4)1082 1562 y FN(;)h
FK(up)n(date)j(the)f(total)i FN(t)p 1547 1577 V 341 1627
V 525 1612 a FG(cmp)d FM(v)625 1618 y FB(k)q Fz(1)662
1612 y FM(;)7 b(v)701 1618 y FB(m)1082 1612 y FN(;)13
b FK(test)i(for)f(lo)n(op)h(end)p 1547 1627 V 341 1677
V 525 1662 a FG(bne)22 b(lab1)381 b FN(;)13 b FK(br)n(anch)i(if)g(not)g
(e)n(qual)p 1547 1677 V 342 1678 1207 2 v 224 1794 a
FN(Figure)f(9.11:)i(Inner)e(lo)q(op)f(of)f(matrix)g(m)o(ultipli)o
(cation,)e(after)j(remo)o(v)n(al)e(of)i(lo)q(op-in)o(v)n(arian)o(t)224
1844 y(sub)q(expressions)287 1947 y(In)i(this)h(\014gure,)g(some)f
(analysis)f(will)h(sho)o(w)g(that)h(eac)o(h)g(time)e(through)i(the)g
(lo)q(op)f(the)224 1997 y(v)n(alue)20 b(of)f FM(v)411
2003 y Fz(1)450 1997 y FN(is)h(greater)h(than)f(the)h(previous)f(v)n
(alue)g(b)o(y)g(exactly)g(8.)36 b(Similarly)m(,)18 b(eac)o(h)224
2047 y(time)e(through)h(the)h(lo)q(op)e(the)i(v)n(alue)e(of)h
FM(v)907 2053 y Fz(2)943 2047 y FN(is)g(greater)h(b)o(y)f(exactly)g(\()
p FM(v)1375 2053 y FB(n)1409 2047 y Ft(\002)12 b FN(8\).)27
b(Th)o(us)18 b(it)224 2097 y(is)e(p)q(ossible)g(to)g(initialize)f(the)h
(t)o(w)o(o)g(address)h(v)n(alues)f(outside)g(the)h(lo)q(op,)e(and)h
(incremen)o(t)224 2147 y(eac)o(h)h(b)o(y)f(the)g(appropriate)g(amoun)o
(t)e(in)i(the)g(lo)q(op)f(latc)o(hing)g(no)q(de.)25 b(The)16
b(total)f(e\013ect)j(of)224 2196 y(this)e(transformation)d(is)j(to)f
(replace)i(the)f(m)o(ultipli)o(cation)d(and)i(additions)g(on)g(eac)o(h)
h(pass)224 2246 y(with)e(t)o(w)o(o)f(simple)g(additions.)287
2297 y(In)e(order)h(to)g(p)q(erform)f(suc)o(h)h(transformations,)e(w)o
(e)i(m)o(ust)e(b)q(e)i(able)g(to)f(recognize)i(those)224
2347 y(expressions)18 b(whic)o(h)d(ha)o(v)o(e)g(these)i(simple)d(step)o
(wise)j(v)n(alue)e(sequences.)26 b(Suc)o(h)16 b(v)n(alues)f(are)224
2397 y(called)c FK(simple)h(induction)h(variables)p FN(.)j(The)c(name)e
(refers)i(to)f(the)g(classical)g FK(pr)n(o)n(of)h(by)g(math-)224
2447 y(ematic)n(al)17 b(induction)k FN(tec)o(hnique)c(that)g(w)o(ould)f
(b)q(e)h(used)g(to)g(pro)o(v)o(e)f(that)h(the)g(recurrence)224
2497 y(equation)d(|)721 2550 y Ft(8)p FM(m)f Ft(\025)e
FN(0)h(:)f FM(x)916 2556 y FB(m)p Fz(+1)1001 2550 y FN(=)g
FM(x)1068 2556 y FB(m)1109 2550 y FN(+)e FM(c)224 2628
y FN(has)14 b(the)h(solution)e(|)721 2681 y Ft(8)p FM(n)f
Ft(\025)g FN(0)f(:)g FM(x)904 2687 y FB(n)938 2681 y
FN(=)h FM(x)1006 2687 y Fz(0)1033 2681 y FN(+)e FM(c)f
Ft(\002)g FM(n)p eop
%%Page: 242 248
242 247 bop 224 274 a FN(242)331 b FL(CHAPTER)14 b(9.)31
b(ST)m(A)m(TIC)14 b(SINGLE)f(ASSIGNMENT)i(F)o(ORM)224
390 y FH(9.6.1)56 b(Recognizing)17 b(induction)h(v)m(ariables)224
468 y FN(The)f(most)e(general)i(form)d(of)i(induction)g(v)n(ariable)f
(whic)o(h)i(w)o(e)f(consider)h(here)h(are)f(those)224
518 y(that)d(step)h(in)f(v)n(alue)f(b)o(y)h(some)f(lo)q(op-in)o(v)n
(arian)o(t)e(amoun)o(t)h(on)i(eac)o(h)h(tra)o(v)o(ersal)f(of)f(the)i
(lo)q(op.)224 568 y(W)m(e)i(shall)e(assume)h(that)h(on)f(the)h
FM(n)p FN(-th)g(iteration)f(of)g(the)h(lo)q(op)e(the)i(expression)h
(has)f(the)224 618 y(v)n(alue)d(|)635 669 y FM(v)655
675 y FB(n)689 669 y FN(=)e FM(E)764 682 y FK(init)849
669 y FN(+)21 b FM(E)933 680 y FK(step)1026 669 y Ft(\002)g
FK(tripCount)224 745 y FN(where)14 b FM(E)374 758 y FK(init)450
745 y FN(is)f(a)f(lo)q(op-in)o(v)n(arian)o(t)d(initialization)h(v)n
(alue,)h(and)i FM(E)1256 757 y FK(step)1341 745 y FN(is)f(a)g(lo)q
(op-in)o(v)n(arian)o(t)224 795 y(incremen)o(t)h(v)n(alue,)f(and)h
(where)h FK(tripCount)i FN(is)d(the)h(n)o(um)o(b)q(er)e(of)g(times)g
(that)h(the)h(bac)o(k)o(edge)224 845 y(of)g(the)g(lo)q(op)f(has)h(b)q
(een)h(tra)o(v)o(ersed.)287 895 y(In)9 b(order)h(to)g(determine)f(whic)
o(h)h(expressions)h(computed)e(within)g(a)g(lo)q(op)g(are)h(induction)
224 945 y(v)n(ariables)16 b(in)h(the)g(required)h(form,)d(w)o(e)i
(\014rst)g(observ)o(e)h(that)f(all)f(suc)o(h)h(expressions)h(m)o(ust)
224 995 y(dep)q(end)f(directly)f(or)f(indirectly)g(on)h(v)n(ariables)e
(app)q(earing)h(in)g(\010)h(functions)f(in)g(the)h(lo)q(op)224
1045 y(header)e(blo)q(c)o(k.)k(W)m(e)13 b(call)f(all)g(suc)o(h)i(v)n
(ariables,)e(whic)o(h)h(app)q(ear)g(as)g(left-hand-sides)h(of)e(lo)q
(op)224 1095 y(header)j(\010)f(functions)g FK(lo)n(op)h(c)n(arrie)n(d)f
(variables)p FN(.)287 1145 y(Not)d(all)g(lo)q(op)g(carried)h(v)n
(ariables)f(are)h(useful)g(for)f(forming)e(induction)i(expressions.)19
b(In)224 1195 y(order)d(to)e(b)q(e)i(useful,)e(the)h(lo)q(op)f(v)n
(ariable)g(m)o(ust)g(step)h(b)o(y)g(some)e(lo)q(op-in)o(v)n(arian)o(t)g
(amoun)o(t.)224 1245 y(W)m(e)h(shall)f(call)g(suc)o(h)i(v)n(ariables)e
FK(induction)i(b)n(ase)h(variables)p FN(.)287 1295 y(In)i(order)h(to)e
(\014nd)i(the)f(induction)g(base)h(v)n(ariables,)f(eac)o(h)g(\010)g
(function)g(in)f(the)i(lo)q(op)224 1345 y(header)c(blo)q(c)o(k)f(m)o
(ust)e(b)q(e)j(examined)d(in)i(turn.)k(The)c(argumen)o(t)f(whic)o(h)h
(reac)o(hes)h(the)f(func-)224 1395 y(tion)k(along)e(the)i(bac)o(k)o
(edge)h(from)d(the)i(latc)o(hing)f(no)q(de)h(is)g(traced)h(bac)o(kw)o
(ard)e(along)g(the)224 1445 y(edges)g(of)e(its)h(dep)q(endence)i(graph)
d(un)o(til)g(its)h(b)q(eha)o(viour)f(is)h(kno)o(wn.)22
b(If)16 b(it)f(dep)q(ends)i(only)224 1494 y(on)f(its)f(o)o(wn)h(lo)q
(op)f(carried)h(v)n(ariable,)e(with)i(additiv)o(e)f(in)o(v)n(arian)o(t)
f(expressions,)j(then)f(it)f(is)224 1544 y(a)f(base)g(v)n(ariable)494
1529 y Fz(3)512 1544 y FN(.)k(All)13 b(the)h(other)h(lo)q(op-caried)e
(v)n(ariables)g(are)h(mark)o(ed)f(as)h(b)q(ottom)e(\()p
Ft(?)p FN(\).)224 1594 y(The)k(data)e(structures)j(used)f(for)e(global)
f(common)f(sub)q(expression)k(elimination)c(con)o(tain)224
1644 y(su\016cien)o(t)i(information)c(to)i(allo)o(w)f(suc)o(h)j
(tracing)f(of)f(the)h(dep)q(endences)j(to)d(b)q(e)g(p)q(erformed.)287
1694 y(Once)h(the)h(induction)e(base)h(v)n(ariables)f(are)h(kno)o(wn,)e
(it)i(is)f(p)q(ossible)h(to)f(\014nd)h(all)e(induc-)224
1744 y(tion)18 b(v)n(ariables)g(in)g(a)g(single)g(rev)o(erse)i(p)q(ost)
f(order)g(pass)f(o)o(v)o(er)h(the)g(blo)q(c)o(ks)f(of)g(the)h(lo)q(op.)
224 1794 y(W)m(e)d(extend)h(our)f(v)n(alue)g(lattice)g(so)g(that)h(it)e
(distinguishes)i(induction)e(\()p FK(step)s FN(\))i(v)n(ariables,)224
1844 y(as)f(w)o(ell)g(as)g(the)g(usual)g(constan)o(t,)g(lo)q(op-in)o(v)
n(arian)o(t)e(and)h Ft(?)h FN(v)n(alues.)23 b(In)16 b(this)g(framew)o
(ork,)224 1893 y(w)o(e)d(rank)f(constan)o(ts)h(\()p FK(c)n(onst)t
FN(\))f(higher)g(than)g(lo)q(op)f(in)o(v)n(arian)o(ts)g(\()p
FK(invariant)t FN(\),)h(whic)o(h)g(in)g(turn)224 1943
y(are)i(higher)f(than)h(induction)f(v)n(ariables)f(of)h(either)h(kind)f
(\()p FK(step)s FN(\).)18 b(All)12 b(of)h(these)i(are)e(higher)224
1993 y(than)h Ft(?)p FN(.)287 2043 y(With)f(this)h(form)o(ulation,)c
(all)j(of)g(the)i(follo)o(wing)c(are)j(induction)g(v)n(ariables)f(|)287
2128 y Ft(\017)20 b FN(an)14 b(induction)f(base)i(v)n(ariable)287
2213 y Ft(\017)20 b FN(the)15 b(sum)e(of)g(t)o(w)o(o)g(v)n(alues)h(eac)
o(h)g Ft(\025)g FK(step)287 2299 y Ft(\017)20 b FN(the)15
b(pro)q(duct)f(of)g(a)f FK(step)k FN(and)d(an)o(y)f(v)n(alue)g
Ft(\025)h FK(invariant)224 2383 y FN(All)f(other)i(computations)d(are)j
(in)o(v)n(arian)o(t,)d(or)h(are)i(mark)o(ed)d(as)i Ft(?)p
FN(.)287 2434 y(Note)21 b(that)f(w)o(e)h(are)g(not)g(required)g(to)g
(build)f(an)o(y)g(additional)e(data)j(structure)h(to)224
2483 y(represen)o(t)17 b(the)e(initial)e(and)h(step)i(expressions)g(of)
e(an)g(induction)g(v)n(ariable.)19 b(In)c(the)g FK(SSA)q
FN(-)224 2533 y(form,)h(the)i(v)n(alue)f(dep)q(endence)j(graph)d(con)o
(tains)g(su\016cien)o(t)h(information)c(to)j(allo)o(w)f(the)p
224 2570 577 2 v 271 2597 a Fy(3)288 2609 y Fx(Here)f(w)o(e)g(ha)o(v)o
(e)f(actually)f(wimp)q(ed)g(out)i(sligh)o(tly)m(.)23
b(In)15 b(truth,)f(some)g(dep)q(endence)o(s)f(on)h(other)g(lo)q(op)224
2648 y(carried)d(v)n(ariables)f(should)h(also)g(b)q(e)h(p)q(ermitted.)j
(The)e(c)o(hoice)d(made)h(here)h(captures)e(the)h(v)n(ast)h(ma)r(jorit)
o(y)224 2688 y(of)g(cases,)e(and)h(simpli\014es)e(the)i(algorithm)d
(signi\014can)o(tly)m(.)p eop
%%Page: 243 249
243 248 bop 224 274 a FL(9.6.)31 b(INDUCTION)14 b(V)-5
b(ARIABLES)781 b FN(243)224 390 y(initial)15 b(part)i(and)g(the)g(step)
h(expression)g(to)f(b)q(e)g(determined)g(from)e(separate)j(tra)o(v)o
(ersals)224 440 y(of)e(the)i(graph.)26 b(W)m(e)16 b(ma)o(y)e(treat)k
(the)f(dep)q(endence)i(graph)e(of)f(an)g(induction)g(expression)224
490 y(as)e(ha)o(ving)e(an)i(em)o(b)q(edded)f(expression)i(tree,)f(the)g
(lea)o(v)o(es)g(of)f(whic)o(h)g(are)h(constan)o(ts,)g(lo)q(op-)224
540 y(in)o(v)n(arian)o(ts)f(and)h(induction)f(base)i(v)n(ariables.)224
690 y FH(9.6.2)56 b(T)-5 b(ransforming)17 b(the)i(lo)r(op)224
779 y FN(Supp)q(ose)h(that)e(an)h(induction)f(v)n(ariable)f(has)i(b)q
(een)g(disco)o(v)o(ered)h(within)d(a)i(lo)q(op)e(in)h(our)224
828 y(canonical)f(form.)25 b(Figure)18 b(9.12)d(sho)o(ws)j(suc)o(h)f(a)
g(canonical)g(lo)q(op)f(b)q(efore)i(and)e(after)i(the)224
878 y(lo)q(op)13 b(is)h(transformed.)k(Once)d(an)e(induction)h(v)n
(ariable)e(has)i(b)q(een)h(iden)o(ti\014ed,)f(the)g(initial-)220
949 y
 22892052 12235407 0 0 22892052 12235407 startTexFig
 220 949 a
%%BeginDocument: induction.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-32.0 206.0 translate 0.810 -0.810 scale
1.000 setlinewidth
% Polyline
n 119 79 m 119 39 l  39 39 l  39 79 l  clp gs col-1 s gr
% Polyline
n 119 149 m 119 109 l  39 109 l  39 149 l  clp gs col-1 s gr
% Polyline
n 119 239 m 119 199 l  39 199 l  39 239 l  clp gs col-1 s gr
% Polyline
n 219 79 m 219 39 l  139 39 l  139 79 l  clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 79 79 m 79 109 l gs col-1 s gr
n 81.000 101.000 m 79.000 109.000 l 77.000 101.000 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Polyline
n 79 149 m 79 199 l gs col-1 s gr
	[] 0 setdash
n 81.000 191.000 m 79.000 199.000 l 77.000 191.000 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
% Polyline
n 344 79 m 344 39 l  264 39 l  264 79 l  clp gs col-1 s gr
% Polyline
n 344 149 m 344 109 l  264 109 l  264 149 l  clp gs col-1 s gr
% Polyline
n 344 239 m 344 199 l  264 199 l  264 239 l  clp gs col-1 s gr
% Polyline
n 444 79 m 444 39 l  364 39 l  364 79 l  clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 304 79 m 304 109 l gs col-1 s gr
n 306.000 101.000 m 304.000 109.000 l 302.000 101.000 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Polyline
n 304 149 m 304 199 l gs col-1 s gr
	[] 0 setdash
n 306.000 191.000 m 304.000 199.000 l 302.000 191.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 179.000 79.000 m 179.000 86.500 l
	179.000 86.500 179.000 94.000 134.000 94.000 DrawSplineSection
	134.000 94.000 89.000 94.000 89.000 101.500 DrawSplineSection
	89.000 109.000 l gs col-1 s gr
n 91.000 101.000 m 89.000 109.000 l 87.000 101.000 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Open spline
n 79.000 239.000 m 79.000 246.500 l
	79.000 246.500 79.000 254.000 161.500 254.000 DrawSplineSection
	161.500 254.000 244.000 254.000 244.000 139.000 DrawSplineSection
	244.000 139.000 244.000 24.000 211.500 24.000 DrawSplineSection
	211.500 24.000 179.000 24.000 179.000 31.500 DrawSplineSection
	179.000 39.000 l gs col-1 s gr
	[] 0 setdash
n 181.000 31.000 m 179.000 39.000 l 177.000 31.000 l gs 2 setlinejoin col-1 s gr
% Open spline
n 404.000 79.000 m 404.000 86.500 l
	404.000 86.500 404.000 94.000 359.000 94.000 DrawSplineSection
	359.000 94.000 314.000 94.000 314.000 101.500 DrawSplineSection
	314.000 109.000 l gs col-1 s gr
n 316.000 101.000 m 314.000 109.000 l 312.000 101.000 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Open spline
n 304.000 239.000 m 304.000 246.500 l
	304.000 246.500 304.000 254.000 386.500 254.000 DrawSplineSection
	386.500 254.000 469.000 254.000 469.000 139.000 DrawSplineSection
	469.000 139.000 469.000 24.000 436.500 24.000 DrawSplineSection
	436.500 24.000 404.000 24.000 404.000 31.500 DrawSplineSection
	404.000 39.000 l gs col-1 s gr
	[] 0 setdash
n 406.000 31.000 m 404.000 39.000 l 402.000 31.000 l gs 2 setlinejoin col-1 s gr
/Times-Roman findfont 10.00 scalefont setfont
49 214 m 
gs 1 -1 scale (eval  x) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
50 226 m 
gs 1 -1 scale (use   x) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
271 73 m 
gs 1 -1 scale (eval  s) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
272 225 m 
gs 1 -1 scale (use   x) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
305 126 m 
gs 1 -1 scale (\(x  ,x  \)) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
285 126 m 
gs 1 -1 scale (:=) col-1 show gr
/Symbol findfont 10.00 scalefont setfont
296 126 m 
gs 1 -1 scale (F) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
272 126 m 
gs 1 -1 scale (x) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
271 63 m 
gs 1 -1 scale (eval  x) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
371 68 m 
gs 1 -1 scale (x  := x  + s) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
297 67 m 
gs 1 -1 scale (0) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
276 130 m 
gs 1 -1 scale (1) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
313 130 m 
gs 1 -1 scale (0) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
326 130 m 
gs 1 -1 scale (2) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
297 229 m 
gs 1 -1 scale (1) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
396 72 m 
gs 1 -1 scale (1) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
375 73 m 
gs 1 -1 scale (2) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 224 1815 a FN(Figure)i(9.12:)21 b(Lo)q(op)15 b(with)g(induction)h(v)n
(ariable)e FM(x)e FN(:=)f FM(x)1127 1821 y Fz(0)1155
1815 y FN(+)e FM(s)h Ft(\002)f FM(n)p FN(,)16 b(where)h
FM(n)e FN(is)h(the)g(trip)224 1865 y(coun)o(t,)e(b)q(efore)h(and)e
(after)i(transformation)224 1977 y(ization)d(and)g(step)i(expressions)g
(m)o(ust)d(b)q(e)i(determined.)18 b(A)12 b(new)h(lo)q(op)f(carried)h(v)
n(ariable)e(is)224 2027 y(in)o(tro)q(duced)k(whic)o(h)f(will)f(b)q(e)h
(used)h(instead)g(of)e(the)i(induction)e(v)n(ariable.)k(Of)d(course,)h
(this)224 2077 y(v)n(ariable)c(will)g(require)h(a)g(new)g(\010)g
(function)g(in)f(the)i(lo)q(op)e(header.)18 b(The)13
b(ev)n(aluations)d(of)i(the)224 2127 y(initialization)i(and)i(step)h
(expressions)h(are)e(then)h(placed)g(in)e(the)i(lo)q(op)f(pre-header,)h
(and)224 2177 y(an)c(incremen)o(t)f(of)f(the)i(new)g(v)n(ariable)e(b)o
(y)h(the)h(step)h(amoun)o(t)c(placed)j(in)f(the)h(lo)q(op)e(latc)o
(hing)224 2226 y(no)q(de.)287 2283 y(On)i(mac)o(hine)g(arc)o
(hitectures)i(whic)o(h)f(ha)o(v)o(e)f(a)g(t)o(w)o(o-register)h(address)
h(mo)q(de,)d(it)h(is)g(p)q(os-)224 2332 y(sible)j(to)f(determine)g(all)
f(those)i(memory)c(accesses)18 b(with)d(induction)g(v)n(ariable)f
(addresses)224 2382 y(whic)o(h)h(share)g(the)g(same)f(incremen)o(t)h
(expression.)21 b(All)14 b(of)g(the)h(memory)d(accesses)17
b(within)224 2432 y(suc)o(h)g(a)e(group)g(ma)o(y)e(then)j(share)h(the)f
(same)e(lo)q(op)h(carried)h(v)n(ariable.)22 b(In)15 b(this)g(case)i
(eac)o(h)224 2482 y(address)c(w)o(ould)d(use)i(its)g(o)o(wn)e
(initialization)f(as)i(one)h(address)g(register,)h(and)e(the)h(lo)q(op)
e(car-)224 2532 y(ried)15 b(v)n(ariable)e(shared)j(with)e(all)f(other)i
(mem)o(b)q(ers)e(of)h(the)h(group)f(as)h(the)g(second)g(address)224
2582 y(register.)287 2638 y(When)21 b(induction)f(v)n(ariable)g
(analysis)g(is)g(applied)g(to)h(our)g(matrix)e(m)o(ultiplicatio)o(n)224
2688 y(example)13 b(w)o(e)g(\014nd)h(t)o(w)o(o)f(induction)g(v)n
(ariables,)g(whic)o(h)g(w)o(e)h(shall)f(call)g FM(x)g
FN(and)g FM(y)q FN(.)19 b(The)14 b(\014rst,)p eop
%%Page: 244 250
244 249 bop 224 274 a FN(244)331 b FL(CHAPTER)14 b(9.)31
b(ST)m(A)m(TIC)14 b(SINGLE)f(ASSIGNMENT)i(F)o(ORM)p 376
392 1139 2 v 375 442 2 50 v 400 427 a FG(lab1:)508 b
FN(;)13 b FK(lo)n(op)i(lab)n(el)p 1513 442 V 375 492
V 559 477 a FM(v)579 483 y FB(k)q Fz(2)628 477 y FN(:=)c
FM(v)703 483 y FB(k)q Fz(1)750 477 y FN(+)e(1)206 b(;)13
b FK(incr)n(ement)i(lo)n(op)g(c)n(ounter)p 1513 492 V
375 542 V 559 527 a FM(v)579 533 y FB(x)p Fz(2)628 527
y FN(:=)d FM(v)704 533 y FB(x)p Fz(1)750 527 y FN(+)e(8)205
b(;)13 b FK(incr)n(ement)i(ind-variable)h FN(x)p 1513
542 V 375 591 V 559 576 a FM(v)579 582 y FB(y)q Fz(2)627
576 y FN(:=)c FM(v)703 582 y FB(y)q Fz(1)749 576 y FN(+)d
FM(v)810 582 y Fz(8)1018 576 y FN(;)k FK(incr)n(ement)i(ind-variable)h
FN(y)p 1513 591 V 375 641 V 400 626 a FG(lab2:)508 b
FN(;)13 b FK(lo)n(op)i(entry)g(lab)n(el)p 1513 641 V
375 691 V 559 676 a FM(v)579 682 y FB(k)q Fz(1)628 676
y FN(:=)c(\010\()p FM(v)749 682 y FB(k)q Fz(0)786 676
y FM(;)c(v)825 682 y FB(k)q Fz(2)862 676 y FN(\))140
b(;)13 b(\010)h FK(function)h(on)j FN(k)p 1513 691 V
375 741 V 559 726 a FM(v)579 732 y FB(t)p Fz(1)622 726
y FN(:=)11 b(\010\()p FM(v)743 732 y FB(t)p Fz(0)775
726 y FM(;)c(v)814 732 y FB(t)p Fz(2)845 726 y FN(\))157
b(;)13 b(\010)h FK(function)h(on)j FN(t)p 1513 741 V
375 791 V 559 776 a FM(v)579 782 y FB(x)p Fz(1)628 776
y FN(:=)12 b(\010\()p FM(v)750 782 y FB(x)p Fz(0)787
776 y FM(;)7 b(v)826 782 y FB(x)p Fz(2)863 776 y FN(\))139
b(;)13 b(\010)h FK(function)h(on)j FN(x)p 1513 791 V
375 840 V 559 826 a FM(v)579 832 y FB(y)q Fz(1)627 826
y FN(:=)12 b(\010\()p FM(v)749 832 y FB(y)q Fz(0)786
826 y FM(;)7 b(v)825 832 y FB(y)q Fz(2)861 826 y FN(\))141
b(;)13 b(\010)h FK(function)h(on)j FN(y)p 1513 840 V
375 890 V 559 875 a FM(v)579 881 y Fz(3)610 875 y FN(:=)11
b FM(v)685 881 y FB(x)p Fz(1)734 875 y Ft(")755 881 y
FB(D)1018 875 y FN(;)i FK(value)i(of)23 b FN(a[i,k])p
1513 890 V 375 940 V 559 925 a FM(v)579 931 y Fz(4)610
925 y FN(:=)11 b FM(v)685 931 y FB(y)q Fz(1)733 925 y
Ft(")754 931 y FB(D)1018 925 y FN(;)i FK(value)i(of)23
b FN(b[k,j])p 1513 940 V 375 990 V 559 975 a FM(v)579
981 y FB(t)p Fz(2)622 975 y FN(:=)11 b FM(v)697 981 y
FB(t)p Fz(1)738 975 y FN(+)770 981 y FB(D)810 975 y FM(v)830
981 y Fz(3)858 975 y Ft(\002)890 981 y FB(D)929 975 y
FM(v)949 981 y Fz(4)1018 975 y FN(;)i FK(up)n(date)j(the)f(total)i
FN(t)p 1513 990 V 375 1040 V 559 1025 a FG(cmp)c FM(v)658
1031 y FB(k)q Fz(1)696 1025 y FM(;)7 b(v)735 1031 y FB(m)1018
1025 y FN(;)13 b FK(test)i(for)f(lo)n(op)h(end)p 1513
1040 V 375 1090 V 559 1075 a FG(bne)21 b(lab1)284 b FN(;)13
b FK(br)n(anch)i(if)g(not)g(e)n(qual)p 1513 1090 V 376
1091 1139 2 v 236 1207 a FN(Figure)f(9.13:)j(Matrix)c(m)o(ultiply)e
(inner)k(lo)q(op,)d(with)i(transformed)f(induction)g(v)n(ariables)224
1341 y FM(x)p FN(,)h(steps)h(b)o(y)e(a)h(constan)o(t)g(8,)g(and)f(is)h
(initialized)e(to)i(|)734 1433 y FM(x)758 1439 y Fz(0)788
1433 y FN(:=)d(&)p FM(a)f FN(+)f FM(v)968 1439 y FB(i)991
1433 y Ft(\002)h FM(v)1053 1439 y FB(m)1094 1433 y Ft(\002)f
FN(8)224 1525 y(The)19 b(second)g(induction)f(v)n(ariable,)f
FM(y)q FN(,)i(steps)h(b)o(y)d(the)i(lo)q(op)e(in)o(v)n(arian)o(t)f
(amoun)o(t)h FM(v)1560 1531 y FB(n)1592 1525 y Ft(\002)9
b FN(8.)224 1574 y(This)14 b(v)n(ariable)f(is)h(initialized)e(to)i(|)
787 1667 y FM(y)807 1673 y Fz(0)837 1667 y FN(:=)e(&)p
FM(b)d FN(+)h FM(v)1014 1673 y FB(j)1041 1667 y Ft(\002)f
FN(8)224 1759 y(With)h(these)h(de\014nitions,)f(the)h(inner)f(lo)q(op)f
(of)h(the)g(matrix)e(m)o(ultiply)g(b)q(ecomes)i(as)g(sho)o(wn)g(in)224
1808 y(\014gure)h(9.13.)16 b(Note)10 b(that)g(the)h(address)g
(expression)h(computations)c(ha)o(v)o(e)i(b)q(een)h(completely)224
1858 y(eliminated,)e(and)g(replaced)i(b)o(y)e(t)o(w)o(o)g(simple)g
(additions)f(instructions)j(in)e(the)h(lo)q(op)f(latc)o(hing)224
1908 y(no)q(de.)18 b(The)13 b(appropriate)f(comparison)f(is)h(with)g
(\014gure)h(9.11,)e(whic)o(h)h(on)g(eac)o(h)g(pass)h(of)f(the)224
1958 y(lo)q(op)k(requires)i(three)f(additions,)f(t)o(w)o(o)g(shifts)g
(and)h(one)f(m)o(ultiply)m(.)23 b(Of)16 b(course,)i(without)224
2008 y(lo)q(op)e(in)o(v)n(arian)o(t)e(co)q(de)j(motion)d(the)j
(comparison)e(is)h(ev)o(en)h(more)e(fa)o(v)o(orable)g(to)h(our)g
(\014nal)224 2057 y(v)o(ersion.)287 2108 y(As)i(usual,)g(some)f
(practical)g(considerations)h(apply)m(.)29 b(Induction)17
b(v)n(ariable)g(analysis)224 2157 y(will)11 b(generate)i(additional)d
(register)k(v)n(alues,)d(whic)o(h)h(are)h(required)g(to)e(b)q(e)i(liv)o
(e)e(throughout)224 2207 y(the)h(b)q(o)q(dy)f(of)g(the)h(lo)q(op.)k
(This)11 b(ma)o(y)e(add)i(considerably)g(to)g(the)h(register)g
(pressure)i(in)c(some)224 2257 y(cases,)15 b(causing)f(additional)e
(register)j(spilling.)287 2307 y(As)e(w)o(ell,)f(questions)h(of)f
(safet)o(y)h(and)f(pro\014tabilit)o(y)g(suggest)h(that)g(the)g
(transformation)224 2357 y(of)g(induction)g(expressions)h(whic)o(h)f
(are)h(computed)e(in)h(non-do)o(wn-safe)g(blo)q(c)o(ks)g(should)g(b)q
(e)224 2407 y(done)i(with)e(the)i(usual)e(cautions.)224
2546 y FI(9.7)67 b(Extended)23 b(forms)f(of)f(SSA)224
2638 y FN(The)g(simple)e(approac)o(h)i(to)f(static)h(single)f
(assignmen)o(t)f(form)g(outlined)h(here)h(ma)o(y)e(b)q(e)224
2688 y(extended)j(in)e(a)g(n)o(um)o(b)q(er)g(of)g(w)o(a)o(ys.)37
b FK(SSA)21 b FN(form,)e(in)h(common)e(with)i(the)h(underlying)p
eop
%%Page: 245 251
245 250 bop 224 274 a FL(9.8.)31 b(FINDING)14 b(OUT)g(MORE)848
b FN(245)224 390 y(data\015o)o(w)10 b(analysis)f(metho)q(d,)g(deals)h
(with)g FK(al)r(l)h(p)n(ossible)h FN(paths)f(in)e(the)i
FK(CF)o(G)t FN(.)e(A)h(more)f(exact)224 440 y(analysis)h(is)g(p)q
(ossible)g(if)g(w)o(e)g(tak)o(e)g(accoun)o(t)h(of)e(the)i(conditional)e
(expressions)j(whic)o(h)e(lead)f(to)224 490 y(particular)j(paths)g(b)q
(eing)f(tak)o(en.)17 b(Gated)12 b FK(SSA)p FN([)p FO(?)p
FN(])17 b(is)11 b(suc)o(h)h(a)g(form,)d(in)i(whic)o(h)h(\010)f
(functions)224 540 y(are)16 b(decorated)g(with)e(the)h(conditional)f
(expressions.)22 b(The)15 b FK(pr)n(o)n(gr)n(am)g(dep)n(endenc)n(e)i
(gr)n(aph)224 590 y FN(is)d(another)g(represen)o(tation,)h(whic)o(h)f
(carries)h(equiv)n(alen)o(t)e(information.)287 641 y
FG(<Maybe)20 b(something)g(on)i(an)f(application)e(of)j(gated-SSA?)e
(...)43 b(>)287 692 y FN(There)17 b(are)h(sev)n(aral)e(di\013eren)o(t)i
(extensions)f(to)g FK(SSA)p FN(,)g(in)f(whic)o(h)h(the)g(constan)o(t)g
(prop-)224 741 y(agation)g(idea)h(is)h(extended)g(to)g(rather)g
(di\013eren)o(t)g(attributes)g(on)f(the)h(v)n(alues.)31
b(Corney)224 791 y(and)15 b(Gough[)p FO(?)p FN(])k(propagated)c(upp)q
(er)g(b)q(ounds)h(on)e(the)i(p)q(olymorphic)c(t)o(yp)q(es)k(of)e(v)n
(alues)h(in)224 841 y(programs)i(in)g FK(Ob)n(er)n(on-2)5
b FN(,)18 b(in)f(order)h(to)g(eliminate)d(run)o(time)h(t)o(yp)q(e)i
(tests.)31 b(P)o(atterson[)p FO(?)p FN(])224 891 y(used)18
b(a)d(similar)f(idea)i(in)g(a)g(m)o(uc)o(h)f(more)g(complex)g(setting,)
i(to)f(propagate)g(v)n(alue-range)224 941 y(densit)o(y)h(functions,)g
(in)g(an)f(attempt)g(to)g(deriv)o(e)h(extremely)g(sharp)g(branc)o(h)g
(probabilit)o(y)224 990 y(estimates.)287 1041 y(Gough)c(and)g(Klaeren[)
p FO(?)p FN(])18 b(propagated)c(v)n(alue-range)f(information)e(in)i
(order)i(to)e(elim-)224 1091 y(inate)i(redundan)o(t)g(index,)f(range)h
(and)g(o)o(v)o(er\015o)o(w)f(tests.)21 b(In)15 b(ordinary)f
FK(SSA)p FN(,)h(a)f(new)h(v)n(alue)224 1141 y(is)i(created)g(whenev)o
(er)h(an)e(assignmen)o(t)g(is)g(made)f(to)h(a)g(program)f(v)n(ariable.)
24 b(In)17 b(this)f(ex-)224 1191 y(tended)g(case,)g(a)e(new)h(v)n(alue)
f(is)h(also)f(created)i(whenev)o(er)g(the)g(b)q(ounds)f(on)f(a)h(v)n
(alue-range)224 1241 y(are)g(c)o(hanged)f(b)o(y)g(conditional)e(branc)o
(hes)j(or)f(b)o(y)g(run)o(time)f(tests)i(on)f(that)f(v)n(alue.)224
1384 y FI(9.8)67 b(Finding)24 b(out)f(more)224 1477 y
FN(The)17 b(de\014nitiv)o(e)e(pap)q(er)i(on)f(transforming)d(to)j
FK(SSA)g FN(form)e(is)i(Cytron,)g(F)m(erran)o(te,)h(Rosen,)224
1527 y(W)m(egman)e(and)h(Zadec)o(k[)p FO(?)p FN(].)26
b(There)17 b(are)g(no)o(w)g(some)e(kno)o(wn)h(impro)o(v)o(emen)o(ts)f
(on)h(the)h(al-)224 1577 y(gorithm)d(giv)o(en)i(in)g(this)g(pap)q(er,)g
(but)h(the)f(original)e(algorithm)g(w)o(orks)i(w)o(ell)f(in)h
(practice.)224 1626 y(In)h(the)h(case)g(of)f(structured)i(languages,)e
(it)f(is)h(p)q(ossible)h(to)e(\014nd)i(the)f(placemen)o(t)g(for)f(\010)
224 1676 y(functions)e(directly)h(from)d(the)i FK(AST)6
b FN(,)13 b(as)h(sho)o(wn)g(b)o(y)f(Brandis)i(and)e(M\177)-21
b(ossen)o(b\177)g(oc)o(k[)p FO(?)p FN(].)287 1727 y(The)17
b(k)o(ey)g(pap)q(er)g(on)g(optimistic)e(constan)o(t)i(propagation)f(is)
g(also)g(b)o(y)h(W)m(egman)d(and)224 1777 y(Zadec)o(k[)p
FO(?)p FN(].)k(Gated)c FK(SSA)g FN(is)g(in)o(tro)q(duced)g(in)g([)p
FO(?)p FN(].)287 1828 y(Clic)o(k)8 b(has)i(sho)o(wn)g(ho)o(w)f(to)g
(use)i FK(SSA)f FN(form)d(as)j(a)f(basis)h(for)f(p)q(erforming)f(v)o
(ery)i(aggressiv)o(e)224 1878 y(co)q(de)j(motion[)p FO(?)p
FN(])o(.)i(In)d(this)f(w)o(ork)h FK(SSA)g FN(is)g(used)h(to)e
(construct)j(a)d(global)f(v)n(alue)i(dep)q(endence)224
1928 y(graph.)18 b(This)11 b(graph)h(is)g(then)g(used)h(to)e(sc)o
(hedule)i(all)e(op)q(erations,)h(with)f(almost)f(no)i(regard)224
1977 y(to)19 b(the)g(original)d(placemen)o(t)i(of)g(op)q(erations)h(in)
f(basic)g(blo)q(c)o(ks.)32 b(In)18 b(theory)h(it)f(app)q(ears)224
2027 y(that)i(suc)o(h)g(co)q(de)g(motion)d(ma)o(y)h(sometimes)f
(unnecessarily)k(lengthen)f(the)g(lifetime)d(of)224 2077
y(temp)q(orary)10 b(v)n(alues)h(in)f(registers,)i(and)f(hence)h
(increase)f(register)h(pressure.)19 b(Nev)o(ertheless,)224
2127 y(the)c(measured)f(results)h(ac)o(hiev)o(ed)f(b)o(y)g(the)g
(algorithm)d(are)k(v)o(ery)f(impressiv)o(e.)224 2270
y FI(9.9)67 b(Exercises)254 2363 y FN(9.1)254 2451 y(9.2)254
2538 y(9.3)20 b(Consider)15 b(the)g(situation)e(sho)o(wn)h(in)g(righ)o
(t-hand)g(side)g(of)g(\014gure)h(9.5.)j(In)c(this)g(case)328
2588 y(neither)k(computation)c(of)i(\()p FM(a)804 2594
y Fz(3)834 2588 y FN(+)11 b FM(b)895 2594 y Fz(1)913
2588 y FN(\))17 b(dominates)e(the)i(other.)27 b(Nev)o(ertheless,)19
b(the)328 2638 y(de\014nitions)12 b(of)e FM(a)593 2644
y Fz(3)623 2638 y FN(and)i FM(b)720 2644 y Fz(1)749 2638
y FN(m)o(ust)f(necessarily)h(b)q(e)g(in)f FK(CF)o(G)k
FN(blo)q(c)o(ks)d(whic)o(h)f(dominate)328 2688 y(b)q(oth)j(blo)q(c)o(k)
g(4)f(and)h(blo)q(c)o(k)g(5.)j(Can)d(y)o(ou)f(see)i(wh)o(y)f(this)g(m)o
(ust)f(b)q(e)h(the)h(case?)p eop
%%Page: 246 252
246 251 bop 224 274 a FN(246)331 b FL(CHAPTER)14 b(9.)31
b(ST)m(A)m(TIC)14 b(SINGLE)f(ASSIGNMENT)i(F)o(ORM)328
390 y FN(Wh)o(y)10 b(is)g(it)h(not)f(alw)o(a)o(ys)f(safe)i(to)f(simply)
f FK(hoist)14 b FN(the)d(computation)e(up)h(to)h(the)g(nearest)328
440 y(no)q(de)k(whic)o(h)e(dominates)g(all)f(of)i(the)g(uses)h(of)f(\()
p FM(a)1096 446 y Fz(3)1124 440 y FN(+)9 b FM(b)1183
446 y Fz(1)1202 440 y FN(\)?)328 507 y(Can)17 b(y)o(ou)g(think)g(of)g
(a)g(case)h(where)h(hoisting)d(the)i(co)q(de)g(migh)o(t)e(b)q(e)i
(unpro\014table,)328 557 y(ev)o(en)d(if)e(it)g(is)h(safe?)p
eop
%%Page: 247 253
247 252 bop 224 702 a FJ(Chapter)32 b(10)224 909 y FP(Register)40
b(Allo)s(cation)609 1144 y
 10590863 18945146 0 0 10590863 18945146 startTexFig
 609 1144 a
%%BeginDocument: regarch.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-23.0 294.0 translate 0.585 -0.585 scale
1.000 setlinewidth
	[6.000000] 0 setdash
% Polyline
n 313 429 m 313 409 l  173 409 l  173 429 l  clp gs col-1 s gr
	[] 0 setdash
/Times-Bold findfont 11.00 scalefont setfont
183 422 m 
gs 1 -1 scale (optional optimization step) col-1 show gr
	[6.000000] 0 setdash
% Polyline
n 313 349 m 313 329 l  173 329 l  173 349 l  clp gs col-1 s gr
	[] 0 setdash
/Times-Bold findfont 11.00 scalefont setfont
183 342 m 
gs 1 -1 scale (optional optimization step) col-1 show gr
	[6.000000] 0 setdash
% Polyline
n 313 268 m 313 248 l  173 248 l  173 268 l  clp gs col-1 s gr
	[] 0 setdash
/Times-Bold findfont 11.00 scalefont setfont
183 261 m 
gs 1 -1 scale (optional optimization step) col-1 show gr
	[6.000000] 0 setdash
% Polyline
n 313 189 m 313 169 l  173 169 l  173 189 l  clp gs col-1 s gr
	[] 0 setdash
/Times-Bold findfont 11.00 scalefont setfont
183 182 m 
gs 1 -1 scale (optional optimization step) col-1 show gr
% Polyline
n 239 79 m 239 39 l  79 39 l  79 79 l  clp gs col-1 s gr
% Polyline
n 239 159 m 239 119 l  79 119 l  79 159 l  clp gs col-1 s gr
% Polyline
n 239 239 m 239 199 l  79 199 l  79 239 l  clp gs col-1 s gr
% Polyline
n 239 319 m 239 279 l  79 279 l  79 319 l  clp gs col-1 s gr
% Polyline
n 239 479 m 239 439 l  79 439 l  79 479 l  clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 159 19 m 159 39 l gs col-1 s gr
n 161.000 31.000 m 159.000 39.000 l 157.000 31.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 79 m 159 119 l gs col-1 s gr
n 161.000 111.000 m 159.000 119.000 l 157.000 111.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 159 m 159 199 l gs col-1 s gr
n 161.000 191.000 m 159.000 199.000 l 157.000 191.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 239 m 159 279 l gs col-1 s gr
n 161.000 271.000 m 159.000 279.000 l 157.000 271.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 319 m 159 359 l gs col-1 s gr
n 161.000 351.000 m 159.000 359.000 l 157.000 351.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 399 m 159 439 l gs col-1 s gr
n 161.000 431.000 m 159.000 439.000 l 157.000 431.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 479 m 159 499 l gs col-1 s gr
n 161.000 491.000 m 159.000 499.000 l 157.000 491.000 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
% Polyline
n 239 399 m 79 399 l  79 359 l  239 359 l  clp gs 0.95 setgray fill gr
gs col-1 s gr
/Times-Bold findfont 11.00 scalefont setfont
136 462 m 
gs 1 -1 scale (assembler) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
100 302 m 
gs 1 -1 scale (interpretive code selector) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
134 222 m 
gs 1 -1 scale (tree walker) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
107 62 m 
gs 1 -1 scale (front-end tree builder) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
116 142 m 
gs 1 -1 scale (attribute evaluator) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
91 502 m 
gs 1 -1 scale (object file out) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
71 422 m 
gs 1 -1 scale (assembly language) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
39 342 m 
gs 1 -1 scale (virtual assembly language) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
81 262 m 
gs 1 -1 scale (abstract stack IR) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
62 181 m 
gs 1 -1 scale (attributed syntax tree) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
69 102 m 
gs 1 -1 scale (abstract syntax tree) col-1 show gr
/Times-Roman findfont 11.00 scalefont setfont
97 21 m 
gs 1 -1 scale (source file in) col-1 show gr
/Times-Bold findfont 11.00 scalefont setfont
125 382 m 
gs 1 -1 scale (register binder) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 224 2447 a FI(10.1)66 b(In)n(tro)r(duction)224 2538
y FN(The)14 b(allo)q(cation)d(of)h(registers)i(for)f(temp)q(orary)f(v)n
(alues)g(and)h(v)n(ariables)f(is)h(one)g(of)f(the)h(most)224
2588 y(imp)q(ortan)o(t)c(factors)i(in)f(the)h(pro)q(duction)g(of)f(go)q
(o)q(d)g(qualit)o(y)f(co)q(de.)18 b(It)10 b(has)h(historically)e(b)q
(een)224 2638 y(an)16 b(imp)q(ortan)o(t)e(factor)i(for)g(those)g(mac)o
(hines)f(with)h(a)f(small)f(n)o(um)o(b)q(er)h(of)g(registers,)j(ev)o
(en)224 2688 y(for)c(the)h(pro)q(duction)f(of)f(co)q(de)i(to)f(ev)n
(aluate)f(expressions.)20 b(F)m(urthermore,)14 b(older)g(mac)o(hine)914
2793 y(247)p eop
%%Page: 248 254
248 253 bop 224 274 a FN(248)556 b FL(CHAPTER)15 b(10.)31
b(REGISTER)13 b(ALLOCA)m(TION)224 390 y FN(arc)o(hitectures)g(t)o
(ypically)c(placed)i(restrictions)g(on)g(the)g(use)g(of)f(registers)i
(b)o(y)e(implemen)o(ting)224 440 y(instructions)h(whic)o(h)f(required)g
(op)q(erands)h(to)f(b)q(e)g(in)f(particular)h(registers,)h(or)f(in)g
(particular)224 490 y(register)15 b(subsets.)287 541
y(Recen)o(t)h(mac)o(hine)e(arc)o(hitectures)j(app)q(ear)f(to)f(ha)o(v)o
(e)g(alleviated)f(this)h(problem)f(b)o(y)h(of-)224 591
y(fering)20 b(a)g(relativ)o(ely)g(large)f(n)o(um)o(b)q(er)h(of)g
(general)g(purp)q(ose)h(registers,)i(and)d FK(ortho)n(gonal)224
641 y FN(instruction)d(sets)h(whic)o(h)e(allo)o(w)f(an)o(y)h(register)i
(to)e(b)q(e)h(used)g(as)g(an)f(op)q(erand)h(for)f(an)o(y)g(in-)224
690 y(struction.)29 b(Almost)16 b(all)g(con)o(temp)q(orary)h(mac)o
(hine)f(arc)o(hitectures)j(pro)o(vide)e(at)g(least)h(32)224
740 y(registers.)k(Ho)o(w)o(ev)o(er,)15 b(all)e(is)i(not)f(so)h
(simple.)j(The)e(so-called)e FK(RISC)21 b FN(arc)o(hitectures)16
b(ha)o(v)o(e)224 790 y(pro)o(vided)i(this)h(increased)g(resource)h(at)e
(the)h(cost)g(of)e(simplifying)e(the)k(instruction)f(set)224
840 y(and)h(adopting)f(a)h(load-store)f(pro)q(cessor)j(mo)q(del.)31
b(In)19 b(order)h(to)f(ac)o(hiev)o(e)g(go)q(o)q(d)f(results)224
890 y(with)12 b(suc)o(h)i(arc)o(hitectures)g(it)e(is)h(essen)o(tial)f
(to)h(use)g(the)g(register)g(resource)i(e\016cien)o(tly)m(.)i(The)224
940 y(parado)o(x)11 b(is)g(that)g(mo)q(dern)f(mac)o(hines)g(pro)o(vide)
h(more)f(registers,)j(and)d(greater)j(ease)f(of)e(use,)224
989 y(but)15 b(demand)d(prop)q(ortionately)i(greater)h(atten)o(tion)e
(to)h(register)h(allo)q(cation.)287 1040 y(The)i(imp)q(ortance)f(of)g
(register)i(managemen)o(t)c(ma)o(y)h(b)q(e)i(exp)q(ected)i(to)e
(increase)h(ev)o(en)224 1090 y(further)f(in)f(the)h(future.)25
b(This)16 b(is)g(so,)h(since)g(the)g(sp)q(eed)g(of)f(pro)q(cessors)i
(is)e(increasing)g(at)224 1140 y(a)h(greater)g(rate)g(than)f(the)h(sp)q
(eed)h(of)e(main)e(memory)m(.)23 b(If)16 b(follo)o(ws)f(that)h(the)h
(time)e(tak)o(en)224 1190 y(for)j(fetc)o(hing)f(an)h(op)q(erand)g(from)
e(memory)f(will)i(increase)i(relativ)o(e)e(to)h(the)g(instruction)224
1240 y(cycle)h(time.)27 b(Th)o(us)18 b(the)g(p)q(enalt)o(y)g(for)f
(failing)e(to)j(place)f(a)h(v)n(alue)f(in)g(a)g(register)i(will)d(b)q
(e)224 1289 y(corresp)q(ondingly)f(greater.)287 1340
y(The)c(e\016cien)o(t)h(use)g(of)f(the)h(register)h(resource)g
(requires)g(t)o(w)o(o)e(separate)h(problems)e(to)i(b)q(e)224
1390 y(solv)o(ed.)23 b(W)m(e)15 b(exp)q(ect)i(our)e(compilers)f(to)i(w)
o(ork)f(v)o(ery)g(hard)h(to)f(\014nd)h(man)o(y)d(useful)j(v)n(alues)224
1440 y(to)f(hold)f(in)h(registers.)22 b(In)15 b(some)f(cases)i(w)o(e)f
(ma)o(y)e(ev)o(en)i(\014nd)g(to)q(o)g(man)o(y)m(.)j(When)d(w)o(e)g(ha)o
(v)o(e)224 1490 y(found)i(to)q(o)g(man)o(y)e(candidates,)j(w)o(e)g(m)o
(ust)e(decide)i FK(which)g(values)i FN(will)c(b)q(e)i(allo)q(cated)e
(to)224 1539 y(registers,)j(and)d(for)g(whic)o(h)h(parts)g(of)f(the)h
(program.)25 b(F)m(urther,)18 b(w)o(e)e(m)o(ust)g(decide)i
FK(which)224 1589 y(r)n(e)n(gister)i FN(eac)o(h)e(of)e(these)i(v)n
(alues)f(will)e(b)q(e)j(assigned)f(to.)27 b(These)18
b(t)o(w)o(o)f(problems)f(ma)o(y)f(b)q(e)224 1639 y(called)k(the)g
FO(allo)q(cation)g(problem)p FN(,)d(and)i(the)i FO(assignmen)o(t)e
(problem)p FN(.)29 b(These)20 b(t)o(w)o(o)224 1689 y(problems)13
b(ma)o(y)f(b)q(e)j(tac)o(kled)f(separately)m(,)f(or)h(together.)287
1740 y(There)i(is)f(one)h(further)g(dimension)e(to)h(the)h(register)h
(allo)q(cation)c(problem.)21 b(W)m(e)15 b(ma)o(y)224
1790 y(try)e(to)g(allo)q(cate)f(registers)j FK(lo)n(c)n(al)r(ly)t
FN(,)c(that)i(is,)g(one)g(basic)g(blo)q(c)o(k)f(at)h(a)f(time,)f(or)i
(w)o(e)g(ma)o(y)e(try)224 1839 y(to)17 b(allo)q(cate)f(registers)j
FK(glob)n(al)r(ly)t FN(,)d(that)h(is,)f(a)h(whole)f(pro)q(cedure)j(at)e
(a)f(time)1443 1824 y Fz(1)1460 1839 y FN(.)27 b(Here)18
b(is)f(a)224 1889 y(quic)o(k)e(o)o(v)o(erview)f(of)g(the)h(di\013eren)o
(t)h(approac)o(hes)f(to)f(global)f(register)j(allo)q(cation.)j(A)14
b(later)224 1939 y(section)h(of)e(this)h(c)o(hapter)h(lo)q(oks)e(at)h
(the)h(simple)d(heuristics)j(of)e(lo)q(cal)g(allo)q(cation.)224
2053 y FO(The)j(b)q(orn-in-regi)o(st)o(er)d(approac)o(h)224
2131 y FN(In)i(this)g(approac)o(h)g(to)g(register)h(allo)q(cation)d(it)
i(is)g(assumed)f(that)h FK(every)k FN(v)n(alue)14 b(is)h(held)g(in)224
2181 y(a)h(register)h(throughout)f(its)g(useful)g(lifetime.)23
b(This)16 b(assumption)e(ma)o(y)g(b)q(e)j(an)f(o)o(v)o(erallo-)224
2231 y(cation,)d(so)g(that)g(the)h(attempt)e(to)h(assign)g(registers)i
(to)e(v)n(alues)g(fails)f(b)q(ecause)j(the)e(supply)224
2281 y(of)h(registers)i(b)q(ecomes)e(exhausted.)21 b(In)14
b(this)g(case)i(one)e(or)g(more)g(v)n(alues)g(m)o(ust)f(b)q(e)i
FK(spil)r(le)n(d)224 2331 y FN(to)j(memory)m(,)d(and)j(a)f(new)h(allo)q
(cation)e(attempted.)29 b(This)18 b(pro)q(cess)i(con)o(tin)o(ues)e(un)o
(til)f(an)224 2381 y(assignmen)o(t)c(attempt)g(completes)h
(successfully)m(.)287 2431 y(The)g(main)d(di\016cult)o(y)i(with)g(this)
h(approac)o(h)g(is)f(that)h(the)g(most)e(p)q(o)o(w)o(erful)i
(algorithms)224 2481 y(for)g(assignmen)o(t)g(require)h(restarting)g
(after)g(eac)o(h)g(spill)e(decision.)20 b(There)15 b(do)q(es)g(not)f
(seem)224 2531 y(to)d(b)q(e)h(an)o(y)e(w)o(a)o(y)g(to)h(up)q(date)g
(the)h(data)e(structures)k(incremen)o(tally)9 b(after)i(v)n(alues)g(ha)
o(v)o(e)f(b)q(een)p 224 2570 577 2 v 271 2597 a Fy(1)288
2609 y Fx(Ev)o(en)d(more)g(radical)f(approac)o(hes)f(ha)o(v)o(e)i
(attempted)e(to)j(allo)q(cate)d(registers)i(across)f(pro)q(cedure)g(b)q
(ound-)224 2648 y(aries.)14 b(Ho)o(w)o(ev)o(er,)c(these)e(truly)h
(global)f(approac)o(hes)f(are)i(highly)f(exp)q(erimen)o(ta)o(l,)f(and)i
(do)h(not)f(\014t)g(w)o(ell)h(with)224 2688 y(systems)g(whic)o(h)h
(rely)g(on)g(separate)e(compilation)f(of)k(program)d(mo)q(dules.)p
eop
%%Page: 249 255
249 254 bop 224 274 a FL(10.2.)31 b(GRAPH)14 b(COLORING)863
b FN(249)224 390 y(spilled.)18 b(These)e(algorithms)11
b(th)o(us)k(tend)f(to)g(b)q(e)h(v)o(ery)f(lab)q(orious)f(when)i
(register)g(pressure)224 440 y(is)f(high,)f(and)h(use)g(quite)g(large)g
(amoun)o(ts)e(of)i(memory)d(during)j(compilation.)224
552 y FO(The)i(b)q(orn-in-memor)o(y)e(approac)o(h)224
630 y FN(In)h(this)f(approac)o(h)g(to)g(register)h(allo)q(cation)e(it)g
(is)h(assumed)g(that)g(ev)o(ery)h(v)n(alue)f(is)g(either)h(a)224
680 y(v)n(ariable,)c(or)h(is)g(a)f(temp)q(orary)g(v)n(alue)h(whic)o(h)f
(has)h(b)q(een)h(allo)q(cated)f(a)f(lo)q(cation)g(in)h(the)g(lo)q(cal)
224 730 y(stac)o(k)17 b(frame.)23 b(The)17 b(b)q(ene\014ts)h(of)d(k)o
(eeping)h(eac)o(h)h(v)n(alue)e(in)h(register)h(are)g(estimated,)e(and)
224 779 y(these)h(v)n(alues)d(are)i(used)f(to)g(decide)h(whic)o(h)f(v)n
(alues)f(to)h FK(pr)n(omote)j FN(in)o(to)c(registers.)287
830 y(Once)j(again,)d(the)j(main)c(di\016cult)o(y)i(with)h(this)g
(approac)o(h)g(is)f(the)i(high)e(lev)o(el)g(of)h(algo-)224
880 y(rithmic)g(complexit)o(y)f(whic)o(h)i(is)g(in)o(v)o(olv)o(ed.)24
b(Algorithms)14 b(based)j(on)f(this)g(approac)o(h)g(also)224
930 y(use)f(v)o(ery)f(substan)o(tial)g(amoun)o(ts)e(of)i(memory)d
(during)i(compilation.)224 1041 y FO(The)j(lo)q(cal-incremen)n(tal)c
(approac)o(h)224 1119 y FN(In)h(this)f(approac)o(h)g(to)g(register)h
(allo)q(cation)e(an)h(initial)e(assignmen)o(t)h(is)h(p)q(erformed)g
(using)g(a)224 1169 y(lo)q(cal)i(allo)q(cation)f(algorithm.)18
b(Ha)o(ving)c(determined)g(ho)o(w)h(man)o(y)d(registers)17
b(remain)c(free,)224 1219 y(the)19 b(algorithm)c(attempts)i(to)g
(incremen)o(tally)g(mo)o(v)o(e)f(additional)f(v)n(alues)j(in)o(to)f
(registers)224 1269 y(un)o(til)c(all)g(registers)j(are)e(exhausted.)287
1319 y(F)m(or)h(languages)h(for)f(whic)o(h)h(the)h(programmer)c(is)j
(allo)o(w)o(ed)f(to)g(express)j(a)e(preference)224 1369
y(for)c(whic)o(h)f(lo)q(cal)g(v)n(ariables)g(are)h(placed)g(in)g
(registers,)h(this)f(approac)o(h)f(can)h(allo)o(w)e(a)i(simple)224
1419 y(implemen)o(tation.)21 b(F)m(or)15 b(example,)g(if)g(there)i(are)
f(registers)h(left)f(o)o(v)o(er)g(after)g(lo)q(cal)f(allo)q(ca-)224
1469 y(tion,)g(the)g(remaining)e(registers)k(ma)o(y)c(b)q(e)j(allo)q
(cated)e(to)h(lo)q(cal)f(v)n(ariables)h(in)f(the)i(priorit)o(y)224
1518 y(order)f(giv)o(en)f(b)o(y)g(the)h(programmer,)d(or)i(the)h(fron)o
(t-end.)k(The)c(main)d(di\016cult)o(y)h(with)h(this)224
1568 y(approac)o(h)j(is)f(the)h(rather)h(sub)r(jectiv)o(e)f(nature)h
(of)d(the)j(decision)e(pro)q(cess)j(whic)o(h)d(decides)224
1618 y(whic)o(h)e(v)n(alues)g(to)g(promote)e(in)o(to)i(registers)h
(during)f(the)g(second)h(phase)g(of)e(the)h(pro)q(cess.)224
1759 y FI(10.2)66 b(Graph)23 b(coloring)224 1860 y FH(10.2.1)56
b(Liv)n(e)17 b(ranges)224 1938 y FN(The)g(problem)f(of)g(assigning)f
(registers)j(to)f(v)n(alues)f(is)h(mo)q(delled)e(b)o(y)h(a)g(w)o(ell)g
(understo)q(o)q(d)224 1987 y(but)f(di\016cult)e(mathematical)d
(problem,)i(that)i(of)g FO(graph)g(coloring)p FN(.)287
2038 y(A)o(t)i(an)o(y)g(particular)f(p)q(oin)o(t)h(during)g(the)h
(excecution)g(of)e(a)h(program,)f(certain)i(v)n(alues)224
2088 y(ma)o(y)12 b(b)q(e)j(held)f(in)g(registers.)19
b(Eac)o(h)c(of)e(these)i(v)n(alues)f(is)g FK(de\014ne)n(d,)h
FN(or)f(brough)o(t)g(in)o(to)f(b)q(eing,)224 2137 y(b)o(y)h(one)f(or)h
(more)e(instructions.)19 b(Along)13 b(ev)o(ery)h(subsequen)o(t)h(path)f
(of)f(con)o(trol)g(eac)o(h)h(v)n(alue)224 2187 y(will)g(ha)o(v)o(e)i
(some)e(\014nal)h(use.)24 b(All)14 b(of)h(the)h(lo)q(cations)f(whic)o
(h)g(lie)g(b)q(et)o(w)o(een)i(the)f(p)q(oin)o(t\(s\))g(of)224
2237 y(de\014nition)e(and)g(an)o(y)f(\014nal)g(use)i(are)f(called)g
(the)g FO(liv)o(e)h(range)e FN(of)g(that)h(v)n(alue.)287
2288 y(The)j(liv)o(e)g(range)g(of)g(a)g(v)n(alue)f(is)h(alw)o(a)o(ys)f
(a)h(connected)i(region)e(on)g(the)h(con)o(trol)f(\015o)o(w)224
2337 y(graph)e(but)h(is)e(not)h(necessarily)h(a)f(con)o(tiguous)g
(range)g(of)g(lo)q(cations)f(in)h(the)g FK(V)l(AL)g FN(bu\013er.)224
2387 y(Consider)22 b(a)e(v)n(alue)g(de\014ned)i(prior)f(to)f(an)h
FK(if)29 b FN(statemen)o(t,)22 b(and)e(used)i(in)e(eac)o(h)i(of)e(the)
224 2437 y(branc)o(hes,)15 b(as)f(in)f(\014gure)i(10.1.)287
2488 y(In)d(this)h(case,)g(a)f(v)n(alue)g(is)h(liv)o(e)f(across)h(a)f
FK(fork)17 b FN(in)12 b(the)h(con)o(trol)f(\015o)o(w.)18
b(Since)13 b(the)g(\015o)o(w)f(of)224 2537 y(con)o(trol)h(ma)o(y)e
(only)i FK(fal)r(l)g(thr)n(ough)k FN(in)o(to)12 b(one)h(of)g(the)h
(branc)o(hes,)g(it)e(is)h(clear)h(that)f(the)h(single)224
2587 y(\(fork)o(ed\))e(liv)o(e-range)f(will)g(app)q(ear)h(as)g(t)o(w)o
(o)f(distinct)h(in)o(terv)n(als)f(in)g(the)i(ob)r(ject)f(co)q(de)h
(bu\013er.)287 2638 y(In)c(the)h(case)h(of)e(straigh)o(t-line)g(con)o
(trol)g(\015o)o(w,)h(ev)o(ery)g(liv)o(e)f(range)h(has)g(a)f(single)g
(de\014nition,)224 2688 y(and)j(a)g(single)g(last)g(use.)18
b(Th)o(us)13 b(the)f(liv)o(e)g(range)g(of)g(a)g(v)n(alue)f(is)h(simply)
e(a)i(con)o(tiguous)g(range)p eop
%%Page: 250 256
250 255 bop 224 274 a FN(250)556 b FL(CHAPTER)15 b(10.)31
b(REGISTER)13 b(ALLOCA)m(TION)682 349 y
 8288501 9472573 0 0 8288501 9472573 startTexFig
 682 349 a
%%BeginDocument: forked.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-54.0 162.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Polyline
n 159 79 m 159 40 l  99 40 l  99 79 l  clp gs col-1 s gr
% Polyline
n 119 158 m 119 119 l  59 119 l  59 158 l  clp gs col-1 s gr
% Polyline
n 199 158 m 199 119 l  139 119 l  139 158 l  clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 128 80 m 89 119 l gs col-1 s gr
n 96.071 114.757 m 89.000 119.000 l 93.243 111.929 l gs 2 setlinejoin col-1 s gr
% Polyline
n 130 80 m 171 120 l gs col-1 s gr
n 166.670 112.982 m 171.000 120.000 l 163.877 115.845 l gs 2 setlinejoin col-1 s gr
% Polyline
n 91 159 m 91 179 l gs col-1 s gr
n 93.000 171.000 m 91.000 179.000 l 89.000 171.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 170 159 m 170 180 l gs col-1 s gr
n 172.000 172.000 m 170.000 180.000 l 168.000 172.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 130 19 m 130 40 l gs col-1 s gr
n 132.000 32.000 m 130.000 40.000 l 128.000 32.000 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Open spline
n 111.000 58.000 m 111.000 71.000 l
	111.000 71.000 111.000 84.000 104.000 91.500 DrawSplineSection
	104.000 91.500 97.000 99.000 87.500 109.500 DrawSplineSection
	87.500 109.500 78.000 120.000 78.000 129.500 DrawSplineSection
	78.000 139.000 l gs col-1 s gr
	[] 0 setdash
n 80.000 131.000 m 78.000 139.000 l 76.000 131.000 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Open spline
n 111.000 58.000 m 111.000 72.500 l
	111.000 72.500 111.000 87.000 120.500 95.500 DrawSplineSection
	120.500 95.500 130.000 104.000 139.500 112.000 DrawSplineSection
	139.500 112.000 149.000 120.000 153.500 125.500 DrawSplineSection
	153.500 125.500 158.000 131.000 158.500 135.000 DrawSplineSection
	159.000 139.000 l gs col-1 s gr
	[] 0 setdash
n 159.992 130.814 m 159.000 139.000 l 156.023 131.310 l gs 2 setlinejoin col-1 s gr
/Times-Italic findfont 10.00 scalefont setfont
121 61 m 
gs 1 -1 scale (define V) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
162 142 m 
gs 1 -1 scale (use V) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
82 142 m 
gs 1 -1 scale (use V) col-1 show gr
/Times-Bold findfont 17.00 scalefont setfont
109 59 m 
gs 1 -1 scale (.) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 654 1040 a FN(Figure)h(10.1:)j(A)d(fork)o(ed)g(liv)o(e)f(range)224
1170 y(of)18 b(instruction)g(lo)q(cations.)29 b(This)17
b(range)h(extends)i(from)c(the)i(de\014nition)f(p)q(oin)o(t,)h(to)g
(the)224 1220 y(\014nal)c(use.)19 b(Suc)o(h)14 b(liv)o(e)f(ranges)h(in)
g(the)g(con)o(tiguous)g(case,)g(are)h(called)e FO(in)o(terv)m(als)p
FN(.)287 1270 y(F)m(or)g(the)g(co)q(de)i(generation)e(metho)q(ds)g
(outlined)g(in)f(previous)i(c)o(hapters)h(virtual)d(regis-)224
1320 y(ters)i(p)q(ossess)f(a)f(single)f(de\014nition)h(p)q(oin)o(t.)17
b(Ho)o(w)o(ev)o(er)12 b(the)h(v)n(alues)e(whic)o(h)h(w)o(e)g(consider)h
(here)224 1369 y(ha)o(v)o(e)h(a)g(ric)o(her,)g(more)f(complex)f
(structure.)21 b(Consider)14 b(the)g(co)q(de)h(fragmen)o(t)d(|)413
1452 y FF(IF)19 b(condition)d(THEN)453 1497 y(x)j(:=)g(expr1;)453
1543 y(...)413 1589 y(ELSE)453 1634 y(x)g(:=)g(expr2;)453
1680 y(...)413 1726 y(END;)413 1771 y(...)413 1817 y(v)h(:=)e(...)h(x)g
(...;)413 1863 y(...)224 1948 y FN(The)13 b(v)n(alue)f(of)g
FM(x)g FN(is)g(a)g(candidate)g(for)g(holding)f(in)h(a)g(register,)i(b)q
(et)o(w)o(een)f(its)g(t)o(w)o(o)f(de\014nition)224 1997
y(p)q(oin)o(ts)i(and)f(its)g(subsequen)o(t)i(use)f(follo)o(wing)d(the)i
FK(if)c FN(.)17 b(W)m(e)c(w)o(ould)g(th)o(us)g(lik)o(e)g(to)g(target)h
(the)224 2047 y(same)j(register)h(as)f(the)h(register)g(destination)f
(for)g(the)h(ev)n(aluation)e(of)g(b)q(oth)h FK(expr1)23
b FN(and)224 2097 y FK(expr2)p FN(.)c(In)14 b(this)g(case)g(the)h(\\v)n
(alue")e(has)h(t)o(w)o(o)f(di\013eren)o(t)i(v)n(alues.)287
2147 y(Con)o(trast)f(this)f(with)g(the)i(follo)o(wing)c(case)j(where)h
(a)e(temp)q(orary)g(v)n(ariable)g(is)g(used)i(for)224
2197 y(t)o(w)o(o)f(di\013eren)o(t)h(purp)q(oses)g(|)413
2279 y FF(tmp)k(:=)g(v1;)97 b(\(*)18 b(swap)h(v1)f(and)h(v2)38
b(*\))413 2325 y(v1)h(:=)19 b(v2;)413 2370 y(v2)39 b(:=)19
b(tmp;)77 b(\(*)18 b(tmp)h(is)g(now)f(dead)g(*\))413
2416 y(...)413 2462 y(tmp)h(:=)g(x1;)97 b(\(*)18 b(now)h(swap)f(x1,)g
(x2)h(*\))413 2507 y(x1)39 b(:=)19 b(x2;)413 2553 y(x2)39
b(:=)19 b(tmp;)77 b(\(*)18 b(tmp)h(is)g(now)f(dead)g(*\))224
2638 y FN(It)f(is)f(adv)n(an)o(tageous)g(to)g(hold)g(the)h(v)n(alue)e
(of)h FK(tmp)j FN(in)d(a)g(register,)i(rather)f(than)f(actually)224
2688 y(storing)d(the)g(v)n(alue)f(in)o(to)g(memory)f(after)i(eac)o(h)g
(assignmen)o(t)e(and)i(reloading)f(it)g(later.)18 b(The)p
eop
%%Page: 251 257
251 256 bop 224 274 a FL(10.2.)31 b(GRAPH)14 b(COLORING)863
b FN(251)224 390 y(v)n(alue-trac)o(king)10 b(optimization)e(discussed)k
(in)e(the)h(previous)g(c)o(hapter)g(allo)o(ws)f(us)h(to)f(do)g(this)224
440 y(quite)16 b(simply)m(.)j(Ho)o(w)o(ev)o(er,)d(there)g(is)f(no)g
(adv)n(an)o(tage)g(in)f(targeting)h(the)h(t)o(w)o(o)f(assignmen)o(ts)
224 490 y(of)f(the)g(v)n(ariable)f FK(tmp)j FN(to)e(the)h
FK(same)i FN(register.)287 541 y(Recognizing)12 b(the)h(di\013erence)h
(b)q(et)o(w)o(een)g(these)g(t)o(w)o(o)e(cases)i(is)e(the)h(k)o(ey)g(to)
f(understand-)224 590 y(ing)g(the)g(nature)h(of)e(liv)o(e)h(ranges.)18
b(In)12 b(the)g(\014rst)h(example)e(the)h(t)o(w)o(o)g(de\014nitions)g
(of)f FK(x)18 b FN(b)q(elong)224 640 y(to)13 b(the)h(same)d(liv)o(e)i
(range)g(b)q(ecause)h(\(at)f(least)g(one\))g(use)h(of)e(the)i(v)n(alue)
e(is)g(reac)o(hed)j(b)o(y)d(b)q(oth)224 690 y(of)g(the)h
(de\014nitions.)18 b(In)13 b(the)g(second)g(case)h(the)f(t)o(w)o(o)f
(assignmen)o(ts)g(to)g(v)n(ariable)f FK(tmp)16 b FN(are)c(to)224
740 y(di\013eren)o(t)k(liv)o(e)e(ranges,)h(since)h(the)f(liv)o(e)f
(ranges)i(are)f(not)g(connected)h(in)f(the)g(con)o(trol)g(\015o)o(w)224
790 y(graph.)287 840 y(The)e(idea)g(of)f FK(live)h(r)n(ange)j
FN(in)d(this)f(sense)j(is)e(subtle.)18 b(A)13 b(liv)o(e)f(range)h(is)g
(de\014ned)h(b)o(y)e(some)224 890 y(smallest)19 b(connected)i(region)e
(of)g(de\014nition\(s\))g(and)h(use\(s\).)36 b(W)m(e)19
b(ma)o(y)e(ha)o(v)o(e)j(a)f(single)224 940 y(de\014nition)14
b(whic)o(h)h(is)f(used)h(in)f(sev)o(eral)h(lo)q(cations)f(ev)o(en)h
(after)g(con)o(trol)f(\015o)o(w)g(div)o(ergences.)224
990 y(Equally)d(w)o(e)h(ma)o(y)e(ha)o(v)o(e)i(m)o(ultiple)e
(de\014nitions)i(whic)o(h)f(are)i(connected)h(to)d(the)i(same)e(v)n
(alue)224 1040 y(b)q(elo)o(w)j(con)o(trol)g(\015o)o(w)f(merge)g(p)q
(oin)o(ts.)224 1151 y FO(Liv)o(e)i(ranges)g(arising)e(from)i
FK(SSA)224 1229 y FN(In)d(the)f FK(V)l(AL)g FN(whic)o(h)g(arises)h
(from)e(the)i FK(SSA)f FN(tec)o(hniques)i(discussed)g(in)d(the)i(last)f
(c)o(hapter,)i(a)224 1279 y(liv)o(e)f(range)h(with)f(m)o(ultiple)e
(de\014nitions)i(will)f(o)q(ccur)j(as)e(separate)i(virtual)d(registers)
j(whic)o(h)224 1329 y(are)i(joined)g(together)g(b)o(y)g(a)f(\010)g
(function.)23 b(In)16 b(this)g(case,)g(w)o(e)g(shall)f(initially)e
(treat)k(ev)o(ery)224 1379 y(separate)h(virtual)e(register)h(as)g(a)f
(separate)i(liv)o(e)e(range,)g(and)h(then)g(try)g(to)f(merge)g(these)
224 1429 y(connected)j(liv)o(e)d(ranges)h(b)q(efore)h(register)g(allo)q
(cation.)25 b(If)16 b(w)o(e)h(are)g(successful,)i(then)f(the)224
1478 y(whole)12 b(of)f(the)h(liv)o(e)f(range)h(will)e(ha)o(v)o(e)i(a)f
(single)h(register)g(allo)q(cated)g(to)f(it.)17 b(If)11
b(w)o(e)h(are)g(unable)224 1528 y(to)k(merge)f(the)h(ranges)g(in)o(to)e
(a)h(single)h(register,)g(then)g(the)g(\010)g(function)f(will)f(giv)o
(e)g(rise)i(to)224 1578 y(one)f(or)e(more)g(register-to-register)j
(copies)f(in)e(a)h(predecessor)i(of)e(the)g(merging)e(blo)q(c)o(k.)287
1629 y(Consider)17 b(the)h FK(V)l(AL)f FN(whic)o(h)g(arises)h(from)d(a)
i(statemen)o(t)g(whic)o(h)g(returns)i(a)d(Bo)q(olean)224
1678 y(v)n(alue,)d(in)g(\014gure)g(10.2.)k(In)c(this)h(\014gure,)f(the)
h(liv)o(e)e(ranges)i(for)f FM(v)1225 1684 y FB(x)1246
1678 y FN(,)g FM(v)1291 1684 y FB(y)1325 1678 y FN(and)g
FM(v)1425 1684 y FB(z)1457 1678 y FN(are)h(initially)p
1094 1858 2 75 v 1095 1858 a FC(?)p 794 1858 V -342 w(?)795
2050 y(S)826 2091 y(S)857 2133 y(S)876 2158 y(S)-31 b(w)1064
2050 y(\023)1033 2091 y(\023)1001 2133 y(\023)982 2158
y(\023)g(/)p 829 2158 307 4 v 829 2308 4 150 v 1132 2308
V 829 2311 307 4 v 979 1858 232 4 v 979 2008 4 150 v
1207 2008 V 979 2011 232 4 v 679 1858 V 679 2008 4 150
v 907 2008 V 679 2011 232 4 v 1057 1952 a Fm(v)1076 1956
y Fh(x)1106 1952 y Fw( )11 b FD(0)-417 b Fm(v)776 1956
y Fh(y)805 1952 y Fw( )12 b FD(1)851 2214 y Fm(v)870
2218 y Fh(z)898 2214 y Fw( )f FD(\010\()p Fm(v)1009 2218
y Fh(x)1028 2214 y Fm(;)6 b(v)1064 2218 y Fh(y)1083 2214
y FD(\))851 2270 y FF(return)11 b Fm(v)1001 2274 y Fh(z)994
1903 y FF(fLabel:)-440 b(tLabel:)441 2441 y FN(Figure)14
b(10.2:)j(Liv)o(e-range)c(arising)g(from)f(\\)p FG(return)h
FK(Bo)n(olExp)s FN(")224 2538 y(separate.)37 b(Ho)o(w)o(ev)o(er,)20
b(w)o(e)g(shall)f(try)h(to)f(merge)g(these)i(ranges)f(during)f(allo)q
(cation,)g(so)224 2588 y(that)d(the)f(t)o(w)o(o)g(literals)g(are)g
(directly)h(allo)q(cated)f(to)g(the)g(same)g(register.)23
b(Of)15 b(course,)h(our)224 2638 y(register)11 b(allo)q(cator)e(will)f
(also)h(try)g(to)h(ensure)h(that)f(the)g(merged)f(liv)o(e)f(range)i(is)
g(allo)q(cated)f(the)224 2688 y(function)14 b(return)h(register,)g(so)f
(that)g(the)g(return)h(statemen)o(t)f(requires)h(no)f(instructions.)p
eop
%%Page: 252 258
252 257 bop 224 274 a FN(252)556 b FL(CHAPTER)15 b(10.)31
b(REGISTER)13 b(ALLOCA)m(TION)224 390 y FH(10.2.2)56
b(The)18 b(in)n(terference)f(graph)224 468 y FN(V)m(alues)11
b(whic)o(h)g(ha)o(v)o(e)f(o)o(v)o(erlapping)g(liv)o(e)g(ranges)h(m)o
(ust)f(b)q(e)i(assigned)f(to)f(di\013eren)o(t)i(registers.)224
517 y(In)k(fact,)g(at)f(an)o(y)g(p)q(oin)o(t)g(in)h(the)g(execution)g
(of)f(the)i(program)d(eac)o(h)i(of)f(the)h(v)n(alues)f(whic)o(h)224
567 y(are)g(liv)o(e)e(at)h(that)f(p)q(oin)o(t)h(m)o(ust)f(b)q(e)h
(assigned)g(to)g(a)g(di\013eren)o(t)h(register.)287 617
y(W)m(e)h(mo)q(del)f(this)i(rule)g(b)o(y)g(a)f(classical)h(problem)e
(from)h(the)h(theory)g(of)g(\(undirected\))224 667 y(graphs.)i(Eac)o(h)
14 b(liv)o(e)f(range)h(corresp)q(onds)h(to)f(a)g(no)q(de)g(in)f(the)h
FO(in)o(terference)e(graph)p FN(.)17 b(An)224 717 y(edge)h(is)f(dra)o
(wn)f(b)q(et)o(w)o(een)j(eac)o(h)e(pair)f(of)h(no)q(des)g(whic)o(h)g
(ha)o(v)o(e)g(o)o(v)o(erlapping)e(liv)o(e)h(ranges,)224
767 y(and)j(whic)o(h)f(hence)i(in)o(terfere)g(with)e(eac)o(h)h(other.)
33 b(The)19 b(problem)e(is)i(to)f(\014nd)h(a)f(w)o(a)o(y)g(of)224
817 y(coloring)f(the)h(no)q(des)g(of)f(the)g(graph)h(so)f(that)g(no)g
(t)o(w)o(o)g(adjacen)o(t)h(edges)g(ha)o(v)o(e)f(the)h(same)224
866 y(color.)287 917 y(F)m(or)12 b(suc)o(h)i(undirected)h(graphs)e(the)
h FO(c)o(hromatic)f(n)o(um)o(b)q(er)e FN(is)i(the)g(minima)o(l)d(n)o
(um)o(b)q(er)224 966 y(of)k(colors)h(whic)o(h)f(are)h(required)h(to)e
(color)g(the)h(graph.)20 b(A)15 b(graph)f(is)h FM(k)q
FN(-colorable)e(if)h(it)g(has)224 1016 y(a)g(c)o(hromatic)f(n)o(um)o(b)
q(er)g(less)h(than)g(or)g(equal)g(to)f FM(k)q FN(.)287
1066 y(A)j(subset)i(of)e(no)q(des)i(for)e(whic)o(h)h(ev)o(ery)g(no)q
(de)g(is)g(adjacen)o(t)g(to)f(ev)o(ery)h(other)h(no)q(de)f(in)224
1116 y(the)d(subset)g(is)f(called)g(a)g FO(clique)736
1101 y Fz(2)753 1116 y FN(.)k(The)d FO(clique)f(n)o(um)o(b)q(er)d
FN(of)j(a)f(graph)h(is)g(the)h(size)f(of)g(the)224 1166
y(maxim)o(um)g(clique.)29 b(Clearly)17 b(all)f(mem)o(b)q(ers)h(of)g(a)g
(clique)g(m)o(ust)g(b)q(e)h(allo)q(cated)f(di\013eren)o(t)224
1216 y(colors,)h(and)g(hence)h(the)f(c)o(hromatic)e(n)o(um)o(b)q(er)h
(of)g(the)h(graph)f(cannot)h(b)q(e)g(smaller)e(than)224
1266 y(the)f(clique)f(n)o(um)o(b)q(er.)j(The)d(c)o(hromatic)f(n)o(um)o
(b)q(er)g(ma)o(y)f(exceed)k(the)e(clique)g(n)o(um)o(b)q(er,)e(as)i(is)
224 1315 y(sho)o(wn)h(b)o(y)g(\014gure)g(10.3,)f(where)i(the)f(c)o
(hromatic)f(n)o(um)o(b)q(er)g(is)h(three,)h(although)e(no)g(clique)224
1365 y(is)g(larger)g(than)g(2.)751 1424 y
 6117703 5854576 0 0 6117703 5854576 startTexFig
 751 1424 a
%%BeginDocument: imperfect.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-98.0 130.0 translate 0.900 -0.900 scale
0.500 setlinewidth
% Ellipse
n 159 99 43 43 0 360 DrawEllipse gs col-1 s gr
1.000 setlinewidth
% Ellipse
n 159 56 11 11 0 360 DrawEllipse gs 1.00 setgray fill gr
gs col-1 s gr
% Ellipse
n 131 132 11 11 0 360 DrawEllipse gs 1.00 setgray fill gr
gs col-1 s gr
% Ellipse
n 201 89 11 11 0 360 DrawEllipse gs 1.00 setgray fill gr
gs col-1 s gr
% Ellipse
n 119 84 11 11 0 360 DrawEllipse gs 1.00 setgray fill gr
gs col-1 s gr
% Ellipse
n 186 133 11 11 0 360 DrawEllipse gs 1.00 setgray fill gr
gs col-1 s gr
$F2psEnd
%%EndDocument

 endTexFig
 375 1886 a FN(Figure)g(10.3:)j(Graph)c(with)h(c)o(hromatic)f(n)o(um)o
(b)q(er)g(3,)g(clique)h(n)o(um)o(b)q(er)f(2)287 1986
y(In)e(the)g(register)i(allo)q(cation)c(con)o(text)j(eac)o(h)f(color)g
(corresp)q(onds)i(to)e(the)h(allo)q(cation)d(of)i(a)224
2036 y(particular)g(liv)o(e)f(range)i(to)e(a)h(particular)g(register.)
18 b(The)11 b(c)o(hromatic)f(n)o(um)o(b)q(er)h(of)f(the)h(graph)224
2086 y(is)h(the)h(n)o(um)o(b)q(er)e(of)g(registers)i(required)g(to)f
(complete)f(an)g(allo)q(cation.)16 b(All)11 b(of)g(the)i(registers)224
2135 y(whic)o(h)i(are)g(aliv)o(e)e(at)i(an)o(y)f(particular)g(p)q(oin)o
(t)g(in)g(a)h(program)e(form)f(part)j(of)f(a)g(clique,)g(and)224
2185 y(hence)j(m)o(ust)e(b)q(e)g(in)g(di\013eren)o(t)i(registers.)24
b(Ho)o(w)o(ev)o(er,)15 b(a)g(clique)h(ma)o(y)d(b)q(e)j(larger)f(than)h
(the)224 2235 y(n)o(um)o(b)q(er)g(of)f(registers)i(aliv)o(e)e(at)h(an)o
(y)f(one)h(p)q(oin)o(t.)24 b(Consider)16 b(the)h(program)d(con)o(trol)i
(\015o)o(w)224 2285 y(graph)i(in)f(\014gure)g(10.4,)g(where)h(the)g
(clique)g(n)o(um)o(b)q(er)e(\(and)i(the)g(c)o(hromatic)e(n)o(um)o(b)q
(er\))g(is)224 2335 y(3,)i(but)f(no)g(more)g(than)g(t)o(w)o(o)g(v)n
(alues)g(are)g(liv)o(e)g(at)g(an)o(y)g(p)q(oin)o(t)g(in)g(the)h
(execution)g(of)e(this)224 2385 y(program.)287 2435 y(The)h(problem)f
(of)h(computing)e(the)j(c)o(hromatic)e(n)o(um)o(b)q(er)h(of)f(an)h
(arbitrary)g(graph)g(is)224 2484 y(kno)o(wn)f(to)f(b)q(e)i
FK(NP)t FN(complete,)e(whic)o(h)h(means)f(that)h(an)f(exact)i(solution)
e(will)f(b)q(e)j(compu-)224 2534 y(tationaly)f(infeasible)h(except)i
(for)e(the)h(most)e(simple)g(cases.)30 b(The)17 b(apparen)o(tly)h
(simpler)p 224 2570 577 2 v 271 2597 a Fy(2)288 2609
y Fx(Clique)11 b(is)h(a)g(w)o(ord)g(used)f(to)h(describ)q(e)e(an)h(in)o
(timate)f(and)h(exclusiv)o(e)f(so)q(cial)g(group.)16
b(In)11 b(e\013ect,)g(ev)o(ery)224 2648 y(p)q(erson)d(is)i(\\connecte)o
(d")c(to)j(ev)o(ery)f(other)g(of)h(the)g(group.)k(The)c(w)o(ord)g(is)h
(pronounce)o(d)d(\\cleek")g(and)h(\\clic)o(k")224 2688
y(in)k(di\013eren)o(t)d(English)h(dialects.)p eop
%%Page: 253 259
253 258 bop 224 274 a FL(10.2.)31 b(GRAPH)14 b(COLORING)863
b FN(253)407 349 y
 16971694 12959006 0 0 16971694 12959006 startTexFig
 407 349 a
%%BeginDocument: interfere.eps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

 /DrawSplineSection {
	/y3 exch def
	/x3 exch def
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/xa x1 x2 x1 sub 0.666667 mul add def
	/ya y1 y2 y1 sub 0.666667 mul add def
	/xb x3 x2 x3 sub 0.666667 mul add def
	/yb y3 y2 y3 sub 0.666667 mul add def
	x1 y1 lineto
	xa ya xb yb x3 y3 curveto
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-58.0 215.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Ellipse
n 340 140 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 320 99 11 11 0 360 DrawEllipse gs col-1 s gr
% Ellipse
n 300 140 11 11 0 360 DrawEllipse gs col-1 s gr
0.500 setlinewidth
% Polyline
n 128 80 m 89 119 l gs col-1 s gr
n 96.071 114.757 m 89.000 119.000 l 93.243 111.929 l gs 2 setlinejoin col-1 s gr
% Polyline
n 130 80 m 171 119 l gs col-1 s gr
n 166.582 112.037 m 171.000 119.000 l 163.825 114.935 l gs 2 setlinejoin col-1 s gr
% Polyline
n 130 19 m 130 40 l gs col-1 s gr
n 132.000 32.000 m 130.000 40.000 l 128.000 32.000 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
% Polyline
n 159 238 m 159 199 l  99 199 l  99 238 l  clp gs col-1 s gr
0.500 setlinewidth
% Polyline
n 90 158 m 128 198 l gs col-1 s gr
n 123.940 190.823 m 128.000 198.000 l 121.040 193.578 l gs 2 setlinejoin col-1 s gr
% Polyline
n 171 158 m 132 198 l gs col-1 s gr
n 139.017 193.668 m 132.000 198.000 l 136.153 190.876 l gs 2 setlinejoin col-1 s gr
% Polyline
n 315 109 m 306 130 l gs col-1 s gr
% Polyline
n 326 109 m 337 130 l gs col-1 s gr
% Polyline
n 311 140 m 329 140 l gs col-1 s gr
1.000 setlinewidth
% Polyline
n 161 79 m 161 40 l  101 40 l  101 79 l  clp gs col-1 s gr
% Polyline
n 201 158 m 201 119 l  141 119 l  141 158 l  clp gs col-1 s gr
% Polyline
n 124 158 m 124 119 l  64 119 l  64 158 l  clp gs col-1 s gr
0.500 setlinewidth
	[4.000000] 0 setdash
% Open spline
n 106.000 51.000 m 106.000 65.500 l
	106.000 65.500 106.000 80.000 87.500 99.000 DrawSplineSection
	87.500 99.000 69.000 118.000 69.000 130.500 DrawSplineSection
	69.000 143.000 l gs col-1 s gr
	[] 0 setdash
n 71.000 135.000 m 69.000 143.000 l 67.000 135.000 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Open spline
n 154.000 131.000 m 154.000 145.000 l
	154.000 145.000 154.000 159.000 134.500 179.500 DrawSplineSection
	134.500 179.500 115.000 200.000 114.500 209.500 DrawSplineSection
	114.000 219.000 l gs col-1 s gr
	[] 0 setdash
n 116.418 211.116 m 114.000 219.000 l 112.423 210.906 l gs 2 setlinejoin col-1 s gr
	[4.000000] 0 setdash
% Open spline
n 75.000 131.000 m 75.000 145.500 l
	75.000 145.500 75.000 160.000 94.000 180.000 DrawSplineSection
	94.000 180.000 113.000 200.000 113.500 210.500 DrawSplineSection
	114.000 221.000 l gs col-1 s gr
	[] 0 setdash
	[4.000000] 0 setdash
% Open spline
n 115.000 68.000 m 115.000 74.000 l
	115.000 74.000 115.000 80.000 131.500 96.500 DrawSplineSection
	131.500 96.500 148.000 113.000 148.000 128.500 DrawSplineSection
	148.000 144.000 l gs col-1 s gr
	[] 0 setdash
n 150.000 136.000 m 148.000 144.000 l 146.000 136.000 l gs 2 setlinejoin col-1 s gr
/Times-Italic findfont 10.00 scalefont setfont
120 71 m 
gs 1 -1 scale (define v2) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
120 54 m 
gs 1 -1 scale (define v1) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
161 133 m 
gs 1 -1 scale (define v3) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
79 133 m 
gs 1 -1 scale (define v3) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
80 146 m 
gs 1 -1 scale (use v1) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
160 146 m 
gs 1 -1 scale (use v2) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
120 221 m 
gs 1 -1 scale (use v3) col-1 show gr
/Times-Bold findfont 17.00 scalefont setfont
104 52 m 
gs 1 -1 scale (.) col-1 show gr
/Times-Bold findfont 17.00 scalefont setfont
152 132 m 
gs 1 -1 scale (.) col-1 show gr
/Times-Bold findfont 17.00 scalefont setfont
73 132 m 
gs 1 -1 scale (.) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
316 103 m 
gs 1 -1 scale (v1) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
296 143 m 
gs 1 -1 scale (v2) col-1 show gr
/Times-Italic findfont 10.00 scalefont setfont
336 144 m 
gs 1 -1 scale (v3) col-1 show gr
/Times-Bold findfont 17.00 scalefont setfont
113 68 m 
gs 1 -1 scale (.) col-1 show gr
$F2psEnd
%%EndDocument

 endTexFig
 334 1261 a FN(Figure)14 b(10.4:)j FK(CF)o(G)g FN(and)d(in)o
(terference)i(graph)e(with)f(c)o(hromatic)g(n)o(um)o(b)q(er)g(3)224
1437 y(problem)e(of)h(answ)o(ering)g(the)h(question)f(\\is)g(graph)g
FM(G)g FK(k)t FN(-colorable")g(is)g(also)f FK(NP)t FN(complete.)224
1659 y FO(P)o(erfect)j(graphs)224 1776 y FN(Graphs)21
b(for)f(whic)o(h)g(the)g(clique)h(n)o(um)o(b)q(er)e(of)h(the)h(graph)f
(is)g(equal)g(to)g(the)h(c)o(hromatic)224 1826 y(n)o(um)o(b)q(er)d(are)
g(said)g(to)g(b)q(e)h FO(p)q(erfect)p FN(.)29 b(There)19
b(are)g(a)f(v)n(ariet)o(y)f(of)h(sp)q(ecial)g(top)q(ologies)g(for)224
1876 y(whic)o(h)g(all)f(graphs)h(are)g(kno)o(wn)g(to)f(b)q(e)i(p)q
(erfect.)31 b(F)m(or)18 b(example,)f(graphs)h(whic)o(h)g(mo)q(del)224
1925 y(the)h(o)o(v)o(erlap)f(of)g(in)o(terv)n(als)g(on)g(the)h(n)o(um)o
(b)q(er)e(line)h(are)h(kno)o(wn)f(to)g(b)q(e)h(p)q(erfect.)33
b(In)18 b(this)224 1975 y(mo)q(del,)i(in)o(terv)n(als)f(on)g(the)i(n)o
(um)o(b)q(er)e(line)g(corresp)q(ond)i(to)f(no)q(des)h(of)e(the)h
(graph,)h(with)224 2025 y(edges)c(b)q(et)o(w)o(een)g(those)f(no)q(des)h
(whic)o(h)e(corresp)q(ond)i(to)f(in)o(terv)n(als)f(whic)o(h)g(o)o(v)o
(erlap)g(on)h(the)224 2075 y(line.)i(These)d FO(in)o(terv)m(al)e
(graphs)f FN(exactly)i(mo)q(del)e(the)j(b)q(eha)o(viour)e(of)g
(register)i(allo)q(cation)224 2125 y(in)f(straigh)o(t-line)f(con)o
(trol)h(\015o)o(w.)287 2196 y(An)20 b(imp)q(ortan)o(t)e(prop)q(ert)o(y)
k(of)d(p)q(erfect)j(graphs)e(is)g(that)h(they)f(ma)o(y)f(b)q(e)h
(colored)h(in)224 2246 y(p)q(olynomial)11 b(time.)16
b(In)e(the)g(case)h(of)e(in)o(terv)n(al)g(graphs,)g(these)i(ma)o(y)d(b)
q(e)i(colored)g(in)f(almost)224 2296 y(linear)h(time.)j(W)m(e)c(use)i
(this)f(prop)q(ery)g(in)g(later)g(sections.)287 2367
y(The)c(graphs)g(induced)h(b)o(y)e(the)i(in)o(terference)h(of)d(in)o
(terv)n(als)h(on)f(a)h(circle)h(are)f(also)f(p)q(erfect,)224
2417 y(suggesting)19 b(that)g(sp)q(ecial,)g(lo)q(cally)e(optimal)f
(register)k(allo)q(cation)d(algorithms)f(ma)o(y)h(b)q(e)224
2467 y(computationaly)12 b(feasible)h(for)h(program)e(fragmen)o(ts)h
(with)h(simple)e(lo)q(op)h(structures.)287 2538 y(Similarl)o(y)m(,)e
(the)16 b(in)o(terference)h(b)q(et)o(w)o(een)f(subtrees)h(of)d(a)h
(tree)h(induce)f(p)q(erfect)i(graphs.)224 2588 y(This)h(is)f(an)g(in)o
(teresting)g(result)h(since)g(v)n(alues)f(arising)g(from)e(a)i(single)g
(de\014nition)g(p)q(oin)o(t)224 2638 y(ha)o(v)o(e)c(liv)o(e)f(ranges)h
(whic)o(h)f(are)h(trees)i(on)d(the)h(con)o(trol)g(\015o)o(w)f(graph.)17
b(P)o(erhaps)d(a)e(restriction)224 2688 y(to)i(suc)o(h)h(v)n(alues)e
(migh)o(t)f(lead)i(to)g(a)f(simple)f(coloring)h(algorithm.)p
eop
%%Page: 254 260
254 259 bop 224 274 a FN(254)556 b FL(CHAPTER)15 b(10.)31
b(REGISTER)13 b(ALLOCA)m(TION)224 390 y FI(10.3)66 b(Heuristics)23
b(for)f(lo)r(cal)h(allo)r(cation)224 491 y FH(10.3.1)56
b(On-the-\015y)17 b(allo)r(cation)224 570 y FN(The)d(metho)q(d)f(of)g
(register)i(allo)q(cation)d(used)i(in)f(the)h(v)o(ery)g(simplest)f
(compilers)f(is)i(to)f(allo-)224 620 y(cate)h(registers)h(as)e
(required,)h(as)f(co)q(de)g(is)g(generated.)19 b(This)13
b(metho)q(d)g(is)f(called)h(on-the-\015y)224 669 y(allo)q(cation.)k(In)
d(e\013ect,)g(the)h(co)q(de)f(generator)h(has)f(a)f(mo)q(dule)g(whic)o
(h)g(manages)g(the)h(regis-)224 719 y(ters,)h(and)f(main)o(tains)d(the)
k(data)e(structures)k(whic)o(h)d(represen)o(t)i(the)e(register)h
(state.)k(This)224 769 y(mo)q(dule)13 b(t)o(ypically)f(exp)q(orts)j
(pro)q(cedures)h(with)e(the)h(follo)o(wing)c(signatures)j(|)295
860 y FF(PROCEDURE)i(AllocRegist)o(er)o(\(\))g(:)j(RegIndex;)295
905 y(PROCEDURE)d(FreeRegiste)o(r\()o(reg)g(:)j(RegIndex\);)224
997 y FN(In)e(the)h(case)g(of)e(mac)o(hines)h(with)f(di\013eren)o(t)i
(register)g(classes)h(there)f(ma)o(y)d(b)q(e)j(a)e(need)i(to)224
1047 y(parameterize)c(the)h(allo)q(cation)d(pro)q(cedure.)287
1098 y(The)h(simple)f(strategy)h(of)g(reallo)q(cating)f(an)g(already)h
(freed)h(register)g(whenev)o(er)g(p)q(ossi-)224 1148
y(ble)e(is)f(an)g(e\013ectiv)o(e)h(heuristic)h(for)d(the)i(allo)q
(cation)e(pro)q(cedure.)19 b(This)11 b(strategy)h(is)f(actually)224
1197 y(optimal)h(for)i(straigh)o(t)g(line)g(co)q(de,)h(although)f
(there)i(are)e(some)g(serious)h(practical)f(limita-)224
1247 y(tions)g(whic)o(h)g(w)o(e)g(discuss)h(later.)287
1298 y(Consider)20 b(the)g(problem)f(of)g(coloring)g(an)h(in)o(terv)n
(al)f(graph,)i(where)g(the)f(no)q(des)h(are)224 1348
y(colored)c(in)e(order)i(of)e(left-most)g(end)i(of)e(the)i(in)o(terv)n
(als.)24 b(W)m(e)15 b(shall)h(supp)q(ose)h(that)f(there)224
1398 y(is)g(a)f(data)g(structure)i(whic)o(h)e(lists)g(the)h(colors)g
(used)g(and)f(then)h(freed.)23 b(When)15 b(a)g(color)g(is)224
1447 y(required)j(for)e(a)g(new)h(in)o(terv)n(al,)f(and)g(the)h(free)g
(list)f(is)h(not)f(empt)o(y)m(,)f(an)h(arbitrary)h(c)o(hoice)224
1497 y(is)f(made)e(from)g(the)i(\\freed)h(list".)22 b(If)15
b(the)i(list)e(is)g(empt)o(y)m(,)f(as)i(it)f(is)h(initially)m(,)c(then)
17 b(a)e(new)224 1547 y(color)h(is)g(c)o(hosen.)24 b(When)16
b(the)h(end)f(of)f(eac)o(h)h(in)o(terv)n(al)f(is)h(found,)f(the)i
(color)e(allo)q(cated)g(to)224 1597 y(that)f(in)o(terv)n(al)f(is)h
(placed)g(on)g(the)g(free)h(list.)287 1648 y(In)i(e\013ect)i(this)e
(algorithm)d(scans)k(the)g(n)o(um)o(b)q(er)e(line)h(from)e(left)i(to)g
(righ)o(t)g(allo)q(cating)224 1697 y(and)f(deallo)q(cating)f(colors)g
(as)h(the)g(b)q(eginning)g(and)f(end)h(of)f(eac)o(h)i(in)o(terv)n(al)e
(is)g(found.)23 b(A)o(t)224 1747 y(an)o(y)14 b(p)q(oin)o(t)f(on)h(the)g
(line,)f(the)h(n)o(um)o(b)q(er)f(of)g(colors)h(used)h(is)f(exactly)g
(equal)f(to)h(the)g(n)o(um)o(b)q(er)224 1797 y(of)h(in)o(terv)n(als)g
(whic)o(h)h(co)o(v)o(er)g(that)f(p)q(oin)o(t.)23 b(Since)16
b(the)g(colors)f(are)h(reused,)h(it)e(follo)o(ws)f(that)224
1847 y(the)f(maxim)o(um)7 b(n)o(um)o(b)q(er)12 b(of)g(colors)g(used)h
(is)f(exactly)h(the)f(clique)h(n)o(um)o(b)q(er)e(of)h(the)h(induced)224
1897 y(graph.)21 b(Since)15 b(in)o(terv)n(al)f(graphs)h(are)g(p)q
(erfect,)h(it)e(follo)o(ws)f(that)i(the)g(algorithm)d(allo)q(cates)224
1946 y(the)j(minim)o(al)10 b(n)o(um)o(b)q(er)k(of)f(registers.)224
2059 y FO(Discussion)224 2138 y FN(On-the-\015y)18 b(register)g(allo)q
(cation,)e(in)g(spite)i(of)e(its)h(lo)q(cal)f(optimalit)o(y)m(,)e(has)j
(a)g(n)o(um)o(b)q(er)f(of)224 2188 y(serious)d(problems.)j(In)c(order)h
(to)f(see)h(wh)o(y)f(this)g(is,)f(w)o(e)h(need)h(to)f(consider)h(to)f
(what)f(exten)o(t)224 2237 y(the)k(assumptions)e(inheren)o(t)i(in)e
(the)h(metho)q(d)f(are)i(justi\014ed.)287 2288 y(The)c(ma)r(jor)e
(di\016cult)o(y)h(with)h(the)g(metho)q(d)g(in)f(practice,)i(is)f(that)g
(insu\016cien)o(t)g(is)g(kno)o(wn)224 2338 y(ab)q(out)j(the)f(uses)i
(of)e(the)h(v)n(alue)e(at)h(the)h(time)e(that)h(the)h(allo)q(cation)e
(m)o(ust)g(b)q(e)i(made.)j(Ev)o(en)224 2388 y(on)f(mac)o(hines)e(with)h
(large)g(n)o(um)o(b)q(ers)g(of)g(general)h(purp)q(ose)h(registers)g
(there)f(are)g(con)o(v)o(en-)224 2438 y(tions)c(whic)o(h)f(go)o(v)o
(ern)g(the)i(use)f(of)f(particular)g(registers.)19 b(T)o(ypically)10
b(registers)j(are)f(divided)224 2487 y(in)o(to)i(caller-sa)o(v)o(es)i
(and)e(callee-sa)o(v)o(es)h(subsets,)i(as)e(detailed)f(in)h(the)g(c)o
(hapter)h(on)e(run)o(time)224 2537 y(organization.)23
b(F)m(urthermore,)16 b(register)h(use)f(con)o(v)o(en)o(tions)g(ma)o(y)e
(require)j(sp)q(eci\014c)g(regis-)224 2587 y(ters)e(to)f(b)q(e)h(used)f
(for)g(parameter)g(passing)f(or)h(the)h(return)g(of)e(function)h(v)n
(alues.)287 2638 y(If)e(follo)o(ws)f(that)h(on-the-\015y)h(allo)q
(cators)f(often)h(place)f(v)n(alues)h(in)f(registers)i(whic)o(h)e
(later)224 2688 y(on)j(turn)g(out)g(to)g(b)q(e)h(needed)g(for)f(some)f
(dedicated)h(purp)q(ose,)h(or)f(need)h(to)f(b)q(e)g(sa)o(v)o(ed)g(and)p
eop
%%Page: 255 261
255 260 bop 224 274 a FL(10.3.)31 b(HEURISTICS)14 b(F)o(OR)g(LOCAL)g
(ALLOCA)m(TION)447 b FN(255)224 390 y(restored)17 b(around)d(a)h(pro)q
(cedure)h(call.)k(In)15 b(suc)o(h)g(cases)h(the)f(register)h(allo)q
(cation)d(needs)j(to)224 440 y(b)q(e)f(corrected,)h(or)d(additional)f
(co)q(de)j(generated)g(to)f(cop)o(y)g(or)g(sa)o(v)o(e)g(the)g(v)n
(alue.)287 491 y(The)e(allo)q(cation)e(ma)o(y)g(b)q(e)i(done)g(m)o(uc)o
(h)f(more)g(e\013ectiv)o(ely)h(if)f(full)g(information)e(is)i(a)o(v)n
(ail-)224 541 y(able)j(on)f(the)i(uses)g(of)e(the)h(v)n(alue.)j(Ho)o(w)
o(ev)o(er,)d(as)g(w)o(e)g(shall)f(see)i(presen)o(tly)m(,)f(to)f(accum)o
(ulate)224 591 y(this)e(usage)h(information)c(requires)k(some)e
(bu\013ering)h(of)f(co)q(de,)i(in)f(whic)o(h)f(case)i(alternativ)o(es)
224 641 y(to)i(on-the-\015y)g(allo)q(cation)e(b)q(ecome)i(p)q(ossible.)
224 754 y FO(Spilli)o(ng)f(registers)g(on-the-\015y)224
833 y FN(If)k(it)g(should)g(happ)q(en)h(that)f(the)h(n)o(um)o(b)q(er)e
(of)h(registers)i(needed)f(exceeds)i(the)e(a)o(v)n(ailable)224
882 y(n)o(um)o(b)q(er,)13 b(then)g(at)g(least)h(one)f(v)n(alue)f
(previously)h(in)g(a)g(register)h(m)o(ust)e(b)q(e)i(discarded.)19
b(The)224 932 y(c)o(hoice)c(of)e(whic)o(h)h(v)n(alue)f(to)h(discard)g
(\014rst)h(is)f(imp)q(ortan)o(t.)287 983 y(Giv)o(en)f(su\016cien)o(t)h
(information,)d(w)o(e)j(ma)o(y)e(classify)h(v)n(alues)g(in)h(registers)
h(on)f(the)g(basis)224 1033 y(of)g(t)o(w)o(o)f(attributes)i(|)287
1119 y Ft(\017)20 b FN(a)15 b(v)n(alue)g(is)g FO(lo)q(cally-liv)o(e)d
FN(if)j(it)g(is)g(used)h(again)e(within)h(the)h(same)e(extended)j
(basic)328 1169 y(blo)q(c)o(k,)c(otherwise)i(it)f(is)f
FO(lo)q(cally-dead)287 1256 y Ft(\017)20 b FN(a)14 b(v)n(alue)g(is)g
(either)h FO(p)q(ending,)g(sa)o(v)o(ed)e FN(or)h FO(v)o(olatile)p
FN(.)j(Newly)d(computed)g(v)n(alues)g(of)328 1306 y(v)n(ariables)j(are)
h FO(p)q(ending)d FN(un)o(til)h(they)i(are)g(written)g(to)g(their)g
(allo)q(cated)f(memory)328 1356 y(lo)q(cations,)22 b(at)e(whic)o(h)h(p)
q(oin)o(t)f(they)h(b)q(ecome)g FO(sa)o(v)o(ed)p FN(.)37
b(Loaded)21 b(v)n(ariable)f(v)n(alues)328 1406 y(are)15
b(also)g(already)f FO(sa)o(v)o(ed)p FN(.)20 b(T)m(emp)q(orary)14
b(v)n(alues)g(in)h(registers)h(whic)o(h)f(do)g(not)f(ha)o(v)o(e)328
1455 y(memory)e(lo)q(cations)h(allo)q(cated)g(to)h(them)f(are)h
FO(v)o(olatile)224 1542 y FN(Notice)e(that)g(w)o(e)g(distinguish)f(b)q
(et)o(w)o(een)i(a)e(v)n(alue)g(in)g(a)g(register)i(b)q(eing)e(lo)q
(cally)f(dead,)i(\(that)224 1591 y(is,)k(not)f(used)i(again)d(in)i(the)
g(extended)h(basic)f(blo)q(c)o(k\))f(and)h(the)g(corresp)q(onding)g(v)n
(ariable)224 1641 y(itself)h(b)q(eing)g(dead.)27 b(T)m(o)16
b(determine)h(the)h(liv)o(eness)f(or)g(otherwise)h(of)e(v)n(ariables)g
(requires)224 1691 y(non-lo)q(cal)f(analysis.)21 b(Ho)o(w)o(ev)o(er,)16
b(if)f(w)o(e)g(simply)f(agree)i(to)f FK(always)g FN(sa)o(v)o(e)h(p)q
(ending)f(v)n(alues,)224 1741 y(w)o(e)g(shall)e(alw)o(a)o(ys)h(b)q(e)h
(safe.)k(W)m(e)14 b(shall)g(o)q(ccasionally)f(sa)o(v)o(e)i(a)f(v)n
(alue)f(to)h(memory)e(whic)o(h)i(is)224 1791 y(nev)o(er)e(reused,)h
(but)e(w)o(e)g(do)f(not)h(need)h(to)e(compute)h(v)n(ariable)e(liv)o
(eness.)18 b(This)10 b(is)h(equiv)n(alen)o(t)224 1841
y(to)j(assuming)e(that)i(all)f(v)n(ariables)g(are)i(liv)o(e)e(at)g(the)
i(end)f(of)g(eac)o(h)g(basic)g(blo)q(c)o(k.)287 1891
y(W)m(e)h(ma)o(y)f(no)o(w)i(deduce)i(the)e(cost)h(of)e(spilling)g(for)h
(eac)o(h)g(category)h(of)e(v)n(alue,)h(for)f(our)224
1941 y(target)g(arc)o(hitecture.)20 b(This)13 b(cost)i(is)f(computed)f
(as)h(follo)o(ws)e(|)287 2027 y Ft(\017)20 b FN(a)14
b(lo)q(cally-liv)o(e,)d(p)q(ending)j(v)n(alue)f(m)o(ust)g(b)q(e)i(sa)o
(v)o(ed)f(to)g(memory)d(and)j(reloaded)g(prior)328 2077
y(to)g(the)g(next)g(use.)19 b(The)14 b(incremen)o(tal)f(cost)h(of)g
(freeing)f(suc)o(h)i(a)e(register)i(is)f(just)g(the)328
2127 y(cost)h(of)e(the)i(reload,)e(as)h(the)g(v)n(alue)f(needed)j(to)d
(b)q(e)i(sa)o(v)o(ed)f(to)g(memory)d(an)o(yw)o(a)o(y)287
2214 y Ft(\017)20 b FN(a)c(lo)q(cally-liv)o(e,)d(sa)o(v)o(ed)j(v)n
(alue)f(do)q(es)h(not)g(require)h(a)e(memory)e(write,)j(but)g(m)o(ust)f
(b)q(e)328 2264 y(reloaded)e(prior)g(to)g(the)g(next)h(use.)k(The)13
b(cost)h(is)f(the)g(same)f(as)h(for)g(the)g(lo)q(cally-liv)o(e,)328
2314 y(p)q(ending)h(case)h(ab)q(o)o(v)o(e)287 2401 y
Ft(\017)20 b FN(a)15 b(lo)q(cally-liv)o(e,)d(v)o(olatile)i(v)n(alue)g
(m)o(ust)g(ha)o(v)o(e)h(a)g(memory)e(lo)q(cation)h(allo)q(cated)g(to)h
(it,)328 2451 y(b)q(e)f(written)g(to)f(that)h(lo)q(cation,)e(and)h(b)q
(e)h(reloaded)g(prior)f(to)g(the)h(next)g(use.)19 b(This)13
b(is)328 2501 y(alw)o(a)o(ys)g(the)i(most)d(exp)q(ensiv)o(e)j(category)
g(of)e(v)n(alue)g(to)h(spill)287 2588 y Ft(\017)20 b
FN(a)e(lo)q(cally-dead,)f(p)q(ending)h(v)n(alue)f(m)o(ust)f(b)q(e)j(sa)
o(v)o(ed)f(to)f(memory)m(.)27 b(This)18 b(frees)h(the)328
2638 y(register)f(at)e(zero)i(incremen)o(tal)d(cost,)j(since)f(the)g(v)
n(alue)f(had)g(to)h(b)q(e)g(sa)o(v)o(ed)g(in)f(an)o(y)328
2688 y(case,)f(and)e(no)h(reload)g(is)f(required)p eop
%%Page: 256 262
256 261 bop 224 274 a FN(256)556 b FL(CHAPTER)15 b(10.)31
b(REGISTER)13 b(ALLOCA)m(TION)287 390 y Ft(\017)20 b
FN(a)d(lo)q(cally-dead,)f(sa)o(v)o(ed)h(v)n(alue)g(requires)h(no)f
(action,)g(since)h(the)f(v)n(alue)g(is)g(already)328
440 y(sa)o(v)o(ed,)d(and)g(frees)h(its)e(register)j(at)d(zero)i(cost)
287 536 y Ft(\017)20 b FN(a)d(lo)q(cally-dead,)f(v)o(olatile)g(v)n
(alue)h(requires)h(no)f(action,)g(and)g(frees)i(its)e(register)h(at)328
585 y(zero)d(cost)224 678 y(If)g(information)e(w)o(as)i(a)o(v)n
(ailable)e(on)i(the)h(liv)o(eness)g(of)e FK(variables)19
b FN(rather)d(than)f(liv)o(eness)h(of)224 728 y(register)g(v)n(alues,)d
(w)o(e)i(could)f(impro)o(v)o(e)e(these)k(cost)f(estimates)e(in)h(the)h
(t)o(w)o(o)f(p)q(ending)g(v)n(alue)224 777 y(cases.)287
830 y(The)i(spill)g(cost)h(information)c(ma)o(y)i(b)q(e)h(used)i(to)e
(decide)h(the)g(order)g(in)f(whic)o(h)g(regis-)224 880
y(ter)i(v)n(alues)e(should)h(b)q(e)g(spilled)f(to)g(memory)m(.)24
b(Of)16 b(course,)i(the)g(v)n(alues)e(with)g(the)h(lo)o(w)o(est)224
930 y(incremen)o(tal)c(cost)i(of)e(spilling)f(should)i(b)q(e)h(spilled)
e(\014rst.)224 1054 y FO(Determinin)o(g)g(lo)q(cal)i(liv)o(eness)224
1136 y FN(W)m(e)c(ha)o(v)o(e)f(so)h(far)f(a)o(v)o(oided)g(the)h
(question)f(of)g(the)i(determination)d(of)h(lo)q(cal)f(liv)o(eness)j
(prop)q(er-)224 1186 y(ties.)18 b(Since)13 b(the)g(con)o(text)g(is)g
(on-the-\015y)f(allo)q(cation,)f(w)o(e)i(shall)e(assume)h(that)h
(instructions)224 1236 y(are)h(b)q(eing)f(emitted)g(imm)o(ediately)m(,)
c(and)k(no)g(bu\013ering)h(of)e(instructions)i(is)f(p)q(erformed.)18
b(If)224 1286 y(this)12 b(is)f(the)h(case,)g(the)g(only)e(source)j(of)d
(information)e(on)j(liv)o(eness)h(of)f(v)n(alues)g(is)g(the)h(shado)o
(w)224 1336 y(stac)o(k)j(of)e(the)h(in)o(terpretiv)o(e)h(co)q(de)f
(generator.)19 b(If)14 b(the)g(v)n(alue)f(is)h(duplicated)f(on)h(the)g
(stac)o(k,)224 1386 y(then)h(it)e(is)h(lo)q(cally)f(liv)o(e,)f
(otherwise)j(it)f(is)f(lo)q(cally)g(dead.)287 1438 y(In)g(our)h
(reference)i(arc)o(hitecture,)e(where)h(w)o(e)f(bu\013er)g(the)g
(virtual)f(assem)o(bly)f(language)224 1488 y(at)18 b(least)h(one)f
(basic)g(blo)q(c)o(k)g(at)g(a)f(time,)h(w)o(e)g(can)g(do)g(m)o(uc)o(h)f
(b)q(etter.)32 b(In)18 b(this)g(case,)i(the)224 1538
y(lo)q(cal)c(common)d(sub-expression)18 b(analysis)d(of)h(the)h
(previous)f(c)o(hapter)h(ma)o(y)e(ha)o(v)o(e)h(found)224
1588 y(further)h(uses)g(for)f(v)n(alues)f(whic)o(h)h(w)o(ould)f(ha)o(v)
o(e)g(b)q(een)i(discarded)g(in)e(analysis)g(of)h(shado)o(w)224
1638 y(stac)o(k)g(con)o(ten)o(ts.)23 b(W)m(e)14 b(ma)o(y)f(therefore)k
(p)q(erform)d(a)h(bac)o(kw)o(ard)g(scan)h(through)f(the)g(bu\013er)224
1688 y(to)g(determine)g(lo)q(cal)f(liv)o(eness.)22 b(The)16
b(next)f(section)h(sho)o(ws)g(that)f(when)g(this)g(is)g(the)h(case,)224
1737 y(it)e(is)g(adv)n(an)o(tageous)f(to)h(allo)q(cate)f(registers)i
(during)f(the)g(same)f(bac)o(kw)o(ard)h(scan.)224 1870
y FH(10.3.2)56 b(Bac)n(kw)n(ards)20 b(allo)r(cation)d(in)h(V)-6
b(AL)224 1952 y FN(Excellen)o(t)20 b(register)g(allo)q(cation)e(ma)o(y)
f(b)q(e)j(obtained)f(b)o(y)g(assigning)f(registers)j(during)e(a)224
2002 y(bac)o(kw)o(ard)d(pass)h(through)f(the)h FK(V)l(AL)e
FN(bu\013er.)26 b(In)16 b(a)g(later)g(section)h(w)o(e)f(consider)h(the)
g(ex-)224 2052 y(tension)e(of)e(this)h(metho)q(d)f(to)h(global)e(allo)q
(cation.)287 2105 y(After)g(the)g FK(V)l(AL)f FN(co)q(de)i(for)e(an)h
(extended)h(basic)f(blo)q(c)o(k)f(has)h(b)q(een)h(placed)f(in)o(to)f(a)
g(bu\013er)224 2155 y(it)18 b(is)f(p)q(ossible)h(to)f(p)q(erform)g
(exactly)g(optimal)e(register)k(assignmen)o(t)d(for)h(the)i(v)n(alues)e
(in)224 2204 y(the)g(blo)q(c)o(k.)24 b(The)16 b(optimalit)o(y)d(result)
k(dep)q(ends)g(on)f(a)g(result)g(deriv)o(ed)h(from)d(considering)224
2254 y(the)f(coloring)e(of)g(the)i(induced)g(in)o(terv)n(al)e(graph.)17
b(No)12 b(graph)g(is)g(actually)f(constructed,)j(the)224
2304 y(graph)c(is)g(only)f(necessary)j(to)d(pro)o(v)o(e)h(the)h
(optimalit)o(y)6 b(of)k(the)g(rule)g(used)h(in)e(the)i(assignmen)o(t.)
287 2357 y(The)h(algorithm)d(uses)j(a)g(data)f(structure)i(whic)o(h)f
(maps)e(virtual)h(to)g(ph)o(ysical)g(registers.)224 2407
y(F)m(or)j(eac)o(h)g(virtual)f(register)i(encoun)o(tered,)h(the)e
(follo)o(wing)e(information)f(is)i(required)i(|)295 2508
y FF(TYPE)j(VRegInfo)f(=)i(RECORD)648 2553 y(physReg)e(:)i(PhysReg;)e
(\(*)i(initially)d(noReg)i(*\))648 2599 y(lastUse)f(:)i(BuffIdx;)e(\(*)
i(initially)d(zero)38 b(*\))648 2645 y(...)136 b(\(*)19
b(other)f(fields)f(as)i(required)e(*\))609 2690 y(END;)p
eop
%%Page: 257 263
257 262 bop 224 274 a FL(10.3.)31 b(HEURISTICS)14 b(F)o(OR)g(LOCAL)g
(ALLOCA)m(TION)447 b FN(257)224 390 y(The)17 b(information)d(sho)o(wn)i
(is)h(all)e(that)i(is)f(required)h(for)f(t)o(ypical)g
FK(RISC)23 b FN(mac)o(hines.)i(F)m(or)224 440 y(mac)o(hines)18
b(with)g(di\013eren)o(t)h(classes)h(of)e(register,)i(it)e(ma)o(y)e(b)q
(e)j(necessary)i(to)d(de\014ne)h(and)224 490 y(include)13
b(a)f(set)i(of)e FK(value-uses)k FN(so)d(that)f(when)h(the)h(allo)q
(cation)c(is)j(done)g(it)f(is)g(kno)o(wn)g(whic)o(h)224
540 y(class)k(of)f(register)i(m)o(ust)d(b)q(e)i(used.)24
b(This)15 b(information)e(migh)o(t)g(include)j(predicates)h(suc)o(h)224
590 y(as)d FK(isUse)n(dAsIndexR)n(e)n(gister)p FN(,)g(and)f(so)h(on.)
287 640 y(The)j(other)h(required)g(data)f(structure)j(is)d(an)g(arra)o
(y)g(indexed)g(on)g(ph)o(ysical)g(register)224 689 y(ordinal,)10
b(whic)o(h)h(records)i(the)e(next)h(\(that)f(is)g(next)g(highest\))h
(index)f(at)f(whic)o(h)h(the)h(ph)o(ysical)224 739 y(register)j(has)f
(a)g(new)g(v)n(alue)g(de\014ned.)268 823 y FG(VAR)43
b(nextDef)20 b(=)i(ARRAY)f(PhysReg)f(OF)h(BuffIdx;)g(\(*)g(initially)f
(maxIx)h(*\))224 906 y FN(The)16 b(data)f(in)g(b)q(oth)g(of)g(these)i
(structures)h(is)d(computed)g(during)g(the)h(bac)o(kw)o(ard)f(scan)h
(of)224 956 y(the)e(bu\013er,)f(and)g(pro)o(vide)f(all)g(of)g(the)h
(information)d(needed)k(for)e(an)h(optimal)d(assignmen)o(t.)287
1006 y(The)k(algorithm)d(w)o(orks)j(as)g(follo)o(ws)e(|)287
1089 y(1)20 b(starting)10 b(from)d(the)j(\014nal)f(instruction)h(in)f
(the)h(blo)q(c)o(k,)g(eac)o(h)f(instruction)h(is)g(examined)328
1139 y(in)k(turn)287 1223 y(2)20 b(if)12 b(the)g(instruction)h(is)f
(the)h(de\014ning)f(o)q(ccurrence)j(for)d(a)g(particular)g(virtual)f
(register)328 1273 y(\(and)18 b(b)o(y)g(design)h(the)f
FK(only)23 b FN(de\014ning)18 b(o)q(ccurrence\))j(then)e(a)e(ph)o
(ysical)h(register)h(is)328 1322 y(assigned)14 b(to)g(the)h
FK(VR)n(e)n(g)i FN(using)d(the)g(follo)o(wing)e(rules,)i(in)f(order)i
(|)420 1406 y FO(if)d FN(the)j(de\014ning)f(instruction)h(is)e(a)h(cop)
o(y)g FK(fr)n(om)j FN(some)c(ph)o(ysical)h(register,)g(and)420
1456 y(that)9 b(register)i(is)f(free)h(throughout)e(the)i(liv)o(e)e
(range,)h(then)h(assign)e(that)h(register)420 1506 y(to)j(the)i
FK(VR)n(e)n(g)420 1572 y FO(else)c FN(\014nd)i(the)h(ph)o(ysical)e
(register)i(whic)o(h)f(has)g(least)g FK(nextDef)22 b
FN(v)n(alue)13 b(whic)o(h)f(is)420 1622 y(greater)i(than)g
FK(lastUse)328 1706 y FN(If)i(the)g(allo)q(cation)f(succeeds,)j(then)f
(the)f(previous)h(\(that)f(is,)g(next)g(higher\))g(bu\013er)328
1756 y(index)c(b)q(ecomes)g FK(nextDef)21 b FN(for)11
b(the)h(assigned)g(register.)19 b(If)11 b(the)h(\014nal)f(step)i(fails)
e(then)328 1805 y(no)h(registers)h(remain,)d(and)i(the)g(v)n(alue)g(m)o
(ust)e(b)q(e)j(allo)q(cated)e(a)h(memory)d(temp)q(orary)m(,)328
1855 y(and)14 b(accessed)i(out)e(of)f(memory)287 1939
y(3)20 b(if)13 b(the)h(instruction)g(includes)g(a)f(\014rst)i(observ)n
(ation)e(of)g(a)g(used)i(o)q(ccurrence)h(of)d(some)328
1989 y(virtual)e(register)h(then)g(this)g(is)f(the)h(\014nal)f(use)h
(of)f(that)g FK(VR)n(e)n(g)t FN(,)g(and)g(the)h FK(lastUse)i
FN(\014eld)328 2038 y(of)f(the)i(corresp)q(onding)g(elemen)o(t)e(of)g
(the)i(map)d(is)i(set)h(accordingly)287 2122 y(4)20 b(if)12
b(the)i(instruction)g(de\014nes)g(a)f(new)h(v)n(alue)e(for)h(some)f(ph)
o(ysical)h(register)h(then)g(mark)328 2172 y(this)i(register)h(as)f(ha)
o(ving)f(a)h(new)g(v)n(alue)f(de\014ned)i(at)f(the)h(previous)f(\(that)
g(is,)g(next)328 2222 y(higher\))e(index)287 2305 y(5)20
b(if)10 b(the)i(instruction)f(is)g(a)g(pro)q(cedure)i(call,)d(all)g(ph)
o(ysical)h(registers)h(whic)o(h)f(are)h(threat-)328 2355
y(ened)i(b)o(y)f(the)h(call)e(are)i(mark)o(ed)e(as)h(ha)o(ving)f(a)h
(new)g(v)n(alue)g(de\014ned)h(at)f(the)h(previous)328
2405 y(index)224 2488 y(Sev)o(eral)g(p)q(oin)o(ts)f(need)h(to)g(b)q(e)f
(made)g(ab)q(out)g(this)g(algorithm.)i(Firstly)m(,)e(if)f(it)h(is)g
(the)h(\014rst)g FK(if-)224 2538 y(then)s FN(-step)i(of)e(the)h
(assignmen)o(t)e(algorithm)f(whic)o(h)i(succeeds,)j(then)e(the)g(cop)o
(y)f(op)q(eration)224 2588 y(is)g(made)f(redundan)o(t,)h(and)g(will)e
(b)q(e)j(eliminated)d(during)h(the)i(bu\013er)f(writing)g(op)q
(eration.)287 2638 y(The)j(algorithm)d(automatically)g(caters)k(for)f
(the)h(case)g(where)g(a)e(virtual)g(register)i(is)224
2688 y(copied)d FK(to)i FN(a)e(ph)o(ysical)f(register,)h(as)g(happ)q
(ens,)g(for)f(example,)f(when)i(a)g(parameter)f(v)n(alue)p
eop
%%Page: 258 264
258 263 bop 224 274 a FN(258)556 b FL(CHAPTER)15 b(10.)31
b(REGISTER)13 b(ALLOCA)m(TION)224 390 y FN(is)i(copied)g(to)f(the)h
(designated)g(parameter)g(register.)21 b(Since)15 b(the)g(destination)g
(register)g(is)224 440 y(de\014ned)e(at)f(the)g(index)g(immedia)o(tely)
d(follo)o(wing)g(the)k(cop)o(y)m(,)e(the)h(destination)g(register)h
(will)224 490 y(automatically)i(b)q(e)k(selected)h(b)o(y)d(the)i
(second)g(rule,)g(unless)f(the)h(cop)o(y)f(is)g(not)f(the)i(\014nal)224
540 y(used)14 b(o)q(ccurrence)i(of)d(the)g FK(VR)n(e)n(g)p
FN(.)18 b(If)13 b(that)g(is)g(the)g(case,)h(then)g(the)f(cop)o(y)g(is)g
(necessary)m(,)h(and)224 590 y(m)o(ust)f(remain.)287
641 y(Finally)m(,)j(the)j(consequences)i(of)d(failure)f(of)h(the)h
(allo)q(cation)d(step)j(m)o(ust)e(b)q(e)i(consid-)224
691 y(ered.)36 b(With)18 b(t)o(ypical)h FK(RISC)25 b
FN(mac)o(hines)18 b(it)h(is)g(essen)o(tially)h(imp)q(ossible)d(to)i
(run)h(out)f(of)224 741 y(registers)f(for)d(expression)i(ev)n(aluation)
e(alone.)23 b(Because)17 b(this)f(algorithm)d(allo)q(cates)j(reg-)224
791 y(isters)f(in)e(bac)o(kw)o(ard)g(order)h(of)f(de\014nition)g(p)q
(oin)o(t,)f(short)i(liv)o(ed)f(v)n(alues)g(whose)h(liv)o(e)f(ranges)224
840 y(are)j(en)o(tirely)f(o)o(v)o(erlapp)q(ed)g(b)o(y)g(longer)g(liv)o
(ed)f(v)n(alues)h(are)h(assigned)f(registers)i(\014rst.)22
b(Th)o(us)224 890 y(the)13 b(longer)f(liv)o(ed)f(v)n(alues)h(whic)o(h)g
(arise)g(from)f(common)e(sub-expression)14 b(eliminatio)o(n)9
b(and)224 940 y(v)n(alue)14 b(trac)o(king)g(are)h(the)g(ones)g(whic)o
(h)f(fail)f(to)h(ha)o(v)o(e)g(registers)i(assigned)f(to)f(them.)19
b(Since)224 990 y(all)13 b(suc)o(h)h(v)n(alues)f(ha)o(v)o(e)g(had)h
(memory)d(lo)q(cations)i(assigned)g(to)h(them,)e(the)i(v)n(alues)f(ma)o
(y)f(b)q(e)224 1040 y(accessed)i(out)d(of)f(memory)m(.)15
b(The)c(pro)q(cess)i(is)e(as)g(follo)o(ws,)f(for)h(a)g(load-store)g
(mac)o(hine.)k(An)o(y)224 1089 y(o)q(ccurrence)i(of)d(an)g(unmapp)q(ed)
f(virtual)h(register,)h FM(v)1057 1095 y FB(z)1090 1089
y FN(sa)o(y)m(,)e(as)h(a)g(destination)g(op)q(erand)h(of)224
1139 y(some)e(instruction)i(in)e(the)i FK(V)l(AL)e FN(|)320
1234 y FF(add)49 b Fm(v)448 1238 y Fh(x)467 1234 y FD(,)p
Fm(v)497 1238 y Fh(y)515 1234 y FD(,)p Fm(v)545 1238
y Fh(z)833 1234 y FD(;)12 b FE(dst)h(r)n(e)n(g)g Fm(v)998
1238 y Fh(z)1030 1234 y FE(is)g(unmapp)n(e)n(d)224 1332
y FN(is)h(translated)h(in)o(to)e(the)h(t)o(w)o(o)g(instruction)g
(sequence)i(in)d(the)i(assem)o(bly)d(language)h(|)320
1425 y FF(add)49 b Fm(r)446 1429 y Fy(2)463 1425 y FD(,)p
Fm(r)491 1429 y Fy(3)509 1425 y FD(,)p Fm(r)537 1429
y Fh(at)833 1425 y FD(;)12 b FE(c)n(opy)h(to)g(scr)n(atch)f(r)n(e)n(g)h
(at)320 1471 y FF(sw)69 b Fm(r)446 1475 y Fh(at)477 1471
y FD(,-24\()p FE(fp)r FD(\))230 b(;)12 b FE(stor)n(e)h(to)g(spil)r(l)f
(lo)n(c)n(ation)224 1565 y FN(where)17 b(w)o(e)f(ha)o(v)o(e)f(assumed)g
(that)h FM(v)786 1571 y FB(x)822 1565 y FN(w)o(as)f(allo)q(cated)g
FM(r)1100 1571 y Fz(2)1119 1565 y FN(,)g FM(v)1166 1571
y FB(y)1201 1565 y FN(w)o(as)h(allo)q(cated)f FM(r)1480
1571 y Fz(3)1498 1565 y FN(,)g(and)h(the)224 1615 y(unmapp)q(ed)e
(register)h FM(v)597 1621 y FB(z)630 1615 y FN(w)o(as)e(allo)q(cated)h
(the)g(spill)f(lo)q(cation)g(\()p FK(fp)s FN(-24\))o(.)287
1666 y(The)j(case)g(of)f(virtual)f(source)j(registers)g(whic)o(h)e(do)g
(not)h(ha)o(v)o(e)f(an)g(assigned)h(ph)o(ysical)224 1716
y(register)f(is)f(similar,)d(so)j(that)g(if)f FM(v)761
1722 y FB(x)796 1716 y FN(in)g(unmapp)q(ed)g(in)h(|)320
1811 y FF(add)49 b Fm(v)448 1815 y Fh(x)467 1811 y FD(,)12
b Fm(v)509 1815 y Fh(y)528 1811 y FD(,)g Fm(v)570 1815
y Fh(z)833 1811 y FF(;)19 b Fm(v)891 1815 y Fh(x)930
1811 y FF(is)g(unmapped)224 1908 y FN(then)c(the)f(assem)o(bly)f
(language)g(result)i(will)d(b)q(e)j(|)320 2002 y FF(lw)69
b FD(-28\()p FE(fp)r FD(\),)p Fm(r)572 2006 y Fh(at)833
2002 y FD(;)12 b FE(lo)n(ad)h(fr)n(om)g(spil)r(l)g(lo)n(c)n(ation)320
2047 y FF(add)49 b Fm(r)446 2051 y Fh(at)477 2047 y FD(,)p
Fm(r)505 2051 y Fy(4)522 2047 y FD(,)p Fm(r)550 2051
y Fy(5)833 2047 y FD(;)12 b FE(into)h(scr)n(atch)f(r)n(e)n(gister)g(at)
224 2142 y FN(Notice)j(that)g(ev)o(en)g(if)e(all)g(three)j(registers)g
(of)e(a)g(binary)g(op)q(eration)g(are)h(spilled,)e(w)o(e)i(shall)224
2192 y(only)h(need)h(t)o(w)o(o)f(scratc)o(h)i(registers,)g(since)f(the)
g(destination)f(and)g(one)h(of)e(the)i(op)q(erands)224
2241 y(can)e(use)f(the)h(same)e(scratc)o(h)i(register.)287
2293 y(In)10 b(the)g(case)h(of)f(the)g FK(MIPS)h FN(arc)o(hitecture,)h
(the)f(register)g FK(at)t FN(,)f(also)g(kno)o(wn)f(to)h(the)h(assem-)
224 2343 y(bler)k(as)g FM(r)379 2349 y Fz(1)397 2343
y FN(,)f(is)g(reserv)o(ed)j(as)d(a)g(scratc)o(h)i(register.)21
b(It)14 b(is)g(alw)o(a)o(ys)g(safe)g(to)g(use)i(this)e(register)224
2392 y(to)e(carry)f(a)h(temp)q(orary)e(v)n(alue)h(b)q(et)o(w)o(een)i
(adjacen)o(t)e(instructions.)18 b(In)11 b(other)h(arc)o(hitectures)224
2442 y(it)j(ma)o(y)e(b)q(e)i(necessary)i(to)d(explicitly)g(reserv)o(e)j
(a)d(scratc)o(h)i(register)g(b)o(y)f(remo)o(ving)e(it)h(from)224
2492 y(the)h(allo)q(cation)d(p)q(o)q(ol.)224 2608 y FO(Optimalit)n(y)h
(of)j(the)f(metho)q(d)224 2688 y FG(<)22 b(still)f(to)g(come)g(>)p
eop
%%Page: 259 265
259 264 bop 224 274 a FL(10.4.)31 b(GLOBAL)14 b(REGISTER)f(ALLOCA)m
(TION)557 b FN(259)224 390 y FI(10.4)66 b(Global)24 b(register)e(allo)r
(cation)224 482 y FN(In)17 b(our)f(reference)i(arc)o(hitecture,)g
(register)g(allo)q(cation)c(is)i(p)q(erformed)g(on)g(the)h
FK(V)l(AL)p FN(.)e(W)m(e)224 531 y(shall,)k(in)f(fact,)h(assume)g(that)
f(eac)o(h)h(virtual)f(register)i(in)e(the)h FK(V)l(AL)g
FN(corresp)q(onds)h(to)f(a)224 581 y(separate)e(liv)o(e)d(range.)22
b(Th)o(us,)15 b(although)f(w)o(e)i(refer)g(b)q(elo)o(w)f(to)g(liv)o(e)f
(ranges,)h(w)o(e)h(ma)o(y)d(also)224 631 y(view)19 b(the)g(pro)q(cess)h
(of)e(register)h(allo)q(cation)e(as)i(an)f FM(n)p FN(-to-)p
FM(k)h FN(mapping)d(of)i(the)h FM(n)f FN(virtual)224
681 y(registers)e(to)e(the)g FM(k)h FN(ph)o(ysical)e(registers)j(a)o(v)
n(ailable)11 b(on)j(the)g(real)g(pro)q(cessor.)287 731
y(W)m(e)f(shall)h(assume)f(that)h(the)h(co)q(de)g(for)f(the)g(whole)g
(pro)q(cedure)i(is)e(held)g(in)g FK(V)l(AL)f FN(form)224
781 y(in)f(some)f(bu\013er,)i(and)f(that)g(some)f(explicit)g(represen)o
(tation)j(of)d(the)h(con)o(trol)g(\015o)o(w)g(graph)f(is)224
830 y(a)o(v)n(ailable.)k(W)m(e)10 b(further)i(assume)e(that)h
(de\014nition)f(and)h(use)h(information)7 b(is)k(precomputed)224
880 y(for)f(eac)o(h)g(virtual)e(register,)j(and)e(that)h(some)f
(estimate)f(of)h(the)h(cost)h(of)d(spilling)g(eac)o(h)i(virtual)224
930 y(register)15 b(to)f(memory)e(is)h(precomputed.)224
1047 y FH(10.4.1)56 b(Building)17 b(the)h(in)n(terference)f(graph)224
1123 y FN(Con)o(temp)q(orary)h(metho)q(ds)g(of)g(global)e(register)k
(allo)q(cation,)e(mak)o(e)f(explicit)h(use)h(of)f(the)224
1173 y(theory)12 b(of)e(graph)h(coloring.)16 b(In)11
b(all)e(v)n(ariations)h(of)g(these)j(metho)q(ds)d(an)h(in)o(terference)
h(graph)224 1223 y(is)17 b(constructed)j(for)c(all)g(of)h(the)h(liv)o
(e)e(ranges)i(in)e(a)h(pro)q(cedure.)30 b(This)17 b(is)g(an)g
(undirected)224 1273 y(graph,)c(whic)o(h)h(for)f(simplicit)o(y)e(w)o(e)
j(shall)f(assume)g(is)h(represen)o(ted)i(as)e(a)f(t)o(w)o(o)h
(dimensional)224 1323 y(bit-matrix.)i(In)e(this)g(matrix)e(the)i
(elemen)o(t)f FM(I)s FN([)p FM(i;)7 b(j)r FN(])k(=)h(1)i(if)f(the)h
(relation)f FK(Interfer)n(e)s FN(\()p FM(i;)7 b(j)r FN(\))13
b(is)224 1373 y(true.)19 b(W)m(e)11 b(note)i(that)f(the)h(in)o
(terference)h(graph,)e(as)g(an)g(undirected)h(graph,)f(is)g
(necessarily)224 1422 y(symmetric.)17 b(That)c(is,)h(for)f(all)g
FM(i;)7 b(j)16 b FN(w)o(e)e(ha)o(v)o(e)g(that)g FM(I)s
FN([)p FM(i;)7 b(j)r FN(])k(=)h FM(I)s FN([)p FM(j;)7
b(i)p FN(].)287 1472 y(The)14 b(in)o(terference)h(graph)e(m)o(ust)g(b)q
(e)h(computed)f(from)f(the)i(liv)o(e)f(register)h(information)224
1522 y(for)j(eac)o(h)g(basic)g(blo)q(c)o(k.)27 b(First)17
b(ho)o(w)o(ev)o(er,)h(w)o(e)f(m)o(ust)f(form)o(ulate)e(a)j(precise)h
(de\014nition)f(of)224 1572 y(the)e(informal)c(concept)k(of)e(\\liv)o
(e)g(ranges)i(o)o(v)o(erlap")e(whic)o(h)h(w)o(e)g(ha)o(v)o(e)f(used)i
(so)f(far.)287 1622 y(Supp)q(ose)j(the)g(set)g(of)f(registers)i(whic)o
(h)e(are)g(liv)o(e)g(at)g(an)o(y)g(p)q(oin)o(t)g FM(p)g
FN(in)g(a)g(con)o(trol)g(\015o)o(w)224 1672 y(graph)e(is)g(denoted)h
FM(L)569 1678 y FB(p)588 1672 y FN(.)j(Th)o(us)c(|)665
1763 y FM(r)684 1769 y FB(i)709 1763 y Ft(2)d FM(L)776
1769 y FB(p)830 1763 y FN(=)35 b FM(p)12 b Ft(2)f FK(LiveR)n(ange)t
FN(\()p FM(r)1195 1769 y FB(i)1209 1763 y FN(\))287 1855
y FO(De\014niti)o(on:)k FN(A)f(register)h FM(r)737 1861
y FB(i)765 1855 y FN(whic)o(h)e(has)h(a)g(de\014nition)f(at)h(p)q(oin)o
(t)f FM(p)h FN(in)g(a)f(con)o(trol)h(\015o)o(w)224 1904
y(graph)g(in)o(terferes)h(with)f(ev)o(ery)h(register)g(whic)o(h)f(is)f
(in)h FM(L)1112 1910 y FB(p)1131 1904 y FN(.)287 1954
y(Note)20 b(that)f(this)h(last)f(de\014nition)g(do)q(es)h(not)f(giv)o
(e)g(us)h FK(al)r(l)j FN(the)e(in)o(terferences)g(of)e
FM(r)1640 1960 y FB(i)1654 1954 y FN(.)224 2004 y(Tw)o(o)e(registers)h
FM(r)507 2010 y FB(i)538 2004 y FN(and)f FM(r)641 2010
y FB(j)675 2004 y FN(in)o(terfere)h(if)e FK(either)21
b FN(at)c(some)f(p)q(oin)o(t)g(of)h(de\014nition)f(of)h
FM(r)1588 2010 y FB(i)1618 2004 y FN(w)o(e)224 2054 y(ha)o(v)o(e)e
FM(r)340 2060 y FB(j)368 2054 y Ft(2)d FM(L)436 2060
y FB(p)470 2054 y FN(or)i(at)g(some)g(p)q(oin)o(t)g(of)g(de\014nition)g
(of)g FM(r)1086 2060 y FB(j)1118 2054 y FN(w)o(e)h(ha)o(v)o(e)f
FM(r)1295 2060 y FB(i)1320 2054 y Ft(2)d FM(L)1387 2060
y FB(p)1407 2054 y FN(.)19 b(Ho)o(w)o(ev)o(er,)c(w)o(e)224
2104 y(need)h(only)e(use)h(the)g(ab)q(o)o(v)o(e)f(de\014nition)g(to)h
(insert)g(edges)g(in)o(to)f(our)h(graph)f(pro)o(vided)g(that)224
2154 y(w)o(e)k(main)o(tain)c(symmetry)i(in)h(the)h(data)f(structure)i
(b)o(y)e(alw)o(a)o(ys)f(including)g FG(I[i,j])g FN(and)224
2203 y FG(I[j,i])d FN(at)h(the)g(same)f(time.)287 2253
y(The)f(problem)f(of)h(computing)f(the)i(in)o(terference)h(graph)f(th)o
(us)f(reduces)j(to)d(computing)224 2303 y(the)17 b(liv)o(e)d(register)j
(set)f FM(L)619 2309 y FB(p)654 2303 y FN(for)g(ev)o(ery)g(p)q(oin)o(t)
f FM(p)g FN(in)g(the)h(con)o(trol)g(\015o)o(w)f(where)i(a)e(register)h
(is)224 2353 y(de\014ned.)23 b(The)16 b(t)o(w)o(o)e(edges)j(corresp)q
(onding)f(to)f(eac)o(h)g(de\014nition)g(are)g(then)h(added)g(to)f(the)
224 2403 y(in)o(terference)h(graph)e(at)g(eac)o(h)g(suc)o(h)h
(de\014nition)e(p)q(oin)o(t)h FM(p)p FN(.)224 2511 y
FO(The)i(liv)o(eIn)e(and)h(liv)o(eOut)e(register)h(sets)224
2588 y FN(W)m(e)f(assume)g(that)g(for)f(eac)o(h)i(basic)f(blo)q(c)o(k)g
FM(i)g FN(w)o(e)g(ha)o(v)o(e)g(generated)i(t)o(w)o(o)d(lo)q(cal)g
(register)i(sets.)224 2638 y(The)h(set)h FK(lo)n(c)n(alLive)531
2644 y FB(i)560 2638 y FN(is)e(the)h(set)h(of)e(all)f(registers)j(whic)
o(h)f(are)g(either)g(used)h(in)e(blo)q(c)o(k)g FM(i)h
FN(but)224 2688 y(not)i(de\014ned)g(in)g FM(i)p FN(,)g(or)f(are)h(used)
g(in)f(blo)q(c)o(k)h FM(i)f FN(b)q(efore)i(they)f(are)g(de\014ned.)27
b(Similarly)l(,)14 b(the)p eop
%%Page: 260 266
260 265 bop 224 274 a FN(260)556 b FL(CHAPTER)15 b(10.)31
b(REGISTER)13 b(ALLOCA)m(TION)224 390 y FN(set)20 b FK(lo)n(c)n(alDef)
436 401 y FB(i)468 390 y FN(is)e(the)h(set)h(of)e(registers)i(whic)o(h)
e(are)h(de\014ned)h(in)e(blo)q(c)o(k)g FM(i)p FN(.)33
b(Using)18 b(these)224 440 y(de\014nitions)c(w)o(e)g(ha)o(v)o(e)g(the)h
(follo)o(wing)c(equations)j(|)464 529 y FK(LiveOut)608
542 y(exit)717 529 y FN(=)42 b(\010)545 592 y FK(LiveIn)661
598 y FB(i)717 592 y FN(=)g FK(lo)n(c)n(alLive)946 598
y FB(i)981 592 y Ft([)20 b FN(\()p FK(LiveOut)1190 598
y FB(i)1213 592 y Ft(\000)10 b FK(lo)n(c)n(alDef)1396
602 y FB(i)1410 592 y FN(\))517 662 y FK(LiveOut)661
668 y FB(i)717 662 y FN(=)843 623 y Fd([)791 714 y FB(j)r
FA(2)p FN(succ)q Fz(\()p FB(i)p Fz(\))949 662 y FK(LiveIn)1066
668 y FB(j)224 831 y FN(where)15 b(the)g(set)g(of)e(blo)q(c)o(ks)h
FK(suc)n(c)p FN(\(i\))g(con)o(tains)g(the)h(successors)h(of)e(the)g
(con)o(trol)g(\015o)o(w)f(graph)224 881 y(blo)q(c)o(k)h
FM(i)p FN(.)287 930 y(W)m(e)h(m)o(ust)g(solv)o(e)g(these)j(equations)e
(to)f(\014nd)h(the)h(least)f(\014xed)g(p)q(oin)o(t.)23
b(The)16 b(standard,)224 980 y(bac)o(kw)o(ard)e(\015o)o(w,)f(all)g
(path)h(solution)f(metho)q(d)g(is)h(su\016cien)o(t.)224
1088 y FO(Computing)g(the)h(liv)o(e)f(register)f(set)224
1164 y FN(Once)22 b(the)f FK(LiveIn)h FN(and)e FK(LiveOut)i
FN(sets)g(are)e(kno)o(wn)g(for)g(an)o(y)g(blo)q(c)o(k,)h(w)o(e)f(are)h
(able)e(to)224 1214 y(compute)14 b(the)g(liv)o(e)f(register)i(set)g
(for)f(eac)o(h)g(lo)q(cation)f(within)g(that)h(blo)q(c)o(k.)287
1264 y(W)m(e)k(w)o(an)o(t)g(to)g(initialize)f(the)i(liv)o(e)f(register)
h(set)h(to)e FK(LiveIn)j FN(for)d(the)h(blo)q(c)o(k,)g(and)f(go)224
1314 y(sequen)o(tially)12 b(through)f(the)h(blo)q(c)o(k)g(inserting)f
(edges)i(in)e(the)h(in)o(terference)i(graph.)j(A)o(t)12
b(eac)o(h)224 1364 y(de\014nition)18 b(w)o(e)h(insert)g(in)o
(terference)i(edges)e(b)q(et)o(w)o(een)h(the)f(de\014ned)h(register)f
(and)g(ev)o(ery)224 1414 y(register)f(in)d(the)i(curren)o(t)h(liv)o(e)d
(set.)25 b(W)m(e)16 b(then)h(add)f(the)g(newly)g(de\014ned)i(register)f
(to)f(the)224 1463 y(liv)o(e)e(register)h(set.)287 1513
y(If)d(w)o(e)g(wish)h(to)f(b)q(e)h(truly)f(accurate,)i(w)o(e)e(should)g
(also)g(remo)o(v)o(e)g(registers)h(from)e(the)i(liv)o(e)224
1563 y(register)19 b(set)f(at)f(the)g(end)h(of)f(liv)o(e)f(ranges)i
(whic)o(h)f(fall)e(within)i(a)g(basic)g(blo)q(c)o(k.)27
b(Finding)224 1613 y(the)18 b(end)g(of)f(liv)o(e)g(ranges)h(requires)h
(some)d(further)j(computation,)d(and)h(for)g(this)h(reason)224
1663 y(man)o(y)d(implem)o(en)o(tations)f(simply)g(ignore)i(this)g
(factor.)24 b(Suc)o(h)17 b(a)f(c)o(hoice)h(is)e(alw)o(a)o(ys)h(safe,)
224 1712 y(but)f(inserts)g FK(additional)j FN(edges)d(in)e(the)i(in)o
(terference)h(graph.)287 1762 y(Finding)d(the)j(p)q(oin)o(ts)e(at)h
(whic)o(h)g(registers)h(b)q(ecome)f(dead)g(p)q(oses)h(di\013eren)o(t)f
(problems)224 1812 y(to)k(\014nding)g(the)h(p)q(oin)o(ts)f(at)g(whic)o
(h)g(registers)i(b)q(ecome)e(liv)o(e.)34 b(The)19 b(p)q(oin)o(ts)g(at)g
(whic)o(h)h(a)224 1862 y(register)e(b)q(ecomes)e(liv)o(e)g(is)g(imm)o
(ediately)d(visible)j(in)g(the)g(co)q(de)h(of)f(the)h(blo)q(c)o(k,)f
(since)h(the)224 1912 y(newly)c(liv)o(e)g(register)h(app)q(ears)f(as)h
(the)f(destination)g(op)q(erand)g(of)g(some)f FK(V)l(AL)g
FN(instruction.)224 1961 y(The)19 b(p)q(oin)o(t)f(at)f(whic)o(h)h
(register)i(b)q(ecomes)e(dead)g(is)g(not)g(so)h(apparen)o(t,)g(since)f
(when)h(w)o(e)224 2011 y(meet)e(a)g(register)i(use)f(during)f(a)g(forw)
o(ard)g(scan)h(through)g(the)g(blo)q(c)o(k)f(w)o(e)g(do)h(not)f(kno)o
(w)224 2061 y(if)f(it)g(is)g(the)h(last)f(use.)25 b(W)m(e)16
b(m)o(ust)g(th)o(us)g(annotate)g(the)h(blo)q(c)o(k)f(with)g
(information)d(whic)o(h)224 2111 y(indicates)k(where)g(registers)g(b)q
(ecome)f(dead.)24 b(This)16 b(information)d(ma)o(y)h(b)q(e)j(computed)e
(as)224 2161 y(follo)o(ws.)i(The)d(set)g(of)f(registers)i(whic)o(h)e(b)
q(ecome)h(dead)f(somewhere)h(inside)g(the)g(blo)q(c)o(k)f
FM(i)g FN(is)224 2211 y(giv)o(en)h(b)o(y)f(the)i FK(do)n(ome)n(d)k
FN(set)c(|)562 2300 y FK(do)n(ome)n(d)h FN(=)c(\()p FK(LiveIn)887
2306 y FB(i)910 2300 y Ft([)d FK(lo)n(c)n(alDef)1089
2310 y FB(i)1103 2300 y FN(\))g Ft(\000)h FK(LiveOut)1314
2306 y FB(i)224 2389 y FN(During)j(a)f(bac)o(kw)o(ards)i(scan)f
(through)g(the)h(blo)q(c)o(k)e(w)o(e)i(\014nd)f(the)g(last)g(reference)
j(to)c(eac)o(h)i(of)224 2438 y(these)h(registers)f(on)e(this)h(con)o
(trol)g(path)g(\(that)g(is,)f(the)h(\014rst)h(use)f(encoun)o(tered)i
(during)e(the)224 2488 y(bac)o(kw)o(ards)k(scan\).)25
b(As)17 b(these)g(last)f(uses)h(are)g(found,)e(the)i(lo)q(cation)e(in)h
(the)g(basic)h(blo)q(c)o(k)224 2538 y(is)d(mark)o(ed,)f(and)g(the)i
(register)g(is)f(deleted)h(from)d(the)j FK(do)n(ome)n(d)k
FN(set.)g(In)14 b(order)h(to)f(accoun)o(t)224 2588 y(for)f(the)g(p)q
(ossibilit)o(y)f(that)h(the)g(same)f(register)i(migh)o(t)d(b)q(ecome)i
(liv)o(e)f(and)h(then)g(dead)g(more)224 2638 y(than)h(once)h(in)e(a)h
(single)f(blo)q(c)o(k,)g(w)o(e)h(add)g(new)g(registers)i(to)e(the)g
FK(do)n(ome)n(d)19 b FN(set)c(as)f(w)o(e)g(meet)224 2688
y(their)19 b(de\014nitions)f(in)f(the)i(bac)o(kw)o(ard)f(scan.)49
b(An)18 b(outline)g(of)f(the)i(algorithm)c(is)j(giv)o(en)p
eop
%%Page: 261 267
261 266 bop 224 274 a FL(10.4.)31 b(GLOBAL)14 b(REGISTER)f(ALLOCA)m
(TION)557 b FN(261)p 270 392 1350 2 v 269 438 2 46 v
334 424 a FF(\(*)19 b FE(lo)n(c)n(alLive,)11 b(lo)n(c)n(alDef,)g
(LiveIn)h(and)h(LiveOut)f(ar)n(e)h(known)f FF(*\))p 1619
438 V 269 483 V 334 470 a(FOR)f FE(e)n(ach)i(blo)n(ck)f(i)k
FF(DO)p 1619 483 V 269 529 V 385 515 a(doomed)h(:=)i(\(LiveIn[i])d(+)j
(localDef[i)o(]\))d(-)j(LiveOut[i])o(;)p 1619 529 V 269
575 V 385 561 a(FOR)12 b FE(every)g(p)n(oint)g(p)h(in)g(blo)n(ck)f(i,)i
(b)n(ackwar)n(ds)g FF(DO)p 1619 575 V 269 620 V 423 607
a(IF)e FE(destination)e(r)n(e)n(g)k(at)f(p)g(is)g(noR)n(e)n(g)i
FF(OR)p 1619 620 V 269 666 V 481 652 a FE(destination)10
b(r)n(e)n(g)j(d)g(is)h(not)e(do)n(ome)n(d)25 b FF(THEN)p
1619 666 V 269 712 V 462 698 a(INCL\(doom)o(ed)o(,d\))o(;)p
1619 712 V 269 757 V 462 744 a(FOR)11 b FE(every)i(sour)n(c)n(e)f(r)n
(e)n(g)h(s)h(use)n(d)e(at)h(p)g(with)h Fm(s)c Fw(2)j
FE(do)n(ome)n(d)j FF(DO)p 1619 757 V 269 803 V 500 789
a FE(mark)e(s)f(as)g(kil)r(le)n(d)f(at)h(p;)p 1619 803
V 269 849 V 500 835 a FF(EXCL\(doome)o(d,)o(s\);)p 1619
849 V 269 894 V 462 881 a(END;)p 1619 894 V 269 940 V
423 926 a(ELSE)18 b(\(*)h(destinatio)o(n)e(reg)h(is)h(doomed)e(!)39
b(*\))p 1619 940 V 269 986 V 462 972 a FE(delete)11 b(instruction)g(at)
i(index)f(p;)p 1619 986 V 269 1031 V 423 1018 a FF(END;)p
1619 1031 V 269 1077 V 385 1063 a(END;)p 1619 1077 V
269 1123 V 334 1109 a(END;)p 1619 1123 V 270 1124 1350
2 v 543 1240 a FN(Figure)i(10.5:)j(Marking)c(the)h(end)h(of)e(liv)o(e)g
(ranges)224 1380 y(in)i(\014gure)g(10.5.)j(Note)d(that)g(in)f(this)h
(algorithm)d(instructions)j(whic)o(h)f(compute)h(do)q(omed)224
1430 y(v)n(alues)f(are)g(remo)o(v)o(ed.)j(This)d(is)g(just)g(one)g
(more)f(round)h(of)f(dead)i(co)q(de)f(remo)o(v)n(al.)287
1483 y(The)g(mec)o(hanism)d(for)j(computing)e(the)i(in)o(terference)i
(graph)e(is)f(giv)o(en)g(in)h(\014gure)g(10.6.)224 1533
y(A)g(later)g(section)h(discusses)h(some)d(of)g(the)i(implem)o(en)o
(tation)c(issues)k(in)e(more)g(detail.)p 270 1640 V 269
1686 2 46 v 295 1672 a FD(1)77 b FF(FOR)12 b FE(e)n(ach)g(blo)n(ck)g(i)
17 b FF(DO)p 1619 1686 V 269 1732 V 295 1718 a FD(2)128
b FF(liveRegSet)16 b(:=)j(LiveIn[i];)p 1619 1732 V 269
1777 V 295 1764 a FD(3)128 b FF(FOR)12 b FE(every)h(bu\013er)f(index)g
(p)h(in)g(blo)n(ck)f(i,)i(forwar)n(ds)g FF(DO)p 1619
1777 V 269 1823 V 295 1809 a FD(4)167 b FF(liveRegSe)o(t)17
b(:=)h(liveRegSet)e(-)j(regsKilledA)o(t\()o(p\);)p 1619
1823 V 269 1869 V 295 1855 a FD(5)167 b FF(FOR)12 b FE(every)g(r)n(e)n
(g)h(r)h(in)f(liveR)n(e)n(gSet)h FF(DO)p 1619 1869 V
269 1914 V 295 1901 a FD(6)205 b FE(insert)13 b(e)n(dges)f(b)n(etwe)n
(en)g(destinatio)o(n)f(r)n(e)n(g)i(d)g(and)g(r;)p 1619
1914 V 269 1960 V 295 1946 a FD(7)167 b FF(END;)p 1619
1960 V 269 2006 V 295 1992 a FD(8)g FF(INCL\(live)o(Reg)o(Se)o(t,d)o
(\);)p 1619 2006 V 269 2051 V 295 2038 a FD(9)128 b FF(END;)p
1619 2051 V 269 2097 V 295 2083 a FD(10)77 b FF(END;)p
1619 2097 V 270 2099 1350 2 v 513 2215 a FN(Figure)14
b(10.6:)i(Computing)c(the)j(in)o(terference)h(graph)224
2405 y FH(10.4.2)56 b(Chaitin's)18 b(metho)r(d)224 2488
y FN(In)f(an)f(historically)f(imp)q(ortan)o(t)g(pap)q(er)i(Chaitin)e
(in)h(1983)g(describ)q(ed)i(an)e(e\016cien)o(t)h(algo-)224
2538 y(rithm)d(for)g(coloring)g(an)g(in)o(terference)j(graph.)k(The)15
b(algorithm)d(attempts)i(to)h(p)q(erform)f(a)224 2588
y FM(k)q FN(-coloring,)i(where)h FM(k)g FN(is)f(the)h(n)o(um)o(b)q(er)f
(of)f(a)o(v)n(ailable)f(registers.)27 b(If)16 b(the)h(algorithm)d(do)q
(es)224 2638 y(not)f(succeed,)i(registers)f(m)o(ust)e(b)q(e)i(spilled,)
e(a)g(new)i(in)o(tererence)h(graph)e(constructed,)h(and)224
2688 y(an)g(attempt)f(made)g(to)h(color)f(the)i(new)f(graph.)p
eop
%%Page: 262 268
262 267 bop 224 274 a FN(262)556 b FL(CHAPTER)15 b(10.)31
b(REGISTER)13 b(ALLOCA)m(TION)287 390 y FN(In)j(the)g(in)o(terference)i
(graph,)e(eac)o(h)g(no)q(de)g(represen)o(ts)j(a)d(liv)o(e)f(range.)24
b(The)16 b FK(de)n(gr)n(e)n(e)j FN(of)224 440 y(a)e(no)q(de)g(is)g(the)
g(n)o(um)o(b)q(er)f(of)g(edges)i(inciden)o(t)f(on)g(the)g(no)q(de.)27
b(The)17 b(cen)o(tral)g(idea)g(b)q(ehind)224 490 y(Chaitin's)h(metho)q
(d)g(is)g(to)g(remo)o(v)o(e)g(no)q(des)h(from)e(the)i(graph)g(one)f(b)o
(y)h(one.)32 b(A)18 b(no)q(de)h(is)224 540 y FK(available)f
FN(for)d(remo)o(v)n(al)e(as)i(so)q(on)g(as)h(it)e(has)h(less)h(than)f
FM(k)h FN(edges)g(in)f(the)h(graph.)21 b(As)16 b(eac)o(h)224
590 y(no)q(de)h(is)e(remo)o(v)o(ed)g(all)g(of)g(its)h(edges)h(are)f
(remo)o(v)o(ed,)f(and)h(the)g(no)q(de)g(is)g(placed)g(on)g(a)f(list.)
224 640 y(The)e(remo)o(v)n(al)d(of)h(edges)i(lo)o(w)o(ers)f(the)h
(degree)g(of)f(adjacen)o(t)g(no)q(des,)h(p)q(erhaps)g(making)d(other)
224 689 y(no)q(des)15 b(a)o(v)n(ailable)d(for)h(remo)o(v)n(al.)287
764 y(The)f(pro)q(cess)h(of)e(no)q(de)h(remo)o(v)n(al)d(terminates)i
(in)g(one)h(of)f(t)o(w)o(o)g(w)o(a)o(ys.)17 b(Either)12
b(the)g(graph)224 814 y(b)q(ecomes)17 b(empt)o(y)m(,)f(or)h(the)g
(algorithm)d(b)q(ecomes)j(blo)q(c)o(k)o(ed)g(with)g(ev)o(ery)g
(remaining)e(no)q(de)224 864 y(ha)o(ving)d(at)h(least)g
FM(k)q FN(-edges.)19 b(If)12 b(the)i(algorithm)c(b)q(ecomes)j(blo)q(c)o
(k)o(ed)g(then)h(liv)o(e)e(ranges)h(m)o(ust)224 913 y(b)q(e)i(spilled,)
e(otherwise)i(the)f(graph)g(ma)o(y)e(b)q(e)i FM(k)q FN(-colored.)287
988 y(When)i(the)h(graph)f(b)q(ecomes)g(empt)o(y)m(,)f(the)i(no)q(des)g
(are)f(put)g(bac)o(k)h(in)o(to)e(the)i(graph)f(in)224
1038 y(the)f(rev)o(erse)g(order)g(to)e(remo)o(v)n(al.)j(That)e(is,)f
(no)q(des)i(are)f(put)g(bac)o(k)f(in)o(to)g(the)i(graph)e(in)h(last)224
1088 y(out,)g(\014rst)g(in)g(order.)k(As)d(they)f(are)g(replaced,)g(a)g
(register)h(is)f(allo)q(cated)f(to)h(the)g(liv)o(e)f(range)224
1137 y(whic)o(h)i(the)g(no)q(de)g(denotes.)21 b(Since)15
b(no)q(des)g(are)g(only)f(remo)o(v)o(ed)g(if)f(they)i(ha)o(v)o(e)g
(less)g(than)f FM(k)224 1187 y FN(edges,)k(it)f(follo)o(ws)e(that)i
(when)g(they)g(are)h(replaced)f(they)h(will)d(again)h(ha)o(v)o(e)g
(less)i(than)e FM(k)224 1237 y FN(edges.)j(Ev)o(en)13
b(if)e(the)i(adjacen)o(t)f(no)q(des)h(ha)o(v)o(e)g(all)e(b)q(een)i
(allo)q(cated)f(di\013eren)o(t)h(registers)h(they)224
1287 y(will)e(ha)o(v)o(e)h(used)h(up)f(less)g(than)g
FM(k)h FN(registers,)g(and)f(so)g(there)i(m)o(ust)d(alw)o(a)o(ys)f(b)q
(e)j(at)f(least)g(one)224 1337 y(free)i(register)g(for)f(the)g(newly)g
(inserted)h(no)q(de.)287 1411 y(In)g(fact)g(Chaitin's)g(algorithm)d(is)
j(conserv)n(ativ)o(e,)h(since)g(ev)o(en)g(if)f(a)g(no)q(de)h(has)f
(exactly)224 1461 y(\()p FM(k)e Ft(\000)f FN(1\))17 b(edges)i(when)f
(it)f(is)g(remo)o(v)o(ed)g(from)f(the)i(graph,)g(there)g(ma)o(y)e
(still)g(b)q(e)j(a)e(c)o(hoice)224 1511 y(of)e(register)h(when)g(the)g
(no)q(de)f(is)g(replaced.)23 b(This)15 b(will)f(happ)q(en,)i(for)f
(example,)e(if)i(t)o(w)o(o)f(or)224 1561 y(more)f(of)h(the)g(\()p
FM(k)c Ft(\000)g FN(1\))k(adjacen)o(t)g(no)q(des)g(are)h(colored)f
(with)f(the)i(same)e(register.)p 270 1778 1350 2 v 269
1823 2 46 v 295 1810 a FD(1)77 b FF(PROCEDURE)16 b(TryColoring)o(\(V)o
(AR)g(success)h(:)39 b(BOOLEAN\);)p 1619 1823 V 269 1869
V 295 1855 a FD(2)116 b FF(VAR)18 b(n)h(:)39 b(VRegister;)p
1619 1869 V 269 1915 V 295 1901 a FD(3)77 b FF(BEGIN)p
1619 1915 V 269 1960 V 295 1947 a FD(4)116 b FF(MakeEmpty)o(Li)o(st\()o
(re)o(gLi)o(st\))o(;)p 1619 1960 V 269 2006 V 295 1992
a FD(4)g FF(WHILE)11 b FE(interfer)n(enc)n(e)f(gr)n(aph)j(is)g(non)f
(empty)j FF(DO)p 1619 2006 V 269 2052 V 295 2038 a FD(5)167
b FF(IF)12 b FE(any)g(no)n(de)h(has)f(less)h(than)f(k)h(e)n(dges)h
FF(THEN)p 1619 2052 V 269 2097 V 295 2084 a FD(6)205
b FE(let)16 b FF(n)c FE(b)n(e)h(any)g(such)f(no)n(de;)p
1619 2097 V 269 2143 V 295 2129 a FD(7)205 b FF(AddToFront)o(\(re)o(gL)
o(ist)o(,n\))o(;)p 1619 2143 V 269 2189 V 295 2175 a
FD(8)g FE(r)n(emove)13 b(al)r(l)g(gr)n(aph)f(e)n(dges)g(le)n(ading)g
(to)i FF(n;)p 1619 2189 V 269 2234 V 295 2221 a FD(9)167
b FF(ELSE)p 1619 2234 V 269 2280 V 295 2266 a FD(10)205
b FF(success)17 b(:=)i(TRUE;)f(RETURN;)p 1619 2280 V
269 2326 V 295 2312 a FD(11)167 b FF(END;)p 1619 2326
V 269 2371 V 295 2358 a FD(12)116 b FF(END;)p 1619 2371
V 269 2417 V 295 2403 a FD(13)g FF(success)17 b(:=)i(TRUE;)p
1619 2417 V 269 2463 V 295 2449 a FD(14)77 b FF(END)19
b(TryColori)o(ng;)p 1619 2463 V 270 2464 1350 2 v 526
2580 a FN(Figure)14 b(10.7:)i(Remo)o(ving)c(the)i(no)q(des,)g(one)g(b)o
(y)g(one)p eop
%%Page: 263 269
263 268 bop 224 274 a FL(10.4.)31 b(GLOBAL)14 b(REGISTER)f(ALLOCA)m
(TION)557 b FN(263)224 390 y FO(Spilli)o(ng)13 b(registers)g(in)i
(Chaitin's)f(metho)q(d)224 473 y FN(If)h(Chaitin's)g(algorithm)d(b)q
(ecomes)k(blo)q(c)o(k)o(ed)f(then)i(w)o(e)e(are)h(left)f(with)g(a)g
(graph)g(in)g(whic)o(h)224 523 y(eac)o(h)g(no)q(de)g(has)f(at)g(least)h
FM(k)g FN(edges.)20 b(W)m(e)14 b(m)o(ust)f(c)o(ho)q(ose)i(at)f(least)g
(one)h(liv)o(e)e(range)i(to)f(spill.)224 573 y(If)f(the)h(liv)o(e)f
(range)h(corresp)q(onds)h(to)e(some)g(program)e(v)n(ariable)i(it)g(ma)o
(y)e(already)i(ha)o(v)o(e)g(had)224 623 y(some)18 b(memory)f(lo)q
(cation)h(allo)q(cated)g(to)h(it.)33 b(Otherwise,)21
b(the)e(spilled)g(range)g(m)o(ust)f(b)q(e)224 673 y(allo)q(cated)d
(some)g(temp)q(orary)g(lo)q(cation)f(in)h(the)h(lo)q(cal)f(stac)o(k)h
(frame.)21 b(A)o(t)16 b(this)f(p)q(oin)o(t)g(it)g(is)224
722 y(necessary)h(to)e(rely)g(on)f(some)g(kind)g(of)h(heuristic)g(to)g
(determine)g(whic)o(h)f(registers)j(are)e(the)224 772
y(most)g(useful)g(to)h(spill.)j(W)m(e)c(should)g(tak)o(e)h(in)o(to)f
(accoun)o(t)h(the)g(degree)h(to)e(whic)o(h)g(eac)o(h)h(liv)o(e)224
822 y(range)f(blo)q(c)o(ks)g(other)g(ranges)h(from)d(remo)o(v)n(al)f
(from)h(the)i(graph,)g(and)f(the)h(cost)h(of)e(spilling)224
872 y(eac)o(h)i(remaining)d(range.)287 925 y(The)h(residual)f(graph)g
(in)g(the)h(blo)q(c)o(k)o(ed)g(state)g(giv)o(es)f(useful)g(information)
e(to)i(help)h(with)224 975 y(the)k(spilling)d(decision.)24
b(The)16 b(n)o(um)o(b)q(er)f(of)g(edges)i(left)f(in)f(the)h(graph)g
(for)f(an)o(y)h(particular)224 1025 y(no)q(de)c(tells)f(us)h(ho)o(w)f
(man)o(y)e(other)j(no)q(des)g(will)e(ha)o(v)o(e)h(their)h(degree)h(lo)o
(w)o(ered)e(b)o(y)g(the)h(spilling)224 1074 y(of)k(that)g(register.)26
b(W)m(e)16 b(should)g(also)f(ha)o(v)o(e)h(some)f(pre-computed)i
(estimate)e(of)h(the)g(spill)224 1124 y(cost)22 b(for)e(eac)o(h)h(liv)o
(e)f(range.)39 b(Chaitin's)19 b(original)g(pap)q(er)i(suggested)h(the)f
(heuristic)h(of)224 1174 y(spilling)13 b(the)i(range)g(with)f(the)h
(least)f(quotien)o(t)h(of)f(spill)f(cost)i(to)f(n)o(um)o(b)q(er)g(of)g
(edges.)20 b(This)224 1224 y(still)13 b(app)q(ears)i(to)f(b)q(e)g(an)g
(excellen)o(t)h(c)o(hoice.)287 1277 y(W)m(e)c(should)g(con)o(tin)o(ue)h
(to)f(spill)g(ranges)h(from)e(the)i(graph)f(un)o(til)g(some)f
(remaining)g(no)q(de)224 1327 y(has)17 b(its)f(degree)h(lo)o(w)o(ered)f
(to)g(less)h(than)f FM(k)q FN(.)24 b(The)16 b(remo)o(v)n(al)e(pro)q
(cess)k(then)f(resumes)f(un)o(til)224 1377 y(the)f(pro)q(cess)h(either)
e(b)q(ecomes)g(blo)q(c)o(k)o(ed)g(once)h(again,)d(or)i(the)g(graph)g(b)
q(ecomes)g(empt)o(y)m(.)287 1430 y(When)i(the)g(graph)f(has)h(b)q
(ecome)g(empt)o(y)e(after)i(one)g(or)g(more)e(ranges)j(b)q(eing)e
(spilled,)224 1480 y(the)e(co)q(de)g(bu\013er)g(needs)g(to)f(b)q(e)h
(rewritten)g(to)f(tak)o(e)g(in)o(to)f(accoun)o(t)i(the)g(spilled)e
(ranges.)18 b(All)224 1529 y(de\014nitions)d(of)e(the)i(liv)o(e)e
(range)i(m)o(ust)e(b)q(e)i(written)g(to)f(the)h(allo)q(cated)e(spill)h
(lo)q(cation,)e(and)224 1579 y(ev)o(ery)k(used)h(o)q(ccurrence)h(of)c
(the)i(liv)o(e)f(range)g(m)o(ust)f(b)q(e)i(loaded)f(from)f(the)h(spill)
g(lo)q(cation.)224 1629 y(It)e(should)f(b)q(e)h(noted)g(that)f(the)h
(spilling)e(of)g(a)h(liv)o(e)g(range)h(often)f FK(incr)n(e)n(ases)j
FN(the)e(n)o(um)o(b)q(er)f(of)224 1679 y(virtual)g(registers)j(in)d
(the)h FK(V)l(AL)p FN(.)f(This)g(is)h(b)q(ecause)i(\(at)d(least)h(for)g
FK(RISC)19 b FN(mac)o(hines\))12 b(ev)o(ery)224 1729
y(men)o(tion)i(of)h(the)g(spilled)g(virtual)f(register)j(will)c(b)q(e)j
(replaced)g(b)o(y)f(a)g(de\014nition)g(or)g(use)h(of)224
1778 y(some)i(new,)i(temp)q(orary)e(register)i(whic)o(h)f(is)g(either)g
(stored)h(or)f(loaded)f(from)f(the)i(spill)224 1828 y(lo)q(cation.)i
(Eac)o(h)15 b(of)g(these)h(new)g(virtual)e(registers)i(will)e(in)o
(terfere)i(with)f(all)f(of)g(the)i(other)224 1878 y(registers)i(in)e
(the)h(liv)o(e)e(register)j(set)f(at)f(the)h(p)q(oin)o(t)e(of)h(their)h
(brief)f(lifetime.)23 b(Because)18 b(of)224 1928 y(this)c(factor,)g
(there)h(seems)f(to)g(b)q(e)h(no)e(go)q(o)q(d)h(w)o(a)o(y)f(of)h
(incremen)o(tally)e(computing)g(the)j(new)224 1978 y(in)o(terference)g
(graph)c(from)g(the)h(previous,)h(unspilled)e(v)o(ersion.)18
b(W)m(e)12 b(therefore)h(recompute)224 2028 y(the)18
b(liv)o(e)e(register)j(sets,)f(and)f(the)h(new)f(in)o(terference)i
(graph,)f(and)f(then)g(mak)o(e)f(another)224 2077 y(attempt)11
b(at)h(coloring)f(the)h(new)h(graph.)k(It)12 b(is)g(p)q(ossible)g(but)g
(un)o(usual)f(for)h(a)f(second)i(round)224 2127 y(of)k(spilling)f(to)i
(tak)o(e)g(place)g(if)f(there)i(the)f(additional)e(temp)q(orary)h
(registers)i(cannot)f(b)q(e)224 2177 y(colored)d(in)e(the)h(new)h
(graph.)224 2303 y FO(V)l(ariations)f(on)h(Chaitin's)f(metho)q(d)224
2385 y FN(Since)h(the)g(original)d(pap)q(er,)j(a)e(n)o(um)o(b)q(er)h
(of)f(small)f(impro)o(v)o(emen)o(ts)g(on)i(Chaitin's)f(metho)q(d)224
2435 y(ha)o(v)o(e)h(b)q(een)h(prop)q(osed.)k(The)14 b(most)f(imp)q
(ortan)o(t)f(of)h(these)j(is)e(Briggs')f(v)n(ariation.)287
2488 y(It)i(has)h(already)f(b)q(een)i(noted)e(that)h(the)g(basic)g
(metho)q(d)e(ma)o(y)g(b)q(e)i(o)o(v)o(erly)f(p)q(essimistic)224
2538 y(in)f(that)f(it)g(assumes)h(that)g(if)e(a)i(liv)o(e)e(range)i
(has)g(\()p FM(k)c Ft(\000)f FN(1\))k(neigh)o(b)q(ours)h(in)f(the)h(in)
o(terference)224 2588 y(graph)k(then)h(all)d(neigh)o(b)q(ours)j(will)d
(ha)o(v)o(e)i(di\013eren)o(t)g(colors.)31 b(It)17 b(turns)i(out)f(the)g
(\\airline)224 2638 y(b)q(o)q(oking)12 b(metho)q(d")g(of)g(c)o(ho)q
(osing)g FM(k)i FN(larger)e(than)h(the)g(actual)g(n)o(um)o(b)q(er)f(of)
g(registers)i(is)f(to)q(o)224 2688 y(dangerous.)26 b(Ho)o(w)o(ev)o(er,)
17 b(Briggs)f(came)g(up)g(with)g(a)g(clev)o(er)h(algorithm)d(whic)o(h)i
(\014nds)h(just)p eop
%%Page: 264 270
264 269 bop 224 274 a FN(264)556 b FL(CHAPTER)15 b(10.)31
b(REGISTER)13 b(ALLOCA)m(TION)p 769 667 283 4 v 769 822
4 156 v 1048 822 V 769 825 283 4 v 355 667 318 4 v 355
822 4 156 v 669 822 V 355 825 318 4 v 769 390 283 4 v
769 546 4 156 v 1048 546 V 769 549 283 4 v 389 390 V
389 546 4 156 v 669 546 V 389 549 283 4 v 1149 667 V
1149 822 4 156 v 1428 822 V 1149 825 283 4 v 669 460
104 2 v 669 459 a FC(\033)p 289 460 V 427 477 a FD(rewrite)g(co)q(de)
168 b(spill)15 b(registers)1186 753 y(color)f(no)q(des)p
1428 736 173 2 v 1559 735 a FC(-)1480 770 y FD(succeed)p
1428 702 70 2 v 1496 701 2 242 v 1514 667 a(fail)p 1048
460 449 2 v 1048 459 a FC(\033)p 255 736 104 2 v 317
735 a(-)p 669 736 V 372 w(-)p 1048 736 V 337 w(-)p 288
736 2 277 v 289 736 a(?)p 1048 702 14 2 v 1076 702 V
1104 702 V 1117 701 2 15 v 1117 673 V 1117 644 V 1117
616 V 1117 587 V 1117 559 V 1117 531 V 1117 502 V 1117
474 V 1104 460 14 2 v 1076 460 V 1048 460 V 1135 563
a FD(Chaitin's)368 736 y(build)i(in)o(terference)462
787 y(graph)800 736 y(remo)o(v)o(e)d(no)q(des)824 787
y(from)g(graph)1135 615 y(path)300 955 y FN(Figure)h(10.8:)j(Figurativ)
o(e)c(represen)o(tation)i(of)f(Briggs')f(and)h(Chaitin's)f(metho)q(d)
224 1093 y(those)i(cases)g(for)f(whic)o(h)g(the)g(original)e(metho)q(d)
h(is)h(p)q(essimistic.)287 1146 y(The)j(k)o(ey)g(elemen)o(t)f(in)g
(Briggs')g(metho)q(d)g(is)h(that)g(registers)h(are)f(spilled)f(during)h
(col-)224 1196 y(oring,)h(and)f(not)g(during)h(no)q(de)f(remo)o(v)n(al)
f(from)f(the)j(graph.)29 b(Recall)17 b(that)g(in)g(Chaitin's)224
1246 y(metho)q(d,)c(when)h(ev)o(ery)h(remaining)c(no)q(de)k(has)f
(degree)h FM(k)f FN(or)g(more)f(the)h(algorithm)d(blo)q(c)o(ks)224
1296 y(and)i(one)g(or)g(more)f(no)q(des)i(m)o(ust)e(b)q(e)i(spilled.)j
(In)c(Briggs')g(metho)q(d)f(the)h(remo)o(v)n(al)e(of)h(no)q(des)224
1345 y(con)o(tin)o(ues)f(an)o(yw)o(a)o(y)m(,)e(un)o(til)g(the)i(graph)f
(is)g(empt)o(y)m(.)15 b(When)10 b(the)h(coloring)e(step)i(is)f(p)q
(erformed,)224 1395 y(no)q(des)17 b(with)e(edges)i(to)f(to)q(o)f(man)o
(y)f(other)i(no)q(des)h(ma)o(y)d(fail)g(to)h(get)h(a)g(color)f(allo)q
(cated)g(to)224 1445 y(them)h FK(and)j(ar)n(e)e(spil)r(le)n(d)g(at)g
(that)h(stage)s FN(.)26 b(As)18 b(alw)o(a)o(ys,)d(if)h(no)q(des)i(ha)o
(v)o(e)e(b)q(een)i(spilled,)f(the)224 1495 y(co)q(de)11
b(m)o(ust)d(b)q(e)j(rewritten)f(and)g(the)g(pro)q(cess)h(rep)q(eated)h
(with)d(the)h(new)g(in)o(terference)i(graph.)224 1545
y(This)17 b(pro)q(cess)i(is)e(represen)o(ted)j(b)o(y)d(the)h(\014gure)g
(10.8.)26 b(In)17 b(this)g(\014gure,)i(note)e(the)h(dotted)224
1594 y(line,)12 b(whic)o(h)g(is)f(the)i(path)f(whic)o(h)g(is)g(follo)o
(w)o(ed)e(in)h(Chaitin's)g(metho)q(d)g(if)h(the)g(no)q(de)h(remo)o(v)n
(al)224 1644 y(fails.)18 b(In)c(Briggs')g(metho)q(d,)f(the)h(solid)g
(path)g(is)g(follo)o(w)o(ed)e(in)i(the)h(case)g(that)f(the)h
FK(c)n(oloring)224 1694 y FN(step)g(fails.)287 1747 y(It)d(is)g(imp)q
(ortan)o(t)e(to)i(order)h(the)g(remo)o(v)n(al)d(of)h(no)q(des)i(in)f
(Briggs')f(metho)q(d)h(so)g(that)g(some)224 1797 y(con)o(trol)i(is)g
(exercised)i(o)o(v)o(er)e(the)g(lik)o(ely)f(registers)i(that)f(will)f
(b)q(e)h(spilled.)k(Briggs)c(suggests)224 1846 y(ordering)i(the)g(remo)
o(v)n(al)d(of)i(no)q(des)i(whic)o(h)e(ha)o(v)o(e)g(degree)i(larger)f
(than)f FM(k)i FN(using)e(the)h(same)224 1896 y(heuristic)f(as)f
(Chaitin)f(used)i(for)e(c)o(ho)q(osing)h(no)q(des)h(to)e(spill.)287
1949 y(Another)d(v)n(ariation)e(on)i(Chaitin's)e(metho)q(d)h(whic)o(h)h
(is)f(of)g(imp)q(ortance)g(is)h(\\heirarc)o(hical)224
1999 y(graph)17 b(coloring".)26 b(In)17 b(this)g(metho)q(d)f(an)h
(attempt)f(is)h(made)e(to)i(color)g(the)g(in)o(terference)224
2049 y(graph)f(arising)e(from)g(a)h(subgraph)h(of)f(the)h(con)o(trol)f
(\015o)o(w)g(graph,)g(whic)o(h)g(corresp)q(onds)i(to)224
2099 y(the)e(most)d(frequen)o(tly)i(exercised)h(paths)f(in)f(the)h(pro)
q(cedure.)20 b(This)14 b(coloring)e(is)i(extended)224
2148 y(b)o(y)21 b(successiv)o(ely)h(adding)d(parts)i(of)f(the)h(con)o
(trol)g(\015o)o(w)f(graph)g(corresp)q(onding)h(to)g(less)224
2198 y(exercised)g(paths,)f(un)o(til)e(\014nally)f(the)i(in)o
(terference)i(graph)e(of)f(the)h(whole)f(con)o(trol)h(\015o)o(w)224
2248 y(graph)14 b(has)g(b)q(een)h(colored.)224 2401 y
FI(10.5)66 b(Implemen)n(ting)24 b(graph)f(coloring)224
2506 y FH(10.5.1)56 b(Cho)r(osing)18 b(data)h(structures)224
2588 y FN(The)e(main)d(data)h(structures)k(required)e(for)e(graph)h
(coloring)f(allo)q(cators,)g(are)i(the)f(in)o(ter-)224
2638 y(ference)j(graph,)e(and)g(v)n(arious)g(register)h(sets)g(and)f
(lists.)28 b(The)17 b(op)q(erations)g(whic)o(h)g(m)o(ust)224
2688 y(b)q(e)g(p)q(erformed)e(on)g(the)i(register)g(sets)g(are)f
(insertion,)f(deletion,)h(and)f(the)i(usual)e(set)i(op-)p
eop
%%Page: 265 271
265 270 bop 224 274 a FL(10.5.)31 b(IMPLEMENTING)14 b(GRAPH)g(COLORING)
508 b FN(265)224 390 y(erations.)18 b(The)c(in)o(terference)h(graph)e
(is)g(relativ)o(ely)f(sparse,)i(and)f(requires)h(edge)g(insertion)224
440 y(and)g(deletion)g(op)q(erations,)g(and)f(the)i(coun)o(ting)e(of)h
(edges)h(of)e(particular)g(no)q(des.)287 490 y(The)j(n)o(um)o(b)q(er)f
(of)g(liv)o(e)g(ranges)h(in)g(a)f(pro)q(cedure)j(is)d(not)h(kno)o(wn)f
(un)o(til)g(compile)f(time,)224 540 y(and)d(ma)o(y)e(b)q(ecome)i(quite)
f(large.)17 b(One)12 b(of)e(the)h(subroutines)h(in)e(the)i
FK(SPEC-92)17 b FN(b)q(enc)o(hmark)224 590 y(suite)e(has)f(almost)e
(5000)h(liv)o(e)g(ranges)h(in)g(it,)f(for)g(some)g(mac)o(hine)g(arc)o
(hitectures.)224 696 y FO(Bit-v)o(ector)h(implemen)o(t)o(ati)o(ons)224
773 y FN(One)h(of)d(the)i(p)q(ossible)g(c)o(hoices)g(of)f(data)g
(structure)i(is)e(bit-v)o(ectors,)h(and)f(bit-matrices.)k(In)224
822 y(this)c(case,)g(register)g(sets)g(m)o(ust)e(b)q(e)i(dynamically)c
(allo)q(cated,)j(and)g(the)h(size)g(can)f(b)q(e)h(frozen)224
872 y(once)i(the)f(n)o(um)o(b)q(er)g(of)f(liv)o(e)g(ranges)h(is)g(kno)o
(wn)g(for)f(eac)o(h)i(particular)e(pro)q(cedure.)287
922 y(Suc)o(h)i(a)f(c)o(hoice)i(has)f(the)g(adv)n(an)o(tage)f(of)g
(simplicit)o(y)m(,)e(but)j(leads)g(to)f(some)g(op)q(erations)224
972 y(ha)o(ving)d(non-linear)f(complexit)o(y)m(,)f(as)j(a)f(function)g
(of)g FM(N)16 b FN(the)c(n)o(um)o(b)q(er)f(of)g(liv)o(e-ranges.)16
b(This)224 1022 y(somewhat)10 b(sub)q(optimal)e(b)q(eha)o(viour)i(ma)o
(y)e(still)h(b)q(e)i(tolerable,)f(pro)o(vided)g(the)h(a)o(v)o(erage)f
(case)224 1072 y(of)k(small)d(pro)q(cedures)16 b(is)e(handled)g(with)g
(lo)o(w)f(o)o(v)o(erhead.)287 1121 y(In)h(e\013ect,)h(the)f(run)o(time)
f(t)o(yp)q(e)h(of)g(the)g(register)h(sets)g(is)f(|)403
1203 y FO(t)o(yp)q(e)f FK(VR)n(e)n(gSet)19 b FN(=)14
b FO(p)q(oin)o(ter)f(to)i(arra)o(y)f FN([0)f(..)k FK(sSiz)5
b FN(])14 b FO(of)f FK(BITSET)6 b FN(;)224 1285 y(where)15
b FK(sSiz)k FN(is)14 b(the)g(\014rst)g(in)o(teger)g(equal)g(to)f(or)h
(larger)f(than)h FM(N)19 b FN(divided)13 b(b)o(y)g FK(bitsInWor)n(d)t
FN(.)287 1335 y(The)f(inclusion)f(and)g(exclusion)h(of)f(elemen)o(ts)h
(in)f(suc)o(h)h(bit-v)o(ectors)h(is)e(ob)o(viously)g(order)224
1385 y FM(O)q FN(\(1\).)18 b(Set)12 b(union)g(and)g(in)o(tersection)h
(are)f(p)q(erformed)g(b)o(y)g(lo)q(oping)e(o)o(v)o(er)i(the)h(w)o(ords)
f(in)g(the)224 1435 y(set)19 b(represen)o(tation)g(and)f(using)f(the)i
(w)o(ord-wide,)f(bit)o(wise)f(Bo)q(olean)h(op)q(erations.)30
b(The)224 1484 y(complexit)o(y)11 b(is)g(order)i FM(O)q
FN(\()p FM(N)5 b FN(\).)18 b(Note)12 b(that)g(this)g(complexit)o(y)e
(dep)q(ends)k(on)e(the)h(cardinalit)o(y)224 1534 y(of)k(the)g(univ)o
(ersal)g(set)h FM(N)5 b FN(,)17 b(and)g(not)g(on)g(the)g(cardinalit)o
(y)f(of)h(the)g(actual)g(op)q(erand)g(sets.)224 1584
y(Although)9 b(the)h(sets)h(ma)o(y)c(b)q(e)k(quite)e(sparse,)i(the)f
(e\016ciency)g(of)f(p)q(erforming)f(the)i(op)q(erations)224
1634 y(32)k(or)g(64)f(bits)h(at)g(a)f(time)g(is)h(comp)q(elling.)287
1684 y(Using)i(a)h(bit-matrix)d(adjacency)k(represen)o(tation)g(for)e
(the)i(in)o(terference)g(graph)f(can)224 1734 y(lead)11
b(to)g(v)o(ery)h(large)e(data)h(structures.)20 b(A)11
b(pro)q(cedure)i(with)e(5000)f(liv)o(e)g(ranges)i(will)d(require)224
1783 y(a)15 b(dynamically)c(allo)q(cated)k(blo)q(c)o(k)f(of)g(memory)e
(with)j(25)9 b Ft(\002)h FN(10)1221 1768 y Fz(6)1254
1783 y FN(bits,)k(or)h(ab)q(out)f(3)h(Mega-)224 1833
y(Bytes.)28 b(F)m(urthermore,)16 b(in)g(order)i(to)e(allo)o(w)f(quic)o
(k)h(indexing)g(it)g(is)h(necessary)h(to)f(create)224
1883 y(a)j FK(dop)n(e-ve)n(ctor)k FN(of)c(p)q(oin)o(ters)g(in)o(to)f
(the)i(matrix,)e(p)q(oin)o(ting)f(to)i(the)g(b)q(eginning)g(of)f(eac)o
(h)224 1933 y(ro)o(w.)g(Th)o(us)c(the)f(matrix)f(ma)o(y)f(b)q(e)j
(treated)g(as)g(an)f FO(arra)o(y)f FN([0)g(..)18 b FM(N)c
Ft(\000)9 b FN(1])k FO(of)h FK(VR)n(e)n(gSet)t FN(.)19
b(As)224 1983 y(w)o(ell)12 b(as)g(facilitating)f(indexing,)g(suc)o(h)i
(a)f(represen)o(tation)i(allo)o(ws)d(quic)o(k)h(extraction)h(of)f(the)
224 2032 y(in)o(terferences)17 b(of)c(an)o(y)g(giv)o(en)h(register.)287
2082 y(With)f(this)h(represen)o(tation,)h(w)o(e)f(again)f(consider)i
(the)f(construction)h(of)e(the)i(in)o(terfer-)224 2132
y(ence)j(graph,)f(re\014ning)g(the)g(algorithm)d(in)i(\014gure)h(10.6.)
25 b(Firstly)m(,)16 b(the)h(set)h(di\013erence)g(at)224
2182 y(line)c(4,)295 2260 y FD(4)128 b FF(liveRegSet)16
b(:=)j(liveRegSet)d(-)j(regsKilled)o(At)o(\(p\))o(;)224
2342 y FN(is)13 b(easily)f(p)q(erformed)g(b)o(y)g(one)h(or)f(t)o(w)o(o)
g(set)i(exclusion)e(op)q(erations.)18 b(The)13 b(insertions)g(in)f(the)
224 2391 y(for)i(lo)q(op)f(on)h(lines)f(5{7,)g(is)h(not)g(so)g(straigh)
o(tfo)o(wrard)f(ho)o(w)o(ev)o(er.)295 2468 y FD(5)90
b FF(FOR)12 b FE(every)g(r)n(e)n(g)h(r)h(in)f(liveR)n(e)n(gSet)h
FF(DO)295 2513 y FD(6)128 b FE(insert)13 b(e)n(dges)f(b)n(etwe)n(en)g
(destination)e(r)n(e)n(g)j(d)g(and)g(r;)295 2559 y FD(7)90
b FF(END;)224 2638 y FN(Giv)o(en)15 b(that)f(the)i(bitv)o(ector)f
FK(liveR)n(e)n(gSet)k FN(is)14 b(a)h(dense)h(represen)o(tation)g(of)f
(a)f(sparse)i(set,)g(it)224 2688 y(mak)o(es)d(sense)j(to)d(quic)o(kly)g
(deal)h(with)g(zero)g(w)o(ords)g(in)g(the)g(set)h(|)p
eop
%%Page: 266 272
266 271 bop 224 274 a FN(266)556 b FL(CHAPTER)15 b(10.)31
b(REGISTER)13 b(ALLOCA)m(TION)295 381 y FD(5a)90 b FF(FOR)19
b(wIx)f(:=)h(0)g(TO)g(sSiz)f(DO)295 427 y FD(5b)129 b
FF(IF)19 b(liveRegSe)o(t^)o([wI)o(x])d(<>)j(BITSET{})d(THEN)295
472 y FD(5c)167 b FF(FOR)18 b(bIx)h(:=)g(0)g(TO)g(bitsInWor)o(d-)o(1)e
(DO)295 518 y FD(5d)206 b FF(IF)18 b(bIx)h(IN)g(liveRegSe)o(t^)o([wI)o
(x])d(THEN)295 564 y FD(6a)244 b FF(r)19 b(:=)g(wIx)f(*)i(bitsInWor)o
(d)c(+)k(bIx;)295 609 y FD(6b)244 b FE(add)13 b(the)f(e)n(dge)i
FD(\()p Fm(d;)6 b(r)q FD(\);)295 655 y(7d)206 b FF(END;)295
701 y FD(7c)167 b FF(END;)295 746 y FD(7b)129 b FF(END;)295
792 y FD(7a)90 b FF(END;)224 888 y FN(where)15 b(the)g(add-edge)f(op)q
(eration)g(sets)h FK(two)h FN(bits)e(in)g(the)g(symmetric)e(bit)i
(matrix.)287 939 y(When)f(the)h(bit)f(manipulatio)o(ns)e(are)j
(expanded)g(out,)e(the)i(nested)h(lo)q(ops)e(in)f(this)h(co)q(de)224
989 y(ma)o(y)h(b)q(e)i(v)o(ery)f(hea)o(vily)f(optimized.)21
b(Ho)o(w)o(ev)o(er,)16 b(the)f(execution)h(of)f(this)g(nested)i(lo)q
(op)e(for)224 1039 y(ev)o(ery)g(single)f(instruction)g(in)f(the)i
(bu\013er)g(is)e(rather)i(time)e(consuming.)287 1091
y(An)d(alternativ)o(e)g(approac)o(h,)g(whic)o(h)h(ma)o(y)d(b)q(e)j
(more)e(e\016cien)o(t)i(on)f(some)f(arc)o(hitec)o(h)o(tures,)224
1141 y(is)15 b(to)g(insert)g(just)g(one)g(of)g(the)g(bits)g(for)g(eac)o
(h)g(in)o(terference,)i(and)d(restore)j(the)e(symmetry)224
1190 y(of)d(the)h(bit-matrix)d(in)i(a)g(single)g(scan)h(o)o(v)o(er)f
(the)h(elemen)o(ts)f(after)h(all)e(insertions)i(ha)o(v)o(e)f(b)q(een)
224 1240 y(made.)24 b(In)16 b(this)g(case)h(the)f(co)q(de)h(simply)d
(replaces)k(the)e FM(d)p FN(-th)g(ro)o(w)g(of)f(the)i(bit-matrix)d(b)o
(y)224 1290 y(the)h(union)e(of)g(the)i FM(d)p FN(-th)e(ro)o(w)h(and)g
(the)g(liv)o(e)f(register)j(set.)295 1385 y FD(5a)90
b FF(FOR)19 b(wIx)f(:=)h(0)g(TO)g(sSiz)f(DO)295 1431
y FD(6a)129 b FF(row[d]^[w)o(Ix)o(])17 b(:=)h(row[d]^[wIx)o(])e(+)k
(liveRegSe)o(t^)o([wI)o(x];)295 1477 y FD(7a)90 b FF(END;)224
1572 y FN(Restoring)11 b(symmetry)d(to)j(the)g(graph)f(requires)i(a)e
(nested)i(lo)q(op)e(o)o(v)o(er)g(all)f(matrix)g(elemen)o(ts.)287
1624 y(Using)15 b(this)h(represen)o(tation)h(leads)f(to)g(v)o(ery)g(lo)
o(w)e(o)o(v)o(erhead)j(for)e(small)e(v)n(alues)j(of)f
FM(N)5 b FN(,)224 1674 y(but)15 b(is)f(asymptotically)d(rather)k(slo)o
(w.)j(F)m(or)c(job)g(mixes)f(whic)o(h)h(in)o(v)o(olv)o(e)e(man)o(y)h
(large)g(pro-)224 1724 y(cedures)j(with)e(v)o(ery)g(man)o(y)e(liv)o(e)h
(ranges)h(the)g(sparcit)o(y)g(of)f(the)i(sets)g(suggests)g(that)f(a)f
FK(dual)224 1774 y FN(represen)o(tation)h(for)e(the)h(liv)o
(e-register-set,)g(using)f(a)g(bit-v)o(ector)g FK(and)17
b FN(a)12 b(list)g(is)g(preferable.)287 1825 y(One)i(of)f(the)h(other)g
(p)q(erformance)g(issues)h(for)e(graph)g(coloring)g(in)o(v)o(olv)o(es)f
(trac)o(king)i(the)224 1875 y(n)o(um)o(b)q(er)g(of)g(remaining)e(graph)
i(edges)h(in)f(particular)g(ro)o(ws)g(of)g(the)h(graph.)j(There)e(are)e
(at)224 1925 y(least)g(t)o(w)o(o)g(approac)o(hes)h(to)e(this,)h(here)h
(is)f(one)g(of)f(them.)287 1977 y(Firstly)m(,)j(the)i(n)o(um)o(b)q(er)e
(of)h(edges)h(for)f(eac)o(h)g(no)q(de)h FM(n)f FN(is)g(determined)g(b)o
(y)g(coun)o(ting)f FM(e)p FN(,)224 2027 y(the)e(n)o(um)o(b)q(er)e(of)g
(\\1")g(bits)h(in)g(the)g(corresp)q(onding)h(ro)o(w)f(of)f(the)i
(bit-matrix.)h(Those)e(no)q(des)224 2076 y(whic)o(h)g(ha)o(v)o(e)g
(less)g(than)g FM(k)h FN(edges)f(are)h(placed)f(on)f(an)h(arra)o(y)f
(of)h(lists)f(indexed)i(on)e FM(e)p FN(.)18 b(These)224
2126 y(no)q(des)11 b(are)f(remo)o(v)o(ed)f(in)h(order)h(of)e
(increasing)h FM(e)p FN(,)g(and)g(a)g(set)h(of)e(remo)o(v)o(ed)g(no)q
(des)i(\\)p FK(r)n(emove)n(d)t FN(")224 2176 y(is)j(incremen)o(tally)f
(up)q(dated.)18 b(W)m(e)c(then)g(lo)q(op)f(o)o(v)o(er)h(the)h
(remaining)c(no)q(des)k(re-ev)n(aluating)224 2226 y(the)g(edge)g(coun)o
(ts,)f(and)g(remo)o(ving)f(no)q(des)h(for)g(whic)o(h)g(the)h(edge)g
(coun)o(t)f(has)g(fallen)g(b)q(elo)o(w)224 2276 y FM(k)q
FN(,)g(as)g(sho)o(wn)g(here)h(|)372 2371 y FF(\(*)d FE(r)n(emove)h(r)n
(emaining)f(no)n(des)i FF(*\))372 2416 y(WHILE)k(\(removed)e(<>)j
(allRegs\))e(AND)h FE(not-blo)n(cke)n(d)13 b FF(DO)423
2462 y(FOR)f FE(every)g(r)n(emaining)g(no)n(de)i FF(n)19
b(DO)462 2508 y(IF)g(Edges\(ro)o(w[n)o(])d(-)k(removed\))c(<)j(k)h
(THEN)500 2553 y FE(put)13 b(n)g(on)g(list,)f(and)h(include)e(in)i(r)n
(emove)n(d)t FF(;)462 2599 y(END;)423 2645 y(END;)372
2690 y(END;)p eop
%%Page: 267 273
267 272 bop 224 274 a FL(10.5.)31 b(IMPLEMENTING)14 b(GRAPH)g(COLORING)
508 b FN(267)224 390 y(This)19 b(algorithm)d(lo)q(oks)i(as)g(though)h
(it)f(migh)o(t)e(ev)n(aluate)j(the)g(n)o(um)o(b)q(er)f(of)g(edges)h
(man)o(y)224 440 y(times,)f(but)h(in)f(practice)h(the)g(n)o(um)o(b)q
(er)f(of)g(ev)n(aluations)f(for)h(mo)q(derate)g FM(N)23
b FN(is)c(t)o(ypically)224 490 y(\(1)p FM(:)p FN(5)10
b Ft(\002)h FM(N)5 b FN(\))16 b(and)f(almost)f(nev)o(er)j(more)d(that)i
(\(3)p FM(:)p FN(0)10 b Ft(\002)h FM(N)5 b FN(\).)23
b(The)16 b(reason)h(is)e(that)h(once)h(the)224 540 y(lo)o(w)d(edge)i
(no)q(des)g(ha)o(v)o(e)f(b)q(een)h(remo)o(v)o(ed,)e(man)o(y)f(of)h(the)
i(remaining)d(no)q(des)j(ha)o(v)o(e)f(already)224 590
y(dropp)q(ed)g(b)q(elo)o(w)f FM(k)q FN(.)287 643 y(The)k(alternativ)o
(e)g(strategy)m(,)g(coun)o(ting)g(edges)h(once)f(and)g(adjusting)f(the)
i(coun)o(ts)f(as)224 693 y(adjacen)o(t)c(no)q(des)h(are)f(remo)o(v)o
(ed,)f(is)g(m)o(uc)o(h)g(less)h(fa)o(v)o(orable.)j(Ov)o(er)e(the)f
(same)f(test)i(suite)f(of)224 743 y(pro)q(cedures)k(the)e(edgecoun)o(t)
h(of)e(t)o(ypical)g(no)q(des)h(is)g(decremen)o(ted)g(ab)q(out)g(10)f
(times,)f(and)224 793 y(the)h(op)q(erations)f(are)g(more)f(costly)m(.)
224 920 y FO(Coun)o(ting)h(the)g(edges)224 1004 y FN(Coun)o(ting)c(the)
h(edges)g(in)f(a)g(bit-v)o(ector)h(consists)g(of)f(adding)g(up)g(the)h
(n)o(um)o(b)q(er)f(of)g(\\1")f(bits)i(in)224 1054 y(all)i(the)i(w)o
(ord-sized)g(bitsets)g(in)e(the)i(v)o(ector.)20 b(The)14
b(e\016ciency)h(dep)q(ends)h(critically)d(on)h(the)224
1103 y(algorithm)d(whic)o(h)j(is)f(used)i(to)f(coun)o(t)f(\\1")g(bits)h
(in)f(eac)o(h)h(w)o(ord.)k(Since)c(no)g(con)o(temp)q(orary)224
1153 y(mac)o(hines)h(o\013er)h(a)g(single)f(instruction)h(to)f(do)h
(this,)f(it)g(is)h(w)o(orth)f(noting)g(that)h(there)h(are)224
1203 y(t)o(w)o(o)g(separate,)h(e\016cien)o(t)f(w)o(a)o(ys)f(of)h(doing)
e(this.)27 b(Neither)18 b(of)e(these)i(is)f(exactly)g(ob)o(vious,)224
1253 y(and)d(b)q(oth)g(of)f(them)g(are)i(m)o(uc)o(h)d(sup)q(erior)j(to)
f(a)f(mindless)g(iteration)g(o)o(v)o(er)h(the)h(bits)e(of)h(the)224
1303 y(w)o(ord.)287 1356 y(The)e(more)g(straigh)o(tforw)o(ard)f(w)o(a)o
(y)h(of)f(p)q(erforming)g(the)i(coun)o(t)f(is)g(to)g(construct)i(a)e(b)
o(yte)224 1406 y(lo)q(okup)f(table)g FG(map)p FN([0)p
FM(::)p FN(255])l(,)g(whic)o(h)g(is)g(initialized)e(so)j(that)f
FG(map[)p FM(n)p FG(])e FN(con)o(tains)i(the)h(n)o(um)o(b)q(er)224
1456 y(of)i(\\1")g(bits)h(in)f(the)h(binary)f(represen)o(tation)i(of)e
FM(n)p FN(.)20 b(Then)15 b(at)f(run)o(time)g(w)o(e)h(compute)f(the)224
1506 y(n)o(um)o(b)q(er)g(of)f(\\1")g(bits)h(in)f(a)h(w)o(ord)g(b)o(y)f
(|)295 1610 y FF(\(*)f FE(p)n(attern)g(is)h(a)h(wor)n(d-size)n(d)d
(union)j FF(*\))295 1656 y(IF)19 b(pattern.se)o(t)d(<>)j(emptySet)e
(THEN)346 1701 y(INC\(count,m)o(ap)o([pa)o(tte)o(rn)o(.by)o(t[)o(0]])o
(\);)f(\(*)c FE(bits)h(in)g(byte-0)e FF(*\))346 1747
y(INC\(count,m)o(ap)o([pa)o(tte)o(rn)o(.by)o(t[)o(1]])o(\);)16
b(\(*)c FE(bits)h(in)g(byte-1)e FF(*\))346 1793 y(INC\(count,m)o(ap)o
([pa)o(tte)o(rn)o(.by)o(t[)o(2]])o(\);)16 b(\(*)c FE(bits)h(in)g
(byte-2)e FF(*\))346 1838 y(INC\(count,m)o(ap)o([pa)o(tte)o(rn)o(.by)o
(t[)o(3]])o(\);)16 b(\(*)c FE(bits)h(in)g(byte-3)e FF(*\))334
1884 y(\(*)h FE(mor)n(e)h(for)h(eight-byte)c(wor)n(ds...)16
b FF(*\))295 1930 y(END;)224 2033 y FN(The)e(four)e(inner)h(lines)g
(compile)e(do)o(wn)h(to)h(just)g(17)f(instructions)i(on)e(a)g(t)o
(ypical)g(load-store)224 2082 y(arc)o(hitecture,)17 b(but)e(include)g
(8)g(memory)d(references.)24 b(On)15 b(some)f(mac)o(hines)g(fetc)o
(hing)h(the)224 2132 y(whole)d(w)o(ord)g(once,)h(and)e(shifting)g(and)h
(masking)e(to)i(obtain)f(the)i(four)e(index)h(b)o(ytes)h(w)o(ould)224
2182 y(b)q(e)18 b(b)q(etter.)31 b(In)17 b(this)h(case)g(w)o(e)g(w)o
(ould)f(ha)o(v)o(e)g(three)i(extra)f(instructions,)g(but)g(only)f(four)
224 2232 y(memory)12 b(references.)287 2285 y(The)j(second)g(metho)q(d)
f(is)g(rather)i(more)d(obscure.)21 b(Figure)15 b(10.9)e(is)i(an)f
(assem)o(bly)f(lan-)224 2335 y(guage)h(v)o(ersion)g(in)g
FK(SP)m(AR)o(C)20 b FN(assem)o(bler.)32 b(The)14 b(metho)q(d)f(w)o
(orks)h(b)o(y)g(\014rst)h(separating)f(the)224 2385 y(o)q(dd)f(and)g
(ev)o(en)g(bits)g(of)f(the)h(w)o(ord)f(b)o(y)h(shifting)e(and)i
(masking.)i(The)f(t)o(w)o(o)e(w)o(ords)h(are)g(then)224
2435 y(added.)19 b(Because)d(of)d(the)h(shift,)g(there)h(is)e(no)h
(carry)h(propagation,)d(and)i(w)o(e)g(are)g(left)g(with)224
2485 y(an)g(arra)o(y)g(of)f(16)g(bit-pairs,)g(eac)o(h)i(of)e(whic)o(h)h
(can)g(only)f(b)q(e)h(in)g(the)g(range)g(0)g(to)g(2.)287
2538 y(The)19 b(algorithm)e(no)o(w)i(shifts)g(and)g(masks)f(the)i(new)g
(w)o(ord)f(so)g(as)g(to)g(separate)i(the)224 2588 y(o)q(dd)e(and)f(ev)o
(en)h(bit-pairs,)g(whic)o(h)f(are)h(then)g(added.)32
b(Once)19 b(again)f(there)h(is)g(no)f(carry)224 2638
y(propagation,)13 b(and)h(w)o(e)h(are)f(left)g(with)g(eigh)o(t)g
(bit-quads,)g(eac)o(h)g(of)g(whic)o(h)g(can)g(only)g(b)q(e)h(in)224
2688 y(the)g(range)f(0)g(to)f(4.)p eop
%%Page: 268 274
268 273 bop 224 274 a FN(268)556 b FL(CHAPTER)15 b(10.)31
b(REGISTER)13 b(ALLOCA)m(TION)p 270 392 1350 2 v 269
438 2 46 v 295 424 a FF(;)g FE(wor)n(d)g(is)g(in)h(r)n(e)n(gister)e(i0)
h(to)g(start)p 1619 438 V 269 483 V 393 470 a FF(set)38
b(0x55555555,)o(\045g)o(1)75 b(;)13 b FE(lo)n(ad)f(up)h(mask1)p
1619 483 V 269 529 V 393 515 a FF(shr)38 b(\045i0,1,\045i1)173
b(;)13 b FE(shift)f(by)h(one)g(bit)p 1619 529 V 269 575
V 393 561 a FF(and)38 b(\045i0,\045g1,\045i0)133 b(;)13
b FE(o)n(dd)f(numb)n(er)n(e)n(d)g(bits)p 1619 575 V 269
620 V 393 607 a FF(and)38 b(\045i1,\045g1,\045i1)133
b(;)13 b FE(even)f(numb)n(er)n(e)n(d)g(bits)p 1619 620
V 269 666 V 393 652 a FF(add)38 b(\045i0,\045i1,\045i0)133
b(;)13 b FE(arr)n(ay)g(of)g(16)g(bit-p)n(airs)p 1619
666 V 269 712 V 295 698 a FF(;)g FE(e)n(ach)f(bit-p)n(air)g(has)g
(value)g(0,1)h(or)g(2)p 1619 712 V 269 757 V 393 744
a FF(set)38 b(0x33333333,)o(\045g)o(2)75 b(;)13 b FE(lo)n(ad)f(up)h
(mask2)p 1619 757 V 269 803 V 393 789 a FF(shr)38 b(\045i0,2,\045i1)173
b(;)13 b FE(shift)f(by)h(two)h(bits)p 1619 803 V 269
849 V 393 835 a FF(and)38 b(\045i0,\045g2,\045i0)133
b(;)13 b FE(two)g(bits)g(at)g(a)g(time)p 1619 849 V 269
894 V 393 881 a FF(and)38 b(\045i1,\045g2,\045i1)133
b(;)13 b FE(two)g(bits)g(at)g(a)g(time)p 1619 894 V 269
940 V 393 926 a FF(add)38 b(\045i0,\045i1,\045i0)133
b(;)13 b FE(arr)n(ay)g(of)g(8)g(bit-quads)p 1619 940
V 269 986 V 295 972 a FF(;)g FE(e)n(ach)f(bit-quad)f(is)i(in)g(r)n
(ange)g(0..4)p 1619 986 V 269 1031 V 393 1018 a FF(set)38
b(0x0f0f0f0f,)o(\045g)o(3)75 b(;)13 b FE(lo)n(ad)f(up)h(mask3)p
1619 1031 V 269 1077 V 393 1063 a FF(shr)38 b(\045i0,4,\045i1)173
b(;)13 b FE(shift)f(by)h(four)g(bits)p 1619 1077 V 269
1123 V 393 1109 a FF(and)38 b(\045i0,\045g3,\045i0)133
b(;)13 b FE(four)g(bits)f(at)h(a)h(time)p 1619 1123 V
269 1168 V 393 1155 a FF(and)38 b(\045i1,\045g3,\045i1)133
b(;)13 b FE(four)g(bits)f(at)h(a)h(time)p 1619 1168 V
269 1214 V 393 1200 a FF(add)38 b(\045i0,\045i1,\045i0)133
b(;)13 b FE(arr)n(ay)g(of)g(4)g(o)n(ctets)p 1619 1214
V 269 1260 V 295 1246 a FF(;)g FE(e)n(ach)f(o)n(ctet)g(is)h(in)g(r)n
(ange)g(0..8)p 1619 1260 V 269 1305 V 393 1292 a FF(set)38
b(0x00ff00ff,)o(\045g)o(4)75 b(;)13 b FE(lo)n(ad)f(up)h(mask4)p
1619 1305 V 269 1351 V 393 1337 a FF(shr)38 b(\045i0,8,\045i1)173
b(;)13 b FE(shift)f(by)h(eight)f(bits)p 1619 1351 V 269
1397 V 393 1383 a FF(and)38 b(\045i0,\045g4,\045i0)133
b(;)13 b FE(eight)f(bits)h(at)g(a)g(time)p 1619 1397
V 269 1442 V 393 1429 a FF(and)38 b(\045i1,\045g4,\045i1)133
b(;)13 b FE(eight)f(bits)h(at)g(a)g(time)p 1619 1442
V 269 1488 V 393 1474 a FF(add)38 b(\045i0,\045i1,\045i0)133
b(;)13 b FE(arr)n(ay)g(of)g(2)g(half-wor)n(ds)p 1619
1488 V 269 1534 V 295 1520 a FF(;)g FE(e)n(ach)f(half-wor)n(d)g(is)h
(in)g(r)n(ange)g(0..16)p 1619 1534 V 269 1579 V 393 1566
a FF(shr)38 b(\045i0,16,\045i1)153 b(;)13 b FE(shift)f(by)h(sixte)n(en)
f(bits)p 1619 1579 V 269 1625 V 393 1611 a FF(and)38
b(\045i0,31,\045i0)153 b(;)13 b FE(mask)g(lower)g(c)n(ount)p
1619 1625 V 269 1671 V 393 1657 a FF(add)38 b(\045i0,\045i1,\045i0)133
b(;)13 b FE(\014nal)f(c)n(ount!)p 1619 1671 V 269 1716
V 295 1703 a FF(;)20 b(\045i0)11 b FE(is)i(in)g(the)g(r)n(ange)f(0..32)
p 1619 1716 V 270 1718 1350 2 v 375 1834 a FN(Figure)i(10.9:)j(Coun)o
(ting)c(the)h(bits)g(in)g(a)f(w)o(ord,)h(hierarc)o(hical)g(metho)q(d)
287 1969 y(Con)o(tin)o(uing)i(hierarc)o(hically)m(,)i(w)o(e)g
(\014nally)f(obtain)h(the)g(bit)g(coun)o(t)g(after)h(four)f(and)g(a)224
2019 y(half)13 b(steps.)19 b(In)14 b(the)g(v)o(ersion)g(giv)o(en)f
(here,)h(there)h(are)f(23)f(instructions)1341 2003 y
Fz(3)1361 2019 y FN(,)g(but)g(no)h(memory)224 2068 y(accesses.)24
b(On)15 b(mac)o(hines)f(whic)o(h)h(allo)o(w)e(32-bit)h(literals,)h
(this)g(instruction)g(coun)o(t)g(w)o(ould)224 2118 y(come)k(do)o(wn)f
(to)h(just)h(19.)33 b(In)19 b(an)o(y)f(case,)j(if)d(these)j
(instructions)f(are)f(the)h(k)o(ernel)f(of)g(a)224 2168
y(lo)q(op)d(whic)o(h)h(iterates)g(o)o(v)o(er)g(all)e(the)i(w)o(ords)g
(in)f(a)g(large)g(set,)i(the)f(mask)e(w)o(ords)i(are)g(lo)q(op)224
2218 y(in)o(v)n(arian)o(t,)12 b(and)i(the)g(n)o(um)o(b)q(er)g(of)f
(instructions)h(p)q(er)h(bitset)g(is)e(19.)287 2269 y(There)h(is)g
(little)e(to)i(c)o(ho)q(ose)g(b)q(et)o(w)o(een)h(these)g(t)o(w)o(o)e
(metho)q(ds)g(for)g(32-bit)g(arc)o(hitectures,)224 2318
y(but)k(note)g(that)g(for)g(64-bit)e(arc)o(hitectures)k(the)f(\014rst)f
(metho)q(d)f(uses)i(t)o(wice)f(as)g(man)o(y)e(in-)224
2368 y(structions,)g(while)e(the)i(second)g(uses)g(just)f(one)g(extra)g
(step)h(of)f(four)f(instructions.)224 2482 y FO(Range)j(merging)d(and)j
(cop)o(y)f(eliminati)o(on)224 2560 y FN(As)d(w)o(ell)f(as)g(the)h(ob)o
(vious)e(purp)q(ose,)j(register)f(allo)q(cation)e(also)g(has)i(the)g
(task)f(of)g(redundan)o(t)224 2610 y(cop)o(y)17 b(elimination.)25
b(P)o(articularly)16 b(in)h(the)g(case)h(of)f FK(V)l(AL)f
FN(arising)h(from)e FK(SSA)j FN(there)g(are)p 224 2649
577 2 v 271 2676 a Fy(3)288 2688 y Fx(W)m(ell,)11 b(to)g(b)q(e)g
(strict,)f(the)h Fs(set)p Fx(s)g(should)f(coun)o(t)g(as)h(t)o(w)o(o)h
(eac)o(h.)p eop
%%Page: 269 275
269 274 bop 224 274 a FL(10.5.)31 b(IMPLEMENTING)14 b(GRAPH)g(COLORING)
508 b FN(269)224 390 y(man)o(y)10 b(register-to-register)k(copies,)e
(and)g(w)o(e)f(w)o(ould)g(lik)o(e)g(to)h(eliminate)d(as)j(man)o(y)e(of)
h(them)224 440 y(as)j(p)q(ossible.)287 490 y(The)19 b(classical)g
(metho)q(d)f(of)h(doing)f(this)h(is)g(to)g(mak)o(e)f(a)g
FK(r)n(ange)i(mer)n(ging)j FN(pass)c(o)o(v)o(er)224 540
y(the)g(co)q(de)g(bu\013er)h FK(after)i FN(the)c(in)o(terference)j
(graph)d(has)g(b)q(een)h(constructed.)34 b(F)m(or)18
b(ev)o(ery)224 590 y(register-to-register)e(cop)o(y)m(,)d(if)g(the)i
(source)g(and)e(destination)h(registers)h(do)f(not)g(in)o(terfere,)224
640 y(all)e(uses)h(of)f(the)h(destination)f(are)h(replaced)g(b)o(y)f
(uses)i(of)e(the)h(source.)19 b(As)13 b(w)o(ell,)e(the)i(source)224
689 y(register)j(no)q(de)f(has)g(all)e(in)o(terferences)k(of)d(the)h
(destination)f(added)h(to)f(its)h(edge)g(set.)21 b(The)224
739 y(no)o(w)14 b(reduced)i(n)o(um)o(b)q(er)d(of)g(no)q(des)i(are)f
(colored)g(in)f(the)i(normal)d(w)o(a)o(y)m(.)287 789
y(An)i(alternativ)o(e)h(is)f(to)g(color)g(the)h(original)e(graph,)h
(but)h(build)e(an)i(heuristic)g(in)o(to)f(the)224 839
y(allo)q(cator)f(whic)o(h)g(attempts)g(to)h(c)o(ho)q(ose)g(colors)f
(whic)o(h)h(eliminate)d(copies)j(whenev)o(er)h(p)q(os-)224
889 y(sible.)31 b(This)17 b(ma)o(y)f(in)o(v)o(olv)o(e)h(k)o(eeping)h
(for)g(eac)o(h)g(register)h(a)f(list)f(of)h(registers)h(whic)o(h)f(are)
224 938 y(connected)e(b)o(y)e(cop)o(y)g(instructions.)19
b(Suc)o(h)14 b(an)g(algorithm)d(ma)o(y)h(sometimes)g(fail)h(to)g(elim-)
224 988 y(inate)i(all)f(copies.)21 b(Nev)o(ertheless,)16
b(it)f(has)g(the)g(desirable)g(prop)q(ert)o(y)h(that)f(when)g
(registers)224 1038 y(do)j(run)h(out,)g(liv)o(e)e(ranges)i(are)g
(automatically)c(split)j(at)g(the)g(joins,)h(and)f(a)g
FK(chamele)n(on)224 1088 y(c)n(oloring)371 1073 y Fz(4)407
1088 y FN(is)f(attempted,)h(b)q(efore)g(a)f(joined-up)g(liv)o(e)g
(range)h(is)f(spilled.)28 b(This)18 b(strategy)224 1138
y(seems)13 b(to)g(b)q(eha)o(v)o(e)g(particularly)f(w)o(ell)g(in)g(the)h
(case)h(of)e(mac)o(hines)g(with)g(v)o(ery)h(few)g(ph)o(ysical)224
1187 y(registers.)224 1294 y FO(Coloring)h(the)h(list)224
1371 y FN(Once)k(all)d(of)h(the)h(no)q(des)g(ha)o(v)o(e)f(b)q(een)i
(remo)o(v)o(ed)d(from)g(the)i(graph,)f(the)h(graph)f(m)o(ust)g(b)q(e)
224 1421 y(reconstructed)d(no)q(de)e(b)o(y)f(no)q(de,)g(and)g(colors)g
(\(ph)o(ysical)g(registers\))i(c)o(hosen)f(for)f(eac)o(h)g(no)q(de.)224
1471 y(The)16 b(constrain)o(t)f(is)f(that)h(the)h(register)g(c)o(hosen)
f(for)g(the)g(latest)g(no)q(de)h(b)q(e)f(separate)h(to)f(all)224
1520 y(of)g(the)i(registers)g(whic)o(h)e(ha)o(v)o(e)h(b)q(een)h(allo)q
(cated)e(to)g(the)i(other)f(no)q(des)g(whic)o(h)g(ha)o(v)o(e)f(b)q(een)
224 1570 y(colored)d(already)m(,)f(and)g(whic)o(h)g(in)o(terfere)i
(with)e(the)h(latest)g(no)q(de.)18 b(Essen)o(tially)m(,)10
b(a)i(mapping)224 1620 y(from)j(the)i(in)o(terfering)f(virtual)f
(register)i(set)h(to)e(the)g(una)o(v)n(ailable)e(ph)o(ysical)i
(register)h(set)224 1670 y(m)o(ust)h(b)q(e)h(constructed.)35
b(With)18 b(our)h(bit-v)o(ector)g(represen)o(tation)h(an)f(O\()p
FM(N)5 b FN(\))19 b(scan)g(o)o(v)o(er)224 1720 y(the)g(bit-v)o(ector)g
(seems)f(una)o(v)o(oidable.)30 b(Supp)q(ose)19 b(that)f
FK(r)n(eplac)n(e)n(d)k FN(is)d(the)f(set)i(of)d(virtual)224
1770 y(registers)f(already)d(allo)q(cated)h(a)f(register)i(and)f
(replaced)h(in)e(the)i(graph.)372 1849 y FF(\(*)d FE(c)n(alculate)f
(set)i(of)g(infe)n(asible)d(physic)n(al)h(r)n(e)n(gisters)k
FF(pRegClas)o(h)i(*\))372 1895 y(\(*)12 b FE(given)g(the)h(set)g(of)g
(vR)n(e)n(gs)f(alr)n(e)n(ady)g(assigne)n(d)f(to)i(physic)n(al)e(r)n(e)n
(gisters)j FF(*\))372 1941 y(pRegClash)i(:=)j(PhysRegSet)o
Fw(fg)p FF(;)372 1986 y(vRegClash)d(:=)j(Intersecti)o(on)o(\(ro)o(w[)o
(n],)o(rep)o(la)o(ced)o(\);)385 2032 y(FOR)f(wIx)h(:=)g(0)g(TO)g(sSiz)f
(DO)423 2078 y(IF)h(vRegClash^)o([w)o(Ix])d(<>)j(BITSET{})d(THEN)462
2123 y(FOR)i(bIx)h(:=)f(0)i(TO)e(bitsInWord-)o(1)e(DO)500
2169 y(IF)j(bIx)f(IN)h(vRegClash^)o([wI)o(x])d(THEN)538
2215 y(r)k(:=)f(wIx)f(*)h(bitsInWord)d(+)j(bIx;)538 2260
y(INCL\(pRegCl)o(as)o(h,P)o(hys)o(Re)o(gOf)o(\(r)o(\)\);)500
2306 y(END;)462 2352 y(END;)423 2397 y(END;)385 2443
y(END;)224 2525 y FN(Here,)d(w)o(e)f(compute)f(the)h(set)g(of)f
(clashing)g(virtual)g(registers)i(as)f(the)g(in)o(tersection)h(of)e
(the)224 2575 y(replaced)d(set)g(with)f(the)g(set)h(of)e
FK(al)r(l)14 b FN(in)o(terferences)e(of)e(register)h
FM(n)p FN(,)f FK(r)n(ow)t FN([)p FM(n)p FN(])o(.)16 b(W)m(e)10
b(assume)f(that)p 224 2610 577 2 v 271 2636 a Fy(4)288
2648 y Fx(A)k(c)o(hameleon)d(coloring)g(c)o(hanges)h(color)h(within)g
(the)g(same)f(liv)o(e)h(range.)17 b(F)m(or)c(almost)e(all)h(mac)o
(hines)224 2688 y(it)g(is)f(b)q(etter)f(to)h(p)q(erform)f(a)h
(register-to-re)o(gist)o(er)e(cop)o(y)m(,)h(rather)g(than)g(to)h(spill)
g(and)f(restore)g(a)i(register.)p eop
%%Page: 270 276
270 275 bop 224 274 a FN(270)556 b FL(CHAPTER)15 b(10.)31
b(REGISTER)13 b(ALLOCA)m(TION)224 390 y FN(the)18 b(function)e
FK(PhysR)n(e)n(gOf)26 b FN(returns)18 b(the)f(ph)o(ysical)f(register)i
(allo)q(cated)e(to)g(a)h(particular)224 440 y(virtual)c(register)i(in)f
(the)g(replaced)h(set.)224 571 y FO(Estimating)f(spill)f(cost)224
655 y FN(If)j(graph)g(coloring)f(metho)q(ds)g(do)h(not)g(\014nd)g(a)g
(spill-free)f(allo)q(cation,)g(then)h(one)g(or)g(more)224
705 y(liv)o(e)h(ranges)g(m)o(ust)f(b)q(e)h(c)o(hosen)h(for)f(spilling.)
25 b(In)17 b(Chaitin-st)o(yle)f(allo)q(cators)g(this)h(means)224
755 y(spilling)f(the)j(whole)e(of)g(the)h(c)o(hosen)h(ranges.)29
b(In)18 b(order)g(to)g(mak)o(e)e(a)h(go)q(o)q(d)g(c)o(hoice)h(it)f(is)
224 805 y(necessary)h(to)d(estimate)g(of)g(the)g(cost)i(and)e(b)q
(ene\014t)h(of)f(spilling)f(ev)o(ery)i(candidate)g(range.)224
855 y(The)f(c)o(hoice)g(should)f(add)g(as)g(little)g(as)g(p)q(ossible)g
(to)g(the)h(run)o(time)e(cost,)i(b)o(y)f(w)o(a)o(y)f(of)h(extra)224
904 y(execution)i(cycles,)g(and)f(should)g(reduce)i(the)f(edge)g(coun)o
(t)f(on)g(as)g(man)o(y)f(other)h(no)q(des)h(as)224 954
y(p)q(ossible.)287 1008 y(The)10 b(run)o(time)e(spill)h(cost)h
(consists)h(of)e(t)o(w)o(o)g(comp)q(onen)o(ts:)16 b(the)10
b(actual)f(cost)i(of)e(the)h(extra)224 1058 y(instruction)15
b(cycles)h(whic)o(h)e(will)f(need)i(to)f(b)q(e)h(executed,)h(and)e(the)
h(relativ)o(e)f(frequency)i(of)224 1108 y(those)j(instructions.)31
b(It)18 b(is)f(almost)f(certainly)i(m)o(uc)o(h)f(more)g(costly)h(to)g
(spill)f(a)g(register)224 1158 y(whic)o(h)11 b(is)g(used)g(inside)g(a)f
(lo)q(op)g(than)h(a)f(register)i(whic)o(h)f(is)f(not)h(used)g(in)g(a)f
(lo)q(op.)16 b(Th)o(us)11 b(some)224 1208 y(kind)17 b(of)f(heuristic)i
(for)f(estimating)e(execution)j(frequency)g(is)f(required.)28
b(The)17 b(simplest)224 1257 y(metho)q(ds)10 b(just)g(coun)o(t)g(the)g
(lo)q(op)f(nesting)h(lev)o(el,)g(and)f(presume)h(that)g(eac)o(h)g(lo)q
(op)f(is)g(executed)224 1307 y(some)k(mo)q(derate)h(n)o(um)o(b)q(er)f
(of)g(times.)287 1361 y(Estimating)d(the)j(run)o(time)e(cost)h(of)g
(spilling)e(is)i(quite)g(straigh)o(tforw)o(ard)g(for)f(load-store)224
1411 y(arc)o(hitectures,)21 b(since)d(the)h(n)o(um)o(b)q(er)e(of)g
(extra)h(instructions)h(is)e(kno)o(wn.)29 b(In)18 b(particular,)224
1461 y(the)d(cost)g(of)e(spilling)g(a)h(particular)g(register)h(can)f
(b)q(e)h(calculated)f(from)f(the)h FK(V)l(AL)p FN(,)f(and)h(is)224
1511 y(indep)q(enden)o(t)i(of)d(an)o(y)g(other)i(spilling)d(decisions.)
287 1565 y(The)17 b(situation)f(is)g(m)o(uc)o(h)f(more)h(di\016cult)g
(for)g(mac)o(hines)g(whic)o(h)g(allo)o(w)f(op)q(erands)i(to)224
1615 y(b)q(e)h(used)g(from)d(memory)m(.)24 b(As)18 b(an)f(example,)f
(consider)i(the)f(cost)h(of)e(spilling)f(a)i(register)224
1664 y(used)d(in)e(a)g(compare)g(\\)p FG(cmp)p FN(")f(instruction)i(in)
f(the)h FK(Intel-x86)19 b FN(arc)o(hitecture.)g(Either)13
b(one)g(of)224 1714 y(the)i(op)q(erands)g(can)f(b)q(e)h(tak)o(en)f
(from)e(memory)g(without)h(an)o(y)h(extra)g(instructions,)h(so)f(the)
224 1764 y(additional)c(o)o(v)o(erhead)j(comes)e(only)g(from)f(the)j
(sligh)o(tly)e(decreased)j(co)q(de)e(densit)o(y)m(,)g(the)h(the)224
1814 y(p)q(o)q(orer)19 b(cac)o(he)f(p)q(erformance)f(whic)o(h)h(ma)o(y)
d(result.)29 b(Ho)o(w)o(ev)o(er,)19 b(if)d FK(b)n(oth)21
b FN(of)c(the)h(op)q(erand)224 1864 y(registers)d(b)q(ecome)e(spilled,)
f(then)h(the)h(cost)f(amoun)o(ts)f(to)h(a)f(whole)h(extra)g
(instruction)g(p)q(er)224 1914 y(comparison.)30 b(Th)o(us)18
b(the)h(cost)g(of)e(spilling)g(a)h(particular)f(register)j(dep)q(ends)g
(on)d(whic)o(h)224 1963 y(other)c(registers)h(ha)o(v)o(e)e(b)q(een)h
(spilled)f(already)m(.)k(In)d(spite)f(of)g(this,)g(the)h(compile-tim)o
(e)d(e\013ort)224 2013 y(required)15 b(to)f(recompute)g(the)h(spill)e
(costs)i(after)f(eac)o(h)g(spill)f(decision)i(seems)f(prohibitiv)o(e,)
224 2063 y(so)g(some)f(inaccuracy)i(m)o(ust)e(probably)g(b)q(e)h
(tolerated)h(for)e(suc)o(h)i(arc)o(hitectures.)224 2223
y FI(10.6)66 b(Finding)25 b(out)e(more)224 2322 y FN(This)d(c)o(hapter)
g(has)g(concen)o(trated)h(on)f(just)f(one)h(of)f(the)h(metho)q(ds)f(of)
g(graph)g(coloring)224 2372 y(allo)q(cation,)11 b(Chaitin's)g(metho)q
(d)g(and)h(its)g(extensions.)18 b(It)13 b(has)f(also)f(concen)o(trated)
j(on)e(just)224 2421 y(one)j(of)e(the)h(simple)f(implem)o(en)o(tation)e
(p)q(ossibilities,)i(using)g(bit)h(v)o(ectors.)287 2475
y FG(<<)21 b(cite)g(Chaitin,)f(and)h(Briggs)g(papers)f(>>)287
2530 y(<<)h(cite)g(refs)g(for)g(priority)f(coloring)g(\(Chow)h(and)g
(Hennessy\),)f(plus)h(a)h(selection)224 2579 y(of)g(hierarchical)d
(coloring)h(papers>>)287 2633 y(<<)h(give)g(a)h(starting)e(point)h(for)
g(interprocedural)d(allocation)i(refs)h(>>)287 2688 y(<<)g(pointer)f
(to)i(Patterson's)d(work)i(on)h(estimating)d(execution)h(density)h(>>)p
eop
%%Page: 271 277
271 276 bop 224 274 a FL(10.7.)31 b(EXER)o(CISES)1025
b FN(271)224 390 y FI(10.7)66 b(Exercises)234 481 y FN(10.1)234
564 y(10.2)p eop
%%Page: 272 278
272 277 bop 224 274 a FN(272)556 b FL(CHAPTER)15 b(10.)31
b(REGISTER)13 b(ALLOCA)m(TION)p eop
%%Page: 273 279
273 278 bop 224 702 a FJ(Chapter)32 b(11)224 909 y FP(Instruction)39
b(Sc)m(heduling)914 2793 y FN(273)p eop
%%Page: 274 280
274 279 bop 224 274 a FN(274)478 b FL(CHAPTER)14 b(11.)32
b(INSTR)o(UCTION)13 b(SCHEDULING)p eop
%%Page: 275 281
275 280 bop 224 702 a FJ(Chapter)32 b(12)224 909 y FP(W)-10
b(riting)40 b(Assem)m(bly)d(Language)914 2793 y FN(275)p
eop
%%Page: 276 282
276 281 bop 224 274 a FN(276)376 b FL(CHAPTER)14 b(12.)31
b(WRITING)13 b(ASSEMBL)m(Y)i(LANGUA)o(GE)p eop
%%Page: 277 283
277 282 bop 224 703 a FJ(App)s(endix)33 b(A)224 912 y
FP(DCo)s(de)39 b(Reference)f(Man)m(ual)224 1155 y FI(A.1)67
b(Ov)n(erview)224 1248 y FK(DCo)n(de)13 b FN(is)d(a)f(stac)o(k)h(based)
g(language)e(for)h(an)g(abstract)i(stac)o(k)f(mac)o(hine)e(|)h(the)h
FK(D-Machine)q FN(.)224 1298 y(This)16 b(mac)o(hine)e(is)h(similar,)e
(in)i(general)h(terms)f(to)g(the)h(w)o(ell)f(kno)o(wn)g(P-Co)q(de[)p
FO(?)p FN(])22 b(and)15 b(U-)224 1348 y(Co)q(de[)p FO(?)p
FN(])23 b(abstract)16 b(mac)o(hines.)22 b(The)16 b(main)d
(di\013erences)18 b(are)e(due)g(to)f(the)h(lo)o(w)o(er)f(lev)o(el)g(at)
224 1398 y(whic)o(h)f(address)h(expressions)h(are)e(treated.)287
1449 y FK(DCo)n(de)k FN(has)d(three)h(comp)q(onen)o(ts:)j(in)o(terface)
c(information,)d(data)i(declarations,)g(and)224 1499
y(pro)q(cedure)22 b(headers)e(and)g(co)q(de.)35 b(The)20
b(\014rst)g(part)f(declares)i(imp)q(orts)d(and)h(exp)q(orts)i(of)224
1549 y(global)10 b(sym)o(b)q(ols.)16 b(The)c(data)g(declarations)g
(de\014ne)g(the)h(statically)e(allo)q(cated)g(data.)17
b(Then)224 1599 y(for)g(eac)o(h)h(pro)q(cedure)i(there)e(is)f(a)h
(header,)g(with)f(lo)q(cal)g(declarations,)h(and)f(the)h(co)q(de)g(of)
224 1648 y(that)d(pro)q(cedure's)i(b)q(o)q(dy)m(.)j(The)15
b(instructions)g(act)g(on)f(an)h(abstract)h(stac)o(k,)e(pushing)h(new)
224 1698 y(v)n(alues,)i(p)q(opping)e(v)n(alues,)i(and)f(op)q(erating)g
(on)g(the)h(v)n(alue\(s\))f(on)g(the)h(top)g(of)e(the)i(stac)o(k.)224
1748 y(The)f(abstract)g(mac)o(hine)e(is)g(a)h(so-called)g(\\zero)h
(address)g(mac)o(hine".)k(The)15 b(only)g(instruc-)224
1798 y(tions)c(whic)o(h)g(tak)o(e)g(memory)e(addresses)k(as)e(argumen)o
(ts)f(are)i(those)g(whic)o(h)f(push)g(addresses)224 1848
y(on)o(to)17 b(the)g(abstract)g(stac)o(k,)h(and)e(those)i(that)e(call)g
(pro)q(cedures)j(at)e(particular)f(sym)o(b)q(olic)224
1898 y(lo)q(cations.)287 1949 y(V)m(alues)h(on)f(the)i(abstract)g(stac)
o(k)g(are)f(t)o(yp)q(ed,)h(but)f(ha)o(v)o(e)g(only)g(three)h(t)o(yp)q
(es:)25 b FK(wor)n(ds,)224 1999 y(\015o)n(ats)c FN(and)c
FK(doubles)s FN(.)29 b(Ob)r(jects)19 b(of)e(an)o(y)f(primitiv)o(e)f
(mac)o(hine)h(t)o(yp)q(e)i(ma)o(y)d(b)q(e)j(pushed)g(or)224
2048 y(p)q(opp)q(ed.)h(Op)q(erations)14 b(suc)o(h)h(as)f
FG(add)e FN(exist)i(in)g(di\013eren)o(t)g(forms)e(for)i(eac)o(h)g(of)f
(these)i(t)o(yp)q(es.)224 2098 y(In)h(the)g(case)h(of)e(whole)h(n)o(um)
o(b)q(er)f(arithmetic,)f(and)i(con)o(v)o(ersions)g(b)q(et)o(w)o(een)h
(n)o(umeric)e(for-)224 2148 y(mats,)e(the)h(o)o(v)o(er\015o)o(w)g
(trapping)f(mo)q(de,)g(if)g(an)o(y)m(,)f(is)i(explicitly)f(sp)q
(eci\014ed.)287 2199 y(The)g FK(DCo)n(de)j FN(form)c(describ)q(ed)i(in)
f(this)g(app)q(endix)f(is)h(con)o(v)o(en)o(tionally)f(read)h(and)g
(writ-)224 2249 y(ten)g(to)f(an)f(ordinary)h FK(ASCII)18
b FN(\014le,)12 b(and)f(is)h(designed)h(to)e(b)q(e)i(readable)f(b)o(y)g
(h)o(umans,)e(as)i(w)o(ell)224 2299 y(as)17 b(b)o(y)g(language)f(pro)q
(cessors.)28 b(Ho)o(w)o(ev)o(er,)18 b(it)e(ma)o(y)f(b)q(e)i(also)f
(used)i(as)f(the)g(de\014nition)g(for)224 2349 y(pro)q(cedural)e(in)o
(terface,)f(as)g(sho)o(wn)g(in)f(\014gure)i(4.1.)224
2494 y FI(A.2)67 b(Lexical)24 b(issues)224 2588 y FN(In)14
b(the)f FK(ASCII)20 b FN(represen)o(tation)15 b(of)d
FK(DCo)n(de)17 b FN(line)c(breaks)h(are)g(signi\014can)o(t,)e(and)h
(mark)f(the)224 2638 y(end)18 b(of)e(v)n(arious)g(structures.)29
b(Commen)o(ts,)15 b(and)h(other)i(white)f(space)g(has)g(no)g(syn)o
(tactic)224 2688 y(signi\014cance,)11 b(and)f(ma)o(y)e(app)q(ear)i(b)q
(et)o(w)o(een)h(an)o(y)f(tok)o(ens.)17 b(The)10 b(other)h(elemen)o(ts)f
(of)f(the)i(lexis)914 2793 y(277)p eop
%%Page: 278 284
278 283 bop 224 274 a FN(278)437 b FL(APPENDIX)15 b(A.)27
b(DCODE)14 b(REFERENCE)g(MANUAL)529 422 y FE(alpha)52
b FD(=)i Fw(f)p FD(`a')13 b(..)j(`z',)c(`A')g(..)k(`Z',)d(`$',)f(`)p
FF(_)p FD(')p Fw(g)520 468 y FE(term1)53 b FD(=)h Fw(f)p
FD(`)p FF(")p FD(',)12 b FE(e)n(oln)p Fw(g)520 514 y
FE(term2)53 b FD(=)h Fw(f)p FD(`)p FF(')p FD(',)12 b
FE(e)n(oln)p Fw(g)544 559 y FE(digit)52 b FD(=)i Fw(f)p
FD(`0')13 b(..)j(`9')p Fw(g)486 605 y FE(o)n(ctDigit)52
b FD(=)i Fw(f)p FD(`0')13 b(..)j(`7')p Fw(g)479 651 y
FE(hexDigit)52 b FD(=)i FE(digit)12 b Fw([)g(f)p FD(`A')g(..)17
b(`F')12 b Fw(g)456 696 y FE(alphanum)51 b FD(=)j FE(alpha)11
b Fw([)i FE(digit)533 788 y FD(iden)o(t)51 b Fw(!)f FE(alpha)11
b(alphanum)1018 772 y Fb(\003)1049 788 y FD(.)485 833
y(litstring)52 b Fw(!)e FD(`)p FF(")p FD(')12 b FE(any)g
FD({)h FE(term1)f FD(`)p FF(")p FD(')g Fw(j)g FD(`)p
FF(')p FD(')g FE(any)f FD({)i FE(term2)g FD(`)p FF(')p
FD(')f(.)534 879 y(relop)51 b Fw(!)f FD(`)p FF(<)p FD(')12
b Fw(j)h FD(`)p FF(<=)p FD(')e Fw(j)h FD(`)p FF(>)p FD(')g
Fw(j)h FD(`)p FF(>=)p FD(')e Fw(j)h FD(`)p FF(=)p FD(')g
Fw(j)h FD(`)p FF(<>)p FD(')e Fw(j)h FD(`)p FF(#)p FD(')g(.)490
925 y(n)o(um)o(b)q(er)51 b Fw(!)f FD([`{')12 b Fw(j)h
FD(`+'])e FE(digit)991 909 y Fy(+)1029 925 y Fw(j)i FD([`{')f
Fw(j)g FD(`+'])g FE(o)n(ctDigit)1346 909 y Fy(+)1384
925 y FD(`B')845 970 y Fw(j)g FD([`{')g Fw(j)h FD(`+'])e
FE(digit)i(hexDigit)1256 955 y Fb(\003)1286 970 y FD(`H')f(.)288
1100 y FN(T)m(able)h(A.1:)18 b(Character)d(sets,)f(and)g(regular)g
(expressions)i(for)d(lexical)g(categories.)224 1235 y(are)18
b(the)g(k)o(eyw)o(ords,)h(iden)o(ti\014ers,)f(n)o(um)o(b)q(ers)f(and)h
(v)n(arious)e(other)i(mark)o(ers.)29 b(Comm)o(en)o(ts)224
1285 y(start)17 b(with)e(a)h(semicolon,)e(and)i(end)g(at)g(the)g(end)h
(of)e(a)h(line.)23 b(As)16 b(in)g(Mo)q(dula,)f(c)o(haracter)224
1335 y(case)g(is)f(alw)o(a)o(ys)f(signi\014can)o(t.)k(The)e(lexical)e
(categories)h(are)h(de\014ned)g(in)e(the)i(table)e(A.1)287
1386 y(By)i(con)o(v)o(en)o(tion,)f(commen)o(ts)f(whic)o(h)i(start)h
(with)e(the)i(exclamation)d(c)o(haracter)j FG(!)f FN(are)224
1436 y(treated)e(b)o(y)e(co)q(de)h(generators)h(as)e(pragmas.)16
b(On)11 b(bac)o(k)o(ends)h(whic)o(h)g(supp)q(ort)g(this)f(feature,)224
1486 y(the)g(remainder)e(of)h(the)g(line)g(is)g(copied)g(to)g(the)h
(output)f(\014le)g(in)g(a)f(bac)o(k)o(end-de\014ned)j(manner.)287
1537 y(Iden)o(ti\014ers)h(ob)q(ey)g(the)f(Mo)q(dula)g(con)o(v)o(en)o
(tions,)g(except)h(that)g(dollar)e(signs)h(are)h(allo)o(w)o(ed)224
1587 y(as)h(v)n(alid)f(c)o(haracters,)i(and)f(lo)o(wline)e
(\(underscore\))17 b(c)o(haracters)e(ma)o(y)d(b)q(e)j(freely)f(used.)19
b(By)224 1636 y(con)o(v)o(en)o(tion,)d(fron)o(tends)h(will)d(prep)q
(end)j(an)f(underscore)i(to)e(all)f(user-de\014ned)j(iden)o(ti\014ers)
224 1686 y(from)c(the)i(source)h(co)q(de.)23 b(In)o(ternally)15
b(generated)i(iden)o(ti\014er)e(names)g(whic)o(h)g(do)g(not)g(ha)o(v)o
(e)224 1736 y(an)c(underscore)i(can)e(therefore)i(not)e(collide)f(with)
h(an)o(y)f(user-de\014ned)j(external)f(name.)k(F)m(or)224
1786 y(systems)c(in)e(whic)o(h)h(the)h(link)o(er)f(con)o(v)o(en)o
(tions)g(do)g(not)g(use)h(the)f(prep)q(ended)i(underscore)h(the)224
1836 y(bac)o(k)o(end)f(m)o(ust)d(strip)i(this)g(c)o(haracter)h(from)d
(iden)o(ti\014ers,)j(b)q(efore)f(emitting)e(the)j(iden)o(ti\014ers)224
1885 y(to)h(the)h(assem)o(bler.)287 1937 y(Lab)q(els)f(are)g(lexically)
e(the)j(same)e(as)h(iden)o(ti\014ers,)g(and)g(de\014ning)f(o)q
(ccurrences)k(are)e(fol-)224 1986 y(lo)o(w)o(ed)f(b)o(y)g(a)g(colon)f
(c)o(haracter.)21 b(By)14 b(con)o(v)o(en)o(tion,)g(lo)q(op)f(header)i
(lab)q(els)f(are)h(mark)o(ed)e(with)224 2036 y(the)f(directiv)o(e)f
FK(.LOOP)k FN(in)10 b(fron)o(t)g(of)g(the)i(lab)q(el.)k(Similarly)l(,)8
b(the)j(ends)h(of)e(lo)q(ops)g(are)h(mark)o(ed)224 2086
y(with)17 b(an)g FK(.ENDLOOP)k FN(directiv)o(e.)28 b(Simple)15
b(bac)o(k)o(ends)i(ma)o(y)e(rely)i(on)g(this)g(con)o(v)o(en)o(tion,)224
2136 y(see)f(section)e(A.6.)287 2187 y(Literal)c(strings)g(ha)o(v)o(e)h
(the)g(same)e(format)g(as)h(in)g(Mo)q(dula,)g(and)g(cannot)h(extend)g
(b)q(ey)o(ond)224 2237 y(a)h(line)f(end.)17 b(They)12
b(are)g(enclosed)h(in)e(matc)o(hing)e(quote)j(c)o(haracters,)h(whic)o
(h)f(ma)o(y)d(b)q(e)j(either)224 2286 y(single)i(quotes)g(`)p
FG(')p FN(')f(or)h(double)g(quotes)g(`)p FG(")p FN('.)287
2338 y(Some)f(instructions)j(ha)o(v)o(e)e FK(r)n(elop)j
FN(or)e FK(mo)n(de)j FN(argumen)o(ts.)h(As)d(in)e(Mo)q(dula,)g(the)h
(relops)224 2387 y(are)f(\\)p FG(<,)21 b(<=,)g(>=,)h(>,)f(=,)g(<>,)g(#)
p FN(".)d(F)m(or)13 b(whole)g(n)o(um)o(b)q(er)f(arithmetic)g(op)q
(erations,)h(and)224 2437 y(for)e(n)o(umeric)f(con)o(v)o(ersions,)h
(the)h(mo)q(de)d(ma)o(y)g(b)q(e)j FK(noT)m(r)n(ap,)g(cr)n(dOver,)f
(intOver)k FN(designating)224 2487 y(no)k(o)o(v)o(er\015o)o(w)f(trap,)i
(unsigned,)f(or)g(signed)g(trapping)f(resp)q(ectiv)o(ely)m(.)33
b(When)19 b(the)g(mo)q(de)224 2537 y(argumen)o(t)14 b(is)h(optional,)f
(the)h(default)g(is)g(alw)o(a)o(ys)f FK(noT)m(r)n(ap)p
FN(.)21 b(In)15 b(the)g(case)h(of)f(division)e(and)224
2587 y(remainder)g(op)q(erations,)g(the)g(trapping)g(mo)q(de)e(is)i
(mandatory)m(,)e(as)i(the)g(signedness)h(of)f(the)224
2636 y(op)q(erators)i(m)o(ust)e(b)q(e)i(kno)o(wn)e(in)g(order)i(to)f
(de\014ne)h(the)f(seman)o(tics)g(of)f(the)h(op)q(eration.)287
2688 y(Num)o(b)q(ers)9 b(are)h(optionally)d(signed,)j(and)f(ob)q(ey)g
(Mo)q(dula-2)g(lexical)f(con)o(v)o(en)o(tions.)16 b(Num-)p
eop
%%Page: 279 285
279 284 bop 224 274 a FL(A.3.)32 b(FILE)14 b(SYNT)m(AX)g(AND)g
(SEMANTICS)616 b FN(279)224 390 y(b)q(ers)15 b(m)o(ust)c(b)q(egin)i
(with)g(a)f(decimal)f(digit)h(after)h(the)h(optional)d(sign.)18
b(Hexadecimal)11 b(n)o(um-)224 440 y(b)q(ers)k(end)g(with)e(the)i(c)o
(haracter)g(\\H",)e(while)g(o)q(ctal)g(n)o(um)o(b)q(ers)h(end)g(with)g
(a)f(\\B".)g(Decimal)224 490 y(n)o(um)o(b)q(ers)h(require)h(no)e
(su\016x.)287 544 y(Starting)f(with)g(v)o(ersion)h(2.0)e(it)h(is)h(p)q
(ossible)g(to)f(include)h(\014les)g(v)o(erbatim)e(in)h(the)h
FK(DCo)n(de)224 594 y FN(\014le.)18 b(The)d(format)d(is)i(|)417
647 y FG(#include)f FK(litstring)287 701 y FN(The)h(hash)h(c)o
(haracter)h(m)o(ust)d(b)q(e)i(the)g(\014rst)g(c)o(haracter)g(in)f(the)h
(line,)e(and)i(the)f(\014lename)224 751 y(m)o(ust)d(app)q(ear)h(as)g(a)
f(literal)g(string,)g(that)h(is,)f(in)g(single)h(or)f(double)h(quotes.)
18 b(Only)11 b(one)h(lev)o(el)224 800 y(of)i(inclusion)f(is)h(p)q
(ermitted.)224 937 y FH(A.2.1)56 b(Reserv)n(ed)17 b(w)n(ords)j(and)f
(predeclared)e(iden)n(ti\014ers)224 1021 y FN(The)k(k)o(eyw)o(ords)g
(of)f FK(DCo)n(de)k FN(all)c(b)q(egin)g(with)g(a)h(p)q(erio)q(d)g(`.')
37 b(and)20 b(use)h(all)f(upp)q(er)h(case)224 1070 y(c)o(haracters.)f
(The)15 b(k)o(eyw)o(ords)f(are|)249 1213 y Fx(.ADRS)106
b(.ALIGN)144 b(.ASCI)q(I)134 b(.ASCI)q(IZ)h(.ASSEMBL)m(Y)50
b(.BITS16)249 1252 y(.BITS32)86 b(.BYTE)159 b(.CHECK)105
b(.CONST)132 b(.COPY)140 b(.D)o(A)m(T)m(A)249 1291 y(.DISPLA)m(Y)50
b(.DOUBLE)108 b(.ENDLOOP)55 b(.ENDP)154 b(.ENTR)m(Y)118
b(.EX)o(CEPT)249 1331 y(.EXP)m(AND)55 b(.EXPOR)m(T)110
b(.FILE)150 b(.IMPOR)m(T)111 b(.JUMPT)m(AB)69 b(.LOCAL)249
1370 y(.LOOP)105 b(.NODISPLA)m(Y)51 b(.NOCHECK)h(.OPENCOPY)g(.PR)o(OC)
141 b(.RETCUT)249 1410 y(.RETR)m(Y)81 b(.SIZE)180 b(.TITLE)123
b(.TRAP)154 b(.V)l(AR)168 b(.W)o(ORD)249 1489 y(crdOv)o(er)90
b(fpP)o(aram)135 b(in)o(tOv)o(er)124 b(noT)m(rap)287
1590 y FN(The)14 b(iden)o(ti\014ers)g(in)g(the)g(last)f(line)h(in)f
(the)h(table)g(are)g(predeclared)h(iden)o(ti\014ers.)k(These)224
1640 y(are)13 b(con)o(text)f(sensitiv)o(e)g(marks)f(rather)h(than)g
(reserv)o(ed)i(w)o(ords.)j(Ho)o(w)o(ev)o(er,)12 b(b)q(ecause)i(of)d
(the)224 1690 y(underscore)19 b(con)o(v)o(en)o(tion)c(for)h
(user-de\014ned)i(iden)o(ti\014ers)f(they)g(should)e(nev)o(er)i(clash)g
(with)224 1740 y(other)e(iden)o(ti\014ers.)224 1897 y
FI(A.3)67 b(File)23 b(syn)n(tax)h(and)f(seman)n(tics)224
1995 y FN(The)13 b(con)o(v)o(en)o(tional)e(\014lename)g(extension)i
(used)g(for)e FK(ASCII)19 b(DCo)n(de)c FN(\014les)e(is)f(\\)p
FG(.dcf)p FN(".)k(The)224 2045 y(format)c(of)i(these)h(\014les)f(is)g
(describ)q(ed)i(b)o(y)d(the)i(extended)g FK(bnf)23 b
FN(in)14 b(the)g(table)g(A.2.)224 2181 y FH(A.3.1)56
b(Primitiv)n(e)16 b(data)j(t)n(yp)r(es)224 2265 y FK(DCo)n(de)h
FN(kno)o(ws)c(of)g(nine)g(di\013eren)o(t)h(primitiv)o(e)d(data)i(t)o
(yp)q(es)1171 2250 y Fz(1)1191 2265 y FN(.)25 b(Some)15
b(of)g(these)j(are)f(abso-)224 2315 y(lutely)d(sized,)h(so)g(that)f(it)
g(is)g(the)h(resp)q(onsibilit)o(y)f(of)g(ev)o(ery)h(fron)o(tend)g(to)f
(map)f(the)i(logical)224 2365 y(t)o(yp)q(es)g(of)e(its)h(source)i
(language)c(in)o(to)i(the)g(t)o(yp)q(es)h(supp)q(orted)g(b)o(y)f
FK(DCo)n(de)s FN(.)287 2418 y(The)f(t)o(yp)q(es)g(are)g
FK(unsigne)n(d)h(byte)s FN(,)f FK(signe)n(d)g(byte)s
FN(,)g FK(unsigne)n(d)h(16-bit)g(wor)n(d)t FN(,)e FK(signe)n(d)h
(16-bit)224 2468 y(wor)n(d)t FN(,)k FK(unsigne)n(d)i(32-bit)e(wor)n(d)t
FN(,)g FK(signe)n(d)h(32-bit)g(wor)n(d)t FN(,)f FK(wor)n(d)t
FN(,)g FK(\015o)n(at)t FN(,)g(and)g FK(double)s FN(.)28
b(The)224 2518 y FK(wor)n(d)16 b FN(t)o(yp)q(e)11 b(is)h(the)g
(\\natural")e(w)o(ord)i(size)g(of)f(the)h(mac)o(hine,)e(while)h(other)h
(\014xed)g(t)o(yp)q(es)g(ma)o(y)224 2568 y(b)q(e)j(shorter.)p
224 2610 577 2 v 271 2636 a Fy(1)288 2648 y Fx(Later)g(revisions)f(of)h
(the)g Fu(DCo)n(de)k Fx(form)c(extend)f(the)h(instruction)e(set)i(to)g
(include)f(64-bit)g(in)o(teger)224 2688 y(op)q(erands.)f(The)f(latest)e
(revision)g(is)h(a)o(v)n(ailable)e(b)o(y)i(ftp[)p Fi(?)p
Fx(].)p eop
%%Page: 280 286
280 285 bop 224 274 a FN(280)437 b FL(APPENDIX)15 b(A.)27
b(DCODE)14 b(REFERENCE)g(MANUAL)396 639 y Fx(\014le)49
b Fa(!)h Fx(Title)11 b(Declarations)e(eofSy)m(.)367 679
y(Title)49 b Fa(!)h Fx(.TITLE)12 b Fu(ident)k Fx(eolnSy)9
b(.FILE)j Fu(litstring)f Fx(eolnSy)m(.)249 718 y(Declarations)47
b Fa(!)j(f)p Fx(Exp)q(orts)10 b Fa(j)h Fx(Imp)q(orts)p
Fa(g)e(f)p Fx(DataOrPro)q(c)p Fa(g)p Fx(.)319 757 y(Exp)q(orts)48
b Fa(!)i Fx(.EXPOR)m(T)13 b(NameList)d(eolnSy)m(.)319
797 y(Imp)q(orts)48 b Fa(!)i Fx(.IMPOR)m(T)13 b(NameList)d(eolnSy)m(.)
293 836 y(NameList)48 b Fa(!)i Fu(ident)12 b Fx([':')j
Fu(numb)n(er)t Fx(])e Fa(f)p Fx(`,')d([eolnSy])g Fu(ident)15
b Fx([':')g Fu(numb)n(er)t Fx(])p Fa(g)p Fx(.)252 876
y(DataOrPro)q(c)48 b Fa(!)i Fx(.CONST)13 b([)p Fu(numb)n(er)t
Fx(])f(eolnSy)e Fa(f)p Fx(Lab)q(el)g Fa(f)p Fx(ConstDec)p
Fa(gg)504 915 y(j)62 b Fx(.D)o(A)m(T)m(A)13 b([)p Fu(numb)n(er)t
Fx(])f(eolnSy)e Fa(f)p Fx(Lab)q(el)g Fa(f)p Fx(ConstDec)p
Fa(gg)504 955 y(j)62 b Fx(.V)l(AR)13 b(eolnSy)c Fa(f)p
Fx(Lab)q(el)h(V)m(arDec)p Fa(g)504 994 y(j)62 b Fx([.LOCAL])13
b(.PR)o(OC)f(HeaderInfo)d(.ENTR)m(Y)k(eolnSy)658 1033
y Fa(f)p Fx(Statemen)o(t)p Fa(g)8 b(f)p Fx(JumpT)m(able)p
Fa(g)h Fx(.ENDP)j(eolnSy)m(.)328 1073 y(V)m(arDec)49
b Fa(!)h Fx(.BYTE)12 b Fu(numb)n(er)17 b Fx([.ENTR)m(Y)c
Fu(numb)n(er)p Fx(])g(eolnSy)504 1112 y Fa(j)62 b Fx(.BITS16)11
b Fu(numb)n(er)16 b Fx([.ENTR)m(Y)d Fu(numb)n(er)p Fx(])g(eolnSy)504
1152 y Fa(j)62 b Fx(.BITS32)11 b Fu(numb)n(er)16 b Fx([.ENTR)m(Y)d
Fu(numb)n(er)p Fx(])g(eolnSy)504 1191 y Fa(j)62 b Fx(.W)o(ORD)12
b Fu(numb)n(er)17 b Fx([.ENTR)m(Y)c Fu(numb)n(er)p Fx(])f(eolnSy)504
1231 y Fa(j)62 b Fx(.DOUBLE)12 b Fu(numb)n(er)17 b Fx([.ENTR)m(Y)c
Fu(numb)n(er)p Fx(])g(eolnSy)m(.)292 1270 y(ConstDec)49
b Fa(!)h Fx(.BYTE)12 b Fu(numb)n(er)i Fa(f)p Fx(`,')c
Fu(numb)n(er)t Fa(g)j Fx(eolnSy)504 1309 y Fa(j)62 b
Fx(.BITS16)11 b Fu(numb)n(er)16 b Fa(f)p Fx(`,')11 b
Fu(numb)n(er)t Fa(g)h Fx(eolnSy)504 1349 y Fa(j)62 b
Fx(.BITS32)11 b Fu(numb)n(er)16 b Fa(f)p Fx(`,')11 b
Fu(numb)n(er)t Fa(g)h Fx(eolnSy)504 1388 y Fa(j)62 b
Fx(.W)o(ORD)12 b Fu(numb)n(er)17 b Fa(f)p Fx(`,')11 b
Fu(numb)n(er)t Fa(g)h Fx(eolnSy)504 1428 y Fa(j)62 b
Fx(.ASCI)q(I)12 b Fu(litstring)i Fx(eolnSy)504 1467 y
Fa(j)62 b Fx(.ASCI)q(IZ)11 b Fu(litstring)j Fx(eolnSy)504
1507 y Fa(j)62 b Fx(.ADRS)12 b Fu(ident)j Fx([)p Fu(numb)n(er)t
Fx(])d(eolnSy)m(.)272 1546 y(HeaderInfo)47 b Fa(!)j Fx(iden)o(t)10
b(\\\(")h(Arg)h Fa(f)p Fx(`,')e(Arg)p Fa(g)i Fx(\\\)"eolnSy)c
Fa(f)p Fx(Cop)o(yInfo)p Fa(g)i(f)p Fx(Lo)q(calInfo)p
Fa(g)o Fx(.)383 1586 y(Arg)50 b Fa(!)g Fx(.NODISPLA)m(Y)13
b Fa(j)e Fx(.DISPLA)m(Y)h(:)g Fu(numb)n(er)k Fa(j)c Fx(.NOCHECK)i
Fa(j)e Fx(.CHECK)504 1625 y Fa(j)62 b Fx(.SIZE)10 b(=)j
Fu(numb)n(er)j Fa(j)c Fx(.ASSEMBL)m(Y)g(=)g Fu(numb)n(er)h
Fa(j)f Fx(.RETCUT)h(=)f Fu(numb)n(er)p Fx(.)297 1664
y(Lo)q(calInfo)47 b Fa(!)j Fx(.LOCAL)13 b Fu(ident)f(numb)n(er)h
Fx(`,')e Fu(numb)n(er)658 1704 y Fx(\\\(")g Fu(numb)n(er)i
Fx(`,')e Fu(numb)n(er)i Fx(`,')f Fu(numb)n(er)k Fx(\\\)")11
b([\\fpP)o(aram"])e([)p Fu(litstring)s Fx(])i(eolnSy)m(.)300
1743 y(Cop)o(yInfo)48 b Fa(!)i Fx(.COPY)13 b Fu(numb)n(er)g
Fx(`,')e Fu(numb)n(er)17 b Fx(.SIZE)10 b Fu(numb)n(er)17
b Fx([Align])11 b(eolnSy)504 1783 y Fa(j)62 b Fx(.EXP)m(AND)13
b([`\(')p Fu(numb)n(er)t Fx(`\)'])e Fu(numb)n(er)i Fx(`,')e
Fu(numb)n(er)17 b Fx(.SIZE)10 b Fu(numb)n(er)17 b Fx([Align])10
b(eolnSy)504 1822 y Fa(j)62 b Fx(.OPENCOPY)14 b([`\(')p
Fu(numb)n(er)t Fx(`\)'])d Fu(numb)n(er)16 b Fx(.SIZE)11
b Fu(numb)n(er)16 b Fx([Align])11 b(eolnSy)269 1862 y(JumpT)m(able)48
b Fa(!)i Fx(.JUMPT)m(AB)13 b(Lab)q(el)e(eolnSy)f Fa(f)p
Fx(IdList)g(eolnSy)p Fa(g)p Fx(.)349 1901 y(IdList)49
b Fa(!)h Fu(ident)12 b Fa(f)p Fx(`,')f([eolnSy])e Fu(ident)s
Fa(g)p Fx(.)283 1940 y(Statemen)o(t)47 b Fa(!)j Fx([Lab)q(elT)m(ag])10
b(Lab)q(el)g([OpCo)q(de)h([OpArg]])h(eolnSy)504 1980
y Fa(j)62 b Fx(OpCo)q(de)11 b([OpArg])g(eolnSy)504 2019
y Fa(j)62 b Fx(Directiv)o(e)10 b(eolnSy)m(.)298 2059
y(Lab)q(elT)m(ag)48 b Fa(!)i Fx(.EX)o(CEPT)13 b Fa(j)f
Fx(.LOOP)g Fa(j)g Fx(.RETR)m(Y)g(.)302 2098 y(Directiv)o(e)48
b Fa(!)i Fx(.TRAP)12 b Fu(ident`,')h(ident)g Fa(f)p Fx(`,')d(OpArg)p
Fa(g)504 2138 y(j)62 b Fx(.ENDLOOP)13 b([)p Fu(numb)n(er)t
Fx(])f(.)355 2177 y(Lab)q(el)49 b Fa(!)h Fu(ident)15
b Fx(`:')g(.)336 2217 y(OpArg)50 b Fa(!)g Fu(numb)n(er)17
b Fa(f)p Fx(`,')11 b Fu(numb)n(er)t Fa(g)h Fx([\\fpP)o(aram"])504
2256 y Fa(j)62 b Fu(mo)n(de)13 b Fa(j)f Fu(r)n(elop)504
2295 y Fa(j)62 b Fu(ident)12 b Fx([)p Fu(numb)n(er)t
Fx(].)358 2335 y(Align)49 b Fa(!)h Fx(.ALIGN)12 b Fu(numb)n(er)17
b Fx(.)519 2463 y FN(T)m(able)c(A.2:)k(The)e(extended)g(bnf)f(for)f
(the)i(input)e(\014le.)p eop
%%Page: 281 287
281 286 bop 224 274 a FL(A.3.)32 b(FILE)14 b(SYNT)m(AX)g(AND)g
(SEMANTICS)616 b FN(281)224 390 y FH(A.3.2)56 b(The)18
b(title)224 470 y FN(The)13 b(title)e(and)h(\014le)g(declarations)g(sp)
q(ecify)g(the)h(name)e(of)g(the)h(mo)q(dule)f(and)h(the)g(source)h
(\014le)224 519 y(name)g(from)f(whic)o(h)h(it)h(is)f(deriv)o(ed.)19
b(The)14 b(title)f(declaration)g(has)h(no)g(particular)f(function,)224
569 y(except)j(for)e(iden)o(ti\014cation)f(purp)q(oses)j(for)e(the)g(h)
o(uman)f(reader.)20 b(In)14 b(con)o(trast,)h(the)f FK(.FILE)224
619 y FN(declaration)g(is)g(assumed)g(to)g(b)q(e)h(the)g(name)e(of)g
(the)i(source)g(\014le,)f(and)g(should)g(b)q(e)h(written)224
669 y(to)f(the)h(ob)r(ject)f(\014le)g(b)o(y)g(all)f(bac)o(k)o(ends,)h
(for)f(the)i(b)q(ene\014t)g(of)e(debugger)i(to)q(ols.)224
792 y FH(A.3.3)56 b(Declarations)224 872 y FO(Imp)q(orts)15
b(and)g(exp)q(orts)224 951 y FN(The)k(declarations)g(part)f(of)g(the)h
(\014le)f(b)q(egins)h(with)f(imp)q(orts)f(and)i(exp)q(orts.)32
b(Exp)q(orted)224 1001 y(names)10 b(are)h(visible)f(to)h(the)g(link)o
(er,)f(while)g(imp)q(orted)g(names)f(are)i(exp)q(ected)i(to)e(b)q(e)g
(resolv)o(ed)224 1051 y(to)j(lo)q(cations)f(external)i(to)f(the)g(mo)q
(dule.)351 1135 y FD(Declarations)52 b Fw(!)f(f)p FD(Exp)q(orts)14
b Fw(j)e FD(Imp)q(orts)p Fw(g)i(f)p FD(DataOrPro)q(c)p
Fw(g)p FD(.)427 1181 y(Exp)q(orts)50 b Fw(!)h FD(.EXPOR)m(T)12
b(NameList)h(eolnSy)m(.)427 1226 y(Imp)q(orts)50 b Fw(!)h
FD(.IMPOR)m(T)12 b(NameList)i(eolnSy)m(.)398 1272 y(NameList)50
b Fw(!)h FE(ident)11 b FD([':')16 b FE(numb)n(er)t FD(])11
b Fw(f)p FD(`,')h([eolnSy])i FE(ident)h FD([':')g FE(numb)n(er)t
FD(])p Fw(g)p FD(.)224 1366 y FN(The)c(elemen)o(ts)f(of)f(name)g(lists)
h(are)g(comma)d(separated,)k(and)f(ma)o(y)e(con)o(tain)i(em)o(b)q
(edded)g(end)224 1416 y(of)i(lines.)18 b(The)13 b(optional)e(colon)h
(and)g(n)o(um)o(b)q(er)g(giv)o(e)g(the)h(storage)g(size)h(of)e(the)h
(imp)q(orted)e(or)224 1465 y(exp)q(orted)k(ob)r(ject.)k(A)13
b(zero)h(n)o(um)o(b)q(er)f(has)h(the)g(default)f(seman)o(tics.)k(Kno)o
(wing)c(the)h(size)g(of)224 1515 y(imp)q(orted)f(ob)r(jects)j(is)e(imp)
q(ortan)o(t)e(for)i(mac)o(hines)f(with)g(con)o(v)o(en)o(tions)h(whic)o
(h)g(place)h(small)224 1565 y(ob)r(jects)g(in)f(a)f(separate)j(data)d
(segmen)o(t.)224 1680 y FO(Data)j(declarations)224 1760
y FN(V)m(ariables)d(and)g(constan)o(t)h(declarations)g(app)q(ear)g
(after)f(imp)q(orts)g(and)g(exp)q(orts,)h(and)f(ma)o(y)224
1809 y(alternate)i(freely)f(with)f(pro)q(cedure)j(declarations.)287
1861 y(Data)g(ma)o(y)e(b)q(e)k(declared)f(in)g(three)g(w)o(a)o(ys.)27
b(Constan)o(t)16 b(declarations)h(declare)h(v)n(alues)224
1910 y(whic)o(h,)10 b(where)i(p)q(ossible,)e(will)e(b)q(e)j(placed)f(b)
o(y)g(bac)o(k)o(ends)g(in)g(a)f(readonly)h(memory)d(segmen)o(t.)224
1960 y(Data)17 b(declarations)g(using)f(the)i FK(.D)o(A)m(T)m(A)e
FN(k)o(eyw)o(ord)h(are)g(initialized)f(v)n(ariables,)g(and)h(will)224
2010 y(b)q(e)c(placed)e(in)g(a)h(read-write)g(memory)d(segmen)o(t.)17
b(Finally)10 b(v)n(ariable)g(declarations)i(request)224
2060 y(uninitialized)h(space,)h(con)o(v)o(en)o(tionally)f(in)g(the)i
FK(BSS)k FN(memory)12 b(segmen)o(t.)379 2152 y FD(DataOrPro)q(c)51
b Fw(!)f FD(.CONST)12 b([)p FE(numb)n(er)t FD(])f(eolnSy)k
Fw(f)p FD(Lab)q(el)f Fw(f)p FD(ConstDec)p Fw(gg)649 2198
y(j)63 b FD(.D)o(A)m(T)m(A)12 b([)p FE(numb)n(er)t FD(])f(eolnSy)k
Fw(f)p FD(Lab)q(el)f Fw(f)p FD(ConstDec)p Fw(gg)649 2244
y(j)63 b FD(.V)l(AR)12 b(eolnSy)j Fw(f)p FD(Lab)q(el)f(V)m(arDec)p
Fw(g)287 2337 y FN(Constan)o(t)d(and)f(initialized)g(data)g
(declarations)h(ma)o(y)e(b)q(e)j(sp)q(eci\014ed)g(in)f(an)o(y)f(con)o
(v)o(enien)o(t)224 2387 y(w)o(a)o(y)m(.)32 b(Bac)o(k)o(ends)19
b(usually)f(ensure)i(that)f(lab)q(els)g(are)g(w)o(ord-aligned,)f(so)h
(that)f(the)i(data)224 2437 y(ma)o(y)f(b)q(e)h(sp)q(eci\014ed)i(b)o
(yte-b)o(y-b)o(yte,)g(or)e(in)f(larger)h(units.)37 b(There)22
b(is)e(no)f(pro)o(vision)h(for)224 2487 y(handling)d(\015oating)g(p)q
(oin)o(t)g(represen)o(tations,)j(so)d(that)h(fron)o(tends)g(m)o(ust)f
(determine)h(the)224 2537 y(represen)o(tation)e(of)d(\015oating)g(p)q
(oin)o(t)g(constan)o(ts.)287 2588 y(Note)e(that)g(m)o(ultiple)e(lab)q
(els)h(ma)o(y)f(b)q(e)j(in)o(tersp)q(ersed)h(within)d(declarations)h
(of)g(constan)o(t)224 2638 y(or)16 b(initialized)e(data)h(blo)q(c)o
(ks.)22 b(The)16 b(optional)e(n)o(um)o(b)q(er,)g(if)h(presen)o(t,)i
(giv)o(es)e(the)h(total)f(size)224 2688 y(of)f(the)g(follo)o(wing)d
(blo)q(c)o(k.)p eop
%%Page: 282 288
282 287 bop 224 274 a FN(282)437 b FL(APPENDIX)15 b(A.)27
b(DCODE)14 b(REFERENCE)g(MANUAL)483 381 y FD(ConstDec)50
b Fw(!)g FD(.BYTE)13 b FE(numb)n(er)f Fw(f)p FD(`,')g
FE(numb)n(er)t Fw(g)g FD(eolnSy)708 427 y Fw(j)63 b FD(.BITS16)13
b FE(numb)n(er)j Fw(f)p FD(`,')c FE(numb)n(er)t Fw(g)g
FD(eolnSy)708 472 y Fw(j)63 b FD(.BITS32)13 b FE(numb)n(er)j
Fw(f)p FD(`,')c FE(numb)n(er)t Fw(g)g FD(eolnSy)708 518
y Fw(j)63 b FD(.W)o(ORD)14 b FE(numb)n(er)i Fw(f)p FD(`,')c
FE(numb)n(er)t Fw(g)g FD(eolnSy)708 564 y Fw(j)63 b FD(.ASCI)q(I)13
b FE(litstring)h FD(eolnSy)708 609 y Fw(j)63 b FD(.ASCI)q(IZ)13
b FE(litstring)h FD(eolnSy)708 655 y Fw(j)63 b FD(.ADRS)14
b FE(ident)g FD([)p FE(numb)n(er)t FD(])d(eolnSy)m(.)224
749 y FN(The)k FK(.ADRS)20 b FN(declaration)15 b(declares)g(an)g(sym)o
(b)q(olic)d(address)k(datum.)j(The)c(actual)f(v)n(alue)224
798 y(will)f(b)q(e)i(\014lled)f(in)g(after)g(compilation,)d(probably)j
(b)o(y)g(the)h(link)o(er.)k(The)14 b(optional)f FK(numb)n(er)224
848 y FN(\014eld)18 b(allo)o(ws)f(sym)o(b)q(olic)f(addresses)k(whic)o
(h)d(are)i(at)e(a)h(\014xed)g(o\013set)h(from)d(some)h(lab)q(elled)224
898 y(lo)q(cation.)287 949 y(The)j FK(.ASCII)27 b FN(declaration)20
b(declares)i(an)e(initialized)f(string,)i(while)f(the)h
FK(.ASCIIZ)224 999 y FN(declaration)12 b(app)q(ends)g(a)f(n)o(ul)g
(\(zero\))i(c)o(haracter)g(to)e(the)h(literal)f(string)g(whic)o(h)h(is)
f(sp)q(eci\014ed.)287 1050 y(V)m(ariable)k(declarations)i(do)g(not)g
(de\014ne)g(the)h(v)n(alues)e(of)h(the)g(b)o(ytes)h(or)e(w)o(ords)h
(whic)o(h)224 1100 y(are)g(sp)q(eci\014ed,)g(but)f(rather)g(sp)q(ecify)
h(the)f FK(numb)n(er)k FN(of)c(units)f(whic)o(h)h(are)g(required.)25
b(Note)224 1150 y(that)12 b(a)g(lab)q(el)g(is)g(mandatory)e(with)i(eac)
o(h)g(v)n(ariable)f(declarations,)h(but)g(m)o(ultiple)e(v)n(ariables)
224 1200 y(ma)o(y)i(b)q(e)j(declared)g(follo)o(wing)c(the)j
FK(.V)l(AR)h FN(k)o(eyw)o(ord.)433 1292 y FD(V)m(arDec)50
b Fw(!)g FD(.BYTE)12 b FE(numb)n(er)k FD([.ENTR)m(Y)c
FE(numb)n(er)p FD(])f(eolnSy)620 1338 y Fw(j)63 b FD(.BITS16)13
b FE(numb)n(er)j FD([.ENTR)m(Y)p FE(numb)n(er)p FD(])10
b(eolnSy)620 1384 y Fw(j)63 b FD(.BITS32)13 b FE(numb)n(er)j
FD([.ENTR)m(Y)p FE(numb)n(er)p FD(])10 b(eolnSy)620 1429
y Fw(j)63 b FD(.W)o(ORD)13 b FE(numb)n(er)j FD([.ENTR)m(Y)c
FE(numb)n(er)p FD(])f(eolnSy)620 1475 y Fw(j)63 b FD(.DOUBLE)13
b FE(numb)n(er)j FD([.ENTR)m(Y)11 b FE(numb)n(er)p FD(])h(eolnSy)m(.)
287 1569 y FN(V)m(ariable)j(declarations)i(guaran)o(tee)f(that)h(a)f
(con)o(tiguous)g(region)g(of)g(memory)e(of)i(the)224
1618 y(sp)q(eci\014ed)h(size)e(will)e(b)q(e)i(allo)q(cated)f(in)g(the)h
(one)g(memory)d(segmen)o(t.)20 b(Ho)o(w)o(ev)o(er,)15
b(bac)o(k)o(ends)224 1668 y(need)d(not)f(guaran)o(tee)g(that)g(v)n
(ariables)f(will)f(b)q(e)j(set)f(out)g(in)g(memory)d(in)i(the)i(order)f
(in)f(whic)o(h)224 1718 y(they)15 b(are)g(declared)g(in)f(the)h
FK(DCo)n(de)s FN(.)k(Th)o(us,)c(if)e(it)h(is)g(required)h(that)g(the)f
(lab)q(el)g(b)q(e)h(placed)224 1768 y(in)g(the)g(in)o(terior)g(of)f(a)h
(region)g(of)f(memory)m(,)e(then)j(the)h(optional)d(form)h(with)g(an)h
FK(.ENTR)m(Y)224 1818 y FN(declaration)e(m)o(ust)g(b)q(e)h(used.)k(The)
c(en)o(try)g(declarations)g(sp)q(eci\014es)h(the)f(distance)g(in)f(b)o
(ytes)224 1867 y(from)g(the)h(start)h(of)e(the)h(con)o(tiguous)g
(region)g(at)f(whic)o(h)h(the)h(lab)q(el)e(will)f(b)q(e)j(placed.)224
2012 y FI(A.4)67 b(Pro)r(cedure)22 b(declarations)224
2106 y FN(Pro)q(cedure)d(declarations)d(consist)g(of)g(the)g(pro)q
(cedure)i(header,)f(lo)q(cal)f(declarations,)g(the)224
2155 y(pro)q(cedure)g(b)q(o)q(dy)m(,)d(follo)o(w)o(ed)f(p)q(erhaps)i(b)
o(y)g(jump)d(tables)j(for)g(case)g(or)g(switc)o(h)f(statemen)o(ts.)329
2248 y FD(DataOrPro)q(c)51 b Fw(!)h FD(...)c Fw(j)13
b FD([.LOCAL])e(.PR)o(OC)h(HeaderInfo)i(.ENTR)m(Y)e(eolnSy)846
2294 y Fw(f)p FD(Statemen)o(t)p Fw(g)i(f)p FD(JumpT)m(able)p
Fw(g)g FD(.ENDP)f(eolnSy)m(.)287 2387 y FN(Pro)q(cedure)f(declarations)
e(b)q(egin)h(with)f(the)h(mark)o(er)e(k)o(eyw)o(ord)h
FK(.PR)o(OC)c FN(,)k(and)g(end)h(with)224 2437 y(the)i(k)o(eyw)o(ord)f
FK(.ENDP)p FN(.)g(The)g(header)h(has)f(the)h(declared)g(name)d(of)i
(the)g(pro)q(cedure)i(\(whic)o(h)224 2487 y(ma)o(y)e(or)i(ma)o(y)e(not)
i(corresp)q(ond)h(to)f(an)g(exp)q(orted)h(name\).)287
2538 y(The)e FK(.PR)o(OC)19 b FN(k)o(eyw)o(ord)14 b(ma)o(y)d(b)q(e)j
(preceded)i(b)o(y)d(the)h(optional)d(k)o(eyw)o(ord)j
FK(.LOCAL)p FN(.)e(If)224 2588 y(presen)o(t,)i(this)f(mark)o(er)e
(states)j(that)e(the)h(pro)q(cedure)i(is)d(neither)h(exp)q(orted)h(or)e
(assigned)h(as)224 2638 y(a)h(pro)q(cedure)i(v)n(ariable.)i(F)m(or)c
(some)f(mac)o(hine)g(arc)o(hitectures)k(faster)e(calls)e(ma)o(y)g(b)q
(e)h(made)224 2688 y(to)g(suc)o(h)h(pro)q(cedures.)p
eop
%%Page: 283 289
283 288 bop 224 274 a FL(A.4.)32 b(PR)o(OCEDURE)13 b(DECLARA)m(TIONS)
651 b FN(283)224 390 y FH(A.4.1)56 b(Pro)r(cedure)18
b(headers)278 467 y FD(HeaderInfo)51 b Fw(!)f FD(iden)o(t)14
b(\\\(")f(Arg)g Fw(f)p FD(`,')f(Arg)p Fw(g)h FD(\\\)")g(eolnSy)i
Fw(f)p FD(Cop)o(yInfo)p Fw(g)e(f)p FD(Lo)q(calInfo)p
Fw(g)i FD(.)287 556 y FN(Pro)q(cedure)20 b(headers)h(declare)e(v)n
(arious)f(attributes)i(of)e(the)h(pro)q(cedure)i(whic)o(h)d(ha)o(v)o(e)
224 606 y(b)q(een)d(ev)n(aluated)f(b)o(y)g(the)g(fron)o(tend.)k(There)d
(are)g(three)g(parts,)f(the)g(header)h(prop)q(er,)f(cop)o(y)224
656 y(information)j(for)i(an)o(y)g(v)n(alue)f(parameters)i(passed)g(b)o
(y)f(reference,)k(and)c(lo)q(cal)f(v)n(ariable)224 706
y(information.)224 813 y FO(The)e(header)f(informati)o(on)224
890 y FN(The)10 b(argumen)o(ts)f(of)g(the)h(pro)q(cedure)h(header)f(sp)
q(ecify)g(prop)q(erties)h(of)e(the)h(pro)q(cedure)h(prolog)224
940 y(and)j(epilog.)287 1023 y FD(Arg)50 b Fw(!)g FD(.NODISPLA)m(Y)12
b Fw(j)g FD(.DISPLA)m(Y)h(:)f FE(numb)n(er)k Fw(j)d FD(.NOCHECK)e
Fw(j)h FD(.CHECK)413 1069 y Fw(j)64 b FD(.SIZE)13 b(=)g
FE(numb)n(er)i Fw(j)e FD(.ASSEMBL)m(Y)g(=)g FE(numb)n(er)e
Fw(j)i FD(.RETCUT)f(=)g FE(numb)n(er)p FD(.)287 1155
y FN(The)17 b(con)o(v)o(en)o(tional)f(metho)q(d)h(used)h(b)o(y)f
FK(DCo)n(de)k FN(compilers)16 b(to)h(access)i(uplev)o(el)e(data)224
1204 y(uses)11 b(a)e(displa)o(y)g(v)o(ector.)17 b(The)10
b(k)o(eyw)o(ords)g FK(.DISPLA)m(Y,)h(.NODISPLA)m(Y)17
b FN(indicate)10 b(whether)224 1254 y(or)17 b(not)f(a)g(displa)o(y)f
(lo)q(cation)h(needs)i(to)e(b)q(e)h(up)q(dated.)26 b(In)16
b(the)h(case)h(that)e(the)h(displa)o(y)e(is)224 1304
y(needed)h(the)e(lev)o(el)g(is)g(indicated)f(b)o(y)h(the)h(notation|)
411 1354 y FG(.DISPLAY)20 b(:)14 b FK(lexL)n(evel)287
1404 y FN(Compilatio)o(n)f(unit)j(b)q(o)q(dies)h(are)g(at)f(lexical)f
(lev)o(el)h(0,)g(and)g(require)h(no)e(displa)o(y)m(.)24
b(The)224 1453 y(default)18 b(is)g(no)f(displa)o(y)m(,)g(whic)o(h)h(in)
f(turn)i(is)f(the)g(same)f(as)h(displa)o(y)f(at)h(lev)o(el)f(zero.)31
b(If)18 b(a)224 1503 y(pro)q(cedure)c(has)e(no)g(ob)r(jects)h(whic)o(h)
e(are)h(accessed)j(from)10 b(nested)j(scop)q(es,)g(then)g(no)e(displa)o
(y)224 1553 y(up)q(dating)j(is)g(required,)g(and)g(it)f(is)h(p)q
(ermissible)f(to)h(declare)h FK(.NODISPLA)m(Y)p FN(.)287
1603 y(The)9 b(k)o(eyw)o(ords)h FK(.CHECK,)f(.NOCHECK)14
b FN(in)9 b(the)h(pro)q(cedure)h(header)g(indicate)e(whether)224
1653 y(or)k(not)g(a)g(stac)o(k)g(o)o(v)o(er\015o)o(w)f(c)o(hec)o(k)i
(is)f(to)g(b)q(e)g(p)q(erformed.)k(Chec)o(king)c(is)g(the)h(default,)e
(so)h(the)224 1702 y(c)o(hec)o(k)i(k)o(eyw)o(ord)f(is)g(usually)f
(included)h(simply)e(for)h(clarit)o(y)m(.)287 1752 y(The)f
FK(.SIZE)h(=)g(numb)n(er)j FN(phrase)d(declares)g(the)f(size)g(of)f
(the)i(\(\014xed)f(part)g(of)f(the\))h(stac)o(k-)224
1802 y(frame.)19 b(The)c(n)o(um)o(b)q(er)f(follo)o(wing)e(the)j
(equalit)o(y)f(is)h(the)g(size)g(in)f(b)o(ytes.)21 b(The)15
b(default)g(size)224 1852 y(is)e(zero.)19 b(The)14 b(size)f(includes)h
(an)o(y)f(callee)g(copied)g(structures)j(of)c(\014xed)i(size,)f(but)h
(do)q(es)f(not)224 1902 y(include)h(conforman)o(t)f(arra)o(ys.)287
1952 y(The)k FK(.ASSEMBL)m(Y)i(=)e(numb)n(er)22 b FN(phrase)c(declares)
g(the)g(size)g(of)e(the)i(parameter)e(as-)224 2001 y(sem)o(bly)j(area)i
(in)f(the)g(stac)o(k)h(frame.)36 b(This)20 b(is)g(not)g(needed)i(for)e
(arc)o(hitectures)i(where)224 2051 y(parameters)13 b(are)f(pushed)h(on)
o(to)f(a)g(run)o(time)f(stac)o(k.)18 b(The)12 b(n)o(um)o(b)q(er)g
(follo)o(wing)d(the)k(equalit)o(y)224 2101 y(is)h(the)h(size)f(in)g(b)o
(ytes.)k(The)d(default)e(size)i(is)f(zero.)287 2151 y(The)h
FK(.RETCUT)g(=)h(numb)n(er)k FN(phrase)c(declares)h(that)e(this)g(pro)q
(cedure)i(uses)g("P)o(ascal)224 2201 y(call)e(con)o(v)o(en)o(tions".)21
b(Suc)o(h)16 b(pro)q(cedures)h(are)f(exp)q(ected)h(to)e(remo)o(v)o(e)f
FK(numb)n(er)20 b FN(b)o(ytes)c(from)224 2250 y(the)f(run)o(time)e
(stac)o(k)h(during)g(the)g(exit)g(epilog.)224 2358 y
FO(Lo)q(cal)i(v)m(ariable)e(information)224 2435 y FN(Lo)q(cal)d(v)n
(ariables)f(are)h(declared)h(b)o(y)e(sp)q(ecifying)h(their)g(iden)o
(ti\014er,)g(stac)o(k)h(frame)d(o\013set,)j(size,)224
2484 y(and)g(other)h(attributes.)18 b(The)12 b(\014rst)h(n)o(um)o(b)q
(er)f(follo)o(wing)d(the)j(iden)o(ti\014er)h(is)f(the)g(stac)o(k)h
(frame)224 2534 y(o\013set,)i(while)e(the)i(second)g(is)e(the)i(size)f
(of)g(the)g(v)n(ariable)f(in)g(b)o(ytes.)249 2653 y Fx(Lo)q(calInfo)48
b Fa(!)i Fx(.LOCAL)13 b Fu(ident)f(numb)n(er)h Fx(`,')e
Fu(numb)n(er)611 2692 y Fx(\\\(")g Fu(numb)n(er)i Fx(`,')e
Fu(numb)n(er)i Fx(`,')e Fu(numb)n(er)17 b Fx(\\\)")11
b([\\fpP)o(aram"])d([)p Fu(litstring)s Fx(])j(eolnSy)m(.)p
eop
%%Page: 284 290
284 289 bop 224 274 a FN(284)437 b FL(APPENDIX)15 b(A.)27
b(DCODE)14 b(REFERENCE)g(MANUAL)287 390 y FN(The)e(attribute)h
(information)c(is)i(a)h(triple)g(of)f(n)o(um)o(b)q(ers)h(eac)o(h)h(of)e
(whic)o(h)h(ma)o(y)e(b)q(e)i(only)g(a)224 440 y(single)e(zero)g(or)g
(one)g(digit.)16 b(In)9 b(the)i(\014rst)f(p)q(osition)f(a)h(one)g(sp)q
(eci\014es)h(that)f(the)g(corresp)q(onding)224 490 y(v)n(ariable)h(is)h
(accessed)i(b)o(y)e(a)f(nested)j(pro)q(cedure.)19 b(In)12
b(the)h(second)g(p)q(osition)e(a)g(one)h(sp)q(eci\014es)224
540 y(that)g(the)h(corresp)q(onding)g(v)n(ariable)e(has)h(its)g(v)n
(alue)f(threatened)1226 525 y Fz(2)1259 540 y FN(b)o(y)h(a)f(nested)j
(pro)q(cedure.)224 590 y(The)h(\014nal)f(attribute)g(in)g(the)h(paren)o
(theses)h(is)e(one)g(to)g(sp)q(ecify)h(that)f(the)h(v)n(ariable)e(has)h
(its)224 640 y(address)i(tak)o(en)f(within)e(this)i(pro)q(cedure.)21
b(Con)o(v)o(en)o(tionally)m(,)12 b(structures)k(and)f(unions)f(are)224
689 y(giv)o(en)i(a)h(one)f(attribute)h(in)f(the)h(\014nal)f(p)q
(osition)g(to)g(ensure)i(that)f(the)g(bac)o(k)o(end)f(will)f(not)224
739 y(attempt)f(to)f(place)h(suc)o(h)h(a)f(v)n(ariable)e(in)i(a)f
(register.)287 792 y(The)j(optional)e FK(fpPar)n(am)19
b FN(mark)o(er)c(sp)q(eci\014es)j(that)e(the)g(v)n(ariable)f(is)g(a)h
(\015oating)f(p)q(oin)o(t)224 842 y(datum.)21 b(This)15
b(mark)o(er)g(should)g(b)q(e)h(generated)g(b)o(y)f(an)o(y)g(fron)o
(tends)h(whic)o(h)f(are)h(in)o(tended)224 892 y(to)g(b)q(e)g(p)q
(ortable,)g(since)g(some)f(arc)o(hitectures)i(will)d(b)q(e)j(unable)e
(to)g(lo)q(cate)h(\015oating)f(p)q(oin)o(t)224 941 y(parameters)g
(without)f(this)h(hin)o(t.)20 b(It)14 b(is)h(p)q(ermissible,)e(and)i(p)
q(erhaps)g(helpful)f(to)h(use)g(this)224 991 y(mark)o(er)e(for)h
(non-parameter)f(lo)q(cal)g(v)n(ariables.)287 1044 y(The)g(optional)f
(literal)g(string)h(at)g(the)g(end)h(of)e(the)i(declaration)f(allo)o
(ws)e(t)o(yp)q(e)j(informa-)224 1094 y(tion)i(to)g(b)q(e)h(inserted)h
(so)e(that)g(the)h(co)q(de)g(generator)g(can)g(create)g(debugger)g(t)o
(yp)q(e)g(infor-)224 1144 y(mation)12 b(for)i(the)g(lo)q(cal)f(v)n
(ariable.)224 1267 y FO(P)o(arameter)h(cop)o(y)i(informatio)o(n)249
1381 y Fx(Cop)o(yInfo)48 b Fa(!)i Fx(.COPY)13 b Fu(numb)n(er)g
Fx(`,')e Fu(numb)n(er)17 b Fx(.SIZE)11 b Fu(numb)n(er)16
b Fx([Align])11 b(eolnSy)453 1420 y Fa(j)62 b Fx(.EXP)m(AND)13
b([`\(')p Fu(numb)n(er)t Fx(`\)'])e Fu(numb)n(er)i Fx(`,')e
Fu(numb)n(er)17 b Fx(.SIZE)10 b Fu(numb)n(er)17 b Fx([Align])11
b(eolnSy)453 1460 y Fa(j)62 b Fx(.OPENCOPY)14 b([`\(')p
Fu(numb)n(er)t Fx(`\)'])d Fu(numb)n(er)17 b Fx(.SIZE)10
b Fu(numb)n(er)17 b Fx([Align])10 b(eolnSy)307 1499 y(Align)49
b Fa(!)h Fx(.ALIGN)12 b Fu(numb)n(er)17 b Fx(.)287 1597
y FN(P)o(arameter)j(cop)o(y)g(information)e(is)i(required)i(in)e(t)o(w)
o(o)g(circumstances.)38 b(Firstly)m(,)21 b(if)224 1647
y(v)n(alue)12 b(parameters)g(are)h(passed)g(b)o(y)f(reference)j(and)d
(are)h(copied)f(b)o(y)h(the)f(called)g(pro)q(cedure)224
1697 y(then)i(this)e(m)o(ust)g(b)q(e)h(sp)q(eci\014ed.)19
b(Secondly)m(,)12 b(if)g(conforman)o(t)f(arra)o(y)h(parameters)h(are)f
(either)224 1746 y(copied)k(b)o(y)f(the)h(called)f(pro)q(cedure)i(or)e
(are)h(assem)o(bled)e(b)o(y)i(the)f(caller)h(at)f(run)o(time,)f(then)
224 1796 y(information)c(m)o(ust)h(b)q(e)i(giv)o(en)e(to)h(allo)o(w)f
(the)h(arra)o(y)g(to)g(b)q(e)h(copied)f(or)h(the)f(correct)i(amoun)o(t)
224 1846 y(of)g(space)h(allo)q(cated)e(resp)q(ectiv)o(ely)m(.)287
1899 y(The)g FK(.COPY)19 b FN(declaration)13 b(sp)q(eci\014es)h(that)f
(a)f(v)n(alue)g(parameter)g(has)g(b)q(een)i(passed)g(b)o(y)224
1949 y(reference,)19 b(and)d(m)o(ust)g(b)q(e)h(copied)f(b)o(y)g(the)h
(called)f(pro)q(cedure.)27 b(The)17 b(argumen)o(ts)f(to)g(the)224
1998 y(declaration)e(are)g(|)370 2051 y FG(.COPY)e FK(p)n(ar)n
(amO\013set)j(,)g(destO\013set)j FG(.SIZE)13 b FK(obje)n(ctSize)h
FG(.ALIGN)e FK(alignNum)287 2104 y FN(The)17 b(\014rst)g(argumen)o(t)e
(is)i(the)g(o\013set)g(in)f(the)h(stac)o(k)g(frame)e(of)h(the)h
(parameter)f(whic)o(h)224 2154 y(is)e(the)h(reference)h(to)e(the)g
(actual)g(parameter.)k(The)c(second)h(is)f(the)g(destination)g
(o\013set)h(in)224 2204 y(the)i(\014xed)f(part)g(of)f(the)i(declared)g
(stac)o(k)f(frame.)23 b(The)16 b(declared)h(size)g(is)e(the)i(n)o(um)o
(b)q(er)e(of)224 2253 y(b)o(ytes)g(in)e(the)i(ob)r(ject)g(to)e(b)q(e)i
(copied.)287 2306 y(The)k(alignmen)o(t)d(sp)q(eci\014cation)j(ma)o(y)e
(b)q(e)i(omitted)e(if)h(the)h(target)g(mac)o(hine)e(has)i(no)224
2356 y(alignmen)o(t)12 b(constrain)o(ts,)i(or)g(if)f(the)h(ob)r(ject)h
(is)f(b)o(yte)g(aligned.)j(Otherwise)e(the)g(alignmen)o(t)224
2406 y(n)o(um)o(b)q(er)f(w)o(ould)f(b)q(e)h(1,)f(2,)g(4)h(or)g(8)f(for)
h(con)o(temp)q(orary)f(mac)o(hines.)287 2458 y(The)e(cop)o(ying)f(of)h
(v)n(alue)f(mo)q(de,)g(v)n(ariable)g(size,)i(op)q(en)f(arra)o(ys)g
(parameters)g(is)g(indicated)224 2508 y(as)j(follo)o(ws)f(|)287
2561 y FG(.OPENCOPY)p FN(\()p FK(dimensions)s FN(\))g
FK(p)n(ar)n(amO\013set)18 b FG(.SIZE)12 b FK(elementSize)i
FG(.ALIGN)f FK(alignNum)p 224 2610 577 2 v 271 2636 a
Fy(2)288 2648 y Fx(A)d(v)n(ariable)e(is)h(threatened)e(b)o(y)i(a)g(pro)
q(cedure)e(if)j(the)f(pro)q(cedure)d(directly)i(assigns)g(to)h(the)g(v)
n(ariable,)f(or)224 2688 y(if)j(tak)o(es)e(the)h(address)f(of)i(the)f
(v)n(ariable)e(or)i(passes)g(the)g(address)f(as)h(a)h(parameter)d(to)i
(another)f(pro)q(cedure.)p eop
%%Page: 285 291
285 290 bop 224 274 a FL(A.4.)32 b(PR)o(OCEDURE)13 b(DECLARA)m(TIONS)
651 b FN(285)287 390 y(The)20 b(meaning)f(of)g(the)i(alignmen)o(t)d
(attribute)j(is)f(as)h(for)e(\014xed)i(size)g(arra)o(y)f(copies.)224
440 y(Ho)o(w)o(ev)o(er,)c(in)f(this)h(case,)g(the)g(destination)g
(address)g(m)o(ust)f(b)q(e)h(determined)g(at)f(run)o(time.)224
490 y(The)g(size)f(of)g(the)g(cop)o(y)g(is)g(determined)g(b)o(y)f(the)i
(computation)d(|)678 621 y FK(size)f FN(=)h FK(elSize)d
Ft(\002)952 570 y FK(dim)959 582 y Fd(Y)959 670 y FB(i)p
Fz(=1)1020 621 y FN(\()p FK(high)1110 632 y FB(i)1133
621 y FN(+)h(1\))287 742 y(where)16 b FK(elSize)j FN(is)c(the)h(sp)q
(eci\014ed)h(elemen)o(t)e(size,)i FK(dim)h FN(is)e(the)g(n)o(um)o(b)q
(er)f(of)g(dimensions)224 792 y(and)c FK(high)377 802
y FB(i)402 792 y FN(is)g(the)g FM(i)p FN(-th)h(high)e(v)n(alue.)17
b(The)12 b(actual)e(parameter)h(reference)j(is)d(at)g(stac)o(k)h(frame)
224 841 y(o\013set)k FK(p)n(ar)n(amO\013set)j FN(and)c(it)g(is)g
(assumed)g(that)g(the)h(high)e(v)n(alue\(s\))h(are)h(w)o(ord-sized)f
(and)224 891 y(at)f(consecutiv)o(e)h(p)q(ostions)g(in)e(the)h(stac)o(k)
h(frame.)287 941 y(After)i(the)g(arra)o(y)f(has)h(b)q(een)g(copied,)g
(the)g(bac)o(k)o(end)g(m)o(ust)f(o)o(v)o(erwrite)h(the)g(reference)224
991 y(so)e(as)f(to)g(p)q(oin)o(t)g(to)g(the)h(cop)o(y)m(.)k(The)c(allo)
q(cated)f(space)h(need)g(not)g(b)q(e)g(in)e(the)i(stac)o(k)g(frame,)224
1041 y(but)f(in)f(an)o(y)g(case)i(the)f(pro)q(cedure)i(epilog)c(is)i
(resp)q(onsible)g(for)f(deallo)q(cating)g(the)h(space)g(at)224
1090 y(exit.)287 1140 y(The)h FK(.EXP)m(AND)k FN(declaration)c(sp)q
(eci\014es)i(that)e(the)h(pro)q(cedure)h(prolog)d(will)g(allo)q(cate)
224 1190 y(and)d(deallo)q(cate)f(space)h(for)f(an)g(op)q(en)h(arra)o(y)
f(of)g(a)g(shap)q(e)h(sp)q(eci\014ed)h(b)o(y)e(a)g(designated)h(actual)
224 1240 y(parameter)j(reference,)i(the)e FK(template)h(arr)n(ay)p
FN(.)i(The)e(declaration)e(is)h(|)287 1290 y FG(.EXPAND)p
FN(\()p FK(dimensions)s FN(\))i FK(p)n(ar)n(amOfst,)i(dstPtrOfst)h
FG(.SIZE)d FK(elemSize)h FG(.ALIGN)f FK(align-)224 1340
y(Num)287 1389 y FN(As)e(for)g(op)q(en)g(arra)o(y)f(copies,)h(the)h
(size)g(of)e(the)h(allo)q(cated)g(space)h(is)e(giv)o(en)h(b)o(y)g(|)678
1521 y FK(size)d FN(=)h FK(elSize)d Ft(\002)952 1469
y FK(dim)959 1481 y Fd(Y)959 1570 y FB(i)p Fz(=1)1020
1521 y FN(\()p FK(high)1110 1531 y FB(i)1133 1521 y FN(+)h(1\))287
1643 y(where)15 b FK(elSize)j FN(is)c(the)h(sp)q(eci\014ed)i(elemen)o
(t)d(size)h(\(whic)o(h)f(is)h(not)f(necessarily)i(the)f(same)224
1693 y(as)e(the)g(elemen)o(t)f(size)i(of)e(the)h(template)f(arra)o
(y\),)g FK(dim)k FN(is)c(the)h(n)o(um)o(b)q(er)f(of)g(dimensions)f(and)
224 1743 y FK(high)299 1753 y FB(i)325 1743 y FN(is)h(the)g
FM(i)p FN(-th)h(high)e(v)n(alue.)17 b(The)12 b(template)g(arra)o(y)g
(reference)i(is)e(at)g(stac)o(k)h(frame)d(o\013set)224
1793 y FK(p)n(ar)n(amO\013set)18 b FN(and)c(it)f(is)h(assumed)f(that)h
(the)h(v)n(arious)e FK(high)k FN(v)n(alues)d(are)g(con)o(tiguous)g
(with)224 1843 y(that)g(reference.)287 1892 y(In)g(this)g(case,)h
(after)g(the)f(space)i(has)e(b)q(een)h(allo)q(cated,)f(the)h(address)g
(of)f(the)h(allo)q(cated)224 1942 y(space)j(will)c(b)q(e)j(placed)g(in)
e(the)i(stac)o(k)g(frame)e(at)h(the)g(o\013set)i(giv)o(en)d(b)o(y)h
FK(dstPtrOfst)p FN(.)24 b(The)224 1992 y(allo)q(cation)13
b(of)g(an)h(o\013set)g(to)g(hold)f(this)h(p)q(oin)o(ter)g(is)g(the)h
(resp)q(onsibilit)o(y)e(of)g(the)i(fron)o(tend.)224 2107
y FH(A.4.2)56 b(Pro)r(cedure)18 b(b)r(o)r(dies)224 2184
y FN(Pro)q(cedure)h(b)q(o)q(dies)d(b)q(egin)h(with)f(the)g(k)o(eyw)o
(ord)h FK(.ENTR)m(Y)23 b FN(and)16 b(end)h(either)g(with)f(jump)224
2233 y(table)k(declarations,)g(or)g(with)f(the)h FK(.ENDP)k
FN(mark)o(er.)34 b(The)19 b(form)f(of)h(the)h(statemen)o(ts)224
2283 y(whic)o(h)14 b(mak)o(e)f(up)h(the)g(b)q(o)q(dy)g(of)f(the)i(pro)q
(cedures)h(is)e(treated)h(in)e(section)i(A.5.)224 2398
y FH(A.4.3)56 b(Jump)18 b(tables)224 2475 y FN(Case)11
b(and)g(switc)o(h)f(statemen)o(ts)h(are)g(implem)o(en)o(ted)e(b)o(y)h
(a)g(v)o(ectored)i(jump)c(through)j(a)f(jump)224 2525
y(table.)18 b(Jump)13 b(tables)h(app)q(ear)g(at)g(the)g(end)g(of)f(pro)
q(cedures,)j(imm)o(ediately)11 b(preceding)k(the)224
2574 y FK(.ENDP)k FN(mark)o(er.)425 2645 y FD(JumpT)m(able)51
b Fw(!)f FD(.JUMPT)m(AB)12 b(Lab)q(el)i(eolnSy)h Fw(f)p
FD(IdList)f(eolnSy)p Fw(g)p FD(.)512 2690 y(IdList)51
b Fw(!)f FE(ident)11 b Fw(f)p FD(`,')h([eolnSy])i FE(ident)t
Fw(g)p FD(.)p eop
%%Page: 286 292
286 291 bop 224 274 a FN(286)437 b FL(APPENDIX)15 b(A.)27
b(DCODE)14 b(REFERENCE)g(MANUAL)287 390 y FN(Jump)d(tables)i(consist)f
(of)g(a)g(lab)q(el,)g(b)o(y)g(whic)o(h)g(the)h(jump)d(table)j(is)f
(referenced,)i(and)f(an)224 440 y(iden)o(ti\014er)i(list)e(corresp)q
(onding)i(to)f(all)e(of)i(the)g(lab)q(els)g(whic)o(h)f(the)i(table)f
(references.)287 490 y(All)19 b(of)h(the)g(iden)o(ti\014ers)h(in)f(the)
h(list)f(corresp)q(ond)i(to)e(lab)q(els)g(lo)q(cal)f(to)h(the)h(curren)
o(t)224 540 y(pro)q(cedure)f(b)q(o)q(dy)m(.)30 b(The)19
b(list)e(is)h(ordered)h(so)f(that)g(consecutiv)o(e)i(iden)o(ti\014ers)f
(in)e(the)i(list)224 590 y(corresp)q(ond)j(to)e(the)h(lab)q(els)f(whic)
o(h)g(will)f(b)q(e)i(selected)h(b)o(y)e(consecutiv)o(e)i(v)n(alues)e
(of)g(the)224 640 y(select)c(expression)f(index.)224
775 y FI(A.5)67 b(Statemen)n(ts)224 866 y FN(The)11 b(b)q(o)q(dy)f(of)f
(pro)q(cedures)j(consists)f(of)f(statemen)o(ts)g(and)g(directiv)o(es,)h
(one)f(p)q(er)h(line.)16 b(State-)224 916 y(men)o(ts)e(ha)o(v)o(e)f
(optional)g(lab)q(els,)g(and)h(lab)q(els)f(ma)o(y)f(app)q(ear)j(alone)e
(on)h(lines.)287 966 y(Statemen)o(ts)j(are)h(the)g(instructions)h(of)e
(the)h FK(DCo)n(de)j FN(form,)16 b(together)j(with)e(a)h(small)224
1016 y(n)o(um)o(b)q(er)d(of)f(directiv)o(es.)21 b(The)16
b(statemen)o(ts)f(op)q(erate)h(on)e(the)i(stac)o(k)f(of)f(the)h
(abstract)h(ma-)224 1066 y(c)o(hine,)g(taking)f(an)o(y)g(non-literal)f
(op)q(erands)j(from)c(the)k(stac)o(k,)e(and)h(returning)g(results)g(to)
224 1115 y(the)f(stac)o(k.)427 1185 y FD(Statemen)o(t)50
b Fw(!)h FD([Lab)q(elT)m(ag])13 b(Lab)q(el)h([OpCo)q(de)f([OpArg]])f
(eolnSy)662 1231 y Fw(j)64 b FD(OpCo)q(de)13 b([OpArg])f(eolnSy)662
1276 y Fw(j)64 b FD(Directiv)o(e)14 b(eolnSy)m(.)442
1322 y(Lab)q(elT)m(ag)51 b Fw(!)g FD(.EX)o(CEPT)12 b
Fw(j)g FD(.LOOP)g Fw(j)h FD(.RETR)m(Y)f(.)447 1368 y(Directiv)o(e)52
b Fw(!)f FD(.TRAP)12 b FE(ident`,')f(ident)g Fw(f)p FD(`,')h(OpArg)p
Fw(g)662 1413 y(j)64 b FD(.ENDLOOP)12 b([)p FE(numb)n(er)t
FD(])f(.)484 1459 y(OpArg)50 b Fw(!)h FE(numb)n(er)15
b Fw(f)p FD(`,')d FE(numb)n(er)t Fw(g)g FD([\\fpP)o(aram"])662
1505 y Fw(j)64 b FE(ident)11 b FD([)p FE(numb)n(er)t
FD(])662 1550 y Fw(j)64 b FE(r)n(elop)662 1596 y Fw(j)g
FE(mo)n(de)12 b FD(.)505 1642 y(Lab)q(el)51 b Fw(!)g
FE(ident)14 b FD(`:')i(.)287 1722 y FK(DCo)n(de)c FN(kno)o(ws)e(of)e
(nine)i(di\013eren)o(t)g(primitiv)o(e)d(data)i(t)o(yp)q(es,)h(as)g
(detailed)f(in)g(section)h(A.3.1.)224 1772 y(Ho)o(w)o(ev)o(er,)16
b(the)f(abstract)h(stac)o(k)g(itself)f(kno)o(ws)g(only)f(three:)22
b FK(wor)n(ds,)15 b(\015o)n(ats)k FN(and)c FK(doubles)s
FN(.)224 1822 y(F)m(or)c(existing)f(implemen)o(tatio)o(ns,)f(the)i
(\014rst)g(corresp)q(onds)i(to)d(either)i(32{)d(or)i(64{bit)f(w)o
(ords,)224 1871 y(and)17 b(the)g(other)g(t)o(w)o(o)f(to)h(single)f(and)
h(double)f(precision)h FK(IEEE)22 b FN(\015oating)16
b(p)q(oin)o(t)g(formats)224 1921 y(resp)q(ectiv)o(ely)m(.)j(Whenev)o
(er)13 b(a)f(datum)f(is)h(pushed)h(on)f(the)h(abstract)g(stac)o(k,)g
(the)f(t)o(yp)q(e)h(of)f(the)224 1971 y(source)17 b(datum)c(is)i(sp)q
(eci\014ed)h(and)f(an)o(y)f(format)f(con)o(v)o(ersion,)i(suc)o(h)h(as)f
(zero)h(extension)f(or)224 2021 y(sign)f(extension,)g(is)g(implicit.)
287 2071 y(The)e(seman)o(tics)f(of)h(statemen)o(ts)g(are)g(for)g(the)g
(most)f(part)h(self)g(explanatory)m(,)f(but)h(some)224
2121 y(more)g(detailed)h(discussion)h(is)f(required)h(for)e(the)i
(division)d(op)q(erators,)j(testing)f(and)g(trap-)224
2170 y(ping,)j(the)h(handling)e(of)h(the)h(parameter)f(abstraction,)g
(and)g(the)h(handling)e(of)h(o\013-stac)o(k)224 2220
y(temp)q(oraries.)224 2335 y FH(A.5.1)56 b(Directiv)n(es)224
2412 y FN(Mark)o(er)18 b(directiv)o(es)f(are)h(placed)f(in)f(the)h(co)q
(de)h(to)f(pass)g(information)d(to)j(the)g(bac)o(k)o(ends.)224
2461 y(The)e(directiv)o(es)g(are)f(as)g(follo)o(ws)e(|)224
2538 y FG(.ENDLOOP)20 b FN(this)15 b(directiv)o(e)h(marks)e(the)i(end)g
(of)f(an)o(y)g(lo)q(op.)22 b(The)16 b(n)o(um)o(b)q(er)f(follo)o(wing)e
(the)328 2588 y(directiv)o(e,)k(if)e(presen)o(t,)j(has)e(a)g(meaning)e
(whic)o(h)i(is)g(de\014ned)i(b)o(y)d(the)i(fron)o(tend,)g(for)328
2638 y(the)f(b)q(ene\014t)g(of)e(the)i(h)o(uman)d(reader.)22
b(F)m(or)15 b(example,)e(it)i(migh)o(t)e(indicate)i(the)g(lo)q(op)328
2688 y(lab)q(el)f(with)f(whic)o(h)h(it)f(pairs.)p eop
%%Page: 287 293
287 292 bop 224 274 a FL(A.5.)32 b(ST)m(A)m(TEMENTS)985
b FN(287)224 390 y FG(.EXCEPT)20 b FN(This)11 b(lab)q(el)f(tag)h
(declares)h(that)f(the)h(tagged)f(lab)q(el)f(is)h(the)g(en)o(try)h(p)q
(oin)o(t)f(to)f(whic)o(h)328 440 y(con)o(trol)17 b(is)f(transfered)i
(if)e(an)h(exception)g(is)g(raised)g(in)f(the)i(preceding)f(pro)q
(cedure)328 490 y(b)q(o)q(dy)m(.)428 475 y Fz(3)224 583
y FG(.LOOP)j FN(this)14 b(lab)q(el)g(tag)f(marks)g(the)h(start)h(of)e
(a)h(lo)q(op.)k(The)c(directiv)o(e)g(is)g(attac)o(hed)h(to)f(the)328
633 y(lab)q(el)g(to)f(whic)o(h)h(the)g(bac)o(k-edge\(s\))i(of)d(the)h
(lo)q(op)f(jump\(s\).)224 725 y FG(.RETRY)20 b FN(this)15
b(lab)q(el)f(tag)g(marks)g(the)h(p)q(oin)o(t)f(to)h(whic)o(h)f(con)o
(trol)h(is)f(transferred)j(follo)o(wing)328 775 y(the)e(execution)f(of)
g(a)f(retrial)h(attempt)f(in)h(an)f(exception)i(handler.)224
868 y FG(.TRAP)20 b FN(this)13 b(directiv)o(e)h(is)f(used)h(to)f
(indicate)g(to)g(bac)o(k)o(ends)h(that)f(an)g(out-of-line)f(trap)h
(call)328 917 y(is)h(required,)g(at)g(the)h(end)f(of)f(the)i(curren)o
(t)g(pro)q(cedure.)224 1038 y FO(Seman)o(tics)f(of)h(the)g(trap)g
(directiv)o(e)224 1119 y FN(The)k(trap)g(directiv)o(e)f(is)h(a)f
(declaration,)g(and)g(ma)o(y)f(logically)f(o)q(ccur)j(an)o(ywhere)g
(within)224 1169 y(the)c(b)q(o)q(dy)f(of)g(the)h(pro)q(cedure)h(to)e
(whic)o(h)g(is)g(refers.)21 b(It)14 b(has)g(t)o(w)o(o)g(mandatory)f
(argumen)o(ts,)224 1219 y(b)q(oth)f(of)f(whic)o(h)h(are)g(iden)o
(ti\014ers,)h(and)e(as)h(man)o(y)e(as)i(four)f(optional)f(argumen)o
(ts.)17 b(The)12 b(form)224 1268 y(allo)o(ws)h(bac)o(k)o(ends)h(to)f
(create)i(lo)o(w)d(o)o(v)o(erhead,)i(out-of-line)d(trap)j(calls)f(to)g
(run)o(time)g(system)224 1318 y(en)o(try)i(p)q(oin)o(ts)f(whic)o(h)f
(are)i(unkno)o(wn)e(to)h(the)h(bac)o(k)o(end.)287 1370
y(The)i(mandatory)f(argumen)o(ts)g(of)h(the)h(directiv)o(e)g(are)f(the)
h(trap)g(iden)o(ti\014er,)g(and)f(the)224 1420 y(iden)o(ti\014er)g
(asso)q(ciated)g(with)e(the)i(out-of-line)e(lab)q(el.)23
b(F)m(ollo)o(wing)14 b(the)i(mandatory)f(argu-)224 1470
y(men)o(ts)e(as)h(man)o(y)e(as)i(four)f(optional)f(argumen)o(ts)h(ma)o
(y)f(o)q(ccur.)19 b(These)c(are)f(of)f(the)h(form)e(of)224
1520 y(iden)o(ti\014ers)j(\(with)f(optional)e(n)o(umeric)h
(o\013sets\),)i(or)f(n)o(um)o(b)q(ers.)287 1572 y(A)o(t)h(run)o(time,)e
(when)i(a)g(branc)o(h)g(is)f(tak)o(en)h(to)g(the)g(lab)q(el)f(sp)q
(eci\014ed)j(b)o(y)d(the)i(second)g(ar-)224 1622 y(gumen)o(t)d(to)g(a)g
(trap)h(directiv)o(e,)g(con)o(trol)f(passes)i(to)f(an)f(out-of-line)f
(sequence)k(of)d(mac)o(hine)224 1672 y(instructions.)19
b(In)14 b(this)g(sequence)i(the)f(sp)q(eci\014ed,)f(optional)f(argumen)
o(ts)g(\(third,)h(...)j(argu-)224 1722 y(men)o(ts)e(to)h(the)g
(directiv)o(e\))g(will)e(b)q(e)i(passed)h(\(as)f(\014rst,)f(...)22
b(parameters)16 b(to)f(a)g(call\))g(to)h(the)224 1771
y(run)o(time)f(trap)h(en)o(try)h(p)q(oin)o(t)e(sp)q(eci\014ed)j(b)o(y)d
(the)i(\014rst)g(argumen)o(t)d(to)i(the)h(directiv)o(e.)24
b(It)16 b(is)224 1821 y(assumed)e(that)g(con)o(trol)f(will)g(nev)o(er)i
(return)g(from)d(these)j(traps.)224 1950 y FH(A.5.2)56
b(Instructions)224 2031 y FO(Argumen)o(ts)14 b(to)h(the)g(instructi)o
(ons)224 2112 y FN(The)f(ma)r(jorit)o(y)d(of)i(abstract)h(stac)o(k)g
(mac)o(hine)e(instructions)i(ha)o(v)o(e)f(no)g(explicitly)g(sp)q
(eci\014ed)224 2162 y(op)q(erands.)22 b(Exceptions)16
b(include)f(the)g FK(push)i(addr)n(ess)h FN(and)c FK(c)n(al)r(l)i(pr)n
(o)n(c)n(e)n(dur)n(e)h FN(instructions,)224 2212 y(these)d(tak)o(e)e(a)
g(sym)o(b)q(olic)e(address)j(as)f(op)q(erand.)18 b(In)12
b(all)f(suc)o(h)i(cases)g(the)g(sym)o(b)q(olic)d(address)224
2262 y(argumen)o(t)j(has)h(as)g(its)g(most)f(general)h(form)e
FK(ident)i Ft(\006)g FK(numb)n(er)p FN(.)287 2314 y(Some)j(other)i
(instructions,)h(suc)o(h)f(as)g FK(push)g(liter)n(al)j
FN(and)c FK(add)i(o\013set)j FN(tak)o(e)18 b(n)o(umeric)224
2364 y(argumen)o(ts.)g(As)c(noted)g(in)g(section)g(A.2)g(suc)o(h)g(n)o
(umeric)f(tok)o(ens)i(tak)o(e)f(an)f(optional)g(sign.)287
2416 y(Most)f(arithmetic)e(instructions)i(tak)o(e)g(an)g(optional)e(or)
h(mandatory)f(mo)q(de)h(argumen)o(t.)224 2466 y(These)22
b(argumen)o(ts)e(are)h(one)f(of)g FK(noT)m(r)n(ap,)i(intOver,)f(cr)n
(dOver)j FN(denoting)c(no)h(o)o(v)o(er\015o)o(w)224 2516
y(trapping,)d(in)o(teger)f(o)o(v)o(er\015o)o(w)g(detection)h(or)g
(cardinal)e(\(unsigned\))i(o)o(v)o(er\015o)o(w)f(detection.)224
2565 y(The)e(default)e(is)h(no)g(trapping.)p 224 2610
577 2 v 271 2636 a Fy(3)288 2648 y Fx(This)h(implies)f(that)g
(exception)e(handling)h(m)o(ust)h(b)q(e)h(on)f(a)h(p)q(er-pro)q(cedur)o
(e)e(basis.)25 b(More)15 b(capable)224 2688 y(mec)o(hanisms)9
b(are)i(curren)o(tly)e(under)h(consideratio)o(n)f(for)h(later)h
(revisions)e(of)j(this)e(in)o(termediate)e(form.)p eop
%%Page: 288 294
288 293 bop 224 274 a FN(288)437 b FL(APPENDIX)15 b(A.)27
b(DCODE)14 b(REFERENCE)g(MANUAL)287 390 y FN(F)m(or)f(the)i(division)e
(instructions,)h(the)h(trapping)e(mo)q(de)g(is)h(mandatory)m(,)e(and)i
(m)o(ust)f(b)q(e)224 440 y(either)k FK(intOver)j FN(or)c
FK(cr)n(dOver)t FN(,)f(in)h(order)g(to)g(completely)f(sp)q(ecify)h(the)
h(seman)o(tics)e(of)h(the)224 490 y(op)q(eration.)287
541 y(Finally)m(,)c(the)k(\015oating)e(p)q(oin)o(t)g(comparison)g
(instructions)h(ha)o(v)o(e)g(an)g(argumen)o(t)e(whic)o(h)224
590 y(sp)q(eci\014es)j(the)f(relational)d(op)q(erator)j(to)e(b)q(e)i
(tested.)20 b(As)14 b(usual,)f(the)i(relops)f(are)224
640 y(\\)p FG(<,)22 b(<=,)f(>=,)g(>,)g(=,)h(<>,)f(#)p
FN(".)224 752 y FO(Division)13 b(and)i(remainder)f(instructi)o(on)o(s)
224 830 y FN(There)d(are)g(a)e(wide)h(v)n(ariet)o(y)f(of)g(division)g
(and)g(remainder)h(instructions,)g(su\016cien)o(t)h(to)e(cater)224
880 y(for)14 b(all)e(the)i(common)c(high-lev)o(el)j(languages.)k(The)d
(de\014nitions)g(of)e(these)j(instructions)f(is)224 930
y(as)g(follo)o(ws)f(|)649 1023 y FM(a)f FN(`)p FG(div)p
FN(')e FM(b)41 b FN(=)h Ft(b)p FM(a=b)p Ft(c)649 1085
y FM(a)12 b FN(`)p FG(mod)p FN(')e FM(b)41 b FN(=)h FM(a)9
b Ft(\000)g FN(\()p FM(a)j FN(`)p FG(div)p FN(')e FM(b)p
FN(\))f Ft(\002)h FM(b)606 1147 y(a)h FN(`)p FG(slash)p
FN(')f FM(b)41 b FN(=)h Ft(R)951 1153 y Fz(0)970 1147
y FN(\()p FM(a=b)p FN(\))649 1210 y FM(a)12 b FN(`)p
FG(rem)p FN(')e FM(b)41 b FN(=)h FM(a)9 b Ft(\000)g FN(\()p
FM(a)j FN(`)p FG(slash)p FN(')e FM(b)p FN(\))f Ft(\002)g
FM(b)234 1365 y FN(where)h(the)g FM(=)f FN(op)q(erators)h(on)f(the)h
(righ)o(t)f(denote)h(exact)g(division,)f(and)g(where)h
Ft(R)1463 1371 y Fz(0)1494 1365 y FN(:)h Ft(R)h(!)f(I)224
1414 y FN(is)j(the)h FK(r)n(ound)g(towar)n(d)f(zer)n(o)i
FN(function.)287 1465 y(Here)d(is)g(a)f(table,)g(whic)o(h)h(giv)o(es)f
(an)g(example)f(of)h(the)h(results)h(of)e(applying)f(the)i(v)n(arious)
224 1515 y(division)k(and)h(remainder)f(op)q(erations)h(to)f(some)g(t)o
(ypical)g(op)q(erands)i(on)f(the)g(stac)o(k.)30 b(In)224
1565 y(eac)o(h)16 b(case)g(the)f(top)g(of)f(stac)o(k)i(is)f(the)g(righ)
o(t)g(op)q(erand)g(for)f(the)i(op)q(eration,)f(while)f(the)i(left)224
1614 y(op)q(erand)f(is)f(b)q(elo)o(w)f(that.)p 608 1674
674 2 v 607 1723 2 50 v 644 1708 a(stac)o(k)h(top)p 845
1723 V 854 1723 V 69 w(10)p 945 1723 V 49 w({10)p 1057
1723 V 60 w(10)p 1169 1723 V 60 w({10)p 1281 1723 V 607
1773 V 633 1758 a(next)g(elem.)p 845 1773 V 854 1773
V 57 w(31)p 945 1773 V 60 w(31)p 1057 1773 V 59 w({31)p
1169 1773 V 50 w({31)p 1281 1773 V 608 1775 674 2 v 607
1825 2 50 v 672 1810 a FG(slash)p 845 1825 V 854 1825
V 107 w FN(3)p 945 1825 V 71 w({3)p 1057 1825 V 70 w({3)p
1169 1825 V 80 w(3)p 1281 1825 V 607 1875 V 694 1860
a FG(rem)p 845 1875 V 854 1875 V 129 w FN(1)p 945 1875
V 81 w(1)p 1057 1875 V 81 w({1)p 1169 1875 V 70 w({1)p
1281 1875 V 607 1924 V 694 1909 a FG(div)p 845 1924 V
854 1924 V 129 w FN(3)p 945 1924 V 71 w({4)p 1057 1924
V 70 w({4)p 1169 1924 V 80 w(3)p 1281 1924 V 607 1974
V 694 1959 a FG(mod)p 845 1974 V 854 1974 V 129 w FN(1)p
945 1974 V 71 w({9)p 1057 1974 V 80 w(9)p 1169 1974 V
81 w({1)p 1281 1974 V 608 1976 674 2 v 224 2071 a FO(The)i
FG(test)f FO(instructi)o(on)224 2149 y FN(The)h(test)f(instruction)g
(allo)o(ws)f(fron)o(tends)h(to)f(enco)q(de)i(suc)o(h)g(things)e(as)h
(index)g(and)f(range)224 2199 y(tests)j(without)e(inline)f(expansion)h
(in)g(the)h(in)o(termediate)e(co)q(de.)23 b(This)15 b(has)g(some)f(adv)
n(an-)224 2249 y(tages)e(with)e(target)h(arc)o(hitectures)i(whic)o(h)e
(p)q(ossess)h(test-and-trap)g(instructions.)17 b(In)11
b(some)224 2298 y(cases,)17 b(it)f(is)f(also)g(adv)n(an)o(tageous)g(to)
h(k)o(eep)g(tests)h(as)f(indivisible)e(primitiv)o(es)g(in)h(order)h(to)
224 2348 y(prev)o(en)o(t)i(the)f(unnecessary)i(fragmen)o(tation)c(of)h
(basic)h(blo)q(c)o(ks.)26 b(The)17 b(argumen)o(ts)f(to)h(the)224
2398 y(instruction)c(are)f(the)h(name)e(of)g(the)i(trap)f(to)g(call)f
(if)g(the)i(test)g(fails,)e(and)g(the)i(lo)o(w)e(and)h(high)224
2448 y(b)q(ounds)j(against)e(whic)o(h)h(to)f(test.)224
2560 y FO(Handling)h(the)h(parameter)f(abstraction)224
2638 y FN(The)h(passing)g(of)f(parameters)g(to)h(pro)q(cedures)i(is)d
(ac)o(hiev)o(ed)h(b)o(y)f(t)o(w)o(o)g(instructions)h
FG(mkPar)224 2688 y FN(and)f FG(blkPar)p FN(.)p eop
%%Page: 289 295
289 294 bop 224 274 a FL(A.5.)32 b(ST)m(A)m(TEMENTS)985
b FN(289)425 390 y FG(mkPar)13 b FK(p)n(ar-size,)h(asm-o\013set)g
FN([)p FG(fpParam)p FN(])287 453 y(The)j(e\013ect)i(of)e(the)h
FG(mkPar)e FN(instruction)i(is)f(to)g(p)q(op)g(the)h(abstract)g(stac)o
(k)g(and)f(mo)o(v)o(e)224 503 y(the)c(p)q(opp)q(ed)g(datum)e(to)h(the)h
(parameter)f(lo)q(cation.)k(T)o(ypically)11 b(this)h(lo)q(cation)f
(will)g(b)q(e)i(the)224 553 y(top)i(of)g(the)g(run)o(time)f(stac)o(k,)i
(or)f(some)f(sp)q(eci\014ed)i(lo)q(cation)f(in)f(the)i(parameter)e
(assem)o(bly)224 602 y(area,)i(or)g(p)q(erhaps)h(some)e(mac)o(hine)g
(register.)25 b(The)16 b(\014rst)h(argumen)o(t)e(to)h(the)g
(instruction)224 652 y(is)f(the)g(size)h(of)e(the)i(datum,)671
637 y Fz(4)702 652 y FN(while)f(the)g(second)h(argumen)o(t,)d
FK(p)n(ar-o\013set)19 b FN(is)c(the)g(o\013set)h(in)224
702 y(the)i(parameter)f(assem)o(bly)f(area.)28 b(In)18
b(the)g(case)g(of)e(bac)o(k)o(ends)i(whic)o(h)g(pass)f(parameters)224
752 y(on)d(a)f(run)o(time)f(stac)o(k,)h(it)g(is)h(p)q(ermissible)e(for)
h(the)h(second)h(argumen)o(t)d(to)h(b)q(e)h(an)f(arbitrary)224
802 y(n)o(um)o(b)q(er.)27 b(The)18 b(optional)d FG(fpParam)h
FN(mark)o(er)g(indicates)h(that)g(the)h(datum)e(is)h(a)f(\015oating)224
852 y(p)q(oin)o(t)e(v)n(alue.)425 914 y FG(blkPar)f FK(p)n(ar-size,)h
(asm-o\013set,)h(opt-alignment)287 977 y FN(The)f(e\013ect)i(of)d(the)i
FG(blkPar)d FN(instruction)i(is)g(to)g(cop)o(y)g FK(p)n(ar-size)i
FN(b)o(ytes)f(from)d(the)j(lo)q(ca-)224 1026 y(tion)e(p)q(oin)o(ted)h
(to)f(b)o(y)h(the)g(top)f(of)g(the)h(abstract)h(stac)o(k,)e(and)g(to)h
(mo)o(v)o(e)e(this)h(datum)f(to)i(the)224 1076 y(parameter)i(lo)q
(cation.)21 b(The)16 b(address)h(is)e(p)q(opp)q(ed)i(from)c(the)j
(abstract)h(stac)o(k.)23 b(T)o(ypically)224 1126 y(the)15
b(parameter)f(lo)q(cation)f(will)g(b)q(e)i(the)g(top)f(of)f(the)i(run)o
(time)e(stac)o(k,)h(or)g(some)g(p)q(ostion)g(in)224 1176
y(the)j(parameter)f(assem)o(bly)f(area)h(starting)g(at)g(o\013set)h
FK(p)n(ar-o\013set)t FN(.)25 b(In)16 b(the)h(case)g(of)e(bac)o(k-)224
1226 y(ends)g(whic)o(h)f(pass)h(parameters)f(on)g(a)f(run)o(time)g
(stac)o(k,)h(it)g(is)g(p)q(ermissible)f(for)h(the)g(second)224
1275 y(argumen)o(t)g(to)g(b)q(e)h(an)g(arbitrary)f(n)o(um)o(b)q(er.)19
b(An)c(optional)e(third)i(argumen)o(t)e(sp)q(eci\014es)k(the)224
1325 y(source)f(alignmen)o(t.)287 1388 y(In)h(an)o(y)h(case,)h(the)f
(details)f(of)g(whic)o(h)h(parts)g(of)f(the)h(parameter)g(assem)o(bly)e
(area)i(\(if)224 1438 y(an)o(y\))e(are)f(mo)o(v)o(ed)f(in)o(to)h
(registers)i(is)f(transparen)o(t)g(to)g(the)g FK(DCo)n(de)j
FN(form.)i(Ho)o(w)o(ev)o(er,)16 b(the)224 1487 y(metho)q(d)g(of)f
(parameter)h(assem)o(bly)e(cannot)j(b)q(e)f(hidden)g(from)f(the)h(fron)
o(tend,)g(since)h(this)224 1537 y(constrains)e(the)g(order)f(of)f
(parameter)h(ev)n(aluation.)224 1713 y FO(Returning)f(function)g(v)m
(alues)224 1813 y FN(F)m(unction)19 b(v)n(alues)f(are)h(comm)o
(unicated)e(b)o(y)h(means)g(of)g(the)i FG(popRet)p FM(X)s
FG(,)h(pshRet)p FM(X)g FN(ab-)224 1863 y(straction.)k(The)16
b(\014rst)h(of)e(these)j(p)q(ops)e(the)g(top-of-stac)o(k)g
FK(wor)n(d,)g(\015o)n(at)21 b FN(or)15 b FK(double)20
b FN(to)c(the)224 1912 y(return)f(lo)q(cation.)h(This)d(is)g(t)o
(ypically)f(a)g(mac)o(hine)g(register.)19 b(The)13 b
FG(pshRet)p FM(X)j FN(instructions)224 1962 y(tak)o(e)d(the)h(v)n(alue)
e(in)h(the)g(return)i(lo)q(cation)d(and)h(push)g(it)g(on)o(to)f(the)i
(abstract)g(stac)o(k.)k(In)13 b(the)224 2012 y(case)i(of)f(short)g(v)n
(alues,)f(the)i(exact)f(sign)g(or)g(zero)g(extension)h(is)f(sp)q
(eci\014ed.)287 2075 y FK(DCo)n(de)k FN(pro)o(vides)e(some)e(c)o(hoice)
h(in)g(the)h(w)o(a)o(y)e(that)h(structured)i(function)e(v)n(alues)g
(are)224 2124 y(returned.)33 b(The)18 b(default)g(is)g(to)g(require)h
(the)f(fron)o(tend)h(to)f(allo)q(cate)f(space)i(for)f(the)h(re-)224
2174 y(turn)f(v)n(alue,)f(and)g(to)g(pass)g(a)g(reference)j(to)d(this)g
(lo)q(cation)f(as)h(an)g(implicit,)e(additional,)224
2224 y(\014rst)k(parameter)e(to)g(the)h(function.)28
b(Using)17 b(this)g(metho)q(d)g(do)q(es)h(not)f(require)i(an)o(y)d(sp)q
(e-)224 2274 y(cial)11 b(instructions.)18 b(Ho)o(w)o(ev)o(er,)12
b(for)f(mac)o(hines)g(for)g(whic)o(h)h(it)f(is)g(con)o(v)o(en)o(tional)
g(to)g(pass)i(suc)o(h)224 2324 y(function)e(return-v)n(alue)h(p)q(oin)o
(ters)g(in)f(a)g(dedicated)h(lo)q(cation)f(in)g(the)h(run)o(time)e
(stac)o(k)i(frame)224 2373 y(an)j(optional)f(abstraction)h(has)g(b)q
(een)h(in)o(tro)q(duced.)22 b(The)15 b FG(mkDstP)f FN(instruction)h(p)q
(ops)h(the)224 2423 y(top)f(of)g(the)g(abstract)h(stac)o(k)f(in)o(to)f
(the)i(dedicated)g(function)e(return-v)n(alue)i(p)q(oin)o(ter)f(lo)q
(ca-)224 2473 y(tion.)21 b(Within)14 b(the)h(called)g(pro)q(cedure)i
(the)e(function)g(return-v)n(alue)g(p)q(oin)o(ter)g(is)g(accessed)224
2523 y(b)o(y)f(means)f(of)g(the)i FG(pshDstP)d FN(instruction.)p
224 2610 577 2 v 271 2636 a Fy(4)288 2648 y Fx(Of)h(course,)e(the)h
(size)f(of)i(the)e(datum)g(could)g(ha)o(v)o(e)g(b)q(een)h(computed)d(b)
o(y)j(an)g(in)o(terpretiv)o(e)d(co)q(de)j(gen-)224 2688
y(erator)e(in)i(the)e(bac)o(k)o(end,)f(but)i(is)h(sp)q(eci\014ed)d
(explicitly)g(for)i(simplicit)o(y)m(.)p eop
%%Page: 290 296
290 295 bop 224 274 a FN(290)437 b FL(APPENDIX)15 b(A.)27
b(DCODE)14 b(REFERENCE)g(MANUAL)224 390 y FO(O\013-stac)o(k)i(temp)q
(oraries)224 467 y FK(DCo)n(de)e FN(pro)o(vides)d(for)f(v)n(alues)g(to)
g(b)q(e)h(mo)o(v)o(ed)e(from)g(o\013)h(the)h(stac)o(k)g(of)e(the)i
(abstract)h(mac)o(hine)224 517 y(in)o(to)i(o\013-stac)o(k)g(lo)q
(cations.)j(There)e(are)g(t)o(w)o(o)e(separate)i(mec)o(hanisms)d(for)h
(doing)g(this.)287 567 y(The)h FG(mkTmp,)20 b(pshTmp)12
b FN(instruction)i(pair)f(store)h(and)g(retriev)o(e)g(temp)q(orary)f(v)
n(alues)g(o\013)224 617 y(the)j(stac)o(k.)k(The)15 b
FK(make-temp)n(or)n(ary)i FN(instruction)e(non-destructiv)o(ely)h
(copies)f(the)g(datum)224 666 y(on)g(the)h(top-of-stac)o(k)f(in)o(to)g
(an)g(o\013-stac)o(k)g(lo)q(cation.)21 b(The)16 b(instruction)g(sp)q
(eci\014es)h(the)f(ab-)224 716 y(solute)f(v)n(alue)e(of)g(the)h
(o\013set)h(in)e(the)i(stac)o(k)f(frame)f(whic)o(h)g(the)i(fron)o(tend)
f(has)g(temp)q(orarily)224 766 y(reserv)o(ed)19 b(for)c(this)i(datum.)
23 b(Corresp)q(onding)17 b FK(push-temp)n(or)n(ary)i
FN(instructions)e(will)e(push)224 816 y(the)j(v)n(alue)e(on)o(to)g(the)
i(abstract)g(stac)o(k.)27 b(Sev)o(eral)17 b(p)q(oin)o(ts)g(need)h(to)e
(b)q(e)i(made)e(ab)q(out)g(this)224 866 y(mec)o(hanism.)f(Co)q(de)d
(generating)g(bac)o(k)o(ends)g(will)e(attempt)h(to)h(store)g(suc)o(h)g
(temp)q(oraries)g(in)224 915 y(mac)o(hine)g(registers,)j(and)d(are)i
(not)f(obliged)f(to)h(use)h(the)g(same)e(register)i(for)f(eac)o(h)g
(de\014ning)224 965 y(o)q(ccurrence)18 b(of)c(a)g(temp)q(orary)g(at)h
(a)f(particular)g(o\013set.)21 b(The)15 b(mec)o(hanism)e(should)h
(there-)224 1015 y(fore)j(not)g(b)q(e)h(used)f(to)g(attempt)f(to)h
(merge)f(v)n(alues)h(computed)f(along)g(di\013eren)o(t)i(con)o(trol)224
1065 y(paths)f(in)f(a)g(program.)25 b(F)m(urthermore,)16
b(in)o(terpretiv)o(e)i(co)q(de)f(generators)h(ma)o(y)c(treat)j(cer-)224
1115 y(tain)d(temp)q(oraries)g(as)h(sym)o(b)q(olic)d(quan)o(tities,)i
(so)g(that)g(the)h(temp)q(orary)f(has)g(no)g(concrete)224
1164 y(existence)j(at)e(run)o(time,)e(either)j(at)e(the)i(stac)o(k)f
(frame)e(lo)q(cation)h(whic)o(h)h(w)o(as)f(sp)q(eci\014ed,)i(or)224
1214 y(in)e(a)f(mac)o(hine)g(register.)287 1264 y(The)i
FG(popFi,)20 b(pshFi)14 b FN(instruction)g(pair)h(store)g(and)f
(retriev)o(e)i(v)n(alues)e(in)g(o\013-stac)o(k)h(lo-)224
1314 y(cations)h(whic)o(h)f(are)h(determined)f(b)o(y)g(the)h(bac)o(k)o
(end.)22 b(The)16 b FK(p)n(op-)p FN(\010)f(instruction)h(p)q(ops)g(the)
224 1364 y(top)j(of)f(the)i(abstract)f(stac)o(k)g(in)o(to)f(an)h
(o\013-stac)o(k)g(lo)q(cation)f(whic)o(h)g(is)h(allo)q(cated)f(b)o(y)h
(the)224 1414 y(bac)o(k)o(end.)29 b(The)18 b(argumen)o(t)e(to)h(the)h
(instruction)f(is)g(simply)e(an)j(index)f(whic)o(h)g(uniquely)224
1463 y(selects)e(a)e(particular)f(lo)q(cation.)17 b(Ev)o(ery)d(suc)o(h)
g(instruction)f(with)f(the)i(same)e(index)h(within)224
1513 y(an)o(y)e(single)g(pro)q(cedure,)i(will)c(mo)o(v)o(e)h(the)h
(top-of-stac)o(k)g(to)g(the)g(same)f(lo)q(cation.)17
b(The)11 b FK(psh-)p FN(\010)224 1563 y(instruction)k(pushes)g(the)f
(sa)o(v)o(ed)g(v)n(alue)g(bac)o(k)g(on)o(to)f(the)h(abstract)h(stac)o
(k.)287 1613 y(This)c(instruction)g(pair)g(is)g(suitable)g(for)f
(merging)g(v)n(alues)g(whic)o(h)h(are)h(computed)e(along)224
1663 y(di\013eren)o(t)15 b(con)o(trol)f(paths)h(in)e(a)h(program,)e(as)
i(is)g(required)h(b)o(y)f(language)f FM(C)s FN('s)h(conditional)224
1712 y(expressions.)19 b(Ho)o(w)o(ev)o(er,)11 b(it)f(is)g(preferable)i
(in)e(all)f(suc)o(h)i(cases)h(for)e(the)h(fron)o(tend)g(to)f(allo)q
(cate)224 1762 y(a)k(dumm)o(y)d(lo)q(cal)i(v)n(ariable,)g(with)h
(`\(0,0,0\)')d(attributes)k(\(see)h(section)f(A.4.1\),)d(and)i(merge)
224 1812 y(v)n(alues)h(b)o(y)f(assigning)g(to)h(this)f(v)n(ariable.)20
b(This)14 b(attribute)h(assignmen)o(t)f(will)f(ensure)j(that)224
1862 y(the)f(v)n(ariable)e(is)g(considered)j(for)d(allo)q(cation)g(to)g
(a)h(mac)o(hine)e(register.)p eop
%%Page: 291 297
291 296 bop 224 274 a FL(A.5.)32 b(ST)m(A)m(TEMENTS)985
b FN(291)224 390 y FO(Alphab)q(etical)13 b(instructio)o(n)g(list)224
499 y FN(In)h(the)g(follo)o(wing)d(table)i(parameters)h(in)f(square)h
(brac)o(k)o(ets)h(mean)d(that)i(the)g(argumen)o(t)e(is)224
549 y(optional.)19 b(Instructions)d(mark)o(ed)d(with)h(a)g(dagger)h
(sign)f Ft(y)h FN(are)g(instructions)g(whic)o(h)f(ha)o(v)o(e)224
599 y(to)d(do)g(with)g(the)h(sp)q(eci\014cs)h(of)e(segmen)o(ted)g(arc)o
(hitectures)j(suc)o(h)d(as)h(the)g(iap)o(x86,)d(and)i(migh)o(t)224
649 y(b)q(e)k(ignored)f(in)f(other)i(v)o(ersions.)p 224
829 1464 2 v 223 874 2 46 v 256 861 a Fv(op)q(co)q(de)p
430 874 V 64 w(params)p 693 874 V 123 w(description)p
1687 874 V 224 876 1464 2 v 223 1013 2 137 v 347 908
a FF(abs)p 430 1013 V 49 w FD([mo)q(de])c Fm(:)6 b(:)g(:)g(:)g(:)p
693 1013 V 60 w FD(T)m(ak)o(es)14 b(the)f(in)o(teger)h(on)g(the)f(top)g
(of)g(the)h(stac)o(k)f(and)h(replaces)h(it)718 954 y(b)o(y)c(its)g
(absolute)i(v)n(alue.)k(If)10 b(mo)q(de)h(is)g FE(intOver)e
FD(then)i(an)g(attempt)718 999 y(to)i(negate)h(the)f(minim)o(um)i(in)o
(teger)f(is)g(trapp)q(ed)p 1687 1013 V 223 1104 2 92
v 289 1045 a FF(absDbl)p 430 1104 V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)h(:)f(:)g(:)p 693 1104 V 56 w FD(T)m(ak)o(es)14
b(the)f(double)i(precision)g(\015oating)g(p)q(oin)o(t)g(n)o(um)o(b)q
(er)e(on)h(the)718 1091 y(top)g(of)e(the)i(stac)o(k)f(and)h(replaces)g
(it)f(b)o(y)h(its)f(absolute)i(v)n(alue)p 1687 1104 V
223 1196 V 289 1136 a FF(absFlt)p 430 1196 V 54 w Fm(:)6
b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)h(:)f(:)g(:)p 693 1196
V 56 w FD(T)m(ak)o(es)16 b(the)f(single)i(precision)h(\015oating)f(p)q
(oin)o(t)f(n)o(um)o(b)q(er)g(on)g(the)718 1182 y(top)e(of)e(the)i(stac)
o(k)f(and)h(replaces)g(it)f(b)o(y)h(its)f(absolute)i(v)n(alue)p
1687 1196 V 223 1333 2 137 v 347 1228 a FF(add)p 430
1333 V 49 w FD([mo)q(de])c Fm(:)6 b(:)g(:)g(:)g(:)p 693
1333 V 60 w FD(Adds)11 b(the)g(t)o(w)o(o)f(v)n(alues)i(on)f(the)f(top)h
(of)f(the)h(stac)o(k)g(with)g(o)o(v)o(er\015o)o(w)718
1273 y(trapping)19 b(seman)o(tics)f(as)f(sp)q(eci\014ed)i(b)o(y)e(mo)q
(de.)29 b(The)16 b(stac)o(k)i(is)718 1319 y(p)q(opp)q(ed)d(b)o(y)e(t)o
(w)o(o,)g(and)g(the)g(result)h(pushed)p 1687 1333 V 223
1561 2 229 v 289 1365 a FF(addAdr)p 430 1561 V 54 w Fm(:)6
b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)h(:)f(:)g(:)p 693 1561
V 56 w FD(Adds)14 b(the)g(v)n(alue)h(on)e(the)h(top-of-stac)o(k)g(to)f
(the)h(address)g(b)q(elo)o(w)718 1410 y(that.)33 b(The)18
b(addend)h(ma)o(y)f(b)q(e)h(either)g(p)q(ositiv)o(e)h(or)e(negativ)o
(e,)718 1456 y(and)12 b(the)g(computation)h(is)f(p)q(erformed)g(mo)q
(dulo)h(the)e(size)h(of)f(the)718 1502 y(address)g(space.)16
b(The)9 b(stac)o(k)h(is)g(p)q(opp)q(ed)h(b)o(y)e(t)o(w)o(o,)h(and)g
(the)f(result)718 1547 y(pushed)p 1687 1561 V 223 1652
2 92 v 289 1593 a FF(addDbl)p 430 1652 V 54 w Fm(:)d(:)g(:)g(:)g(:)g(:)
g(:)g(:)g(:)h(:)f(:)g(:)p 693 1652 V 56 w FD(Adds)16
b(the)f(t)o(w)o(o)g FE(double)s FD(s)e(on)i(the)g(top-of-stac)o(k.)24
b(The)15 b(stac)o(k)h(is)718 1639 y(p)q(opp)q(ed)f(b)o(y)e(t)o(w)o(o,)g
(and)g(the)g(result)h(pushed)p 1687 1652 V 223 1744 V
289 1684 a FF(addFlt)p 430 1744 V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)h(:)f(:)g(:)p 693 1744 V 56 w FD(Adds)19 b(the)f(t)o(w)o(o)g
FE(\015o)n(at)t FD(s)e(on)i(the)g(top-of-stac)o(k.)32
b(The)18 b(stac)o(k)h(is)718 1730 y(p)q(opp)q(ed)c(b)o(y)e(t)o(w)o(o,)g
(and)g(the)g(result)h(pushed)p 1687 1744 V 223 1972 2
229 v 289 1776 a FF(addOff)p 430 1972 V 47 w FD(o\013set)5
b Fm(:)i(:)f(:)g(:)g(:)g(:)g(:)p 693 1972 V 55 w FD(Adds)19
b(the)g(constan)o(t)g(o\013set)g(to)f(the)h(address)g(on)g(the)g(top)f
(of)718 1821 y(the)c(stac)o(k.)k(The)13 b(o\013set)h(ma)o(y)f(b)q(e)g
(either)h(p)q(ositiv)o(e)i(or)d(negativ)o(e,)718 1867
y(and)f(the)g(computation)h(is)f(p)q(erformed)g(mo)q(dulo)h(the)e(size)
h(of)f(the)718 1913 y(address)18 b(space.)27 b(The)17
b(new)f(address)h(v)n(alue)h(replaces)g(the)e(old)718
1958 y(on)e(the)f(top-of-stac)o(k)p 1687 1972 V 223 2063
2 92 v 289 2004 a FF(andWrd)p 430 2063 V 54 w Fm(:)6
b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)h(:)f(:)g(:)p 693 2063
V 56 w FD(Bit)o(wise)19 b FE(AND)i FD(of)c(t)o(w)o(o)h(top-of-stac)o(k)
g(v)n(alues.)33 b(The)17 b(stac)o(k)i(is)718 2050 y(p)q(opp)q(ed)c(b)o
(y)e(t)o(w)o(o,)g(and)g(the)g(result)h(pushed)p 1687
2063 V 223 2200 2 137 v 249 2095 a FF(assign16)p 430
2200 V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)h(:)f(:)g(:)p
693 2200 V 56 w FD(Assigns)17 b(the)f(least)h(signi\014can)o(t)h
(16-bits)f(of)e(the)h(v)n(alue)h(second)718 2141 y(on)c(the)g(stac)o(k)
f(to)h(the)f(address)i(sp)q(eci\014ed)g(on)f(the)f(top-of-stac)o(k.)718
2187 y(The)h(stac)o(k)h(is)f(p)q(opp)q(ed)i(b)o(y)e(t)o(w)o(o)p
1687 2200 V 223 2337 V 249 2232 a FF(assign32)p 430 2337
V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)h(:)f(:)g(:)p
693 2337 V 56 w FD(Assigns)17 b(the)f(least)h(signi\014can)o(t)h
(32-bits)f(of)e(the)h(v)n(alue)h(second)718 2278 y(on)c(the)g(stac)o(k)
f(to)h(the)f(address)i(sp)q(eci\014ed)g(on)f(the)f(top-of-stac)o(k.)718
2324 y(The)h(stac)o(k)h(is)f(p)q(opp)q(ed)i(b)o(y)e(t)o(w)o(o)p
1687 2337 V 223 2474 V 269 2369 a FF(assignB)p 430 2474
V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)h(:)f(:)g(:)p
693 2474 V 56 w FD(Assigns)16 b(the)f(least)g(signi\014can)o(t)i
FE(byte)e FD(of)f(the)h(v)n(alue)g(second)h(on)718 2415
y(the)k(stac)o(k)f(to)g(the)g(address)h(sp)q(eci\014ed)h(on)e(the)g
(top-of-stac)o(k.)718 2460 y(The)13 b(stac)o(k)h(is)f(p)q(opp)q(ed)i(b)
o(y)e(t)o(w)o(o)p 1687 2474 V 223 2611 V 269 2506 a FF(assignD)p
430 2611 V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)h(:)f(:)g(:)p
693 2611 V 56 w FD(Assigns)19 b(the)f FE(double)g FD(second)g(on)g(the)
g(stac)o(k)g(to)f(the)h(address)718 2552 y(sp)q(eci\014ed)j(on)d(the)h
(top-of-stac)o(k.)32 b(The)19 b(stac)o(k)f(is)h(p)q(opp)q(ed)h(b)o(y)
718 2597 y(t)o(w)o(o)p 1687 2611 V 223 2702 2 92 v 269
2643 a FF(assignF)p 430 2702 V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)
g(:)h(:)f(:)g(:)p 693 2702 V 56 w FD(Assigns)12 b(the)f
FE(\015o)n(at)h FD(second)g(on)f(the)f(stac)o(k)h(to)g(the)f(address)i
(sp)q(ec-)718 2689 y(i\014ed)j(on)e(the)g(top-of-stac)o(k.)k(The)c
(stac)o(k)h(is)f(p)q(opp)q(ed)i(b)o(y)e(t)o(w)o(o)p 1687
2702 V 224 2704 1464 2 v eop
%%Page: 292 298
292 297 bop 224 274 a FN(292)437 b FL(APPENDIX)15 b(A.)27
b(DCODE)14 b(REFERENCE)g(MANUAL)p 224 351 1458 2 v 223
396 2 46 v 249 383 a Fv(op)q(co)q(de)p 424 396 V 65 w(params)p
686 396 V 123 w(description)p 1681 396 V 224 398 1458
2 v 223 489 2 92 v 262 430 a FF(assignW)p 424 489 V 54
w Fm(:)7 b(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
686 489 V 57 w FD(Assigns)11 b(the)f FE(wor)n(d)j FD(second)e(on)f(the)
g(stac)o(k)h(to)e(the)h(address)h(sp)q(ec-)712 476 y(i\014ed)j(on)g
(the)f(top-of-stac)o(k.)k(The)c(stac)o(k)g(is)h(p)q(opp)q(ed)g(b)o(y)g
(t)o(w)o(o)p 1681 489 V 223 581 V 282 521 a FF(bitNeg)p
424 581 V 54 w Fm(:)7 b(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
686 581 V 57 w FD(Bit)o(wise)11 b(negate)f(the)g(top-of-stac)o(k)g(v)n
(alue.)17 b(The)10 b(result)g(replaces)712 567 y(the)j(top)g(of)g(stac)
o(k)g(v)n(alue)p 1681 581 V 223 855 2 274 v 302 613 a
FF(blkCp)p 424 855 V 48 w FD([n)o(um)o(b)q(er])c Fm(:)e(:)f(:)p
686 855 V 59 w FD(Blo)q(c)o(k)20 b(cop)o(y)m(.)33 b(This)19
b(instruction)i(has)e(three)f(parameters)h(on)712 658
y(the)c(stac)o(k:)20 b(on)15 b(the)f(top-of-stac)o(k)h(is)g(the)g(n)o
(um)o(b)q(er)g(of)f(b)o(ytes)h(of)712 704 y(the)h(blo)q(c)o(k,)h(b)q
(elo)o(w)g(that)f(is)g(the)g(source)g(address,)h(b)q(elo)o(w)f(that)712
750 y(the)j(destination)j(address.)36 b(All)20 b(three)f(v)n(alues)h
(are)f(p)q(opp)q(ed.)712 795 y(The)14 b(optional)j(n)o(um)o(b)q(er)f
(is)f(1,)f(2,)h(4)f(or)h(8)f(and)h(giv)o(es)h(the)e(blo)q(c)o(k)712
841 y(alignmen)o(t.)19 b(The)13 b(default)h(alignmen)o(t)h(is)f(1)f
(\(b)o(yte)g(aligned\))p 1681 855 V 223 1403 2 548 v
282 887 a FF(blkPar)p 424 1403 V 48 w FD(n)o(um)o(b)q(er,)450
932 y(n)o(um)o(b)q(er)450 978 y([,n)o(um)o(b)q(er])19
b Fm(:)6 b(:)p 686 1403 V 712 887 a FD(This)11 b(instruction)h(is)f(p)q
(erforms)g(a)f(parameter)h(blo)q(c)o(k)g(cop)o(y)m(.)17
b(The)712 932 y(top)i(of)f(the)h(stac)o(k)g(is)g(a)f(p)q(oin)o(ter)i
(to)f(the)g(actual)g(parameter.)712 978 y(The)13 b(\014rst)g(t)o(w)o(o)
g(argumen)o(ts)h(to)e(this)i(directiv)o(e)h(are)e(the)g(param-)712
1024 y(eter)i(size,)h(and)g(the)f(destination)j(lo)q(cation)f(in)f(the)
f(parameter)712 1069 y(assem)o(bly)20 b(area.)32 b(An)18
b(optional)i(third)f(parameter)f(giv)o(es)i(the)712 1115
y FE(sour)n(c)n(e)15 b FD(alignmen)o(t)k(b)q(oundary)m(,)g(and)e(is)g
(alw)o(a)o(ys)h(1,)f(2,)h(4)e(or)h(8.)712 1161 y(In)e(the)g(case)g(of)f
(mac)o(hines)i(whic)o(h)g(pass)f(their)h(parameters)f(on)712
1206 y(the)i(stac)o(k,)g(the)g(n)o(um)o(b)q(er)g(of)g(b)o(ytes)g(sp)q
(eci\014ed)h(will)g(b)q(e)f(copied)712 1252 y(to)h(the)g(run)o(time)i
(stac)o(k.)32 b(In)18 b(the)h(case)f(of)g(\014xed)h(parameters)712
1297 y(the)c(blo)q(c)o(k)h(will)h(b)q(e)e(copied)i(to)d(the)h(sp)q
(eci\014ed)i(o\013set)f(from)f(the)712 1343 y(presen)o(t)d(stac)o(k)h
(p)q(oin)o(ter.)k(In)12 b(either)h(case,)f(the)g(stac)o(k)g(is)g(p)q
(opp)q(ed)712 1389 y(b)o(y)h(one)p 1681 1403 V 223 1494
2 92 v 262 1434 a FF(boolNeg)p 424 1494 V 54 w Fm(:)7
b(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p 686 1494
V 57 w FD(Negates)j(the)g(Bo)q(olean)i(v)n(alue)f(on)f(the)g
(top-of-stac)o(k.)16 b(The)9 b(result)712 1480 y(replaces)14
b(the)g(top-of-stac)o(k)f(v)n(alue)p 1681 1494 V 223
1540 2 46 v 262 1526 a FF(brFalse)p 424 1540 V 48 w FD(lab)q(el)e
Fm(:)6 b(:)g(:)g(:)g(:)g(:)h(:)p 686 1540 V 59 w FD(Branc)o(h)k(if)f
(the)g(top-of-stac)o(k)g(v)n(alue)h(is)f(zero,)g(and)h(p)q(op)f(the)g
(stac)o(k)p 1681 1540 V 223 1631 2 92 v 282 1571 a FF(brTrue)p
424 1631 V 48 w FD(lab)q(el)h Fm(:)6 b(:)g(:)g(:)g(:)g(:)h(:)p
686 1631 V 59 w FD(Branc)o(h)13 b(if)f(the)h(top-of-stac)o(k)f(v)n
(alue)h(is)g(non-zero,)g(and)g(p)q(op)g(the)712 1617
y(stac)o(k)p 1681 1631 V 223 1676 2 46 v 282 1663 a FF(branch)p
424 1676 V 48 w FD(lab)q(el)e Fm(:)6 b(:)g(:)g(:)g(:)g(:)h(:)p
686 1676 V 59 w FD(Branc)o(h)14 b(unconditional)q(l)q(y)p
1681 1676 V 223 1768 2 92 v 321 1708 a FF(call)p 424
1768 V 49 w FD(iden)o(ti\014er,)450 1754 y(n)o(um)o(b)q(er)s
Fm(:)7 b(:)f(:)g(:)g(:)p 686 1768 V 712 1708 a FD(Call)14
b(the)e(pro)q(cedure)i(designated)h(b)o(y)e(the)g(iden)o(ti\014er,)h
(with)g(the)712 1754 y(sp)q(eci\014ed)h(n)o(um)o(b)q(er)f(of)e
(parameters)p 1681 1768 V 223 1905 2 137 v 302 1800 a
FF(crdGE)p 424 1905 V 54 w Fm(:)7 b(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)p 686 1905 V 57 w FD(Compares)18 b(t)o(w)o(o)g(top)g(v)n(alues)i
(as)e(unsigned)i(w)o(ords.)32 b(Returns)712 1845 y FE(TR)o(UE)15
b FD(if)c(the)f(second)i(from)e(the)h(top)g(is)g(greater)g(than)h(or)e
(equal)712 1891 y(to)j(the)g(top.)k(The)c(stac)o(k)h(is)f(p)q(opp)q(ed)
i(b)o(y)e(t)o(w)o(o)p 1681 1905 V 223 2042 V 302 1937
a FF(crdGT)p 424 2042 V 54 w Fm(:)7 b(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)p 686 2042 V 57 w FD(Compares)18 b(t)o(w)o(o)g(top)g(v)n
(alues)i(as)e(unsigned)i(w)o(ords.)32 b(Returns)712 1982
y FE(TR)o(UE)15 b FD(if)c(the)g(second)h(from)f(the)g(top)g(is)h
(greater)f(than)h(the)f(top.)712 2028 y(The)i(stac)o(k)g(is)h(p)q(opp)q
(ed)g(b)o(y)g(t)o(w)o(o)p 1681 2042 V 223 2179 V 302
2074 a FF(crdLE)p 424 2179 V 54 w Fm(:)7 b(:)f(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)p 686 2179 V 57 w FD(Compares)18 b(t)o(w)o(o)g(top)g(v)n
(alues)i(as)e(unsigned)i(w)o(ords.)32 b(Returns)712 2119
y FE(TR)o(UE)16 b FD(if)c(the)g(second)h(from)f(the)g(top)g(is)g(less)h
(than)g(or)f(equal)h(to)712 2165 y(the)g(top.)k(The)c(stac)o(k)h(is)f
(p)q(opp)q(ed)i(b)o(y)e(t)o(w)o(o)p 1681 2179 V 223 2316
V 302 2211 a FF(crdLS)p 424 2316 V 54 w Fm(:)7 b(:)f(:)g(:)g(:)g(:)g(:)
g(:)g(:)g(:)g(:)g(:)p 686 2316 V 57 w FD(Compares)18
b(t)o(w)o(o)g(top)g(v)n(alues)i(as)e(unsigned)i(w)o(ords.)32
b(Returns)712 2256 y FE(TR)o(UE)21 b FD(if)16 b(the)h(second)g(from)f
(the)h(top)f(is)h(less)g(than)g(the)g(top.)712 2302 y(The)c(stac)o(k)g
(of)g(the)g(abstract)h(mac)o(hine)g(is)g(p)q(opp)q(ed)g(b)o(y)g(t)o(w)o
(o)p 1681 2316 V 223 2453 V 262 2348 a FF(cutPars)p 424
2453 V 48 w FD(n)o(um)o(b)q(er)s Fm(:)7 b(:)f(:)g(:)g(:)p
686 2453 V 53 w FD(Remo)o(v)o(e)15 b(parameter)h(b)o(ytes)f(\(only)h
(for)e(mac)o(hines)i(whic)o(h)g(pass)712 2393 y(parameters)d(b)o(y)f
(pushing)h(them)f(on)o(to)g(the)g(stac)o(k)g(of)g(the)f(actual)712
2439 y(mac)o(hine)j({)f(the)h FE(c)n(oncr)n(ete)d(stack)t
FD(\))p 1681 2453 V 223 2544 2 92 v 282 2485 a FF(dblRel)p
424 2544 V 48 w FD(relop)d Fm(:)f(:)f(:)g(:)g(:)g(:)g(:)p
686 2544 V 58 w FD(P)o(op)14 b(and)h(compare)f FE(double)s
FD(s)e(on)i(top)g(of)f(stac)o(k,)h(and)h(push)g(the)712
2530 y(Bo)q(olean)g(result.)j(Righ)o(t)c(op)q(erand)g(is)g(initiall)q
(y)i(top-of-stac)o(k)p 1681 2544 V 223 2635 V 282 2576
a FF(derefF)p 424 2635 V 54 w Fm(:)7 b(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)p 686 2635 V 57 w FD(Dereferences)11 b(the)f(p)q(oin)o(ter)h
(to)f FE(\015o)n(at)h FD(on)g(the)f(top-of-stac)o(k.)16
b(The)712 2622 y(top-of-stac)o(k)d(v)n(alue)i(is)e(replaced)i(b)o(y)e
(the)g(result)p 1681 2635 V 224 2637 1458 2 v eop
%%Page: 293 299
293 298 bop 224 274 a FL(A.5.)32 b(ST)m(A)m(TEMENTS)985
b FN(293)p 224 351 1464 2 v 223 396 2 46 v 256 383 a
Fv(op)q(co)q(de)p 430 396 V 64 w(params)p 693 396 V 123
w(description)p 1687 396 V 224 398 1464 2 v 223 489 2
92 v 289 430 a FF(derefD)p 430 489 V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)h(:)f(:)g(:)p 693 489 V 56 w FD(Dereferences)17
b(the)g(p)q(oin)o(ter)g(to)f FE(double)h FD(on)g(the)f(top)g(of)g(stac)
o(k.)718 476 y(The)d(top-of-stac)o(k)h(v)n(alue)g(is)g(replaced)g(b)o
(y)f(the)h(result)p 1687 489 V 223 626 2 137 v 269 521
a FF(derefSB)p 430 626 V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)h
(:)f(:)g(:)p 693 626 V 56 w FD(Dereferences)21 b(the)f(p)q(oin)o(ter)h
(to)f FE(signe)n(d)d(byte)k FD(on)g(the)e(top)h(of)718
567 y(stac)o(k.)k(The)15 b(v)n(alue)h(on)g(the)f(top)g(of)g(the)g(stac)
o(k)g(is)h(replaced)h(b)o(y)718 613 y(the)d(dereferenced)g(v)n(alue)p
1687 626 V 223 763 V 249 658 a FF(derefS16)p 430 763
V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)h(:)f(:)g(:)p
693 763 V 56 w FD(Dereferences)12 b(the)f(p)q(oin)o(ter)i(to)d
FE(signe)n(d)g(16-bit)g(wor)n(d)15 b FD(on)c(the)g(top)718
704 y(of)h(stac)o(k.)k(The)c(v)n(alue)h(on)e(the)h(top)g(of)f(the)h
(stac)o(k)g(is)g(replaced)h(b)o(y)718 750 y(the)h(dereferenced)g(v)n
(alue)p 1687 763 V 223 900 V 249 795 a FF(derefS32)p
430 900 V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)h(:)f(:)g(:)p
693 900 V 56 w FD(Dereferences)12 b(the)f(p)q(oin)o(ter)i(to)d
FE(signe)n(d)g(32-bit)g(wor)n(d)15 b FD(on)c(the)g(top)718
841 y(of)h(stac)o(k.)k(The)c(v)n(alue)h(on)e(the)h(top)g(of)f(the)h
(stac)o(k)g(is)g(replaced)h(b)o(y)718 887 y(the)h(dereferenced)g(v)n
(alue)p 1687 900 V 223 1037 V 269 932 a FF(derefUB)p
430 1037 V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)h(:)f(:)g(:)p
693 1037 V 56 w FD(Dereferences)16 b(the)f(p)q(oin)o(ter)i(to)e
FE(unsigne)n(d)d(byte)17 b FD(on)e(the)g(top)g(of)718
978 y(stac)o(k.)24 b(The)15 b(v)n(alue)h(on)g(the)f(top)g(of)g(the)g
(stac)o(k)g(is)h(replaced)h(b)o(y)718 1024 y(the)d(dereferenced)g(v)n
(alue)p 1687 1037 V 223 1174 V 249 1069 a FF(derefU16)p
430 1174 V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)h(:)f(:)g(:)p
693 1174 V 56 w FD(Dereferences)15 b(the)f(p)q(oin)o(ter)i(to)e
FE(unsigne)n(d)d(16-bit)i(wor)n(d)18 b FD(on)c(the)718
1115 y(top)d(of)f(stac)o(k.)16 b(The)10 b(v)n(alue)i(on)e(the)h(top)f
(of)g(the)g(stac)o(k)h(is)g(replaced)718 1161 y(b)o(y)j(the)f
(dereferenced)h(v)n(alue)p 1687 1174 V 223 1311 V 249
1206 a FF(derefU32)p 430 1311 V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)h(:)f(:)g(:)p 693 1311 V 56 w FD(Dereferences)15
b(the)f(p)q(oin)o(ter)i(to)e FE(unsigne)n(d)d(32-bit)i(wor)n(d)18
b FD(on)c(the)718 1252 y(top)d(of)f(stac)o(k.)16 b(The)10
b(v)n(alue)i(on)e(the)h(top)f(of)g(the)g(stac)o(k)h(is)g(replaced)718
1297 y(b)o(y)j(the)f(dereferenced)h(v)n(alue)p 1687 1311
V 223 1448 V 289 1343 a FF(derefW)p 430 1448 V 54 w Fm(:)6
b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)h(:)f(:)g(:)p 693 1448
V 56 w FD(Dereferences)11 b(the)f(p)q(oin)o(ter)h(to)f
FE(wor)n(d)j FD(on)d(the)g(top)g(of)g(stac)o(k.)16 b(The)718
1389 y(v)n(alue)g(on)e(the)h(top)f(of)g(the)g(stac)o(k)h(is)g(replaced)
g(b)o(y)g(the)f(derefer-)718 1434 y(enced)g(v)n(alue)p
1687 1448 V 223 1631 2 183 v 347 1480 a FF(div)p 430
1631 V 49 w FD(mo)q(de)t Fm(:)7 b(:)f(:)g(:)g(:)g(:)g(:)p
693 1631 V 54 w FD(P)o(erforms)13 b(the)g(div)h(op)q(eration)h(on)e
(the)g(t)o(w)o(o)f(v)n(alues)i(on)f(the)g(top)718 1526
y(of)j(the)h(stac)o(k)f(with)h(seman)o(tics)g(as)g(sp)q(eci\014ed)h(b)o
(y)e(mo)q(de.)27 b(The)718 1571 y(righ)o(t)12 b(op)q(erand)g(is)g(on)f
(top.)16 b(The)11 b(stac)o(k)g(is)h(p)q(opp)q(ed)g(b)o(y)f(t)o(w)o(o,)f
(and)718 1617 y(the)k(result)g(pushed)p 1687 1631 V 223
1768 2 137 v 289 1663 a FF(divDbl)p 430 1768 V 54 w Fm(:)6
b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)h(:)f(:)g(:)p 693 1768
V 56 w FD(Divides)27 b(the)e FE(double)s FD(s)d(on)i(the)h(top-of-stac)
o(k.)51 b(The)24 b(righ)o(t)718 1708 y(op)q(erand)d(is)e(on)g(top.)35
b(The)18 b(stac)o(k)h(is)h(p)q(opp)q(ed)g(b)o(y)f(t)o(w)o(o,)g(and)718
1754 y(the)14 b(result)g(pushed)p 1687 1768 V 223 1905
V 289 1800 a FF(divFlt)p 430 1905 V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)h(:)f(:)g(:)p 693 1905 V 56 w FD(Divides)14
b(the)d FE(\015o)n(at)t FD(s)e(on)i(the)g(top-of-stac)o(k.)17
b(The)11 b(righ)o(t)h(op)q(erand)718 1845 y(is)18 b(on)e(top.)28
b(The)16 b(stac)o(k)h(is)g(p)q(opp)q(ed)h(b)o(y)f(t)o(w)o(o,)f(and)i
(the)e(result)718 1891 y(pushed)p 1687 1905 V 223 2179
2 274 v 289 1937 a FF(dRound)p 430 2179 V 47 w FD([mo)q(de])11
b Fm(:)6 b(:)g(:)g(:)g(:)p 693 2179 V 60 w FD(Con)o(v)o(ert)19
b FE(double)f FD(to)g(w)o(ord)g(rounding)j(to)d(nearest.)32
b(If)18 b(mo)q(de)718 1982 y(is)g FE(intOver)i FD(or)e
FE(cr)n(dOver)i FD(then)e(v)n(alues)h(outside)f(the)g(\(resp)q(ec-)718
2028 y(tiv)o(ely\))c(signed)f(or)f(unsigned)i(range)e(are)g(trapp)q
(ed.)17 b(If)11 b(trapping)718 2074 y(is)17 b(not)f(sp)q(eci\014ed,)i
(then)e(bac)o(k)o(ends)i(should)f(pro)q(duce)g(the)f(cor-)718
2119 y(rect)e(v)n(alue)h(if)f(p)q(ossible.)22 b(The)14
b(top-of-stac)o(k)g(v)n(alue)h(is)g(replaced)718 2165
y(b)o(y)f(the)f(result)p 1687 2179 V 223 2453 V 289 2211
a FF(dFloor)p 430 2453 V 47 w FD([mo)q(de])e Fm(:)6 b(:)g(:)g(:)g(:)p
693 2453 V 60 w FD(Con)o(v)o(ert)18 b FE(double)g FD(to)g(w)o(ord)f
(rounding)j(to)d(min)o(us)i(in\014nit)o(y)m(.)33 b(If)718
2256 y(mo)q(de)14 b(is)g FE(intOver)i FD(or)d FE(cr)n(dOver)k
FD(then)d(v)n(alues)g(outside)h(the)f(\(re-)718 2302
y(sp)q(ectiv)o(ely\))f(signed)e(or)f(unsigned)j(range)d(are)h(trapp)q
(ed.)17 b(If)9 b(trap-)718 2348 y(ping)17 b(is)e(not)g(sp)q(eci\014ed,)
i(then)e(bac)o(k)o(ends)h(should)h(pro)q(duce)f(the)718
2393 y(correct)j(v)n(alue)g(if)f(p)q(ossible.)35 b(The)18
b(top-of-stac)o(k)g(v)n(alue)i(is)e(re-)718 2439 y(placed)d(b)o(y)e
(the)g(result)p 1687 2453 V 223 2544 2 92 v 289 2485
a FF(dToFlt)p 430 2544 V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)h
(:)f(:)g(:)p 693 2544 V 56 w FD(Shorten)13 b FE(double)f
FD(on)g(top-of-stac)o(k)g(to)f FE(\015o)n(at)t FD(.)j(The)e
(top-of-stac)o(k)718 2530 y(v)n(alue)j(is)e(replaced)i(b)o(y)e(the)g
(result)p 1687 2544 V 223 2818 2 274 v 289 2576 a FF(dTrunc)p
430 2818 V 47 w FD([mo)q(de])e Fm(:)6 b(:)g(:)g(:)g(:)p
693 2818 V 60 w FD(Con)o(v)o(ert)14 b FE(double)g FD(to)f(w)o(ord)g
(rounding)j(to)d(zero.)18 b(If)13 b(mo)q(de)g(is)h FE(in-)718
2622 y(tOver)k FD(or)d FE(cr)n(dOver)j FD(then)d(v)n(alues)h(outside)g
(the)f(\(resp)q(ectiv)o(ely\))718 2667 y(signed)g(or)f(unsigned)h
(range)f(are)g(trapp)q(ed.)19 b(If)13 b(trapping)i(is)f(not)718
2713 y(sp)q(eci\014ed,)f(then)d(bac)o(k)o(ends)i(should)f(pro)q(duce)h
(the)e(correct)g(v)n(alue)718 2759 y(if)20 b(p)q(ossible.)39
b(The)19 b(top-of-stac)o(k)h(v)n(alue)h(is)f(replaced)h(b)o(y)f(the)718
2804 y(result)p 1687 2818 V 224 2820 1464 2 v eop
%%Page: 294 300
294 299 bop 224 274 a FN(294)437 b FL(APPENDIX)15 b(A.)27
b(DCODE)14 b(REFERENCE)g(MANUAL)p 224 351 1462 2 v 223
396 2 46 v 253 383 a Fv(op)q(co)q(de)p 428 396 V 64 w(params)p
690 396 V 124 w(description)p 1685 396 V 224 398 1462
2 v 223 444 2 46 v 325 430 a FF(dup1)p 428 444 V 55 w
Fm(:)6 b(:)h(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
690 444 V 57 w FD(Duplicates)15 b(the)f(top)f(v)n(alue)h(on)f(the)h
(stac)o(k)p 1685 444 V 223 489 V 325 476 a FF(endF)p
428 489 V 55 w Fm(:)6 b(:)h(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
690 489 V 57 w FD(Marks)14 b(the)f(end)g(of)g(the)g FE(DCo)n(de)s
FD(s)p 1685 489 V 223 535 V 325 521 a FF(endP)p 428 535
V 55 w Fm(:)6 b(:)h(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
690 535 V 57 w FD(Marks)14 b(the)f(end)g(of)g(the)g(curren)o(t)h(pro)q
(cedure)p 1685 535 V 223 581 V 325 567 a FF(exit)p 428
581 V 55 w Fm(:)6 b(:)h(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
690 581 V 57 w FD(Unconditional)16 b(jump)e(to)f(the)g(pro)q(cedure)h
(epilog)p 1685 581 V 223 718 2 137 v 249 613 a Fw(y)o
FF(flatten)p 428 718 V 54 w Fm(:)6 b(:)h(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)
g(:)g(:)p 690 718 V 57 w FD(T)m(ransforms)18 b(the)f(segmen)o(ted)i
(address)f(on)g(the)g(top)g(of)f(stac)o(k)716 658 y(in)o(to)k(a)f
(unsigned)i(\()p FE(nop)f FD(except)f(for)g(iap)o(x86)i(in)f(16-bit)g
(seg-)716 704 y(men)o(ted)13 b(mo)q(de\))p 1685 718 V
223 809 2 92 v 286 750 a FF(fltRel)p 428 809 V 47 w FD(relop)8
b Fm(:)g(:)e(:)g(:)g(:)g(:)g(:)p 690 809 V 58 w FD(P)o(op)18
b(and)h(compare)f FE(\015o)n(at)t FD(s)e(on)i(top-of-stac)o(k,)h(and)g
(push)f(the)716 795 y(Bo)q(olean)d(result.)j(Righ)o(t)c(op)q(erand)g
(is)g(initially)i(top-of-stac)o(k)p 1685 809 V 223 1083
2 274 v 286 841 a FF(fRound)p 428 1083 V 47 w FD([mo)q(de])11
b Fm(:)6 b(:)g(:)g(:)g(:)p 690 1083 V 61 w FD(Con)o(v)o(ert)11
b FE(\015o)n(at)i FD(to)f(w)o(ord)f(rounding)i(to)f(nearest.)17
b(If)10 b(mo)q(de)i(is)g FE(in-)716 887 y(tOver)18 b
FD(or)d FE(cr)n(dOver)i FD(then)e(v)n(alues)h(outside)h(the)d(\(resp)q
(ectiv)o(ely\))716 932 y(signed)h(or)e(unsigned)j(range)e(are)f(trapp)q
(ed.)19 b(If)13 b(trapping)i(is)f(not)716 978 y(sp)q(eci\014ed,)e(then)
f(bac)o(k)o(ends)g(should)h(pro)q(duce)f(the)f(correct)g(v)n(alue)716
1024 y(if)20 b(p)q(ossible.)38 b(The)20 b(top-of-stac)o(k)g(v)n(alue)g
(is)h(replaced)g(b)o(y)e(the)716 1069 y(result)p 1685
1083 V 223 1357 V 286 1115 a FF(fFloor)p 428 1357 V 47
w FD([mo)q(de])11 b Fm(:)6 b(:)g(:)g(:)g(:)p 690 1357
V 61 w FD(Con)o(v)o(ert)k FE(\015o)n(at)i FD(to)d(w)o(ord)h(rounding)i
(to)e(min)o(us)h(in\014nit)o(y)m(.)18 b(If)9 b(mo)q(de)716
1161 y(is)18 b FE(intOver)i FD(or)d FE(cr)n(dOver)k FD(then)c(v)n
(alues)i(outside)g(the)e(\(resp)q(ec-)716 1206 y(tiv)o(ely\))c(signed)g
(or)f(unsigned)i(range)e(are)g(trapp)q(ed.)18 b(If)11
b(trapping)716 1252 y(is)16 b(not)g(sp)q(eci\014ed,)j(then)d(bac)o(k)o
(ends)h(should)h(pro)q(duce)f(the)f(cor-)716 1297 y(rect)e(v)n(alue)h
(if)f(p)q(ossible.)22 b(The)13 b(top-of-stac)o(k)i(v)n(alue)g(is)f
(replaced)716 1343 y(b)o(y)f(the)g(result)p 1685 1357
V 223 1448 2 92 v 286 1389 a FF(fToDbl)p 428 1448 V 54
w Fm(:)6 b(:)h(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
690 1448 V 57 w FD(Widens)15 b(a)f FE(\015o)n(at)h FD(to)e(a)h
FE(double)s FD(.)i(The)d(top-of-stac)o(k)h(is)g(replaced)716
1434 y(b)o(y)f(the)g(result)p 1685 1448 V 223 1722 2
274 v 286 1480 a FF(fTrunc)p 428 1722 V 47 w FD([mo)q(de])e
Fm(:)6 b(:)g(:)g(:)g(:)p 690 1722 V 61 w FD(Con)o(v)o(ert)16
b FE(\015o)n(at)i FD(to)e(w)o(ord)g(rounding)i(to)e(zero.)25
b(If)16 b(mo)q(de)g(is)h FE(in-)716 1526 y(tOver)h FD(or)d
FE(cr)n(dOver)i FD(then)e(v)n(alues)h(outside)h(the)d(\(resp)q(ectiv)o
(ely\))716 1571 y(signed)h(or)e(unsigned)j(range)e(are)f(trapp)q(ed.)19
b(If)13 b(trapping)i(is)f(not)716 1617 y(sp)q(eci\014ed,)e(then)f(bac)o
(k)o(ends)g(should)h(pro)q(duce)f(the)f(correct)g(v)n(alue)716
1663 y(if)20 b(p)q(ossible.)38 b(The)20 b(top-of-stac)o(k)g(v)n(alue)g
(is)h(replaced)g(b)o(y)e(the)716 1708 y(result)p 1685
1722 V 223 1905 2 183 v 306 1754 a FF(intGE)p 428 1905
V 54 w Fm(:)6 b(:)h(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
690 1905 V 57 w FD(Compares)23 b(t)o(w)o(o)f(top)h(v)n(alues)h(as)f
(signed)h(w)o(ords.)47 b(Returns)716 1800 y FE(TR)o(UE)15
b FD(if)c(the)f(second)i(from)e(the)h(top)g(is)g(greater)g(than)h(or)e
(equal)716 1845 y(to)j(the)g(top.)k(The)c(stac)o(k)g(of)g(the)g
(abstract)g(mac)o(hine)i(is)e(p)q(opp)q(ed)716 1891 y(b)o(y)g(t)o(w)o
(o)p 1685 1905 V 223 2042 2 137 v 306 1937 a FF(intGT)p
428 2042 V 54 w Fm(:)6 b(:)h(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
690 2042 V 57 w FD(Compares)23 b(t)o(w)o(o)f(top)h(v)n(alues)h(as)f
(signed)h(w)o(ords.)47 b(Returns)716 1982 y FE(TR)o(UE)23
b FD(if)c(the)f(second)i(from)e(the)h(top)g(is)g(greater)g(than)g(the)
716 2028 y(top.)e(The)11 b(stac)o(k)h(of)f(the)h(abstract)g(mac)o(hine)
h(is)f(p)q(opp)q(ed)h(b)o(y)f(t)o(w)o(o)p 1685 2042 V
223 2224 2 183 v 306 2074 a FF(intLE)p 428 2224 V 54
w Fm(:)6 b(:)h(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
690 2224 V 57 w FD(Compares)23 b(t)o(w)o(o)f(top)h(v)n(alues)h(as)f
(signed)h(w)o(ords.)47 b(Returns)716 2119 y FE(TR)o(UE)16
b FD(if)c(the)g(second)h(from)f(the)g(top)g(is)g(less)h(than)g(or)e
(equal)j(to)716 2165 y(the)e(top.)17 b(The)12 b(stac)o(k)h(of)f(the)g
(abstract)h(mac)o(hine)h(is)e(p)q(opp)q(ed)i(b)o(y)716
2211 y(t)o(w)o(o)p 1685 2224 V 223 2361 2 137 v 306 2256
a FF(intLS)p 428 2361 V 54 w Fm(:)6 b(:)h(:)f(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)p 690 2361 V 57 w FD(Compares)23 b(t)o(w)o(o)f(top)h(v)n
(alues)h(as)f(signed)h(w)o(ords.)47 b(Returns)716 2302
y FE(TR)o(UE)20 b FD(if)d(the)f(second)i(from)e(the)g(top)h(is)g(less)g
(than)g(the)g(top.)716 2348 y(The)c(stac)o(k)g(of)g(the)g(abstract)h
(mac)o(hine)g(is)g(p)q(opp)q(ed)g(b)o(y)g(t)o(w)o(o)p
1685 2361 V 223 2453 2 92 v 286 2393 a FF(iToDbl)p 428
2453 V 54 w Fm(:)6 b(:)h(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
690 2453 V 57 w FD(Floats)14 b(the)g(top-of-stac)o(k)g(from)f(in)o
(teger)h(to)g FE(double)s FD(.)h(The)f(top-)716 2439
y(of-stac)o(k)f(is)h(replaced)g(b)o(y)f(the)h(result)p
1685 2453 V 223 2544 V 286 2485 a FF(iToFlt)p 428 2544
V 54 w Fm(:)6 b(:)h(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
690 2544 V 57 w FD(Floats)13 b(the)f(top-of-stac)o(k)g(from)g(in)o
(teger)h(to)f FE(\015o)n(at)t FD(.)i(The)e(top-of-)716
2530 y(stac)o(k)h(is)h(replaced)g(b)o(y)g(the)f(result)p
1685 2544 V 223 2681 2 137 v 325 2576 a FF(jump)p 428
2681 V 55 w Fm(:)6 b(:)h(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
690 2681 V 57 w FD(Branc)o(h)14 b(to)f(the)g(address)h(on)g(the)f(top)g
(of)g(the)g(stac)o(k.)18 b(P)o(erforms)716 2622 y(a)11
b(computed)h(goto)f(jump,)g(b)o(y)h(jumping)g(to)f(the)g(address)h(on)f
(the)716 2667 y(top)i(of)g(the)g(stac)o(k,)g(whic)o(h)h(is)g(p)q(opp)q
(ed)p 1685 2681 V 223 2772 2 92 v 266 2713 a FF(lineNum)p
428 2772 V 47 w FD(n)o(um)o(b)q(er)s Fm(:)8 b(:)e(:)g(:)g(:)p
690 2772 V 53 w FD(Marks)18 b(the)g(line)h(n)o(um)o(b)q(er)f(for)f
(diagnostics)j(only)m(.)32 b(T)o(ypically)716 2759 y(generated)14
b(b)o(y)f(compilers)i(in)f(resp)q(onse)g(to)f(the)g Fv({g)g
FD(\015ag)p 1685 2772 V 224 2774 1462 2 v eop
%%Page: 295 301
295 300 bop 224 274 a FL(A.5.)32 b(ST)m(A)m(TEMENTS)985
b FN(295)p 224 351 1462 2 v 223 396 2 46 v 253 383 a
Fv(op)q(co)q(de)p 428 396 V 64 w(params)p 690 396 V 124
w(description)p 1685 396 V 224 398 1462 2 v 223 489 2
92 v 249 430 a Fw(y)o FF(makeAdr)p 428 489 V 54 w Fm(:)6
b(:)h(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p 690 489
V 57 w FD(T)m(ransform)k(the)g(top-of-stac)o(k)h(unsigned)i(in)o(to)e
(an)f(address,)i(this)716 476 y(is)i(the)f(in)o(v)o(erse)h(of)f
FF(flatten)p 1685 489 V 223 809 2 320 v 286 521 a(mkDstP)p
428 809 V 47 w FD(n)o(um)o(b)q(er)s Fm(:)8 b(:)e(:)g(:)g(:)p
690 809 V 53 w FD(This)11 b(instruction)i(p)q(ops)e(the)g(v)n(alue)h
(from)e(the)h(top)g(of)f(the)h(stac)o(k,)716 567 y(and)16
b(mo)o(v)o(es)g(it)g(to)g(the)f(dedicated)j(destination)g(p)q(oin)o
(ter)f(lo)q(ca-)716 613 y(tion.)k(This)14 b(is)h(only)g(used)g(on)f
(arc)o(hitectures)i(suc)o(h)e(as)g FE(SP)m(AR)o(C)716
658 y FD(whic)o(h)i(do)f(not)g(pass)g(destination)j(p)q(oin)o(ters)e
(as)f(an)g(additional)716 704 y(ordinary)21 b(parameter.)36
b(The)20 b(argumen)o(t)g(is)g(the)f(destination)716 750
y(size,)12 b(whic)o(h)g(is)g(used)g(in)g(some)f(con)o(v)o(en)o(tions)i
(as)f(an)f(attribute)i(in)716 795 y(a)g(trap)g(instruction)p
1685 809 V 223 1083 2 274 v 306 841 a FF(mkTmp)p 428
1083 V 47 w FD(n)o(um)o(b)q(er)s Fm(:)8 b(:)e(:)g(:)g(:)p
690 1083 V 53 w FD(Asso)q(ciates)16 b(the)e(top-of-stac)o(k)h(v)n(alue)
h(with)f(the)f(curren)o(t)h(stac)o(k)716 887 y(frame)c(lo)q(cation)j
($fp)f({)g FE(numb)n(er)o FD(.)j(In)11 b(most)h(bac)o(k)o(ends)g(sym)o
(b)q(olic)716 932 y(v)n(alues)17 b(on)g(the)f(stac)o(k)h(will)h(b)q(e)e
(left)h(as)f(suc)o(h.)27 b(Ev)o(en)17 b(for)f(non-)716
978 y(sym)o(b)q(olic)e(v)n(alues)g(bac)o(k)o(ends)g(should)g(tak)o(e)f
(the)f(frame)g(lo)q(cation)716 1024 y(as)17 b(a)f(hin)o(t,)i(and)f
(attempt)g(to)f(k)o(eep)h(the)g(v)n(alue)g(in)h(a)e(mac)o(hine)716
1069 y(register)p 1685 1083 V 223 1448 2 366 v 306 1115
a FF(mkPar)p 428 1448 V 47 w FD(n)o(um)o(b)q(er,)453
1161 y(n)o(um)o(b)q(er,)453 1206 y([)p FF(fpParam)p FD(])t
Fm(:)t(:)6 b(:)p 690 1448 V 716 1115 a FD(This)13 b(instruction)i
(causes)f(the)f(v)n(alue)g(on)g(the)g(top)g(of)f(the)h(stac)o(k)716
1161 y(is)j(to)g(b)q(e)g(p)q(opp)q(ed)h(and)f(transferred)g(to)g(the)g
(parameter)g(lo)q(ca-)716 1206 y(tion.)27 b(It)16 b(tak)o(es)h(t)o(w)o
(o)e(argumen)o(ts.)28 b(The)16 b(\014rst)g(of)g(these)h(is)f(the)716
1252 y(size)c(of)f(the)h(parameter,)f(rounded)i(to)f(the)f(smallest)i
(parameter)716 1297 y(size)j(allo)o(w)o(ed)h(in)f(the)g(mac)o(hine)g
(con)o(v)o(en)o(tions.)26 b(The)16 b(second)g(is)716
1343 y(the)f(parameter)g(o\013set)g(in)g(the)g(assem)o(bly)h(area,)f
(or)f(zero.)22 b(The)716 1389 y(optional)g(mark)o(er)d(indicates)j
(that)d(this)h(is)g(a)f(\015oating)i(p)q(oin)o(t)716
1434 y(parameter)p 1685 1448 V 223 1631 2 183 v 345 1480
a FF(mod)p 428 1631 V 48 w FD(mo)q(de)t Fm(:)7 b(:)g(:)f(:)g(:)g(:)g(:)
p 690 1631 V 54 w FD(T)m(ak)o(es)16 b(the)g(mo)q(dulus)i(of)e(the)g(t)o
(w)o(o)g(v)n(alues)h(on)g(the)f(top)h(of)e(the)716 1526
y(stac)o(k)9 b(with)g(seman)o(tics)h(as)f(sp)q(eci\014ed)i(b)o(y)e(mo)q
(de.)16 b(Righ)o(t)10 b(op)q(erand)716 1571 y(is)17 b(on)g(top.)27
b(The)17 b(stac)o(k)g(is)g(p)q(opp)q(ed)h(b)o(y)e(t)o(w)o(o,)h(and)g
(the)g(result)716 1617 y(pushed)p 1685 1631 V 223 1768
2 137 v 345 1663 a FF(mul)p 428 1768 V 48 w FD([mo)q(de])11
b Fm(:)6 b(:)g(:)g(:)g(:)p 690 1768 V 61 w FD(Multiplies)20
b(the)e(t)o(w)o(o)e(v)n(alues)j(on)e(the)g(top)h(of)e(the)i(stac)o(k)f
(with)716 1708 y(seman)o(tics)e(as)e(sp)q(eci\014ed)i(b)o(y)f(mo)q(de.)
k(The)c(stac)o(k)f(is)h(p)q(opp)q(ed)h(b)o(y)716 1754
y(t)o(w)o(o,)d(and)i(the)f(result)h(pushed)p 1685 1768
V 223 1859 2 92 v 286 1800 a FF(mulDbl)p 428 1859 V 54
w Fm(:)6 b(:)h(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
690 1859 V 57 w FD(Multiplies)14 b(the)c(t)o(w)o(o)g
FE(double)s FD(s)e(on)j(the)g(top-of-stac)o(k.)16 b(The)10
b(stac)o(k)716 1845 y(is)k(p)q(opp)q(ed)g(b)o(y)f(t)o(w)o(o,)g(and)g
(the)g(result)h(pushed)p 1685 1859 V 223 1950 V 286 1891
a FF(mulFlt)p 428 1950 V 54 w Fm(:)6 b(:)h(:)f(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)p 690 1950 V 57 w FD(Multiplies)18 b(the)c(t)o(w)o(o)g
FE(\015o)n(at)t FD(s)e(on)j(the)f(top-of-stac)o(k.)21
b(The)14 b(stac)o(k)716 1937 y(is)g(p)q(opp)q(ed)g(b)o(y)f(t)o(w)o(o,)g
(and)g(the)g(result)h(pushed)p 1685 1950 V 223 2087 2
137 v 286 1982 a FF(negate)p 428 2087 V 47 w FD([mo)q(de])d
Fm(:)6 b(:)g(:)g(:)g(:)p 690 2087 V 61 w FD(Negates)16
b(the)h(in)o(teger)g(on)f(the)h(top-of-stac)o(k.)27 b(If)15
b(mo)q(de)i(is)g FE(in-)716 2028 y(tOver)11 b FD(then)i(an)f(attempt)g
(to)g(negate)h(the)f(minim)o(um)i(in)o(teger)f(is)716
2074 y(trapp)q(ed.)18 b(The)13 b(result)h(replaces)g(the)f(top-of-stac)
o(k)p 1685 2087 V 223 2179 2 92 v 286 2119 a FF(negDbl)p
428 2179 V 54 w Fm(:)6 b(:)h(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
690 2179 V 57 w FD(Negates)12 b(the)g FE(double)g FD(on)h(the)f
(top-of-stac)o(k.)k(The)c(top-of-stac)o(k)716 2165 y(is)i(replaced)g(b)
o(y)f(the)h(result)p 1685 2179 V 223 2270 V 286 2211
a FF(negFlt)p 428 2270 V 54 w Fm(:)6 b(:)h(:)f(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)p 690 2270 V 57 w FD(Negates)16 b(the)g FE(\015o)n(at)h
FD(on)f(the)g(top-of-stac)o(k.)26 b(The)15 b(top-of-stac)o(k)716
2256 y(is)f(replaced)g(b)o(y)f(the)h(result)p 1685 2270
V 223 2361 V 306 2302 a FF(orWrd)p 428 2361 V 54 w Fm(:)6
b(:)h(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p 690 2361
V 57 w FD(Bit)o(wise)16 b FE(OR)g FD(of)e(the)h(t)o(w)o(o)f
(top-of-stac)o(k)h(w)o(ords.)22 b(The)14 b(stac)o(k)h(is)716
2348 y(p)q(opp)q(ed)f(b)o(y)g(t)o(w)o(o,)e(and)i(the)f(result)h(pushed)
p 1685 2361 V 223 2407 2 46 v 325 2393 a FF(pop1)p 428
2407 V 55 w Fm(:)6 b(:)h(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
690 2407 V 57 w FD(P)o(op)13 b(the)g(stac)o(k)h(b)o(y)f(one)h(w)o(ord)p
1685 2407 V 223 2544 2 137 v 266 2439 a FF(popCall)p
428 2544 V 47 w FD(n)o(um)o(b)q(er)s Fm(:)8 b(:)e(:)g(:)g(:)p
690 2544 V 53 w FD(Call)16 b(the)e(pro)q(cedure)i(whose)f(address)h(is)
f(on)g(the)g(top-of-stac)o(k)716 2485 y(with)e(the)g(sp)q(eci\014ed)h
(n)o(um)o(b)q(er)g(of)e(parameters.)18 b(The)12 b(address)i(is)716
2530 y(p)q(opp)q(ed)g(from)f(the)g(stac)o(k)p 1685 2544
V 223 2635 2 92 v 306 2576 a FF(popFi)p 428 2635 V 47
w FD(n)o(um)o(b)q(er)s Fm(:)8 b(:)e(:)g(:)g(:)p 690 2635
V 53 w FD(P)o(op)16 b(the)g(top-of-stac)o(k)g(v)n(alue)h(in)o(to)f(a)g
(lo)q(cation)i(uniquely)g(but)716 2622 y(arbitrarily)e(asso)q(ciated)f
(with)e(the)g(ordinal)i(n)o(um)o(b)q(er)p 1685 2635 V
223 2727 V 266 2667 a FF(popRetD)p 428 2727 V 54 w Fm(:)6
b(:)h(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p 690 2727
V 57 w FD(P)o(op)j(the)g(top-of-stac)o(k)h FE(double)f
FD(in)o(to)h(the)f(double)i(precision)g FE(dou-)716 2713
y(ble)k FD(return)e(lo)q(cation)p 1685 2727 V 224 2728
1462 2 v eop
%%Page: 296 302
296 301 bop 224 274 a FN(296)437 b FL(APPENDIX)15 b(A.)27
b(DCODE)14 b(REFERENCE)g(MANUAL)p 224 351 1484 2 v 223
396 2 46 v 275 383 a Fv(op)q(co)q(de)p 450 396 V 65 w(params)p
712 396 V 123 w(description)p 1707 396 V 224 398 1484
2 v 223 489 2 92 v 289 430 a FF(popRetF)p 450 489 V 54
w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
712 489 V 57 w FD(P)o(op)16 b(the)f(top-of-stac)o(k)g
FE(\015o)n(at)j FD(in)o(to)e(the)f(single)i(precision)g
FE(\015o)n(at)738 476 y FD(return)d(lo)q(cation)h(\(see)e(note)g(2\))p
1707 489 V 223 535 2 46 v 289 521 a FF(popRetW)p 450
535 V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
712 535 V 57 w FD(P)o(op)13 b(the)h(top-of-stac)o(k)f(in)o(to)h(the)f
(w)o(ord)g(return)g(lo)q(cation)p 1707 535 V 223 626
2 92 v 308 567 a FF(pshAdr)p 450 626 V 48 w FD(iden)o(ti\014er)f
Fm(:)6 b(:)g(:)p 712 626 V 59 w FD(Push)11 b(the)f(address)i(of)e(the)g
(statically)j(allo)q(cated)f(v)n(ariable)h FE(iden-)738
613 y(ti\014er)j FD(on)o(to)d(the)g(stac)o(k)p 1707 626
V 223 718 V 308 658 a FF(pshDsp)p 450 718 V 48 w FD(index,)f(o\013set)p
712 718 V 62 w(Push)e(the)f(address)h(p)q(oin)o(ted)h(to)e(b)o(y)h(the)
f(displa)o(y)i(v)o(ector)f(elemen)o(t)738 704 y FE(display)s
FD([)p FE(inde)o(x)5 b FD(])k(+)k FE(o\013set)n FD(.)p
1707 718 V 223 946 2 229 v 289 750 a FF(pshDstP)p 450
946 V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
712 946 V 57 w FD(This)13 b(instruction)i(pushes)f(the)e(con)o(ten)o
(ts)h(of)f(the)h(dedicated)h(lo-)738 795 y(cation)c(whic)o(h)g(holds)h
(the)e(address)h(of)e(the)i(return)f(p)q(oin)o(ter.)17
b(This)738 841 y(is)g(only)g(used)g(on)g(arc)o(hitectures)h(suc)o(h)e
(as)h FE(SP)m(AR)o(C)e FD(whic)o(h)i(do)738 887 y(not)g(pass)g
(destination)h(p)q(oin)o(ters)g(as)f(an)f(additional)k(ordinary)738
932 y(parameter)p 1707 946 V 223 1037 2 92 v 328 978
a FF(pshFi)p 450 1037 V 48 w FD(n)o(um)o(b)q(er)s Fm(:)7
b(:)f(:)g(:)g(:)p 712 1037 V 53 w FD(Push)20 b(con)o(ten)o(ts)g(of)e
(the)i(lo)q(cation)h(uniquely)h(but)d(arbitrarily)738
1024 y(asso)q(ciated)c(with)e(the)g(ordinal)j(n)o(um)o(b)q(er)e(on)o
(to)f(the)g(stac)o(k)p 1707 1037 V 223 1129 V 328 1069
a FF(pshFP)p 450 1129 V 48 w FD(o\013set)5 b Fm(:)i(:)f(:)g(:)g(:)g(:)g
(:)p 712 1129 V 55 w FD(Push)22 b(the)g(address)h(at)f(the)f(giv)o(en)i
(o\013set)g(from)e(the)h(frame)738 1115 y(p)q(oin)o(ter)14
b($)q(fp)e(+)h FE(o\013set)p 1707 1129 V 223 1174 2 46
v 308 1161 a FF(pshLit)p 450 1174 V 48 w FD(n)o(um)o(b)q(er)s
Fm(:)7 b(:)f(:)g(:)g(:)p 712 1174 V 53 w FD(Push)14 b(the)f(literal)i
(on)o(to)e(the)h(stac)o(k)f(\(see)g(note)g(1\))p 1707
1174 V 223 1220 V 289 1206 a FF(pshRetD)p 450 1220 V
54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
712 1220 V 57 w FD(Cop)o(y)k(the)g FE(double)h FD(in)g(the)f(return)g
(lo)q(cation)i(to)e(the)g(top-of-stac)o(k)p 1707 1220
V 223 1266 V 289 1252 a FF(pshRetF)p 450 1266 V 54 w
Fm(:)c(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p 712
1266 V 57 w FD(Cop)o(y)13 b(the)g FE(\015o)n(at)i FD(in)f(the)f(return)
h(lo)q(cation)h(to)e(the)g(top-of-stac)o(k)p 1707 1266
V 223 1357 2 92 v 269 1297 a FF(pshRetSB)p 450 1357 V
54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
712 1357 V 57 w FD(Cop)o(y)19 b(the)g FE(signe)n(d)e(byte)j
FD(in)g(the)f(return)g(lo)q(cation)i(and)f(sign-)738
1343 y(extend)p 1707 1357 V 223 1448 V 249 1389 a FF(pshRetS16)p
450 1448 V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
712 1448 V 57 w FD(Cop)o(y)16 b(the)f FE(signe)n(d)f(16-bit)g(wor)n(d)
20 b FD(in)c(the)f(return)h(lo)q(cation)i(and)738 1434
y(sign-extend)p 1707 1448 V 223 1540 V 249 1480 a FF(pshRetS32)p
450 1540 V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
712 1540 V 57 w FD(Cop)o(y)16 b(the)f FE(signe)n(d)f(32-bit)g(wor)n(d)
20 b FD(in)c(the)f(return)h(lo)q(cation)i(and)738 1526
y(sign-extend)p 1707 1540 V 223 1631 V 269 1571 a FF(pshRetUB)p
450 1631 V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
712 1631 V 57 w FD(Cop)o(y)14 b(the)g FE(unsigne)n(d)e(byte)j
FD(in)g(the)f(return)g(lo)q(cation)i(and)f(zero-)738
1617 y(extend)p 1707 1631 V 223 1722 V 249 1663 a FF(pshRetU16)p
450 1722 V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
712 1722 V 57 w FD(Cop)o(y)11 b(the)g FE(unsigne)n(d)e(16-bit)g(wor)n
(d)15 b FD(in)c(the)g(return)g(lo)q(cation)i(and)738
1708 y(zero-extend)p 1707 1722 V 223 1813 V 249 1754
a FF(pshRetU32)p 450 1813 V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)p 712 1813 V 57 w FD(Cop)o(y)11 b(the)g
FE(unsigne)n(d)e(32-bit)g(wor)n(d)15 b FD(in)c(the)g(return)g(lo)q
(cation)i(and)738 1800 y(zero-extend)p 1707 1813 V 223
1859 2 46 v 289 1845 a FF(pshRetW)p 450 1859 V 54 w Fm(:)6
b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p 712 1859
V 57 w FD(Pushes)14 b(the)f(w)o(ord)g(return)h(register)g(to)f(the)g
(top)g(of)g(stac)o(k)p 1707 1859 V 223 1950 2 92 v 308
1891 a FF(pshTmp)p 450 1950 V 48 w FD(n)o(um)o(b)q(er)s
Fm(:)7 b(:)f(:)g(:)g(:)p 712 1950 V 53 w FD(Pushes)16
b(the)f(v)n(alue)g(asso)q(ciated)i(with)e(lo)q(cation)i($fp)c({)g
FE(numb)n(er)738 1937 y FD(on)o(to)g(the)h(stac)o(k.)j(Matc)o(hes)d
(mkTmp)p 1707 1950 V 223 1996 2 46 v 347 1982 a FF(pshZ)p
450 1996 V 56 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
712 1996 V 57 w FD(Pushes)14 b(the)f(literal)i(0)e(\(zero\))p
1707 1996 V 223 2133 2 137 v 328 2028 a FF(relEQ)p 450
2133 V 55 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
712 2133 V 57 w FD(Compares)11 b(the)g(t)o(w)o(o)f(top)h(w)o(ord-sized)
h(v)n(alues.)17 b(Returns)12 b FE(TR)o(UE)738 2074 y
FD(if)h(the)f(second)i(from)e(the)g(top)h(is)g(equal)h(to)e(the)h(top.)
k(The)12 b(stac)o(k)738 2119 y(is)i(p)q(opp)q(ed)g(b)o(y)g(t)o(w)o(o)p
1707 2133 V 223 2270 V 328 2165 a FF(relNE)p 450 2270
V 55 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
712 2270 V 57 w FD(Compares)15 b(t)o(w)o(o)f(top)g(w)o(ord-sized)i(v)n
(alues.)22 b(Returns)15 b FE(TR)o(UE)k FD(if)738 2211
y(the)13 b(second)h(from)f(the)g(top)g(not)g(equal)h(to)f(the)g(top.)18
b(The)12 b(stac)o(k)738 2256 y(is)i(p)q(opp)q(ed)g(b)o(y)g(t)o(w)o(o)p
1707 2270 V 223 2407 V 367 2302 a FF(rem)p 450 2407 V
49 w FD(mo)q(de)t Fm(:)7 b(:)f(:)g(:)g(:)g(:)g(:)p 712
2407 V 54 w FD(T)m(ak)o(es)14 b(the)g(remainder)h(of)e(the)h(t)o(w)o(o)
f(v)n(alues)i(on)f(the)g(top)g(of)g(the)738 2348 y(stac)o(k)g(with)g
(seman)o(tics)h(as)f(sp)q(eci\014ed)i(b)o(y)e(mo)q(de.)19
b(The)14 b(stac)o(k)g(is)738 2393 y(p)q(opp)q(ed)h(b)o(y)e(t)o(w)o(o,)f
(and)i(the)f(result)h(is)g(pushed)p 1707 2407 V 223 2590
2 183 v 308 2439 a FF(rotate)p 450 2590 V 55 w Fm(:)6
b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p 712 2590
V 57 w FD(Rotates)19 b(the)f FE(wor)n(d)k FD(second)d(on)g(stac)o(k)f
(left)h(or)f(righ)o(t)h(b)o(y)g(the)738 2485 y(n)o(um)o(b)q(er)11
b(of)e(places)i(sp)q(eci\014ed)h(b)o(y)e(the)g(top-of-stac)o(k)h(v)n
(alue.)17 b(P)o(os-)738 2530 y(itiv)o(e)g(rotates)f(are)f(left)o(w)o
(ard.)25 b(The)16 b(stac)o(k)g(is)g(p)q(opp)q(ed)h(b)o(y)f(t)o(w)o(o,)
738 2576 y(and)e(the)f(result)h(is)f(pushed)p 1707 2590
V 224 2591 1484 2 v eop
%%Page: 297 303
297 302 bop 224 274 a FL(A.5.)32 b(ST)m(A)m(TEMENTS)985
b FN(297)p 224 351 1464 2 v 223 396 2 46 v 256 383 a
Fv(op)q(co)q(de)p 430 396 V 64 w(params)p 693 396 V 123
w(description)p 1687 396 V 224 398 1464 2 v 223 672 2
274 v 269 430 a FF(setExcl)p 430 672 V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)
g(:)g(:)g(:)h(:)f(:)g(:)p 693 672 V 56 w FD(Excludes)15
b(the)e(bit)h(sp)q(eci\014ed)h(b)o(y)e(the)g(v)n(alue)h(on)f(the)g(top)
g(of)g(the)718 476 y(stac)o(k)i(from)f(the)g(w)o(ord-sized)h(bitset)g
(second)g(on)f(the)g(stac)o(k.)21 b(If)718 521 y(a)12
b(range)f(test)g(is)h(required)h(on)e(the)h(bit-sp)q(ecifying)i
(ordinal,)f(this)718 567 y(should)19 b(b)q(e)f(done)f(explicitl)q(y)m
(.)32 b(Implemen)o(tations)19 b(are)e(free)g(to)718 613
y(p)q(erform)c(the)f(op)q(eration)i(mo)q(dulo-)p FE(bits-in-wor)n(d)p
FD(.)i(The)c(stac)o(k)h(is)718 658 y(p)q(opp)q(ed)i(b)o(y)e(t)o(w)o(o,)
g(and)g(the)g(result)h(pushed)p 1687 672 V 223 900 2
229 v 308 704 a FF(setIn)p 430 900 V 55 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)h(:)f(:)g(:)p 693 900 V 56 w FD(T)m(ests)21
b(if)h(the)f(bit)i(sp)q(eci\014ed)g(b)o(y)f(the)f(v)n(alue)i(on)e(the)h
(top)f(of)718 750 y(the)d(stac)o(k)g(is)g(set)f(in)h(the)g(w)o
(ord-sized)h(bitset)f(second)g(on)g(the)718 795 y(stac)o(k.)29
b(Returns)17 b(a)g(Bo)q(olean)h(on)f(the)g(top-of-stac)o(k.)28
b(T)m(op-of-)718 841 y(stac)o(k)19 b(w)o(ord)e(is)i(tak)o(en)f(mo)q
(dulo-)p FE(bits-in-wor)n(d)p FD(.)30 b(The)17 b(stac)o(k)i(is)718
887 y(p)q(opp)q(ed)c(b)o(y)e(t)o(w)o(o,)g(and)g(the)g(result)h(pushed)p
1687 900 V 223 1174 2 274 v 269 932 a FF(setIncl)p 430
1174 V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)h(:)f(:)g(:)p
693 1174 V 56 w FD(Includes)16 b(the)e(bit)h(sp)q(eci\014ed)g(b)o(y)g
(the)f(v)n(alue)h(on)f(the)g(top)g(of)g(the)718 978 y(stac)o(k)h(from)f
(the)g(w)o(ord-sized)h(bitset)g(second)g(on)f(the)g(stac)o(k.)21
b(If)718 1024 y(a)12 b(range)f(test)g(is)h(required)h(on)e(the)h
(bit-sp)q(ecifying)i(ordinal,)f(this)718 1069 y(should)19
b(b)q(e)f(done)f(explicitl)q(y)m(.)32 b(Implemen)o(tations)19
b(are)e(free)g(to)718 1115 y(p)q(erform)c(the)f(op)q(eration)i(mo)q
(dulo-)p FE(bits-in-wor)n(d)p FD(.)i(The)c(stac)o(k)h(is)718
1161 y(p)q(opp)q(ed)i(b)o(y)e(t)o(w)o(o,)g(and)g(the)g(result)h(pushed)
p 1687 1174 V 223 1311 2 137 v 308 1206 a FF(setGE)p
430 1311 V 55 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)h(:)f(:)g(:)p
693 1311 V 56 w FD(Compares)22 b(the)f(t)o(w)o(o)f(top)h(v)n(alues)h
(on)g(the)e(stac)o(k.)41 b(Returns)718 1252 y FE(TR)o(UE)17
b FD(if)12 b(the)g(set)g(second)i(from)d(the)i(top)f(is)h(a)f(sup)q
(erset)h(of)f(the)718 1297 y(top.)18 b(The)13 b(stac)o(k)g(is)h(p)q
(opp)q(ed)g(b)o(y)f(t)o(w)o(o,)g(and)g(the)g(result)h(pushed)p
1687 1311 V 223 1448 V 308 1343 a FF(setLE)p 430 1448
V 55 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)h(:)f(:)g(:)p
693 1448 V 56 w FD(Compares)22 b(the)f(t)o(w)o(o)f(top)h(v)n(alues)h
(on)g(the)e(stac)o(k.)41 b(Returns)718 1389 y FE(TR)o(UE)20
b FD(if)15 b(the)g(set)g(second)g(from)g(the)g(top)g(is)h(a)f(subset)g
(of)g(the)718 1434 y(top.)j(The)13 b(stac)o(k)g(is)h(p)q(opp)q(ed)g(b)o
(y)f(t)o(w)o(o,)g(and)g(the)g(result)h(pushed)p 1687
1448 V 223 1585 V 289 1480 a FF(shLeft)p 430 1585 V 54
w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)h(:)f(:)g(:)p
693 1585 V 56 w FD(Shifts)12 b(the)f(v)n(alue)g(second)h(on)e(the)h
(stac)o(k)g(left)g(b)o(y)f(the)h(n)o(um)o(b)q(er)g(of)718
1526 y(places)g(sp)q(eci\014ed)g(b)o(y)f(the)f(unsigned)j(v)n(alue)e
(on)g(the)f(top-of-stac)o(k.)718 1571 y(The)k(stac)o(k)h(is)f(p)q(opp)q
(ed)i(b)o(y)e(t)o(w)o(o,)f(and)i(the)f(result)h(pushed)p
1687 1585 V 223 1768 2 183 v 289 1617 a FF(shiftV)p 430
1768 V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)h(:)f(:)g(:)p
693 1768 V 56 w FD(Shifts)16 b(the)e(v)n(alue)i(second)g(on)e(the)h
(stac)o(k)g(left)f(or)h(righ)o(t)g(b)o(y)g(the)718 1663
y(n)o(um)o(b)q(er)k(of)e(places)i(sp)q(eci\014ed)g(b)o(y)f(the)g(in)o
(teger)g(v)n(alue)h(on)f(the)718 1708 y(top-of-stac)o(k.)29
b(P)o(ositiv)o(e)19 b(shifts)f(are)f(left)o(w)o(ard.)28
b(The)17 b(stac)o(k)h(is)718 1754 y(p)q(opp)q(ed)d(b)o(y)e(t)o(w)o(o,)g
(and)g(the)g(result)h(pushed)p 1687 1768 V 223 1950 V
249 1800 a FF(shRightS)p 430 1950 V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)h(:)f(:)g(:)p 693 1950 V 56 w FD(Shifts)16
b(the)e(signed)i(v)n(alue)f(second)h(on)e(the)h(stac)o(k)f(righ)o(t)h
(b)o(y)g(the)718 1845 y(n)o(um)o(b)q(er)g(of)f(places)h(sp)q(eci\014ed)
h(b)o(y)e(the)g(unsigned)i(v)n(alue)f(on)f(the)718 1891
y(top-of-stac)o(k.)30 b(This)18 b(is)g(an)f(arithmetic)i(shift.)30
b(The)17 b(stac)o(k)h(is)718 1937 y(p)q(opp)q(ed)d(b)o(y)e(t)o(w)o(o,)g
(and)g(the)g(result)h(pushed)p 1687 1950 V 223 2133 V
249 1982 a FF(shRightU)p 430 2133 V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)h(:)f(:)g(:)p 693 2133 V 56 w FD(Shifts)11
b(the)g(unsigned)h(v)n(alue)f(second)g(on)f(the)g(stac)o(k)h(righ)o(t)g
(b)o(y)f(the)718 2028 y(n)o(um)o(b)q(er)15 b(of)f(places)h(sp)q
(eci\014ed)h(b)o(y)e(the)g(unsigned)i(v)n(alue)f(on)f(the)718
2074 y(top-of-stac)o(k.)k(This)c(is)f(a)g(logical)j(shift.)i(The)13
b(stac)o(k)g(is)h(p)q(opp)q(ed)718 2119 y(b)o(y)g(t)o(w)o(o,)e(and)i
(the)f(result)h(pushed)p 1687 2133 V 223 2270 2 137 v
308 2165 a FF(slash)p 430 2270 V 48 w FD(mo)q(de)t Fm(:)7
b(:)f(:)g(:)g(:)g(:)g(:)p 693 2270 V 54 w FD(Divides)18
b(the)e(t)o(w)o(o)f(v)n(alues)h(on)g(the)f(top)h(of)f(the)h(stac)o(k)f
(with)h(se-)718 2211 y(man)o(tics)i(as)e(sp)q(eci\014ed)i(b)o(y)f(mo)q
(de.)27 b(The)16 b(stac)o(k)h(is)g(p)q(opp)q(ed)h(b)o(y)718
2256 y(t)o(w)o(o,)13 b(and)g(the)g(result)h(pushed)p
1687 2270 V 223 2453 2 183 v 347 2302 a FF(sub)p 430
2453 V 49 w FD([mo)q(de])d Fm(:)6 b(:)g(:)g(:)g(:)p 693
2453 V 60 w FD(Subtracts)19 b(the)f(t)o(w)o(o)g(v)n(alues)h(on)f(the)g
(top)g(of)g(the)g(stac)o(k)g(with)718 2348 y(o)o(v)o(er\015o)o(w)f
(trapping)g(seman)o(tics)g(as)f(sp)q(eci\014ed)i(b)o(y)e(mo)q(de.)26
b(The)718 2393 y(righ)o(t)12 b(op)q(erand)g(is)g(on)f(top.)16
b(The)11 b(stac)o(k)g(is)h(p)q(opp)q(ed)g(b)o(y)f(t)o(w)o(o,)f(and)718
2439 y(the)k(result)g(pushed)p 1687 2453 V 223 2544 2
92 v 289 2485 a FF(subDbl)p 430 2544 V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)
g(:)g(:)g(:)h(:)f(:)g(:)p 693 2544 V 56 w FD(Subtract)15
b(the)e(t)o(w)o(o)g FE(double)s FD(s)e(on)j(the)f(top-of-stac)o(k.)19
b(The)13 b(stac)o(k)718 2530 y(is)h(p)q(opp)q(ed)h(b)o(y)e(t)o(w)o(o,)f
(and)i(the)f(result)h(pushed)p 1687 2544 V 223 2635 V
289 2576 a FF(subFlt)p 430 2635 V 54 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)h(:)f(:)g(:)p 693 2635 V 56 w FD(Subtract)14 b(the)f(t)o(w)o(o)f
FE(\015o)n(at)t FD(s)e(on)j(the)g(top-of-stac)o(k.)k(The)c(stac)o(k)g
(is)718 2622 y(p)q(opp)q(ed)i(b)o(y)e(t)o(w)o(o,)g(and)g(the)g(result)h
(pushed)p 1687 2635 V 223 2681 2 46 v 328 2667 a FF(swap)p
430 2681 V 55 w Fm(:)6 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)h(:)f(:)g(:)p
693 2681 V 56 w FD(Sw)o(aps)14 b(the)f(t)o(w)o(o)g(top)g(v)n(alues)h
(on)g(the)f(stac)o(k)p 1687 2681 V 224 2683 1464 2 v
eop
%%Page: 298 304
298 303 bop 224 274 a FN(298)437 b FL(APPENDIX)15 b(A.)27
b(DCODE)14 b(REFERENCE)g(MANUAL)p 224 351 1458 2 v 223
396 2 46 v 249 383 a Fv(op)q(co)q(de)p 424 396 V 65 w(params)p
686 396 V 123 w(description)p 1681 396 V 224 398 1458
2 v 223 489 2 92 v 282 430 a FF(switch)p 424 489 V 48
w FD(iden)o(ti\014er)d Fm(:)c(:)f(:)p 686 489 V 59 w
FD(P)o(erform)k(a)h(case)g(statemen)o(t)g(jump)g(using)h(the)e(top)h
(of)g(the)f(stac)o(k)712 476 y(as)j(an)g(index)i(in)o(to)f(a)f(jump)g
(table)h(at)f(lab)q(el)i FE(identi\014er)p 1681 489 V
223 626 2 137 v 321 521 a FF(test)p 424 626 V 49 w FD(iden)o(ti\014er,)
450 567 y(n)o(um)o(b)q(er,)450 613 y(n)o(um)o(b)q(er)s
Fm(:)7 b(:)f(:)g(:)g(:)p 686 626 V 712 521 a FD(P)o(erform)11
b(the)f(sp)q(eci\014ed)j(test-and-trap)e(op)q(eration)i(on)e(the)g
(top-)712 567 y(of-stac)o(k)i(datum,)g(then)h(p)q(op)g(the)f(stac)o(k)p
1681 626 V 223 718 2 92 v 321 658 a FF(trap)p 424 718
V 49 w FD(iden)o(ti\014er,)450 704 y(n)o(um)o(b)q(er)s
Fm(:)7 b(:)f(:)g(:)g(:)p 686 718 V 712 658 a FD(Same)13
b(as)h FF(call)d FD(except)i(no)h(return)f(is)h(exp)q(ected)p
1681 718 V 223 809 V 282 750 a FF(uToDbl)p 424 809 V
54 w Fm(:)7 b(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
686 809 V 57 w FD(Floats)39 b(the)f(top-of-stac)o(k)g(from)f(unsigned)j
(to)e FE(double)712 795 y FD(\()p FE(LFLO)o(A)m(T)5 b
FD(\).)13 b(The)g(top-of-stac)o(k)g(is)h(replaced)g(b)o(y)g(the)f
(result)p 1681 809 V 223 900 V 282 841 a FF(uToFlt)p
424 900 V 54 w Fm(:)7 b(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)p
686 900 V 57 w FD(Floats)21 b(the)e(unsigned)j(v)n(alue)f(on)f(the)g
(top-of-stac)o(k)g(to)f FE(\015o)n(at)712 887 y FD(\()p
FE(SFLO)o(A)m(T)5 b FD(\))13 b(The)g(top-of-stac)o(k)g(is)h(replaced)g
(b)o(y)f(the)h(result)p 1681 900 V 223 992 V 282 932
a FF(xorWrd)p 424 992 V 54 w Fm(:)7 b(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)p 686 992 V 57 w FD(Bit)o(wise)13 b(exclusiv)o(e)i
FE(OR)f FD(of)e(the)h(t)o(w)o(o)e(top)i(v)n(alues.)18
b(The)12 b(stac)o(k)h(is)712 978 y(p)q(opp)q(ed)i(b)o(y)e(t)o(w)o(o,)f
(and)i(the)f(result)h(pushed)p 1681 992 V 224 993 1458
2 v 224 1078 a FO(Note)i(1)224 1148 y FD(Curren)o(t)i(bac)o(k)o(ends)h
(assume)f(that)g(\015oating)h(p)q(oin)o(t)f(instructions)i(nev)o(er)e
(ha)o(v)o(e)g(op)q(erands)h(that)224 1194 y(ha)o(v)o(e)14
b(b)q(een)g(pushed)g(on)f(the)g(stac)o(k)h(as)f(literals.)224
1296 y FO(Note)j(2)224 1365 y FD(F)m(or)d(mac)o(hines)h(whic)o(h)f(use)
f(an)h(in)o(teger)h(register)f(for)f(returning)i(single)g(precision)h
(\015oating)f(p)q(oin)o(t)224 1411 y(v)n(alues)h FE(p)n(opR)n(etF)h
FD(and)d FE(p)n(opR)n(etW)19 b FD(will)14 b(b)q(e)f(treated)h(as)f
(synon)o(yms.)224 1548 y FI(A.6)67 b(Limitations)24 b(on)f(the)f(con)n
(trol)h(\015o)n(w)224 1639 y FK(DCo)n(de)15 b FN(places)d(the)g(follo)o
(wing)c(restrictions)13 b(on)e(the)g(con)o(trol)g(\015o)o(w)g(p)q
(ermitted)g(in)g(program)224 1689 y(represen)o(tations.)287
1772 y Ft(\017)20 b FN(all)12 b(con)o(trol)h(\015o)o(w)g(paths)h
(leading)e(to)h(an)o(y)g(lab)q(el)g(in)g(the)h(co)q(de)g(m)o(ust)e(ha)o
(v)o(e)h(the)h(same)328 1822 y(stac)o(k)h(heigh)o(t)e(along)g(all)g
(edges)h(leading)f(to)h(the)h(lab)q(el)287 1905 y Ft(\017)20
b FN(all)11 b(con)o(trol)i(transfers,)g(whether)h(conditional)d(or)i
(unconditional,)e(m)o(ust)g(jump)g(for-)328 1955 y(w)o(ard,)i(except)j
(for)d(bac)o(k-edges)i(of)e(lo)q(ops.)18 b(All)13 b(the)h(bac)o
(k-edges)h(of)e(an)o(y)h(particular)328 2005 y(lo)q(op)f(m)o(ust)g(b)q
(e)i(enclosed)g(in)e(a)h FK(.LOOP,)g(.ENDLOOP)k FN(directiv)o(e)c(pair)
287 2088 y Ft(\017)20 b FN(the)15 b(lo)q(op)e(mark)o(er)g(directiv)o
(es)i(of)e(nested)i(lo)q(ops)f(m)o(ust)e(b)q(e)j(prop)q(erly)f(nested)
224 2171 y(Bac)o(k)o(ends)k(whic)o(h)f(p)q(erform)f(global)g(data\015o)
o(w)g(analysis)g(ma)o(y)f(v)o(ery)i(w)o(ell)f(not)h(need)h(this)224
2220 y(information.)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
